/*! For license information please see main.76b50aa6.js.LICENSE.txt */
(()=>{"use strict";var t={85:t=>{function e(t,e,s){s=s||2;var n,o,a,h,u,d,g,p=e&&e.length,y=p?e[0]*s:t.length,m=i(t,0,y,s,!0),v=[];if(!m||m.next===m.prev)return v;if(p&&(m=function(t,e,s,r){var n,o,a,h=[];for(n=0,o=e.length;n<o;n++)(a=i(t,e[n]*r,n<o-1?e[n+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),h.push(f(a));for(h.sort(l),n=0;n<h.length;n++)s=c(h[n],s);return s}(t,e,m,s)),t.length>80*s){n=a=t[0],o=h=t[1];for(var x=s;x<y;x+=s)(u=t[x])<n&&(n=u),(d=t[x+1])<o&&(o=d),u>a&&(a=u),d>h&&(h=d);g=0!==(g=Math.max(a-n,h-o))?32767/g:0}return r(m,v,s,n,o,g,0),v}function i(t,e,i,s,r){var n,o;if(r===M(t,e,i,s)>0)for(n=e;n<i;n+=s)o=E(n,t[n],t[n+1],o);else for(n=i-s;n>=e;n-=s)o=E(n,t[n],t[n+1],o);return o&&m(o,o.next)&&(k(o),o=o.next),o}function s(t,e){if(!t)return t;e||(e=t);var i,s=t;do{if(i=!1,s.steiner||!m(s,s.next)&&0!==y(s.prev,s,s.next))s=s.next;else{if(k(s),(s=e=s.prev)===s.next)break;i=!0}}while(i||s!==e);return e}function r(t,e,i,l,c,u,f){if(t){!f&&u&&function(t,e,i,s){var r=t;do{0===r.z&&(r.z=d(r.x,r.y,e,i,s)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,s,r,n,o,a,h,l=1;do{for(i=t,t=null,n=null,o=0;i;){for(o++,s=i,a=0,e=0;e<l&&(a++,s=s.nextZ);e++);for(h=l;a>0||h>0&&s;)0!==a&&(0===h||!s||i.z<=s.z)?(r=i,i=i.nextZ,a--):(r=s,s=s.nextZ,h--),n?n.nextZ=r:t=r,r.prevZ=n,n=r;i=s}n.nextZ=null,l*=2}while(o>1)}(r)}(t,l,c,u);for(var g,p,y=t;t.prev!==t.next;)if(g=t.prev,p=t.next,u?o(t,l,c,u):n(t))e.push(g.i/i|0),e.push(t.i/i|0),e.push(p.i/i|0),k(t),t=p.next,y=p.next;else if((t=p)===y){f?1===f?r(t=a(s(t),e,i),e,i,l,c,u,2):2===f&&h(t,e,i,l,c,u):r(s(t),e,i,l,c,u,1);break}}}function n(t){var e=t.prev,i=t,s=t.next;if(y(e,i,s)>=0)return!1;for(var r=e.x,n=i.x,o=s.x,a=e.y,h=i.y,l=s.y,c=r<n?r<o?r:o:n<o?n:o,u=a<h?a<l?a:l:h<l?h:l,d=r>n?r>o?r:o:n>o?n:o,f=a>h?a>l?a:l:h>l?h:l,p=s.next;p!==e;){if(p.x>=c&&p.x<=d&&p.y>=u&&p.y<=f&&g(r,a,n,h,o,l,p.x,p.y)&&y(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function o(t,e,i,s){var r=t.prev,n=t,o=t.next;if(y(r,n,o)>=0)return!1;for(var a=r.x,h=n.x,l=o.x,c=r.y,u=n.y,f=o.y,p=a<h?a<l?a:l:h<l?h:l,m=c<u?c<f?c:f:u<f?u:f,v=a>h?a>l?a:l:h>l?h:l,x=c>u?c>f?c:f:u>f?u:f,b=d(p,m,e,i,s),S=d(v,x,e,i,s),A=t.prevZ,E=t.nextZ;A&&A.z>=b&&E&&E.z<=S;){if(A.x>=p&&A.x<=v&&A.y>=m&&A.y<=x&&A!==r&&A!==o&&g(a,c,h,u,l,f,A.x,A.y)&&y(A.prev,A,A.next)>=0)return!1;if(A=A.prevZ,E.x>=p&&E.x<=v&&E.y>=m&&E.y<=x&&E!==r&&E!==o&&g(a,c,h,u,l,f,E.x,E.y)&&y(E.prev,E,E.next)>=0)return!1;E=E.nextZ}for(;A&&A.z>=b;){if(A.x>=p&&A.x<=v&&A.y>=m&&A.y<=x&&A!==r&&A!==o&&g(a,c,h,u,l,f,A.x,A.y)&&y(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;E&&E.z<=S;){if(E.x>=p&&E.x<=v&&E.y>=m&&E.y<=x&&E!==r&&E!==o&&g(a,c,h,u,l,f,E.x,E.y)&&y(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function a(t,e,i){var r=t;do{var n=r.prev,o=r.next.next;!m(n,o)&&v(n,r,r.next,o)&&S(n,o)&&S(o,n)&&(e.push(n.i/i|0),e.push(r.i/i|0),e.push(o.i/i|0),k(r),k(r.next),r=t=o),r=r.next}while(r!==t);return s(r)}function h(t,e,i,n,o,a){var h=t;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&p(h,l)){var c=A(h,l);return h=s(h,h.next),c=s(c,c.next),r(h,e,i,n,o,a,0),void r(c,e,i,n,o,a,0)}l=l.next}h=h.next}while(h!==t)}function l(t,e){return t.x-e.x}function c(t,e){var i=function(t,e){var i,s=e,r=t.x,n=t.y,o=-1/0;do{if(n<=s.y&&n>=s.next.y&&s.next.y!==s.y){var a=s.x+(n-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(a<=r&&a>o&&(o=a,i=s.x<s.next.x?s:s.next,a===r))return i}s=s.next}while(s!==e);if(!i)return null;var h,l=i,c=i.x,d=i.y,f=1/0;s=i;do{r>=s.x&&s.x>=c&&r!==s.x&&g(n<d?r:o,n,c,d,n<d?o:r,n,s.x,s.y)&&(h=Math.abs(n-s.y)/(r-s.x),S(s,t)&&(h<f||h===f&&(s.x>i.x||s.x===i.x&&u(i,s)))&&(i=s,f=h)),s=s.next}while(s!==l);return i}(t,e);if(!i)return e;var r=A(i,t);return s(r,r.next),s(i,i.next)}function u(t,e){return y(t.prev,t,e.prev)<0&&y(e.next,t,t.next)<0}function d(t,e,i,s,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-s)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function g(t,e,i,s,r,n,o,a){return(r-o)*(e-a)>=(t-o)*(n-a)&&(t-o)*(s-a)>=(i-o)*(e-a)&&(i-o)*(n-a)>=(r-o)*(s-a)}function p(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&v(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(S(t,e)&&S(e,t)&&function(t,e){var i=t,s=!1,r=(t.x+e.x)/2,n=(t.y+e.y)/2;do{i.y>n!==i.next.y>n&&i.next.y!==i.y&&r<(i.next.x-i.x)*(n-i.y)/(i.next.y-i.y)+i.x&&(s=!s),i=i.next}while(i!==t);return s}(t,e)&&(y(t.prev,t,e.prev)||y(t,e.prev,e))||m(t,e)&&y(t.prev,t,t.next)>0&&y(e.prev,e,e.next)>0)}function y(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function m(t,e){return t.x===e.x&&t.y===e.y}function v(t,e,i,s){var r=b(y(t,e,i)),n=b(y(t,e,s)),o=b(y(i,s,t)),a=b(y(i,s,e));return r!==n&&o!==a||(!(0!==r||!x(t,i,e))||(!(0!==n||!x(t,s,e))||(!(0!==o||!x(i,t,s))||!(0!==a||!x(i,e,s)))))}function x(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function b(t){return t>0?1:t<0?-1:0}function S(t,e){return y(t.prev,t,t.next)<0?y(t,e,t.next)>=0&&y(t,t.prev,e)>=0:y(t,e,t.prev)<0||y(t,t.next,e)<0}function A(t,e){var i=new w(t.i,t.x,t.y),s=new w(e.i,e.x,e.y),r=t.next,n=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,s.next=i,i.prev=s,n.next=s,s.prev=n,s}function E(t,e,i,s){var r=new w(t,e,i);return s?(r.next=s.next,r.prev=s,s.next.prev=r,s.next=r):(r.prev=r,r.next=r),r}function k(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function w(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function M(t,e,i,s){for(var r=0,n=e,o=i-s;n<i;n+=s)r+=(t[o]-t[n])*(t[n+1]+t[o+1]),o=n;return r}t.exports=e,t.exports.default=e,e.deviation=function(t,e,i,s){var r=e&&e.length,n=r?e[0]*i:t.length,o=Math.abs(M(t,0,n,i));if(r)for(var a=0,h=e.length;a<h;a++){var l=e[a]*i,c=a<h-1?e[a+1]*i:t.length;o-=Math.abs(M(t,l,c,i))}var u=0;for(a=0;a<s.length;a+=3){var d=s[a]*i,f=s[a+1]*i,g=s[a+2]*i;u+=Math.abs((t[d]-t[g])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[g+1]-t[d+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},e.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},s=0,r=0;r<t.length;r++){for(var n=0;n<t[r].length;n++)for(var o=0;o<e;o++)i.vertices.push(t[r][n][o]);r>0&&(s+=t[r-1].length,i.holes.push(s))}return i}},152:(t,e)=>{var i=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),h=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,y={};function m(t,e,i){this.props=t,this.context=e,this.refs=y,this.updater=i||g}function v(){}function x(t,e,i){this.props=t,this.context=e,this.refs=y,this.updater=i||g}m.prototype.isReactComponent={},m.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},m.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=m.prototype;var b=x.prototype=new v;b.constructor=x,p(b,m.prototype),b.isPureReactComponent=!0;var S=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},E=Object.prototype.hasOwnProperty;function k(t,e,s,r,n,o){return s=o.ref,{$$typeof:i,type:t,key:e,ref:void 0!==s?s:null,props:o}}function w(t){return"object"===typeof t&&null!==t&&t.$$typeof===i}var M=/\/+/g;function C(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(t){return e[t]})}(""+t.key):e.toString(36)}function T(){}function F(t,e,r,n,o){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var h,l,c=!1;if(null===t)c=!0;else switch(a){case"bigint":case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case i:case s:c=!0;break;case d:return F((c=t._init)(t._payload),e,r,n,o)}}if(c)return o=o(t),c=""===n?"."+C(t,0):n,S(o)?(r="",null!=c&&(r=c.replace(M,"$&/")+"/"),F(o,e,r,"",function(t){return t})):null!=o&&(w(o)&&(h=o,l=r+(null==o.key||t&&t.key===o.key?"":(""+o.key).replace(M,"$&/")+"/")+c,o=k(h.type,l,void 0,0,0,h.props)),e.push(o)),1;c=0;var u,g=""===n?".":n+":";if(S(t))for(var p=0;p<t.length;p++)c+=F(n=t[p],e,r,a=g+C(n,p),o);else if("function"===typeof(p=null===(u=t)||"object"!==typeof u?null:"function"===typeof(u=f&&u[f]||u["@@iterator"])?u:null))for(t=p.call(t),p=0;!(n=t.next()).done;)c+=F(n=n.value,e,r,a=g+C(n,p++),o);else if("object"===a){if("function"===typeof t.then)return F(function(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch("string"===typeof t.status?t.then(T,T):(t.status="pending",t.then(function(e){"pending"===t.status&&(t.status="fulfilled",t.value=e)},function(e){"pending"===t.status&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}(t),e,r,n,o);throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return c}function P(t,e,i){if(null==t)return t;var s=[],r=0;return F(t,s,"","",function(t){return e.call(i,t,r++)}),s}function B(t){if(-1===t._status){var e=t._result;(e=e()).then(function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)},function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)}),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var L="function"===typeof reportError?reportError:function(t){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof t&&null!==t&&"string"===typeof t.message?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",t);console.error(t)};function D(){}e.Children={map:P,forEach:function(t,e,i){P(t,function(){e.apply(this,arguments)},i)},count:function(t){var e=0;return P(t,function(){e++}),e},toArray:function(t){return P(t,function(t){return t})||[]},only:function(t){if(!w(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=m,e.Fragment=r,e.Profiler=o,e.PureComponent=x,e.StrictMode=n,e.Suspense=c,e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,e.__COMPILER_RUNTIME={__proto__:null,c:function(t){return A.H.useMemoCache(t)}},e.cache=function(t){return function(){return t.apply(null,arguments)}},e.cloneElement=function(t,e,i){if(null===t||void 0===t)throw Error("The argument must be a React element, but you passed "+t+".");var s=p({},t.props),r=t.key;if(null!=e)for(n in void 0!==e.ref&&void 0,void 0!==e.key&&(r=""+e.key),e)!E.call(e,n)||"key"===n||"__self"===n||"__source"===n||"ref"===n&&void 0===e.ref||(s[n]=e[n]);var n=arguments.length-2;if(1===n)s.children=i;else if(1<n){for(var o=Array(n),a=0;a<n;a++)o[a]=arguments[a+2];s.children=o}return k(t.type,r,void 0,0,0,s)},e.createContext=function(t){return(t={$$typeof:h,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider=t,t.Consumer={$$typeof:a,_context:t},t},e.createElement=function(t,e,i){var s,r={},n=null;if(null!=e)for(s in void 0!==e.key&&(n=""+e.key),e)E.call(e,s)&&"key"!==s&&"__self"!==s&&"__source"!==s&&(r[s]=e[s]);var o=arguments.length-2;if(1===o)r.children=i;else if(1<o){for(var a=Array(o),h=0;h<o;h++)a[h]=arguments[h+2];r.children=a}if(t&&t.defaultProps)for(s in o=t.defaultProps)void 0===r[s]&&(r[s]=o[s]);return k(t,n,void 0,0,0,r)},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:l,render:t}},e.isValidElement=w,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:B}},e.memo=function(t,e){return{$$typeof:u,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=A.T,i={};A.T=i;try{var s=t(),r=A.S;null!==r&&r(i,s),"object"===typeof s&&null!==s&&"function"===typeof s.then&&s.then(D,L)}catch(n){L(n)}finally{A.T=e}},e.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},e.use=function(t){return A.H.use(t)},e.useActionState=function(t,e,i){return A.H.useActionState(t,e,i)},e.useCallback=function(t,e){return A.H.useCallback(t,e)},e.useContext=function(t){return A.H.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t,e){return A.H.useDeferredValue(t,e)},e.useEffect=function(t,e,i){var s=A.H;if("function"===typeof i)throw Error("useEffect CRUD overload is not enabled in this build of React.");return s.useEffect(t,e)},e.useId=function(){return A.H.useId()},e.useImperativeHandle=function(t,e,i){return A.H.useImperativeHandle(t,e,i)},e.useInsertionEffect=function(t,e){return A.H.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return A.H.useLayoutEffect(t,e)},e.useMemo=function(t,e){return A.H.useMemo(t,e)},e.useOptimistic=function(t,e){return A.H.useOptimistic(t,e)},e.useReducer=function(t,e,i){return A.H.useReducer(t,e,i)},e.useRef=function(t){return A.H.useRef(t)},e.useState=function(t){return A.H.useState(t)},e.useSyncExternalStore=function(t,e,i){return A.H.useSyncExternalStore(t,e,i)},e.useTransition=function(){return A.H.useTransition()},e.version="19.1.1"},261:(t,e,i)=>{t.exports=i(752)},367:(t,e,i)=>{!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=i(532)},432:(t,e,i)=>{var s=i(643);function r(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(r(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(t,e){return"font"===t?"":"string"===typeof e?"use-credentials"===e?e:"":void 0}e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,e.createPortal=function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)throw Error(r(299));return function(t,e,i){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==s?null:""+s,children:t,containerInfo:e,implementation:i}}(t,e,null,i)},e.flushSync=function(t){var e=h.T,i=o.p;try{if(h.T=null,o.p=2,t)return t()}finally{h.T=e,o.p=i,o.d.f()}},e.preconnect=function(t,e){"string"===typeof t&&(e?e="string"===typeof(e=e.crossOrigin)?"use-credentials"===e?e:"":void 0:e=null,o.d.C(t,e))},e.prefetchDNS=function(t){"string"===typeof t&&o.d.D(t)},e.preinit=function(t,e){if("string"===typeof t&&e&&"string"===typeof e.as){var i=e.as,s=l(i,e.crossOrigin),r="string"===typeof e.integrity?e.integrity:void 0,n="string"===typeof e.fetchPriority?e.fetchPriority:void 0;"style"===i?o.d.S(t,"string"===typeof e.precedence?e.precedence:void 0,{crossOrigin:s,integrity:r,fetchPriority:n}):"script"===i&&o.d.X(t,{crossOrigin:s,integrity:r,fetchPriority:n,nonce:"string"===typeof e.nonce?e.nonce:void 0})}},e.preinitModule=function(t,e){if("string"===typeof t)if("object"===typeof e&&null!==e){if(null==e.as||"script"===e.as){var i=l(e.as,e.crossOrigin);o.d.M(t,{crossOrigin:i,integrity:"string"===typeof e.integrity?e.integrity:void 0,nonce:"string"===typeof e.nonce?e.nonce:void 0})}}else null==e&&o.d.M(t)},e.preload=function(t,e){if("string"===typeof t&&"object"===typeof e&&null!==e&&"string"===typeof e.as){var i=e.as,s=l(i,e.crossOrigin);o.d.L(t,i,{crossOrigin:s,integrity:"string"===typeof e.integrity?e.integrity:void 0,nonce:"string"===typeof e.nonce?e.nonce:void 0,type:"string"===typeof e.type?e.type:void 0,fetchPriority:"string"===typeof e.fetchPriority?e.fetchPriority:void 0,referrerPolicy:"string"===typeof e.referrerPolicy?e.referrerPolicy:void 0,imageSrcSet:"string"===typeof e.imageSrcSet?e.imageSrcSet:void 0,imageSizes:"string"===typeof e.imageSizes?e.imageSizes:void 0,media:"string"===typeof e.media?e.media:void 0})}},e.preloadModule=function(t,e){if("string"===typeof t)if(e){var i=l(e.as,e.crossOrigin);o.d.m(t,{as:"string"===typeof e.as&&"script"!==e.as?e.as:void 0,crossOrigin:i,integrity:"string"===typeof e.integrity?e.integrity:void 0})}else o.d.m(t)},e.requestFormReset=function(t){o.d.r(t)},e.unstable_batchedUpdates=function(t,e){return t(e)},e.useFormState=function(t,e,i){return h.H.useFormState(t,e,i)},e.useFormStatus=function(){return h.H.useHostTransitionStatus()},e.version="19.1.1"},507:(t,e,i)=>{t.exports=i(935)},532:(t,e,i)=>{var s=i(261),r=i(643),n=i(766);function o(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function h(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(i=e.return),t=e.return}while(t)}return 3===e.tag?i:null}function l(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function c(t){if(h(t)!==t)throw Error(o(188))}function u(t){var e=t.tag;if(5===e||26===e||27===e||6===e)return t;for(t=t.child;null!==t;){if(null!==(e=u(t)))return e;t=t.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),S=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var T=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var F=Symbol.iterator;function P(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=F&&t[F]||t["@@iterator"])?t:null}var B=Symbol.for("react.client.reference");function L(t){if(null==t)return null;if("function"===typeof t)return t.$$typeof===B?null:t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case y:return"Fragment";case v:return"Profiler";case m:return"StrictMode";case E:return"Suspense";case k:return"SuspenseList";case C:return"Activity"}if("object"===typeof t)switch(t.$$typeof){case p:return"Portal";case S:return(t.displayName||"Context")+".Provider";case b:return(t._context.displayName||"Context")+".Consumer";case A:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case w:return null!==(e=t.displayName||null)?e:L(t.type)||"Memo";case M:e=t._payload,t=t._init;try{return L(t(e))}catch(i){}}return null}var D=Array.isArray,z=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R={pending:!1,data:null,method:null,action:null},_=[],V=-1;function N(t){return{current:t}}function O(t){0>V||(t.current=_[V],_[V]=null,V--)}function Y(t,e){V++,_[V]=t.current,t.current=e}var G=N(null),X=N(null),U=N(null),H=N(null);function j(t,e){switch(Y(U,e),Y(X,t),Y(G,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?nu(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)t=ou(e=nu(e),t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}O(G),Y(G,t)}function W(){O(G),O(X),O(U)}function Z(t){null!==t.memoizedState&&Y(H,t);var e=G.current,i=ou(e,t.type);e!==i&&(Y(X,t),Y(G,i))}function J(t){X.current===t&&(O(G),O(X)),H.current===t&&(O(H),Ju._currentValue=R)}var q=Object.prototype.hasOwnProperty,Q=s.unstable_scheduleCallback,K=s.unstable_cancelCallback,$=s.unstable_shouldYield,tt=s.unstable_requestPaint,et=s.unstable_now,it=s.unstable_getCurrentPriorityLevel,st=s.unstable_ImmediatePriority,rt=s.unstable_UserBlockingPriority,nt=s.unstable_NormalPriority,ot=s.unstable_LowPriority,at=s.unstable_IdlePriority,ht=s.log,lt=s.unstable_setDisableYieldValue,ct=null,ut=null;function dt(t){if("function"===typeof ht&&lt(t),ut&&"function"===typeof ut.setStrictMode)try{ut.setStrictMode(ct,t)}catch(e){}}var ft=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(gt(t)/pt|0)|0},gt=Math.log,pt=Math.LN2;var yt=256,mt=4194304;function vt(t){var e=42&t;if(0!==e)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&t;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&t;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function xt(t,e,i){var s=t.pendingLanes;if(0===s)return 0;var r=0,n=t.suspendedLanes,o=t.pingedLanes;t=t.warmLanes;var a=134217727&s;return 0!==a?0!==(s=a&~n)?r=vt(s):0!==(o&=a)?r=vt(o):i||0!==(i=a&~t)&&(r=vt(i)):0!==(a=s&~n)?r=vt(a):0!==o?r=vt(o):i||0!==(i=s&~t)&&(r=vt(i)),0===r?0:0!==e&&e!==r&&0===(e&n)&&((n=r&-r)>=(i=e&-e)||32===n&&0!==(4194048&i))?e:r}function bt(t,e){return 0===(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)}function St(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function At(){var t=yt;return 0===(4194048&(yt<<=1))&&(yt=256),t}function Et(){var t=mt;return 0===(62914560&(mt<<=1))&&(mt=4194304),t}function kt(t){for(var e=[],i=0;31>i;i++)e.push(t);return e}function wt(t,e){t.pendingLanes|=e,268435456!==e&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Mt(t,e,i){t.pendingLanes|=e,t.suspendedLanes&=~e;var s=31-ft(e);t.entangledLanes|=e,t.entanglements[s]=1073741824|t.entanglements[s]|4194090&i}function Ct(t,e){var i=t.entangledLanes|=e;for(t=t.entanglements;i;){var s=31-ft(i),r=1<<s;r&e|t[s]&e&&(t[s]|=e),i&=~r}}function Tt(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ft(t){return 2<(t&=-t)?8<t?0!==(134217727&t)?32:268435456:8:2}function Pt(){var t=I.p;return 0!==t?t:void 0===(t=window.event)?32:cd(t.type)}var Bt=Math.random().toString(36).slice(2),Lt="__reactFiber$"+Bt,Dt="__reactProps$"+Bt,zt="__reactContainer$"+Bt,It="__reactEvents$"+Bt,Rt="__reactListeners$"+Bt,_t="__reactHandles$"+Bt,Vt="__reactResources$"+Bt,Nt="__reactMarker$"+Bt;function Ot(t){delete t[Lt],delete t[Dt],delete t[It],delete t[Rt],delete t[_t]}function Yt(t){var e=t[Lt];if(e)return e;for(var i=t.parentNode;i;){if(e=i[zt]||i[Lt]){if(i=e.alternate,null!==e.child||null!==i&&null!==i.child)for(t=bu(t);null!==t;){if(i=t[Lt])return i;t=bu(t)}return e}i=(t=i).parentNode}return null}function Gt(t){if(t=t[Lt]||t[zt]){var e=t.tag;if(5===e||6===e||13===e||26===e||27===e||3===e)return t}return null}function Xt(t){var e=t.tag;if(5===e||26===e||27===e||6===e)return t.stateNode;throw Error(o(33))}function Ut(t){var e=t[Vt];return e||(e=t[Vt]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Ht(t){t[Nt]=!0}var jt=new Set,Wt={};function Zt(t,e){Jt(t,e),Jt(t+"Capture",e)}function Jt(t,e){for(Wt[t]=e,t=0;t<e.length;t++)jt.add(e[t])}var qt,Qt,Kt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$t={},te={};function ee(t,e,i){if(r=e,q.call(te,r)||!q.call($t,r)&&(Kt.test(r)?te[r]=!0:($t[r]=!0,0)))if(null===i)t.removeAttribute(e);else{switch(typeof i){case"undefined":case"function":case"symbol":return void t.removeAttribute(e);case"boolean":var s=e.toLowerCase().slice(0,5);if("data-"!==s&&"aria-"!==s)return void t.removeAttribute(e)}t.setAttribute(e,""+i)}var r}function ie(t,e,i){if(null===i)t.removeAttribute(e);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":return void t.removeAttribute(e)}t.setAttribute(e,""+i)}}function se(t,e,i,s){if(null===s)t.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":return void t.removeAttribute(i)}t.setAttributeNS(e,i,""+s)}}function re(t){if(void 0===qt)try{throw Error()}catch(i){var e=i.stack.trim().match(/\n( *(at )?)/);qt=e&&e[1]||"",Qt=-1<i.stack.indexOf("\n    at")?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+qt+t+Qt}var ne=!1;function oe(t,e){if(!t||ne)return"";ne=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(e){var i=function(){throw Error()};if(Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(i,[])}catch(r){var s=r}Reflect.construct(t,[],i)}else{try{i.call()}catch(n){s=n}t.call(i.prototype)}}else{try{throw Error()}catch(o){s=o}(i=t())&&"function"===typeof i.catch&&i.catch(function(){})}}catch(a){if(a&&s&&"string"===typeof a.stack)return[a.stack,s.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var n=s.DetermineComponentFrameRoot(),o=n[0],a=n[1];if(o&&a){var h=o.split("\n"),l=a.split("\n");for(r=s=0;s<h.length&&!h[s].includes("DetermineComponentFrameRoot");)s++;for(;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;if(s===h.length||r===l.length)for(s=h.length-1,r=l.length-1;1<=s&&0<=r&&h[s]!==l[r];)r--;for(;1<=s&&0<=r;s--,r--)if(h[s]!==l[r]){if(1!==s||1!==r)do{if(s--,0>--r||h[s]!==l[r]){var c="\n"+h[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}}while(1<=s&&0<=r);break}}}finally{ne=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?re(i):""}function ae(t){switch(t.tag){case 26:case 27:case 5:return re(t.type);case 16:return re("Lazy");case 13:return re("Suspense");case 19:return re("SuspenseList");case 0:case 15:return oe(t.type,!1);case 11:return oe(t.type.render,!1);case 1:return oe(t.type,!0);case 31:return re("Activity");default:return""}}function he(t){try{var e="";do{e+=ae(t),t=t.return}while(t);return e}catch(i){return"\nError generating stack: "+i.message+"\n"+i.stack}}function le(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function ce(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function ue(t){t._valueTracker||(t._valueTracker=function(t){var e=ce(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var r=i.get,n=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){s=""+t,n.call(this,t)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return s},setValue:function(t){s=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function de(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),s="";return t&&(s=ce(t)?t.checked?"true":"false":t.value),(t=s)!==i&&(e.setValue(t),!0)}function fe(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(bs){return t.body}}var ge=/[\n"\\]/g;function pe(t){return t.replace(ge,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function ye(t,e,i,s,r,n,o,a){t.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?t.type=o:t.removeAttribute("type"),null!=e?"number"===o?(0===e&&""===t.value||t.value!=e)&&(t.value=""+le(e)):t.value!==""+le(e)&&(t.value=""+le(e)):"submit"!==o&&"reset"!==o||t.removeAttribute("value"),null!=e?ve(t,o,le(e)):null!=i?ve(t,o,le(i)):null!=s&&t.removeAttribute("value"),null==r&&null!=n&&(t.defaultChecked=!!n),null!=r&&(t.checked=r&&"function"!==typeof r&&"symbol"!==typeof r),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?t.name=""+le(a):t.removeAttribute("name")}function me(t,e,i,s,r,n,o,a){if(null!=n&&"function"!==typeof n&&"symbol"!==typeof n&&"boolean"!==typeof n&&(t.type=n),null!=e||null!=i){if(!("submit"!==n&&"reset"!==n||void 0!==e&&null!==e))return;i=null!=i?""+le(i):"",e=null!=e?""+le(e):i,a||e===t.value||(t.value=e),t.defaultValue=e}s="function"!==typeof(s=null!=s?s:r)&&"symbol"!==typeof s&&!!s,t.checked=a?t.checked:!!s,t.defaultChecked=!!s,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(t.name=o)}function ve(t,e,i){"number"===e&&fe(t.ownerDocument)===t||t.defaultValue===""+i||(t.defaultValue=""+i)}function xe(t,e,i,s){if(t=t.options,e){e={};for(var r=0;r<i.length;r++)e["$"+i[r]]=!0;for(i=0;i<t.length;i++)r=e.hasOwnProperty("$"+t[i].value),t[i].selected!==r&&(t[i].selected=r),r&&s&&(t[i].defaultSelected=!0)}else{for(i=""+le(i),e=null,r=0;r<t.length;r++){if(t[r].value===i)return t[r].selected=!0,void(s&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function be(t,e,i){null==e||((e=""+le(e))!==t.value&&(t.value=e),null!=i)?t.defaultValue=null!=i?""+le(i):"":t.defaultValue!==e&&(t.defaultValue=e)}function Se(t,e,i,s){if(null==e){if(null!=s){if(null!=i)throw Error(o(92));if(D(s)){if(1<s.length)throw Error(o(93));s=s[0]}i=s}null==i&&(i=""),e=i}i=le(e),t.defaultValue=i,(s=t.textContent)===i&&""!==s&&null!==s&&(t.value=s)}function Ae(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&3===i.nodeType)return void(i.nodeValue=e)}t.textContent=e}var Ee=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ke(t,e,i){var s=0===e.indexOf("--");null==i||"boolean"===typeof i||""===i?s?t.setProperty(e,""):"float"===e?t.cssFloat="":t[e]="":s?t.setProperty(e,i):"number"!==typeof i||0===i||Ee.has(e)?"float"===e?t.cssFloat=i:t[e]=(""+i).trim():t[e]=i+"px"}function we(t,e,i){if(null!=e&&"object"!==typeof e)throw Error(o(62));if(t=t.style,null!=i){for(var s in i)!i.hasOwnProperty(s)||null!=e&&e.hasOwnProperty(s)||(0===s.indexOf("--")?t.setProperty(s,""):"float"===s?t.cssFloat="":t[s]="");for(var r in e)s=e[r],e.hasOwnProperty(r)&&i[r]!==s&&ke(t,r,s)}else for(var n in e)e.hasOwnProperty(n)&&ke(t,n,e[n])}function Me(t){if(-1===t.indexOf("-"))return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ce=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Te=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fe(t){return Te.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Pe=null;function Be(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var Le=null,De=null;function ze(t){var e=Gt(t);if(e&&(t=e.stateNode)){var i=t[Dt]||null;t:switch(t=e.stateNode,e.type){case"input":if(ye(t,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),e=i.name,"radio"===i.type&&null!=e){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+pe(""+e)+'"][type="radio"]'),e=0;e<i.length;e++){var s=i[e];if(s!==t&&s.form===t.form){var r=s[Dt]||null;if(!r)throw Error(o(90));ye(s,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<i.length;e++)(s=i[e]).form===t.form&&de(s)}break t;case"textarea":be(t,i.value,i.defaultValue);break t;case"select":null!=(e=i.value)&&xe(t,!!i.multiple,e,!1)}}}var Ie=!1;function Re(t,e,i){if(Ie)return t(e,i);Ie=!0;try{return t(e)}finally{if(Ie=!1,(null!==Le||null!==De)&&(Gl(),Le&&(e=Le,t=De,De=Le=null,ze(e),t)))for(e=0;e<t.length;e++)ze(t[e])}}function _e(t,e){var i=t.stateNode;if(null===i)return null;var s=i[Dt]||null;if(null===s)return null;i=s[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!s;break t;default:t=!1}if(t)return null;if(i&&"function"!==typeof i)throw Error(o(231,e,typeof i));return i}var Ve=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ne=!1;if(Ve)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(bs){Ne=!1}var Ye=null,Ge=null,Xe=null;function Ue(){if(Xe)return Xe;var t,e,i=Ge,s=i.length,r="value"in Ye?Ye.value:Ye.textContent,n=r.length;for(t=0;t<s&&i[t]===r[t];t++);var o=s-t;for(e=1;e<=o&&i[s-e]===r[n-e];e++);return Xe=r.slice(t,1<e?1-e:void 0)}function He(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function je(){return!0}function We(){return!1}function Ze(t){function e(e,i,s,r,n){for(var o in this._reactName=e,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=n,this.currentTarget=null,t)t.hasOwnProperty(o)&&(e=t[o],this[o]=e?e(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?je:We,this.isPropagationStopped=We,this}return d(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=je)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=je)},persist:function(){},isPersistent:je}),e}var Je,qe,Qe,Ke={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$e=Ze(Ke),ti=d({},Ke,{view:0,detail:0}),ei=Ze(ti),ii=d({},ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fi,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qe&&(Qe&&"mousemove"===t.type?(Je=t.screenX-Qe.screenX,qe=t.screenY-Qe.screenY):qe=Je=0,Qe=t),Je)},movementY:function(t){return"movementY"in t?t.movementY:qe}}),si=Ze(ii),ri=Ze(d({},ii,{dataTransfer:0})),ni=Ze(d({},ti,{relatedTarget:0})),oi=Ze(d({},Ke,{animationName:0,elapsedTime:0,pseudoElement:0})),ai=Ze(d({},Ke,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}})),hi=Ze(d({},Ke,{data:0})),li={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ci={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ui={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function di(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=ui[t])&&!!e[t]}function fi(){return di}var gi=Ze(d({},ti,{key:function(t){if(t.key){var e=li[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=He(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?ci[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fi,charCode:function(t){return"keypress"===t.type?He(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?He(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}})),pi=Ze(d({},ii,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),yi=Ze(d({},ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fi})),mi=Ze(d({},Ke,{propertyName:0,elapsedTime:0,pseudoElement:0})),vi=Ze(d({},ii,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0})),xi=Ze(d({},Ke,{newState:0,oldState:0})),bi=[9,13,27,32],Si=Ve&&"CompositionEvent"in window,Ai=null;Ve&&"documentMode"in document&&(Ai=document.documentMode);var Ei=Ve&&"TextEvent"in window&&!Ai,ki=Ve&&(!Si||Ai&&8<Ai&&11>=Ai),wi=String.fromCharCode(32),Mi=!1;function Ci(t,e){switch(t){case"keyup":return-1!==bi.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ti(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Fi=!1;var Pi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bi(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Pi[t.type]:"textarea"===e}function Li(t,e,i,s){Le?De?De.push(s):De=[s]:Le=s,0<(e=Hc(e,"onChange")).length&&(i=new $e("onChange","change",null,i,s),t.push({event:i,listeners:e}))}var Di=null,zi=null;function Ii(t){_c(t,0)}function Ri(t){if(de(Xt(t)))return t}function _i(t,e){if("change"===t)return e}var Vi=!1;if(Ve){var Ni;if(Ve){var Oi="oninput"in document;if(!Oi){var Yi=document.createElement("div");Yi.setAttribute("oninput","return;"),Oi="function"===typeof Yi.oninput}Ni=Oi}else Ni=!1;Vi=Ni&&(!document.documentMode||9<document.documentMode)}function Gi(){Di&&(Di.detachEvent("onpropertychange",Xi),zi=Di=null)}function Xi(t){if("value"===t.propertyName&&Ri(zi)){var e=[];Li(e,zi,t,Be(t)),Re(Ii,e)}}function Ui(t,e,i){"focusin"===t?(Gi(),zi=i,(Di=e).attachEvent("onpropertychange",Xi)):"focusout"===t&&Gi()}function Hi(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Ri(zi)}function ji(t,e){if("click"===t)return Ri(e)}function Wi(t,e){if("input"===t||"change"===t)return Ri(e)}var Zi="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function Ji(t,e){if(Zi(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var i=Object.keys(t),s=Object.keys(e);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var r=i[s];if(!q.call(e,r)||!Zi(t[r],e[r]))return!1}return!0}function qi(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Qi(t,e){var i,s=qi(t);for(t=0;s;){if(3===s.nodeType){if(i=t+s.textContent.length,t<=e&&i>=e)return{node:s,offset:e-t};t=i}t:{for(;s;){if(s.nextSibling){s=s.nextSibling;break t}s=s.parentNode}s=void 0}s=qi(s)}}function Ki(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?Ki(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function $i(t){for(var e=fe((t=null!=t&&null!=t.ownerDocument&&null!=t.ownerDocument.defaultView?t.ownerDocument.defaultView:window).document);e instanceof t.HTMLIFrameElement;){try{var i="string"===typeof e.contentWindow.location.href}catch(s){i=!1}if(!i)break;e=fe((t=e.contentWindow).document)}return e}function ts(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var es=Ve&&"documentMode"in document&&11>=document.documentMode,is=null,ss=null,rs=null,ns=!1;function os(t,e,i){var s=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;ns||null==is||is!==fe(s)||("selectionStart"in(s=is)&&ts(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},rs&&Ji(rs,s)||(rs=s,0<(s=Hc(ss,"onSelect")).length&&(e=new $e("onSelect","select",null,e,i),t.push({event:e,listeners:s}),e.target=is)))}function as(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}var hs={animationend:as("Animation","AnimationEnd"),animationiteration:as("Animation","AnimationIteration"),animationstart:as("Animation","AnimationStart"),transitionrun:as("Transition","TransitionRun"),transitionstart:as("Transition","TransitionStart"),transitioncancel:as("Transition","TransitionCancel"),transitionend:as("Transition","TransitionEnd")},ls={},cs={};function us(t){if(ls[t])return ls[t];if(!hs[t])return t;var e,i=hs[t];for(e in i)if(i.hasOwnProperty(e)&&e in cs)return ls[t]=i[e];return t}Ve&&(cs=document.createElement("div").style,"AnimationEvent"in window||(delete hs.animationend.animation,delete hs.animationiteration.animation,delete hs.animationstart.animation),"TransitionEvent"in window||delete hs.transitionend.transition);var ds=us("animationend"),fs=us("animationiteration"),gs=us("animationstart"),ps=us("transitionrun"),ys=us("transitionstart"),ms=us("transitioncancel"),vs=us("transitionend"),xs=new Map,Ss="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function As(t,e){xs.set(t,e),Zt(e,[t])}Ss.push("scrollEnd");var Es=new WeakMap;function ks(t,e){if("object"===typeof t&&null!==t){var i=Es.get(t);return void 0!==i?i:(e={value:t,source:e,stack:he(e)},Es.set(t,e),e)}return{value:t,source:e,stack:he(e)}}var ws=[],Ms=0,Cs=0;function Ts(){for(var t=Ms,e=Cs=Ms=0;e<t;){var i=ws[e];ws[e++]=null;var s=ws[e];ws[e++]=null;var r=ws[e];ws[e++]=null;var n=ws[e];if(ws[e++]=null,null!==s&&null!==r){var o=s.pending;null===o?r.next=r:(r.next=o.next,o.next=r),s.pending=r}0!==n&&Ls(i,r,n)}}function Fs(t,e,i,s){ws[Ms++]=t,ws[Ms++]=e,ws[Ms++]=i,ws[Ms++]=s,Cs|=s,t.lanes|=s,null!==(t=t.alternate)&&(t.lanes|=s)}function Ps(t,e,i,s){return Fs(t,e,i,s),Ds(t)}function Bs(t,e){return Fs(t,null,null,e),Ds(t)}function Ls(t,e,i){t.lanes|=i;var s=t.alternate;null!==s&&(s.lanes|=i);for(var r=!1,n=t.return;null!==n;)n.childLanes|=i,null!==(s=n.alternate)&&(s.childLanes|=i),22===n.tag&&(null===(t=n.stateNode)||1&t._visibility||(r=!0)),t=n,n=n.return;return 3===t.tag?(n=t.stateNode,r&&null!==e&&(r=31-ft(i),null===(s=(t=n.hiddenUpdates)[r])?t[r]=[e]:s.push(e),e.lane=536870912|i),n):null}function Ds(t){if(50<Dl)throw Dl=0,zl=null,Error(o(185));for(var e=t.return;null!==e;)e=(t=e).return;return 3===t.tag?t.stateNode:null}var zs={};function Is(t,e,i,s){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rs(t,e,i,s){return new Is(t,e,i,s)}function _s(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Vs(t,e){var i=t.alternate;return null===i?((i=Rs(t.tag,e,t.key,t.mode)).elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=65011712&t.flags,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function Ns(t,e){t.flags&=65011714;var i=t.alternate;return null===i?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,e=i.dependencies,t.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Os(t,e,i,s,r,n){var a=0;if(s=t,"function"===typeof t)_s(t)&&(a=1);else if("string"===typeof t)a=function(t,e,i){if(1===i||null!=e.itemProp)return!1;switch(t){case"meta":case"title":return!0;case"style":if("string"!==typeof e.precedence||"string"!==typeof e.href||""===e.href)break;return!0;case"link":if("string"!==typeof e.rel||"string"!==typeof e.href||""===e.href||e.onLoad||e.onError)break;return"stylesheet"!==e.rel||(t=e.disabled,"string"===typeof e.precedence&&null==t);case"script":if(e.async&&"function"!==typeof e.async&&"symbol"!==typeof e.async&&!e.onLoad&&!e.onError&&e.src&&"string"===typeof e.src)return!0}return!1}(t,i,G.current)?26:"html"===t||"head"===t||"body"===t?27:5;else t:switch(t){case C:return(t=Rs(31,i,e,r)).elementType=C,t.lanes=n,t;case y:return Ys(i.children,r,n,e);case m:a=8,r|=24;break;case v:return(t=Rs(12,i,e,2|r)).elementType=v,t.lanes=n,t;case E:return(t=Rs(13,i,e,r)).elementType=E,t.lanes=n,t;case k:return(t=Rs(19,i,e,r)).elementType=k,t.lanes=n,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case x:case S:a=10;break t;case b:a=9;break t;case A:a=11;break t;case w:a=14;break t;case M:a=16,s=null;break t}a=29,i=Error(o(130,null===t?"null":typeof t,"")),s=null}return(e=Rs(a,i,e,r)).elementType=t,e.type=s,e.lanes=n,e}function Ys(t,e,i,s){return(t=Rs(7,t,s,e)).lanes=i,t}function Gs(t,e,i){return(t=Rs(6,t,null,e)).lanes=i,t}function Xs(t,e,i){return(e=Rs(4,null!==t.children?t.children:[],t.key,e)).lanes=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Us=[],Hs=0,js=null,Ws=0,Zs=[],Js=0,qs=null,Qs=1,Ks="";function $s(t,e){Us[Hs++]=Ws,Us[Hs++]=js,js=t,Ws=e}function tr(t,e,i){Zs[Js++]=Qs,Zs[Js++]=Ks,Zs[Js++]=qs,qs=t;var s=Qs;t=Ks;var r=32-ft(s)-1;s&=~(1<<r),i+=1;var n=32-ft(e)+r;if(30<n){var o=r-r%5;n=(s&(1<<o)-1).toString(32),s>>=o,r-=o,Qs=1<<32-ft(e)+r|i<<r|s,Ks=n+t}else Qs=1<<n|i<<r|s,Ks=t}function er(t){null!==t.return&&($s(t,1),tr(t,1,0))}function ir(t){for(;t===js;)js=Us[--Hs],Us[Hs]=null,Ws=Us[--Hs],Us[Hs]=null;for(;t===qs;)qs=Zs[--Js],Zs[Js]=null,Ks=Zs[--Js],Zs[Js]=null,Qs=Zs[--Js],Zs[Js]=null}var sr=null,rr=null,nr=!1,or=null,ar=!1,hr=Error(o(519));function lr(t){throw pr(ks(Error(o(418,"")),t)),hr}function cr(t){var e=t.stateNode,i=t.type,s=t.memoizedProps;switch(e[Lt]=t,e[Dt]=s,i){case"dialog":Vc("cancel",e),Vc("close",e);break;case"iframe":case"object":case"embed":Vc("load",e);break;case"video":case"audio":for(i=0;i<Ic.length;i++)Vc(Ic[i],e);break;case"source":Vc("error",e);break;case"img":case"image":case"link":Vc("error",e),Vc("load",e);break;case"details":Vc("toggle",e);break;case"input":Vc("invalid",e),me(e,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),ue(e);break;case"select":Vc("invalid",e);break;case"textarea":Vc("invalid",e),Se(e,s.value,s.defaultValue,s.children),ue(e)}"string"!==typeof(i=s.children)&&"number"!==typeof i&&"bigint"!==typeof i||e.textContent===""+i||!0===s.suppressHydrationWarning||Qc(e.textContent,i)?(null!=s.popover&&(Vc("beforetoggle",e),Vc("toggle",e)),null!=s.onScroll&&Vc("scroll",e),null!=s.onScrollEnd&&Vc("scrollend",e),null!=s.onClick&&(e.onclick=Kc),e=!0):e=!1,e||lr(t)}function ur(t){for(sr=t.return;sr;)switch(sr.tag){case 5:case 13:return void(ar=!1);case 27:case 3:return void(ar=!0);default:sr=sr.return}}function dr(t){if(t!==sr)return!1;if(!nr)return ur(t),nr=!0,!1;var e,i=t.tag;if((e=3!==i&&27!==i)&&((e=5===i)&&(e=!("form"!==(e=t.type)&&"button"!==e)||au(t.type,t.memoizedProps)),e=!e),e&&rr&&lr(t),ur(t),13===i){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,i=0;t;){if(8===t.nodeType)if("/$"===(e=t.data)){if(0===i){rr=vu(t.nextSibling);break t}i--}else"$"!==e&&"$!"!==e&&"$?"!==e||i++;t=t.nextSibling}rr=null}}else 27===i?(i=rr,gu(t.type)?(t=xu,xu=null,rr=t):rr=i):rr=sr?vu(t.stateNode.nextSibling):null;return!0}function fr(){rr=sr=null,nr=!1}function gr(){var t=or;return null!==t&&(null===bl?bl=t:bl.push.apply(bl,t),or=null),t}function pr(t){null===or?or=[t]:or.push(t)}var yr=N(null),mr=null,vr=null;function xr(t,e,i){Y(yr,e._currentValue),e._currentValue=i}function br(t){t._currentValue=yr.current,O(yr)}function Sr(t,e,i){for(;null!==t;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==s&&(s.childLanes|=e)):null!==s&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===i)break;t=t.return}}function Ar(t,e,i,s){var r=t.child;for(null!==r&&(r.return=t);null!==r;){var n=r.dependencies;if(null!==n){var a=r.child;n=n.firstContext;t:for(;null!==n;){var h=n;n=r;for(var l=0;l<e.length;l++)if(h.context===e[l]){n.lanes|=i,null!==(h=n.alternate)&&(h.lanes|=i),Sr(n.return,i,t),s||(a=null);break t}n=h.next}}else if(18===r.tag){if(null===(a=r.return))throw Error(o(341));a.lanes|=i,null!==(n=a.alternate)&&(n.lanes|=i),Sr(a,i,t),a=null}else a=r.child;if(null!==a)a.return=r;else for(a=r;null!==a;){if(a===t){a=null;break}if(null!==(r=a.sibling)){r.return=a.return,a=r;break}a=a.return}r=a}}function Er(t,e,i,s){t=null;for(var r=e,n=!1;null!==r;){if(!n)if(0!==(524288&r.flags))n=!0;else if(0!==(262144&r.flags))break;if(10===r.tag){var a=r.alternate;if(null===a)throw Error(o(387));if(null!==(a=a.memoizedProps)){var h=r.type;Zi(r.pendingProps.value,a.value)||(null!==t?t.push(h):t=[h])}}else if(r===H.current){if(null===(a=r.alternate))throw Error(o(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(null!==t?t.push(Ju):t=[Ju])}r=r.return}null!==t&&Ar(e,t,i,s),e.flags|=262144}function kr(t){for(t=t.firstContext;null!==t;){if(!Zi(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function wr(t){mr=t,vr=null,null!==(t=t.dependencies)&&(t.firstContext=null)}function Mr(t){return Tr(mr,t)}function Cr(t,e){return null===mr&&wr(t),Tr(t,e)}function Tr(t,e){var i=e._currentValue;if(e={context:e,memoizedValue:i,next:null},null===vr){if(null===t)throw Error(o(308));vr=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else vr=vr.next=e;return i}var Fr="undefined"!==typeof AbortController?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(e,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(t){return t()})}},Pr=s.unstable_scheduleCallback,Br=s.unstable_NormalPriority,Lr={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dr(){return{controller:new Fr,data:new Map,refCount:0}}function zr(t){t.refCount--,0===t.refCount&&Pr(Br,function(){t.controller.abort()})}var Ir=null,Rr=0,_r=0,Vr=null;function Nr(){if(0===--Rr&&null!==Ir){null!==Vr&&(Vr.status="fulfilled");var t=Ir;Ir=null,_r=0,Vr=null;for(var e=0;e<t.length;e++)(0,t[e])()}}var Or=z.S;z.S=function(t,e){"object"===typeof e&&null!==e&&"function"===typeof e.then&&function(t,e){if(null===Ir){var i=Ir=[];Rr=0,_r=Pc(),Vr={status:"pending",value:void 0,then:function(t){i.push(t)}}}Rr++,e.then(Nr,Nr)}(0,e),null!==Or&&Or(t,e)};var Yr=N(null);function Gr(){var t=Yr.current;return null!==t?t:rl.pooledCache}function Xr(t,e){Y(Yr,null===e?Yr.current:e.pool)}function Ur(){var t=Gr();return null===t?null:{parent:Lr._currentValue,pool:t}}var Hr=Error(o(460)),jr=Error(o(474)),Wr=Error(o(542)),Zr={then:function(){}};function Jr(t){return"fulfilled"===(t=t.status)||"rejected"===t}function qr(){}function Qr(t,e,i){switch(void 0===(i=t[i])?t.push(e):i!==e&&(e.then(qr,qr),e=i),e.status){case"fulfilled":return e.value;case"rejected":throw tn(t=e.reason),t;default:if("string"===typeof e.status)e.then(qr,qr);else{if(null!==(t=rl)&&100<t.shellSuspendCounter)throw Error(o(482));(t=e).status="pending",t.then(function(t){if("pending"===e.status){var i=e;i.status="fulfilled",i.value=t}},function(t){if("pending"===e.status){var i=e;i.status="rejected",i.reason=t}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw tn(t=e.reason),t}throw Kr=e,Hr}}var Kr=null;function $r(){if(null===Kr)throw Error(o(459));var t=Kr;return Kr=null,t}function tn(t){if(t===Hr||t===Wr)throw Error(o(483))}var en=!1;function sn(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rn(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function nn(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function on(t,e,i){var s=t.updateQueue;if(null===s)return null;if(s=s.shared,0!==(2&sl)){var r=s.pending;return null===r?e.next=e:(e.next=r.next,r.next=e),s.pending=e,e=Ds(t),Ls(t,null,i),e}return Fs(t,s,e,i),Ds(t)}function an(t,e,i){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194048&i))){var s=e.lanes;i|=s&=t.pendingLanes,e.lanes=i,Ct(t,i)}}function hn(t,e){var i=t.updateQueue,s=t.alternate;if(null!==s&&i===(s=s.updateQueue)){var r=null,n=null;if(null!==(i=i.firstBaseUpdate)){do{var o={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};null===n?r=n=o:n=n.next=o,i=i.next}while(null!==i);null===n?r=n=e:n=n.next=e}else r=n=e;return i={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:n,shared:s.shared,callbacks:s.callbacks},void(t.updateQueue=i)}null===(t=i.lastBaseUpdate)?i.firstBaseUpdate=e:t.next=e,i.lastBaseUpdate=e}var ln=!1;function cn(){if(ln){if(null!==Vr)throw Vr}}function un(t,e,i,s){ln=!1;var r=t.updateQueue;en=!1;var n=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var h=a,l=h.next;h.next=null,null===o?n=l:o.next=l,o=h;var c=t.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=h))}if(null!==n){var u=r.baseState;for(o=0,c=l=h=null,a=n;;){var f=-536870913&a.lane,g=f!==a.lane;if(g?(ol&f)===f:(s&f)===f){0!==f&&f===_r&&(ln=!0),null!==c&&(c=c.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});t:{var p=t,y=a;f=e;var m=i;switch(y.tag){case 1:if("function"===typeof(p=y.payload)){u=p.call(m,u,f);break t}u=p;break t;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=y.payload)?p.call(m,u,f):p)||void 0===f)break t;u=d({},u,f);break t;case 2:en=!0}}null!==(f=a.callback)&&(t.flags|=64,g&&(t.flags|=8192),null===(g=r.callbacks)?r.callbacks=[f]:g.push(f))}else g={lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(l=c=g,h=u):c=c.next=g,o|=f;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(g=a).next,g.next=null,r.lastBaseUpdate=g,r.shared.pending=null}}null===c&&(h=u),r.baseState=h,r.firstBaseUpdate=l,r.lastBaseUpdate=c,null===n&&(r.shared.lanes=0),gl|=o,t.lanes=o,t.memoizedState=u}}function dn(t,e){if("function"!==typeof t)throw Error(o(191,t));t.call(e)}function fn(t,e){var i=t.callbacks;if(null!==i)for(t.callbacks=null,t=0;t<i.length;t++)dn(i[t],e)}var gn=N(null),pn=N(0);function yn(t,e){Y(pn,t=dl),Y(gn,e),dl=t|e.baseLanes}function mn(){Y(pn,dl),Y(gn,gn.current)}function vn(){dl=pn.current,O(gn),O(pn)}var xn=0,bn=null,Sn=null,An=null,En=!1,kn=!1,wn=!1,Mn=0,Cn=0,Tn=null,Fn=0;function Pn(){throw Error(o(321))}function Bn(t,e){if(null===e)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!Zi(t[i],e[i]))return!1;return!0}function Ln(t,e,i,s,r,n){return xn=n,bn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,z.H=null===t||null===t.memoizedState?Wo:Zo,wn=!1,n=i(s,r),wn=!1,kn&&(n=zn(e,i,s,r)),Dn(t),n}function Dn(t){z.H=jo;var e=null!==Sn&&null!==Sn.next;if(xn=0,An=Sn=bn=null,En=!1,Cn=0,Tn=null,e)throw Error(o(300));null===t||Ta||null!==(t=t.dependencies)&&kr(t)&&(Ta=!0)}function zn(t,e,i,s){bn=t;var r=0;do{if(kn&&(Tn=null),Cn=0,kn=!1,25<=r)throw Error(o(301));if(r+=1,An=Sn=null,null!=t.updateQueue){var n=t.updateQueue;n.lastEffect=null,n.events=null,n.stores=null,null!=n.memoCache&&(n.memoCache.index=0)}z.H=Jo,n=e(i,s)}while(kn);return n}function In(){var t=z.H,e=t.useState()[0];return e="function"===typeof e.then?Yn(e):e,t=t.useState()[0],(null!==Sn?Sn.memoizedState:null)!==t&&(bn.flags|=1024),e}function Rn(){var t=0!==Mn;return Mn=0,t}function _n(t,e,i){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i}function Vn(t){if(En){for(t=t.memoizedState;null!==t;){var e=t.queue;null!==e&&(e.pending=null),t=t.next}En=!1}xn=0,An=Sn=bn=null,kn=!1,Cn=Mn=0,Tn=null}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===An?bn.memoizedState=An=t:An=An.next=t,An}function On(){if(null===Sn){var t=bn.alternate;t=null!==t?t.memoizedState:null}else t=Sn.next;var e=null===An?bn.memoizedState:An.next;if(null!==e)An=e,Sn=t;else{if(null===t){if(null===bn.alternate)throw Error(o(467));throw Error(o(310))}t={memoizedState:(Sn=t).memoizedState,baseState:Sn.baseState,baseQueue:Sn.baseQueue,queue:Sn.queue,next:null},null===An?bn.memoizedState=An=t:An=An.next=t}return An}function Yn(t){var e=Cn;return Cn+=1,null===Tn&&(Tn=[]),t=Qr(Tn,t,e),e=bn,null===(null===An?e.memoizedState:An.next)&&(e=e.alternate,z.H=null===e||null===e.memoizedState?Wo:Zo),t}function Gn(t){if(null!==t&&"object"===typeof t){if("function"===typeof t.then)return Yn(t);if(t.$$typeof===S)return Mr(t)}throw Error(o(438,String(t)))}function Xn(t){var e=null,i=bn.updateQueue;if(null!==i&&(e=i.memoCache),null==e){var s=bn.alternate;null!==s&&(null!==(s=s.updateQueue)&&(null!=(s=s.memoCache)&&(e={data:s.data.map(function(t){return t.slice()}),index:0})))}if(null==e&&(e={data:[],index:0}),null===i&&(i={lastEffect:null,events:null,stores:null,memoCache:null},bn.updateQueue=i),i.memoCache=e,void 0===(i=e.data[e.index]))for(i=e.data[e.index]=Array(t),s=0;s<t;s++)i[s]=T;return e.index++,i}function Un(t,e){return"function"===typeof e?e(t):e}function Hn(t){return jn(On(),Sn,t)}function jn(t,e,i){var s=t.queue;if(null===s)throw Error(o(311));s.lastRenderedReducer=i;var r=t.baseQueue,n=s.pending;if(null!==n){if(null!==r){var a=r.next;r.next=n.next,n.next=a}e.baseQueue=r=n,s.pending=null}if(n=t.baseState,null===r)t.memoizedState=n;else{var h=a=null,l=null,c=e=r.next,u=!1;do{var d=-536870913&c.lane;if(d!==c.lane?(ol&d)===d:(xn&d)===d){var f=c.revertLane;if(0===f)null!==l&&(l=l.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===_r&&(u=!0);else{if((xn&f)===f){c=c.next,f===_r&&(u=!0);continue}d={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===l?(h=l=d,a=n):l=l.next=d,bn.lanes|=f,gl|=f}d=c.action,wn&&i(n,d),n=c.hasEagerState?c.eagerState:i(n,d)}else f={lane:d,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===l?(h=l=f,a=n):l=l.next=f,bn.lanes|=d,gl|=d;c=c.next}while(null!==c&&c!==e);if(null===l?a=n:l.next=h,!Zi(n,t.memoizedState)&&(Ta=!0,u&&null!==(i=Vr)))throw i;t.memoizedState=n,t.baseState=a,t.baseQueue=l,s.lastRenderedState=n}return null===r&&(s.lanes=0),[t.memoizedState,s.dispatch]}function Wn(t){var e=On(),i=e.queue;if(null===i)throw Error(o(311));i.lastRenderedReducer=t;var s=i.dispatch,r=i.pending,n=e.memoizedState;if(null!==r){i.pending=null;var a=r=r.next;do{n=t(n,a.action),a=a.next}while(a!==r);Zi(n,e.memoizedState)||(Ta=!0),e.memoizedState=n,null===e.baseQueue&&(e.baseState=n),i.lastRenderedState=n}return[n,s]}function Zn(t,e,i){var s=bn,r=On(),n=nr;if(n){if(void 0===i)throw Error(o(407));i=i()}else i=e();var a=!Zi((Sn||r).memoizedState,i);if(a&&(r.memoizedState=i,Ta=!0),r=r.queue,vo(2048,8,Qn.bind(null,s,r,t),[t]),r.getSnapshot!==e||a||null!==An&&1&An.memoizedState.tag){if(s.flags|=2048,po(9,{destroy:void 0,resource:void 0},qn.bind(null,s,r,i,e),null),null===rl)throw Error(o(349));n||0!==(124&xn)||Jn(s,e,i)}return i}function Jn(t,e,i){t.flags|=16384,t={getSnapshot:e,value:i},null===(e=bn.updateQueue)?(e={lastEffect:null,events:null,stores:null,memoCache:null},bn.updateQueue=e,e.stores=[t]):null===(i=e.stores)?e.stores=[t]:i.push(t)}function qn(t,e,i,s){e.value=i,e.getSnapshot=s,Kn(e)&&$n(t)}function Qn(t,e,i){return i(function(){Kn(e)&&$n(t)})}function Kn(t){var e=t.getSnapshot;t=t.value;try{var i=e();return!Zi(t,i)}catch(s){return!0}}function $n(t){var e=Bs(t,2);null!==e&&_l(e,t,2)}function to(t){var e=Nn();if("function"===typeof t){var i=t;if(t=i(),wn){dt(!0);try{i()}finally{dt(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Un,lastRenderedState:t},e}function eo(t,e,i,s){return t.baseState=i,jn(t,Sn,"function"===typeof s?s:Un)}function io(t,e,i,s,r){if(Xo(t))throw Error(o(485));if(null!==(t=e.action)){var n={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(t){n.listeners.push(t)}};null!==z.T?i(!0):n.isTransition=!1,s(n),null===(i=e.pending)?(n.next=e.pending=n,so(e,n)):(n.next=i.next,e.pending=i.next=n)}}function so(t,e){var i=e.action,s=e.payload,r=t.state;if(e.isTransition){var n=z.T,o={};z.T=o;try{var a=i(r,s),h=z.S;null!==h&&h(o,a),ro(t,e,a)}catch(l){oo(t,e,l)}finally{z.T=n}}else try{ro(t,e,n=i(r,s))}catch(c){oo(t,e,c)}}function ro(t,e,i){null!==i&&"object"===typeof i&&"function"===typeof i.then?i.then(function(i){no(t,e,i)},function(i){return oo(t,e,i)}):no(t,e,i)}function no(t,e,i){e.status="fulfilled",e.value=i,ao(e),t.state=i,null!==(e=t.pending)&&((i=e.next)===e?t.pending=null:(i=i.next,e.next=i,so(t,i)))}function oo(t,e,i){var s=t.pending;if(t.pending=null,null!==s){s=s.next;do{e.status="rejected",e.reason=i,ao(e),e=e.next}while(e!==s)}t.action=null}function ao(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function ho(t,e){return e}function lo(t,e){if(nr){var i=rl.formState;if(null!==i){t:{var s=bn;if(nr){if(rr){e:{for(var r=rr,n=ar;8!==r.nodeType;){if(!n){r=null;break e}if(null===(r=vu(r.nextSibling))){r=null;break e}}r="F!"===(n=r.data)||"F"===n?r:null}if(r){rr=vu(r.nextSibling),s="F!"===r.data;break t}}lr(s)}s=!1}s&&(e=i[0])}}return(i=Nn()).memoizedState=i.baseState=e,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:e},i.queue=s,i=Oo.bind(null,bn,s),s.dispatch=i,s=to(!1),n=Go.bind(null,bn,!1,s.queue),r={state:e,dispatch:null,action:t,pending:null},(s=Nn()).queue=r,i=io.bind(null,bn,r,n,i),r.dispatch=i,s.memoizedState=t,[e,i,!1]}function co(t){return uo(On(),Sn,t)}function uo(t,e,i){if(e=jn(t,e,ho)[0],t=Hn(Un)[0],"object"===typeof e&&null!==e&&"function"===typeof e.then)try{var s=Yn(e)}catch(o){if(o===Hr)throw Wr;throw o}else s=e;var r=(e=On()).queue,n=r.dispatch;return i!==e.memoizedState&&(bn.flags|=2048,po(9,{destroy:void 0,resource:void 0},fo.bind(null,r,i),null)),[s,n,t]}function fo(t,e){t.action=e}function go(t){var e=On(),i=Sn;if(null!==i)return uo(e,i,t);On(),e=e.memoizedState;var s=(i=On()).queue.dispatch;return i.memoizedState=t,[e,s,!1]}function po(t,e,i,s){return t={tag:t,create:i,deps:s,inst:e,next:null},null===(e=bn.updateQueue)&&(e={lastEffect:null,events:null,stores:null,memoCache:null},bn.updateQueue=e),null===(i=e.lastEffect)?e.lastEffect=t.next=t:(s=i.next,i.next=t,t.next=s,e.lastEffect=t),t}function yo(){return On().memoizedState}function mo(t,e,i,s){var r=Nn();s=void 0===s?null:s,bn.flags|=t,r.memoizedState=po(1|e,{destroy:void 0,resource:void 0},i,s)}function vo(t,e,i,s){var r=On();s=void 0===s?null:s;var n=r.memoizedState.inst;null!==Sn&&null!==s&&Bn(s,Sn.memoizedState.deps)?r.memoizedState=po(e,n,i,s):(bn.flags|=t,r.memoizedState=po(1|e,n,i,s))}function xo(t,e){mo(8390656,8,t,e)}function bo(t,e){vo(2048,8,t,e)}function So(t,e){return vo(4,2,t,e)}function Ao(t,e){return vo(4,4,t,e)}function Eo(t,e){if("function"===typeof e){t=t();var i=e(t);return function(){"function"===typeof i?i():e(null)}}if(null!==e&&void 0!==e)return t=t(),e.current=t,function(){e.current=null}}function ko(t,e,i){i=null!==i&&void 0!==i?i.concat([t]):null,vo(4,4,Eo.bind(null,e,t),i)}function wo(){}function Mo(t,e){var i=On();e=void 0===e?null:e;var s=i.memoizedState;return null!==e&&Bn(e,s[1])?s[0]:(i.memoizedState=[t,e],t)}function Co(t,e){var i=On();e=void 0===e?null:e;var s=i.memoizedState;if(null!==e&&Bn(e,s[1]))return s[0];if(s=t(),wn){dt(!0);try{t()}finally{dt(!1)}}return i.memoizedState=[s,e],s}function To(t,e,i){return void 0===i||0!==(1073741824&xn)?t.memoizedState=e:(t.memoizedState=i,t=Rl(),bn.lanes|=t,gl|=t,i)}function Fo(t,e,i,s){return Zi(i,e)?i:null!==gn.current?(t=To(t,i,s),Zi(t,e)||(Ta=!0),t):0===(42&xn)?(Ta=!0,t.memoizedState=i):(t=Rl(),bn.lanes|=t,gl|=t,e)}function Po(t,e,i,s,r){var n=I.p;I.p=0!==n&&8>n?n:8;var o=z.T,a={};z.T=a,Go(t,!1,e,i);try{var h=r(),l=z.S;if(null!==l&&l(a,h),null!==h&&"object"===typeof h&&"function"===typeof h.then)Yo(t,e,function(t,e){var i=[],s={status:"pending",value:null,reason:null,then:function(t){i.push(t)}};return t.then(function(){s.status="fulfilled",s.value=e;for(var t=0;t<i.length;t++)(0,i[t])(e)},function(t){for(s.status="rejected",s.reason=t,t=0;t<i.length;t++)(0,i[t])(void 0)}),s}(h,s),Il());else Yo(t,e,s,Il())}catch(c){Yo(t,e,{then:function(){},status:"rejected",reason:c},Il())}finally{I.p=n,z.T=o}}function Bo(){}function Lo(t,e,i,s){if(5!==t.tag)throw Error(o(476));var r=Do(t).queue;Po(t,r,e,R,null===i?Bo:function(){return zo(t),i(s)})}function Do(t){var e=t.memoizedState;if(null!==e)return e;var i={};return(e={memoizedState:R,baseState:R,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Un,lastRenderedState:R},next:null}).next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Un,lastRenderedState:i},next:null},t.memoizedState=e,null!==(t=t.alternate)&&(t.memoizedState=e),e}function zo(t){Yo(t,Do(t).next.queue,{},Il())}function Io(){return Mr(Ju)}function Ro(){return On().memoizedState}function _o(){return On().memoizedState}function Vo(t){for(var e=t.return;null!==e;){switch(e.tag){case 24:case 3:var i=Il(),s=on(e,t=nn(i),i);return null!==s&&(_l(s,e,i),an(s,e,i)),e={cache:Dr()},void(t.payload=e)}e=e.return}}function No(t,e,i){var s=Il();i={lane:s,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},Xo(t)?Uo(e,i):null!==(i=Ps(t,e,i,s))&&(_l(i,t,s),Ho(i,e,s))}function Oo(t,e,i){Yo(t,e,i,Il())}function Yo(t,e,i,s){var r={lane:s,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(Xo(t))Uo(e,r);else{var n=t.alternate;if(0===t.lanes&&(null===n||0===n.lanes)&&null!==(n=e.lastRenderedReducer))try{var o=e.lastRenderedState,a=n(o,i);if(r.hasEagerState=!0,r.eagerState=a,Zi(a,o))return Fs(t,e,r,0),null===rl&&Ts(),!1}catch(h){}if(null!==(i=Ps(t,e,r,s)))return _l(i,t,s),Ho(i,e,s),!0}return!1}function Go(t,e,i,s){if(s={lane:2,revertLane:Pc(),action:s,hasEagerState:!1,eagerState:null,next:null},Xo(t)){if(e)throw Error(o(479))}else null!==(e=Ps(t,i,s,2))&&_l(e,t,2)}function Xo(t){var e=t.alternate;return t===bn||null!==e&&e===bn}function Uo(t,e){kn=En=!0;var i=t.pending;null===i?e.next=e:(e.next=i.next,i.next=e),t.pending=e}function Ho(t,e,i){if(0!==(4194048&i)){var s=e.lanes;i|=s&=t.pendingLanes,e.lanes=i,Ct(t,i)}}var jo={readContext:Mr,use:Gn,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useLayoutEffect:Pn,useInsertionEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useSyncExternalStore:Pn,useId:Pn,useHostTransitionStatus:Pn,useFormState:Pn,useActionState:Pn,useOptimistic:Pn,useMemoCache:Pn,useCacheRefresh:Pn},Wo={readContext:Mr,use:Gn,useCallback:function(t,e){return Nn().memoizedState=[t,void 0===e?null:e],t},useContext:Mr,useEffect:xo,useImperativeHandle:function(t,e,i){i=null!==i&&void 0!==i?i.concat([t]):null,mo(4194308,4,Eo.bind(null,e,t),i)},useLayoutEffect:function(t,e){return mo(4194308,4,t,e)},useInsertionEffect:function(t,e){mo(4,2,t,e)},useMemo:function(t,e){var i=Nn();e=void 0===e?null:e;var s=t();if(wn){dt(!0);try{t()}finally{dt(!1)}}return i.memoizedState=[s,e],s},useReducer:function(t,e,i){var s=Nn();if(void 0!==i){var r=i(e);if(wn){dt(!0);try{i(e)}finally{dt(!1)}}}else r=e;return s.memoizedState=s.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},s.queue=t,t=t.dispatch=No.bind(null,bn,t),[s.memoizedState,t]},useRef:function(t){return t={current:t},Nn().memoizedState=t},useState:function(t){var e=(t=to(t)).queue,i=Oo.bind(null,bn,e);return e.dispatch=i,[t.memoizedState,i]},useDebugValue:wo,useDeferredValue:function(t,e){return To(Nn(),t,e)},useTransition:function(){var t=to(!1);return t=Po.bind(null,bn,t.queue,!0,!1),Nn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,i){var s=bn,r=Nn();if(nr){if(void 0===i)throw Error(o(407));i=i()}else{if(i=e(),null===rl)throw Error(o(349));0!==(124&ol)||Jn(s,e,i)}r.memoizedState=i;var n={value:i,getSnapshot:e};return r.queue=n,xo(Qn.bind(null,s,n,t),[t]),s.flags|=2048,po(9,{destroy:void 0,resource:void 0},qn.bind(null,s,n,i,e),null),i},useId:function(){var t=Nn(),e=rl.identifierPrefix;if(nr){var i=Ks;e="\xab"+e+"R"+(i=(Qs&~(1<<32-ft(Qs)-1)).toString(32)+i),0<(i=Mn++)&&(e+="H"+i.toString(32)),e+="\xbb"}else e="\xab"+e+"r"+(i=Fn++).toString(32)+"\xbb";return t.memoizedState=e},useHostTransitionStatus:Io,useFormState:lo,useActionState:lo,useOptimistic:function(t){var e=Nn();e.memoizedState=e.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=i,e=Go.bind(null,bn,!0,i),i.dispatch=e,[t,e]},useMemoCache:Xn,useCacheRefresh:function(){return Nn().memoizedState=Vo.bind(null,bn)}},Zo={readContext:Mr,use:Gn,useCallback:Mo,useContext:Mr,useEffect:bo,useImperativeHandle:ko,useInsertionEffect:So,useLayoutEffect:Ao,useMemo:Co,useReducer:Hn,useRef:yo,useState:function(){return Hn(Un)},useDebugValue:wo,useDeferredValue:function(t,e){return Fo(On(),Sn.memoizedState,t,e)},useTransition:function(){var t=Hn(Un)[0],e=On().memoizedState;return["boolean"===typeof t?t:Yn(t),e]},useSyncExternalStore:Zn,useId:Ro,useHostTransitionStatus:Io,useFormState:co,useActionState:co,useOptimistic:function(t,e){return eo(On(),0,t,e)},useMemoCache:Xn,useCacheRefresh:_o},Jo={readContext:Mr,use:Gn,useCallback:Mo,useContext:Mr,useEffect:bo,useImperativeHandle:ko,useInsertionEffect:So,useLayoutEffect:Ao,useMemo:Co,useReducer:Wn,useRef:yo,useState:function(){return Wn(Un)},useDebugValue:wo,useDeferredValue:function(t,e){var i=On();return null===Sn?To(i,t,e):Fo(i,Sn.memoizedState,t,e)},useTransition:function(){var t=Wn(Un)[0],e=On().memoizedState;return["boolean"===typeof t?t:Yn(t),e]},useSyncExternalStore:Zn,useId:Ro,useHostTransitionStatus:Io,useFormState:go,useActionState:go,useOptimistic:function(t,e){var i=On();return null!==Sn?eo(i,0,t,e):(i.baseState=t,[t,i.queue.dispatch])},useMemoCache:Xn,useCacheRefresh:_o},qo=null,Qo=0;function Ko(t){var e=Qo;return Qo+=1,null===qo&&(qo=[]),Qr(qo,t,e)}function $o(t,e){e=e.props.ref,t.ref=void 0!==e?e:null}function ta(t,e){if(e.$$typeof===f)throw Error(o(525));throw t=Object.prototype.toString.call(e),Error(o(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ea(t){return(0,t._init)(t._payload)}function ia(t){function e(e,i){if(t){var s=e.deletions;null===s?(e.deletions=[i],e.flags|=16):s.push(i)}}function i(i,s){if(!t)return null;for(;null!==s;)e(i,s),s=s.sibling;return null}function s(t){for(var e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(t,e){return(t=Vs(t,e)).index=0,t.sibling=null,t}function n(e,i,s){return e.index=s,t?null!==(s=e.alternate)?(s=s.index)<i?(e.flags|=67108866,i):s:(e.flags|=67108866,i):(e.flags|=1048576,i)}function a(e){return t&&null===e.alternate&&(e.flags|=67108866),e}function h(t,e,i,s){return null===e||6!==e.tag?((e=Gs(i,t.mode,s)).return=t,e):((e=r(e,i)).return=t,e)}function l(t,e,i,s){var n=i.type;return n===y?u(t,e,i.props.children,s,i.key):null!==e&&(e.elementType===n||"object"===typeof n&&null!==n&&n.$$typeof===M&&ea(n)===e.type)?($o(e=r(e,i.props),i),e.return=t,e):($o(e=Os(i.type,i.key,i.props,null,t.mode,s),i),e.return=t,e)}function c(t,e,i,s){return null===e||4!==e.tag||e.stateNode.containerInfo!==i.containerInfo||e.stateNode.implementation!==i.implementation?((e=Xs(i,t.mode,s)).return=t,e):((e=r(e,i.children||[])).return=t,e)}function u(t,e,i,s,n){return null===e||7!==e.tag?((e=Ys(i,t.mode,s,n)).return=t,e):((e=r(e,i)).return=t,e)}function d(t,e,i){if("string"===typeof e&&""!==e||"number"===typeof e||"bigint"===typeof e)return(e=Gs(""+e,t.mode,i)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case g:return $o(i=Os(e.type,e.key,e.props,null,t.mode,i),e),i.return=t,i;case p:return(e=Xs(e,t.mode,i)).return=t,e;case M:return d(t,e=(0,e._init)(e._payload),i)}if(D(e)||P(e))return(e=Ys(e,t.mode,i,null)).return=t,e;if("function"===typeof e.then)return d(t,Ko(e),i);if(e.$$typeof===S)return d(t,Cr(t,e),i);ta(t,e)}return null}function f(t,e,i,s){var r=null!==e?e.key:null;if("string"===typeof i&&""!==i||"number"===typeof i||"bigint"===typeof i)return null!==r?null:h(t,e,""+i,s);if("object"===typeof i&&null!==i){switch(i.$$typeof){case g:return i.key===r?l(t,e,i,s):null;case p:return i.key===r?c(t,e,i,s):null;case M:return f(t,e,i=(r=i._init)(i._payload),s)}if(D(i)||P(i))return null!==r?null:u(t,e,i,s,null);if("function"===typeof i.then)return f(t,e,Ko(i),s);if(i.$$typeof===S)return f(t,e,Cr(t,i),s);ta(t,i)}return null}function m(t,e,i,s,r){if("string"===typeof s&&""!==s||"number"===typeof s||"bigint"===typeof s)return h(e,t=t.get(i)||null,""+s,r);if("object"===typeof s&&null!==s){switch(s.$$typeof){case g:return l(e,t=t.get(null===s.key?i:s.key)||null,s,r);case p:return c(e,t=t.get(null===s.key?i:s.key)||null,s,r);case M:return m(t,e,i,s=(0,s._init)(s._payload),r)}if(D(s)||P(s))return u(e,t=t.get(i)||null,s,r,null);if("function"===typeof s.then)return m(t,e,i,Ko(s),r);if(s.$$typeof===S)return m(t,e,i,Cr(e,s),r);ta(e,s)}return null}function v(h,l,c,u){if("object"===typeof c&&null!==c&&c.type===y&&null===c.key&&(c=c.props.children),"object"===typeof c&&null!==c){switch(c.$$typeof){case g:t:{for(var x=c.key;null!==l;){if(l.key===x){if((x=c.type)===y){if(7===l.tag){i(h,l.sibling),(u=r(l,c.props.children)).return=h,h=u;break t}}else if(l.elementType===x||"object"===typeof x&&null!==x&&x.$$typeof===M&&ea(x)===l.type){i(h,l.sibling),$o(u=r(l,c.props),c),u.return=h,h=u;break t}i(h,l);break}e(h,l),l=l.sibling}c.type===y?((u=Ys(c.props.children,h.mode,u,c.key)).return=h,h=u):($o(u=Os(c.type,c.key,c.props,null,h.mode,u),c),u.return=h,h=u)}return a(h);case p:t:{for(x=c.key;null!==l;){if(l.key===x){if(4===l.tag&&l.stateNode.containerInfo===c.containerInfo&&l.stateNode.implementation===c.implementation){i(h,l.sibling),(u=r(l,c.children||[])).return=h,h=u;break t}i(h,l);break}e(h,l),l=l.sibling}(u=Xs(c,h.mode,u)).return=h,h=u}return a(h);case M:return v(h,l,c=(x=c._init)(c._payload),u)}if(D(c))return function(r,o,a,h){for(var l=null,c=null,u=o,g=o=0,p=null;null!==u&&g<a.length;g++){u.index>g?(p=u,u=null):p=u.sibling;var y=f(r,u,a[g],h);if(null===y){null===u&&(u=p);break}t&&u&&null===y.alternate&&e(r,u),o=n(y,o,g),null===c?l=y:c.sibling=y,c=y,u=p}if(g===a.length)return i(r,u),nr&&$s(r,g),l;if(null===u){for(;g<a.length;g++)null!==(u=d(r,a[g],h))&&(o=n(u,o,g),null===c?l=u:c.sibling=u,c=u);return nr&&$s(r,g),l}for(u=s(u);g<a.length;g++)null!==(p=m(u,r,g,a[g],h))&&(t&&null!==p.alternate&&u.delete(null===p.key?g:p.key),o=n(p,o,g),null===c?l=p:c.sibling=p,c=p);return t&&u.forEach(function(t){return e(r,t)}),nr&&$s(r,g),l}(h,l,c,u);if(P(c)){if("function"!==typeof(x=P(c)))throw Error(o(150));return function(r,a,h,l){if(null==h)throw Error(o(151));for(var c=null,u=null,g=a,p=a=0,y=null,v=h.next();null!==g&&!v.done;p++,v=h.next()){g.index>p?(y=g,g=null):y=g.sibling;var x=f(r,g,v.value,l);if(null===x){null===g&&(g=y);break}t&&g&&null===x.alternate&&e(r,g),a=n(x,a,p),null===u?c=x:u.sibling=x,u=x,g=y}if(v.done)return i(r,g),nr&&$s(r,p),c;if(null===g){for(;!v.done;p++,v=h.next())null!==(v=d(r,v.value,l))&&(a=n(v,a,p),null===u?c=v:u.sibling=v,u=v);return nr&&$s(r,p),c}for(g=s(g);!v.done;p++,v=h.next())null!==(v=m(g,r,p,v.value,l))&&(t&&null!==v.alternate&&g.delete(null===v.key?p:v.key),a=n(v,a,p),null===u?c=v:u.sibling=v,u=v);return t&&g.forEach(function(t){return e(r,t)}),nr&&$s(r,p),c}(h,l,c=x.call(c),u)}if("function"===typeof c.then)return v(h,l,Ko(c),u);if(c.$$typeof===S)return v(h,l,Cr(h,c),u);ta(h,c)}return"string"===typeof c&&""!==c||"number"===typeof c||"bigint"===typeof c?(c=""+c,null!==l&&6===l.tag?(i(h,l.sibling),(u=r(l,c)).return=h,h=u):(i(h,l),(u=Gs(c,h.mode,u)).return=h,h=u),a(h)):i(h,l)}return function(t,e,i,s){try{Qo=0;var r=v(t,e,i,s);return qo=null,r}catch(o){if(o===Hr||o===Wr)throw o;var n=Rs(29,o,null,t.mode);return n.lanes=s,n.return=t,n}}}var sa=ia(!0),ra=ia(!1),na=N(null),oa=null;function aa(t){var e=t.alternate;Y(ua,1&ua.current),Y(na,t),null===oa&&(null===e||null!==gn.current||null!==e.memoizedState)&&(oa=t)}function ha(t){if(22===t.tag){if(Y(ua,ua.current),Y(na,t),null===oa){var e=t.alternate;null!==e&&null!==e.memoizedState&&(oa=t)}}else la()}function la(){Y(ua,ua.current),Y(na,na.current)}function ca(t){O(na),oa===t&&(oa=null),O(ua)}var ua=N(0);function da(t){for(var e=t;null!==e;){if(13===e.tag){var i=e.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||mu(i)))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function fa(t,e,i,s){i=null===(i=i(s,e=t.memoizedState))||void 0===i?e:d({},e,i),t.memoizedState=i,0===t.lanes&&(t.updateQueue.baseState=i)}var ga={enqueueSetState:function(t,e,i){t=t._reactInternals;var s=Il(),r=nn(s);r.payload=e,void 0!==i&&null!==i&&(r.callback=i),null!==(e=on(t,r,s))&&(_l(e,t,s),an(e,t,s))},enqueueReplaceState:function(t,e,i){t=t._reactInternals;var s=Il(),r=nn(s);r.tag=1,r.payload=e,void 0!==i&&null!==i&&(r.callback=i),null!==(e=on(t,r,s))&&(_l(e,t,s),an(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var i=Il(),s=nn(i);s.tag=2,void 0!==e&&null!==e&&(s.callback=e),null!==(e=on(t,s,i))&&(_l(e,t,i),an(e,t,i))}};function pa(t,e,i,s,r,n,o){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(s,n,o):!e.prototype||!e.prototype.isPureReactComponent||(!Ji(i,s)||!Ji(r,n))}function ya(t,e,i,s){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(i,s),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(i,s),e.state!==t&&ga.enqueueReplaceState(e,e.state,null)}function ma(t,e){var i=e;if("ref"in e)for(var s in i={},e)"ref"!==s&&(i[s]=e[s]);if(t=t.defaultProps)for(var r in i===e&&(i=d({},i)),t)void 0===i[r]&&(i[r]=t[r]);return i}var va="function"===typeof reportError?reportError:function(t){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof t&&null!==t&&"string"===typeof t.message?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",t);console.error(t)};function xa(t){va(t)}function ba(t){console.error(t)}function Sa(t){va(t)}function Aa(t,e){try{(0,t.onUncaughtError)(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function Ea(t,e,i){try{(0,t.onCaughtError)(i.value,{componentStack:i.stack,errorBoundary:1===e.tag?e.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function ka(t,e,i){return(i=nn(i)).tag=3,i.payload={element:null},i.callback=function(){Aa(t,e)},i}function wa(t){return(t=nn(t)).tag=3,t}function Ma(t,e,i,s){var r=i.type.getDerivedStateFromError;if("function"===typeof r){var n=s.value;t.payload=function(){return r(n)},t.callback=function(){Ea(e,i,s)}}var o=i.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(t.callback=function(){Ea(e,i,s),"function"!==typeof r&&(null===wl?wl=new Set([this]):wl.add(this));var t=s.stack;this.componentDidCatch(s.value,{componentStack:null!==t?t:""})})}var Ca=Error(o(461)),Ta=!1;function Fa(t,e,i,s){e.child=null===t?ra(e,null,i,s):sa(e,t.child,i,s)}function Pa(t,e,i,s,r){i=i.render;var n=e.ref;if("ref"in s){var o={};for(var a in s)"ref"!==a&&(o[a]=s[a])}else o=s;return wr(e),s=Ln(t,e,i,o,n,r),a=Rn(),null===t||Ta?(nr&&a&&er(e),e.flags|=1,Fa(t,e,s,r),e.child):(_n(t,e,r),qa(t,e,r))}function Ba(t,e,i,s,r){if(null===t){var n=i.type;return"function"!==typeof n||_s(n)||void 0!==n.defaultProps||null!==i.compare?((t=Os(i.type,null,s,e,e.mode,r)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=n,La(t,e,n,s,r))}if(n=t.child,!Qa(t,r)){var o=n.memoizedProps;if((i=null!==(i=i.compare)?i:Ji)(o,s)&&t.ref===e.ref)return qa(t,e,r)}return e.flags|=1,(t=Vs(n,s)).ref=e.ref,t.return=e,e.child=t}function La(t,e,i,s,r){if(null!==t){var n=t.memoizedProps;if(Ji(n,s)&&t.ref===e.ref){if(Ta=!1,e.pendingProps=s=n,!Qa(t,r))return e.lanes=t.lanes,qa(t,e,r);0!==(131072&t.flags)&&(Ta=!0)}}return Ra(t,e,i,s,r)}function Da(t,e,i){var s=e.pendingProps,r=s.children,n=null!==t?t.memoizedState:null;if("hidden"===s.mode){if(0!==(128&e.flags)){if(s=null!==n?n.baseLanes|i:i,null!==t){for(r=e.child=t.child,n=0;null!==r;)n=n|r.lanes|r.childLanes,r=r.sibling;e.childLanes=n&~s}else e.childLanes=0,e.child=null;return za(t,e,s,i)}if(0===(536870912&i))return e.lanes=e.childLanes=536870912,za(t,e,null!==n?n.baseLanes|i:i,i);e.memoizedState={baseLanes:0,cachePool:null},null!==t&&Xr(0,null!==n?n.cachePool:null),null!==n?yn(e,n):mn(),ha(e)}else null!==n?(Xr(0,n.cachePool),yn(e,n),la(),e.memoizedState=null):(null!==t&&Xr(0,null),mn(),la());return Fa(t,e,r,i),e.child}function za(t,e,i,s){var r=Gr();return r=null===r?null:{parent:Lr._currentValue,pool:r},e.memoizedState={baseLanes:i,cachePool:r},null!==t&&Xr(0,null),mn(),ha(e),null!==t&&Er(t,e,s,!0),null}function Ia(t,e){var i=e.ref;if(null===i)null!==t&&null!==t.ref&&(e.flags|=4194816);else{if("function"!==typeof i&&"object"!==typeof i)throw Error(o(284));null!==t&&t.ref===i||(e.flags|=4194816)}}function Ra(t,e,i,s,r){return wr(e),i=Ln(t,e,i,s,void 0,r),s=Rn(),null===t||Ta?(nr&&s&&er(e),e.flags|=1,Fa(t,e,i,r),e.child):(_n(t,e,r),qa(t,e,r))}function _a(t,e,i,s,r,n){return wr(e),e.updateQueue=null,i=zn(e,s,i,r),Dn(t),s=Rn(),null===t||Ta?(nr&&s&&er(e),e.flags|=1,Fa(t,e,i,n),e.child):(_n(t,e,n),qa(t,e,n))}function Va(t,e,i,s,r){if(wr(e),null===e.stateNode){var n=zs,o=i.contextType;"object"===typeof o&&null!==o&&(n=Mr(o)),n=new i(s,n),e.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,n.updater=ga,e.stateNode=n,n._reactInternals=e,(n=e.stateNode).props=s,n.state=e.memoizedState,n.refs={},sn(e),o=i.contextType,n.context="object"===typeof o&&null!==o?Mr(o):zs,n.state=e.memoizedState,"function"===typeof(o=i.getDerivedStateFromProps)&&(fa(e,i,o,s),n.state=e.memoizedState),"function"===typeof i.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(o=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),o!==n.state&&ga.enqueueReplaceState(n,n.state,null),un(e,s,n,r),cn(),n.state=e.memoizedState),"function"===typeof n.componentDidMount&&(e.flags|=4194308),s=!0}else if(null===t){n=e.stateNode;var a=e.memoizedProps,h=ma(i,a);n.props=h;var l=n.context,c=i.contextType;o=zs,"object"===typeof c&&null!==c&&(o=Mr(c));var u=i.getDerivedStateFromProps;c="function"===typeof u||"function"===typeof n.getSnapshotBeforeUpdate,a=e.pendingProps!==a,c||"function"!==typeof n.UNSAFE_componentWillReceiveProps&&"function"!==typeof n.componentWillReceiveProps||(a||l!==o)&&ya(e,n,s,o),en=!1;var d=e.memoizedState;n.state=d,un(e,s,n,r),cn(),l=e.memoizedState,a||d!==l||en?("function"===typeof u&&(fa(e,i,u,s),l=e.memoizedState),(h=en||pa(e,i,h,s,d,l,o))?(c||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||("function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount()),"function"===typeof n.componentDidMount&&(e.flags|=4194308)):("function"===typeof n.componentDidMount&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),n.props=s,n.state=l,n.context=o,s=h):("function"===typeof n.componentDidMount&&(e.flags|=4194308),s=!1)}else{n=e.stateNode,rn(t,e),c=ma(i,o=e.memoizedProps),n.props=c,u=e.pendingProps,d=n.context,l=i.contextType,h=zs,"object"===typeof l&&null!==l&&(h=Mr(l)),(l="function"===typeof(a=i.getDerivedStateFromProps)||"function"===typeof n.getSnapshotBeforeUpdate)||"function"!==typeof n.UNSAFE_componentWillReceiveProps&&"function"!==typeof n.componentWillReceiveProps||(o!==u||d!==h)&&ya(e,n,s,h),en=!1,d=e.memoizedState,n.state=d,un(e,s,n,r),cn();var f=e.memoizedState;o!==u||d!==f||en||null!==t&&null!==t.dependencies&&kr(t.dependencies)?("function"===typeof a&&(fa(e,i,a,s),f=e.memoizedState),(c=en||pa(e,i,c,s,d,f,h)||null!==t&&null!==t.dependencies&&kr(t.dependencies))?(l||"function"!==typeof n.UNSAFE_componentWillUpdate&&"function"!==typeof n.componentWillUpdate||("function"===typeof n.componentWillUpdate&&n.componentWillUpdate(s,f,h),"function"===typeof n.UNSAFE_componentWillUpdate&&n.UNSAFE_componentWillUpdate(s,f,h)),"function"===typeof n.componentDidUpdate&&(e.flags|=4),"function"===typeof n.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof n.componentDidUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof n.getSnapshotBeforeUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=f),n.props=s,n.state=f,n.context=h,s=c):("function"!==typeof n.componentDidUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof n.getSnapshotBeforeUpdate||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),s=!1)}return n=s,Ia(t,e),s=0!==(128&e.flags),n||s?(n=e.stateNode,i=s&&"function"!==typeof i.getDerivedStateFromError?null:n.render(),e.flags|=1,null!==t&&s?(e.child=sa(e,t.child,null,r),e.child=sa(e,null,i,r)):Fa(t,e,i,r),e.memoizedState=n.state,t=e.child):t=qa(t,e,r),t}function Na(t,e,i,s){return fr(),e.flags|=256,Fa(t,e,i,s),e.child}var Oa={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ya(t){return{baseLanes:t,cachePool:Ur()}}function Ga(t,e,i){return t=null!==t?t.childLanes&~i:0,e&&(t|=ml),t}function Xa(t,e,i){var s,r=e.pendingProps,n=!1,a=0!==(128&e.flags);if((s=a)||(s=(null===t||null!==t.memoizedState)&&0!==(2&ua.current)),s&&(n=!0,e.flags&=-129),s=0!==(32&e.flags),e.flags&=-33,null===t){if(nr){if(n?aa(e):la(),nr){var h,l=rr;if(h=l){t:{for(h=l,l=ar;8!==h.nodeType;){if(!l){l=null;break t}if(null===(h=vu(h.nextSibling))){l=null;break t}}l=h}null!==l?(e.memoizedState={dehydrated:l,treeContext:null!==qs?{id:Qs,overflow:Ks}:null,retryLane:536870912,hydrationErrors:null},(h=Rs(18,null,null,0)).stateNode=l,h.return=e,e.child=h,sr=e,rr=null,h=!0):h=!1}h||lr(e)}if(null!==(l=e.memoizedState)&&null!==(l=l.dehydrated))return mu(l)?e.lanes=32:e.lanes=536870912,null;ca(e)}return l=r.children,r=r.fallback,n?(la(),l=Ha({mode:"hidden",children:l},n=e.mode),r=Ys(r,n,i,null),l.return=e,r.return=e,l.sibling=r,e.child=l,(n=e.child).memoizedState=Ya(i),n.childLanes=Ga(t,s,i),e.memoizedState=Oa,r):(aa(e),Ua(e,l))}if(null!==(h=t.memoizedState)&&null!==(l=h.dehydrated)){if(a)256&e.flags?(aa(e),e.flags&=-257,e=ja(t,e,i)):null!==e.memoizedState?(la(),e.child=t.child,e.flags|=128,e=null):(la(),n=r.fallback,l=e.mode,r=Ha({mode:"visible",children:r.children},l),(n=Ys(n,l,i,null)).flags|=2,r.return=e,n.return=e,r.sibling=n,e.child=r,sa(e,t.child,null,i),(r=e.child).memoizedState=Ya(i),r.childLanes=Ga(t,s,i),e.memoizedState=Oa,e=n);else if(aa(e),mu(l)){if(s=l.nextSibling&&l.nextSibling.dataset)var c=s.dgst;s=c,(r=Error(o(419))).stack="",r.digest=s,pr({value:r,source:null,stack:null}),e=ja(t,e,i)}else if(Ta||Er(t,e,i,!1),s=0!==(i&t.childLanes),Ta||s){if(null!==(s=rl)&&(0!==(r=0!==((r=0!==(42&(r=i&-i))?1:Tt(r))&(s.suspendedLanes|i))?0:r)&&r!==h.retryLane))throw h.retryLane=r,Bs(t,r),_l(s,t,r),Ca;"$?"===l.data||Zl(),e=ja(t,e,i)}else"$?"===l.data?(e.flags|=192,e.child=t.child,e=null):(t=h.treeContext,rr=vu(l.nextSibling),sr=e,nr=!0,or=null,ar=!1,null!==t&&(Zs[Js++]=Qs,Zs[Js++]=Ks,Zs[Js++]=qs,Qs=t.id,Ks=t.overflow,qs=e),(e=Ua(e,r.children)).flags|=4096);return e}return n?(la(),n=r.fallback,l=e.mode,c=(h=t.child).sibling,(r=Vs(h,{mode:"hidden",children:r.children})).subtreeFlags=65011712&h.subtreeFlags,null!==c?n=Vs(c,n):(n=Ys(n,l,i,null)).flags|=2,n.return=e,r.return=e,r.sibling=n,e.child=r,r=n,n=e.child,null===(l=t.child.memoizedState)?l=Ya(i):(null!==(h=l.cachePool)?(c=Lr._currentValue,h=h.parent!==c?{parent:c,pool:c}:h):h=Ur(),l={baseLanes:l.baseLanes|i,cachePool:h}),n.memoizedState=l,n.childLanes=Ga(t,s,i),e.memoizedState=Oa,r):(aa(e),t=(i=t.child).sibling,(i=Vs(i,{mode:"visible",children:r.children})).return=e,i.sibling=null,null!==t&&(null===(s=e.deletions)?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=i,e.memoizedState=null,i)}function Ua(t,e){return(e=Ha({mode:"visible",children:e},t.mode)).return=t,t.child=e}function Ha(t,e){return(t=Rs(22,t,null,e)).lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function ja(t,e,i){return sa(e,t.child,null,i),(t=Ua(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Wa(t,e,i){t.lanes|=e;var s=t.alternate;null!==s&&(s.lanes|=e),Sr(t.return,e,i)}function Za(t,e,i,s,r){var n=t.memoizedState;null===n?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:r}:(n.isBackwards=e,n.rendering=null,n.renderingStartTime=0,n.last=s,n.tail=i,n.tailMode=r)}function Ja(t,e,i){var s=e.pendingProps,r=s.revealOrder,n=s.tail;if(Fa(t,e,s.children,i),0!==(2&(s=ua.current)))s=1&s|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Wa(t,i,e);else if(19===t.tag)Wa(t,i,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}switch(Y(ua,s),r){case"forwards":for(i=e.child,r=null;null!==i;)null!==(t=i.alternate)&&null===da(t)&&(r=i),i=i.sibling;null===(i=r)?(r=e.child,e.child=null):(r=i.sibling,i.sibling=null),Za(e,!1,r,i,n);break;case"backwards":for(i=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===da(t)){e.child=r;break}t=r.sibling,r.sibling=i,i=r,r=t}Za(e,!0,i,null,n);break;case"together":Za(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qa(t,e,i){if(null!==t&&(e.dependencies=t.dependencies),gl|=e.lanes,0===(i&e.childLanes)){if(null===t)return null;if(Er(t,e,i,!1),0===(i&e.childLanes))return null}if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(i=Vs(t=e.child,t.pendingProps),e.child=i,i.return=e;null!==t.sibling;)t=t.sibling,(i=i.sibling=Vs(t,t.pendingProps)).return=e;i.sibling=null}return e.child}function Qa(t,e){return 0!==(t.lanes&e)||!(null===(t=t.dependencies)||!kr(t))}function Ka(t,e,i){if(null!==t)if(t.memoizedProps!==e.pendingProps)Ta=!0;else{if(!Qa(t,i)&&0===(128&e.flags))return Ta=!1,function(t,e,i){switch(e.tag){case 3:j(e,e.stateNode.containerInfo),xr(0,Lr,t.memoizedState.cache),fr();break;case 27:case 5:Z(e);break;case 4:j(e,e.stateNode.containerInfo);break;case 10:xr(0,e.type,e.memoizedProps.value);break;case 13:var s=e.memoizedState;if(null!==s)return null!==s.dehydrated?(aa(e),e.flags|=128,null):0!==(i&e.child.childLanes)?Xa(t,e,i):(aa(e),null!==(t=qa(t,e,i))?t.sibling:null);aa(e);break;case 19:var r=0!==(128&t.flags);if((s=0!==(i&e.childLanes))||(Er(t,e,i,!1),s=0!==(i&e.childLanes)),r){if(s)return Ja(t,e,i);e.flags|=128}if(null!==(r=e.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Y(ua,ua.current),s)break;return null;case 22:case 23:return e.lanes=0,Da(t,e,i);case 24:xr(0,Lr,t.memoizedState.cache)}return qa(t,e,i)}(t,e,i);Ta=0!==(131072&t.flags)}else Ta=!1,nr&&0!==(1048576&e.flags)&&tr(e,Ws,e.index);switch(e.lanes=0,e.tag){case 16:t:{t=e.pendingProps;var s=e.elementType,r=s._init;if(s=r(s._payload),e.type=s,"function"!==typeof s){if(void 0!==s&&null!==s){if((r=s.$$typeof)===A){e.tag=11,e=Pa(null,e,s,t,i);break t}if(r===w){e.tag=14,e=Ba(null,e,s,t,i);break t}}throw e=L(s)||s,Error(o(306,e,""))}_s(s)?(t=ma(s,t),e.tag=1,e=Va(null,e,s,t,i)):(e.tag=0,e=Ra(null,e,s,t,i))}return e;case 0:return Ra(t,e,e.type,e.pendingProps,i);case 1:return Va(t,e,s=e.type,r=ma(s,e.pendingProps),i);case 3:t:{if(j(e,e.stateNode.containerInfo),null===t)throw Error(o(387));s=e.pendingProps;var n=e.memoizedState;r=n.element,rn(t,e),un(e,s,null,i);var a=e.memoizedState;if(s=a.cache,xr(0,Lr,s),s!==n.cache&&Ar(e,[Lr],i,!0),cn(),s=a.element,n.isDehydrated){if(n={element:s,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=n,e.memoizedState=n,256&e.flags){e=Na(t,e,s,i);break t}if(s!==r){pr(r=ks(Error(o(424)),e)),e=Na(t,e,s,i);break t}if(9===(t=e.stateNode.containerInfo).nodeType)t=t.body;else t="HTML"===t.nodeName?t.ownerDocument.body:t;for(rr=vu(t.firstChild),sr=e,nr=!0,or=null,ar=!0,i=ra(e,null,s,i),e.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(fr(),s===r){e=qa(t,e,i);break t}Fa(t,e,s,i)}e=e.child}return e;case 26:return Ia(t,e),null===t?(i=Fu(e.type,null,e.pendingProps,null))?e.memoizedState=i:nr||(i=e.type,t=e.pendingProps,(s=ru(U.current).createElement(i))[Lt]=e,s[Dt]=t,eu(s,i,t),Ht(s),e.stateNode=s):e.memoizedState=Fu(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Z(e),null===t&&nr&&(s=e.stateNode=Su(e.type,e.pendingProps,U.current),sr=e,ar=!0,r=rr,gu(e.type)?(xu=r,rr=vu(s.firstChild)):rr=r),Fa(t,e,e.pendingProps.children,i),Ia(t,e),null===t&&(e.flags|=4194304),e.child;case 5:return null===t&&nr&&((r=s=rr)&&(null!==(s=function(t,e,i,s){for(;1===t.nodeType;){var r=i;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!s&&("INPUT"!==t.nodeName||"hidden"!==t.type))break}else if(s){if(!t[Nt])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if("stylesheet"===(n=t.getAttribute("rel"))&&t.hasAttribute("data-precedence"))break;if(n!==r.rel||t.getAttribute("href")!==(null==r.href||""===r.href?null:r.href)||t.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin)||t.getAttribute("title")!==(null==r.title?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(((n=t.getAttribute("src"))!==(null==r.src?null:r.src)||t.getAttribute("type")!==(null==r.type?null:r.type)||t.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin))&&n&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else{if("input"!==e||"hidden"!==t.type)return t;var n=null==r.name?null:""+r.name;if("hidden"===r.type&&t.getAttribute("name")===n)return t}if(null===(t=vu(t.nextSibling)))break}return null}(s,e.type,e.pendingProps,ar))?(e.stateNode=s,sr=e,rr=vu(s.firstChild),ar=!1,r=!0):r=!1),r||lr(e)),Z(e),r=e.type,n=e.pendingProps,a=null!==t?t.memoizedProps:null,s=n.children,au(r,n)?s=null:null!==a&&au(r,a)&&(e.flags|=32),null!==e.memoizedState&&(r=Ln(t,e,In,null,null,i),Ju._currentValue=r),Ia(t,e),Fa(t,e,s,i),e.child;case 6:return null===t&&nr&&((t=i=rr)&&(null!==(i=function(t,e,i){if(""===e)return null;for(;3!==t.nodeType;){if((1!==t.nodeType||"INPUT"!==t.nodeName||"hidden"!==t.type)&&!i)return null;if(null===(t=vu(t.nextSibling)))return null}return t}(i,e.pendingProps,ar))?(e.stateNode=i,sr=e,rr=null,t=!0):t=!1),t||lr(e)),null;case 13:return Xa(t,e,i);case 4:return j(e,e.stateNode.containerInfo),s=e.pendingProps,null===t?e.child=sa(e,null,s,i):Fa(t,e,s,i),e.child;case 11:return Pa(t,e,e.type,e.pendingProps,i);case 7:return Fa(t,e,e.pendingProps,i),e.child;case 8:case 12:return Fa(t,e,e.pendingProps.children,i),e.child;case 10:return s=e.pendingProps,xr(0,e.type,s.value),Fa(t,e,s.children,i),e.child;case 9:return r=e.type._context,s=e.pendingProps.children,wr(e),s=s(r=Mr(r)),e.flags|=1,Fa(t,e,s,i),e.child;case 14:return Ba(t,e,e.type,e.pendingProps,i);case 15:return La(t,e,e.type,e.pendingProps,i);case 19:return Ja(t,e,i);case 31:return s=e.pendingProps,i=e.mode,s={mode:s.mode,children:s.children},null===t?((i=Ha(s,i)).ref=e.ref,e.child=i,i.return=e,e=i):((i=Vs(t.child,s)).ref=e.ref,e.child=i,i.return=e,e=i),e;case 22:return Da(t,e,i);case 24:return wr(e),s=Mr(Lr),null===t?(null===(r=Gr())&&(r=rl,n=Dr(),r.pooledCache=n,n.refCount++,null!==n&&(r.pooledCacheLanes|=i),r=n),e.memoizedState={parent:s,cache:r},sn(e),xr(0,Lr,r)):(0!==(t.lanes&i)&&(rn(t,e),un(e,null,null,i),cn()),r=t.memoizedState,n=e.memoizedState,r.parent!==s?(r={parent:s,cache:s},e.memoizedState=r,0===e.lanes&&(e.memoizedState=e.updateQueue.baseState=r),xr(0,Lr,s)):(s=n.cache,xr(0,Lr,s),s!==r.cache&&Ar(e,[Lr],i,!0))),Fa(t,e,e.pendingProps.children,i),e.child;case 29:throw e.pendingProps}throw Error(o(156,e.tag))}function $a(t){t.flags|=4}function th(t,e){if("stylesheet"!==e.type||0!==(4&e.state.loading))t.flags&=-16777217;else if(t.flags|=16777216,!Gu(e)){if(null!==(e=na.current)&&((4194048&ol)===ol?null!==oa:(62914560&ol)!==ol&&0===(536870912&ol)||e!==oa))throw Kr=Zr,jr;t.flags|=8192}}function eh(t,e){null!==e&&(t.flags|=4),16384&t.flags&&(e=22!==t.tag?Et():536870912,t.lanes|=e,vl|=e)}function ih(t,e){if(!nr)switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;null!==e;)null!==e.alternate&&(i=e),e=e.sibling;null===i?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var s=null;null!==i;)null!==i.alternate&&(s=i),i=i.sibling;null===s?e||null===t.tail?t.tail=null:t.tail.sibling=null:s.sibling=null}}function sh(t){var e=null!==t.alternate&&t.alternate.child===t.child,i=0,s=0;if(e)for(var r=t.child;null!==r;)i|=r.lanes|r.childLanes,s|=65011712&r.subtreeFlags,s|=65011712&r.flags,r.return=t,r=r.sibling;else for(r=t.child;null!==r;)i|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=i,e}function rh(t,e,i){var s=e.pendingProps;switch(ir(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return sh(e),null;case 3:return i=e.stateNode,s=null,null!==t&&(s=t.memoizedState.cache),e.memoizedState.cache!==s&&(e.flags|=2048),br(Lr),W(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(dr(e)?$a(e):null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,gr())),sh(e),null;case 26:return i=e.memoizedState,null===t?($a(e),null!==i?(sh(e),th(e,i)):(sh(e),e.flags&=-16777217)):i?i!==t.memoizedState?($a(e),sh(e),th(e,i)):(sh(e),e.flags&=-16777217):(t.memoizedProps!==s&&$a(e),sh(e),e.flags&=-16777217),null;case 27:J(e),i=U.current;var r=e.type;if(null!==t&&null!=e.stateNode)t.memoizedProps!==s&&$a(e);else{if(!s){if(null===e.stateNode)throw Error(o(166));return sh(e),null}t=G.current,dr(e)?cr(e):(t=Su(r,s,i),e.stateNode=t,$a(e))}return sh(e),null;case 5:if(J(e),i=e.type,null!==t&&null!=e.stateNode)t.memoizedProps!==s&&$a(e);else{if(!s){if(null===e.stateNode)throw Error(o(166));return sh(e),null}if(t=G.current,dr(e))cr(e);else{switch(r=ru(U.current),t){case 1:t=r.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:t=r.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":t=r.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":t=r.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":(t=r.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t="string"===typeof s.is?r.createElement("select",{is:s.is}):r.createElement("select"),s.multiple?t.multiple=!0:s.size&&(t.size=s.size);break;default:t="string"===typeof s.is?r.createElement(i,{is:s.is}):r.createElement(i)}}t[Lt]=e,t[Dt]=s;t:for(r=e.child;null!==r;){if(5===r.tag||6===r.tag)t.appendChild(r.stateNode);else if(4!==r.tag&&27!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break t;for(;null===r.sibling;){if(null===r.return||r.return===e)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}e.stateNode=t;t:switch(eu(t,i,s),i){case"button":case"input":case"select":case"textarea":t=!!s.autoFocus;break t;case"img":t=!0;break t;default:t=!1}t&&$a(e)}}return sh(e),e.flags&=-16777217,null;case 6:if(t&&null!=e.stateNode)t.memoizedProps!==s&&$a(e);else{if("string"!==typeof s&&null===e.stateNode)throw Error(o(166));if(t=U.current,dr(e)){if(t=e.stateNode,i=e.memoizedProps,s=null,null!==(r=sr))switch(r.tag){case 27:case 5:s=r.memoizedProps}t[Lt]=e,(t=!!(t.nodeValue===i||null!==s&&!0===s.suppressHydrationWarning||Qc(t.nodeValue,i)))||lr(e)}else(t=ru(t).createTextNode(s))[Lt]=e,e.stateNode=t}return sh(e),null;case 13:if(s=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(r=dr(e),null!==s&&null!==s.dehydrated){if(null===t){if(!r)throw Error(o(318));if(!(r=null!==(r=e.memoizedState)?r.dehydrated:null))throw Error(o(317));r[Lt]=e}else fr(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;sh(e),r=!1}else r=gr(),null!==t&&null!==t.memoizedState&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return 256&e.flags?(ca(e),e):(ca(e),null)}if(ca(e),0!==(128&e.flags))return e.lanes=i,e;if(i=null!==s,t=null!==t&&null!==t.memoizedState,i){r=null,null!==(s=e.child).alternate&&null!==s.alternate.memoizedState&&null!==s.alternate.memoizedState.cachePool&&(r=s.alternate.memoizedState.cachePool.pool);var n=null;null!==s.memoizedState&&null!==s.memoizedState.cachePool&&(n=s.memoizedState.cachePool.pool),n!==r&&(s.flags|=2048)}return i!==t&&i&&(e.child.flags|=8192),eh(e,e.updateQueue),sh(e),null;case 4:return W(),null===t&&Yc(e.stateNode.containerInfo),sh(e),null;case 10:return br(e.type),sh(e),null;case 19:if(O(ua),null===(r=e.memoizedState))return sh(e),null;if(s=0!==(128&e.flags),null===(n=r.rendering))if(s)ih(r,!1);else{if(0!==fl||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(n=da(t))){for(e.flags|=128,ih(r,!1),t=n.updateQueue,e.updateQueue=t,eh(e,t),e.subtreeFlags=0,t=i,i=e.child;null!==i;)Ns(i,t),i=i.sibling;return Y(ua,1&ua.current|2),e.child}t=t.sibling}null!==r.tail&&et()>El&&(e.flags|=128,s=!0,ih(r,!1),e.lanes=4194304)}else{if(!s)if(null!==(t=da(n))){if(e.flags|=128,s=!0,t=t.updateQueue,e.updateQueue=t,eh(e,t),ih(r,!0),null===r.tail&&"hidden"===r.tailMode&&!n.alternate&&!nr)return sh(e),null}else 2*et()-r.renderingStartTime>El&&536870912!==i&&(e.flags|=128,s=!0,ih(r,!1),e.lanes=4194304);r.isBackwards?(n.sibling=e.child,e.child=n):(null!==(t=r.last)?t.sibling=n:e.child=n,r.last=n)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=et(),e.sibling=null,t=ua.current,Y(ua,s?1&t|2:1&t),e):(sh(e),null);case 22:case 23:return ca(e),vn(),s=null!==e.memoizedState,null!==t?null!==t.memoizedState!==s&&(e.flags|=8192):s&&(e.flags|=8192),s?0!==(536870912&i)&&0===(128&e.flags)&&(sh(e),6&e.subtreeFlags&&(e.flags|=8192)):sh(e),null!==(i=e.updateQueue)&&eh(e,i.retryQueue),i=null,null!==t&&null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(i=t.memoizedState.cachePool.pool),s=null,null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(s=e.memoizedState.cachePool.pool),s!==i&&(e.flags|=2048),null!==t&&O(Yr),null;case 24:return i=null,null!==t&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),br(Lr),sh(e),null;case 25:case 30:return null}throw Error(o(156,e.tag))}function nh(t,e){switch(ir(e),e.tag){case 1:return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return br(Lr),W(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 26:case 27:case 5:return J(e),null;case 13:if(ca(e),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(o(340));fr()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return O(ua),null;case 4:return W(),null;case 10:return br(e.type),null;case 22:case 23:return ca(e),vn(),null!==t&&O(Yr),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 24:return br(Lr),null;default:return null}}function oh(t,e){switch(ir(e),e.tag){case 3:br(Lr),W();break;case 26:case 27:case 5:J(e);break;case 4:W();break;case 13:ca(e);break;case 19:O(ua);break;case 10:br(e.type);break;case 22:case 23:ca(e),vn(),null!==t&&O(Yr);break;case 24:br(Lr)}}function ah(t,e){try{var i=e.updateQueue,s=null!==i?i.lastEffect:null;if(null!==s){var r=s.next;i=r;do{if((i.tag&t)===t){s=void 0;var n=i.create,o=i.inst;s=n(),o.destroy=s}i=i.next}while(i!==r)}}catch(a){uc(e,e.return,a)}}function hh(t,e,i){try{var s=e.updateQueue,r=null!==s?s.lastEffect:null;if(null!==r){var n=r.next;s=n;do{if((s.tag&t)===t){var o=s.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,r=e;var h=i,l=a;try{l()}catch(c){uc(r,h,c)}}}s=s.next}while(s!==n)}}catch(c){uc(e,e.return,c)}}function lh(t){var e=t.updateQueue;if(null!==e){var i=t.stateNode;try{fn(e,i)}catch(s){uc(t,t.return,s)}}}function ch(t,e,i){i.props=ma(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(s){uc(t,e,s)}}function uh(t,e){try{var i=t.ref;if(null!==i){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;default:s=t.stateNode}"function"===typeof i?t.refCleanup=i(s):i.current=s}}catch(r){uc(t,e,r)}}function dh(t,e){var i=t.ref,s=t.refCleanup;if(null!==i)if("function"===typeof s)try{s()}catch(r){uc(t,e,r)}finally{t.refCleanup=null,null!=(t=t.alternate)&&(t.refCleanup=null)}else if("function"===typeof i)try{i(null)}catch(n){uc(t,e,n)}else i.current=null}function fh(t){var e=t.type,i=t.memoizedProps,s=t.stateNode;try{t:switch(e){case"button":case"input":case"select":case"textarea":i.autoFocus&&s.focus();break t;case"img":i.src?s.src=i.src:i.srcSet&&(s.srcset=i.srcSet)}}catch(r){uc(t,t.return,r)}}function gh(t,e,i){try{var s=t.stateNode;!function(t,e,i,s){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,n=null,a=null,h=null,l=null,c=null,u=null;for(g in i){var d=i[g];if(i.hasOwnProperty(g)&&null!=d)switch(g){case"checked":case"value":break;case"defaultValue":l=d;default:s.hasOwnProperty(g)||$c(t,e,g,null,s,d)}}for(var f in s){var g=s[f];if(d=i[f],s.hasOwnProperty(f)&&(null!=g||null!=d))switch(f){case"type":n=g;break;case"name":r=g;break;case"checked":c=g;break;case"defaultChecked":u=g;break;case"value":a=g;break;case"defaultValue":h=g;break;case"children":case"dangerouslySetInnerHTML":if(null!=g)throw Error(o(137,e));break;default:g!==d&&$c(t,e,f,g,s,d)}}return void ye(t,a,h,l,c,u,n,r);case"select":for(n in g=a=h=f=null,i)if(l=i[n],i.hasOwnProperty(n)&&null!=l)switch(n){case"value":break;case"multiple":g=l;default:s.hasOwnProperty(n)||$c(t,e,n,null,s,l)}for(r in s)if(n=s[r],l=i[r],s.hasOwnProperty(r)&&(null!=n||null!=l))switch(r){case"value":f=n;break;case"defaultValue":h=n;break;case"multiple":a=n;default:n!==l&&$c(t,e,r,n,s,l)}return e=h,i=a,s=g,void(null!=f?xe(t,!!i,f,!1):!!s!==!!i&&(null!=e?xe(t,!!i,e,!0):xe(t,!!i,i?[]:"",!1)));case"textarea":for(h in g=f=null,i)if(r=i[h],i.hasOwnProperty(h)&&null!=r&&!s.hasOwnProperty(h))switch(h){case"value":case"children":break;default:$c(t,e,h,null,s,r)}for(a in s)if(r=s[a],n=i[a],s.hasOwnProperty(a)&&(null!=r||null!=n))switch(a){case"value":f=r;break;case"defaultValue":g=r;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=r)throw Error(o(91));break;default:r!==n&&$c(t,e,a,r,s,n)}return void be(t,f,g);case"option":for(var p in i)if(f=i[p],i.hasOwnProperty(p)&&null!=f&&!s.hasOwnProperty(p))if("selected"===p)t.selected=!1;else $c(t,e,p,null,s,f);for(l in s)if(f=s[l],g=i[l],s.hasOwnProperty(l)&&f!==g&&(null!=f||null!=g))if("selected"===l)t.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else $c(t,e,l,f,s,g);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var y in i)f=i[y],i.hasOwnProperty(y)&&null!=f&&!s.hasOwnProperty(y)&&$c(t,e,y,null,s,f);for(c in s)if(f=s[c],g=i[c],s.hasOwnProperty(c)&&f!==g&&(null!=f||null!=g))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,e));break;default:$c(t,e,c,f,s,g)}return;default:if(Me(e)){for(var m in i)f=i[m],i.hasOwnProperty(m)&&void 0!==f&&!s.hasOwnProperty(m)&&tu(t,e,m,void 0,s,f);for(u in s)f=s[u],g=i[u],!s.hasOwnProperty(u)||f===g||void 0===f&&void 0===g||tu(t,e,u,f,s,g);return}}for(var v in i)f=i[v],i.hasOwnProperty(v)&&null!=f&&!s.hasOwnProperty(v)&&$c(t,e,v,null,s,f);for(d in s)f=s[d],g=i[d],!s.hasOwnProperty(d)||f===g||null==f&&null==g||$c(t,e,d,f,s,g)}(s,t.type,i,e),s[Dt]=e}catch(r){uc(t,t.return,r)}}function ph(t){return 5===t.tag||3===t.tag||26===t.tag||27===t.tag&&gu(t.type)||4===t.tag}function yh(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||ph(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(27===t.tag&&gu(t.type))continue t;if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function mh(t,e,i){var s=t.tag;if(5===s||6===s)t=t.stateNode,e?(9===i.nodeType?i.body:"HTML"===i.nodeName?i.ownerDocument.body:i).insertBefore(t,e):((e=9===i.nodeType?i.body:"HTML"===i.nodeName?i.ownerDocument.body:i).appendChild(t),null!==(i=i._reactRootContainer)&&void 0!==i||null!==e.onclick||(e.onclick=Kc));else if(4!==s&&(27===s&&gu(t.type)&&(i=t.stateNode,e=null),null!==(t=t.child)))for(mh(t,e,i),t=t.sibling;null!==t;)mh(t,e,i),t=t.sibling}function vh(t,e,i){var s=t.tag;if(5===s||6===s)t=t.stateNode,e?i.insertBefore(t,e):i.appendChild(t);else if(4!==s&&(27===s&&gu(t.type)&&(i=t.stateNode),null!==(t=t.child)))for(vh(t,e,i),t=t.sibling;null!==t;)vh(t,e,i),t=t.sibling}function xh(t){var e=t.stateNode,i=t.memoizedProps;try{for(var s=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);eu(e,s,i),e[Lt]=t,e[Dt]=i}catch(n){uc(t,t.return,n)}}var bh=!1,Sh=!1,Ah=!1,Eh="function"===typeof WeakSet?WeakSet:Set,kh=null;function wh(t,e,i){var s=i.flags;switch(i.tag){case 0:case 11:case 15:Vh(t,i),4&s&&ah(5,i);break;case 1:if(Vh(t,i),4&s)if(t=i.stateNode,null===e)try{t.componentDidMount()}catch(o){uc(i,i.return,o)}else{var r=ma(i.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){uc(i,i.return,a)}}64&s&&lh(i),512&s&&uh(i,i.return);break;case 3:if(Vh(t,i),64&s&&null!==(t=i.updateQueue)){if(e=null,null!==i.child)switch(i.child.tag){case 27:case 5:case 1:e=i.child.stateNode}try{fn(t,e)}catch(o){uc(i,i.return,o)}}break;case 27:null===e&&4&s&&xh(i);case 26:case 5:Vh(t,i),null===e&&4&s&&fh(i),512&s&&uh(i,i.return);break;case 12:Vh(t,i);break;case 13:Vh(t,i),4&s&&Bh(t,i),64&s&&(null!==(t=i.memoizedState)&&(null!==(t=t.dehydrated)&&function(t,e){var i=t.ownerDocument;if("$?"!==t.data||"complete"===i.readyState)e();else{var s=function(){e(),i.removeEventListener("DOMContentLoaded",s)};i.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}(t,i=pc.bind(null,i))));break;case 22:if(!(s=null!==i.memoizedState||bh)){e=null!==e&&null!==e.memoizedState||Sh,r=bh;var n=Sh;bh=s,(Sh=e)&&!n?Oh(t,i,0!==(8772&i.subtreeFlags)):Vh(t,i),bh=r,Sh=n}break;case 30:break;default:Vh(t,i)}}function Mh(t){var e=t.alternate;null!==e&&(t.alternate=null,Mh(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&Ot(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ch=null,Th=!1;function Fh(t,e,i){for(i=i.child;null!==i;)Ph(t,e,i),i=i.sibling}function Ph(t,e,i){if(ut&&"function"===typeof ut.onCommitFiberUnmount)try{ut.onCommitFiberUnmount(ct,i)}catch(n){}switch(i.tag){case 26:Sh||dh(i,e),Fh(t,e,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode).parentNode.removeChild(i);break;case 27:Sh||dh(i,e);var s=Ch,r=Th;gu(i.type)&&(Ch=i.stateNode,Th=!1),Fh(t,e,i),Au(i.stateNode),Ch=s,Th=r;break;case 5:Sh||dh(i,e);case 6:if(s=Ch,r=Th,Ch=null,Fh(t,e,i),Th=r,null!==(Ch=s))if(Th)try{(9===Ch.nodeType?Ch.body:"HTML"===Ch.nodeName?Ch.ownerDocument.body:Ch).removeChild(i.stateNode)}catch(o){uc(i,e,o)}else try{Ch.removeChild(i.stateNode)}catch(o){uc(i,e,o)}break;case 18:null!==Ch&&(Th?(pu(9===(t=Ch).nodeType?t.body:"HTML"===t.nodeName?t.ownerDocument.body:t,i.stateNode),Td(t)):pu(Ch,i.stateNode));break;case 4:s=Ch,r=Th,Ch=i.stateNode.containerInfo,Th=!0,Fh(t,e,i),Ch=s,Th=r;break;case 0:case 11:case 14:case 15:Sh||hh(2,i,e),Sh||hh(4,i,e),Fh(t,e,i);break;case 1:Sh||(dh(i,e),"function"===typeof(s=i.stateNode).componentWillUnmount&&ch(i,e,s)),Fh(t,e,i);break;case 21:Fh(t,e,i);break;case 22:Sh=(s=Sh)||null!==i.memoizedState,Fh(t,e,i),Sh=s;break;default:Fh(t,e,i)}}function Bh(t,e){if(null===e.memoizedState&&(null!==(t=e.alternate)&&(null!==(t=t.memoizedState)&&null!==(t=t.dehydrated))))try{Td(t)}catch(i){uc(e,e.return,i)}}function Lh(t,e){var i=function(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return null===e&&(e=t.stateNode=new Eh),e;case 22:return null===(e=(t=t.stateNode)._retryCache)&&(e=t._retryCache=new Eh),e;default:throw Error(o(435,t.tag))}}(t);e.forEach(function(e){var s=yc.bind(null,t,e);i.has(e)||(i.add(e),e.then(s,s))})}function Dh(t,e){var i=e.deletions;if(null!==i)for(var s=0;s<i.length;s++){var r=i[s],n=t,a=e,h=a;t:for(;null!==h;){switch(h.tag){case 27:if(gu(h.type)){Ch=h.stateNode,Th=!1;break t}break;case 5:Ch=h.stateNode,Th=!1;break t;case 3:case 4:Ch=h.stateNode.containerInfo,Th=!0;break t}h=h.return}if(null===Ch)throw Error(o(160));Ph(n,a,r),Ch=null,Th=!1,null!==(n=r.alternate)&&(n.return=null),r.return=null}if(13878&e.subtreeFlags)for(e=e.child;null!==e;)Ih(e,t),e=e.sibling}var zh=null;function Ih(t,e){var i=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Dh(e,t),Rh(t),4&s&&(hh(3,t,t.return),ah(3,t),hh(5,t,t.return));break;case 1:Dh(e,t),Rh(t),512&s&&(Sh||null===i||dh(i,i.return)),64&s&&bh&&(null!==(t=t.updateQueue)&&(null!==(s=t.callbacks)&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=null===i?s:i.concat(s))));break;case 26:var r=zh;if(Dh(e,t),Rh(t),512&s&&(Sh||null===i||dh(i,i.return)),4&s){var n=null!==i?i.memoizedState:null;if(s=t.memoizedState,null===i)if(null===s)if(null===t.stateNode){t:{s=t.type,i=t.memoizedProps,r=r.ownerDocument||r;e:switch(s){case"title":(!(n=r.getElementsByTagName("title")[0])||n[Nt]||n[Lt]||"http://www.w3.org/2000/svg"===n.namespaceURI||n.hasAttribute("itemprop"))&&(n=r.createElement(s),r.head.insertBefore(n,r.querySelector("head > title"))),eu(n,s,i),n[Lt]=t,Ht(n),s=n;break t;case"link":var a=Ou("link","href",r).get(s+(i.href||""));if(a)for(var h=0;h<a.length;h++)if((n=a[h]).getAttribute("href")===(null==i.href||""===i.href?null:i.href)&&n.getAttribute("rel")===(null==i.rel?null:i.rel)&&n.getAttribute("title")===(null==i.title?null:i.title)&&n.getAttribute("crossorigin")===(null==i.crossOrigin?null:i.crossOrigin)){a.splice(h,1);break e}eu(n=r.createElement(s),s,i),r.head.appendChild(n);break;case"meta":if(a=Ou("meta","content",r).get(s+(i.content||"")))for(h=0;h<a.length;h++)if((n=a[h]).getAttribute("content")===(null==i.content?null:""+i.content)&&n.getAttribute("name")===(null==i.name?null:i.name)&&n.getAttribute("property")===(null==i.property?null:i.property)&&n.getAttribute("http-equiv")===(null==i.httpEquiv?null:i.httpEquiv)&&n.getAttribute("charset")===(null==i.charSet?null:i.charSet)){a.splice(h,1);break e}eu(n=r.createElement(s),s,i),r.head.appendChild(n);break;default:throw Error(o(468,s))}n[Lt]=t,Ht(n),s=n}t.stateNode=s}else Yu(r,t.type,t.stateNode);else t.stateNode=Iu(r,s,t.memoizedProps);else n!==s?(null===n?null!==i.stateNode&&(i=i.stateNode).parentNode.removeChild(i):n.count--,null===s?Yu(r,t.type,t.stateNode):Iu(r,s,t.memoizedProps)):null===s&&null!==t.stateNode&&gh(t,t.memoizedProps,i.memoizedProps)}break;case 27:Dh(e,t),Rh(t),512&s&&(Sh||null===i||dh(i,i.return)),null!==i&&4&s&&gh(t,t.memoizedProps,i.memoizedProps);break;case 5:if(Dh(e,t),Rh(t),512&s&&(Sh||null===i||dh(i,i.return)),32&t.flags){r=t.stateNode;try{Ae(r,"")}catch(g){uc(t,t.return,g)}}4&s&&null!=t.stateNode&&gh(t,r=t.memoizedProps,null!==i?i.memoizedProps:r),1024&s&&(Ah=!0);break;case 6:if(Dh(e,t),Rh(t),4&s){if(null===t.stateNode)throw Error(o(162));s=t.memoizedProps,i=t.stateNode;try{i.nodeValue=s}catch(g){uc(t,t.return,g)}}break;case 3:if(Nu=null,r=zh,zh=wu(e.containerInfo),Dh(e,t),zh=r,Rh(t),4&s&&null!==i&&i.memoizedState.isDehydrated)try{Td(e.containerInfo)}catch(g){uc(t,t.return,g)}Ah&&(Ah=!1,_h(t));break;case 4:s=zh,zh=wu(t.stateNode.containerInfo),Dh(e,t),Rh(t),zh=s;break;case 12:default:Dh(e,t),Rh(t);break;case 13:Dh(e,t),Rh(t),8192&t.child.flags&&null!==t.memoizedState!==(null!==i&&null!==i.memoizedState)&&(Al=et()),4&s&&(null!==(s=t.updateQueue)&&(t.updateQueue=null,Lh(t,s)));break;case 22:r=null!==t.memoizedState;var l=null!==i&&null!==i.memoizedState,c=bh,u=Sh;if(bh=c||r,Sh=u||l,Dh(e,t),Sh=u,bh=c,Rh(t),8192&s)t:for(e=t.stateNode,e._visibility=r?-2&e._visibility:1|e._visibility,r&&(null===i||l||bh||Sh||Nh(t)),i=null,e=t;;){if(5===e.tag||26===e.tag){if(null===i){l=i=e;try{if(n=l.stateNode,r)"function"===typeof(a=n.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{h=l.stateNode;var d=l.memoizedProps.style,f=void 0!==d&&null!==d&&d.hasOwnProperty("display")?d.display:null;h.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(g){uc(l,l.return,g)}}}else if(6===e.tag){if(null===i){l=e;try{l.stateNode.nodeValue=r?"":l.memoizedProps}catch(g){uc(l,l.return,g)}}}else if((22!==e.tag&&23!==e.tag||null===e.memoizedState||e===t)&&null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;null===e.sibling;){if(null===e.return||e.return===t)break t;i===e&&(i=null),e=e.return}i===e&&(i=null),e.sibling.return=e.return,e=e.sibling}4&s&&(null!==(s=t.updateQueue)&&(null!==(i=s.retryQueue)&&(s.retryQueue=null,Lh(t,i))));break;case 19:Dh(e,t),Rh(t),4&s&&(null!==(s=t.updateQueue)&&(t.updateQueue=null,Lh(t,s)));case 30:case 21:}}function Rh(t){var e=t.flags;if(2&e){try{for(var i,s=t.return;null!==s;){if(ph(s)){i=s;break}s=s.return}if(null==i)throw Error(o(160));switch(i.tag){case 27:var r=i.stateNode;vh(t,yh(t),r);break;case 5:var n=i.stateNode;32&i.flags&&(Ae(n,""),i.flags&=-33),vh(t,yh(t),n);break;case 3:case 4:var a=i.stateNode.containerInfo;mh(t,yh(t),a);break;default:throw Error(o(161))}}catch(h){uc(t,t.return,h)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function _h(t){if(1024&t.subtreeFlags)for(t=t.child;null!==t;){var e=t;_h(e),5===e.tag&&1024&e.flags&&e.stateNode.reset(),t=t.sibling}}function Vh(t,e){if(8772&e.subtreeFlags)for(e=e.child;null!==e;)wh(t,e.alternate,e),e=e.sibling}function Nh(t){for(t=t.child;null!==t;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:hh(4,e,e.return),Nh(e);break;case 1:dh(e,e.return);var i=e.stateNode;"function"===typeof i.componentWillUnmount&&ch(e,e.return,i),Nh(e);break;case 27:Au(e.stateNode);case 26:case 5:dh(e,e.return),Nh(e);break;case 22:null===e.memoizedState&&Nh(e);break;default:Nh(e)}t=t.sibling}}function Oh(t,e,i){for(i=i&&0!==(8772&e.subtreeFlags),e=e.child;null!==e;){var s=e.alternate,r=t,n=e,o=n.flags;switch(n.tag){case 0:case 11:case 15:Oh(r,n,i),ah(4,n);break;case 1:if(Oh(r,n,i),"function"===typeof(r=(s=n).stateNode).componentDidMount)try{r.componentDidMount()}catch(l){uc(s,s.return,l)}if(null!==(r=(s=n).updateQueue)){var a=s.stateNode;try{var h=r.shared.hiddenCallbacks;if(null!==h)for(r.shared.hiddenCallbacks=null,r=0;r<h.length;r++)dn(h[r],a)}catch(l){uc(s,s.return,l)}}i&&64&o&&lh(n),uh(n,n.return);break;case 27:xh(n);case 26:case 5:Oh(r,n,i),i&&null===s&&4&o&&fh(n),uh(n,n.return);break;case 12:Oh(r,n,i);break;case 13:Oh(r,n,i),i&&4&o&&Bh(r,n);break;case 22:null===n.memoizedState&&Oh(r,n,i),uh(n,n.return);break;case 30:break;default:Oh(r,n,i)}e=e.sibling}}function Yh(t,e){var i=null;null!==t&&null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(i=t.memoizedState.cachePool.pool),t=null,null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(t=e.memoizedState.cachePool.pool),t!==i&&(null!=t&&t.refCount++,null!=i&&zr(i))}function Gh(t,e){t=null,null!==e.alternate&&(t=e.alternate.memoizedState.cache),(e=e.memoizedState.cache)!==t&&(e.refCount++,null!=t&&zr(t))}function Xh(t,e,i,s){if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Uh(t,e,i,s),e=e.sibling}function Uh(t,e,i,s){var r=e.flags;switch(e.tag){case 0:case 11:case 15:Xh(t,e,i,s),2048&r&&ah(9,e);break;case 1:case 13:default:Xh(t,e,i,s);break;case 3:Xh(t,e,i,s),2048&r&&(t=null,null!==e.alternate&&(t=e.alternate.memoizedState.cache),(e=e.memoizedState.cache)!==t&&(e.refCount++,null!=t&&zr(t)));break;case 12:if(2048&r){Xh(t,e,i,s),t=e.stateNode;try{var n=e.memoizedProps,o=n.id,a=n.onPostCommit;"function"===typeof a&&a(o,null===e.alternate?"mount":"update",t.passiveEffectDuration,-0)}catch(h){uc(e,e.return,h)}}else Xh(t,e,i,s);break;case 23:break;case 22:n=e.stateNode,o=e.alternate,null!==e.memoizedState?2&n._visibility?Xh(t,e,i,s):jh(t,e):2&n._visibility?Xh(t,e,i,s):(n._visibility|=2,Hh(t,e,i,s,0!==(10256&e.subtreeFlags))),2048&r&&Yh(o,e);break;case 24:Xh(t,e,i,s),2048&r&&Gh(e.alternate,e)}}function Hh(t,e,i,s,r){for(r=r&&0!==(10256&e.subtreeFlags),e=e.child;null!==e;){var n=t,o=e,a=i,h=s,l=o.flags;switch(o.tag){case 0:case 11:case 15:Hh(n,o,a,h,r),ah(8,o);break;case 23:break;case 22:var c=o.stateNode;null!==o.memoizedState?2&c._visibility?Hh(n,o,a,h,r):jh(n,o):(c._visibility|=2,Hh(n,o,a,h,r)),r&&2048&l&&Yh(o.alternate,o);break;case 24:Hh(n,o,a,h,r),r&&2048&l&&Gh(o.alternate,o);break;default:Hh(n,o,a,h,r)}e=e.sibling}}function jh(t,e){if(10256&e.subtreeFlags)for(e=e.child;null!==e;){var i=t,s=e,r=s.flags;switch(s.tag){case 22:jh(i,s),2048&r&&Yh(s.alternate,s);break;case 24:jh(i,s),2048&r&&Gh(s.alternate,s);break;default:jh(i,s)}e=e.sibling}}var Wh=8192;function Zh(t){if(t.subtreeFlags&Wh)for(t=t.child;null!==t;)Jh(t),t=t.sibling}function Jh(t){switch(t.tag){case 26:Zh(t),t.flags&Wh&&null!==t.memoizedState&&function(t,e,i){if(null===Xu)throw Error(o(475));var s=Xu;if("stylesheet"===e.type&&("string"!==typeof i.media||!1!==matchMedia(i.media).matches)&&0===(4&e.state.loading)){if(null===e.instance){var r=Pu(i.href),n=t.querySelector(Bu(r));if(n)return null!==(t=n._p)&&"object"===typeof t&&"function"===typeof t.then&&(s.count++,s=Hu.bind(s),t.then(s,s)),e.state.loading|=4,e.instance=n,void Ht(n);n=t.ownerDocument||t,i=Lu(i),(r=Eu.get(r))&&_u(i,r),Ht(n=n.createElement("link"));var a=n;a._p=new Promise(function(t,e){a.onload=t,a.onerror=e}),eu(n,"link",i),e.instance=n}null===s.stylesheets&&(s.stylesheets=new Map),s.stylesheets.set(e,t),(t=e.state.preload)&&0===(3&e.state.loading)&&(s.count++,e=Hu.bind(s),t.addEventListener("load",e),t.addEventListener("error",e))}}(zh,t.memoizedState,t.memoizedProps);break;case 5:default:Zh(t);break;case 3:case 4:var e=zh;zh=wu(t.stateNode.containerInfo),Zh(t),zh=e;break;case 22:null===t.memoizedState&&(null!==(e=t.alternate)&&null!==e.memoizedState?(e=Wh,Wh=16777216,Zh(t),Wh=e):Zh(t))}}function qh(t){var e=t.alternate;if(null!==e&&null!==(t=e.child)){e.child=null;do{e=t.sibling,t.sibling=null,t=e}while(null!==t)}}function Qh(t){var e=t.deletions;if(0!==(16&t.flags)){if(null!==e)for(var i=0;i<e.length;i++){var s=e[i];kh=s,tl(s,t)}qh(t)}if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Kh(t),t=t.sibling}function Kh(t){switch(t.tag){case 0:case 11:case 15:Qh(t),2048&t.flags&&hh(9,t,t.return);break;case 3:case 12:default:Qh(t);break;case 22:var e=t.stateNode;null!==t.memoizedState&&2&e._visibility&&(null===t.return||13!==t.return.tag)?(e._visibility&=-3,$h(t)):Qh(t)}}function $h(t){var e=t.deletions;if(0!==(16&t.flags)){if(null!==e)for(var i=0;i<e.length;i++){var s=e[i];kh=s,tl(s,t)}qh(t)}for(t=t.child;null!==t;){switch((e=t).tag){case 0:case 11:case 15:hh(8,e,e.return),$h(e);break;case 22:2&(i=e.stateNode)._visibility&&(i._visibility&=-3,$h(e));break;default:$h(e)}t=t.sibling}}function tl(t,e){for(;null!==kh;){var i=kh;switch(i.tag){case 0:case 11:case 15:hh(8,i,e);break;case 23:case 22:if(null!==i.memoizedState&&null!==i.memoizedState.cachePool){var s=i.memoizedState.cachePool.pool;null!=s&&s.refCount++}break;case 24:zr(i.memoizedState.cache)}if(null!==(s=i.child))s.return=i,kh=s;else t:for(i=t;null!==kh;){var r=(s=kh).sibling,n=s.return;if(Mh(s),s===i){kh=null;break t}if(null!==r){r.return=n,kh=r;break t}kh=n}}}var el={getCacheForType:function(t){var e=Mr(Lr),i=e.data.get(t);return void 0===i&&(i=t(),e.data.set(t,i)),i}},il="function"===typeof WeakMap?WeakMap:Map,sl=0,rl=null,nl=null,ol=0,al=0,hl=null,ll=!1,cl=!1,ul=!1,dl=0,fl=0,gl=0,pl=0,yl=0,ml=0,vl=0,xl=null,bl=null,Sl=!1,Al=0,El=1/0,kl=null,wl=null,Ml=0,Cl=null,Tl=null,Fl=0,Pl=0,Bl=null,Ll=null,Dl=0,zl=null;function Il(){if(0!==(2&sl)&&0!==ol)return ol&-ol;if(null!==z.T){return 0!==_r?_r:Pc()}return Pt()}function Rl(){0===ml&&(ml=0===(536870912&ol)||nr?At():536870912);var t=na.current;return null!==t&&(t.flags|=32),ml}function _l(t,e,i){(t!==rl||2!==al&&9!==al)&&null===t.cancelPendingCommit||(Ul(t,0),Yl(t,ol,ml,!1)),wt(t,i),0!==(2&sl)&&t===rl||(t===rl&&(0===(2&sl)&&(pl|=i),4===fl&&Yl(t,ol,ml,!1)),Ec(t))}function Vl(t,e,i){if(0!==(6&sl))throw Error(o(327));for(var s=!i&&0===(124&e)&&0===(e&t.expiredLanes)||bt(t,e),r=s?function(t,e){var i=sl;sl|=2;var s=jl(),r=Wl();rl!==t||ol!==e?(kl=null,El=et()+500,Ul(t,e)):cl=bt(t,e);t:for(;;)try{if(0!==al&&null!==nl){e=nl;var n=hl;e:switch(al){case 1:al=0,hl=null,tc(t,e,n,1);break;case 2:case 9:if(Jr(n)){al=0,hl=null,$l(e);break}e=function(){2!==al&&9!==al||rl!==t||(al=7),Ec(t)},n.then(e,e);break t;case 3:al=7;break t;case 4:al=5;break t;case 7:Jr(n)?(al=0,hl=null,$l(e)):(al=0,hl=null,tc(t,e,n,7));break;case 5:var a=null;switch(nl.tag){case 26:a=nl.memoizedState;case 5:case 27:var h=nl;if(!a||Gu(a)){al=0,hl=null;var l=h.sibling;if(null!==l)nl=l;else{var c=h.return;null!==c?(nl=c,ec(c)):nl=null}break e}}al=0,hl=null,tc(t,e,n,5);break;case 6:al=0,hl=null,tc(t,e,n,6);break;case 8:Xl(),fl=6;break t;default:throw Error(o(462))}}Ql();break}catch(u){Hl(t,u)}return vr=mr=null,z.H=s,z.A=r,sl=i,null!==nl?0:(rl=null,ol=0,Ts(),fl)}(t,e):Jl(t,e,!0),n=s;;){if(0===r){cl&&!s&&Yl(t,e,0,!1);break}if(i=t.current.alternate,!n||Ol(i)){if(2===r){if(n=e,t.errorRecoveryDisabledLanes&n)var a=0;else a=0!==(a=-536870913&t.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){e=a;t:{var h=t;r=xl;var l=h.current.memoizedState.isDehydrated;if(l&&(Ul(h,a).flags|=256),2!==(a=Jl(h,a,!1))){if(ul&&!l){h.errorRecoveryDisabledLanes|=n,pl|=n,r=4;break t}n=bl,bl=r,null!==n&&(null===bl?bl=n:bl.push.apply(bl,n))}r=a}if(n=!1,2!==r)continue}}if(1===r){Ul(t,0),Yl(t,e,0,!0);break}t:{switch(s=t,n=r){case 0:case 1:throw Error(o(345));case 4:if((4194048&e)!==e)break;case 6:Yl(s,e,ml,!ll);break t;case 2:bl=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&e)===e&&10<(r=Al+300-et())){if(Yl(s,e,ml,!ll),0!==xt(s,0,!0))break t;s.timeoutHandle=lu(Nl.bind(null,s,i,bl,kl,Sl,e,ml,pl,vl,ll,n,2,-0,0),r)}else Nl(s,i,bl,kl,Sl,e,ml,pl,vl,ll,n,0,-0,0)}break}r=Jl(t,e,!1),n=!1}Ec(t)}function Nl(t,e,i,s,r,n,a,h,l,c,u,d,f,g){if(t.timeoutHandle=-1,(8192&(d=e.subtreeFlags)||16785408===(16785408&d))&&(Xu={stylesheets:null,count:0,unsuspend:Uu},Jh(e),null!==(d=function(){if(null===Xu)throw Error(o(475));var t=Xu;return t.stylesheets&&0===t.count&&Wu(t,t.stylesheets),0<t.count?function(e){var i=setTimeout(function(){if(t.stylesheets&&Wu(t,t.stylesheets),t.unsuspend){var e=t.unsuspend;t.unsuspend=null,e()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(i)}}:null}())))return t.cancelPendingCommit=d(sc.bind(null,t,e,n,i,s,r,a,h,l,u,1,f,g)),void Yl(t,n,a,!c);sc(t,e,n,i,s,r,a,h,l)}function Ol(t){for(var e=t;;){var i=e.tag;if((0===i||11===i||15===i)&&16384&e.flags&&(null!==(i=e.updateQueue)&&null!==(i=i.stores)))for(var s=0;s<i.length;s++){var r=i[s],n=r.getSnapshot;r=r.value;try{if(!Zi(n(),r))return!1}catch(o){return!1}}if(i=e.child,16384&e.subtreeFlags&&null!==i)i.return=e,e=i;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yl(t,e,i,s){e&=~yl,e&=~pl,t.suspendedLanes|=e,t.pingedLanes&=~e,s&&(t.warmLanes|=e),s=t.expirationTimes;for(var r=e;0<r;){var n=31-ft(r),o=1<<n;s[n]=-1,r&=~o}0!==i&&Mt(t,i,e)}function Gl(){return 0!==(6&sl)||(kc(0,!1),!1)}function Xl(){if(null!==nl){if(0===al)var t=nl.return;else vr=mr=null,Vn(t=nl),qo=null,Qo=0,t=nl;for(;null!==t;)oh(t.alternate,t),t=t.return;nl=null}}function Ul(t,e){var i=t.timeoutHandle;-1!==i&&(t.timeoutHandle=-1,cu(i)),null!==(i=t.cancelPendingCommit)&&(t.cancelPendingCommit=null,i()),Xl(),rl=t,nl=i=Vs(t.current,null),ol=e,al=0,hl=null,ll=!1,cl=bt(t,e),ul=!1,vl=ml=yl=pl=gl=fl=0,bl=xl=null,Sl=!1,0!==(8&e)&&(e|=32&e);var s=t.entangledLanes;if(0!==s)for(t=t.entanglements,s&=e;0<s;){var r=31-ft(s),n=1<<r;e|=t[r],s&=~n}return dl=e,Ts(),i}function Hl(t,e){bn=null,z.H=jo,e===Hr||e===Wr?(e=$r(),al=3):e===jr?(e=$r(),al=4):al=e===Ca?8:null!==e&&"object"===typeof e&&"function"===typeof e.then?6:1,hl=e,null===nl&&(fl=1,Aa(t,ks(e,t.current)))}function jl(){var t=z.H;return z.H=jo,null===t?jo:t}function Wl(){var t=z.A;return z.A=el,t}function Zl(){fl=4,ll||(4194048&ol)!==ol&&null!==na.current||(cl=!0),0===(134217727&gl)&&0===(134217727&pl)||null===rl||Yl(rl,ol,ml,!1)}function Jl(t,e,i){var s=sl;sl|=2;var r=jl(),n=Wl();rl===t&&ol===e||(kl=null,Ul(t,e)),e=!1;var o=fl;t:for(;;)try{if(0!==al&&null!==nl){var a=nl,h=hl;switch(al){case 8:Xl(),o=6;break t;case 3:case 2:case 9:case 6:null===na.current&&(e=!0);var l=al;if(al=0,hl=null,tc(t,a,h,l),i&&cl){o=0;break t}break;default:l=al,al=0,hl=null,tc(t,a,h,l)}}ql(),o=fl;break}catch(c){Hl(t,c)}return e&&t.shellSuspendCounter++,vr=mr=null,sl=s,z.H=r,z.A=n,null===nl&&(rl=null,ol=0,Ts()),o}function ql(){for(;null!==nl;)Kl(nl)}function Ql(){for(;null!==nl&&!$();)Kl(nl)}function Kl(t){var e=Ka(t.alternate,t,dl);t.memoizedProps=t.pendingProps,null===e?ec(t):nl=e}function $l(t){var e=t,i=e.alternate;switch(e.tag){case 15:case 0:e=_a(i,e,e.pendingProps,e.type,void 0,ol);break;case 11:e=_a(i,e,e.pendingProps,e.type.render,e.ref,ol);break;case 5:Vn(e);default:oh(i,e),e=Ka(i,e=nl=Ns(e,dl),dl)}t.memoizedProps=t.pendingProps,null===e?ec(t):nl=e}function tc(t,e,i,s){vr=mr=null,Vn(e),qo=null,Qo=0;var r=e.return;try{if(function(t,e,i,s,r){if(i.flags|=32768,null!==s&&"object"===typeof s&&"function"===typeof s.then){if(null!==(e=i.alternate)&&Er(e,i,r,!0),null!==(i=na.current)){switch(i.tag){case 13:return null===oa?Zl():null===i.alternate&&0===fl&&(fl=3),i.flags&=-257,i.flags|=65536,i.lanes=r,s===Zr?i.flags|=16384:(null===(e=i.updateQueue)?i.updateQueue=new Set([s]):e.add(s),dc(t,s,r)),!1;case 22:return i.flags|=65536,s===Zr?i.flags|=16384:(null===(e=i.updateQueue)?(e={transitions:null,markerInstances:null,retryQueue:new Set([s])},i.updateQueue=e):null===(i=e.retryQueue)?e.retryQueue=new Set([s]):i.add(s),dc(t,s,r)),!1}throw Error(o(435,i.tag))}return dc(t,s,r),Zl(),!1}if(nr)return null!==(e=na.current)?(0===(65536&e.flags)&&(e.flags|=256),e.flags|=65536,e.lanes=r,s!==hr&&pr(ks(t=Error(o(422),{cause:s}),i))):(s!==hr&&pr(ks(e=Error(o(423),{cause:s}),i)),(t=t.current.alternate).flags|=65536,r&=-r,t.lanes|=r,s=ks(s,i),hn(t,r=ka(t.stateNode,s,r)),4!==fl&&(fl=2)),!1;var n=Error(o(520),{cause:s});if(n=ks(n,i),null===xl?xl=[n]:xl.push(n),4!==fl&&(fl=2),null===e)return!0;s=ks(s,i),i=e;do{switch(i.tag){case 3:return i.flags|=65536,t=r&-r,i.lanes|=t,hn(i,t=ka(i.stateNode,s,t)),!1;case 1:if(e=i.type,n=i.stateNode,0===(128&i.flags)&&("function"===typeof e.getDerivedStateFromError||null!==n&&"function"===typeof n.componentDidCatch&&(null===wl||!wl.has(n))))return i.flags|=65536,r&=-r,i.lanes|=r,Ma(r=wa(r),t,i,s),hn(i,r),!1}i=i.return}while(null!==i);return!1}(t,r,e,i,ol))return fl=1,Aa(t,ks(i,t.current)),void(nl=null)}catch(n){if(null!==r)throw nl=r,n;return fl=1,Aa(t,ks(i,t.current)),void(nl=null)}32768&e.flags?(nr||1===s?t=!0:cl||0!==(536870912&ol)?t=!1:(ll=t=!0,(2===s||9===s||3===s||6===s)&&(null!==(s=na.current)&&13===s.tag&&(s.flags|=16384))),ic(e,t)):ec(e)}function ec(t){var e=t;do{if(0!==(32768&e.flags))return void ic(e,ll);t=e.return;var i=rh(e.alternate,e,dl);if(null!==i)return void(nl=i);if(null!==(e=e.sibling))return void(nl=e);nl=e=t}while(null!==e);0===fl&&(fl=5)}function ic(t,e){do{var i=nh(t.alternate,t);if(null!==i)return i.flags&=32767,void(nl=i);if(null!==(i=t.return)&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!e&&null!==(t=t.sibling))return void(nl=t);nl=t=i}while(null!==t);fl=6,nl=null}function sc(t,e,i,s,r,n,a,h,l){t.cancelPendingCommit=null;do{hc()}while(0!==Ml);if(0!==(6&sl))throw Error(o(327));if(null!==e){if(e===t.current)throw Error(o(177));if(n=e.lanes|e.childLanes,function(t,e,i,s,r,n){var o=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var a=t.entanglements,h=t.expirationTimes,l=t.hiddenUpdates;for(i=o&~i;0<i;){var c=31-ft(i),u=1<<c;a[c]=0,h[c]=-1;var d=l[c];if(null!==d)for(l[c]=null,c=0;c<d.length;c++){var f=d[c];null!==f&&(f.lane&=-536870913)}i&=~u}0!==s&&Mt(t,s,0),0!==n&&0===r&&0!==t.tag&&(t.suspendedLanes|=n&~(o&~e))}(t,i,n|=Cs,a,h,l),t===rl&&(nl=rl=null,ol=0),Tl=e,Cl=t,Fl=i,Pl=n,Bl=r,Ll=s,0!==(10256&e.subtreeFlags)||0!==(10256&e.flags)?(t.callbackNode=null,t.callbackPriority=0,Q(nt,function(){return lc(),null})):(t.callbackNode=null,t.callbackPriority=0),s=0!==(13878&e.flags),0!==(13878&e.subtreeFlags)||s){s=z.T,z.T=null,r=I.p,I.p=2,a=sl,sl|=4;try{!function(t,e){if(t=t.containerInfo,iu=sd,ts(t=$i(t))){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else t:{var s=(i=(i=t.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(s&&0!==s.rangeCount){i=s.anchorNode;var r=s.anchorOffset,n=s.focusNode;s=s.focusOffset;try{i.nodeType,n.nodeType}catch(y){i=null;break t}var a=0,h=-1,l=-1,c=0,u=0,d=t,f=null;e:for(;;){for(var g;d!==i||0!==r&&3!==d.nodeType||(h=a+r),d!==n||0!==s&&3!==d.nodeType||(l=a+s),3===d.nodeType&&(a+=d.nodeValue.length),null!==(g=d.firstChild);)f=d,d=g;for(;;){if(d===t)break e;if(f===i&&++c===r&&(h=a),f===n&&++u===s&&(l=a),null!==(g=d.nextSibling))break;f=(d=f).parentNode}d=g}i=-1===h||-1===l?null:{start:h,end:l}}else i=null}i=i||{start:0,end:0}}else i=null;for(su={focusedElem:t,selectionRange:i},sd=!1,kh=e;null!==kh;)if(t=(e=kh).child,0!==(1024&e.subtreeFlags)&&null!==t)t.return=e,kh=t;else for(;null!==kh;){switch(n=(e=kh).alternate,t=e.flags,e.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&t)&&null!==n){t=void 0,i=e,r=n.memoizedProps,n=n.memoizedState,s=i.stateNode;try{var p=ma(i.type,r,(i.elementType,i.type));t=s.getSnapshotBeforeUpdate(p,n),s.__reactInternalSnapshotBeforeUpdate=t}catch(m){uc(i,i.return,m)}}break;case 3:if(0!==(1024&t))if(9===(i=(t=e.stateNode.containerInfo).nodeType))yu(t);else if(1===i)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":yu(t);break;default:t.textContent=""}break;default:if(0!==(1024&t))throw Error(o(163))}if(null!==(t=e.sibling)){t.return=e.return,kh=t;break}kh=e.return}}(t,e)}finally{sl=a,I.p=r,z.T=s}}Ml=1,rc(),nc(),oc()}}function rc(){if(1===Ml){Ml=0;var t=Cl,e=Tl,i=0!==(13878&e.flags);if(0!==(13878&e.subtreeFlags)||i){i=z.T,z.T=null;var s=I.p;I.p=2;var r=sl;sl|=4;try{Ih(e,t);var n=su,o=$i(t.containerInfo),a=n.focusedElem,h=n.selectionRange;if(o!==a&&a&&a.ownerDocument&&Ki(a.ownerDocument.documentElement,a)){if(null!==h&&ts(a)){var l=h.start,c=h.end;if(void 0===c&&(c=l),"selectionStart"in a)a.selectionStart=l,a.selectionEnd=Math.min(c,a.value.length);else{var u=a.ownerDocument||document,d=u&&u.defaultView||window;if(d.getSelection){var f=d.getSelection(),g=a.textContent.length,p=Math.min(h.start,g),y=void 0===h.end?p:Math.min(h.end,g);!f.extend&&p>y&&(o=y,y=p,p=o);var m=Qi(a,p),v=Qi(a,y);if(m&&v&&(1!==f.rangeCount||f.anchorNode!==m.node||f.anchorOffset!==m.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var x=u.createRange();x.setStart(m.node,m.offset),f.removeAllRanges(),p>y?(f.addRange(x),f.extend(v.node,v.offset)):(x.setEnd(v.node,v.offset),f.addRange(x))}}}}for(u=[],f=a;f=f.parentNode;)1===f.nodeType&&u.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<u.length;a++){var b=u[a];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}sd=!!iu,su=iu=null}finally{sl=r,I.p=s,z.T=i}}t.current=e,Ml=2}}function nc(){if(2===Ml){Ml=0;var t=Cl,e=Tl,i=0!==(8772&e.flags);if(0!==(8772&e.subtreeFlags)||i){i=z.T,z.T=null;var s=I.p;I.p=2;var r=sl;sl|=4;try{wh(t,e.alternate,e)}finally{sl=r,I.p=s,z.T=i}}Ml=3}}function oc(){if(4===Ml||3===Ml){Ml=0,tt();var t=Cl,e=Tl,i=Fl,s=Ll;0!==(10256&e.subtreeFlags)||0!==(10256&e.flags)?Ml=5:(Ml=0,Tl=Cl=null,ac(t,t.pendingLanes));var r=t.pendingLanes;if(0===r&&(wl=null),Ft(i),e=e.stateNode,ut&&"function"===typeof ut.onCommitFiberRoot)try{ut.onCommitFiberRoot(ct,e,void 0,128===(128&e.current.flags))}catch(h){}if(null!==s){e=z.T,r=I.p,I.p=2,z.T=null;try{for(var n=t.onRecoverableError,o=0;o<s.length;o++){var a=s[o];n(a.value,{componentStack:a.stack})}}finally{z.T=e,I.p=r}}0!==(3&Fl)&&hc(),Ec(t),r=t.pendingLanes,0!==(4194090&i)&&0!==(42&r)?t===zl?Dl++:(Dl=0,zl=t):Dl=0,kc(0,!1)}}function ac(t,e){0===(t.pooledCacheLanes&=e)&&(null!=(e=t.pooledCache)&&(t.pooledCache=null,zr(e)))}function hc(t){return rc(),nc(),oc(),lc()}function lc(){if(5!==Ml)return!1;var t=Cl,e=Pl;Pl=0;var i=Ft(Fl),s=z.T,r=I.p;try{I.p=32>i?32:i,z.T=null,i=Bl,Bl=null;var n=Cl,a=Fl;if(Ml=0,Tl=Cl=null,Fl=0,0!==(6&sl))throw Error(o(331));var h=sl;if(sl|=4,Kh(n.current),Uh(n,n.current,a,i),sl=h,kc(0,!1),ut&&"function"===typeof ut.onPostCommitFiberRoot)try{ut.onPostCommitFiberRoot(ct,n)}catch(l){}return!0}finally{I.p=r,z.T=s,ac(t,e)}}function cc(t,e,i){e=ks(i,e),null!==(t=on(t,e=ka(t.stateNode,e,2),2))&&(wt(t,2),Ec(t))}function uc(t,e,i){if(3===t.tag)cc(t,t,i);else for(;null!==e;){if(3===e.tag){cc(e,t,i);break}if(1===e.tag){var s=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof s.componentDidCatch&&(null===wl||!wl.has(s))){t=ks(i,t),null!==(s=on(e,i=wa(2),2))&&(Ma(i,s,e,t),wt(s,2),Ec(s));break}}e=e.return}}function dc(t,e,i){var s=t.pingCache;if(null===s){s=t.pingCache=new il;var r=new Set;s.set(e,r)}else void 0===(r=s.get(e))&&(r=new Set,s.set(e,r));r.has(i)||(ul=!0,r.add(i),t=fc.bind(null,t,e,i),e.then(t,t))}function fc(t,e,i){var s=t.pingCache;null!==s&&s.delete(e),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,rl===t&&(ol&i)===i&&(4===fl||3===fl&&(62914560&ol)===ol&&300>et()-Al?0===(2&sl)&&Ul(t,0):yl|=i,vl===ol&&(vl=0)),Ec(t)}function gc(t,e){0===e&&(e=Et()),null!==(t=Bs(t,e))&&(wt(t,e),Ec(t))}function pc(t){var e=t.memoizedState,i=0;null!==e&&(i=e.retryLane),gc(t,i)}function yc(t,e){var i=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;null!==r&&(i=r.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(o(314))}null!==s&&s.delete(e),gc(t,i)}var mc=null,vc=null,xc=!1,bc=!1,Sc=!1,Ac=0;function Ec(t){t!==vc&&null===t.next&&(null===vc?mc=vc=t:vc=vc.next=t),bc=!0,xc||(xc=!0,du(function(){0!==(6&sl)?Q(st,wc):Mc()}))}function kc(t,e){if(!Sc&&bc){Sc=!0;do{for(var i=!1,s=mc;null!==s;){if(!e)if(0!==t){var r=s.pendingLanes;if(0===r)var n=0;else{var o=s.suspendedLanes,a=s.pingedLanes;n=(1<<31-ft(42|t)+1)-1,n=201326741&(n&=r&~(o&~a))?201326741&n|1:n?2|n:0}0!==n&&(i=!0,Fc(s,n))}else n=ol,0===(3&(n=xt(s,s===rl?n:0,null!==s.cancelPendingCommit||-1!==s.timeoutHandle)))||bt(s,n)||(i=!0,Fc(s,n));s=s.next}}while(i);Sc=!1}}function wc(){Mc()}function Mc(){bc=xc=!1;var t=0;0!==Ac&&(function(){var t=window.event;if(t&&"popstate"===t.type)return t!==hu&&(hu=t,!0);return hu=null,!1}()&&(t=Ac),Ac=0);for(var e=et(),i=null,s=mc;null!==s;){var r=s.next,n=Cc(s,e);0===n?(s.next=null,null===i?mc=r:i.next=r,null===r&&(vc=i)):(i=s,(0!==t||0!==(3&n))&&(bc=!0)),s=r}kc(t,!1)}function Cc(t,e){for(var i=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,n=-62914561&t.pendingLanes;0<n;){var o=31-ft(n),a=1<<o,h=r[o];-1===h?0!==(a&i)&&0===(a&s)||(r[o]=St(a,e)):h<=e&&(t.expiredLanes|=a),n&=~a}if(i=ol,i=xt(t,t===(e=rl)?i:0,null!==t.cancelPendingCommit||-1!==t.timeoutHandle),s=t.callbackNode,0===i||t===e&&(2===al||9===al)||null!==t.cancelPendingCommit)return null!==s&&null!==s&&K(s),t.callbackNode=null,t.callbackPriority=0;if(0===(3&i)||bt(t,i)){if((e=i&-i)===t.callbackPriority)return e;switch(null!==s&&K(s),Ft(i)){case 2:case 8:i=rt;break;case 32:default:i=nt;break;case 268435456:i=at}return s=Tc.bind(null,t),i=Q(i,s),t.callbackPriority=e,t.callbackNode=i,e}return null!==s&&null!==s&&K(s),t.callbackPriority=2,t.callbackNode=null,2}function Tc(t,e){if(0!==Ml&&5!==Ml)return t.callbackNode=null,t.callbackPriority=0,null;var i=t.callbackNode;if(hc()&&t.callbackNode!==i)return null;var s=ol;return 0===(s=xt(t,t===rl?s:0,null!==t.cancelPendingCommit||-1!==t.timeoutHandle))?null:(Vl(t,s,e),Cc(t,et()),null!=t.callbackNode&&t.callbackNode===i?Tc.bind(null,t):null)}function Fc(t,e){if(hc())return null;Vl(t,e,!0)}function Pc(){return 0===Ac&&(Ac=At()),Ac}function Bc(t){return null==t||"symbol"===typeof t||"boolean"===typeof t?null:"function"===typeof t?t:Fe(""+t)}function Lc(t,e){var i=e.ownerDocument.createElement("input");return i.name=e.name,i.value=e.value,t.id&&i.setAttribute("form",t.id),e.parentNode.insertBefore(i,e),t=new FormData(t),i.parentNode.removeChild(i),t}for(var Dc=0;Dc<Ss.length;Dc++){var zc=Ss[Dc];As(zc.toLowerCase(),"on"+(zc[0].toUpperCase()+zc.slice(1)))}As(ds,"onAnimationEnd"),As(fs,"onAnimationIteration"),As(gs,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(ps,"onTransitionRun"),As(ys,"onTransitionStart"),As(ms,"onTransitionCancel"),As(vs,"onTransitionEnd"),Jt("onMouseEnter",["mouseout","mouseover"]),Jt("onMouseLeave",["mouseout","mouseover"]),Jt("onPointerEnter",["pointerout","pointerover"]),Jt("onPointerLeave",["pointerout","pointerover"]),Zt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ic));function _c(t,e){e=0!==(4&e);for(var i=0;i<t.length;i++){var s=t[i],r=s.event;s=s.listeners;t:{var n=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],h=a.instance,l=a.currentTarget;if(a=a.listener,h!==n&&r.isPropagationStopped())break t;n=a,r.currentTarget=l;try{n(r)}catch(c){va(c)}r.currentTarget=null,n=h}else for(o=0;o<s.length;o++){if(h=(a=s[o]).instance,l=a.currentTarget,a=a.listener,h!==n&&r.isPropagationStopped())break t;n=a,r.currentTarget=l;try{n(r)}catch(c){va(c)}r.currentTarget=null,n=h}}}}function Vc(t,e){var i=e[It];void 0===i&&(i=e[It]=new Set);var s=t+"__bubble";i.has(s)||(Gc(e,t,2,!1),i.add(s))}function Nc(t,e,i){var s=0;e&&(s|=4),Gc(i,t,s,e)}var Oc="_reactListening"+Math.random().toString(36).slice(2);function Yc(t){if(!t[Oc]){t[Oc]=!0,jt.forEach(function(e){"selectionchange"!==e&&(Rc.has(e)||Nc(e,!1,t),Nc(e,!0,t))});var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Oc]||(e[Oc]=!0,Nc("selectionchange",!1,e))}}function Gc(t,e,i,s){switch(cd(e)){case 2:var r=rd;break;case 8:r=nd;break;default:r=od}i=r.bind(null,e,i,t),r=void 0,!Ne||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(r=!0),s?void 0!==r?t.addEventListener(e,i,{capture:!0,passive:r}):t.addEventListener(e,i,!0):void 0!==r?t.addEventListener(e,i,{passive:r}):t.addEventListener(e,i,!1)}function Xc(t,e,i,s,r){var n=s;if(0===(1&e)&&0===(2&e)&&null!==s)t:for(;;){if(null===s)return;var o=s.tag;if(3===o||4===o){var a=s.stateNode.containerInfo;if(a===r)break;if(4===o)for(o=s.return;null!==o;){var l=o.tag;if((3===l||4===l)&&o.stateNode.containerInfo===r)return;o=o.return}for(;null!==a;){if(null===(o=Yt(a)))return;if(5===(l=o.tag)||6===l||26===l||27===l){s=n=o;continue t}a=a.parentNode}}s=s.return}Re(function(){var s=n,r=Be(i),o=[];t:{var a=xs.get(t);if(void 0!==a){var l=$e,c=t;switch(t){case"keypress":if(0===He(i))break t;case"keydown":case"keyup":l=gi;break;case"focusin":c="focus",l=ni;break;case"focusout":c="blur",l=ni;break;case"beforeblur":case"afterblur":l=ni;break;case"click":if(2===i.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=si;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=ri;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=yi;break;case ds:case fs:case gs:l=oi;break;case vs:l=mi;break;case"scroll":case"scrollend":l=ei;break;case"wheel":l=vi;break;case"copy":case"cut":case"paste":l=ai;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=pi;break;case"toggle":case"beforetoggle":l=xi}var u=0!==(4&e),d=!u&&("scroll"===t||"scrollend"===t),f=u?null!==a?a+"Capture":null:a;u=[];for(var g,p=s;null!==p;){var y=p;if(g=y.stateNode,5!==(y=y.tag)&&26!==y&&27!==y||null===g||null===f||null!=(y=_e(p,f))&&u.push(Uc(p,y,g)),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,i,r),o.push({event:a,listeners:u}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||i===Pe||!(c=i.relatedTarget||i.fromElement)||!Yt(c)&&!c[zt])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=s,null!==(c=(c=i.relatedTarget||i.toElement)?Yt(c):null)&&(d=h(c),u=c.tag,c!==d||5!==u&&27!==u&&6!==u)&&(c=null)):(l=null,c=s),l!==c)){if(u=si,y="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(u=pi,y="onPointerLeave",f="onPointerEnter",p="pointer"),d=null==l?a:Xt(l),g=null==c?a:Xt(c),(a=new u(y,p+"leave",l,i,r)).target=d,a.relatedTarget=g,y=null,Yt(r)===s&&((u=new u(f,p+"enter",c,i,r)).target=g,u.relatedTarget=d,y=u),d=y,l&&c)t:{for(f=c,p=0,g=u=l;g;g=jc(g))p++;for(g=0,y=f;y;y=jc(y))g++;for(;0<p-g;)u=jc(u),p--;for(;0<g-p;)f=jc(f),g--;for(;p--;){if(u===f||null!==f&&u===f.alternate)break t;u=jc(u),f=jc(f)}u=null}else u=null;null!==l&&Wc(o,a,l,u,!1),null!==c&&null!==d&&Wc(o,d,c,u,!0)}if("select"===(l=(a=s?Xt(s):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=_i;else if(Bi(a))if(Vi)m=Wi;else{m=Hi;var v=Ui}else!(l=a.nodeName)||"input"!==l.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?s&&Me(s.elementType)&&(m=_i):m=ji;switch(m&&(m=m(t,s))?Li(o,m,i,r):(v&&v(t,a,s),"focusout"===t&&s&&"number"===a.type&&null!=s.memoizedProps.value&&ve(a,"number",a.value)),v=s?Xt(s):window,t){case"focusin":(Bi(v)||"true"===v.contentEditable)&&(is=v,ss=s,rs=null);break;case"focusout":rs=ss=is=null;break;case"mousedown":ns=!0;break;case"contextmenu":case"mouseup":case"dragend":ns=!1,os(o,i,r);break;case"selectionchange":if(es)break;case"keydown":case"keyup":os(o,i,r)}var x;if(Si)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else Fi?Ci(t,i)&&(b="onCompositionEnd"):"keydown"===t&&229===i.keyCode&&(b="onCompositionStart");b&&(ki&&"ko"!==i.locale&&(Fi||"onCompositionStart"!==b?"onCompositionEnd"===b&&Fi&&(x=Ue()):(Ge="value"in(Ye=r)?Ye.value:Ye.textContent,Fi=!0)),0<(v=Hc(s,b)).length&&(b=new hi(b,t,null,i,r),o.push({event:b,listeners:v}),x?b.data=x:null!==(x=Ti(i))&&(b.data=x))),(x=Ei?function(t,e){switch(t){case"compositionend":return Ti(e);case"keypress":return 32!==e.which?null:(Mi=!0,wi);case"textInput":return(t=e.data)===wi&&Mi?null:t;default:return null}}(t,i):function(t,e){if(Fi)return"compositionend"===t||!Si&&Ci(t,e)?(t=Ue(),Xe=Ge=Ye=null,Fi=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ki&&"ko"!==e.locale?null:e.data}}(t,i))&&(0<(b=Hc(s,"onBeforeInput")).length&&(v=new hi("onBeforeInput","beforeinput",null,i,r),o.push({event:v,listeners:b}),v.data=x)),function(t,e,i,s,r){if("submit"===e&&i&&i.stateNode===r){var n=Bc((r[Dt]||null).action),o=s.submitter;o&&null!==(e=(e=o[Dt]||null)?Bc(e.formAction):o.getAttribute("formAction"))&&(n=e,o=null);var a=new $e("action","action",null,s,r);t.push({event:a,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(0!==Ac){var t=o?Lc(r,o):new FormData(r);Lo(i,{pending:!0,data:t,method:r.method,action:n},null,t)}}else"function"===typeof n&&(a.preventDefault(),t=o?Lc(r,o):new FormData(r),Lo(i,{pending:!0,data:t,method:r.method,action:n},n,t))},currentTarget:r}]})}}(o,t,s,i,r)}_c(o,e)})}function Uc(t,e,i){return{instance:t,listener:e,currentTarget:i}}function Hc(t,e){for(var i=e+"Capture",s=[];null!==t;){var r=t,n=r.stateNode;if(5!==(r=r.tag)&&26!==r&&27!==r||null===n||(null!=(r=_e(t,i))&&s.unshift(Uc(t,r,n)),null!=(r=_e(t,e))&&s.push(Uc(t,r,n))),3===t.tag)return s;t=t.return}return[]}function jc(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag&&27!==t.tag);return t||null}function Wc(t,e,i,s,r){for(var n=e._reactName,o=[];null!==i&&i!==s;){var a=i,h=a.alternate,l=a.stateNode;if(a=a.tag,null!==h&&h===s)break;5!==a&&26!==a&&27!==a||null===l||(h=l,r?null!=(l=_e(i,n))&&o.unshift(Uc(i,l,h)):r||null!=(l=_e(i,n))&&o.push(Uc(i,l,h))),i=i.return}0!==o.length&&t.push({event:e,listeners:o})}var Zc=/\r\n?/g,Jc=/\u0000|\uFFFD/g;function qc(t){return("string"===typeof t?t:""+t).replace(Zc,"\n").replace(Jc,"")}function Qc(t,e){return e=qc(e),qc(t)===e}function Kc(){}function $c(t,e,i,s,r,n){switch(i){case"children":"string"===typeof s?"body"===e||"textarea"===e&&""===s||Ae(t,s):("number"===typeof s||"bigint"===typeof s)&&"body"!==e&&Ae(t,""+s);break;case"className":ie(t,"class",s);break;case"tabIndex":ie(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":ie(t,i,s);break;case"style":we(t,s,n);break;case"data":if("object"!==e){ie(t,"data",s);break}case"src":case"href":if(""===s&&("a"!==e||"href"!==i)){t.removeAttribute(i);break}if(null==s||"function"===typeof s||"symbol"===typeof s||"boolean"===typeof s){t.removeAttribute(i);break}s=Fe(""+s),t.setAttribute(i,s);break;case"action":case"formAction":if("function"===typeof s){t.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof n&&("formAction"===i?("input"!==e&&$c(t,e,"name",r.name,r,null),$c(t,e,"formEncType",r.formEncType,r,null),$c(t,e,"formMethod",r.formMethod,r,null),$c(t,e,"formTarget",r.formTarget,r,null)):($c(t,e,"encType",r.encType,r,null),$c(t,e,"method",r.method,r,null),$c(t,e,"target",r.target,r,null))),null==s||"symbol"===typeof s||"boolean"===typeof s){t.removeAttribute(i);break}s=Fe(""+s),t.setAttribute(i,s);break;case"onClick":null!=s&&(t.onclick=Kc);break;case"onScroll":null!=s&&Vc("scroll",t);break;case"onScrollEnd":null!=s&&Vc("scrollend",t);break;case"dangerouslySetInnerHTML":if(null!=s){if("object"!==typeof s||!("__html"in s))throw Error(o(61));if(null!=(i=s.__html)){if(null!=r.children)throw Error(o(60));t.innerHTML=i}}break;case"multiple":t.multiple=s&&"function"!==typeof s&&"symbol"!==typeof s;break;case"muted":t.muted=s&&"function"!==typeof s&&"symbol"!==typeof s;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==s||"function"===typeof s||"boolean"===typeof s||"symbol"===typeof s){t.removeAttribute("xlink:href");break}i=Fe(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=s&&"function"!==typeof s&&"symbol"!==typeof s?t.setAttribute(i,""+s):t.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&"function"!==typeof s&&"symbol"!==typeof s?t.setAttribute(i,""):t.removeAttribute(i);break;case"capture":case"download":!0===s?t.setAttribute(i,""):!1!==s&&null!=s&&"function"!==typeof s&&"symbol"!==typeof s?t.setAttribute(i,s):t.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&!isNaN(s)&&1<=s?t.setAttribute(i,s):t.removeAttribute(i);break;case"rowSpan":case"start":null==s||"function"===typeof s||"symbol"===typeof s||isNaN(s)?t.removeAttribute(i):t.setAttribute(i,s);break;case"popover":Vc("beforetoggle",t),Vc("toggle",t),ee(t,"popover",s);break;case"xlinkActuate":se(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":se(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":se(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":se(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":se(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":se(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":se(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":se(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":se(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":ee(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<i.length)||"o"!==i[0]&&"O"!==i[0]||"n"!==i[1]&&"N"!==i[1])&&ee(t,i=Ce.get(i)||i,s)}}function tu(t,e,i,s,r,n){switch(i){case"style":we(t,s,n);break;case"dangerouslySetInnerHTML":if(null!=s){if("object"!==typeof s||!("__html"in s))throw Error(o(61));if(null!=(i=s.__html)){if(null!=r.children)throw Error(o(60));t.innerHTML=i}}break;case"children":"string"===typeof s?Ae(t,s):("number"===typeof s||"bigint"===typeof s)&&Ae(t,""+s);break;case"onScroll":null!=s&&Vc("scroll",t);break;case"onScrollEnd":null!=s&&Vc("scrollend",t);break;case"onClick":null!=s&&(t.onclick=Kc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Wt.hasOwnProperty(i)||("o"!==i[0]||"n"!==i[1]||(r=i.endsWith("Capture"),e=i.slice(2,r?i.length-7:void 0),"function"===typeof(n=null!=(n=t[Dt]||null)?n[i]:null)&&t.removeEventListener(e,n,r),"function"!==typeof s)?i in t?t[i]=s:!0===s?t.setAttribute(i,""):ee(t,i,s):("function"!==typeof n&&null!==n&&(i in t?t[i]=null:t.hasAttribute(i)&&t.removeAttribute(i)),t.addEventListener(e,s,r)))}}function eu(t,e,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vc("error",t),Vc("load",t);var s,r=!1,n=!1;for(s in i)if(i.hasOwnProperty(s)){var a=i[s];if(null!=a)switch(s){case"src":r=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,e));default:$c(t,e,s,a,i,null)}}return n&&$c(t,e,"srcSet",i.srcSet,i,null),void(r&&$c(t,e,"src",i.src,i,null));case"input":Vc("invalid",t);var h=s=a=n=null,l=null,c=null;for(r in i)if(i.hasOwnProperty(r)){var u=i[r];if(null!=u)switch(r){case"name":n=u;break;case"type":a=u;break;case"checked":l=u;break;case"defaultChecked":c=u;break;case"value":s=u;break;case"defaultValue":h=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(o(137,e));break;default:$c(t,e,r,u,i,null)}}return me(t,s,h,l,c,a,n,!1),void ue(t);case"select":for(n in Vc("invalid",t),r=a=s=null,i)if(i.hasOwnProperty(n)&&null!=(h=i[n]))switch(n){case"value":s=h;break;case"defaultValue":a=h;break;case"multiple":r=h;default:$c(t,e,n,h,i,null)}return e=s,i=a,t.multiple=!!r,void(null!=e?xe(t,!!r,e,!1):null!=i&&xe(t,!!r,i,!0));case"textarea":for(a in Vc("invalid",t),s=n=r=null,i)if(i.hasOwnProperty(a)&&null!=(h=i[a]))switch(a){case"value":r=h;break;case"defaultValue":n=h;break;case"children":s=h;break;case"dangerouslySetInnerHTML":if(null!=h)throw Error(o(91));break;default:$c(t,e,a,h,i,null)}return Se(t,r,n,s),void ue(t);case"option":for(l in i)if(i.hasOwnProperty(l)&&null!=(r=i[l]))if("selected"===l)t.selected=r&&"function"!==typeof r&&"symbol"!==typeof r;else $c(t,e,l,r,i,null);return;case"dialog":Vc("beforetoggle",t),Vc("toggle",t),Vc("cancel",t),Vc("close",t);break;case"iframe":case"object":Vc("load",t);break;case"video":case"audio":for(r=0;r<Ic.length;r++)Vc(Ic[r],t);break;case"image":Vc("error",t),Vc("load",t);break;case"details":Vc("toggle",t);break;case"embed":case"source":case"link":Vc("error",t),Vc("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in i)if(i.hasOwnProperty(c)&&null!=(r=i[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,e));default:$c(t,e,c,r,i,null)}return;default:if(Me(e)){for(u in i)i.hasOwnProperty(u)&&(void 0!==(r=i[u])&&tu(t,e,u,r,i,void 0));return}}for(h in i)i.hasOwnProperty(h)&&(null!=(r=i[h])&&$c(t,e,h,r,i,null))}var iu=null,su=null;function ru(t){return 9===t.nodeType?t:t.ownerDocument}function nu(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ou(t,e){if(0===t)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return 1===t&&"foreignObject"===e?0:t}function au(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"bigint"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var hu=null;var lu="function"===typeof setTimeout?setTimeout:void 0,cu="function"===typeof clearTimeout?clearTimeout:void 0,uu="function"===typeof Promise?Promise:void 0,du="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof uu?function(t){return uu.resolve(null).then(t).catch(fu)}:lu;function fu(t){setTimeout(function(){throw t})}function gu(t){return"head"===t}function pu(t,e){var i=e,s=0,r=0;do{var n=i.nextSibling;if(t.removeChild(i),n&&8===n.nodeType)if("/$"===(i=n.data)){if(0<s&&8>s){i=s;var o=t.ownerDocument;if(1&i&&Au(o.documentElement),2&i&&Au(o.body),4&i)for(Au(i=o.head),o=i.firstChild;o;){var a=o.nextSibling,h=o.nodeName;o[Nt]||"SCRIPT"===h||"STYLE"===h||"LINK"===h&&"stylesheet"===o.rel.toLowerCase()||i.removeChild(o),o=a}}if(0===r)return t.removeChild(n),void Td(e);r--}else"$"===i||"$?"===i||"$!"===i?r++:s=i.charCodeAt(0)-48;else s=0;i=n}while(i);Td(e)}function yu(t){var e=t.firstChild;for(e&&10===e.nodeType&&(e=e.nextSibling);e;){var i=e;switch(e=e.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":yu(i),Ot(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===i.rel.toLowerCase())continue}t.removeChild(i)}}function mu(t){return"$!"===t.data||"$?"===t.data&&"complete"===t.ownerDocument.readyState}function vu(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e||"F!"===e||"F"===e)break;if("/$"===e)return null}}return t}var xu=null;function bu(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var i=t.data;if("$"===i||"$!"===i||"$?"===i){if(0===e)return t;e--}else"/$"===i&&e++}t=t.previousSibling}return null}function Su(t,e,i){switch(e=ru(i),t){case"html":if(!(t=e.documentElement))throw Error(o(452));return t;case"head":if(!(t=e.head))throw Error(o(453));return t;case"body":if(!(t=e.body))throw Error(o(454));return t;default:throw Error(o(451))}}function Au(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Ot(t)}var Eu=new Map,ku=new Set;function wu(t){return"function"===typeof t.getRootNode?t.getRootNode():9===t.nodeType?t:t.ownerDocument}var Mu=I.d;I.d={f:function(){var t=Mu.f(),e=Gl();return t||e},r:function(t){var e=Gt(t);null!==e&&5===e.tag&&"form"===e.type?zo(e):Mu.r(t)},D:function(t){Mu.D(t),Tu("dns-prefetch",t,null)},C:function(t,e){Mu.C(t,e),Tu("preconnect",t,e)},L:function(t,e,i){Mu.L(t,e,i);var s=Cu;if(s&&t&&e){var r='link[rel="preload"][as="'+pe(e)+'"]';"image"===e&&i&&i.imageSrcSet?(r+='[imagesrcset="'+pe(i.imageSrcSet)+'"]',"string"===typeof i.imageSizes&&(r+='[imagesizes="'+pe(i.imageSizes)+'"]')):r+='[href="'+pe(t)+'"]';var n=r;switch(e){case"style":n=Pu(t);break;case"script":n=Du(t)}Eu.has(n)||(t=d({rel:"preload",href:"image"===e&&i&&i.imageSrcSet?void 0:t,as:e},i),Eu.set(n,t),null!==s.querySelector(r)||"style"===e&&s.querySelector(Bu(n))||"script"===e&&s.querySelector(zu(n))||(eu(e=s.createElement("link"),"link",t),Ht(e),s.head.appendChild(e)))}},m:function(t,e){Mu.m(t,e);var i=Cu;if(i&&t){var s=e&&"string"===typeof e.as?e.as:"script",r='link[rel="modulepreload"][as="'+pe(s)+'"][href="'+pe(t)+'"]',n=r;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":n=Du(t)}if(!Eu.has(n)&&(t=d({rel:"modulepreload",href:t},e),Eu.set(n,t),null===i.querySelector(r))){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(zu(n)))return}eu(s=i.createElement("link"),"link",t),Ht(s),i.head.appendChild(s)}}},X:function(t,e){Mu.X(t,e);var i=Cu;if(i&&t){var s=Ut(i).hoistableScripts,r=Du(t),n=s.get(r);n||((n=i.querySelector(zu(r)))||(t=d({src:t,async:!0},e),(e=Eu.get(r))&&Vu(t,e),Ht(n=i.createElement("script")),eu(n,"link",t),i.head.appendChild(n)),n={type:"script",instance:n,count:1,state:null},s.set(r,n))}},S:function(t,e,i){Mu.S(t,e,i);var s=Cu;if(s&&t){var r=Ut(s).hoistableStyles,n=Pu(t);e=e||"default";var o=r.get(n);if(!o){var a={loading:0,preload:null};if(o=s.querySelector(Bu(n)))a.loading=5;else{t=d({rel:"stylesheet",href:t,"data-precedence":e},i),(i=Eu.get(n))&&_u(t,i);var h=o=s.createElement("link");Ht(h),eu(h,"link",t),h._p=new Promise(function(t,e){h.onload=t,h.onerror=e}),h.addEventListener("load",function(){a.loading|=1}),h.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Ru(o,e,s)}o={type:"stylesheet",instance:o,count:1,state:a},r.set(n,o)}}},M:function(t,e){Mu.M(t,e);var i=Cu;if(i&&t){var s=Ut(i).hoistableScripts,r=Du(t),n=s.get(r);n||((n=i.querySelector(zu(r)))||(t=d({src:t,async:!0,type:"module"},e),(e=Eu.get(r))&&Vu(t,e),Ht(n=i.createElement("script")),eu(n,"link",t),i.head.appendChild(n)),n={type:"script",instance:n,count:1,state:null},s.set(r,n))}}};var Cu="undefined"===typeof document?null:document;function Tu(t,e,i){var s=Cu;if(s&&"string"===typeof e&&e){var r=pe(e);r='link[rel="'+t+'"][href="'+r+'"]',"string"===typeof i&&(r+='[crossorigin="'+i+'"]'),ku.has(r)||(ku.add(r),t={rel:t,crossOrigin:i,href:e},null===s.querySelector(r)&&(eu(e=s.createElement("link"),"link",t),Ht(e),s.head.appendChild(e)))}}function Fu(t,e,i,s){var r,n,a,h,l=(l=U.current)?wu(l):null;if(!l)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return"string"===typeof i.precedence&&"string"===typeof i.href?(e=Pu(i.href),(s=(i=Ut(l).hoistableStyles).get(e))||(s={type:"style",instance:null,count:0,state:null},i.set(e,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===i.rel&&"string"===typeof i.href&&"string"===typeof i.precedence){t=Pu(i.href);var c=Ut(l).hoistableStyles,u=c.get(t);if(u||(l=l.ownerDocument||l,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(t,u),(c=l.querySelector(Bu(t)))&&!c._p&&(u.instance=c,u.state.loading=5),Eu.has(t)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Eu.set(t,i),c||(r=l,n=t,a=i,h=u.state,r.querySelector('link[rel="preload"][as="style"]['+n+"]")?h.loading=1:(n=r.createElement("link"),h.preload=n,n.addEventListener("load",function(){return h.loading|=1}),n.addEventListener("error",function(){return h.loading|=2}),eu(n,"link",a),Ht(n),r.head.appendChild(n))))),e&&null===s)throw Error(o(528,""));return u}if(e&&null!==s)throw Error(o(529,""));return null;case"script":return e=i.async,"string"===typeof(i=i.src)&&e&&"function"!==typeof e&&"symbol"!==typeof e?(e=Du(i),(s=(i=Ut(l).hoistableScripts).get(e))||(s={type:"script",instance:null,count:0,state:null},i.set(e,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Pu(t){return'href="'+pe(t)+'"'}function Bu(t){return'link[rel="stylesheet"]['+t+"]"}function Lu(t){return d({},t,{"data-precedence":t.precedence,precedence:null})}function Du(t){return'[src="'+pe(t)+'"]'}function zu(t){return"script[async]"+t}function Iu(t,e,i){if(e.count++,null===e.instance)switch(e.type){case"style":var s=t.querySelector('style[data-href~="'+pe(i.href)+'"]');if(s)return e.instance=s,Ht(s),s;var r=d({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return Ht(s=(t.ownerDocument||t).createElement("style")),eu(s,"style",r),Ru(s,i.precedence,t),e.instance=s;case"stylesheet":r=Pu(i.href);var n=t.querySelector(Bu(r));if(n)return e.state.loading|=4,e.instance=n,Ht(n),n;s=Lu(i),(r=Eu.get(r))&&_u(s,r),Ht(n=(t.ownerDocument||t).createElement("link"));var a=n;return a._p=new Promise(function(t,e){a.onload=t,a.onerror=e}),eu(n,"link",s),e.state.loading|=4,Ru(n,i.precedence,t),e.instance=n;case"script":return n=Du(i.src),(r=t.querySelector(zu(n)))?(e.instance=r,Ht(r),r):(s=i,(r=Eu.get(n))&&Vu(s=d({},i),r),Ht(r=(t=t.ownerDocument||t).createElement("script")),eu(r,"link",s),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(o(443,e.type))}else"stylesheet"===e.type&&0===(4&e.state.loading)&&(s=e.instance,e.state.loading|=4,Ru(s,i.precedence,t));return e.instance}function Ru(t,e,i){for(var s=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=s.length?s[s.length-1]:null,n=r,o=0;o<s.length;o++){var a=s[o];if(a.dataset.precedence===e)n=a;else if(n!==r)break}n?n.parentNode.insertBefore(t,n.nextSibling):(e=9===i.nodeType?i.head:i).insertBefore(t,e.firstChild)}function _u(t,e){null==t.crossOrigin&&(t.crossOrigin=e.crossOrigin),null==t.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),null==t.title&&(t.title=e.title)}function Vu(t,e){null==t.crossOrigin&&(t.crossOrigin=e.crossOrigin),null==t.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),null==t.integrity&&(t.integrity=e.integrity)}var Nu=null;function Ou(t,e,i){if(null===Nu){var s=new Map,r=Nu=new Map;r.set(i,s)}else(s=(r=Nu).get(i))||(s=new Map,r.set(i,s));if(s.has(t))return s;for(s.set(t,null),i=i.getElementsByTagName(t),r=0;r<i.length;r++){var n=i[r];if(!(n[Nt]||n[Lt]||"link"===t&&"stylesheet"===n.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==n.namespaceURI){var o=n.getAttribute(e)||"";o=t+o;var a=s.get(o);a?a.push(n):s.set(o,[n])}}return s}function Yu(t,e,i){(t=t.ownerDocument||t).head.insertBefore(i,"title"===e?t.querySelector("head > title"):null)}function Gu(t){return"stylesheet"!==t.type||0!==(3&t.state.loading)}var Xu=null;function Uu(){}function Hu(){if(this.count--,0===this.count)if(this.stylesheets)Wu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}var ju=null;function Wu(t,e){t.stylesheets=null,null!==t.unsuspend&&(t.count++,ju=new Map,e.forEach(Zu,t),ju=null,Hu.call(t))}function Zu(t,e){if(!(4&e.state.loading)){var i=ju.get(t);if(i)var s=i.get(null);else{i=new Map,ju.set(t,i);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),n=0;n<r.length;n++){var o=r[n];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(i.set(o.dataset.precedence,o),s=o)}s&&i.set(null,s)}o=(r=e.instance).getAttribute("data-precedence"),(n=i.get(o)||s)===s&&i.set(null,r),i.set(o,r),this.count++,s=Hu.bind(this),r.addEventListener("load",s),r.addEventListener("error",s),n?n.parentNode.insertBefore(r,n.nextSibling):(t=9===t.nodeType?t.head:t).insertBefore(r,t.firstChild),e.state.loading|=4}}var Ju={$$typeof:S,Provider:null,Consumer:null,_currentValue:R,_currentValue2:R,_threadCount:0};function qu(t,e,i,s,r,n,o,a){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=kt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kt(0),this.hiddenUpdates=kt(null),this.identifierPrefix=s,this.onUncaughtError=r,this.onCaughtError=n,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function Qu(t,e,i,s,r,n,o,a,h,l,c,u){return t=new qu(t,e,i,o,a,h,l,u),e=1,!0===n&&(e|=24),n=Rs(3,null,null,e),t.current=n,n.stateNode=t,(e=Dr()).refCount++,t.pooledCache=e,e.refCount++,n.memoizedState={element:s,isDehydrated:i,cache:e},sn(n),t}function Ku(t){return t?t=zs:zs}function $u(t,e,i,s,r,n){r=Ku(r),null===s.context?s.context=r:s.pendingContext=r,(s=nn(e)).payload={element:i},null!==(n=void 0===n?null:n)&&(s.callback=n),null!==(i=on(t,s,e))&&(_l(i,0,e),an(i,t,e))}function td(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var i=t.retryLane;t.retryLane=0!==i&&i<e?i:e}}function ed(t,e){td(t,e),(t=t.alternate)&&td(t,e)}function id(t){if(13===t.tag){var e=Bs(t,67108864);null!==e&&_l(e,0,67108864),ed(t,67108864)}}var sd=!0;function rd(t,e,i,s){var r=z.T;z.T=null;var n=I.p;try{I.p=2,od(t,e,i,s)}finally{I.p=n,z.T=r}}function nd(t,e,i,s){var r=z.T;z.T=null;var n=I.p;try{I.p=8,od(t,e,i,s)}finally{I.p=n,z.T=r}}function od(t,e,i,s){if(sd){var r=ad(s);if(null===r)Xc(t,e,s,hd,i),xd(t,s);else if(function(t,e,i,s,r){switch(e){case"focusin":return dd=bd(dd,t,e,i,s,r),!0;case"dragenter":return fd=bd(fd,t,e,i,s,r),!0;case"mouseover":return gd=bd(gd,t,e,i,s,r),!0;case"pointerover":var n=r.pointerId;return pd.set(n,bd(pd.get(n)||null,t,e,i,s,r)),!0;case"gotpointercapture":return n=r.pointerId,yd.set(n,bd(yd.get(n)||null,t,e,i,s,r)),!0}return!1}(r,t,e,i,s))s.stopPropagation();else if(xd(t,s),4&e&&-1<vd.indexOf(t)){for(;null!==r;){var n=Gt(r);if(null!==n)switch(n.tag){case 3:if((n=n.stateNode).current.memoizedState.isDehydrated){var o=vt(n.pendingLanes);if(0!==o){var a=n;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var h=1<<31-ft(o);a.entanglements[1]|=h,o&=~h}Ec(n),0===(6&sl)&&(El=et()+500,kc(0,!1))}}break;case 13:null!==(a=Bs(n,2))&&_l(a,0,2),Gl(),ed(n,2)}if(null===(n=ad(s))&&Xc(t,e,s,hd,i),n===r)break;r=n}null!==r&&s.stopPropagation()}else Xc(t,e,s,null,i)}}function ad(t){return ld(t=Be(t))}var hd=null;function ld(t){if(hd=null,null!==(t=Yt(t))){var e=h(t);if(null===e)t=null;else{var i=e.tag;if(13===i){if(null!==(t=l(e)))return t;t=null}else if(3===i){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return hd=t,null}function cd(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(it()){case st:return 2;case rt:return 8;case nt:case ot:return 32;case at:return 268435456;default:return 32}default:return 32}}var ud=!1,dd=null,fd=null,gd=null,pd=new Map,yd=new Map,md=[],vd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xd(t,e){switch(t){case"focusin":case"focusout":dd=null;break;case"dragenter":case"dragleave":fd=null;break;case"mouseover":case"mouseout":gd=null;break;case"pointerover":case"pointerout":pd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yd.delete(e.pointerId)}}function bd(t,e,i,s,r,n){return null===t||t.nativeEvent!==n?(t={blockedOn:e,domEventName:i,eventSystemFlags:s,nativeEvent:n,targetContainers:[r]},null!==e&&(null!==(e=Gt(e))&&id(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,null!==r&&-1===e.indexOf(r)&&e.push(r),t)}function Sd(t){var e=Yt(t.target);if(null!==e){var i=h(e);if(null!==i)if(13===(e=i.tag)){if(null!==(e=l(i)))return t.blockedOn=e,void function(t,e){var i=I.p;try{return I.p=t,e()}finally{I.p=i}}(t.priority,function(){if(13===i.tag){var t=Il();t=Tt(t);var e=Bs(i,t);null!==e&&_l(e,0,t),ed(i,t)}})}else if(3===e&&i.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}t.blockedOn=null}function Ad(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var i=ad(t.nativeEvent);if(null!==i)return null!==(e=Gt(i))&&id(e),t.blockedOn=i,!1;var s=new(i=t.nativeEvent).constructor(i.type,i);Pe=s,i.target.dispatchEvent(s),Pe=null,e.shift()}return!0}function Ed(t,e,i){Ad(t)&&i.delete(e)}function kd(){ud=!1,null!==dd&&Ad(dd)&&(dd=null),null!==fd&&Ad(fd)&&(fd=null),null!==gd&&Ad(gd)&&(gd=null),pd.forEach(Ed),yd.forEach(Ed)}function wd(t,e){t.blockedOn===e&&(t.blockedOn=null,ud||(ud=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,kd)))}var Md=null;function Cd(t){Md!==t&&(Md=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Md===t&&(Md=null);for(var e=0;e<t.length;e+=3){var i=t[e],s=t[e+1],r=t[e+2];if("function"!==typeof s){if(null===ld(s||i))continue;break}var n=Gt(i);null!==n&&(t.splice(e,3),e-=3,Lo(n,{pending:!0,data:r,method:i.method,action:s},s,r))}}))}function Td(t){function e(e){return wd(e,t)}null!==dd&&wd(dd,t),null!==fd&&wd(fd,t),null!==gd&&wd(gd,t),pd.forEach(e),yd.forEach(e);for(var i=0;i<md.length;i++){var s=md[i];s.blockedOn===t&&(s.blockedOn=null)}for(;0<md.length&&null===(i=md[0]).blockedOn;)Sd(i),null===i.blockedOn&&md.shift();if(null!=(i=(t.ownerDocument||t).$$reactFormReplay))for(s=0;s<i.length;s+=3){var r=i[s],n=i[s+1],o=r[Dt]||null;if("function"===typeof n)o||Cd(i);else if(o){var a=null;if(n&&n.hasAttribute("formAction")){if(r=n,o=n[Dt]||null)a=o.formAction;else if(null!==ld(r))continue}else a=o.action;"function"===typeof a?i[s+1]=a:(i.splice(s,3),s-=3),Cd(i)}}}function Fd(t){this._internalRoot=t}function Pd(t){this._internalRoot=t}Pd.prototype.render=Fd.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(o(409));$u(e.current,Il(),t,e,null,null)},Pd.prototype.unmount=Fd.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;$u(t.current,2,null,t,null,null),Gl(),e[zt]=null}},Pd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Pt();t={blockedOn:null,target:t,priority:e};for(var i=0;i<md.length&&0!==e&&e<md[i].priority;i++);md.splice(i,0,t),0===i&&Sd(t)}};var Bd=r.version;if("19.1.1"!==Bd)throw Error(o(527,Bd,"19.1.1"));I.findDOMNode=function(t){var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(o(188));throw t=Object.keys(t).join(","),Error(o(268,t))}return t=function(t){var e=t.alternate;if(!e){if(null===(e=h(t)))throw Error(o(188));return e!==t?null:t}for(var i=t,s=e;;){var r=i.return;if(null===r)break;var n=r.alternate;if(null===n){if(null!==(s=r.return)){i=s;continue}break}if(r.child===n.child){for(n=r.child;n;){if(n===i)return c(r),t;if(n===s)return c(r),e;n=n.sibling}throw Error(o(188))}if(i.return!==s.return)i=r,s=n;else{for(var a=!1,l=r.child;l;){if(l===i){a=!0,i=r,s=n;break}if(l===s){a=!0,s=r,i=n;break}l=l.sibling}if(!a){for(l=n.child;l;){if(l===i){a=!0,i=n,s=r;break}if(l===s){a=!0,s=n,i=r;break}l=l.sibling}if(!a)throw Error(o(189))}}if(i.alternate!==s)throw Error(o(190))}if(3!==i.tag)throw Error(o(188));return i.stateNode.current===i?t:e}(e),t=null===(t=null!==t?u(t):null)?null:t.stateNode};var Ld={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dd.isDisabled&&Dd.supportsFiber)try{ct=Dd.inject(Ld),ut=Dd}catch(zd){}}e.createRoot=function(t,e){if(!a(t))throw Error(o(299));var i=!1,s="",r=xa,n=ba,h=Sa;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(i=!0),void 0!==e.identifierPrefix&&(s=e.identifierPrefix),void 0!==e.onUncaughtError&&(r=e.onUncaughtError),void 0!==e.onCaughtError&&(n=e.onCaughtError),void 0!==e.onRecoverableError&&(h=e.onRecoverableError),void 0!==e.unstable_transitionCallbacks&&e.unstable_transitionCallbacks),e=Qu(t,1,!1,null,0,i,s,r,n,h,0,null),t[zt]=e.current,Yc(t),new Fd(e)},e.hydrateRoot=function(t,e,i){if(!a(t))throw Error(o(299));var s=!1,r="",n=xa,h=ba,l=Sa,c=null;return null!==i&&void 0!==i&&(!0===i.unstable_strictMode&&(s=!0),void 0!==i.identifierPrefix&&(r=i.identifierPrefix),void 0!==i.onUncaughtError&&(n=i.onUncaughtError),void 0!==i.onCaughtError&&(h=i.onCaughtError),void 0!==i.onRecoverableError&&(l=i.onRecoverableError),void 0!==i.unstable_transitionCallbacks&&i.unstable_transitionCallbacks,void 0!==i.formState&&(c=i.formState)),(e=Qu(t,1,!0,e,0,s,r,n,h,l,0,c)).context=Ku(null),i=e.current,(r=nn(s=Tt(s=Il()))).callback=null,on(i,r,s),i=s,e.current.lanes=i,wt(e,i),Ec(e),t[zt]=e.current,Yc(t),new Pd(e)},e.version="19.1.1"},643:(t,e,i)=>{t.exports=i(152)},752:(t,e)=>{function i(t,e){var i=t.length;t.push(e);t:for(;0<i;){var s=i-1>>>1,r=t[s];if(!(0<n(r,e)))break t;t[s]=e,t[i]=r,i=s}}function s(t){return 0===t.length?null:t[0]}function r(t){if(0===t.length)return null;var e=t[0],i=t.pop();if(i!==e){t[0]=i;t:for(var s=0,r=t.length,o=r>>>1;s<o;){var a=2*(s+1)-1,h=t[a],l=a+1,c=t[l];if(0>n(h,i))l<r&&0>n(c,h)?(t[s]=c,t[l]=i,s=l):(t[s]=h,t[a]=i,s=a);else{if(!(l<r&&0>n(c,i)))break t;t[s]=c,t[l]=i,s=l}}}return e}function n(t,e){var i=t.sortIndex-e.sortIndex;return 0!==i?i:t.id-e.id}if(e.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,h=a.now();e.unstable_now=function(){return a.now()-h}}var l=[],c=[],u=1,d=null,f=3,g=!1,p=!1,y=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function S(t){for(var e=s(c);null!==e;){if(null===e.callback)r(c);else{if(!(e.startTime<=t))break;r(c),e.sortIndex=e.expirationTime,i(l,e)}e=s(c)}}function A(t){if(y=!1,S(t),!p)if(null!==s(l))p=!0,k||(k=!0,E());else{var e=s(c);null!==e&&L(A,e.startTime-t)}}var E,k=!1,w=-1,M=5,C=-1;function T(){return!!m||!(e.unstable_now()-C<M)}function F(){if(m=!1,k){var t=e.unstable_now();C=t;var i=!0;try{t:{p=!1,y&&(y=!1,x(w),w=-1),g=!0;var n=f;try{e:{for(S(t),d=s(l);null!==d&&!(d.expirationTime>t&&T());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=t);if(t=e.unstable_now(),"function"===typeof a){d.callback=a,S(t),i=!0;break e}d===s(l)&&r(l),S(t)}else r(l);d=s(l)}if(null!==d)i=!0;else{var h=s(c);null!==h&&L(A,h.startTime-t),i=!1}}break t}finally{d=null,f=n,g=!1}i=void 0}}finally{i?E():k=!1}}}if("function"===typeof b)E=function(){b(F)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,B=P.port2;P.port1.onmessage=F,E=function(){B.postMessage(null)}}else E=function(){v(F,0)};function L(t,i){w=v(function(){t(e.unstable_now())},i)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var i=f;f=e;try{return t()}finally{f=i}},e.unstable_requestPaint=function(){m=!0},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var i=f;f=t;try{return e()}finally{f=i}},e.unstable_scheduleCallback=function(t,r,n){var o=e.unstable_now();switch("object"===typeof n&&null!==n?n="number"===typeof(n=n.delay)&&0<n?o+n:o:n=o,t){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return t={id:u++,callback:r,priorityLevel:t,startTime:n,expirationTime:a=n+a,sortIndex:-1},n>o?(t.sortIndex=n,i(c,t),null===s(l)&&t===s(c)&&(y?(x(w),w=-1):y=!0,L(A,n-o))):(t.sortIndex=a,i(l,t),p||g||(p=!0,k||(k=!0,E()))),t},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(t){var e=f;return function(){var i=f;f=e;try{return t.apply(this,arguments)}finally{f=i}}}},766:(t,e,i)=>{!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=i(432)},935:(t,e)=>{var i=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function r(t,e,s){var r=null;if(void 0!==s&&(r=""+s),void 0!==e.key&&(r=""+e.key),"key"in e)for(var n in s={},e)"key"!==n&&(s[n]=e[n]);else s=e;return e=s.ref,{$$typeof:i,type:t,key:r,ref:void 0!==e?e:null,props:s}}e.Fragment=s,e.jsx=r,e.jsxs=r}},e={};function i(s){var r=e[s];if(void 0!==r)return r.exports;var n=e[s]={exports:{}};return t[s](n,n.exports,i),n.exports}i.m=t,i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.f={},i.e=t=>Promise.all(Object.keys(i.f).reduce((e,s)=>(i.f[s](t,e),e),[])),i.u=t=>"static/js/"+t+".bb3c95e5.chunk.js",i.miniCssF=t=>{},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={},e="frontend:";i.l=(s,r,n,o)=>{if(t[s])t[s].push(r);else{var a,h;if(void 0!==n)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var u=l[c];if(u.getAttribute("src")==s||u.getAttribute("data-webpack")==e+n){a=u;break}}a||(h=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.setAttribute("data-webpack",e+n),a.src=s),t[s]=[r];var d=(e,i)=>{a.onerror=a.onload=null,clearTimeout(f);var r=t[s];if(delete t[s],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach(t=>t(i)),e)return e(i)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),h&&document.head.appendChild(a)}}})(),i.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.p="/",(()=>{var t={792:0};i.f.j=(e,s)=>{var r=i.o(t,e)?t[e]:void 0;if(0!==r)if(r)s.push(r[2]);else{var n=new Promise((i,s)=>r=t[e]=[i,s]);s.push(r[2]=n);var o=i.p+i.u(e),a=new Error;i.l(o,s=>{if(i.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var n=s&&("load"===s.type?"missing":s.type),o=s&&s.target&&s.target.src;a.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",a.name="ChunkLoadError",a.type=n,a.request=o,r[1](a)}},"chunk-"+e,e)}};var e=(e,s)=>{var r,n,o=s[0],a=s[1],h=s[2],l=0;if(o.some(e=>0!==t[e])){for(r in a)i.o(a,r)&&(i.m[r]=a[r]);if(h)h(i)}for(e&&e(s);l<o.length;l++)n=o[l],i.o(t,n)&&t[n]&&t[n][0](),t[n]=0},s=self.webpackChunkfrontend=self.webpackChunkfrontend||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var s=i(643),r=i(367);function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=n(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}function a(t,e,i){return(e=o(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,s)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach(function(e){a(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}var c="delete",u=32,d=31,f={};function g(t){t&&(t.value=!0)}function p(){}function y(t){return void 0===t.size&&(t.size=t.__iterate(v)),t.size}function m(t,e){if("number"!==typeof e){var i=e>>>0;if(""+i!==e||4294967295===i)return NaN;e=i}return e<0?y(t)+e:e}function v(){return!0}function x(t,e,i){return(0===t&&!E(t)||void 0!==i&&t<=-i)&&(void 0===e||void 0!==i&&e>=i)}function b(t,e){return A(t,e,0)}function S(t,e){return A(t,e,e)}function A(t,e,i){return void 0===t?i:E(t)?e===1/0?e:0|Math.max(0,e+t):void 0===e||e===t?t:0|Math.min(e,t)}function E(t){return t<0||0===t&&1/t===-1/0}var k="@@__IMMUTABLE_ITERABLE__@@";function w(t){return Boolean(t&&t[k])}var M="@@__IMMUTABLE_KEYED__@@";function C(t){return Boolean(t&&t[M])}var T="@@__IMMUTABLE_INDEXED__@@";function F(t){return Boolean(t&&t[T])}function P(t){return C(t)||F(t)}var B=function(t){return w(t)?t:tt(t)},L=function(t){function e(t){return C(t)?t:et(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(B),D=function(t){function e(t){return F(t)?t:it(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(B),z=function(t){function e(t){return w(t)&&!P(t)?t:st(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(B);B.Keyed=L,B.Indexed=D,B.Set=z;var I="@@__IMMUTABLE_SEQ__@@";function R(t){return Boolean(t&&t[I])}var _="@@__IMMUTABLE_RECORD__@@";function V(t){return Boolean(t&&t[_])}function N(t){return w(t)||V(t)}var O="@@__IMMUTABLE_ORDERED__@@";function Y(t){return Boolean(t&&t[O])}var G="function"===typeof Symbol&&Symbol.iterator,X="@@iterator",U=G||X,H=function(t){this.next=t};function j(t,e,i,s){var r=0===t?e:1===t?i:[e,i];return s?s.value=r:s={value:r,done:!1},s}function W(){return{value:void 0,done:!0}}function Z(t){return!!Array.isArray(t)||!!Q(t)}function J(t){return t&&"function"===typeof t.next}function q(t){var e=Q(t);return e&&e.call(t)}function Q(t){var e=t&&(G&&t[G]||t[X]);if("function"===typeof e)return e}H.prototype.toString=function(){return"[Iterator]"},H.KEYS=0,H.VALUES=1,H.ENTRIES=2,H.prototype.inspect=H.prototype.toSource=function(){return this.toString()},H.prototype[U]=function(){return this};var K=Object.prototype.hasOwnProperty;function $(t){return!(!Array.isArray(t)&&"string"!==typeof t)||t&&"object"===typeof t&&Number.isInteger(t.length)&&t.length>=0&&(0===t.length?1===Object.keys(t).length:t.hasOwnProperty(t.length-1))}var tt=function(t){function e(t){return void 0===t||null===t?ht():N(t)?t.toSeq():function(t){var e=ut(t);if(e)return function(t){var e=Q(t);return e&&e===t.entries}(t)?e.fromEntrySeq():function(t){var e=Q(t);return e&&e===t.keys}(t)?e.toSetSeq():e;if("object"===typeof t)return new nt(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(t,e){var i=this._cache;if(i){for(var s=i.length,r=0;r!==s;){var n=i[e?s-++r:r++];if(!1===t(n[1],n[0],this))break}return r}return this.__iterateUncached(t,e)},e.prototype.__iterator=function(t,e){var i=this._cache;if(i){var s=i.length,r=0;return new H(function(){if(r===s)return{value:void 0,done:!0};var n=i[e?s-++r:r++];return j(t,n[0],n[1])})}return this.__iteratorUncached(t,e)},e}(B),et=function(t){function e(t){return void 0===t||null===t?ht().toKeyedSeq():w(t)?C(t)?t.toSeq():t.fromEntrySeq():V(t)?t.toSeq():lt(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(tt),it=function(t){function e(t){return void 0===t||null===t?ht():w(t)?C(t)?t.entrySeq():t.toIndexedSeq():V(t)?t.toSeq().entrySeq():ct(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(tt),st=function(t){function e(t){return(w(t)&&!P(t)?t:it(t)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(tt);tt.isSeq=R,tt.Keyed=et,tt.Set=st,tt.Indexed=it,tt.prototype[I]=!0;var rt=function(t){function e(t){this._array=t,this.size=t.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this.has(t)?this._array[m(this,t)]:e},e.prototype.__iterate=function(t,e){for(var i=this._array,s=i.length,r=0;r!==s;){var n=e?s-++r:r++;if(!1===t(i[n],n,this))break}return r},e.prototype.__iterator=function(t,e){var i=this._array,s=i.length,r=0;return new H(function(){if(r===s)return{value:void 0,done:!0};var n=e?s-++r:r++;return j(t,n,i[n])})},e}(it),nt=function(t){function e(t){var e=Object.keys(t).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[]);this._object=t,this._keys=e,this.size=e.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},e.prototype.has=function(t){return K.call(this._object,t)},e.prototype.__iterate=function(t,e){for(var i=this._object,s=this._keys,r=s.length,n=0;n!==r;){var o=s[e?r-++n:n++];if(!1===t(i[o],o,this))break}return n},e.prototype.__iterator=function(t,e){var i=this._object,s=this._keys,r=s.length,n=0;return new H(function(){if(n===r)return{value:void 0,done:!0};var o=s[e?r-++n:n++];return j(t,o,i[o])})},e}(et);nt.prototype[O]=!0;var ot,at=function(t){function e(t){this._collection=t,this.size=t.length||t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var i=q(this._collection),s=0;if(J(i))for(var r;!(r=i.next()).done&&!1!==t(r.value,s++,this););return s},e.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var i=q(this._collection);if(!J(i))return new H(W);var s=0;return new H(function(){var e=i.next();return e.done?e:j(t,s++,e.value)})},e}(it);function ht(){return ot||(ot=new rt([]))}function lt(t){var e=ut(t);if(e)return e.fromEntrySeq();if("object"===typeof t)return new nt(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function ct(t){var e=ut(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function ut(t){return $(t)?new rt(t):Z(t)?new at(t):void 0}var dt="@@__IMMUTABLE_MAP__@@";function ft(t){return Boolean(t&&t[dt])}function gt(t){return ft(t)&&Y(t)}function pt(t){return Boolean(t&&"function"===typeof t.equals&&"function"===typeof t.hashCode)}function yt(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if("function"===typeof t.valueOf&&"function"===typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!==t&&e!==e)return!0;if(!t||!e)return!1}return!!(pt(t)&&pt(e)&&t.equals(e))}var mt="function"===typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var i=65535&(t|=0),s=65535&(e|=0);return i*s+((t>>>16)*s+i*(e>>>16)<<16>>>0)|0};function vt(t){return t>>>1&1073741824|3221225471&t}var xt=Object.prototype.valueOf;function bt(t){if(null==t)return St(t);if("function"===typeof t.hashCode)return vt(t.hashCode(t));var e,i=(e=t).valueOf!==xt&&"function"===typeof e.valueOf?e.valueOf(e):e;if(null==i)return St(i);switch(typeof i){case"boolean":return i?1108378657:1108378656;case"number":return function(t){if(t!==t||t===1/0)return 0;var e=0|t;e!==t&&(e^=4294967295*t);for(;t>4294967295;)e^=t/=4294967295;return vt(e)}(i);case"string":return i.length>Bt?function(t){var e=zt[t];void 0===e&&(e=At(t),Dt===Lt&&(Dt=0,zt={}),Dt++,zt[t]=e);return e}(i):At(i);case"object":case"function":return function(t){var e;if(Ct&&void 0!==(e=Mt.get(t)))return e;if(e=t[Pt],void 0!==e)return e;if(!kt){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Pt]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}if(e=wt(),Ct)Mt.set(t,e);else{if(void 0!==Et&&!1===Et(t))throw new Error("Non-extensible objects are not allowed as keys.");if(kt)Object.defineProperty(t,Pt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Pt]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Pt]=e}}return e}(i);case"symbol":return function(t){var e=Tt[t];if(void 0!==e)return e;return e=wt(),Tt[t]=e,e}(i);default:if("function"===typeof i.toString)return At(i.toString());throw new Error("Value type "+typeof i+" cannot be hashed.")}}function St(t){return null===t?1108378658:1108378659}function At(t){for(var e=0,i=0;i<t.length;i++)e=31*e+t.charCodeAt(i)|0;return vt(e)}var Et=Object.isExtensible,kt=function(){try{return Object.defineProperty({},"@",{}),!0}catch(bs){return!1}}();function wt(){var t=++Ft;return 1073741824&Ft&&(Ft=0),t}var Mt,Ct="function"===typeof WeakMap;Ct&&(Mt=new WeakMap);var Tt=Object.create(null),Ft=0,Pt="__immutablehash__";"function"===typeof Symbol&&(Pt=Symbol(Pt));var Bt=16,Lt=255,Dt=0,zt={},It=function(t){function e(t,e){this._iter=t,this._useKeys=e,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this._iter.get(t,e)},e.prototype.has=function(t){return this._iter.has(t)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var t=this,e=Yt(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},e.prototype.map=function(t,e){var i=this,s=Ot(this,t,e);return this._useKeys||(s.valueSeq=function(){return i._iter.toSeq().map(t,e)}),s},e.prototype.__iterate=function(t,e){var i=this;return this._iter.__iterate(function(e,s){return t(e,s,i)},e)},e.prototype.__iterator=function(t,e){return this._iter.__iterator(t,e)},e}(et);It.prototype[O]=!0;var Rt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var i=this,s=0;return e&&y(this),this._iter.__iterate(function(r){return t(r,e?i.size-++s:s++,i)},e)},e.prototype.__iterator=function(t,e){var i=this,s=this._iter.__iterator(1,e),r=0;return e&&y(this),new H(function(){var n=s.next();return n.done?n:j(t,e?i.size-++r:r++,n.value,n)})},e}(it),_t=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var i=this;return this._iter.__iterate(function(e){return t(e,e,i)},e)},e.prototype.__iterator=function(t,e){var i=this._iter.__iterator(1,e);return new H(function(){var e=i.next();return e.done?e:j(t,e.value,e.value,e)})},e}(st),Vt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(t,e){var i=this;return this._iter.__iterate(function(e){if(e){Qt(e);var s=w(e);return t(s?e.get(1):e[1],s?e.get(0):e[0],i)}},e)},e.prototype.__iterator=function(t,e){var i=this._iter.__iterator(1,e);return new H(function(){for(;;){var e=i.next();if(e.done)return e;var s=e.value;if(s){Qt(s);var r=w(s);return j(t,r?s.get(0):s[0],r?s.get(1):s[1],e)}}})},e}(et);function Nt(t){var e=$t(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=te,e.__iterateUncached=function(e,i){var s=this;return t.__iterate(function(t,i){return!1!==e(i,t,s)},i)},e.__iteratorUncached=function(e,i){if(2===e){var s=t.__iterator(e,i);return new H(function(){var t=s.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(1===e?0:1,i)},e}function Ot(t,e,i){var s=$t(t);return s.size=t.size,s.has=function(e){return t.has(e)},s.get=function(s,r){var n=t.get(s,f);return n===f?r:e.call(i,n,s,t)},s.__iterateUncached=function(s,r){var n=this;return t.__iterate(function(t,r,o){return!1!==s(e.call(i,t,r,o),r,n)},r)},s.__iteratorUncached=function(s,r){var n=t.__iterator(2,r);return new H(function(){var r=n.next();if(r.done)return r;var o=r.value,a=o[0];return j(s,a,e.call(i,o[1],a,t),r)})},s}function Yt(t,e){var i=this,s=$t(t);return s._iter=t,s.size=t.size,s.reverse=function(){return t},t.flip&&(s.flip=function(){var e=Nt(t);return e.reverse=function(){return t.flip()},e}),s.get=function(i,s){return t.get(e?i:-1-i,s)},s.has=function(i){return t.has(e?i:-1-i)},s.includes=function(e){return t.includes(e)},s.cacheResult=te,s.__iterate=function(i,s){var r=this,n=0;return s&&y(t),t.__iterate(function(t,o){return i(t,e?o:s?r.size-++n:n++,r)},!s)},s.__iterator=function(s,r){var n=0;r&&y(t);var o=t.__iterator(2,!r);return new H(function(){var t=o.next();if(t.done)return t;var a=t.value;return j(s,e?a[0]:r?i.size-++n:n++,a[1],t)})},s}function Gt(t,e,i,s){var r=$t(t);return s&&(r.has=function(s){var r=t.get(s,f);return r!==f&&!!e.call(i,r,s,t)},r.get=function(s,r){var n=t.get(s,f);return n!==f&&e.call(i,n,s,t)?n:r}),r.__iterateUncached=function(r,n){var o=this,a=0;return t.__iterate(function(t,n,h){if(e.call(i,t,n,h))return a++,r(t,s?n:a-1,o)},n),a},r.__iteratorUncached=function(r,n){var o=t.__iterator(2,n),a=0;return new H(function(){for(;;){var n=o.next();if(n.done)return n;var h=n.value,l=h[0],c=h[1];if(e.call(i,c,l,t))return j(r,s?l:a++,c,n)}})},r}function Xt(t,e,i,s){var r=t.size;if(x(e,i,r))return t;if("undefined"===typeof r&&(e<0||i<0))return Xt(t.toSeq().cacheResult(),e,i,s);var n,o=b(e,r),a=S(i,r)-o;a===a&&(n=a<0?0:a);var h=$t(t);return h.size=0===n?n:t.size&&n||void 0,!s&&R(t)&&n>=0&&(h.get=function(e,i){return(e=m(this,e))>=0&&e<n?t.get(e+o,i):i}),h.__iterateUncached=function(e,i){var r=this;if(0===n)return 0;if(i)return this.cacheResult().__iterate(e,i);var a=0,h=!0,l=0;return t.__iterate(function(t,i){if(!h||!(h=a++<o))return l++,!1!==e(t,s?i:l-1,r)&&l!==n}),l},h.__iteratorUncached=function(e,i){if(0!==n&&i)return this.cacheResult().__iterator(e,i);if(0===n)return new H(W);var r=t.__iterator(e,i),a=0,h=0;return new H(function(){for(;a++<o;)r.next();if(++h>n)return{value:void 0,done:!0};var t=r.next();return s||1===e||t.done?t:j(e,h-1,0===e?void 0:t.value[1],t)})},h}function Ut(t,e,i,s){var r=$t(t);return r.__iterateUncached=function(r,n){var o=this;if(n)return this.cacheResult().__iterate(r,n);var a=!0,h=0;return t.__iterate(function(t,n,l){if(!a||!(a=e.call(i,t,n,l)))return h++,r(t,s?n:h-1,o)}),h},r.__iteratorUncached=function(r,n){var o=this;if(n)return this.cacheResult().__iterator(r,n);var a=t.__iterator(2,n),h=!0,l=0;return new H(function(){var t,n,c;do{if((t=a.next()).done)return s||1===r?t:j(r,l++,0===r?void 0:t.value[1],t);var u=t.value;n=u[0],c=u[1],h&&(h=e.call(i,c,n,o))}while(h);return 2===r?t:j(r,n,c,t)})},r}function Ht(t,e,i){var s=$t(t);return s.__iterateUncached=function(r,n){if(n)return this.cacheResult().__iterate(r,n);var o=0,a=!1;return function t(h,l){h.__iterate(function(n,h){return(!e||l<e)&&w(n)?t(n,l+1):(o++,!1===r(n,i?h:o-1,s)&&(a=!0)),!a},n)}(t,0),o},s.__iteratorUncached=function(s,r){if(r)return this.cacheResult().__iterator(s,r);var n=t.__iterator(s,r),o=[],a=0;return new H(function(){for(;n;){var t=n.next();if(!1===t.done){var h=t.value;if(2===s&&(h=h[1]),e&&!(o.length<e)||!w(h))return i?t:j(s,a++,h,t);o.push(n),n=h.__iterator(s,r)}else n=o.pop()}return{value:void 0,done:!0}})},s}function jt(t,e,i){e||(e=ee);var s=C(t),r=0,n=t.toSeq().map(function(e,s){return[s,e,r++,i?i(e,s,t):e]}).valueSeq().toArray();return n.sort(function(t,i){return e(t[3],i[3])||t[2]-i[2]}).forEach(s?function(t,e){n[e].length=2}:function(t,e){n[e]=t[1]}),s?et(n):F(t)?it(n):st(n)}function Wt(t,e,i){if(e||(e=ee),i){var s=t.toSeq().map(function(e,s){return[e,i(e,s,t)]}).reduce(function(t,i){return Zt(e,t[1],i[1])?i:t});return s&&s[0]}return t.reduce(function(t,i){return Zt(e,t,i)?i:t})}function Zt(t,e,i){var s=t(i,e);return 0===s&&i!==e&&(void 0===i||null===i||i!==i)||s>0}function Jt(t,e,i,s){var r=$t(t),n=new rt(i).map(function(t){return t.size});return r.size=s?n.max():n.min(),r.__iterate=function(t,e){for(var i,s=this.__iterator(1,e),r=0;!(i=s.next()).done&&!1!==t(i.value,r++,this););return r},r.__iteratorUncached=function(t,r){var n=i.map(function(t){return t=B(t),q(r?t.reverse():t)}),o=0,a=!1;return new H(function(){var i;return a||(i=n.map(function(t){return t.next()}),a=s?i.every(function(t){return t.done}):i.some(function(t){return t.done})),a?{value:void 0,done:!0}:j(t,o++,e.apply(null,i.map(function(t){return t.value})))})},r}function qt(t,e){return t===e?t:R(t)?e:t.constructor(e)}function Qt(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Kt(t){return C(t)?L:F(t)?D:z}function $t(t){return Object.create((C(t)?et:F(t)?it:st).prototype)}function te(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):tt.prototype.cacheResult.call(this)}function ee(t,e){return void 0===t&&void 0===e?0:void 0===t?1:void 0===e?-1:t>e?1:t<e?-1:0}function ie(t,e){e=e||0;for(var i=Math.max(0,t.length-e),s=new Array(i),r=0;r<i;r++)s[r]=t[r+e];return s}function se(t,e){if(!t)throw new Error(e)}function re(t){se(t!==1/0,"Cannot perform this action with an infinite size.")}function ne(t){if($(t)&&"string"!==typeof t)return t;if(Y(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}Rt.prototype.cacheResult=It.prototype.cacheResult=_t.prototype.cacheResult=Vt.prototype.cacheResult=te;var oe=Object.prototype.toString;function ae(t){if(!t||"object"!==typeof t||"[object Object]"!==oe.call(t))return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;for(var i=e,s=Object.getPrototypeOf(e);null!==s;)i=s,s=Object.getPrototypeOf(i);return i===e}function he(t){return"object"===typeof t&&(N(t)||Array.isArray(t)||ae(t))}function le(t){try{return"string"===typeof t?JSON.stringify(t):String(t)}catch(e){return JSON.stringify(t)}}function ce(t,e){return N(t)?t.has(e):he(t)&&K.call(t,e)}function ue(t,e,i){return N(t)?t.get(e,i):ce(t,e)?"function"===typeof t.get?t.get(e):t[e]:i}function de(t){if(Array.isArray(t))return ie(t);var e={};for(var i in t)K.call(t,i)&&(e[i]=t[i]);return e}function fe(t,e){if(!he(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(N(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!K.call(t,e))return t;var i=de(t);return Array.isArray(i)?i.splice(e,1):delete i[e],i}function ge(t,e,i){if(!he(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(N(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,i)}if(K.call(t,e)&&i===t[e])return t;var s=de(t);return s[e]=i,s}function pe(t,e,i,s){s||(s=i,i=void 0);var r=ye(N(t),t,ne(e),0,i,s);return r===f?i:r}function ye(t,e,i,s,r,n){var o=e===f;if(s===i.length){var a=o?r:e,h=n(a);return h===a?e:h}if(!o&&!he(e))throw new TypeError("Cannot update within non-data-structure value in path ["+i.slice(0,s).map(le)+"]: "+e);var l=i[s],c=o?f:ue(e,l,f),u=ye(c===f?t:N(c),c,i,s+1,r,n);return u===c?e:u===f?fe(e,l):ge(o?t?Je():{}:e,l,u)}function me(t,e,i){return pe(t,e,f,function(){return i})}function ve(t,e){return me(this,t,e)}function xe(t,e){return pe(t,e,function(){return f})}function be(t){return xe(this,t)}function Se(t,e,i,s){return pe(t,[e],i,s)}function Ae(t,e,i){return 1===arguments.length?t(this):Se(this,t,e,i)}function Ee(t,e,i){return pe(this,t,e,i)}function ke(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Me(this,t)}function we(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];if("function"!==typeof t)throw new TypeError("Invalid merger function: "+t);return Me(this,e,t)}function Me(t,e,i){for(var s=[],r=0;r<e.length;r++){var n=L(e[r]);0!==n.size&&s.push(n)}return 0===s.length?t:0!==t.toSeq().size||t.__ownerID||1!==s.length?t.withMutations(function(t){for(var e=i?function(e,s){Se(t,s,f,function(t){return t===f?e:i(t,e,s)})}:function(e,i){t.set(i,e)},r=0;r<s.length;r++)s[r].forEach(e)}):t.constructor(s[0])}function Ce(t,e,i){return Te(t,e,function(t){function e(i,s,r){return he(i)&&he(s)&&function(t,e){var i=tt(t),s=tt(e);return F(i)===F(s)&&C(i)===C(s)}(i,s)?Te(i,[s],e):t?t(i,s,r):s}return e}(i))}function Te(t,e,i){if(!he(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(N(t))return"function"===typeof i&&t.mergeWith?t.mergeWith.apply(t,[i].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var s=Array.isArray(t),r=t,n=s?D:L,o=s?function(e){r===t&&(r=de(r)),r.push(e)}:function(e,s){var n=K.call(r,s),o=n&&i?i(r[s],e,s):e;n&&o===r[s]||(r===t&&(r=de(r)),r[s]=o)},a=0;a<e.length;a++)n(e[a]).forEach(o);return r}function Fe(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Ce(this,t)}function Pe(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];return Ce(this,e,t)}function Be(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];return pe(this,t,Je(),function(t){return Te(t,e)})}function Le(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];return pe(this,t,Je(),function(t){return Ce(t,e)})}function De(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function ze(){return this.__ownerID?this:this.__ensureOwner(new p)}function Ie(){return this.__ensureOwner()}function Re(){return this.__altered}var _e=function(t){function e(e){return void 0===e||null===e?Je():ft(e)&&!Y(e)?e:Je().withMutations(function(i){var s=t(e);re(s.size),s.forEach(function(t,e){return i.set(e,t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Je().withMutations(function(e){for(var i=0;i<t.length;i+=2){if(i+1>=t.length)throw new Error("Missing value for key: "+t[i]);e.set(t[i],t[i+1])}})},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},e.prototype.set=function(t,e){return qe(this,t,e)},e.prototype.remove=function(t){return qe(this,t,f)},e.prototype.deleteAll=function(t){var e=B(t);return 0===e.size?this:this.withMutations(function(t){e.forEach(function(e){return t.remove(e)})})},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Je()},e.prototype.sort=function(t){return Si(jt(this,t))},e.prototype.sortBy=function(t,e){return Si(jt(this,e,t))},e.prototype.map=function(t,e){var i=this;return this.withMutations(function(s){s.forEach(function(r,n){s.set(n,t.call(e,r,n,i))})})},e.prototype.__iterator=function(t,e){return new He(this,t,e)},e.prototype.__iterate=function(t,e){var i=this,s=0;return this._root&&this._root.iterate(function(e){return s++,t(e[1],e[0],i)},e),s},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ze(this.size,this._root,t,this.__hash):0===this.size?Je():(this.__ownerID=t,this.__altered=!1,this)},e}(L);_e.isMap=ft;var Ve=_e.prototype;Ve[dt]=!0,Ve[c]=Ve.remove,Ve.removeAll=Ve.deleteAll,Ve.setIn=ve,Ve.removeIn=Ve.deleteIn=be,Ve.update=Ae,Ve.updateIn=Ee,Ve.merge=Ve.concat=ke,Ve.mergeWith=we,Ve.mergeDeep=Fe,Ve.mergeDeepWith=Pe,Ve.mergeIn=Be,Ve.mergeDeepIn=Le,Ve.withMutations=De,Ve.wasAltered=Re,Ve.asImmutable=Ie,Ve["@@transducer/init"]=Ve.asMutable=ze,Ve["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])},Ve["@@transducer/result"]=function(t){return t.asImmutable()};var Ne=function(t,e){this.ownerID=t,this.entries=e};Ne.prototype.get=function(t,e,i,s){for(var r=this.entries,n=0,o=r.length;n<o;n++)if(yt(i,r[n][0]))return r[n][1];return s},Ne.prototype.update=function(t,e,i,s,r,n,o){for(var a=r===f,h=this.entries,l=0,c=h.length;l<c&&!yt(s,h[l][0]);l++);var u=l<c;if(u?h[l][1]===r:a)return this;if(g(o),(a||!u)&&g(n),!a||1!==h.length){if(!u&&!a&&h.length>=ii)return function(t,e,i,s){t||(t=new p);for(var r=new Xe(t,bt(i),[i,s]),n=0;n<e.length;n++){var o=e[n];r=r.update(t,0,void 0,o[0],o[1])}return r}(t,h,s,r);var d=t&&t===this.ownerID,y=d?h:ie(h);return u?a?l===c-1?y.pop():y[l]=y.pop():y[l]=[s,r]:y.push([s,r]),d?(this.entries=y,this):new Ne(t,y)}};var Oe=function(t,e,i){this.ownerID=t,this.bitmap=e,this.nodes=i};Oe.prototype.get=function(t,e,i,s){void 0===e&&(e=bt(i));var r=1<<((0===t?e:e>>>t)&d),n=this.bitmap;return 0===(n&r)?s:this.nodes[ti(n&r-1)].get(t+5,e,i,s)},Oe.prototype.update=function(t,e,i,s,r,n,o){void 0===i&&(i=bt(s));var a=(0===e?i:i>>>e)&d,h=1<<a,l=this.bitmap,c=0!==(l&h);if(!c&&r===f)return this;var g=ti(l&h-1),p=this.nodes,y=c?p[g]:void 0,m=Qe(y,t,e+5,i,s,r,n,o);if(m===y)return this;if(!c&&m&&p.length>=si)return function(t,e,i,s,r){for(var n=0,o=new Array(u),a=0;0!==i;a++,i>>>=1)o[a]=1&i?e[n++]:void 0;return o[s]=r,new Ye(t,n+1,o)}(t,p,l,a,m);if(c&&!m&&2===p.length&&Ke(p[1^g]))return p[1^g];if(c&&m&&1===p.length&&Ke(m))return m;var v=t&&t===this.ownerID,x=c?m?l:l^h:l|h,b=c?m?ei(p,g,m,v):function(t,e,i){var s=t.length-1;if(i&&e===s)return t.pop(),t;for(var r=new Array(s),n=0,o=0;o<s;o++)o===e&&(n=1),r[o]=t[o+n];return r}(p,g,v):function(t,e,i,s){var r=t.length+1;if(s&&e+1===r)return t[e]=i,t;for(var n=new Array(r),o=0,a=0;a<r;a++)a===e?(n[a]=i,o=-1):n[a]=t[a+o];return n}(p,g,m,v);return v?(this.bitmap=x,this.nodes=b,this):new Oe(t,x,b)};var Ye=function(t,e,i){this.ownerID=t,this.count=e,this.nodes=i};Ye.prototype.get=function(t,e,i,s){void 0===e&&(e=bt(i));var r=(0===t?e:e>>>t)&d,n=this.nodes[r];return n?n.get(t+5,e,i,s):s},Ye.prototype.update=function(t,e,i,s,r,n,o){void 0===i&&(i=bt(s));var a=(0===e?i:i>>>e)&d,h=r===f,l=this.nodes,c=l[a];if(h&&!c)return this;var u=Qe(c,t,e+5,i,s,r,n,o);if(u===c)return this;var g=this.count;if(c){if(!u&&--g<ri)return function(t,e,i,s){for(var r=0,n=0,o=new Array(i),a=0,h=1,l=e.length;a<l;a++,h<<=1){var c=e[a];void 0!==c&&a!==s&&(r|=h,o[n++]=c)}return new Oe(t,r,o)}(t,l,g,a)}else g++;var p=t&&t===this.ownerID,y=ei(l,a,u,p);return p?(this.count=g,this.nodes=y,this):new Ye(t,g,y)};var Ge=function(t,e,i){this.ownerID=t,this.keyHash=e,this.entries=i};Ge.prototype.get=function(t,e,i,s){for(var r=this.entries,n=0,o=r.length;n<o;n++)if(yt(i,r[n][0]))return r[n][1];return s},Ge.prototype.update=function(t,e,i,s,r,n,o){void 0===i&&(i=bt(s));var a=r===f;if(i!==this.keyHash)return a?this:(g(o),g(n),$e(this,t,e,i,[s,r]));for(var h=this.entries,l=0,c=h.length;l<c&&!yt(s,h[l][0]);l++);var u=l<c;if(u?h[l][1]===r:a)return this;if(g(o),(a||!u)&&g(n),a&&2===c)return new Xe(t,this.keyHash,h[1^l]);var d=t&&t===this.ownerID,p=d?h:ie(h);return u?a?l===c-1?p.pop():p[l]=p.pop():p[l]=[s,r]:p.push([s,r]),d?(this.entries=p,this):new Ge(t,this.keyHash,p)};var Xe=function(t,e,i){this.ownerID=t,this.keyHash=e,this.entry=i};Xe.prototype.get=function(t,e,i,s){return yt(i,this.entry[0])?this.entry[1]:s},Xe.prototype.update=function(t,e,i,s,r,n,o){var a=r===f,h=yt(s,this.entry[0]);return(h?r===this.entry[1]:a)?this:(g(o),a?void g(n):h?t&&t===this.ownerID?(this.entry[1]=r,this):new Xe(t,this.keyHash,[s,r]):(g(n),$e(this,t,e,bt(s),[s,r])))},Ne.prototype.iterate=Ge.prototype.iterate=function(t,e){for(var i=this.entries,s=0,r=i.length-1;s<=r;s++)if(!1===t(i[e?r-s:s]))return!1},Oe.prototype.iterate=Ye.prototype.iterate=function(t,e){for(var i=this.nodes,s=0,r=i.length-1;s<=r;s++){var n=i[e?r-s:s];if(n&&!1===n.iterate(t,e))return!1}},Xe.prototype.iterate=function(t,e){return t(this.entry)};var Ue,He=function(t){function e(t,e,i){this._type=e,this._reverse=i,this._stack=t._root&&We(t._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var i=e.node,s=e.index++,r=void 0;if(i.entry){if(0===s)return je(t,i.entry)}else if(i.entries){if(s<=(r=i.entries.length-1))return je(t,i.entries[this._reverse?r-s:s])}else if(s<=(r=i.nodes.length-1)){var n=i.nodes[this._reverse?r-s:s];if(n){if(n.entry)return je(t,n.entry);e=this._stack=We(n,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}},e}(H);function je(t,e){return j(t,e[0],e[1])}function We(t,e){return{node:t,index:0,__prev:e}}function Ze(t,e,i,s){var r=Object.create(Ve);return r.size=t,r._root=e,r.__ownerID=i,r.__hash=s,r.__altered=!1,r}function Je(){return Ue||(Ue=Ze(0))}function qe(t,e,i){var s,r;if(t._root){var n={value:!1},o={value:!1};if(s=Qe(t._root,t.__ownerID,0,void 0,e,i,n,o),!o.value)return t;r=t.size+(n.value?i===f?-1:1:0)}else{if(i===f)return t;r=1,s=new Ne(t.__ownerID,[[e,i]])}return t.__ownerID?(t.size=r,t._root=s,t.__hash=void 0,t.__altered=!0,t):s?Ze(r,s):Je()}function Qe(t,e,i,s,r,n,o,a){return t?t.update(e,i,s,r,n,o,a):n===f?t:(g(a),g(o),new Xe(e,s,[r,n]))}function Ke(t){return t.constructor===Xe||t.constructor===Ge}function $e(t,e,i,s,r){if(t.keyHash===s)return new Ge(e,s,[t.entry,r]);var n,o=(0===i?t.keyHash:t.keyHash>>>i)&d,a=(0===i?s:s>>>i)&d,h=o===a?[$e(t,e,i+5,s,r)]:(n=new Xe(e,s,r),o<a?[t,n]:[n,t]);return new Oe(e,1<<o|1<<a,h)}function ti(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function ei(t,e,i,s){var r=s?t:ie(t);return r[e]=i,r}var ii=8,si=16,ri=8,ni="@@__IMMUTABLE_LIST__@@";function oi(t){return Boolean(t&&t[ni])}var ai=function(t){function e(e){var i=gi();if(void 0===e||null===e)return i;if(oi(e))return e;var s=t(e),r=s.size;return 0===r?i:(re(r),r>0&&r<u?fi(0,r,5,null,new li(s.toArray())):i.withMutations(function(t){t.setSize(r),s.forEach(function(e,i){return t.set(i,e)})}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(t,e){if((t=m(this,t))>=0&&t<this.size){var i=mi(this,t+=this._origin);return i&&i.array[t&d]}return e},e.prototype.set=function(t,e){return function(t,e,i){if(e=m(t,e),e!==e)return t;if(e>=t.size||e<0)return t.withMutations(function(t){e<0?vi(t,e).set(0,i):vi(t,0,e+1).set(e,i)});e+=t._origin;var s=t._tail,r=t._root,n={value:!1};e>=xi(t._capacity)?s=pi(s,t.__ownerID,0,e,i,n):r=pi(r,t.__ownerID,t._level,e,i,n);if(!n.value)return t;if(t.__ownerID)return t._root=r,t._tail=s,t.__hash=void 0,t.__altered=!0,t;return fi(t._origin,t._capacity,t._level,r,s)}(this,t,e)},e.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},e.prototype.insert=function(t,e){return this.splice(t,0,e)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):gi()},e.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(i){vi(i,0,e+t.length);for(var s=0;s<t.length;s++)i.set(e+s,t[s])})},e.prototype.pop=function(){return vi(this,0,-1)},e.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){vi(e,-t.length);for(var i=0;i<t.length;i++)e.set(i,t[i])})},e.prototype.shift=function(){return vi(this,1)},e.prototype.concat=function(){for(var e=arguments,i=[],s=0;s<arguments.length;s++){var r=e[s],n=t("string"!==typeof r&&Z(r)?r:[r]);0!==n.size&&i.push(n)}return 0===i.length?this:0!==this.size||this.__ownerID||1!==i.length?this.withMutations(function(t){i.forEach(function(e){return e.forEach(function(e){return t.push(e)})})}):this.constructor(i[0])},e.prototype.setSize=function(t){return vi(this,0,t)},e.prototype.map=function(t,e){var i=this;return this.withMutations(function(s){for(var r=0;r<i.size;r++)s.set(r,t.call(e,s.get(r),r,i))})},e.prototype.slice=function(t,e){var i=this.size;return x(t,e,i)?this:vi(this,b(t,i),S(e,i))},e.prototype.__iterator=function(t,e){var i=e?this.size:0,s=di(this,e);return new H(function(){var r=s();return r===ui?{value:void 0,done:!0}:j(t,e?--i:i++,r)})},e.prototype.__iterate=function(t,e){for(var i,s=e?this.size:0,r=di(this,e);(i=r())!==ui&&!1!==t(i,e?--s:s++,this););return s},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?fi(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):0===this.size?gi():(this.__ownerID=t,this.__altered=!1,this)},e}(D);ai.isList=oi;var hi=ai.prototype;hi[ni]=!0,hi[c]=hi.remove,hi.merge=hi.concat,hi.setIn=ve,hi.deleteIn=hi.removeIn=be,hi.update=Ae,hi.updateIn=Ee,hi.mergeIn=Be,hi.mergeDeepIn=Le,hi.withMutations=De,hi.wasAltered=Re,hi.asImmutable=Ie,hi["@@transducer/init"]=hi.asMutable=ze,hi["@@transducer/step"]=function(t,e){return t.push(e)},hi["@@transducer/result"]=function(t){return t.asImmutable()};var li=function(t,e){this.array=t,this.ownerID=e};li.prototype.removeBefore=function(t,e,i){if(i===e?1<<e:0===this.array.length)return this;var s=i>>>e&d;if(s>=this.array.length)return new li([],t);var r,n=0===s;if(e>0){var o=this.array[s];if((r=o&&o.removeBefore(t,e-5,i))===o&&n)return this}if(n&&!r)return this;var a=yi(this,t);if(!n)for(var h=0;h<s;h++)a.array[h]=void 0;return r&&(a.array[s]=r),a},li.prototype.removeAfter=function(t,e,i){if(i===(e?1<<e:0)||0===this.array.length)return this;var s,r=i-1>>>e&d;if(r>=this.array.length)return this;if(e>0){var n=this.array[r];if((s=n&&n.removeAfter(t,e-5,i))===n&&r===this.array.length-1)return this}var o=yi(this,t);return o.array.splice(r+1),s&&(o.array[r]=s),o};var ci,ui={};function di(t,e){var i=t._origin,s=t._capacity,r=xi(s),n=t._tail;return o(t._root,t._level,0);function o(t,a,h){return 0===a?function(t,o){var a=o===r?n&&n.array:t&&t.array,h=o>i?0:i-o,l=s-o;l>u&&(l=u);return function(){if(h===l)return ui;var t=e?--l:h++;return a&&a[t]}}(t,h):function(t,r,n){var a,h=t&&t.array,l=n>i?0:i-n>>r,c=1+(s-n>>r);c>u&&(c=u);return function(){for(;;){if(a){var t=a();if(t!==ui)return t;a=null}if(l===c)return ui;var i=e?--c:l++;a=o(h&&h[i],r-5,n+(i<<r))}}}(t,a,h)}}function fi(t,e,i,s,r,n,o){var a=Object.create(hi);return a.size=e-t,a._origin=t,a._capacity=e,a._level=i,a._root=s,a._tail=r,a.__ownerID=n,a.__hash=o,a.__altered=!1,a}function gi(){return ci||(ci=fi(0,0,5))}function pi(t,e,i,s,r,n){var o,a=s>>>i&d,h=t&&a<t.array.length;if(!h&&void 0===r)return t;if(i>0){var l=t&&t.array[a],c=pi(l,e,i-5,s,r,n);return c===l?t:((o=yi(t,e)).array[a]=c,o)}return h&&t.array[a]===r?t:(n&&g(n),o=yi(t,e),void 0===r&&a===o.array.length-1?o.array.pop():o.array[a]=r,o)}function yi(t,e){return e&&t&&e===t.ownerID?t:new li(t?t.array.slice():[],e)}function mi(t,e){if(e>=xi(t._capacity))return t._tail;if(e<1<<t._level+5){for(var i=t._root,s=t._level;i&&s>0;)i=i.array[e>>>s&d],s-=5;return i}}function vi(t,e,i){void 0!==e&&(e|=0),void 0!==i&&(i|=0);var s=t.__ownerID||new p,r=t._origin,n=t._capacity,o=r+e,a=void 0===i?n:i<0?n+i:r+i;if(o===r&&a===n)return t;if(o>=a)return t.clear();for(var h=t._level,l=t._root,c=0;o+c<0;)l=new li(l&&l.array.length?[void 0,l]:[],s),c+=1<<(h+=5);c&&(o+=c,r+=c,a+=c,n+=c);for(var u=xi(n),f=xi(a);f>=1<<h+5;)l=new li(l&&l.array.length?[l]:[],s),h+=5;var g=t._tail,y=f<u?mi(t,a-1):f>u?new li([],s):g;if(g&&f>u&&o<n&&g.array.length){for(var m=l=yi(l,s),v=h;v>5;v-=5){var x=u>>>v&d;m=m.array[x]=yi(m.array[x],s)}m.array[u>>>5&d]=g}if(a<n&&(y=y&&y.removeAfter(s,0,a)),o>=f)o-=f,a-=f,h=5,l=null,y=y&&y.removeBefore(s,0,o);else if(o>r||f<u){for(c=0;l;){var b=o>>>h&d;if(b!==f>>>h&d)break;b&&(c+=(1<<h)*b),h-=5,l=l.array[b]}l&&o>r&&(l=l.removeBefore(s,h,o-c)),l&&f<u&&(l=l.removeAfter(s,h,f-c)),c&&(o-=c,a-=c)}return t.__ownerID?(t.size=a-o,t._origin=o,t._capacity=a,t._level=h,t._root=l,t._tail=y,t.__hash=void 0,t.__altered=!0,t):fi(o,a,h,l,y)}function xi(t){return t<u?0:t-1>>>5<<5}var bi,Si=function(t){function e(t){return void 0===t||null===t?Ei():gt(t)?t:Ei().withMutations(function(e){var i=L(t);re(i.size),i.forEach(function(t,i){return e.set(i,t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(t,e){var i=this._map.get(t);return void 0!==i?this._list.get(i)[1]:e},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):Ei()},e.prototype.set=function(t,e){return ki(this,t,e)},e.prototype.remove=function(t){return ki(this,t,f)},e.prototype.__iterate=function(t,e){var i=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],i)},e)},e.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),i=this._list.__ensureOwner(t);return t?Ai(e,i,t,this.__hash):0===this.size?Ei():(this.__ownerID=t,this.__altered=!1,this._map=e,this._list=i,this)},e}(_e);function Ai(t,e,i,s){var r=Object.create(Si.prototype);return r.size=t?t.size:0,r._map=t,r._list=e,r.__ownerID=i,r.__hash=s,r.__altered=!1,r}function Ei(){return bi||(bi=Ai(Je(),gi()))}function ki(t,e,i){var s,r,n=t._map,o=t._list,a=n.get(e),h=void 0!==a;if(i===f){if(!h)return t;o.size>=u&&o.size>=2*n.size?(s=(r=o.filter(function(t,e){return void 0!==t&&a!==e})).toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(s.__ownerID=r.__ownerID=t.__ownerID)):(s=n.remove(e),r=a===o.size-1?o.pop():o.set(a,void 0))}else if(h){if(i===o.get(a)[1])return t;s=n,r=o.set(a,[e,i])}else s=n.set(e,o.size),r=o.set(o.size,[e,i]);return t.__ownerID?(t.size=s.size,t._map=s,t._list=r,t.__hash=void 0,t.__altered=!0,t):Ai(s,r)}Si.isOrderedMap=gt,Si.prototype[O]=!0,Si.prototype[c]=Si.prototype.remove;var wi="@@__IMMUTABLE_STACK__@@";function Mi(t){return Boolean(t&&t[wi])}var Ci=function(t){function e(t){return void 0===t||null===t?Bi():Mi(t)?t:Bi().pushAll(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(t,e){var i=this._head;for(t=m(this,t);i&&t--;)i=i.next;return i?i.value:e},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var e=this.size+arguments.length,i=this._head,s=arguments.length-1;s>=0;s--)i={value:t[s],next:i};return this.__ownerID?(this.size=e,this._head=i,this.__hash=void 0,this.__altered=!0,this):Pi(e,i)},e.prototype.pushAll=function(e){if(0===(e=t(e)).size)return this;if(0===this.size&&Mi(e))return e;re(e.size);var i=this.size,s=this._head;return e.__iterate(function(t){i++,s={value:t,next:s}},!0),this.__ownerID?(this.size=i,this._head=s,this.__hash=void 0,this.__altered=!0,this):Pi(i,s)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Bi()},e.prototype.slice=function(e,i){if(x(e,i,this.size))return this;var s=b(e,this.size);if(S(i,this.size)!==this.size)return t.prototype.slice.call(this,e,i);for(var r=this.size-s,n=this._head;s--;)n=n.next;return this.__ownerID?(this.size=r,this._head=n,this.__hash=void 0,this.__altered=!0,this):Pi(r,n)},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Pi(this.size,this._head,t,this.__hash):0===this.size?Bi():(this.__ownerID=t,this.__altered=!1,this)},e.prototype.__iterate=function(t,e){var i=this;if(e)return new rt(this.toArray()).__iterate(function(e,s){return t(e,s,i)},e);for(var s=0,r=this._head;r&&!1!==t(r.value,s++,this);)r=r.next;return s},e.prototype.__iterator=function(t,e){if(e)return new rt(this.toArray()).__iterator(t,e);var i=0,s=this._head;return new H(function(){if(s){var e=s.value;return s=s.next,j(t,i++,e)}return{value:void 0,done:!0}})},e}(D);Ci.isStack=Mi;var Ti,Fi=Ci.prototype;function Pi(t,e,i,s){var r=Object.create(Fi);return r.size=t,r._head=e,r.__ownerID=i,r.__hash=s,r.__altered=!1,r}function Bi(){return Ti||(Ti=Pi(0))}Fi[wi]=!0,Fi.shift=Fi.pop,Fi.unshift=Fi.push,Fi.unshiftAll=Fi.pushAll,Fi.withMutations=De,Fi.wasAltered=Re,Fi.asImmutable=Ie,Fi["@@transducer/init"]=Fi.asMutable=ze,Fi["@@transducer/step"]=function(t,e){return t.unshift(e)},Fi["@@transducer/result"]=function(t){return t.asImmutable()};var Li="@@__IMMUTABLE_SET__@@";function Di(t){return Boolean(t&&t[Li])}function zi(t){return Di(t)&&Y(t)}function Ii(t,e){if(t===e)return!0;if(!w(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||C(t)!==C(e)||F(t)!==F(e)||Y(t)!==Y(e))return!1;if(0===t.size&&0===e.size)return!0;var i=!P(t);if(Y(t)){var s=t.entries();return e.every(function(t,e){var r=s.next().value;return r&&yt(r[1],t)&&(i||yt(r[0],e))})&&s.next().done}var r=!1;if(void 0===t.size)if(void 0===e.size)"function"===typeof t.cacheResult&&t.cacheResult();else{r=!0;var n=t;t=e,e=n}var o=!0,a=e.__iterate(function(e,s){if(i?!t.has(e):r?!yt(e,t.get(s,f)):!yt(t.get(s,f),e))return o=!1,!1});return o&&t.size===a}function Ri(t,e){var i=function(i){t.prototype[i]=e[i]};return Object.keys(e).forEach(i),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(i),t}function _i(t){if(!t||"object"!==typeof t)return t;if(!w(t)){if(!he(t))return t;t=tt(t)}if(C(t)){var e={};return t.__iterate(function(t,i){e[i]=_i(t)}),e}var i=[];return t.__iterate(function(t){i.push(_i(t))}),i}var Vi=function(t){function e(e){return void 0===e||null===e?Xi():Di(e)&&!Y(e)?e:Xi().withMutations(function(i){var s=t(e);re(s.size),s.forEach(function(t){return i.add(t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(L(t).keySeq())},e.intersect=function(t){return(t=B(t).toArray()).length?Oi.intersect.apply(e(t.pop()),t):Xi()},e.union=function(t){return(t=B(t).toArray()).length?Oi.union.apply(e(t.pop()),t):Xi()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(t){return this._map.has(t)},e.prototype.add=function(t){return Yi(this,this._map.set(t,t))},e.prototype.remove=function(t){return Yi(this,this._map.remove(t))},e.prototype.clear=function(){return Yi(this,this._map.clear())},e.prototype.map=function(t,e){var i=this,s=!1,r=Yi(this,this._map.mapEntries(function(r){var n=r[1],o=t.call(e,n,n,i);return o!==n&&(s=!0),[o,o]},e));return s?r:this},e.prototype.union=function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];return e=e.filter(function(t){return 0!==t.size}),0===e.length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations(function(i){for(var s=0;s<e.length;s++)"string"===typeof e[s]?i.add(e[s]):t(e[s]).forEach(function(t){return i.add(t)})}):this.constructor(e[0])},e.prototype.intersect=function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];if(0===e.length)return this;e=e.map(function(e){return t(e)});var s=[];return this.forEach(function(t){e.every(function(e){return e.includes(t)})||s.push(t)}),this.withMutations(function(t){s.forEach(function(e){t.remove(e)})})},e.prototype.subtract=function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];if(0===e.length)return this;e=e.map(function(e){return t(e)});var s=[];return this.forEach(function(t){e.some(function(e){return e.includes(t)})&&s.push(t)}),this.withMutations(function(t){s.forEach(function(e){t.remove(e)})})},e.prototype.sort=function(t){return hs(jt(this,t))},e.prototype.sortBy=function(t,e){return hs(jt(this,e,t))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(t,e){var i=this;return this._map.__iterate(function(e){return t(e,e,i)},e)},e.prototype.__iterator=function(t,e){return this._map.__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):0===this.size?this.__empty():(this.__ownerID=t,this._map=e,this)},e}(z);Vi.isSet=Di;var Ni,Oi=Vi.prototype;function Yi(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function Gi(t,e){var i=Object.create(Oi);return i.size=t?t.size:0,i._map=t,i.__ownerID=e,i}function Xi(){return Ni||(Ni=Gi(Je()))}Oi[Li]=!0,Oi[c]=Oi.remove,Oi.merge=Oi.concat=Oi.union,Oi.withMutations=De,Oi.asImmutable=Ie,Oi["@@transducer/init"]=Oi.asMutable=ze,Oi["@@transducer/step"]=function(t,e){return t.add(e)},Oi["@@transducer/result"]=function(t){return t.asImmutable()},Oi.__empty=Xi,Oi.__make=Gi;var Ui,Hi=function(t){function e(t,i,s){if(!(this instanceof e))return new e(t,i,s);if(se(0!==s,"Cannot step a Range by 0"),t=t||0,void 0===i&&(i=1/0),s=void 0===s?1:Math.abs(s),i<t&&(s=-s),this._start=t,this._end=i,this._step=s,this.size=Math.max(0,Math.ceil((i-t)/s-1)+1),0===this.size){if(Ui)return Ui;Ui=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},e.prototype.get=function(t,e){return this.has(t)?this._start+m(this,t)*this._step:e},e.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},e.prototype.slice=function(t,i){return x(t,i,this.size)?this:(t=b(t,this.size),(i=S(i,this.size))<=t?new e(0,0):new e(this.get(t,this._end),this.get(i,this._end),this._step))},e.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step===0){var i=e/this._step;if(i>=0&&i<this.size)return i}return-1},e.prototype.lastIndexOf=function(t){return this.indexOf(t)},e.prototype.__iterate=function(t,e){for(var i=this.size,s=this._step,r=e?this._start+(i-1)*s:this._start,n=0;n!==i&&!1!==t(r,e?i-++n:n++,this);)r+=e?-s:s;return n},e.prototype.__iterator=function(t,e){var i=this.size,s=this._step,r=e?this._start+(i-1)*s:this._start,n=0;return new H(function(){if(n===i)return{value:void 0,done:!0};var o=r;return r+=e?-s:s,j(t,e?i-++n:n++,o)})},e.prototype.equals=function(t){return t instanceof e?this._start===t._start&&this._end===t._end&&this._step===t._step:Ii(this,t)},e}(it);function ji(t,e,i){for(var s=ne(e),r=0;r!==s.length;)if((t=ue(t,s[r++],f))===f)return i;return t}function Wi(t,e){return ji(this,t,e)}function Zi(t,e){return ji(t,e,f)!==f}function Ji(){re(this.size);var t={};return this.__iterate(function(e,i){t[i]=e}),t}B.isIterable=w,B.isKeyed=C,B.isIndexed=F,B.isAssociative=P,B.isOrdered=Y,B.Iterator=H,Ri(B,{toArray:function(){re(this.size);var t=new Array(this.size||0),e=C(this),i=0;return this.__iterate(function(s,r){t[i++]=e?[r,s]:s}),t},toIndexedSeq:function(){return new Rt(this)},toJS:function(){return _i(this)},toKeyedSeq:function(){return new It(this,!0)},toMap:function(){return _e(this.toKeyedSeq())},toObject:Ji,toOrderedMap:function(){return Si(this.toKeyedSeq())},toOrderedSet:function(){return hs(C(this)?this.valueSeq():this)},toSet:function(){return Vi(C(this)?this.valueSeq():this)},toSetSeq:function(){return new _t(this)},toSeq:function(){return F(this)?this.toIndexedSeq():C(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Ci(C(this)?this.valueSeq():this)},toList:function(){return ai(C(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return qt(this,function(t,e){var i=C(t),s=[t].concat(e).map(function(t){return w(t)?i&&(t=L(t)):t=i?lt(t):ct(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===s.length)return t;if(1===s.length){var r=s[0];if(r===t||i&&C(r)||F(t)&&F(r))return r}var n=new rt(s);return i?n=n.toKeyedSeq():F(t)||(n=n.toSetSeq()),(n=n.flatten(!0)).size=s.reduce(function(t,e){if(void 0!==t){var i=e.size;if(void 0!==i)return t+i}},0),n}(this,t))},includes:function(t){return this.some(function(e){return yt(e,t)})},entries:function(){return this.__iterator(2)},every:function(t,e){re(this.size);var i=!0;return this.__iterate(function(s,r,n){if(!t.call(e,s,r,n))return i=!1,!1}),i},filter:function(t,e){return qt(this,Gt(this,t,e,!0))},partition:function(t,e){return function(t,e,i){var s=C(t),r=[[],[]];t.__iterate(function(n,o){r[e.call(i,n,o,t)?1:0].push(s?[o,n]:n)});var n=Kt(t);return r.map(function(e){return qt(t,n(e))})}(this,t,e)},find:function(t,e,i){var s=this.findEntry(t,e);return s?s[1]:i},forEach:function(t,e){return re(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){re(this.size),t=void 0!==t?""+t:",";var e="",i=!0;return this.__iterate(function(s){i?i=!1:e+=t,e+=null!==s&&void 0!==s?s.toString():""}),e},keys:function(){return this.__iterator(0)},map:function(t,e){return qt(this,Ot(this,t,e))},reduce:function(t,e,i){return ts(this,t,e,i,arguments.length<2,!1)},reduceRight:function(t,e,i){return ts(this,t,e,i,arguments.length<2,!0)},reverse:function(){return qt(this,Yt(this,!0))},slice:function(t,e){return qt(this,Xt(this,t,e,!0))},some:function(t,e){re(this.size);var i=!1;return this.__iterate(function(s,r,n){if(t.call(e,s,r,n))return i=!0,!1}),i},sort:function(t){return qt(this,jt(this,t))},values:function(){return this.__iterator(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return y(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,i){var s=_e().asMutable();return t.__iterate(function(r,n){s.update(e.call(i,r,n,t),0,function(t){return t+1})}),s.asImmutable()}(this,t,e)},equals:function(t){return Ii(this,t)},entrySeq:function(){var t=this;if(t._cache)return new rt(t._cache);var e=t.toSeq().map(is).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(ss(t),e)},findEntry:function(t,e,i){var s=i;return this.__iterate(function(i,r,n){if(t.call(e,i,r,n))return s=[r,i],!1}),s},findKey:function(t,e){var i=this.findEntry(t,e);return i&&i[0]},findLast:function(t,e,i){return this.toKeyedSeq().reverse().find(t,e,i)},findLastEntry:function(t,e,i){return this.toKeyedSeq().reverse().findEntry(t,e,i)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(t){return this.find(v,null,t)},flatMap:function(t,e){return qt(this,function(t,e,i){var s=Kt(t);return t.toSeq().map(function(r,n){return s(e.call(i,r,n,t))}).flatten(!0)}(this,t,e))},flatten:function(t){return qt(this,Ht(this,t,!0))},fromEntrySeq:function(){return new Vt(this)},get:function(t,e){return this.find(function(e,i){return yt(i,t)},void 0,e)},getIn:Wi,groupBy:function(t,e){return function(t,e,i){var s=C(t),r=(Y(t)?Si():_e()).asMutable();t.__iterate(function(n,o){r.update(e.call(i,n,o,t),function(t){return(t=t||[]).push(s?[o,n]:n),t})});var n=Kt(t);return r.map(function(e){return qt(t,n(e))}).asImmutable()}(this,t,e)},has:function(t){return this.get(t,f)!==f},hasIn:function(t){return Zi(this,t)},isSubset:function(t){return t="function"===typeof t.includes?t:B(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return(t="function"===typeof t.isSubset?t:B(t)).isSubset(this)},keyOf:function(t){return this.findKey(function(e){return yt(e,t)})},keySeq:function(){return this.toSeq().map(es).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Wt(this,t)},maxBy:function(t,e){return Wt(this,e,t)},min:function(t){return Wt(this,t?rs(t):os)},minBy:function(t,e){return Wt(this,e?rs(e):os,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,e){return qt(this,Ut(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(ss(t),e)},sortBy:function(t,e){return qt(this,jt(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,e){return qt(this,function(t,e,i){var s=$t(t);return s.__iterateUncached=function(s,r){var n=this;if(r)return this.cacheResult().__iterate(s,r);var o=0;return t.__iterate(function(t,r,a){return e.call(i,t,r,a)&&++o&&s(t,r,n)}),o},s.__iteratorUncached=function(s,r){var n=this;if(r)return this.cacheResult().__iterator(s,r);var o=t.__iterator(2,r),a=!0;return new H(function(){if(!a)return{value:void 0,done:!0};var t=o.next();if(t.done)return t;var r=t.value,h=r[0],l=r[1];return e.call(i,l,h,n)?2===s?t:j(s,h,l,t):(a=!1,{value:void 0,done:!0})})},s}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(ss(t),e)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=Y(t),i=C(t),s=e?1:0,r=t.__iterate(i?e?function(t,e){s=31*s+as(bt(t),bt(e))|0}:function(t,e){s=s+as(bt(t),bt(e))|0}:e?function(t){s=31*s+bt(t)|0}:function(t){s=s+bt(t)|0});return function(t,e){return e=mt(e,3432918353),e=mt(e<<15|e>>>-15,461845907),e=mt(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=mt(e^e>>>16,2246822507),e=mt(e^e>>>13,3266489909),e=vt(e^e>>>16),e}(r,s)}(this))}});var qi=B.prototype;qi[k]=!0,qi[U]=qi.values,qi.toJSON=qi.toArray,qi.__toStringMapper=le,qi.inspect=qi.toSource=function(){return this.toString()},qi.chain=qi.flatMap,qi.contains=qi.includes,Ri(L,{flip:function(){return qt(this,Nt(this))},mapEntries:function(t,e){var i=this,s=0;return qt(this,this.toSeq().map(function(r,n){return t.call(e,[n,r],s++,i)}).fromEntrySeq())},mapKeys:function(t,e){var i=this;return qt(this,this.toSeq().flip().map(function(s,r){return t.call(e,s,r,i)}).flip())}});var Qi=L.prototype;Qi[M]=!0,Qi[U]=qi.entries,Qi.toJSON=Ji,Qi.__toStringMapper=function(t,e){return le(e)+": "+le(t)},Ri(D,{toKeyedSeq:function(){return new It(this,!1)},filter:function(t,e){return qt(this,Gt(this,t,e,!1))},findIndex:function(t,e){var i=this.findEntry(t,e);return i?i[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return qt(this,Yt(this,!1))},slice:function(t,e){return qt(this,Xt(this,t,e,!1))},splice:function(t,e){var i=arguments.length;if(e=Math.max(e||0,0),0===i||2===i&&!e)return this;t=b(t,t<0?this.count():this.size);var s=this.slice(0,t);return qt(this,1===i?s:s.concat(ie(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var i=this.findLastEntry(t,e);return i?i[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return qt(this,Ht(this,t,!1))},get:function(t,e){return(t=m(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find(function(e,i){return i===t},void 0,e)},has:function(t){return(t=m(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return qt(this,function(t,e){var i=$t(t);return i.size=t.size&&2*t.size-1,i.__iterateUncached=function(i,s){var r=this,n=0;return t.__iterate(function(t){return(!n||!1!==i(e,n++,r))&&!1!==i(t,n++,r)},s),n},i.__iteratorUncached=function(i,s){var r,n=t.__iterator(1,s),o=0;return new H(function(){return(!r||o%2)&&(r=n.next()).done?r:o%2?j(i,o++,e):j(i,o++,r.value,r)})},i}(this,t))},interleave:function(){var t=[this].concat(ie(arguments)),e=Jt(this.toSeq(),it.of,t),i=e.flatten(!0);return e.size&&(i.size=e.size*t.length),qt(this,i)},keySeq:function(){return Hi(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,e){return qt(this,Ut(this,t,e,!1))},zip:function(){return qt(this,Jt(this,ns,[this].concat(ie(arguments))))},zipAll:function(){return qt(this,Jt(this,ns,[this].concat(ie(arguments)),!0))},zipWith:function(t){var e=ie(arguments);return e[0]=this,qt(this,Jt(this,t,e))}});var Ki=D.prototype;Ki[T]=!0,Ki[O]=!0,Ri(z,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}});var $i=z.prototype;function ts(t,e,i,s,r,n){return re(t.size),t.__iterate(function(t,n,o){r?(r=!1,i=t):i=e.call(s,i,t,n,o)},n),i}function es(t,e){return e}function is(t,e){return[e,t]}function ss(t){return function(){return!t.apply(this,arguments)}}function rs(t){return function(){return-t.apply(this,arguments)}}function ns(){return ie(arguments)}function os(t,e){return t<e?1:t>e?-1:0}function as(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}$i.has=qi.includes,$i.contains=$i.includes,$i.keys=$i.values,Ri(et,Qi),Ri(it,Ki),Ri(st,$i);var hs=function(t){function e(t){return void 0===t||null===t?ds():zi(t)?t:ds().withMutations(function(e){var i=z(t);re(i.size),i.forEach(function(t){return e.add(t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(L(t).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(Vi);hs.isOrderedSet=zi;var ls,cs=hs.prototype;function us(t,e){var i=Object.create(cs);return i.size=t?t.size:0,i._map=t,i.__ownerID=e,i}function ds(){return ls||(ls=us(Ei()))}cs[O]=!0,cs.zip=Ki.zip,cs.zipWith=Ki.zipWith,cs.zipAll=Ki.zipAll,cs.__empty=ds,cs.__make=us;var fs=function(t,e){var i;!function(t){if(V(t))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(N(t))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(null===t||"object"!==typeof t)throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}(t);var s=function(n){var o=this;if(n instanceof s)return n;if(!(this instanceof s))return new s(n);if(!i){i=!0;var a=Object.keys(t),h=r._indices={};r._name=e,r._keys=a,r._defaultValues=t;for(var l=0;l<a.length;l++){var c=a[l];h[c]=l,r[c]?"object"===typeof console&&console.warn&&console.warn("Cannot define "+ys(this)+' with property "'+c+'" since that property name is part of the Record API.'):vs(r,c)}}return this.__ownerID=void 0,this._values=ai().withMutations(function(t){t.setSize(o._keys.length),L(n).forEach(function(e,i){t.set(o._indices[i],e===o._defaultValues[i]?void 0:e)})}),this},r=s.prototype=Object.create(gs);return r.constructor=s,e&&(s.displayName=e),s};fs.prototype.toString=function(){for(var t,e=ys(this)+" { ",i=this._keys,s=0,r=i.length;s!==r;s++)e+=(s?", ":"")+(t=i[s])+": "+le(this.get(t));return e+" }"},fs.prototype.equals=function(t){return this===t||V(t)&&ms(this).equals(ms(t))},fs.prototype.hashCode=function(){return ms(this).hashCode()},fs.prototype.has=function(t){return this._indices.hasOwnProperty(t)},fs.prototype.get=function(t,e){if(!this.has(t))return e;var i=this._indices[t],s=this._values.get(i);return void 0===s?this._defaultValues[t]:s},fs.prototype.set=function(t,e){if(this.has(t)){var i=this._values.set(this._indices[t],e===this._defaultValues[t]?void 0:e);if(i!==this._values&&!this.__ownerID)return ps(this,i)}return this},fs.prototype.remove=function(t){return this.set(t)},fs.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:ps(this,t)},fs.prototype.wasAltered=function(){return this._values.wasAltered()},fs.prototype.toSeq=function(){return ms(this)},fs.prototype.toJS=function(){return _i(this)},fs.prototype.entries=function(){return this.__iterator(2)},fs.prototype.__iterator=function(t,e){return ms(this).__iterator(t,e)},fs.prototype.__iterate=function(t,e){return ms(this).__iterate(t,e)},fs.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._values.__ensureOwner(t);return t?ps(this,e,t):(this.__ownerID=t,this._values=e,this)},fs.isRecord=V,fs.getDescriptiveName=ys;var gs=fs.prototype;function ps(t,e,i){var s=Object.create(Object.getPrototypeOf(t));return s._values=e,s.__ownerID=i,s}function ys(t){return t.constructor.displayName||t.constructor.name||"Record"}function ms(t){return lt(t._keys.map(function(e){return[e,t.get(e)]}))}function vs(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){se(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}catch(i){}}gs[_]=!0,gs[c]=gs.remove,gs.deleteIn=gs.removeIn=be,gs.getIn=Wi,gs.hasIn=qi.hasIn,gs.merge=ke,gs.mergeWith=we,gs.mergeIn=Be,gs.mergeDeep=Fe,gs.mergeDeepWith=Pe,gs.mergeDeepIn=Le,gs.setIn=ve,gs.update=Ae,gs.updateIn=Ee,gs.withMutations=De,gs.asMutable=ze,gs.asImmutable=Ie,gs[U]=gs.entries,gs.toJSON=gs.toObject=qi.toObject,gs.inspect=gs.toSource=function(){return this.toString()};var xs=i(85);class bs{constructor(){this.o=!0}u(){return this.o}}class Ss extends bs{constructor(t,e){super(),this.S=t,this.M=t,this.o=e}_(t){return t!==this.S&&(this.M=this.S,this.S=t,this.o=!0),this}C(){return this.S}u(){return super.u()}}const As=(t,e)=>({x:t,y:e}),Es=(t,e)=>({x:t,y:e}),ks=(t,e,i)=>({position:t,high:e,low:i}),ws=(t,e,i)=>({x:t,y:e,z:i}),Ms=t=>{const e=Array(0),i=Array(0);return t.length>0&&t.forEach(t=>{e.push(As(t.position,t.high)),i.push(As(t.position,t.low))}),[e,i]},Cs=(t,e)=>({min:t,max:e}),Ts=(t,e,i,s)=>({x:t,y:e,width:i,height:s}),Fs=function(t){return new Ss(t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])},Ps=function(){return{left:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,top:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,right:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,bottom:arguments.length>3&&void 0!==arguments[3]?arguments[3]:0}},Bs=Ps,Ls=(t,e)=>({left:void 0!==e.left?e.left:t.left,top:void 0!==e.top?e.top:t.top,right:void 0!==e.right?e.right:t.right,bottom:void 0!==e.bottom?e.bottom:t.bottom}),Ds=fs({type:"color",r:1,g:1,b:1,a:1});class zs extends Ds{constructor(t){super(t)}toUint32(){return void 0!==this.T||(this.T=Ys(this.getR(),this.getG(),this.getB(),this.getA())),this.T}toString(){return"color:".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.a)}setA(t){return this.set("a",t/255)}setR(t){return this.set("r",t/255)}setG(t){return this.set("g",t/255)}setB(t){return this.set("b",t/255)}getA(){return 255*this.get("a")}getR(){return 255*this.get("r")}getG(){return 255*this.get("g")}getB(){return 255*this.get("b")}getHighlight(){return this.F||(this.F=new zs({r:this.r+.45*(1-this.r),g:this.g+.45*(1-this.g),b:this.b+.45*(1-this.b),a:this.a<1?this.a+.45*(1-this.a):1})),this.F}getLighter(){return this.I||(this.I=new zs({r:this.r+.4*(1-this.r),g:this.g+.4*(1-this.g),b:this.b+.4*(1-this.b),a:this.a})),this.I}getDarker(){return this.P||(this.P=new zs({r:this.r-.4*(1-this.r),g:this.g-.4*(1-this.g),b:this.b-.4*(1-this.b),a:this.a})),this.P}toRGBAString(){return"rgba(".concat((255*this.r).toFixed(0),",").concat((255*this.g).toFixed(0),",").concat((255*this.b).toFixed(0),",").concat(this.a,")")}}const Is=t=>!(!t||"object"!=typeof t||!("type"in t)||"color"!==t.type),Rs=function(t,e,i){return new zs({r:t/255,g:e/255,b:i/255,a:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:255)/255})},_s=t=>{const e=t.startsWith("#")?t.substring(1):t.startsWith("0x")?t.substr(2):t;switch(e.length){case 8:return new zs({r:Number("0x".concat(e.substring(0,2)))/255,g:Number("0x".concat(e.substring(2,4)))/255,b:Number("0x".concat(e.substring(4,6)))/255,a:Number("0x".concat(e.substring(6,8)))/255});case 6:return new zs({r:Number("0x".concat(e.substring(0,2)))/255,g:Number("0x".concat(e.substring(2,4)))/255,b:Number("0x".concat(e.substring(4,6)))/255});case 4:return new zs({r:Number("0x".concat(e.charAt(0)).concat(e.charAt(0)))/255,g:Number("0x".concat(e.charAt(1)).concat(e.charAt(1)))/255,b:Number("0x".concat(e.charAt(2)).concat(e.charAt(2)))/255,a:Number("0x".concat(e.charAt(3)).concat(e.charAt(3)))/255});case 3:return new zs({r:Number("0x".concat(e.charAt(0)).concat(e.charAt(0)))/255,g:Number("0x".concat(e.charAt(1)).concat(e.charAt(1)))/255,b:Number("0x".concat(e.charAt(2)).concat(e.charAt(2)))/255});default:throw new Error("ColorHEX parsing error | input: ".concat(t))}},Vs=function(t){let e,i,s,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t/=360;const o=Math.floor(6*t),a=6*t-o,h=n*(1-r),l=n*(1-a*r),c=n*(1-(1-a)*r);switch(o%6){case 0:e=n,i=c,s=h;break;case 1:e=l,i=n,s=h;break;case 2:e=h,i=n,s=c;break;case 3:e=h,i=l,s=n;break;case 4:e=c,i=h,s=n;break;default:e=n,i=h,s=l}return new zs({r:e,g:i,b:s})},Ns=new zs({}),Os=Rs(0,0,0,0),Ys=function(t,e,i){return((arguments.length>3&&void 0!==arguments[3]?arguments[3]:255)<<24|i<<16|e<<8|t)>>>0};var Gs,Xs,Us;(Us=Gs||(Gs={})).circle="circle",Us.ellipse="ellipse",function(t){t.closestSide="closest-side",t.closestCorner="closest-corner",t.farthestSide="farthest-side",t.farthestCorner="farthest-corner"}(Xs||(Xs={}));const Hs=fs({type:"fillstyle",fillType:"radial-gradient",ditheringEnabled:!0,stops:[{color:_s("#f00"),offset:0},{color:_s("#0f0"),offset:1}],position:As(.5,.5),shape:Gs.ellipse,extent:Xs.farthestCorner});class js extends Hs{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("RadialGradientFill requires minimum two color stops to be defined.")}toString(){return"radialGradientFill:".concat(this.shape,",").concat(this.ditheringEnabled,",").concat(this.extent,",").concat(this.position.x,",").concat(this.position.y,",").concat(this.stops.map(t=>"".concat(t.offset,",").concat(t.color.toString())).join(","))}toCSS(){return"radial-gradient(".concat(this.shape," ").concat(this.extent," at ").concat(100*this.position.x,"% ").concat(100*this.position.y,"%, ").concat(this.stops.map(t=>"".concat(t.color.toString()," ").concat(100*t.offset,"%")).join(", "),")")}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");return this.set("stops",t)}getColorStops(){return this.get("stops")}setPosition(t){return this.set("position",t)}getPosition(){return this.get("position")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}setExtent(t){return this.set("extent",t)}getExtent(){return this.get("extent")}setDitheringEnabled(t){return this.set("ditheringEnabled",t)}getDitheringEnabled(){return this.get("ditheringEnabled")}}const Ws=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"radial-gradient"===t.fillType),Zs=fs({type:"fillstyle",fillType:"linear-gradient",stops:[{color:_s("#f00"),offset:0},{color:_s("#0f0"),offset:1}],angle:0});class Js extends Zs{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("LinearGradientFill requires minimum two color stops to be defined.")}toString(){return"linearGradientFill:".concat(this.angle,",").concat(this.stops.map(t=>"".concat(t.offset,",").concat(t.color.toString())).join(","))}toCSS(){return"linear-gradient(".concat(this.angle,"deg, ").concat(this.stops.map(t=>"".concat(t.color.toString()," ").concat(100*t.offset,"%")).join(", "),")")}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");const e=t.sort((t,e)=>t.offset-e.offset);return this.set("stops",e)}getColorStops(){return this.get("stops")}setAngle(t,e){return this.set("angle",e?function(t){return 180*t/Math.PI}(t):t)}getAngle(t){return t?No(this.get("angle")):this.get("angle")}}const qs=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"linear-gradient"===t.fillType);class Qs{constructor(t,e,i,s){this.L=new Ar,this.cellIndex=t,this.cellSpan=e,this.cellsAmount=i,this.observedAmount=s,this.x=new Ks,this.y=new Ks,this.z=new Ks;const r=l({},t),n=l({},e);if(s){const t=t=>{const e=t.value;this.cellsAmount.x=e.reduce(go,0),this.cellIndex.x=e.reduce((t,e,i)=>i>=r.x?t:t+e,0),this.cellSpan.x=e.reduce((t,e,i)=>i>=r.x&&i<r.x+n.x?t+e:t,0),this.L.D("cellresize",{})};s.x.R("change",t),t({value:s.x.C()});const e=t=>{const e=t.value;this.cellsAmount.y=e.reduce(go,0),this.cellIndex.y=e.reduce((t,e,i)=>i>=r.y?t:t+e,0),this.cellSpan.y=e.reduce((t,e,i)=>i>=r.y&&i<r.y+n.y?t+e:t,0),this.L.D("cellresize",{})};s.y.R("change",e),e({value:s.y.C()}),this.O=()=>{s.x.V("change",t),s.y.V("change",e)}}}N(){return this.O&&(this.O(),this.O=void 0),this}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class Ks extends bs{constructor(){super(...arguments),this.G=0,this.$=10,this.U=1}Y(){return this.o=!1,this}j(){return this.o=!0,this}getInnerStart(){return this.G}getInnerEnd(){return this.$}getInnerInterval(){return Math.abs(this.getInnerEnd()-this.getInnerStart())}H(t,e){return this.G=t,this.$=e,this.W(),this}X(t){return this.U=t,this.W(),this}Z(t){return t/this.U}W(){const t=this.Z(this.$-this.G),e=this.U;void 0!==this.J&&!1!==qr(t,this.J)||(this.o=!0,this.K=e,this.J=t)}q(){return this.J}tt(){return this.K}it(){return this.$<this.G}st(t,e){return!0}}class $s{constructor(){this.et=!0}getInnerStart(){return this.G}getInnerEnd(){return this.$}getInnerInterval(){return Math.abs(this.$-this.G)}H(t,e){return this.et=t!==this.G||e!==this.$,this.G=t,this.$=e,this}Y(){return this.et=!1,this}j(){return this.et=!0,this}}class tr extends $s{constructor(t,e,i,s){if(super(),this.ht=!0,this.rt=!0,this.nt=[0,0],this.ot=!0,this.ct=t,this.ut=e,this.dt=i,this.ft=t,this.At=e,s){const t=t=>{this.vt(t.value)};s.R("change",t),this.vt(s.C()),this.yt=()=>s.V("change",t)}}X(t){return this.U=t,this.rt=!0,this}St(t){return this.nt=t.map(Math.abs),this.ot=!0,this}bt(){return this.ct/this.dt*this.U+this.nt[0]}xt(){return(this.ct+this.ut)/this.dt*this.U-this.nt[1]}Mt(){return this.getCellSize()-this.wt()}_t(){return this.U}getCellSize(){return this.kt(this.U)}wt(){return this.nt[0]+this.nt[1]}Ct(){return this.nt}vt(t){this.dt=t.reduce(go,0),this.ct=t.reduce((t,e,i)=>i>=this.ft?t:t+e,0),this.ut=t.reduce((t,e,i)=>i>=this.ft&&i<this.ft+this.At?t+e:t,0),this.ht=!0,this.Tt()}kt(t){return t*this.ut/this.dt}Y(){return super.Y(),this.rt=!1,this.ot=!1,this.ht=!1,this}j(){return super.j(),this.rt=!0,this.ot=!0,this.ht=!0,this}}class er extends tr{constructor(t,e,i,s){super(t,e,i,s),this.Ft=!1,this.It=!1,this.Pt=0,this.U=1e3,this.H(0,10),this.W()}Lt(){return this.It}st(t,e,i,s,r){if(t===e)return!1;const n=Math.abs(s-i),o=Math.abs(e-t);if(!this.Ft){const i=An(t,e,this.getCellSize());if(void 0===i)return!1;if(o>i)return!0;const s=(e+t)/2,a=(r?i/2:n/2)*(t>e?-1:1);return{start:s-a,end:s+a}}const a=10**-(12-Math.log10(Math.max(Math.abs(t),1)));if(o>a)return!0;const h=(e+t)/2,l=(r?a/2:n/2)*(t>e?-1:1);return{start:h-l,end:h+l}}Tt(){this.W()}Bt(t){return this.bt()+(t-this.G)/(this.$-this.G)*(this.xt()-this.bt())}Dt(t){return this.G+(t-this.bt())/(this.xt()-this.bt())*(this.$-this.G)}H(t,e){return super.H(t,e),this.W(),this}St(t){return super.St(t),this.W(),this}X(t){return super.X(t),this.Rt=ir(this.$-this.G,this.nt,this.U,this.ut,this.dt),this.W(),this}Et(){return this.Ft=!0,this}Ot(){return this.Ft}zt(){return Math.abs(this.Vt)}Nt(){return this.zt()/this.Rt}Gt(){return this.$t}Ut(){return this.Yt}getPixelSize(){return this.Rt}jt(){return this.Ht}j(){return super.j(),this.It=!0,this}Y(){return super.Y(),this.It=!1,this}Wt(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:qo.Numeric)(t,{start:this.G,end:this.$})}Xt(){const t=Math.abs(this.getInnerEnd()).toString().length,e=Math.abs(this.getInnerStart()).toString().length;return t>e?t:e}Zt(t){return ir(t,this.nt,this.U,this.ut,this.dt)}W(){let t=this.G,e=this.$,i=0;this.Ft&&(t=0,e=this.$-this.G,i=this.G);const s=e-t,r=ir(s,this.nt,this.U,this.ut,this.dt);this.Yt=t-this.nt[0]*r,this.$t=e+this.nt[1]*r;const n=this.$t-this.Yt,o=n-this.Vt,a=Math.abs(o/r),h=s-this.Pt,l=Math.abs(h/r);(!this.Ht||a>=.4||l>=.4)&&(this.Pt=s,this.Vt=n,this.Rt=r,this.It=!0);const c=this.Vt*this.dt/(2*this.ut),u=-(this.Yt-this.Vt*this.ct/this.ut)-c,d=2*this.bt()/this.U-1,f=2*this.xt()/this.U-1-d;this.Ht={displacement:u,scaling:c,highPrecisionOffset:i,viewportStart:d,viewportSize:f,scaleStartLog:0,scaleIntervalLog:0}}Jt(t,e){return t+this.Rt*e}}const ir=function(t,e,i){return t/(i*(arguments.length>3&&void 0!==arguments[3]?arguments[3]:1)/(arguments.length>4&&void 0!==arguments[4]?arguments[4]:1)-(e[0]+e[1]))};class sr{Qt(t,e){return"x"in t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),this}Y(){return this.x.Y(),this.y.Y(),this}j(){return this.x.j(),this.y.j(),this}X(t,e){return"object"==typeof t?(this.x.X(t.x),this.y.X(t.y)):(this.x.X(t),this.y.X(e)),this}_t(){return As(this.x._t(),this.y._t())}Kt(t){return this.x.St(t),this}qt(t){return this.y.St(t),this}wt(){return As(this.x.wt(),this.y.wt())}ti(t,e){return this.x.H(t,e),this}ii(t,e){return this.y.H(t,e),this}getInnerIntervalPixels(){const t=this.x.getCellSize(),e=this.y.getCellSize();return{x:t-this.x.wt(),y:e-this.y.wt()}}si(){return this.x.Lt()||this.y.Lt()}}class rr extends sr{constructor(){super(...arguments),this.ei="LinearScaleXY"}hi(t,e,i,s){return this.x=new er(t.x,e.x,i.x,s?s.x:void 0),this.y=new er(t.y,e.y,i.y,s?s.y:void 0),this}Ot(){return this.x.Ot()||this.y.Ot()}ri(){return As(this.x.getPixelSize(),this.y.getPixelSize())}jt(){return{x:this.x.jt(),y:this.y.jt()}}Jt(t,e){const i=this.ri();return{x:t.x+e.x*i.x,y:t.y+e.y*i.y}}ni(t,e,i,s){const r=this.ri(),n=Fo(t,e);return n.x*=s,n.y*=s,{x:t.x+i*r.x*n.x,y:t.y+i*r.y*n.y}}}class nr extends sr{constructor(){super(...arguments),this.ei="MixedScaleXY"}Ot(){return!1}Jt(t,e){const i=this.x.Bt(t.x),s=this.y.Bt(t.y),r={x:i+e.x,y:s+e.y};return{x:this.x.Dt(r.x),y:this.y.Dt(r.y)}}ni(t,e,i,s){const r={x:this.x.Bt(t.x),y:this.y.Bt(t.y)},n={x:this.x.Bt(e.x),y:this.y.Bt(e.y)},o=To(Do(n,r)),a=Fo(n,r),h={x:r.x+o.x*s+a.x*i,y:r.y+o.y*s+a.y*i};return{x:this.x.Dt(h.x),y:this.y.Dt(h.y)}}jt(){const t=this.x.jt(),e=this.y.jt();return{uScaleStart:[this.x.G,this.y.G],uScaleInterval:[this.x.getInnerInterval(),this.y.getInnerInterval()],uScaleStartLog:[t.scaleStartLog,e.scaleStartLog],uScaleIntervalLog:[t.scaleIntervalLog,e.scaleIntervalLog],uViewportStart:[t.viewportStart,e.viewportStart],uViewportSize:[t.viewportSize,e.viewportSize]}}}const or={d1:t=>new t.scale1DConstructor(0,1,1,void 0),d2:t=>(new t.scaleXYConstructor).hi({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0),d3:()=>new Qs({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0)},ar=(t,e,i)=>e===i?t:i.Dt(e.Bt(t)),hr=(t,e,i)=>{if(e===i)return t;const s=e instanceof sr?e.x:e.x instanceof sr?e.x.x:e.x.oi,r=e instanceof sr?e.y:e.y instanceof sr?e.y.y:e.y.oi,n=i instanceof sr?i.x:i.x instanceof sr?i.x.x:i.x.oi,o=i instanceof sr?i.y:i.y instanceof sr?i.y.y:i.y.oi;return l(l({},t),{},{x:ar(t.x,s,n),y:ar(t.y,r,o)})},lr=t=>t&&"object"==typeof t&&"x"in t&&"y"in t,cr=(t,e,i,s)=>i<0?t:i>1?e:Rs(t.getR()+i*(e.getR()-t.getR()),t.getG()+i*(e.getG()-t.getG()),t.getB()+i*(e.getB()-t.getB()),void 0===s?t.getA()+i*(e.getA()-t.getA()):s);var ur;!function(t){t[t.Nearest=0]="Nearest",t[t.NearestX=1]="NearestX",t[t.NearestY=2]="NearestY"}(ur||(ur={}));const dr=(t,e,i,s,r,n,o,a,h,l)=>{const c=t.length;if(0===c)return;const u=s?1:0,d=c-(r?2:1);if(i===ur.Nearest)return fr(t,e,n,o,u,d);if(i===ur.NearestX||i===ur.NearestY){if("boolean"==typeof l&&("x"===h&&i===ur.NearestX||"y"===h&&i===ur.NearestY))return yr(t,hr(e,o,n),h,l,u,d);if(i===ur.NearestX)return gr(t,hr(e,o,n),a,u,d);if(i===ur.NearestY)return pr(t,hr(e,o,n),a,u,d)}},fr=(t,e,i,s,r,n)=>{let o,a=Number.MAX_VALUE;for(let h=r;h<=n;h+=1){const r=t[h];if(!Number.isNaN(r.x)&&!Number.isNaN(r.y)){const t=hr(r,i,s),n=(t.x-e.x)**2+(t.y-e.y)**2;n<a&&(a=n,o=h)}}return o},gr=(t,e,i,s,r)=>{if(e.x<i.min.x||e.x>i.max.x)return;let n,o=Number.MAX_VALUE;for(let a=s;a<=r;a+=1){const i=t[a],s=i.x>e.x?i.x-e.x:e.x-i.x;s<o&&!Number.isNaN(i.x)&&!Number.isNaN(i.y)&&(o=s,n=a)}return n},pr=(t,e,i,s,r)=>{if(e.y<i.min.y||e.y>i.max.y)return;let n,o=Number.MAX_VALUE;for(let a=s;a<=r;a+=1){const i=t[a],s=i.y>e.y?i.y-e.y:e.y-i.y;s<o&&!Number.isNaN(i.x)&&!Number.isNaN(i.y)&&(o=s,n=a)}return n},yr=(t,e,i,s,r,n)=>{const o="x"===i,a=o?e.x:e.y,h=t[r],l=t[n],c=h.x<l.x?h.x:l.x,u=h.y<l.y?h.y:l.y,d=h.x>l.x?h.x:l.x,f=h.y>l.y?h.y:l.y;if(o&&(a<c||a>d)||!o&&(a<u||a>f))return;let g=r,p=Math.floor((r+n)/2),y=n,m=-1;for(;;){const e=a-(o?t[p].x:t[p].y);if(e*(s?-1:1)>0)g=Math.min(p+1,y),m=Math.floor((g+y)/2);else{if(0===Math.abs(e))return p;y=Math.max(p-1,g),m=Math.floor((g+y)/2)}if(m===p){const i=p>r?Math.abs(a-(o?t[p-1].x:t[p-1].y)):ro,s=p<n?Math.abs(a-(o?t[p+1].x:t[p+1].y)):ro,h=Math.abs(e);switch(Math.min(h,i,s)){case i:return p-1;case s:return p+1;default:return p}}else p=m}},mr=(t,e,i,s,r,n)=>{const o="x"===i,a=o?e.x:e.y,h=t[r],l=t[n],c=h.x<l.x?h.x:l.x,u=h.y<l.y?h.y:l.y,d=h.x>l.x?h.x:l.x,f=h.y>l.y?h.y:l.y;if(o&&(a<c||a>d)||!o&&(a<u||a>f))return;let g=r,p=Math.floor((r+n)/2),y=n,m=-1;for(;;){const i=a-(o?t[p].x:t[p].y);if(i*(s?-1:1)>0)g=Math.min(p+1,y),m=Math.floor((g+y)/2);else{if(0===Math.abs(i))return{a:p,b:p,lerpAmount:0};y=Math.max(p-1,g),m=Math.floor((g+y)/2)}if(m===p){if(i*(s?-1:1)<0&&p>r){const i=t[p-1],s=t[p];return{a:p-1,b:p,lerpAmount:o?(e.x-i.x)/(s.x-i.x):(e.y-i.y)/(s.y-i.y)}}if(p<n){const i=t[p],s=t[p+1];return{a:p,b:p+1,lerpAmount:o?(e.x-i.x)/(s.x-i.x):(e.y-i.y)/(s.y-i.y)}}return{a:p,b:p,lerpAmount:0}}p=m}};let vr=0;class xr{constructor(t,e,i){this.li=Fs(!0),this.ci=!1,this.ui=!0,this.di=!1,this.fi=void 0,this.Ai=0,this.L=new Ar,this.gi=t,this.yi=e,this.pi=i,this.mi=vr,vr+=1,this.Si=t.bi.highlightColorOffset}xi(){let t;return this.Mi("DataPattern",e=>(t=e.pattern,!0)),"ProgressiveX"===t||"RegressiveX"===t?ur.NearestX:"ProgressiveY"===t||"RegressiveY"===t?ur.NearestY:ur.Nearest}wi(){}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}D(t,e,i,s){this.L.D(t,e,{collectionMember:i,info:s})}removeEventListener(t,e){this.L.removeEventListener(t,e)}_i(t){return void 0!==this.pi.find(e=>e.type===t)}Mi(t,e){var i;return!!this._i(t)&&!0===e(null===(i=this.pi.find(e=>e.type===t))||void 0===i?void 0:i.args)}dispose(){return this.ci||(this.gi.ki(this),this.ci=!0,this.yi(this),this.L.D("dispose",{})),this}isDisposed(){return this.ci}setVisible(t){const e=this.ui;return this.ui=t,!t&&e&&this.li.C()&&this.gi.ki(this),this}getVisible(){return this.ui}setPointerEvents(t){const e=this.li.C();return this.li._(t),t||e&&this.gi.ki(this),this}getPointerEvents(){return this.li.C()}Ci(t){return this.fi=t,this}Ti(){return this.fi?this.fi:br}Fi(t){return this.Ai=t,this}Ii(){return this.Ai}Pi(t){return this.Si=t,this}Li(){return this.Si}}const br=Cs(As(0,0),As(0,0)),Sr={click:!0,contextmenu:!0,dblclick:!0,gotpointercapture:!0,lostpointercapture:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,wheel:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0};class Ar{constructor(){this.Bi=new Array,this.Di=[],this.li=!0,this.Ri=!1,this.Ei=new Map}setPointerEvents(t){this.li=t,this.Di.forEach(e=>e.setPointerEvents(t))}getPointerEvents(){return this.li}addEventListener(t,e,i){this.Bi.push({listener:e,key:t,options:i||{}})}removeEventListener(t,e){const i=this.Bi.findIndex(t=>t.listener===e);i>=0&&this.Bi.splice(i,1)}set draggable(t){this.Ri=t,this.Di.forEach(e=>{e.di=t})}get draggable(){return this.Ri}D(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const s=this.Bi.slice();for(let r=s.length-1;r>=0;r-=1){const n=s[r];n.key===t&&(n.listener(e,i),!0===n.options.once&&this.removeEventListener(t,n.listener))}}Oi(t,e){const i=[];Object.keys(Sr).forEach(s=>{const r=(t,i)=>{const r=Er(t)?{clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY}:t,n=(null==e?void 0:e.getExtraData)&&void 0!==r.clientX?e.getExtraData(r,i.collectionMember,i.info):{};this.D(s,t,n),!t.defaultPrevented&&(null==e?void 0:e.continueIfNotPrevented)&&e.continueIfNotPrevented(s,t,n)};t.addEventListener(s,r),i.push(()=>t.removeEventListener(s,r))}),this.Di.push(t);const s=()=>{const e=this.Di.indexOf(t);e>=0&&this.Di.splice(e,1)};t.addEventListener("dispose",s),i.push(()=>t.removeEventListener("dispose",s)),this.Ei.set(t,()=>{i.forEach(t=>t())}),t.di=this.Ri,t.setPointerEvents(this.li)}zi(){this.Ei.forEach(t=>t()),this.Ei.clear(),this.Di.length=0}Vi(t,e){const i=[];Object.keys(Sr).forEach(s=>{const r=(t,i)=>{const r=e(i.collectionMember);r&&this.D(s,t,r)};t.addEventListener(s,r),i.push(()=>t.removeEventListener(s,r))}),this.Di.push(t);const s=()=>{const e=this.Di.indexOf(t);e>=0&&this.Di.splice(e,1)};t.addEventListener("dispose",s),i.push(()=>t.removeEventListener("dispose",s)),this.Ei.set(t,()=>{i.forEach(t=>t())}),t.setPointerEvents(this.li),t.di=this.Ri}Ni(t){Object.keys(Sr).forEach(e=>{t.addEventListener(e,(t,i)=>{this.D(e,t,i)})}),t.setPointerEvents(this.li),t.draggable=this.Ri}}const Er=t=>!(!t||"object"!=typeof t||!("touches"in t)),kr={linear:(t,e,i)=>{const s=e-t;return r=>r<i?t+s/i*r:e},easeIn:(t,e,i)=>s=>s<i?t+Math.abs(2*(Math.sqrt(.5)*s/i)**2)*(e-t):e,easeOut:(t,e,i)=>s=>s<i?t+Math.abs(1-2*(Math.sqrt(.5)*(1-s/i))**2)*(e-t):e,ease:(t,e,i)=>s=>s<i?t+(s<i/2?.5*(s/i*2)**2.5:.5+.5*(1-(1-2*(s/i-.5))**2.5))*(e-t):e,logarithmic:t=>{const e=kn(t);return(i,s,r)=>{const n=e(i),o=e(s);return e=>e<r?t**(n+Math.abs(1-2*(Math.sqrt(.5)*(1-e/r))**2)*(o-n)):s}}};class wr{constructor(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:kr.linear,r=arguments.length>4?arguments[4]:void 0;this.delta=0,this.nextAnimations=new Array,this.Gi=!1,this.easing=kr.linear,this.isOver=()=>(this.delta===this.duration||this.Gi)&&0===this.nextAnimations.length,this.L=new Ar,this.values=t,this.action=e,this.duration=i,this.easing=s,this.$i=r,this.eases=t.map(t=>{let[e,r]=t;return s(e,r,i)})}Ui(){this.L.D("start",{})}start(){return this.$i.includes(this)||this.$i.push(this),this}addNextAnimations(t){return t instanceof Array?t.forEach(t=>this.nextAnimations.push(t)):this.nextAnimations.push(t),this}NextAnimation(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.duration,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.easing;const r=new wr(t,e,i,s,this.$i);return this.nextAnimations.push(r),r}finish(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.Gi=!0,this.$i.splice(this.$i.indexOf(this),1),this.nextAnimations.length>0){const e=this.nextAnimations[0];return t&&this.L.Bi.forEach(t=>{"allAnimationEnd"===t.key&&e.addEventListener("allAnimationEnd",t.listener),"everyAnimationEnd"===t.key&&e.addEventListener("everyAnimationEnd",t.listener)}),e.addNextAnimations(this.nextAnimations.slice(1)),e.start(),t&&(this.L.D("end",{nextAnimation:e}),this.L.D("everyAnimationEnd",{nextAnimation:e})),e}t&&(this.L.D("end",{nextAnimation:void 0}),this.L.D("everyAnimationEnd",{nextAnimation:void 0}),this.L.D("allAnimationEnd",{}))}finishAll(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this;for(;e;)e=e.finish(t)}getFinalValues(){return this.nextAnimations.length>0?this.nextAnimations[this.nextAnimations.length-1].values.map(Wr):this.values.map(Wr)}getTimeUntilFinish(){let t=this.duration-this.delta;for(let e=0;e<this.nextAnimations.length;e+=1)t+=this.nextAnimations[e].duration-this.nextAnimations[e].delta;return t}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}const Mr=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;e>60&&console.log("Note: Animator FPS is usually capped at 60 by the browser!");const i=[];let s,r,n=0;const o=()=>{s=void 0;const a=Date.now();r=r||a,n=a-r,n/1e3>=1/e&&(r=Date.now()-n%(1e3/e),i.forEach(t=>{0===t.delta&&t.Ui(),t.delta+=n-n%(1e3/e),t.delta>t.duration&&(t.delta=t.duration),t.action(t.eases.map(e=>e(t.delta))),t.delta===t.duration&&t.finish()}),t()),i.length>0?s=Ur.requestAnimationFrame(o):(s=void 0,r=void 0)};return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kr.linear;return function(r,n){const a=new wr(r,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,e,i).start();return s||(s=Ur.requestAnimationFrame(o)),a}}};var Cr;!function(t){t[t.Fill=0]="Fill",t[t.Fit=1]="Fit",t[t.Stretch=2]="Stretch",t[t.Center=3]="Center",t[t.Tile=4]="Tile"}(Cr||(Cr={}));const Tr=fs({type:"fillstyle",fillType:"image",source:void 0,surroundingColor:Rs(0,0,0,0),sourceMissingColor:Rs(0,0,0,0),fitMode:Cr.Fill});class Fr extends Tr{constructor(t){super(t)}setSource(t){return this.set("source",t)}getSource(){return this.get("source")}setSurroundingColor(t){return Is(t)?this.set("surroundingColor",t):this.set("surroundingColor",t(this.get("surroundingColor")))}getSurroundingColor(){return this.get("surroundingColor")}setSourceMissingColor(t){return Is(t)?this.set("sourceMissingColor",t):this.set("sourceMissingColor",t(this.get("sourceMissingColor")))}getSourceMissingColor(){return this.get("sourceMissingColor")}setFitMode(t){return this.set("fitMode",t)}getFitMode(){return this.get("fitMode")}toString(){return"imagefill:".concat(this.fitMode)}toCSS(){return"url(".concat(this.getSource().src,")")}}const Pr=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"image"===t.fillType),Br=fs({type:"linestyle",lineType:"empty"}),Lr=new class extends Br{constructor(){super(...arguments),this.thickness=0}setThickness(t){return this}getThickness(){return 0}Yi(){return 0}setFillStyle(t){return this}getFillStyle(){return sa}},Dr=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"empty"!==t.lineType),zr=-34028234663852886e22,Ir="-340282346638528859811704183484516925440.0";var Rr,_r,Vr,Nr;!function(t){t[t.Content=0]="Content",t[t.PaddedContent=1]="PaddedContent",t[t.PaddedBackground=2]="PaddedBackground",t[t.Everything=3]="Everything"}(Rr||(Rr={})),function(t){t[t.never=0]="never",t[t.always=1]="always",t[t.whenHovered=2]="whenHovered",t[t.whenDragged=3]="whenDragged",t[t.whenNotDragged=4]="whenNotDragged",t[t.whenHoveredOrDragged=5]="whenHoveredOrDragged"}(_r||(_r={})),function(t){t[t.notDraggable=0]="notDraggable",t[t.draggable=1]="draggable",t[t.onlyHorizontal=2]="onlyHorizontal",t[t.onlyVertical=3]="onlyVertical"}(Vr||(Vr={})),function(t){t[t.Up=0]="Up",t[t.Right=1]="Right",t[t.Down=2]="Down",t[t.Left=3]="Left"}(Nr||(Nr={}));const Or=t=>"getHighlight"in t&&"setHighlight"in t,Yr=(t,e,i)=>void 0===t||"number"==typeof t?t:Array.isArray(t)?t.slice(e,i):t.subarray(e,i),Gr=function(){const t=t=>t&&"object"==typeof t&&!Array.isArray(t);for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return i.reduce((e,i)=>i?(Object.keys(i).forEach(s=>{const r=e[s],n=i[s];t(r)&&t(n)?e[s]=Gr(r,n):e[s]=n}),e):e,{})},Xr=t=>{if(t.resourcesBaseUrl){const e=t.styleFactory(t.resourcesBaseUrl),i=Pr(e)&&e.getSource(),s=i&&i instanceof Image?i:void 0;return null==s||s.addEventListener("error",()=>{Hn(t.resourcesBaseUrl,s.src,"Theme resource",{shouldCrash:!1})}),e}const e="".concat(Ur.location.origin,"/resources"),i=t.styleFactory(e);if(Pr(i)){const e=i.getSource();e instanceof Image&&e.addEventListener("error",()=>{const i=t.styleFactory("https://lcjs-resources.lightningchart.com/v1"),s=Pr(i)&&i.getSource(),r=s&&s instanceof Image?s:void 0;Ur.console.warn("LightningChart JS warning | fallbacking to publicly hosted asset resources.\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/warning-using-publicly-hosted-resources/"),null==r||r.addEventListener("load",()=>{t.apply(i)}),null==r||r.addEventListener("error",()=>{Hn(t.resourcesBaseUrl,e.src,"Theme resource",{shouldCrash:!1})})})}return i},Ur="undefined"!=typeof window?window:"undefined"!=typeof global&&global._lcjs?global._lcjs:{},Hr=(t,e)=>t.x===e.x&&t.y===e.y,jr=t=>t!==ro&&t!==no&&!Number.isNaN(t)&&Number.isFinite(t)&&t!==1/0&&t!==-1/0,Wr=t=>t[1],Zr=t=>t.dispose(),Jr=()=>{},qr=(t,e)=>t===e,Qr=(t,e,i)=>i>e?Math.min(Math.max(t,e),i):Math.min(Math.max(t,i),e),Kr=t=>Array.prototype.concat.apply([],t),$r=(t,e)=>void 0===t||Number.isNaN(t)?e:t,tn=t=>t.ji(),en=t=>t.Hi(),sn=t=>t.Wi(),rn=t=>t.Xi(),nn=t=>t.min.x,on=t=>t.max.x,an=t=>t.min.y,hn=t=>t.max.y,ln=(t,e,i,s,r)=>{if(t.length>0){let n=r?s(r):void 0;for(let s=0;s<t.length;s+=1){const r=e(t[s]);void 0!==r&&(n=void 0!==n?i(n,r):r)}return n}if(r)return s(r)},cn=As(0,1),un=As(1,0),dn=As(0,-1),fn=As(-1,0),gn=As(0,0),pn=t=>{switch(t){case Nr.Up:return cn;case Nr.Right:return un;case Nr.Down:return dn;case Nr.Left:return fn;default:return gn}},yn=t=>t===Nr.Left||t===Nr.Right,mn=t=>{t.stopPropagation(),t.preventDefault()},vn=(t,e)=>{if(!e)return t;const i=t.length,s=new Float32Array(2*i);let r=0;for(let n=0;n<i;n+=1){const e=t[n],i=Math.fround(e);s[r+0]=i,s[r+1]=e-i,r+=2}return s},xn=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float32Array;if(!e){const e=t.length,s=new i(2*e);let r=0;for(let i=0;i<e;i+=1){const e=t[i];s[r+0]=e.x,s[r+1]=e.y,r+=2}return s}const s=t.length,r=new i(4*s);let n=0;for(let o=0;o<s;o+=1){const e=t[o],i=Math.fround(e.x),s=Math.fround(e.y);r[n+0]=i,r[n+1]=s,r[n+2]=e.x-i,r[n+3]=e.y-s,n+=4}return r},bn=t=>{const e=t.length,i=new Float32Array(3*e);let s=0;for(let r=0;r<e;r+=1){const e=t[r];i[s+0]=e.x,i[s+1]=e.y,i[s+2]=e.z,s+=3}return i},Sn=t=>e=>{const i=t.indexOf(e);i>=0&&t.splice(i,1)},An=(t,e,i)=>{const s=((t,e)=>{if(e<ro&&e>no&&t<ro&&t>no){const i=Math.abs(t/2**23),s=Math.abs(e/2**23),r=Math.min(i,s);return 10**Math.floor(Math.log10(r))}})(t,e);if(void 0!==s)return s*i},En=t=>{let e=t.length;for(let i=0;i<e-1;i+=1)t[i].x===t[i+1].x&&t[i].y===t[i+1].y&&(t.splice(i,1),i-=1,e-=1);return t},kn=t=>{const e=Math.log(t);return t=>Math.log(t)/e},wn=kn(Math.E),Mn=(t,e)=>{const i=e[t];return i?i():void 0},Cn=(t,e)=>{let i;if(e)i=e;else{const e={x:0,y:0};for(let i=0;i<t.length;i+=1)e.x+=t[i].x/t.length,e.y+=t[i].y/t.length;i=e}return t.sort((t,e)=>Oo(Do(t,i))-Oo(Do(e,i)))},Tn=(t,e,i)=>{if(0===t.length)return!1===i.canReturnB?e.slice():e;const s=e.length;if(s<1e5)return t.push.apply(t,e),t;for(let r=0;r<s;r+=1)t.push(e[r]);return t},Fn=t=>255===t.getA()?t:t.setA(255),Pn=(()=>{const t=Rs(0,0,0);return e=>(e=Fn(e),new Js({angle:180,stops:[{offset:0,color:e},{offset:1,color:cr(e,t,.5)}]}))})(),Bn=(()=>{const t=(t,e)=>{var i;if(t){if(ha(t)){if(0===t.getColor().getA())return;return t.getColor()}if(Ws(t)||qs(t)){const e=t.getColorStops();return 2===e.length?e[1].color:null===(i=e[0])||void 0===i?void 0:i.color}return fa(t)&&void 0!==e?t.lut.getColors(e,void 0):void 0}};return(e,i,s)=>{var r;const n=[];if(s.fill&&n.push(s.fill),s.fill2&&n.push(s.fill2),s.stroke){const t=s.stroke.getFillStyle();t!==sa&&("stroke"===(null===(r=s.behavior)||void 0===r?void 0:r.priority)?n.unshift(t):n.push(t))}if(s.point3D){const t=s.point3D;n.push(t.getFillStyle())}let o;if(s.behavior&&!0===s.behavior.colorStep){const[i,r]=n.reduce((e,i)=>{if(e[0]&&e[1])return e;const r=t(i,s.lutValue);return r&&(void 0===e[0]?e[0]=r:e[1]=r),e},[void 0,void 0]);o=i&&r?(a=i)===(h=r)||a.getR()===h.getR()&&a.getG()===h.getG()&&a.getB()===h.getB()?Pn(a):(a=Fn(a),h=Fn(h),new Js({angle:0,stops:[{offset:0,color:h},{offset:.5,color:h},{offset:.5,color:a},{offset:1,color:a}]})):e.uiButtonFillStyle}else{const r=n.reduce((e,i)=>e||t(i,s.lutValue),void 0);o=r?i?new aa({color:r}):Pn(r):e.uiButtonFillStyle}var a,h;return o}})(),Ln=(t,e)=>{const i=t;if(fa(i))return{lut:i.getPalette(),lookUpProperty:i.getLookUpProperty(),valueRange:e}},Dn=t=>{let e=0;return()=>(e+=1,"".concat(t,"-").concat(e))},zn=(t,e)=>{let i="string"==typeof t?t:String(t);const s=i.indexOf(".");let r=s>=0?s:i.length;for(;r<e;r+=1)i="0".concat(i);return i},In=(t,e)=>"function"==typeof t?t(e):t,Rn=(t,e)=>e(),_n=()=>new Error("LightningChart JS encountered an unexpected error.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact"),Vn=t=>t===oo||t.min.x===oo.min.x&&t.max.x===oo.max.x&&t.min.y===oo.min.y&&t.max.y===oo.max.y,Nn=t=>Array.from(new Set(t)),On=t=>t.filter(t=>void 0!==t),Yn=t=>"boolean"==typeof t?t?1:0:t>1?1:t<0?0:t,Gn=(t,e)=>{throw new Error(e)},Xn=t=>{let e;return()=>e||(e=t(),e)},Un=t=>{if(t===Lr)return 0;const e=t.getThickness();return e<0?1:1*e},Hn=(t,e,i,s)=>{const r='LightningChart JS Resources not found.\nresourcesBaseUrl: "'.concat(t,'"\ninitiator: ').concat(i,"\nresource url: ").concat(e,"\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/error-resources-not-found/");if(s.shouldCrash)throw Ur.alert(r),new Error(r);Ur.console.warn(r)},jn=function(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t<i(s)||i(e)<t)return;const r=e;for(;s!==e;){const r=Math.ceil((s+e)/2);t<i(r)?e=r-1:s=r}const n=Math.abs(t-i(s));return s<r&&Math.abs(t-i(s+1))<n?s+1:s},Wn=()=>{const t=new Map;return{Zi:e=>(Object.keys(Sr).forEach(i=>{e.addEventListener(i,(e,s)=>{const r=s.collectionMember&&t.get(s.collectionMember);if(!r)return;const n=Er(e)?{clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY}:e,o=r.Ji(s.info,n,s.collectionMember);r.L.D(i,e,o)})}),e),Qi:(e,i)=>{t.set(e,i)},zi:()=>{t.clear()}}},Zn={left:0,right:0,top:0,bottom:0},Jn=()=>Math.round(Math.random()*Number.MAX_SAFE_INTEGER),qn=(t,e,i)=>{e&&e.Ki();const s=i();return Object.keys(s).forEach(e=>{const i=e,r=s[i];t.addEventListener(i,r)}),{qi:t,Ki:()=>{Object.entries(s).forEach(e=>{let[i,s]=e;const r=i,n=s;t.removeEventListener(r,n)})}}},Qn=(t,e,i)=>{let s;const r=()=>(s=i(),s),n=l(l({},t),{},{resolve:()=>s||r()});for(const o of Object.keys(e))Object.defineProperty(n,o,{get:function(){return s?s[o]:r()[o]}});return n},Kn=t=>{if(t)return"resolve"in t?t.resolve():t},$n=t=>{let e=t;return{ts:t=>{const i=e;return e=i+t,[i,t]}}},to=t=>{Ur.document.body.addEventListener(t,t=>{t.stopPropagation(),t.preventDefault()},{once:!0,capture:!0})},eo=()=>{const t=Ur.performance.now();Ur.document.body.addEventListener("contextmenu",e=>{Ur.performance.now()-t>5e3||e.preventDefault()},{once:!0})},io=()=>{const t=Ur.performance.now();Ur.document.body.addEventListener("touchstart",e=>{Ur.performance.now()-t>5e3||e.preventDefault()},{once:!0})},so={add:(t,e)=>ws(t.x+e,t.y+e,t.z+e),addVec(t){const e={x:t.x,y:t.y,z:t.z};for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];for(const n of s)e.x+=n.x,e.y+=n.y,e.z+=n.z;return e},subtract:(t,e)=>ws(t.x-e,t.y-e,t.z-e),subtractVec(t){const e={x:t.x,y:t.y,z:t.z};for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];for(const n of s)e.x-=n.x,e.y-=n.y,e.z-=n.z;return e},multiply:(t,e)=>ws(t.x*e,t.y*e,t.z*e),divide:(t,e)=>ws(t.x/e,t.y/e,t.z/e),multiplyVec(t){const e={x:t.x,y:t.y,z:t.z};for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];for(const n of s)e.x*=n.x,e.y*=n.y,e.z*=n.z;return e},divideVec(t){const e={x:t.x,y:t.y,z:t.z};for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];for(const n of s)e.x/=n.x,e.y/=n.y,e.z/=n.z;return e},length:t=>Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),normalize:t=>so.divide(t,so.length(t)),dot:(t,e)=>t.x*e.x+t.y*e.y+t.z*e.z,cross:(t,e)=>ws(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x),angle:(t,e)=>Math.acos(so.dot(t,e)/(so.length(t)*so.length(e))),rotateAroundAxis(t,e,i){const s=Math.cos(i),r=Math.sin(i),n=so.dot(e,t),o=so.cross(e,t);return so.addVec(so.multiply(t,s),so.addVec(so.multiply(e,(1-s)*n),so.multiply(o,r)))},lerp:(t,e,i)=>(i=Qr(i,0,1),so.addVec(so.multiply(t,1-i),so.multiply(e,i))),equals:(t,e)=>qr(t.x,e.x)&&qr(t.y,e.y)&&qr(t.z,e.z),abs:t=>({x:Math.abs(t.x),y:Math.abs(t.y),z:Math.abs(t.z)}),sign:t=>({x:Math.sign(t.x),y:Math.sign(t.y),z:Math.sign(t.z)})},ro=Number.MAX_VALUE,no=-Number.MAX_VALUE,oo=Cs(As(ro,ro),As(no,no)),ao=Cs(ws(ro,ro,ro),ws(no,no,no)),ho=(t,e)=>{const i=Math.log(t)/Math.log(e);return Math.floor((t=>(Math.ceil(t)-t<1e-4?t=Math.ceil(t):t-Math.floor(t)<1e-4&&(t=Math.floor(t)),t))(i))},lo=(t,e)=>!(e.min.x>t.max.x||e.max.x<t.min.x||e.min.y>t.max.y||e.max.y<t.min.y),co=(t,e)=>!(t[1].x<e[0].x||t[0].x>e[1].x||t[3].y<e[0].y||t[0].y>e[3].y),uo=(t,e)=>({min:{x:Math.min(t[0].x,e[0].x),y:Math.min(t[0].y,e[0].y)},max:{x:Math.max(t[2].x,e[2].x),y:Math.max(t[2].y,e[2].y)}}),fo=t=>{const e=t.length;for(let i=0;i<e;i+=1)for(let s=i+1;s<e;s+=1)if(lo(t[i],t[s]))return!0;return!1},go=(t,e)=>e+t,po=(t,e,i)=>{const s=Do(e,t),r=s.x*s.x+s.y*s.y;if(0===r)return t;const n=Do(i,t),o=(n.x*s.x+n.y*s.y)/r;return o<=0?t:o>=1?e:As(t.x+o*s.x,t.y+o*s.y)},yo=(t,e,i)=>i>e?t>=e&&t<=i:t>=i&&t<=e,mo=(t,e)=>{const i=t.x-e.x,s=t.y-e.y;return Math.sqrt(i*i+s*s)},vo=(t,e)=>{const i=t.x-e.x,s=t.y-e.y;return i*i+s*s},xo=(t,e,i)=>Lo(t,Bo(Do(e,t),i)),bo=(t,e,i)=>so.addVec(t,so.multiply(so.subtractVec(e,t),i));function So(t){const e=t.length;if(e>0){let i=t[0].x,s=t[0].x,r=t[0].y,n=t[0].y;for(let o=1;o<e;o+=1){const e=t[o];e.x>i&&(i=e.x),e.x<s&&(s=e.x),e.y>r&&(r=e.y),e.y<n&&(n=e.y)}return Cs(As(s,n),As(i,r))}return oo}function Ao(t){const e=t.length;if(e>0){let i=t[0].x,s=t[0].x,r=t[0].y,n=t[0].y,o=t[0].z,a=t[0].z;for(let h=0;h<e;h+=1){const e=t[h];e.x>i&&(i=e.x),e.x<s&&(s=e.x),e.y>r&&(r=e.y),e.y<n&&(n=e.y),e.z>o&&(o=e.z),e.z<a&&(a=e.z)}return Cs(ws(s,n,a),ws(i,r,o))}return ao}const Eo=function(){const t={min:{x:ro,y:ro},max:{x:no,y:no}};for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];for(const r of i)t.min.x=t.min.x<r.min.x?t.min.x:r.min.x,t.max.x=t.max.x>r.max.x?t.max.x:r.max.x,t.min.y=t.min.y<r.min.y?t.min.y:r.min.y,t.max.y=t.max.y>r.max.y?t.max.y:r.max.y;return t},ko=(t,e)=>Cs(ws(t.min.x<e.min.x?t.min.x:e.min.x,t.min.y<e.min.y?t.min.y:e.min.y,t.min.z<e.min.z?t.min.z:e.min.z),ws(t.max.x>e.max.x?t.max.x:e.max.x,t.max.y>e.max.y?t.max.y:e.max.y,t.max.z>e.max.z?t.max.z:e.max.z));function wo(t,e,i,s){const r=t.x-s.x,n=t.y-s.y,o=s.x-i.x,a=i.y-s.y,h=a*r+o*n,l=(s.y-e.y)*r+(e.x-s.x)*n,c=a*(e.x-s.x)+o*(e.y-s.y);return c<0?h<=0&&l<=0&&h+l>=c:h>=0&&l>=0&&h+l<=c}function Mo(t,e,i){return As(Math.cos(i)*(t.x-e.x)+Math.sin(i)*(t.y-e.y)+e.x,-Math.sin(i)*(t.x-e.x)+Math.cos(i)*(t.y-e.y)+e.y)}function Co(t,e){return As(t.x-e.x,t.y-e.y)}function To(t){const e=Po(t);return 0===e?As(0,0):As(t.x/e,t.y/e)}function Fo(t,e){let i={x:e.x-t.x,y:e.y-t.y};i=To(i);const s=Math.PI/2,r=i.x;return i.x=-Math.sin(s)*i.y,i.y=r*Math.sin(s),i}function Po(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function Bo(t,e){return As(t.x*e,t.y*e)}function Lo(t,e){return As(t.x+e.x,t.y+e.y)}function Do(t,e){return As(t.x-e.x,t.y-e.y)}function zo(t,e){return As(t.x*e.x,t.y*e.y)}function Io(t,e){return As(t.x/e.x,t.y/e.y)}function Ro(t){return Bo(t,-1)}function _o(t,e){return t.x*e.x+t.y*e.y}const Vo=(t,e,i)=>{const s=(i.y-e.y)/(i.x-e.x),r=e.y+(t-e.x)*s;return As(t,r)};function No(t){return t*Math.PI/180}function Oo(t){return 180*Math.atan2(t.y,t.x)/Math.PI}function Yo(t){return As(Math.cos(t),Math.sin(t))}const Go=(t,e)=>{const i=t.length,s=e.length,r=new Uint16Array(i+s);return r.set(t,0),r.set(e,i),r};class Xo extends tr{constructor(t,e,i,s){super(t,e,i,s),this.ss={internal:10,function:Uo(10),number:10},this.U=1e3,this.H(1,1e3),this.Ht=this.es()}st(t,e,i,s,r){if(t===e)return!1;const n=Math.min(t,e)<jo,o=Math.max(t,e)>Wo;return!n&&!o||!!r&&(e>t?{start:n?jo:t,end:o?Wo:e}:{start:o?Wo:t,end:n?jo:e})}Bt(t){const e=this.bt(),i=this.xt(),s=Math.max(t,jo);return e+(this.ss.function(s)-this.Ht.scaleStartLog)/this.Ht.scaleIntervalLog*(i-e)}Dt(t){const e=this.bt(),i=(t-e)/(this.xt()-e),s=this.Ht.scaleStartLog+i*this.Ht.scaleIntervalLog;return this.ss.number**s}Tt(){this.ss&&this.es()}H(t,e){return super.H(t,e),this.ss&&this.es(),this}St(t){return super.St(t),this.ss&&this.es(),this}X(t){return super.X(t),this.ss&&this.es(),this}hs(t){return this.ss={internal:t,function:Uo(t),number:Ho(t)},this}rs(){return this.ss.internal}Jt(t,e){const i=this.Bt(t)+e;return this.Dt(i)}Lt(){return this.rt||this.et||this.ot||this.ht}es(){const t=this.ss.function(this.G),e=this.ss.function(this.$)-t,i=2*this.bt()/this.U-1,s=2*this.xt()/this.U-1-i;return this.Ht={scaleStartLog:t,scaleIntervalLog:e,viewportStart:i,viewportSize:s},this.Ht}jt(){return this.Ht}}const Uo=t=>"e"===t?wn:kn(t),Ho=t=>"e"===t?Math.E:t,jo=.9*10**-20,Wo=1.1*10**25,Zo=[{prefix:"T",unit:10**12},{prefix:"B",unit:10**9},{prefix:"M",unit:1e6},{prefix:"K",unit:1e3}],Jo=(t,e,i)=>{const s=Math.abs(i-e);if(0===s)return t.toFixed(0);const r=Math.max(2-ho(s,10),0);return t.toFixed(r)},qo={Numeric:(t,e)=>{const{start:i,end:s}=e;return Jo(t,i,s)},NumericUnits:(t,e)=>{const{start:i,end:s}=e,r=Math.abs(s-i),n=t<0;t=Math.abs(t);let o="",a="";if(r>=1e3&&t>1e3){let e="";for(const i of Zo){const s=Math.round(1e3*t/i.unit)/1e3;if(s>=1){e=s.toString(),a=i.prefix;break}}o=(n?"-":"")+e}else{let e=String(Math.floor(t));const i=ho(t,1e3);for(let t=1;t<=i;t+=1){const i=e.length-(3*t+(t-1));e="".concat(e.substring(0,i)," ").concat(e.substring(i,e.length))}o=(n?"-":"")+e+(r<=10?((t,e)=>{if(0===e)return"";let i=(Math.abs(t)-Math.abs(Math.floor(t))).toString().substring(1);return i.length>e&&(i=i.substring(0,e+1)),i})(t,2-ho(r,10)):"")}return o+=a,o},LogarithmicExponentsRounded:function(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;const r=Uo(s)(t);return"".concat(s).concat(Qo(r))},LogarithmicExponents:function(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;const r=Uo(s),n=Math.floor(r(t)),o=t/Ho(s)**n;return"".concat(Math.round(o),"\xd7").concat(s).concat(Qo(n))},LogarithmicExtreme:function(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;const r=Uo(s),n=Math.floor(r(t));return"".concat((t/Ho(s)**n).toFixed(2),"\xd7").concat(s).concat(Qo(n))},LogarithmicNoExponents:function(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;const r=Uo(s);if("e"===s)return"".concat(Math.floor(r(t)),"e");const n=t.toString();if(t>1)return n;const o=Math.floor(r(t));return t.toFixed(Math.abs(o))},Scientific:(t,e)=>{const{start:i,end:s}=e,r=Math.max(Math.abs(i),Math.abs(s)),n=Math.floor(Math.log10(r));return 0===t?"0.00e".concat(n<0?"":"+").concat(n):t.toExponential(2)}},Qo=t=>Math.round(t).toString().split("").map(t=>{switch(t){case"0":return"\u2070";case"1":return"\xb9";case"2":return"\xb2";case"3":return"\xb3";case"4":return"\u2074";case"5":return"\u2075";case"6":return"\u2076";case"7":return"\u2077";case"8":return"\u2078";case"9":return"\u2079";case"-":return"\u207b";default:return t}}).join(""),Ko=(t,e)=>t.value-e.value,$o=fs({type:"lut",steps:[],title:"",units:"",interpolate:!0,color:Rs(0,0,0,255),length:0,min:0,max:0,subranges:[],isValid:!1,percentageValues:!1,formatter:(t,e)=>Jo(t,e.min,e.max)}),ta=t=>{const{steps:e}=t,i=e.length;e.sort(Ko);const[s,r]=i>0?[e[0].value,e[i-1].value]:[0,0],n=i>0?i-1:0,o=Array(n);for(let a=0;a<n;a+=1)o[a]={min:e[a],max:e[a+1]};return{min:s,max:r,length:i,steps:e,subranges:o,isValid:i>0&&s!==r}};const ea=(t,e)=>t.formatter(e,{min:t.min,max:t.max,percentageValues:t.percentageValues}),ia=fs({type:"fillstyle",fillType:"empty"});const sa=new class extends ia{toString(){return"emptyFill"}toCSS(){return"transparent"}},ra=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"empty"===t.fillType),na=fs({type:"fillstyle",fillType:"solid",color:Rs(255,255,255)});class oa extends na{}class aa extends oa{constructor(t){super(l(l({},t),{},{fillType:"solid"}))}toString(){return"solidFill:".concat(this.color.toString())}toCSS(){return this.color.toRGBAString()}setColor(t){return Is(t)?this.set("color",t):this.set("color",t(this.get("color")))}getColor(){return this.get("color")}setA(t){return this.setColor(this.getColor().setA(t))}setR(t){return this.setColor(this.getColor().setR(t))}setG(t){return this.setColor(this.getColor().setG(t))}setB(t){return this.setColor(this.getColor().setB(t))}}const ha=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"solid"===t.fillType);class la extends oa{constructor(t){super(l(l({},t),{},{fillType:"individual"}))}toString(){return"individualPointFill:".concat(this.color.toString())}toCSS(){return this.getFallbackColor().toRGBAString()}setFallbackColor(t){return Is(t)?this.set("color",t):this.set("color",t(this.get("color")))}getFallbackColor(){return this.get("color")}}const ca=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"individual"===t.fillType),ua=fs({type:"fillstyle",fillType:"palette",lut:new class extends $o{constructor(t){super(((t,e)=>({steps:t.steps,title:t.title,units:t.units,interpolate:t.interpolate,percentageValues:t.percentageValues,color:t.color,formatter:t.formatter,length:e.length,min:e.min,max:e.max,subranges:e.subranges,isValid:e.isValid}))(t,ta(t)))}toString(){return"LUT:interpolate=".concat(this.interpolate,",steps=").concat(this.steps.length,",percentage=").concat(this.percentageValues)}setSteps(t){return this.merge(ta(l(l({},this),{},{steps:t})))}getSteps(){return this.get("steps")}setTitle(t){return this.set("title",t)}getTitle(){return this.get("title")}setUnits(t){return this.set("units",t)}getUnits(){return this.get("units")}setInterpolation(t){return this.set("interpolate",t)}getInterpolation(){return this.get("interpolate")}setFallbackColor(t){return this.set("color",t)}getFallbackColor(){return this.get("color")}setPercentageValues(t){return this.set("percentageValues",t)}getPercentageValues(){return this.get("percentageValues")}setFormatter(t){return this.set("formatter",t)}getFormatter(){return this.get("formatter")}getColors(t,e){if(Array.isArray(t)){if(Array.isArray(t[0])){const i=t,s=i.length,r=i[0].length,n=[...Array(s)].map(()=>Array(r));for(let t=0;t<s;t+=1)for(let s=0;s<r;s+=1)n[t][s]=this.ns(i[t][s],e);return n}const i=t,s=i.length,r=Array(s);for(let t=0;t<s;t+=1)r[t]=this.ns(i[t],e);return r}return this.ns(t,e)}ns(t,e){const{steps:i}=this,s=i.length;if(0===s)return this.getFallbackColor();if(1===s)return i[0].color||this.color;if(this.percentageValues,this.percentageValues&&e&&(t=Math.max(Math.min((t-e.min)/(e.max-e.min),1),0)),this.interpolate){for(let e=0;e<s-1;e+=1){const s=i[e],a=i[e+1],h=Math.min(s.value,a.value),l=Math.max(s.value,a.value);if(t>=h&&t<=l){if(h===l)return s.color;const e=(t-s.value)/(a.value-s.value);return r=s.color,n=a.color,o=e,new zs({r:r.r+(n.r-r.r)*o,g:r.g+(n.g-r.g)*o,b:r.b+(n.b-r.b)*o,a:r.a+(n.a-r.a)*o})}}return t<i[0].value?i[0].color:i[s-1].color}var r,n,o;for(let a=s-1;a>=0;a-=1)if(t>=i[a].value)return i[a].color;return i[0].color}}({steps:[]}),lookUpProperty:"value"});class da extends ua{constructor(t){super(l(l({},t),{},{fillType:"palette"}))}toString(){return"palettedFill:lut=".concat(this.lut.toString(),",lookUpProperty=").concat(this.lookUpProperty)}toCSS(){return"linear-gradient(".concat(this.lut.getSteps().map(t=>t.color.toRGBAString()).join(", "),")")}getPalette(){return this.get("lut")}setLookUpProperty(t){return"function"==typeof t?this.set("lookUpProperty",t(this.get("lookUpProperty"))):this.set("lookUpProperty",t)}getLookUpProperty(){return this.get("lookUpProperty")}}const fa=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"palette"===t.fillType),ga=(t,e)=>t instanceof Xo||e instanceof Xo?(new nr).Qt(t,e):(new rr).Qt(t,e),pa=t=>"client"===t,ya=t=>!!(t&&"object"==typeof t&&"clientX"in t&&"number"==typeof t.clientX&&"clientY"in t&&"number"==typeof t.clientY),ma=t=>"relative"===t,va=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y),xa=(t,e,i,s)=>{let r,n,o=Number.MAX_VALUE;for(let a=0;a<e.length;a+=1){const h=e[a],l=i(h,t);if(l){const e=s(t,l);(void 0===r||e<o)&&(r=l,n=h,o=e)}}return r&&n?[r,n]:void 0},ba=(t,e,i,s,r,n)=>{if(!t)return;let o=t;const a="button"in i?i:void 0;if(a)if(0===a.button){if(!1===t.lmb)return;void 0!==t.lmb&&(o=Gr(o,t.lmb))}else if(1===a.button){if(!1===t.mmb)return;void 0!==t.mmb&&(o=Gr(o,t.mmb))}else if(2===a.button){if(!1===t.rmb)return;void 0!==t.rmb&&(o=Gr(o,t.rmb))}if(s){if(!1===t.shift)return;o=Gr(o,t.shift)}if(r){if(!1===t.ctrl)return;o=Gr(o,t.ctrl)}if(n){if(!1===t.alt)return;o=Gr(o,t.alt)}if(!e)return o;const h=o[e];return h?!0===h?o:Gr(o,h):void 0},Sa=t=>{const e=[];return{push:t=>{e.push(t)},end:()=>{e.length>1&&t&&Ur.console.warn("LightningChart JS warning | event handler triggered more than 1 interaction.\nThis likely means that your `chart.setUserInteractions` configuration either enables conflicting interactions or more likely doesn't disable conflicting default interactions."),e.forEach(t=>t())}}},Aa=(t,e,i)=>{if(t){const t={x:i.x.bt(),y:i.y.bt(),width:i.x.Mt(),height:i.y.Mt()};e.forEach(e=>{e.ls=t})}else e.forEach(t=>{t.ls=void 0})},Ea=(t,e)=>{var i;return e?"string"==typeof e?"".concat(t," ").concat(e):!1!==(null===(i=e.cs)||void 0===i?void 0:i.displayInCursor)&&e.getUnits()?"".concat(t," ").concat(e.getUnits()):t:t},ka=t=>{let e=!1,i={type:"linear"};if(t&&(void 0!==t.opposite&&(e=t.opposite),t.type&&"linear-highPrecision"===t.type&&(i={type:"linear-highPrecision"}),t.type&&"logarithmic"===t.type)){let s=10;if(t.base)if("E"===t.base||"e"===t.base||"natural"===t.base)s="e";else if("number"==typeof t.base)s=t.base;else if("string"==typeof t.base)try{s=Number(t.base)}catch(e){console.warn('Unidentified logarithmic base "'.concat(t.base,'"'))}i={base:s,type:"logarithmic"}}return{opposite:e,type:i}},wa=function(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Qr(t+.1*s*(e-t)+.5*s*Math.abs(i.getPixelSize())*Math.sign(e-t),t,e)},Ma=function(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const r=i.Bt(t),n=i.Bt(e);return Qr(i.Dt(r+.1*s*(n-r)+.5*s*Math.sign(n-r)),t,e)};var Ca,Ta;!function(t){t[t.noHighlighting=0]="noHighlighting",t[t.onHover=1]="onHover",t[t.onHoverIndividual=2]="onHoverIndividual"}(Ca||(Ca={}));class Fa{constructor(t,e,i,s){this.us=Ca.onHover,this.ci=!1,this.ui=!0,this.ds=[],this.fs=t,this.As=e,this.bi=i,this.gs=new Map,this.vs=s,this.ys=this.vs.ps(this,{Ss:{themeEffectEnabled:this.bi.effectsText},bs:{}}),this.fs.gi.Ms.xs(this,t=>{this.gs.forEach((e,i)=>i.Fi(t)),this.ds.forEach(e=>e.Fi(t))},{animationEnabled:this.fs.getAnimationsEnabled()}),Ur.requestAnimationFrame(()=>{this.ci||(this.addEventListener("pointerenter",()=>{this.us===Ca.onHover&&this.setHighlight(!0)}),this.addEventListener("pointerleave",()=>{this.us===Ca.onHover&&this.setHighlight(!1)}))})}ws(){}_s(t,e){const i=void 0===(null==e?void 0:e.setEventHandlers)||e.setEventHandlers,s=void 0!==(null==e?void 0:e.pointerEventsDisabled)&&e.pointerEventsDisabled,r=void 0!==(null==e?void 0:e.isText)&&e.isText;this.gs.set(t,{isText:r,pointerEventsDisabled:s});const n=Array.from(this.gs);this.ys.Ss.ks(n.filter(t=>t[1].isText).map(t=>t[0])),this.ys.bs.ks(n.filter(t=>!t[1].isText).map(t=>t[0])),t.setVisible(this.ui).Fi(this.fs.gi.Ms.Cs(this,!0)),Ur.requestAnimationFrame(()=>{this.ci||t.isDisposed()||(t.setPointerEvents(!0!==(null==e?void 0:e.pointerEventsDisabled)&&this.getPointerEvents()),i&&this.L.Oi(t,{getExtraData:(t,e,i)=>this.Ji(i,t,e)}))});const o=e=>{t.removeEventListener("dispose",o),this.gs.delete(t)};t.addEventListener("dispose",o)}Ts(t){this.ds=t;const e=this.fs.gi.Ms.Cs(this,!0);t.forEach(t=>{t.Fi(e).Fs(this.ui)})}Ji(t,e,i){}Is(t){const e=this.fs.gi.Ps(t);if(e&&Array.from(this.gs.keys()).includes(e.entity))return this.Ji(e.info,t,e.collectionMember)}setEffect(t){return this.ys.Ss.Ls(t&&this.bi.effectsText),this.ys.bs.Ls(t),this.fs.gi.Bs(),this}getEffect(){return this.ys.Ss.Ds()||this.ys.bs.Ds()}setIcon(t){return this.Rs=t,this.fs.gi.Bs(),this}getIcon(){return this.Rs}setName(t){return this.Es=t,this}getName(){return this.Es||"Component"}dispose(){return this.ci||(this.ci=!0,this.gs.forEach((t,e)=>e.dispose()),this.As(this),this.L.D("dispose",{}),this.fs.legend.remove(this),this.fs.gi.Bs()),this}setVisible(t){return t===this.ui||(this.ui=t,this.gs.forEach((e,i)=>i.setVisible(t)),this.ds.forEach(e=>e.Fs(t)),this.L.D("visiblechange",{isVisible:t}),this.fs.Os.forEach(t=>t.zs()),this.fs.gi.Bs()),this}getVisible(){return this.ui}setHighlight(t){return this.fs.gi.Ms.Vs(this,t),this.L.D("highlightchange",{highlight:Yn(t)}),this}getHighlight(){return this.fs.gi.Ms.Cs(this)}setAnimationHighlight(t){return this.fs.gi.Ms.Ns(this,t),this}getAnimationHighlight(){return this.fs.gi.Ms.Gs(this)}setPointerEvents(t){return this.L.setPointerEvents(t),this}getPointerEvents(){return this.L.getPointerEvents()}getPointed(){if(!this.fs.gi.$s())return!1;for(const t of this.gs)if(this.fs.gi.Us(t[0]))return!0;for(const t of this.ds)if(this.fs.gi.Us(void 0,t))return!0;return!1}setHighlightOnHover(t){return this.us="boolean"==typeof t?t?Ca.onHover:Ca.noHighlighting:t,this.us===Ca.noHighlighting&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.us!==Ca.noHighlighting}Ys(){}js(){return this.Rs}isDisposed(){return this.ci}set draggable(t){this.L.draggable=t}get draggable(){return this.L.draggable}}class Pa extends Fa{constructor(t,e,i,s,r,n,o,a){super(e,i,o,a),this.Hs=!0,this.Ws=t,this.axis=s,this.oi=r,this.Xs=n,Ur.requestAnimationFrame(()=>this.Zs())}setClipping(t){return this.Hs=t,this.Ws.Bs(),this}getClipping(){return this.Hs}}!function(t){t[t.Other=0]="Other",t[t.CursorResultTable=1]="CursorResultTable",t[t.CursorTickMarker=2]="CursorTickMarker",t[t.ChartTitle=3]="ChartTitle",t[t.AxisTitle=4]="AxisTitle"}(Ta||(Ta={}));const Ba=t=>"object"==typeof t&&null!==t&&"setCornerRadius"in t;var La;!function(t){t[t.Square=0]="Square",t[t.Circle=1]="Circle",t[t.HollowCircle=2]="HollowCircle",t[t.Triangle=3]="Triangle",t[t.Cross=4]="Cross",t[t.Diamond=5]="Diamond",t[t.Plus=6]="Plus",t[t.Minus=7]="Minus",t[t.Arrow=8]="Arrow",t[t.Star=9]="Star"}(La||(La={}));const Da=t=>"ProgressiveX"===t||"RegressiveX"===t?"x":"y",za=t=>"ProgressiveX"===t||"ProgressiveY"===t,Ia=(t,e,i)=>t*(1-i)+e*i,Ra=(t,e,i,s,r)=>{if(void 0===e.value||void 0===i.value||void 0===s.value||void 0===r.value)return;const n=(t.x-i.point.x)/(r.point.x-i.point.x),o=(r.point.y-i.point.y)*n+i.point.y,a=(t.x-e.point.x)/(s.point.x-e.point.x),h=(s.point.y-e.point.y)*a+e.point.y,l=(t.y-h)/(o-h),c=Ia(i.value,r.value,n),u=Ia(e.value,s.value,a);return Ia(u,c,l)};class _a{constructor(){this.type="simple"}}const Va=new _a;class Na{constructor(t){this.type="phong",this.ambientReflection=1,this.specularReflection=.1,this.diffuseReflection=1,this.ambientColor=_s("#000"),this.specularColor=_s("#fff"),this.shininess=32,t&&(this.ambientReflection=Number.isNaN(Number(t.ambientReflection))?this.ambientReflection:Number(t.ambientReflection),this.specularReflection=Number.isNaN(Number(t.specularReflection))?this.specularReflection:Number(t.specularReflection),this.diffuseReflection=Number.isNaN(Number(t.diffuseReflection))?this.diffuseReflection:Number(t.diffuseReflection),this.ambientColor=t.ambientColor||this.ambientColor,this.specularColor=t.specularColor||this.specularColor,this.shininess=t.shininess||this.shininess)}}const Oa=new Na,Ya=_a,Ga=fs({type:"font",size:14,family:"Arial",weight:"normal",style:"normal",variant:!1});class Xa extends Ga{constructor(t){super(t)}setSize(t){return this.set("size",t)}setFamily(t){return this.set("family",t)}setWeight(t){return this.set("weight",t)}setStyle(t){return this.set("style",t)}setVariant(t){return this.set("variant",t)}getSize(){return this.get("size")}getFamily(){return this.get("family")}getWeight(){return this.get("weight")}getStyle(){return this.get("style")}getVariant(){return this.get("variant")}}const Ua=t=>!(!t||"object"!=typeof t||!("type"in t)||"font"!==t.type),Ha=new Xa,ja=new class{getFillStyle(){return sa}},Wa=fs({type:"triangulated-points-3d",shape:"sphere",size:10,fillStyle:new aa,wireframeStyle:Lr});class Za extends Wa{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setWireframeStyle(t){return"function"==typeof t?this.set("wireframeStyle",t(this.get("wireframeStyle"))):this.set("wireframeStyle",t)}getWireframeStyle(){return this.get("wireframeStyle")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}}const Ja=t=>!(!t||"object"!=typeof t||!("type"in t)||"triangulated-points-3d"!==t.type),qa=fs({type:"pixelated-points-3d",size:5,fillStyle:new aa});const Qa=t=>!(!t||"object"!=typeof t||!("type"in t)||"pixelated-points-3d"!==t.type),Ka={Triangulated:Za,Pixelated:class extends qa{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}}},$a=fs({type:"linestyle",lineType:"solid",fillStyle:new aa({color:Rs(255,255,255)}),thickness:1});class th extends $a{constructor(t){super(l(l({},t),{},{lineType:"solid"}))}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}Yi(){const t=this.getThickness();return t<0?1:t}}const eh=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"solid"!==t.lineType),ih={Dotted:[1,3],DottedDense:[1,1],Dashed:[3,1],DashedEqual:[2,2],DashedLoose:[2,4],DashDotted:[3,2,1,2]},sh=fs({type:"linestyle",lineType:"dashed",pattern:ih.DashedEqual,fillStyle:new aa({color:Rs(255,255,255)}),thickness:1,patternScale:3});class rh extends sh{constructor(t){super(l(l({},t),{},{lineType:"dashed"}))}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}Yi(){const t=this.getThickness();return t<0?1:t}setPattern(t){return"function"==typeof t?this.set("pattern",t(this.getPattern())):this.set("pattern",t)}getPattern(){return this.get("pattern")}setPatternScale(t){return"function"==typeof t?this.set("patternScale",t(this.getPatternScale())):this.set("patternScale",t)}getPatternScale(){return this.get("patternScale")}}const nh=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"dashed"!==t.lineType),oh=fs({type:"icon",width:void 0,height:void 0,Js:void 0,Qs:Jr,Ks:Jr});class ah extends oh{constructor(t,e,i,s){super(l(l({},s),{},{Js:t,Qs:e,Ks:i}))}dispose(){return this.Ks(this),this}setWidth(t){const e=this.set("width",t);return this.Qs(e),e}getWidth(){return this.get("width")}setHeight(t){const e=this.set("height",t);return this.Qs(e),e}getHeight(){return this.get("height")}setSize(t,e){const i=this.withMutations(i=>{i.set("width",t).set("height",e)});return this.Qs(i),i}_t(){if(!this.Js)return{x:0,y:0};const t=this.Js.width,e=this.Js.height;if(0===t||0===e)return{x:0,y:0};const i=this.width,s=this.height;return"number"==typeof i&&"number"==typeof s?{x:i,y:s}:"number"==typeof i?{x:i,y:e*i/t}:"number"==typeof s?{x:t*s/e,y:s}:{x:t,y:e}}}const hh=t=>!(!t||"object"!=typeof t||!("type"in t)||"icon"!==t.type),lh=fs({type:"glow",color:Rs(255,255,255,50),spread:1,blur:4,offset:{x:0,y:0}});class ch extends lh{constructor(t){super(t)}setSpread(t){return this.set("spread","function"==typeof t?t(this.get("spread")):t)}getSpread(){return this.get("spread")}setBlur(t){return this.set("blur","function"==typeof t?t(this.get("blur")):t)}getBlur(){return this.get("blur")}setColor(t){return this.set("color","function"==typeof t?t(this.get("color")):t)}getColor(){return this.get("color")}setOffset(t){return this.set("offset","function"==typeof t?t(this.get("offset")):t)}getOffset(){return this.get("offset")}}class uh extends sr{constructor(){super(...arguments),this.ei="RadialScale",this.qs={start:0,end:1},this.te=!1,this.ie=0,this.U=As(0,0),this.se=[0,0],this.ee=[0,0],this.o=!0,this.It=!0,this.he=!0,this.re=!0,this.ne={x:0,y:0},this.Ht={x:{displacement:0,scaling:0,highPrecisionOffset:0},y:{displacement:0,scaling:0,highPrecisionOffset:0}}}oe(t,e){return t===this.qs.start&&e===this.qs.end||(this.qs={start:t,end:e},this.he=!0,this.ae()),this}le(){return this.qs}ce(){return this.qs.end>=this.qs.start}ue(t){this.te=t,this.re=!0}de(){return!1===this.te}fe(t){this.ie=t,this.re=!0}Ae(){return this.ie}Lt(){return this.It}Ot(){return!1}hi(t,e,i,s){return this.x=new er(t.x,e.x,i.x,s?s.x:void 0),this.y=new er(t.y,e.y,i.y,s?s.y:void 0),this}jt(){return this.Ht}ge(){return this.he}ve(){return this.re}ri(){return this.ne}Y(){return this.o=!1,this.It=!1,this.he=!1,this.re=!1,this}j(){return this.o=!0,this.It=!0,this.he=!0,this.re=!0,this}X(t,e){return"object"==typeof t?(this.U.x=t.x,this.U.y=t.y):(this.U.x=t,this.U.y=e),this.ae(),this}Kt(t){return this.se=t,this.ae(),this}qt(t){return this.ee=t,this.ae(),this}wt(){return As(this.se[0]+this.se[1],this.ee[0]+this.ee[1])}_t(){return this.U}ae(){const t=this.qs,e=As(this.x.kt(this.U.x),this.y.kt(this.U.y)),i=this.se[0]+this.se[1],s=this.ee[0]+this.ee[1],r=Math.max(e.x-i,0),n=Math.max(e.y-s,0),o=.5*(r>n?n:r),a=[this.se[0]+Math.max((r-2*o)/2,0),this.se[1]+Math.max((r-2*o)/2,0)],h=[this.ee[0]+Math.max((n-2*o)/2,0),this.ee[1]+Math.max((n-2*o)/2,0)],l=Math.abs(t.end-t.start);this.x.X(this.U.x).St(a).H(-l,l),this.y.X(this.U.y).St(h).H(-l,l),this.ne={x:this.x.getPixelSize(),y:this.y.getPixelSize()},this.Ht={x:this.x.jt(),y:this.y.jt()},this.j()}Jt(t,e){const i=this.ri();return{x:t.x+e.x*i.x,y:t.y+e.y*i.y}}ni(t,e,i,s){const r=this.ri(),n=Fo(t,e);return n.x*=s,n.y*=s,{x:t.x+i*r.x*n.x,y:t.y+i*r.y*n.y}}}const dh=t=>{if(t instanceof rr||t instanceof uh)return t.Ot()?"linear-highPrecision":"linear";if(t instanceof nr){const e={};return t.x instanceof Xo&&(e.x={base:t.x.rs()}),t.y instanceof Xo&&(e.y={base:t.y.rs()}),["logarithmic",e]}return"linear"},fh=(t,e,i)=>{if(0===i||360===i||180===i||i%180==0)return{x:t,y:e};if(90===i||-90===i||(i+90)%180==0)return{x:e,y:t};const s=i*Math.PI/180,r=Math.cos(s),n=Math.sin(s);return{x:Math.abs(t*r)+Math.abs(e*n),y:Math.abs(t*n)+Math.abs(e*r)}},gh=t=>{const e=Object.keys(t),i={};return e.forEach(e=>{const s=t[e];let r=!1;i[e]=t=>{if(!t)return r;const e=s();return r=e,e}}),i},ph=(t,e,i)=>"value"===t.getLookUpProperty()?i:"x"===t.getLookUpProperty()?{min:e.ji(),max:e.Hi()}:"y"===t.getLookUpProperty()?{min:e.Wi(),max:e.Xi()}:"z"===t.getLookUpProperty()?{min:e.ye(),max:e.pe()}:void 0,yh=t=>!(!t||"value"!==t.lookUpProperty||!t.lut.percentageValues);class mh{constructor(t,e){this.me=t,this.Se=e,this.be=e.rows*jh,this.xe=e.columns*Wh}}var vh,xh;!function(t){t[t.ZoomIn=0]="ZoomIn",t[t.ZoomInX=1]="ZoomInX",t[t.ZoomInY=2]="ZoomInY",t[t.ZoomOut=3]="ZoomOut",t[t.ZoomOutX=4]="ZoomOutX",t[t.ZoomOutY=5]="ZoomOutY",t[t.ZoomToFit=6]="ZoomToFit",t[t.ToggleAnimations=7]="ToggleAnimations"}(vh||(vh={})),function(t){t[t.Circle=0]="Circle",t[t.Rectangle=1]="Rectangle",t[t.RoundedRectangle=2]="RoundedRectangle"}(xh||(xh={}));const bh={x:-43,y:0},Sh={x:-65,y:0},Ah={x:-86,y:0},Eh={x:-107,y:-1},kh={x:-128,y:-3},wh={x:-150,y:0},Mh={x:-171,y:0},Ch={x:-276,y:0},Th={x:-298,y:0},Fh={x:0,y:0},Ph={x:-21,y:0};class Bh extends mh{constructor(t,e,i,s){super(t,i),this.Me=Ur.document.createElement("button"),this.we=Ur.document.createElement("div"),this._e=Ur.document.createElement("label"),this.Se=i,this.ke=e,this.fs=s}Ce(t,e,i,s){this.Te(t,s),this.Fe(),this.Ie(e),this.Pe(),this._e.textContent=i||"";const r=Ur.document.createElement("div");this.Le(r),this.Me.onclick=this.onClick.bind(this),r.appendChild(this.we),r.appendChild(this._e),this.Me.appendChild(r)}Pe(){this.Me.style.cursor="pointer"}Le(t){t.style.display="flex",t.style.justifyContent="center",t.style.alignContent="center",t.style.flexDirection="column"}Ie(t){"string"==typeof t?(this.we.style.backgroundImage="url(".concat(t,")"),this.we.style.backgroundSize="100%",this.we.style.backgroundRepeat="no-repeat",this.we.style.backgroundPosition="center",this.we.style.width="20px",this.we.style.height="20px"):this.applyStyleForSprite(t),this.we.style.margin="auto"}Fe(){switch(this.ke){case xh.RoundedRectangle:this.Me.style.borderRadius="10px";break;case xh.Rectangle:this.Me.style.borderRadius="0px";break;case xh.Circle:default:this.Me.style.borderRadius="31px"}}Te(t,e){this.Me.style.width="".concat(this.xe.toString(),"px"),this.Me.style.height="".concat(this.be.toString(),"px"),this.Me.style.backgroundColor=t,this.Me.style.opacity=e||Zh,this.Me.style.alignItems="center",this.Me.style.border="2px solid #707070",this.Me.style.transition="background-color .8s ease"}applyStyleForSprite(t){this.we.style.backgroundImage="url(".concat(this.me,"/").concat(Jh,")"),this.we.style.backgroundPositionX="".concat(t.x,"px"),this.we.style.backgroundPositionY="".concat(t.y,"px"),this.we.style.backgroundSize="1600%",this.we.style.backgroundRepeat="no-repeat",this.we.style.width="20px",this.we.style.height="20px"}Be(t){return t.appendChild(this.Me),t}De(){return this.Me}}class Lh extends Bh{constructor(t,e,i,s){super(t,e,i,s),this.Re="",this.Ee="",this.Oe=!1,this.fs=s}ze(){this.Ve(),this.onToggledStateAction()}Ne(){this.Ge(),this.onInitialStateAction()}Ge(){this.$e(this.Re)}Ve(){this.$e(this.Ee)}$e(t){"string"==typeof t?this.we.style.background=t:(this.we.style.backgroundImage="url(".concat(this.me,"/").concat(Jh,")"),this.we.style.backgroundPositionX="".concat(t.x,"px"),this.we.style.backgroundPositionY="".concat(t.y,"px"))}onClick(){this.Oe?this.Ne():this.ze(),this.Oe=!this.Oe}}class Dh extends Bh{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.fs=e;const s=this.fs.getTheme();this.Ce(s.onScreenMenuBackgroundColor.toRGBAString(),bh)}onClick(){const t=this.fs.Ue();t&&this.fs.zoom(t,{x:-1,y:-1})}}class zh extends Bh{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.fs=e;const s=this.fs.getTheme();this.Ce(s.onScreenMenuBackgroundColor.toRGBAString(),Eh)}onClick(){const t=this.fs.Ue();t&&this.fs.zoom(t,{x:-1,y:0})}}class Ih extends Bh{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.fs=e;const s=this.fs.getTheme();this.Ce(s.onScreenMenuBackgroundColor.toRGBAString(),wh)}onClick(){const t=this.fs.Ue();t&&this.fs.zoom(t,{x:0,y:-1})}}class Rh extends Bh{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.fs=e;const s=this.fs.getTheme();this.Ce(s.onScreenMenuBackgroundColor.toRGBAString(),Sh)}onClick(){const t=this.fs.Ue();t&&this.fs.zoom(t,{x:1,y:1})}}class _h extends Bh{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.fs=e;const s=this.fs.getTheme();this.Ce(s.onScreenMenuBackgroundColor.toRGBAString(),kh)}onClick(){const t=this.fs.Ue();t&&this.fs.zoom(t,{x:1,y:0})}}class Vh extends Bh{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.fs=e;const s=this.fs.getTheme();this.Ce(s.onScreenMenuBackgroundColor.toRGBAString(),Mh)}onClick(){const t=this.fs.Ue();t&&this.fs.zoom(t,{x:0,y:1})}}class Nh extends Lh{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.fs=e;const s=this.fs.getTheme();this.Re=Ch,this.Ee=Th,this.Ce(s.onScreenMenuBackgroundColor.toRGBAString(),this.Re)}onToggledStateAction(){this.fs.setAnimationsEnabled(!1)}onInitialStateAction(){this.fs.setAnimationsEnabled(!0)}}class Oh extends Bh{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.fs=e;const s=this.fs.getTheme();this.Ce(s.onScreenMenuBackgroundColor.toRGBAString(),Ah)}onClick(){this.fs.forEachAxis(t=>{t.fit(!0)})}}class Yh extends Bh{constructor(t,e,i){super(t,e.shape||qh,e.dimensions||{rows:1,columns:1},i);const s=i.getTheme(),r=e.color||s.onScreenMenuBackgroundColor.toRGBAString(),n=e.icon||"",o=e.label||"",a=e.opacity||"";this.Ce(r,n,o,a),this.Ye=e.action}onClick(){this.Ye(this.fs)}}class Gh extends Lh{constructor(t,e,i,s){super(t,e,{rows:1,columns:1},i),this.fs=i,this.je=s,this.Re=Ph,this.Ee=Fh,this.Ce(Qh,this.Re)}Ge(){this.$e(this.Re),this.Me.style.backgroundColor=Qh,this.Me.style.border="2px solid #707070",this.Me.style.margin="0px"}Ve(){this.$e(this.Ee),this.Me.style.background="#FECC00 0% 0% no-repeat padding-box",this.Me.style.border="10px solid #BCBCBC12",this.Me.style.margin="1px"}onToggledStateAction(){var t;null===(t=this.je)||void 0===t||t.style.setProperty("display","block")}onInitialStateAction(){var t;null===(t=this.je)||void 0===t||t.style.setProperty("display","none")}}var Xh;!function(t){t.Move="move",t.ResizeColumn="col-resize",t.ResizeRow="row-resize",t.Horizontal="ew-resize",t.Vertical="ns-resize",t.NorthWest="nw-resize",t.NorthEast="ne-resize",t.Copy="copy",t.CrossHair="crosshair",t.Default="default",t.Help="help",t.Restricted="not-allowed",t.None="none",t.Point="pointer",t.Text="text",t.Wait="wait",t.ZoomIn="zoom-in",t.ZoomOut="zoom-out"}(Xh||(Xh={}));const Uh={LeftBottom:As(-1,-1),CenterBottom:As(0,-1),RightBottom:As(1,-1),LeftCenter:As(-1,0),Center:As(0,0),RightCenter:As(1,0),LeftTop:As(-1,1),CenterTop:As(0,1),RightTop:As(1,1)},Hh=new aa({color:Rs(255,255,255,0)}),jh=(new th({thickness:1,fillStyle:Hh}),60),Wh=60,Zh="1.0",Jh="osm/osm-sprite-transparent.png",qh=xh.Circle,Qh="#363636";var Kh;!function(t){t[t.TopRight=0]="TopRight",t[t.TopLeft=1]="TopLeft",t[t.BottomLeft=2]="BottomLeft",t[t.BottomRight=3]="BottomRight"}(Kh||(Kh={}));class $h extends Pa{constructor(t,e,i,s,r,n,o,a){super(t,e,i,s,r,n,o,a),this.Es="Band",this.He=0,this.We=1,this.Xe=this.bi.bandFillStyle,this.Ze=this.bi.bandStrokeStyle,this.L=new Ar,this.Je=this.Ws.qe(this.oi).Ke(this.Xe).Qe(this.Ze).Fi(this.getHighlight()),this._s(this.Je)}setValueStart(t){return this.He=t,this.L.D("valuechange",{start:this.He,end:this.We}),this.Ws.Bs(),this}getValueStart(){return this.He}setValueEnd(t){return this.We=t,this.L.D("valuechange",{start:this.He,end:this.We}),this.Ws.Bs(),this}getValueEnd(){return this.We}setFillStyle(t){this.Xe="function"==typeof t?t(this.Xe):t;const e=this.Xe;return this.Je.Ke(e),this.Ws.Bs(),this}getFillStyle(){return this.Xe}setStrokeStyle(t){this.Ze="function"==typeof t?t(this.Ze):t;const e=this.Ze;return this.Je.Qe(e),this.Ws.Bs(),this}getStrokeStyle(){return this.Ze}th(){return this.Je.ih(this.Xs.toVec2(this.He,this.Xs.getHeight(this.oi).getInnerStart())).X(this.Xs.toVec2(this.We-this.He,this.Xs.getHeight(this.oi).getInnerInterval())),Aa(this.Hs,[this.Je],this.oi),this}sh(){return{fill:this.Xe,stroke:this.Ze}}eh(t,e){t.Fi(e),this.Ws.Bs()}Zs(){let t,e,i;const s=(s,r,n)=>{const o=hr(this.Ws.gi.hh(s.clientX,s.clientY),this.Ws.gi.oi,this.oi),a=this.Xs.getWidth(o),h=this.axis.oi.Bt(this.He),l=this.axis.oi.Bt(this.We),c=(this.axis.oi.Bt(a)-h)/(l-h);t=r&&(!(c<.1||c>.9)||!n),e=n&&!t,e&&(i=c<.5)},r=i=>{const r=this.getUserInteractions(),n=ba(r.move,"drag",i,i.shiftKey,i.ctrlKey,i.altKey),o=ba(r.scale,"drag",i,i.shiftKey,i.ctrlKey,i.altKey);s(i,!!(null==n?void 0:n.drag),!!(null==o?void 0:o.drag));const a=t?Xh.Point:e?this.Xs.getWidth({x:Xh.Horizontal,y:Xh.Vertical}):Xh.Default;this.rh=this.fs.engine.setMouseStyle(a,this.rh)},n=t=>{this.rh=this.fs.engine.restoreMouseStyle(this.rh)};this.addEventListener("pointermove",r),this.addEventListener("pointerleave",n);const o=(s,r,n,o)=>{const a=this.Xs.getWidth(s);if(t){this.He=this.axis.oi.Jt(this.He,a),this.We=this.axis.oi.Jt(this.We,a);const t=null==n?void 0:n.on;t&&t({event:r})}else if(e&&i){this.He=this.axis.oi.Jt(this.He,a);const t=null==o?void 0:o.on;t&&t({event:r})}else if(e&&!i){this.We=this.axis.oi.Jt(this.We,a);const t=null==o?void 0:o.on;t&&t({event:r})}mn(r),this.L.D("valuechange",{start:this.He,end:this.We}),this.Ws.Bs()};this.addEventListener("pointerdown",i=>{const s=this.getUserInteractions(),a=ba(s.move,"drag",i,i.shiftKey,i.ctrlKey,i.altKey),h=ba(s.scale,"drag",i,i.shiftKey,i.ctrlKey,i.altKey);if(!(null==a?void 0:a.drag)&&t)return;if(!(null==h?void 0:h.drag)&&e)return;mn(i);let l=i;const c=t=>{if(t.pointerId!==i.pointerId)return;const e={x:t.clientX-l.clientX,y:l.clientY-t.clientY};o(e,t,a,h),l=t},u=t=>{t.pointerId===i.pointerId&&(this.addEventListener("pointermove",r),this.addEventListener("pointerleave",n),Ur.removeEventListener("pointermove",c),Ur.removeEventListener("pointerup",u),eo())};this.removeEventListener("pointermove",r),this.removeEventListener("pointerleave",n),Ur.addEventListener("pointermove",c),Ur.addEventListener("pointerup",u)})}setUserInteractions(t){return this.oh=void 0===t?{move:!1,scale:!1}:t,this}getUserInteractions(){return Gr({move:{drag:!0},scale:{drag:!0}},this.oh)}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class tl extends Pa{constructor(t,e,i,s,r,n,o,a){super(t,e,i,s,r,n,o,a),this.Es="Constant Line",this.S=0,this.Ze=this.bi.constantLineStrokeStyle,this.ah=!0,this.L=new Ar,this.uh=this.Ws.fh(this.oi).dh(this.Ze).Fi(this.getHighlight()),this._s(this.uh)}setValue(t){return this.S=t,this.L.D("valuechange",{value:this.S}),this.Ws.Bs(),this}getValue(){return this.S}setStrokeStyle(t){this.Ze="function"==typeof t?t(this.Ze):t;const e=this.Ze;return this.uh.dh(e),this.Ws.Bs(),this}getStrokeStyle(){return this.Ze}th(){return this.uh.gh(this.Xs.toVec2(this.S,this.Xs.getHeight(this.oi).getInnerStart())).Ah(this.Xs.toVec2(this.S,this.Xs.getHeight(this.oi).getInnerEnd())),Aa(this.Hs,[this.uh],this.oi),this}sh(){return{stroke:this.Ze}}eh(t,e){t.Fi(e),this.Ws.Bs()}setUserInteractions(t){return this.oh=void 0===t?{move:!1}:t,this}getUserInteractions(){return Gr({move:{drag:!0}},this.oh)}Zs(){this.addEventListener("pointerenter",t=>{const e=this.getUserInteractions();if(ba(e.move,"drag",t,t.shiftKey,t.ctrlKey,t.altKey)){const t=this.Xs.getWidth({x:Xh.Horizontal,y:Xh.Vertical});this.rh=this.fs.engine.setMouseStyle(t,this.rh)}}),this.addEventListener("pointerleave",t=>{this.rh=this.fs.engine.restoreMouseStyle(this.rh)}),this.addEventListener("pointerdown",t=>{const e=this.getUserInteractions(),i=ba(e.move,"drag",t,t.shiftKey,t.ctrlKey,t.altKey);if(i){mn(t),eo();let e=t;const s=t=>{const s={x:t.clientX-e.clientX,y:e.clientY-t.clientY};e=t,this.S=this.axis.oi.Jt(this.S,this.Xs.getWidth(s)),this.L.D("valuechange",{value:this.S}),this.Ws.Bs();const r=i.on;r&&r({event:t})},r=e=>{e.pointerId===t.pointerId&&(Ur.removeEventListener("pointermove",s),Ur.removeEventListener("pointerup",r))};Ur.addEventListener("pointermove",s),Ur.addEventListener("pointerup",r)}})}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}const el="fitting",il="expansion",sl="progressive",rl="regressive",nl=t=>{const e=void 0===(null==t?void 0:t.start)||t.start,i=void 0===(null==t?void 0:t.end)||t.end,s=void 0===(null==t?void 0:t.considerVisibleRangeOnly)||t.considerVisibleRangeOnly;return{id:el,init:t=>{t.axis.yh(t=>t.curEnd>t.curStart?{startMin:t.dataMin,endMax:t.dataMax}:{endMin:t.dataMin,startMax:t.dataMax})},considerVisibleRangeOnly:s,apply:t=>{if(t.seriesDataRange)return{start:e?t.curEnd>=t.curStart?t.seriesDataRange.min:t.seriesDataRange.max:t.curStart,end:i?t.curEnd>=t.curStart?t.seriesDataRange.max:t.seriesDataRange.min:t.curEnd,allowIntervalLengthChange:!0}}}},ol=t=>{const e=void 0===(null==t?void 0:t.start)||t.start,i=void 0===(null==t?void 0:t.end)||t.end;return{id:il,considerVisibleRangeOnly:!0,apply:t=>{if(void 0!==t.seriesDataRange)return{start:e?t.curEnd>=t.curStart?t.seriesDataRange.min<t.curStart?t.seriesDataRange.min:t.curStart:t.seriesDataRange.max>t.curStart?t.seriesDataRange.max:t.curStart:t.curStart,end:i?t.curEnd>=t.curStart?t.seriesDataRange.max>t.curEnd?t.seriesDataRange.max:t.curEnd:t.seriesDataRange.min<t.curEnd?t.seriesDataRange.min:t.curEnd:t.curEnd,allowIntervalLengthChange:!0}}}},al="Empty",hl="Numeric",ll=t=>void 0!==t.mh,cl=t=>void 0!==t.Sh,ul=t=>void 0!==t.bh,dl=(t,e,i,s,r,n,o)=>[n,o],fl=(t,e,i,s)=>{const r=[],n=Math.round(Math.abs((t-e)/i));for(let o=1;o<n;o+=1){let n=t+i*o;void 0!==s&&(n=Math.round(n*s)/s),n<e&&r.push(n)}return r},gl=(t,e,i,s,r)=>{qr(t,0)&&(t=0),qr(e,0)&&(e=0);const n=[],o=void 0!==s?((t,e,i)=>t-(t-i)%e)(t,i,s):t;let a=o;if(i<=0)throw new Error("_getRegularGreatKeyValues unit less than or equal to 0, unit: ".concat(i));let h=0;for(;(a-t)/(e-t)<.98;)n.push(a),h+=1,a=o+h*i,void 0!==r&&(a=Math.round(a*r)/r);return n.push(a),n},pl=(t,e,i,s)=>{const r=[];let n=i(t),o=0;for(;n<e&&!1===qr(n,e);)if(r.push(n),n=s(n),o+=1,o>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return r.push(n),r},yl=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];const r=i.length>0?i.length:t?1:0;return(e,s,n,o,a,h)=>{if(s>=r)return;const l=i[s]||1;let c=!1,u=!1,d=1;return t&&(c="ignore"in t?"first"===t.ignore||"both"===t.ignore:c,u="ignore"in t?"last"===t.ignore||"both"===t.ignore:u,d="offset"in t&&void 0!==t.offset?t.offset:d),((t,e,i,s,r)=>(i&&(t=t.filter((t,e)=>e>0)),s&&(t=t.filter((e,i)=>i<t.length-1)),t.filter((t,i)=>(i+r)%e==0)))(e,l,c,u,d)}},ml=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];const s=e.length>0?e.length:0;return(t,i,r,n,o,a)=>{if(i>=s)return;const h=e[i]||1;return t.filter((t,e)=>e%h==0)}},vl=fs({cursorFormatter:void 0});class xl extends vl{xh(t){return{Mh:[],wh:[],_h:this.cursorFormatter?this.cursorFormatter:qo.Numeric,kh:void 0,Ch:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}}const bl=t=>t&&"function"==typeof t?t():t,Sl=(t,e,i,s,r,n,o,a,h,l,c)=>{let u=h.get(o);if(u||(u=new Map,h.set(o,u)),u.has(t))return u.get(t);if(0===e.length)return oo;const d=c.Th(e,o.Fh.labelFont,r),f=a.Jt(i,{x:-(s.x/2+.5)*d.x+n.x-l,y:-(s.y/2+.5)*d.y+n.y-l}),g=a.Jt(f,{x:d.x+l,y:d.y+l}),p={min:{x:Math.min(f.x,g.x),y:Math.min(f.y,g.y)},max:{x:Math.max(f.x,g.x),y:Math.max(f.y,g.y)}};return u.set(t,p),p},Al=(new xl).xh({type:"linear"});class El{constructor(t,e,i,s,r,n,o){this.Ih=Al,this.Ph=al,this.Lh=new Map,this.Bh=!0,this.Dh=Mr(()=>this.chart.gi.Bs())(300,kr.linear),this.Rh=!0,this.ui=!0,this.Eh=!1,this.Oh=no,this.zh=!1,this.Vh=!1,this.Nh=no,this.Gh=no,this.$h=no,this.Uh=!1,this.Yh="",this.jh=!1,this.Hh=!1,this.Wh=!1,this.Xh=()=>{this.Jh.Zh=Ta.AxisTitle,this.Jh.setPointerEvents(!0),this.title.Oi(this.Jh),this.Xh=void 0},this.Qh=(t,e,i,s,r,n,o,a,h,l,c)=>{const u=this.Kh(),d=[],f=t.filter(t=>this.qh(t.keyValue,t.labelText,e)),g=[...f,...h.filter(t=>this.qh(t.keyValue,t.labelText,t.tickLevel)),...l.filter(t=>t.labelText.length>0)];for(let p=0;p<f.length;p+=1){const t=f[p];let h,l=[];if(this.qh(t.keyValue,t.labelText,e)){const i=Sl(t.keyValue,t.labelText,t.labelPosition,t.labelAlignment,t.labelRotation,t.labelOffset,e,u,a,c,this.chart.gi.tr);l=On(g.map(e=>e&&e!==t&&lo(i,Sl(e.keyValue,e.labelText,e.labelPosition,e.labelAlignment,e.labelRotation,e.labelOffset,e.tickLevel,u,a,c,this.chart.gi.tr))?e:void 0)),h=l.length>0}else h=!1;if(h){let a=!0;if(a&&l.every(t=>ll(t.tickLevel))&&(a=!1),a&&e.ir&&e.ir.sr&&!1===e.ir.sr(t.keyValue,i,s,r,n,o)&&(a=!1),!1===a){f.splice(p,1),p-=1;continue}return!0}d.push(t)}return d},this.formatValue=t=>this.Ih._h(t,{start:this.oi.getInnerStart(),end:this.oi.getInnerEnd()}),this.er=!0,this.hr=!0,this.title=new Ar,this.chart=t,this.rr=e,this.bi=s,this.nr=n,this.oi=i,this.ar=o,"logarithmic"===o.type&&this.setAnimationZoom(kr.logarithmic(Ho(o.base))),this.lr=n.numeric,this.cr("Numeric"),this.ur=i.getInnerStart(),this.dr=i.getInnerEnd(),this.setAnimationsEnabled(r),this.setScrollStrategy(nl)}setUnits(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.Ar=t,this.cs=e,this.gr(),this}getUnits(){return this.Ar}setDefaultInterval(t,e){return this.vr=t,!1!==(null==e?void 0:e.applyImmediately)&&(this.Uh=!0,this.chart.gi.Bs()),this.yr=void 0!==(null==e?void 0:e.skipIntervalRestrictions)?e.skipIntervalRestrictions:void 0,this}getDefaultInterval(){return this.vr}getTitle(){return this.Yh}setTitle(t){return this.Yh=t,this.gr(),this}getTitleFillStyle(){return this.Jh.pr()}setIntervalRestrictions(t){return this.mr=t,this.jh=!0,this.chart.gi.Bs(),this}getIntervalRestrictions(){if("function"==typeof this.mr){const t=this.Sr();return this.mr({curStart:this.ur,curEnd:this.dr,dataMin:null==t?void 0:t.min,dataMax:null==t?void 0:t.max})}return this.mr}yh(t){this.jh||this.Hh||(this.mr=t)}setTitleFillStyle(t){return this.Jh.Ke(t),this.chart.gi.Bs(),this}getTitleFont(){return this.Jh.br()}setTitleFont(t){return this.Jh.Mr(t),this.chart.gi.Bs(),this}setTitleRotation(t){return this.Jh.wr(t),this.chart.gi.Bs(),this.Wh=!0,this}getTitleRotation(){return this.Jh._r()}setTitleEffect(t){return this.kr.Ls(t),this.chart.gi.Bs(),this}getTitleEffect(){return this.kr.Ds()}cr(t,e){if(this.Lh.size>0&&this.Cr(),"Empty"===t){const i=e||(t=>t);this.lr=i(new xl),this.Ih=this.lr.xh(this.ar),this.Ph=t}else if("Numeric"===t){"Numeric"!==this.Ph&&(this.lr=this.nr.numeric);const i=e||(t=>t);this.lr=i(this.lr),this.Ih=this.lr.xh(this.ar),this.Ph=t}else if("DateTime"===t){"DateTime"!==this.Ph&&(this.lr=this.nr.datetime);const i=e||(t=>t);this.lr=i(this.lr),this.Ih=this.lr.xh(this.ar),this.Ph=t}else if("Time"===t){"Time"!==this.Ph&&(this.lr=this.nr.time);const i=e||(t=>t);this.lr=i(this.lr),this.Ih=this.lr.xh(this.ar),this.Ph=t}return this.chart.gi.Bs(),this}Tr(){return this.Ih}Fr(t,e){this.Ih=t,this.Ph=e,this.chart.gi.Bs()}setInterval(t){const{start:e,end:i,animate:s,stopAxisAfter:r}=t;return this.jh||(this.Hh=!0,this.mr=void 0),this.ai(void 0!==e?e:this.ur,void 0!==i?i:this.dr,void 0!==s&&s,void 0===r||r,"userSetInterval"),this}ai(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4?arguments[4]:void 0,n={start:t,end:e};const o="synchronizedAxis"===r||"setDefaultInterval"===r&&!1!==this.yr,a="setDefaultInterval"!==r,h=Math.abs(e-t),l=Math.abs(this.dr-this.ur);if(void 0!==this.Ih.kh&&this.Ih.kh>h){const i=(e+t)/2,s=(a?this.Ih.kh/2:l/2)*(t>e?-1:1);n={start:i-s,end:i+s}}if(void 0!==this.Ih.Ch&&this.Ih.Ch<h){const i=(e+t)/2,s=(a?this.Ih.Ch/2:l/2)*(t>e?-1:1);n={start:i-s,end:i+s}}const c=this.oi.st(n.start,n.end,this.ur,this.dr,a);if(!1===c)return this;if(!0===c);else if(n=c,"zoomBandChartOther"===r)return this;let u;switch(r){case"userSetInterval":case"userFit":case"interactionSetInterval":case"interactionZoom":case"setDefaultInterval":case"zoomBandChartClick":u=!0;break;case"zoomBandChartOther":case"synchronizedAxis":u=!1;break;default:return Gn(0,""),this}if(this.Ir&&this.Ir.finishAll(!1),this.Dh&&(!0===i||i>0)){this.setStopped(!0);const t=!0===i?void 0:i,e=!this.Ir||this.Ir.isOver()?this.Dh:this.Ir.NextAnimation.bind(this);this.Ir=e([[this.ur,n.start],[this.dr,n.end]],t=>{let[e,i]=t;this.Pr(e,i,{allowIntervalLengthChange:a,skipIntervalRestriction:o})},t),this.Ir.addEventListener("end",()=>{this.Ir=void 0,u&&(this.$h=Ur.performance.now())}),this.Ir.addEventListener("end",()=>{this.setStopped(s)})}else this.Pr(n.start,n.end,{allowIntervalLengthChange:a,skipIntervalRestriction:o}),this.setStopped(s),u&&(this.$h=Ur.performance.now());return this}getInterval(){return{start:this.ur,end:this.dr}}setStopped(t){return t===this.Eh||(t&&(this.Ir&&this.Ir.finishAll(!1),this.Ir=void 0),this.Eh=t,this.L.D("stoppedchange",{isStopped:this.Eh}),this.Oh=Ur.performance.now(),this.chart.gi.Bs()),this}getStopped(){return this.Eh}fit(t,e){const i=this.Sr(),s=this.vr||Tl,r="function"==typeof s?s({curStart:this.ur,curEnd:this.dr,dataMin:null==i?void 0:i.min,dataMax:null==i?void 0:i.max}):s;return this.ai(void 0!==r.start?r.start:this.ur,void 0!==r.end?r.end:this.dr,void 0!==t?t:void 0!==r.animate?r.animate:this.Rh,void 0!==e?e:void 0===r.stopAxisAfter||r.stopAxisAfter,this.vr?"setDefaultInterval":"userFit"),this}setScrollStrategy(t){var e,i;return(null===(e=this.Lr)||void 0===e?void 0:e.dispose)&&this.Lr.dispose({axis:this}),this.Lr=bl(t),this.jh||(this.mr=void 0),(null===(i=this.Lr)||void 0===i?void 0:i.init)&&this.Lr.init({axis:this}),this.chart.gi.Bs(),this}getScrollStrategy(){return this.Lr}setAnimationScroll(t){return this.Bh=Boolean(t),this.chart.gi.Bs(),this}setAnimationZoom(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return this.Ir&&(this.Ir.finishAll(!1),this.Ir=void 0),this.Dh=t?Mr(()=>this.chart.gi.Bs())(e,t):void 0,this}setAnimationsEnabled(t){return this.Rh=t,t?(this.setAnimationScroll(!0),this.setAnimationZoom(kr.ease,void 0)):(this.setAnimationScroll(void 0),this.setAnimationZoom(void 0)),this}getAnimationsEnabled(){return this.Rh}setVisible(t){const e=this.ui!==t;return this.ui=t,this.Jh.setVisible(t),this.Br(e=>{e.Dr.setVisible(t)}),e&&this.L.D("visiblechange",{isVisible:this.ui}),this}getVisible(){return this.ui}Rr(t){return!1}Er(t){this.Xh&&this.Xh(),this.title.setPointerEvents(this.title.Bi.length>0);const e=this.Or(),i=e.min,s=e.max;if(!this.Rr(t)||!this.zr||this.Wh){const e=new Map,r=new Map,n=wl(this.Ih,i,s,this.ur,this.dr,t.physicalAxisSize,Math.min(this.ur,this.dr),Math.max(this.ur,this.dr));this.Vr();const o=Ia(3,20,Qr((t.physicalAxisSize-30)/270,0,1)),a=l(l({},t),this.Nr(t)),h=this.Gr(this.Ih,Math.min(i,this.ur,this.dr),Math.max(s,this.ur,this.dr),n,e,a,r,o),c=this.$r(this.Ih,Math.min(i,this.ur,this.dr),Math.max(s,this.ur,this.dr),n,e,a,h,r,o),u=new Map([...h,...c]),d=this.Ih.Ur,f=void 0!==this.Ih.wh.find(t=>cl(t)&&!ra(t.Fh.labelFillStyle));if(d&&f&&Array.from(u).reduce((t,e)=>t+(e[1].labelText.length>0&&!ra(e[0].Dr.pr())?1:0),0)<=1){this.Vr(),u.clear();const e=[Math.min(this.ur,this.dr),Math.max(this.ur,this.dr)],i={start:this.oi.getInnerStart(),end:this.oi.getInnerEnd()};e.forEach(e=>{const s=this.Yr(e,d,d.Sh(e,i),t,a),r=this.jr(s.keyValue,d,a,s,s.labelText);u.set(r,s)})}return this.Hr(),this.zr=l(l(l({},a),this.Wr(t,u,!0)),{},{min:i,max:s}),this.zr}let r=!1;return this.Lh.forEach(t=>{t.forEach((e,n)=>{(n<i||n>s)&&(e.dispose(),t.delete(n),r=!0)})}),l(l({},this.zr),{},{updatedTicks:r})}Xr(t,e,i){const s=e.Fh;i.length>0?t.Dr.Ke(s.getLabelFillStyle()).Mr(s.getLabelFont()).Jr(i).setVisible(this.getVisible()).Zr(s.getLabelShadow()):t.Dr.setVisible(!1)}jr(t,e,i,s,r){const n=this.Lh.get(e)||new Map;this.Lh.set(e,n);let o=n.get(t);return o||(o=this.Qr(t,e,i,s),n.set(t,o)),this.Xr(o,e,r),o.Kr=!1,o}Gr(t,e,i,s,r,n,o,a){const h=new Map,l=this.Kh(),c=[];for(const u of t.Mh){const t=s.get(u).filter(t=>t>=e&&t<=i),d=t.map(t=>this.Yr(t,u,u.Sh(t,{start:this.oi.getInnerStart(),end:this.oi.getInnerEnd()}),n,n));for(let e=0;e<t.length;e+=1){const i=t[e],s=d[e],f=this.jr(i,u,n,s,s.labelText),g=Sl(f.S,f.Dr.qr(),s.labelPosition,s.labelAlignment,s.labelRotation,{x:0,y:0},u,l,r,a,this.chart.gi.tr);c.find((t,e)=>{const i=d[e];return lo(g,Sl(t.S,t.Dr.qr(),i.labelPosition,i.labelAlignment,i.labelRotation,{x:0,y:0},u,l,r,a,this.chart.gi.tr))})&&f.Dr.setVisible(!1),f.Kr=!1,o.set(f,s),c.push(f),h.set(f,s)}}return h}$r(t,e,i,s,r,n,o,a,h){var l;const c={start:this.oi.getInnerStart(),end:this.oi.getInnerEnd()},u=new Map,d=Array.from(o.values());let f,g=[];for(const p of t.wh){const y=p===t.wh[t.wh.length-1],m=s.get(p);if(!m)break;let v;if(void 0===f)v=[{start:e,end:i,keyValues:m}];else{v=[];for(let t=0;t<f.length-1;t+=1){const s=f[t],r=f[t+1],n={start:s,end:r,keyValues:[]};for(const t of m)t>=s&&t<r&&n.keyValues.push(t);n.end<e||n.start>i||v.push(n)}}if(f=m,ul(p))continue;let x,b=0,S=!1,A=-1,E=!0,k=[];for(let t=0;t<v.length;t+=1){const e=v[t].keyValues.map(t=>this.Yr(t,p,p.Sh(t,c),n,n));k=k.concat(e)}if(p.Fh.getLabelFillStyle()!==sa)for(x=[];++A<v.length;){const t=v[A],s=t.start,n=t.end;let a=t.keyValues;if(b>0){if(void 0===p.ir){E=!1;break}if(a=(0,p.ir.tn)(t.keyValues,b-1,s,n,e,i),void 0===a)break}const l=On(a.map(t=>k.find(e=>e.keyValue===t)));if(S)x=x.concat(l);else{const t=this.Qh(l,p,b,s,n,e,i,r,d,g,h);if(!0===t){b+=1,A=-1,x=[];continue}x=x.concat(t)}t!==v[v.length-1]||o.size+x.reduce((t,s)=>t+(yo(s.keyValue,e,i)?1:0),0)>=2||y||S||(S=!0,b-=1,A=-1,x=[])}else x=k;const w=x.reduce((t,s)=>t+(yo(s.keyValue,e,i)?1:0),0);void 0!==p.sn&&w<p.sn&&(x.length=0);const M=[];for(const t of k){if(t.keyValue<e||t.keyValue>i)continue;const s=x.includes(t);if(!s&&"hide-tick"===(null===(l=p.ir)||void 0===l?void 0:l.en))continue;t.labelText=s?t.labelText:"";const r=this.jr(t.keyValue,p,n,t,t.labelText);a.set(r,t),M.push(t),u.set(r,t)}if(g=M,!E)break}return u}Br(t){for(const e of this.Lh.values())for(const i of e.values())t(i)}hn(t,e){for(const i of this.Lh.values())for(const s of i.values())e=t(e,s);return e}Cr(){this.Lh.forEach((t,e)=>{t.forEach(t=>{t.dispose()})}),this.Lh.clear()}Vr(){for(const t of this.Lh.values())for(const e of t.values())e.Kr=!0}Hr(){for(const t of this.Lh.values()){const e=Array.from(t.entries());for(let i=0;i<e.length;i+=1){const[s,r]=e[i];r.Kr&&(r.dispose(),t.delete(s))}}}Or(){const t=this.oi.getInnerStart()<this.oi.getInnerEnd()?this.oi.getInnerStart():this.oi.getInnerEnd(),e=this.oi.getInnerEnd()>this.oi.getInnerStart()?this.oi.getInnerEnd():this.oi.getInnerStart();return Cs(t,e)}qh(t,e,i){return 0!==e.length&&(!ll(i)||!0===i.rn)}nn(t,e){return"Empty"===this.Ph||(this.Ih.Mh.forEach(i=>{e=t(e,i.Fh)}),this.Ih.wh.forEach(i=>{cl(i)&&(e=t(e,i.Fh))})),e}getSeriesDataRange(){const t=this.Sr();if(t&&!0!==t.emptyBounds)return t}ph(t){const e=void 0!==t.forStart?t.forStart:this.ur,i=void 0!==t.forEnd?t.forEnd:this.dr,s=this.Sr();if(s)return Cl(this.mr,s,{start:i>e?s.min:s.max,end:i>e?s.max:s.min},{start:e,end:i},!0)}Sr(){const t=!this.Lr||this.Lr.considerVisibleRangeOnly;let e=this.rr.an(t);const i=this.rr.ln(t);let s;if(void 0!==e&&jr(e)&&void 0!==i&&jr(i)&&("logarithmic"===this.ar.type&&(0===e&&(e=Math.min(1,i)),Math.sign(e)!==Math.sign(i)&&(e=Math.min(1,i-.1))),s?(s.min=Math.min(s.min,e),s.max=Math.max(s.max,i)):s=Cs(e,i)),s&&jr(s.min)&&jr(s.max))return qr(s.min,s.max)?{min:s.min-1,max:s.max+1,emptyBounds:!0}:s}cn(){if(!1===this.er)return{start:0,end:0};if("object"==typeof this.er)return this.er;let t=0;const e=this.rr.un();return e&&(t=Math.max(t,e)),{start:t,end:t}}setScrollMargins(t){return this.er=void 0!==t&&("number"==typeof t?{start:t,end:t}:t),this.chart.gi.Bs(),this}getScrollMargins(){return this.er}setAutoRegionsEnabled(t){return this.setScrollMargins(t),this}dn(){const t=this.zh;let e=!1;if(this.Uh&&this.vr){const t=this.Sr();if(t){const e="function"==typeof this.vr?this.vr({curStart:this.ur,curEnd:this.dr,dataMin:null==t?void 0:t.min,dataMax:null==t?void 0:t.max}):this.vr;if("object"==typeof this.vr&&!this.jh){const i=Cl(this.mr,t,{start:void 0!==e.start?e.start:this.ur,end:void 0!==e.end?e.end:this.dr},this.getInterval(),!0);i.start===e.start&&i.end===e.end||(this.Hh=!0,this.mr=void 0)}this.ai(void 0!==e.start?e.start:this.ur,void 0!==e.end?e.end:this.dr,void 0!==e.animate&&e.animate,void 0===e.stopAxisAfter||e.stopAxisAfter,"setDefaultInterval"),this.Uh=!1,this.yr=void 0}}if(this.Lr&&!this.Eh){let t=this.Sr();(null==t?void 0:t.emptyBounds)&&this.Lr.id===il&&(t=void 0);const i=this.ur,s=this.dr,r=this.Lr.apply({axis:this,curStart:i,curEnd:s,seriesDataRange:t});if(r){const n=Cl(this.mr,t,{start:r.start,end:r.end},{start:i,end:s},r.allowIntervalLengthChange);let o=n.start,a=n.end;const h=!1===qr(i,o)||r.keepScrolling,l=!1===qr(s,a)||r.keepScrolling;if(o=h?o:i,a=l?a:s,h||l){let t=!1;if(this.Bh&&!this.hr&&!1!==r.allowAnimation)if(this.Bh){t=!0;const n=h?this.fn(i,o):i,c=l?this.fn(s,a):s;if(!0===this.Pr(n,c,{allowIntervalLengthChange:r.allowIntervalLengthChange,skipIntervalRestriction:!1})&&(h&&!1===qr(n,o)||l&&!1===qr(c,a))||!0===r.keepScrolling){this.chart.gi.Bs(!0),e=!0;let t=Math.abs(a-o)/Math.abs(n-c);t<1&&(t=1/t),this.Vh=t>=1.4}}else t=!1;t||(this.Pr(o,a,{allowIntervalLengthChange:r.allowIntervalLengthChange,skipIntervalRestriction:!1}),!0===r.keepScrolling&&this.chart.gi.Bs(!0)),this.hr=!1}}}return e?(this.zh!==e&&(this.zh=e,this.Nh=Ur.performance.now()),this.An&&(clearTimeout(this.An),this.An=void 0)):!0===t&&void 0===this.An&&(this.Vh=!1,this.An=setTimeout(()=>{!1!==this.zh&&(this.zh=!1,this.Nh=Ur.performance.now()),this.An=void 0,this.chart.gi.Bs()},200)),this}gn(){const t=this.getInterval(),e=this.Sr();return"function"==typeof this.mr?this.mr({curStart:t.start,curEnd:t.end,dataMin:null==e?void 0:e.min,dataMax:null==e?void 0:e.max}):this.mr}Pr(t,e,i){let s={start:t,end:e};const{allowIntervalLengthChange:r,skipIntervalRestriction:n}=i;let o=!0;if(this.mr&&!n){const t=this.Sr();s=Cl(this.mr,t,s,{start:this.ur,end:this.dr},r)}const a=Math.abs(e-t),h=Math.abs(this.dr-this.ur);if(void 0!==this.Ih.kh&&this.Ih.kh>a){const i=(e+t)/2,n=(r?this.Ih.kh/2:h/2)*(t>e?-1:1);s={start:i-n,end:i+n},o=!1}if(void 0!==this.Ih.Ch&&this.Ih.Ch<a){const i=(e+t)/2,n=(r?this.Ih.Ch/2:h/2)*(t>e?-1:1);s={start:i-n,end:i+n},o=!1}let l=this.oi.st(s.start,s.end,this.ur,this.dr,r);if(!1===l)return!1;!0!==l&&(s=l);const c=this.cn(),u=this.vn(s.start,s.end,c);return l=this.oi.st(u.start,u.end,this.ur,this.dr,!1),!!l&&(!0===l?this.oi.H(u.start,u.end):this.oi.H(s.start,s.end),this.ur=s.start,this.dr=s.end,this.L.D("intervalchange",{start:s.start,end:s.end}),this.Gh=Ur.performance.now(),this.chart.gi.Bs(),o)}yn(){return this.zh}pn(){return void 0!==this.Ir}gr(){var t;const e=!1!==(null===(t=this.cs)||void 0===t?void 0:t.displayOnAxis);this.Jh.Jr(this.Ar&&e&&this.Yh?"".concat(this.Yh," (").concat(this.Ar,")"):this.Yh),this.chart.gi.Bs()}}class kl{constructor(t,e,i,s){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i.bn(s).Sn(Zn).mn(Zn).setPointerEvents(!1);this.Kr=!1,this.ci=!1,this.gs=[],this.xn=t,this.S=e,this.Mn=i,this.wn=s,this.Dr=r,this.gs.push(r)}Fs(t){this.gs.forEach(e=>e.setVisible(t))}dispose(){return this.ci||(this.ci=!0,this.gs.forEach(t=>t.dispose())),this}}const wl=function(t,e,i,s,r,n,o,a){let h=arguments.length>8&&void 0!==arguments[8]&&arguments[8];const l=new Map;for(const u of t.Mh){let t=u._n(e,i,s,r,n,o,a);t=Ml(t),l.set(u,t)}let c;for(const u of t.wh){let s;if(void 0===c)s=u._n(e,i,e,i,n);else{if(h&&u===t.wh[t.wh.length-1])break;let r=[];const o=c.filter(t=>e<=t&&t<=i).length;if(o>0){const t=n/(o-1);if(void 0!==u.kn&&u.kn>t)break}for(let t=0;t<c.length-1;t+=1){const s=u._n(c[t],c[t+1],e,i,n);r=r.concat(s)}s=r}s=Ml(s),l.set(u,s),c=s}return l},Ml=t=>Array.from(new Set(t)),Cl=(t,e,i,s,r)=>{const n="function"==typeof t?t({curStart:s.start,curEnd:s.end,dataMin:null==e?void 0:e.min,dataMax:null==e?void 0:e.max}):t;if(!n)return i;const o={start:i.start,end:i.end};let a=Math.abs(i.end-i.start);if(void 0!==n.intervalMin&&a<n.intervalMin){const t=(o.start+o.end)/2;o.start=t+.5*Math.sign(i.start-t)*n.intervalMin,o.end=t+.5*Math.sign(i.end-t)*n.intervalMin}if(a=Math.abs(i.end-i.start),void 0!==n.intervalMax&&a>n.intervalMax){const t=(o.start+o.end)/2;o.start=t+.5*Math.sign(i.start-t)*n.intervalMax,o.end=t+.5*Math.sign(i.end-t)*n.intervalMax}return a=Math.abs(i.end-i.start),void 0!==n.startMin&&(o.start=Math.max(o.start,n.startMin),r||qr(Math.abs(o.start-o.end),a)||(o.end=o.start+Math.sign(i.end-i.start)*a)),a=Math.abs(i.end-i.start),void 0!==n.startMax&&(o.start=Math.min(o.start,n.startMax),r||qr(Math.abs(o.start-o.end),a)||(o.end=o.start+Math.sign(i.end-i.start)*a)),a=Math.abs(i.end-i.start),void 0!==n.endMin&&(o.end=Math.max(o.end,n.endMin),r||qr(Math.abs(o.start-o.end),a)||(o.start=o.end+Math.sign(i.start-i.end)*a)),a=Math.abs(i.end-i.start),void 0!==n.endMax&&(o.end=Math.min(o.end,n.endMax),r||qr(Math.abs(o.start-o.end),a)||(o.start=o.end+Math.sign(i.start-i.end)*a)),Math.sign(o.end-o.start)!==Math.sign(i.end-i.start)?{end:o.start,start:o.end}:o},Tl=t=>{if(void 0===t.dataMin||void 0===t.dataMax)return{stopAxisAfter:!1};const e=t.curEnd>=t.curStart;return{start:e?t.dataMin:t.dataMax,end:e?t.dataMax:t.dataMin,stopAxisAfter:!1}},Fl=t=>{const e=t.getDraggingMode();return void 0!==e&&e!==Vr.notDraggable?e===Vr.draggable?Xh.Move:e===Vr.onlyHorizontal?Xh.Horizontal:Xh.Vertical:void 0};class Pl{constructor(){this.ui=!0}set draggable(t){this.L.draggable=t}get draggable(){return this.L.draggable}setPointerEvents(t){return this.L.setPointerEvents(t),this}getPointerEvents(){return this.L.getPointerEvents()}setVisible(t){const e=this.ui!==t;return this.ui=t,e&&this.L.D("visiblechange",{isVisible:this.ui}),this}getVisible(){return this.ui}}class Bl extends Pl{constructor(t,e,i,s,r){super(),this.L=new Ar,this.Cn=As(50,50),this.origin=As(0,0),this.size=As(0,0),this.ci=!1,this.Tn=void 0,this.Fn=void 0,this.In=Fl,this.Pn=void 0,this.nt=Ps(0,0,0,0),this.Ws=t,this.renderingScale=e,this.scale=i,this.yi=s,this.bi=r,this.Ws.Bs(),this.bi=r,this.addEventListener("pointerenter",()=>{const t="function"==typeof this.In?this.In(this):this.In;t&&(this.Fn=this.Ws.gi.Ln(t))}),this.addEventListener("pointerleave",()=>{this.Ws.gi.Bn(this.Fn)});const n=t=>{const e=this.getDraggingMode();if(e===Vr.notDraggable)return;mn(t);let i=t;const s=t=>{const s={x:t.clientX-i.clientX,y:t.clientY-i.clientY};i=t;const r=this.scale.Jt(this.getPosition(),{x:e!==Vr.onlyVertical?s.x:0,y:e!==Vr.onlyHorizontal?-s.y:0}),n=this.scale,o=this.getSize(),a=this.getOrigin(),h=n.Jt({x:n.x.getInnerStart(),y:n.y.getInnerStart()},zo({x:(1+a.x)/2,y:(1+a.y)/2},o)),l=n.Jt({x:n.x.getInnerEnd(),y:n.y.getInnerEnd()},zo({x:(a.x-1)/2,y:(a.y-1)/2},o)),c={x:Math.min(Math.max(r.x,h.x),l.x),y:Math.min(Math.max(r.y,h.y),l.y)};this.setPosition(c)},r=t=>{this.Ws.gi.Dn.removeEventListener("pointermove",s),this.Ws.gi.Dn.removeEventListener("pointerup",r),this.addEventListener("pointerdown",n)};this.removeEventListener("pointerdown",n),this.Ws.gi.Dn.addEventListener("pointermove",s),this.Ws.gi.Dn.addEventListener("pointerup",r)};this.addEventListener("pointerdown",n)}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}setPointerEvents(t){return this.L.setPointerEvents(t),this}getPointerEvents(){return this.L.getPointerEvents()}setEffect(t){return this.ys=this.ys||this.Ws.gi.ys.ps(this,{Rn:{shapes:this.En()}}),this.ys.Rn.Ls(t),this}getEffect(){return!!this.ys&&this.ys.Rn.Ds()}setAutoDispose(t){return this.Pn=t,this.Ws.Bs(),this}getAutoDispose(){return this.Pn}getSize(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rr.Everything)===Rr.Everything?As(this.size.x+(this.nt.left+this.nt.right),this.size.y+(this.nt.bottom+this.nt.top)):this.size}setContentSize(t){this.size=t}setMargin(t){return this.nt="object"==typeof t?Ls(this.nt,t):{left:t,top:t,right:t,bottom:t},this.Ws.Bs(),this}getMargin(){return this.nt}th(){if(this.Pn){const t=this.size,e=this.renderingScale._t(),i={x:t.x/e.x,y:t.y/e.y};("max-width"===this.Pn.type&&i.x>=this.Pn.maxWidth||"max-height"===this.Pn.type&&i.y>=this.Pn.maxHeight)&&this.dispose()}return this}Er(){return this}dispose(){return this.ci||(this.Ws.Bs(),this.ci=!0,this.yi(this),this.L.D("dispose",{}),this.En().forEach(t=>t.dispose())),this}setVisible(t){return super.setVisible(t),this.En().forEach(e=>e.setVisible(t)),this.Ws.Bs(),this}isDisposed(){return this.ci}setPosition(t){return this.Cn=t,this.Ws.Bs(),this}getPosition(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.origin,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rr.Everything;const i=this.getSize(Rr.Everything),s=this.scale.Jt(this.Cn,zo({x:-(this.origin.x+1)/2,y:-(this.origin.y+1)/2},i));if(e===Rr.Everything)return this.scale.Jt(s,zo({x:(t.x+1)/2,y:(t.y+1)/2},i));const r=this.scale.Jt(s,{x:this.nt.left,y:this.nt.bottom}),n=this.getSize(Rr.Content);return this.scale.Jt(r,zo({x:(t.x+1)/2,y:(t.y+1)/2},n))}setOrigin(t){return this.origin=t,this.Ws.Bs(),this}getOrigin(){return this.origin}setDraggingMode(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vr.notDraggable;return this.Tn=t,this.Ws.Bs(),this}getDraggingMode(){return void 0!==this.Tn?this.Tn:Vr.notDraggable}setMouseStyle(t){return this.In=t,this}getMouseStyle(){return this.In}}class Ll extends Bl{constructor(t,e,i,s,r,n){super(t,e,i,r,n),this.On=Ps(),this.zn=0,this.Vn=s,this.backgroundElement=new this.Vn(this.Ws,this.renderingScale,this.scale,Jr,n),this.L.Ni(this.backgroundElement)}setPointerEvents(t){return super.setPointerEvents(t),this.backgroundElement.setPointerEvents(t),this}En(){return this.backgroundElement.En()}setBackground(t){return t(this.backgroundElement),this}getBackground(){return this.backgroundElement}th(){return super.th(),this.ci||(void 0!==this.Nn&&(this.backgroundElement.Nn=this.Nn-.01),this.backgroundElement.setOrigin(this.origin).setPosition(this.getPosition(this.origin,Rr.PaddedBackground)).th()),this}Er(){const t=this.getSize(Rr.PaddedContent);return this.backgroundElement.Gn(t).Er(),super.Er()}dispose(){return super.dispose(),this.backgroundElement.dispose(),this}setVisible(t){return super.setVisible(t),this.backgroundElement.setVisible(t),this}setPadding(t){return this.On="object"==typeof t?Ls(this.On,t):{left:t,top:t,right:t,bottom:t},this.Ws.Bs(),this}getPadding(){return this.On}getSize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rr.Everything,e=super.getSize(t);return t>=Rr.PaddedContent&&(e=As(e.x+this.On.left+this.On.right,e.y+this.On.bottom+this.On.top)),t>=Rr.PaddedBackground&&(e=As(e.x+this.backgroundElement.$n()+this.backgroundElement.Un(),e.y+this.backgroundElement.Yn()+this.backgroundElement.jn())),e}getPosition(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.origin,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rr.Everything;if(e===Rr.Everything)return super.getPosition(t,e);const i=super.getPosition(As(-1,-1),Rr.Everything),s=this.getMargin(),r=this.scale.Jt(i,{x:s.left,y:s.bottom});if(e===Rr.PaddedBackground){const e=this.getSize(Rr.PaddedBackground);return this.scale.Jt(r,zo({x:(t.x+1)/2,y:(t.y+1)/2},e))}const n=this.scale.Jt(r,{x:this.backgroundElement.$n(),y:this.backgroundElement.Yn()});if(e===Rr.PaddedContent){const e=this.getSize(Rr.PaddedContent);return this.scale.Jt(n,zo({x:(t.x+1)/2,y:(t.y+1)/2},e))}const o=this.getPadding(),a=this.scale.Jt(n,{x:o.left,y:o.bottom}),h=this.getSize(Rr.Content);return this.scale.Jt(a,zo({x:(t.x+1)/2,y:(t.y+1)/2},h))}getHighlight(){return this.zn}setHighlight(t){return this.zn=Yn(t),this.backgroundElement.setHighlight(t),this.L.D("highlightchange",{highlight:this.zn}),this}}const Dl=t=>"setBackground"in t,zl=t=>{const e=t.getPosition({x:-1,y:-1},Rr.PaddedBackground),i=t.getSize(Rr.PaddedBackground),s=t.scale.Jt(e,i),r=hr(e,t.scale,t.Ws.gi.oi),n=hr(s,t.scale,t.Ws.gi.oi),o=t.Ws.gi.Hn(r.x,r.y),a=t.Ws.gi.Hn(n.x,n.y);return{p1:{clientX:o.x,clientY:o.y},p2:{clientX:a.x,clientY:a.y}}};class Il extends Pl{constructor(t,e,i,s,r,n,o,a,h,l,c){super(),this.S=0,this.Wn=1,this.Xn=!0,this.Zn=new Xa,this.Jn=!0,this.ci=!1,this.L=new Ar,this.axisScale=s,this.renderingScale=r,this.Qn=o,this.Kn=a,this.qn=h,this.yi=l,this.io=e,this.so=i,this.eo=this.io.fh(this.renderingScale),this.L.Oi(this.eo),this.bi=c,this.ho=this.qn.setDirection(this.Kn).ro(this.so,this.renderingScale,n,Jr,this.bi,!1).setOrigin(pn(this.Kn)),this.L.Ni(this.ho),this.axis=t,this.setPointerEvents(!1),"major"===this.ho.no?this.eo.dh(c.xAxisNumericTicks.majorTickStyle.gridStrokeStyle):"minor"===this.ho.no?this.eo.dh(c.xAxisNumericTicks.minorTickStyle.gridStrokeStyle):"other"===this.ho.no&&this.eo.dh(c.cursorGridStrokeStyleX)}setValue(t){return this.S=t,this.so.Bs(),this.L.D("valuechange",{value:this.S}),this}getValue(){return this.S}setTextFormatter(t){return this.oo=t,this.so.Bs(),this}setTickLength(t){return this.ho.setPointerLength(t),this.io.Bs(),this}getTickLength(){return this.ho.getPointerLength()}setTickLabelPadding(t){return this.ho.setTickLabelPadding(t),this.io.Bs(),this}setTickLabelRotation(t){return this.ho.setTextRotation(t),this.io.Bs(),this}getTickLabelRotation(){return this.ho.getTextRotation()}getTickLabelPadding(){return this.ho.getTickLabelPadding()}setGridStrokeLength(t){return this.Wn=t,this.io.Bs(),this}getGridStrokeLength(){return this.Wn}setGridStrokeStyle(t){return this.eo.dh(t),this.io.Bs(),this}getGridStrokeStyle(){return this.eo.ao()}dispose(){return this.ci||(this.ci=!0,this.eo.dispose(),this.ho.dispose(),this.yi(this),this.io.gi.Bs(),this.L.D("dispose",{})),this}setMarkerVisible(t){return this.Xn=t,this.so.Bs(),this}getMarkerVisible(){return this.Xn}setMarker(t){return t(this.ho),this.so.Bs(),this}getMarker(){return this.ho}setPointerEvents(t){return this.L.setPointerEvents(t),this}getPointerEvents(){return this.L.getPointerEvents()}setAllocatesAxisSpace(t){return this.Jn=t,this.so.Bs(),this}getAllocatesAxisSpace(){return this.Jn}isInScale(){return yo(this.S,this.axisScale.getInnerStart(),this.axisScale.getInnerEnd())}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class Rl extends Il{constructor(t,e,i,s,r,n,o,a,h,l,c){super(t,e,i,s,r,n,o,a,c,h,l),this.lo=!1,this.yi=h,this.io=e,this.so=i}dispose(){return this.lo=!1,super.dispose()}update(){return this}plot(t,e,i,s,r){if(this.isInScale()&&this.getVisible()&&t){this.lo=!1;const t=ar(this.S,this.axisScale,this.Qn.getWidth(this.renderingScale));this.eo.setVisible(!0).gh(this.Qn.toPoint(t,e)).Ah(this.Qn.toPoint(t,e-(s+i*this.Wn))),this.Xn?(this.oo&&this.ho.setText(this.oo(this.S,this)),this.ho.setVisible(!0).setPosition(this.Qn.toPoint(t,r))):this.ho.setVisible(!1)}else this.eo.setVisible(!1),this.ho.setVisible(!1);return this.ho.Er().th(),this}co(){this.Xn?(this.oo&&this.ho.setText(this.oo(this.S,this)),this.ho.setVisible(!0)):this.ho.setVisible(!1);const t=this.ho.Er().getSize();return this.Qn.getHeight(t)}}const _l={uo:"X0Z1bGxBY2Nlc3M=",do:"X0Jhc2VDaGFydHM=",fo:"RGF0YSBHcmlk",Ao:"X0hhc0hhcmRFeHBpcmF0aW9u",vo:"X0lzVHJpYWw=",yo:"X0lzQ29tbXVuaXR5",po:"T0hMQyBTZXJpZXM=",mo:"QmFyIENoYXJ0",So:"c2xpY2VkIGNoYXJ0cw==",bo:"R2F1Z2UgQ2hhcnQ=",xo:"U3BpZGVyIENoYXJ0",Mo:"UG9sYXIgQ2hhcnQ=",wo:"M0QgQ2hhcnQ=",_o:"Wm9vbSBCYW5kIENoYXJ0",ko:"TWFwIENoYXJ0",Co:"WFkgQ2hhcnQ=",To:"WFkgU2VyaWVz",Fo:"SGVhdG1hcCBTZXJpZXM=",Io:"RmlndXJlIFNlcmllcw==",Po:"bG9nYXJpdGhtaWMgYXhpcw==",Lo:"cmVhbC10aW1lIHZpc3VhbGl6YXRpb24=",Bo:"aW5kaXZpZHVhbCBwb2ludCBzaXpl",Do:"aW5kaXZpZHVhbCBwb2ludCBjb2xvcg==",Ro:"VHJlZU1hcCBDaGFydA==",Eo:"UGFyYWxsZWwgQ29vcmRpbmF0ZSBDaGFydA==",Oo:"X1B5dGhvbkxpY2Vuc2U="},Vl=(t,e)=>t.setTextFillStyle(e.uiTextFillStyle).setTextFont(e.uiTextFont),Nl=(t,e,i)=>{i&&Dl(t)&&t.setBackground(t=>t.setFillStyle(e.uiBackgroundFillStyle).setStrokeStyle(e.uiBackgroundStrokeStyle)).setEffect(!0)},Ol={uiElement:void 0,stylers:ai(),addStyler(t){return l(l({},this),{},{stylers:this.stylers.push(t)})},applyStylers(t,e){return this.stylers.forEach(i=>void 0!==i?i(t,e):void 0),t}},Yl={background:void 0,setBackground(t){return l(l({},this),{},{background:t})}},Gl={ro(t,e,i,s,r,n){const o=this.applyStylers(new this.uiElement(t,e,i,s,r),r);return Nl(o,r,n),o}},Xl={ro(t,e,i,s,r,n){const o=this.applyStylers(new this.uiElement(t,e,i,this.background,s,r),r);return Nl(o,r,n),o}};class Ul extends Bl{constructor(){super(...arguments),this.zo=!0}th(){return super.th(),this}setPointerEvents(t){return this.zo=t,this}getPointerEvents(){return this.zo}En(){return[]}}class Hl{constructor(t){this.Vo=new Map,this.gi=t}xs(t,e,i){const s=i.animationEnabled;this.Vo.set(t,{applyHighlight:e,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:s,curAnimatedHighlightValue:0});const r=()=>{this.Vo.delete(t),t.removeEventListener("dispose",r)};Ur.requestAnimationFrame(()=>{t.addEventListener("dispose",r)})}No(t,e){let i=e.animationEnabled;const s=[],r=()=>{s.forEach(t=>{this.Vo.delete(t)}),t.removeEventListener("dispose",r)};return Ur.requestAnimationFrame(()=>{t.addEventListener("dispose",r)}),{Go:(t,e)=>{const r={applyHighlight:e,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:i,curAnimatedHighlightValue:0};s.push(t),this.Vo.set(t,r)},$o:()=>{s.forEach(t=>{this.Vo.delete(t)}),s.length=0},Uo:t=>{i=t,s.forEach(t=>{this.Ns(t,i)})},Yo:()=>i}}Vs(t,e){const i=this.Vo.get(t);i&&(i.curUnanimatedHighlightValue=Yn(e),this.gi.Bs())}Cs(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.Vo.get(t);return i?e?i.curAnimatedHighlightValue:i.curUnanimatedHighlightValue:0}Ns(t,e){const i=this.Vo.get(t);i&&(i.animationEnabled=e)}Gs(t){const e=this.Vo.get(t);return!!e&&e.animationEnabled}Er(t){let e=!1;this.Vo.forEach((i,s)=>{let r;if(i.animationEnabled){const s=1e3;if(i.curUnanimatedHighlightValue>0){const n=i.curAnimationPositionMillis/s;r=i.curUnanimatedHighlightValue*Math.abs(Math.sin(n*Math.PI/2+.5));const o=0===i.curAnimatedHighlightValue?1:t;i.curAnimationPositionMillis+=o,e=!0}else i.curAnimatedHighlightValue>0&&0===i.curUnanimatedHighlightValue?(r=Math.max(i.curAnimatedHighlightValue-t/s,0),e=e||r>0):r=0,i.curAnimationPositionMillis=0}else r=i.curUnanimatedHighlightValue;r!==i.curAnimatedHighlightValue&&(i.applyHighlight(r),i.curAnimatedHighlightValue=r)}),e&&this.gi.Bs(!0)}}const jl=new Map,Wl=(t,e)=>{const i=t.getSize(),s=t.getFamily(),r=t.getWeight(),n=t.getStyle(),o=t.getVariant(),a="".concat(n," ").concat(o?"small-caps":"normal"," ").concat(r," ").concat(i,"px ").concat(s),h="".concat(a," ").concat(e.toFixed(2));let l=jl.get(h);return l||(l=((t,e,i,s)=>({font:t,properties:e,dpr:i,id:s}))(a,{type:"font",size:i,family:s,style:n,variant:o,weight:r},e,h),jl.set(h,l)),l},Zl=t=>({container:t.Dn,setMouseStyle:(e,i)=>t.Ln(e,i),restoreMouseStyle:e=>t.Bn(e),clearMouseStyle:()=>t.jo(),captureFrame:(e,i,s)=>t.Ho(e,i,s),renderFrame:function(e,i){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t.Wo(e,i,s)},layout:()=>{t.Xo(),t.Zo(),t.Qo.Jo(),t.Bs()},setBackgroundFillStyle(e){return t.setBackgroundFillStyle(e),this},setBackgroundStrokeStyle(e){return t.setBackgroundStrokeStyle(e),this},getBackgroundFillStyle:()=>t.getBackgroundFillStyle(),getBackgroundStrokeStyle:()=>t.getBackgroundStrokeStyle(),addCustomIcon:(e,i)=>t.Ko(e,i),addEventListener:(e,i,s)=>t.R(e,i,s),removeEventListener:(e,i)=>t.V(e,i)}),Jl=[];let ql;const Ql=()=>{if(void 0!==ql){const t=Ur.getComputedStyle(Ur.document.body),e=Number(t.getPropertyValue("margin-top").replace("px",""))+Number(t.getPropertyValue("margin-bottom").replace("px",""));ql.style.height=Ur.innerHeight-e+"px",(()=>{for(let t=0;t<Jl.length;t+=1)Jl[t]()})()}},Kl=new aa({color:Rs(255,255,255)}),$l={font:Wl(Ha,0),fillStyle:Kl,lineStyle:new th({fillStyle:Kl,thickness:1}),pointStyle3D:new Ka.Triangulated};class tc{constructor(t,e,i){this.oi=or.d2({scaleXYConstructor:rr}),this.qo=new Map,this.ta=Mr(()=>this.Bs(),60),this.ia=As(0,0),this.sa=!1,this.ea=Jr,this.ha=()=>{},this.ra=[],this.na=-1,this.oa=[],this.ci=!1,this.aa=!1,this.la=t=>{t.dataTransfer&&t.dataTransfer.setDragImage(new Image,0,0)},this.ca=new Map,this.ua=(t,e)=>{var i,s,r;const n=e instanceof PointerEvent&&e,o=Er(e)?{clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY}:{clientX:e.clientX,clientY:e.clientY};if(n){if(!n.pointerType)return;this.da=e}const a=this.Ps({x:o.clientX,y:o.clientY});if(("pointermove"===t||"pointerenter"===t)&&a&&n){const t=this.ca.get(n.pointerId);let s=t;s||(s={lastEvent:n,entity:a.entity,collectionMember:a.collectionMember,info:a.info},this.ca.set(n.pointerId,s));const r=void 0===t||t.entity!==a.entity||t.collectionMember!==a.collectionMember;r&&t&&t.entity.D("pointerleave",e,t.collectionMember,t.info),r&&a&&a.entity.D("pointerenter",e,a.collectionMember,a.info),a&&(a.entity.D("pointermove",e,a.collectionMember,a.info),this.Dn.draggable=null!==(i=a.entity.di)&&void 0!==i&&i),s.lastEvent=n,s.entity=a.entity,s.collectionMember=a.collectionMember,s.info=a.info}else if("pointerleave"===t&&n){const t=this.ca.get(n.pointerId);t&&(t.entity.D("pointerleave",e,t.collectionMember,t.info),this.ca.delete(n.pointerId))}else if("click"===t&&n){const t=(null===(s=this.fa)||void 0===s?void 0:s.event)instanceof PointerEvent&&this.fa.event.pointerId===n.pointerId&&this.fa;t&&t.entity.D("click",n,t.collectionMember,t.info)}else if("dblclick"===t&&e instanceof MouseEvent){const t="click"===(null===(r=this.fa)||void 0===r?void 0:r.event.type)&&this.fa;t&&t.entity.D("dblclick",e,t.collectionMember,t.info)}else{const i=e instanceof PointerEvent?this.ca.get(e.pointerId):a;null==i||i.entity.D(t,e,i.collectionMember,i.info)}e&&a&&!["touchend"].includes(t)&&(this.fa=l(l({},a),{},{event:e}))},this.Zo=()=>{const{bottom:t,left:e}=this.Dn.getBoundingClientRect(),i=As(Math.floor(e),Math.floor(t));return i.x===this.ia.x&&i.y===this.ia.y||this.L.D("locationchange",{}),this.ia=i,this.Aa=Ur.performance.now(),this},this.Xo=()=>{this.ga&&this.ga()},this.Ln=(t,e)=>{if(void 0!==e){const i=this.oa.find(t=>t[0]===e);return i&&(i[1]=t,this.oa.indexOf(i)===this.oa.length-1&&(this.Dn.style.cursor=t)),e}const i=this.na;return this.na+=1,this.oa.push([i,t]),this.Dn.style.cursor=t,i},this.Bn=t=>{var e;const i=this.oa.find(e=>e[0]===t);if(i){const t=this.oa.indexOf(i),s=t===this.oa.length-1;if(this.oa.splice(t,1),s){const t=(null===(e=this.oa[this.oa.length-1])||void 0===e?void 0:e[1])||"default";this.Dn.style.cursor=t}}},this.va=t=>(this.ya._(t),this),this.pa=()=>this.ya.C(),this.ma=()=>{this.ea&&this.ea(1e3/60),this.Sa(),this.ba(),this.ha&&this.ha()},this.xa=t=>(this.qo.set(t.Ma(),t),this.qo=new Map([...this.qo.entries()].sort((t,e)=>t[0]-e[0])),t),this.wa=t=>(this.qo.delete(t),this),this.Y=()=>(this.ya.o=!1,this),this.j=()=>(this.ya.o=!0,this),this._a=()=>this.da,this.L=new Ar,this.Qo=t,this.bi=e.theme,this.ka=i.ka,this.Ca=i.Ta,this.Fa={me:e&&void 0!==e.resourcesBaseUrl&&null!==e.resourcesBaseUrl?e.resourcesBaseUrl:void 0,Ia:!e||!("warnings"in e)||"boolean"!=typeof e.warnings||e.warnings,Pa:(()=>{const t=null==e?void 0:e.pickingPrecision;if("string"==typeof t){const e=t.toLowerCase();if("best"===e)return 1;if("high"===e)return.5;if("low"===e)return 1/8}return 1/4})(),La:void 0===(null==e?void 0:e.interactable)||e.interactable,Ba:void 0===e.textPixelSnappingEnabled||e.textPixelSnappingEnabled};const s=e?e.container:void 0;if(s){if("string"==typeof s){const t=Ur.document.getElementById(s);if(!t)throw new Error('Container "'.concat(s,"\" doesn't exist."));this.Dn=t}else this.Dn=s;Ur.addEventListener("resize",this.Xo),this.ra.push(()=>{Ur.removeEventListener("resize",this.Xo)})}else{if(void 0===ql){const t=Ur.document.createElement("div");t.id="lcjs-auto-flexbox",t.style.position="relative",t.style.width="100%",t.style.display="flex",t.style.flexDirection="column",Ur.document.body.appendChild(t),ql=t,Ur.addEventListener("resize",Ql)}let t=1;for(;null!==Ur.document.getElementById("chart-".concat(t));)t+=1;this.Dn=Ur.document.createElement("div"),this.Dn.id="chart-".concat(t),this.Dn.style.flex="1",this.Dn.style.height="100%",ql.appendChild(this.Dn),Ql(),Jl.push(this.Xo),this.ra.push(()=>{ql&&ql.removeChild(this.Dn),Jl.includes(this.Xo)&&Jl.splice(Jl.indexOf(this.Xo),1),0===Jl.length&&ql&&(Ur.document.body.removeChild(ql),ql=void 0,Ur.removeEventListener("resize",Ql))})}if(Ur.ResizeObserver){const t=t=>{for(const e of t)e.target===this.Dn&&this.Xo()};this.Da=new Ur.ResizeObserver(t.bind(this)),this.Da.observe(this.Dn)}this.Dn.style.position="relative",this.Dn.style.boxSizing="content-box",!1!==this.Fa.La&&(this.Dn.style.touchAction="none"),this.Dn.style.overflow="hidden",this.Dn.addEventListener("fullscreenchange",this.Xo),this.Dn.addEventListener("webkitfullscreenchange",this.Xo),this.Dn.addEventListener("dragstart",this.la);const r=e?e.maxFps:void 0;this.Ra=r?-1===r?-1:0!==r?1e3/r:0:0,Object.keys(Sr).forEach(t=>{const e=e=>{this.ua(t,e)};this.Dn.addEventListener(t,e),this.ra.push(()=>{this.Dn.removeEventListener(t,e)})}),Ur.addEventListener("scroll",this.Zo,{passive:!0}),this.ya=Fs(new zs({r:0,g:0,b:0,a:0})),this.Ms=new Hl(this)}Ea(t,e,i){this.Oa=t?{entity:t,timestamp:i,pointed:e}:void 0}za(t,e){const i=Array.from(this.ca.values()).find(e=>e.entity===t.entity&&(void 0===t.collectionMember||t.collectionMember===e.collectionMember));i&&(i.entity=e.entity,i.collectionMember=e.collectionMember)}ki(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;const i=Array.from(this.ca.values()).find(i=>i.entity===t&&(void 0===e||e===i.collectionMember));i&&(t.D("pointerleave",i.lastEvent,i.collectionMember,i.info),this.ca.delete(i.lastEvent.pointerId))}Va(){this.aa=!0,this.ea=void 0,this.ha=void 0}jo(){this.oa.length=0,this.Dn.style.cursor="unset"}Na(){return this.Ga}$a(){return this.Ua}setBackgroundFillStyle(t){return this.Ya.Ke(t),this.Bs(),this}getBackgroundFillStyle(){return this.Ya.pr()}setBackgroundStrokeStyle(t){return this.Ya.Qe(t),this.Bs(),this}getBackgroundStrokeStyle(){return this.Ya.ja()}Ha(t){return this.ha=t,this}Wa(t){return this.ea=t,this}Xa(t){return this.qo.get(t)}Za(){return Array.from(this.qo.keys()).reverse().reduce((t,e)=>e!==Number.MAX_SAFE_INTEGER&&e>t?e:t,0)+1}N(){if(!this.ci){if(this.ci=!0,this.qo)for(const t of this.qo.values())t.N();this.ea=void 0,this.ha=void 0,Ur.removeEventListener("scroll",this.Zo),this.Dn.removeEventListener("fullscreenchange",this.Xo),this.Dn.removeEventListener("webkitfullscreenchange",this.Xo),this.Dn.removeEventListener("dragstart",this.la),this.Da&&(this.Da.disconnect(),this.Da=void 0),this.ra.forEach(t=>{t()}),this.ra.length=0}}hh(t,e){return As(t-this.ia.x,this.ia.y-e)}Hn(t,e){return As(t+this.ia.x,this.ia.y-e)}Ja(t){const e=this.hh(t.clientX,t.clientY);return{engineX:e.x,engineY:e.y}}Qa(t){const e=this.Hn(t.engineX,t.engineY);return{clientX:e.x,clientY:e.y}}Ka(t,e,i,s){const r=hr(t,i,this.oi),n=hr(e,i,this.oi),o=this.Qa({engineX:r.x,engineY:r.y}),a=this.Qa({engineX:n.x,engineY:n.y});return{p1:{clientX:Math.min(o.clientX,a.clientX)-s.left,clientY:Math.min(o.clientY,a.clientY)-s.top},p2:{clientX:Math.max(o.clientX,a.clientX)+s.right,clientY:Math.max(o.clientY,a.clientY)+s.bottom}}}R(t,e,i){this.L.addEventListener(t,e,i)}V(t,e){this.L.removeEventListener(t,e)}}class ec extends xr{constructor(t,e,i,s){super(t,i,s),this.Nn=0,this.Ws=e,this.Ws.qa=!0}tl(){}il(t){return this.Nn===t||(this.Nn=t,this.Ws.qa=!0),this}sl(){return this.Nn}}class ic extends ec{constructor(t,e,i,s,r){super(t,e,s,r),this.el=!0,this.oi=i}}const sc=(t,e,i)=>{if(i instanceof rr){const s=i.ri(),r=zo(e,{x:Math.abs(s.x),y:Math.abs(s.y)});return Cs(As(t.min.x-r.x,t.min.y-r.y),As(t.max.x+r.x,t.max.y+r.y))}return Cs(i.Jt(As(t.min.x,t.min.y),Bo(e,-1)),i.Jt(As(t.max.x,t.max.y),e))},rc=(t,e)=>"function"==typeof e?e(t):e,nc=(t,e)=>!t||t!==e,oc=t=>t!==sa;class ac extends ic{constructor(t,e,i,s,r){super(t,e,i,s,r),this.Xe=$l.fillStyle,this.gi=t}Ke(t){return this.Xe=rc(this.Xe,t),this}pr(){return this.Xe}hl(){return nc(this.rl,this.Xe)}nl(){return((t,e)=>t===sa&&e!==sa)(this.rl,this.Xe)}ol(){return oc(this.Xe)}al(t){this.rl=t}}class hc extends ac{constructor(t,e,i,s,r){super(t,e,i,s,r),this.Ze=$l.lineStyle,this.gi=t}Qe(t){return this.Ze="function"==typeof t?t(this.Ze):t,this}ja(){return this.Ze}ll(){return!this.cl||this.cl!==this.Ze}ul(t){return!this.cl||this.cl.getThickness()!==t}ol(){return this.Ze!==Lr||super.ol()}nl(){return(this.Ze!==Lr||this.Xe!==sa)&&this.cl===Lr&&this.rl===sa}dl(t){this.cl=t}}class lc extends ac{constructor(t,e,i,s,r){let n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Fs($l.font);super(t,e,i,s,r),this.fl=Fs(""),this.Al=!1,this.vl={x:1,y:-1},this.Cn=Fs(As(0,0)),this.yl=Fs(0),this.pl=Fs(0),this.ml=Fs(As(0,0)),this.Sl=Fs(0),this.bl=Fs(Ha),this.xl=As(0,0),this.nt=Fs(Ps(1,1,1,1)),this.On=Fs(Bs(4,4,4,4)),this.font=Fs($l.font),this.Ml=!1,this.font=n}ol(){return oc(this.Xe)&&this.fl.C().length>0}nl(){return!1===this.Ml&&this.ol()}Jr(t){return this.fl._(t),this}qr(){return this.fl.C()}Mr(t){return Ua(t)?this.bl._(t):this.bl._(t(this.bl.C())),this}br(){return this.bl.C()}wl(t){return this.bl._(this.bl.C().setFamily(t)),this}_l(){return this.bl.C().getFamily()}kl(t){return this.bl._(this.bl.C().setSize(t)),this}Cl(){return this.bl.C().getSize()}Tl(t){return this.bl._(this.bl.C().setWeight(t)),this}Fl(){return this.bl.C().getWeight()}Il(t){return this.bl._(this.bl.C().setStyle(t)),this}Pl(){return this.bl.C().getStyle()}Ll(t){return this.bl._(this.bl.C().setVariant(t)),this}Bl(){return this.bl.C().getVariant()}ih(t){return this.Cn._(t),this}Dl(){return this.Cn.C()}wr(t){return this.Sl._(t),this}_r(){return this.Sl.C()}Zr(t){return this.Rl=t,this}El(){return this.Rl}Ol(t,e){return this.ml._(As(t,e)),this}zl(){return this.ml.C()}Vl(t){return this.pl._(t),this}Nl(){return this.pl.C()}Gl(){return{x:this.pl.C(),y:this.yl.C()}}$l(t){return this.yl._(t),this}Ul(){return this.yl.C()}Yl(t){return this.pl._(t.x),this.yl._(t.y),this}mn(t){return this.nt._(t),this}jl(){return this.nt.C()}Sn(t){return this.On._(t),this}Hl(){return this.On.C()}}class cc extends hc{constructor(t,e,i,s,r){super(t,e,i,s,r),this.Cn=Fs(As(0,0)),this.U=Fs(As(100,100)),this.Sl=Fs(0),this.xl=Fs(As(0,0)),this.Wl=!1}Er(){return this.Xl(),this}ih(t){const e=this.Cn.C();return t.x===e.x&&t.y===e.y||(this.Cn._(t),this.Xl()),this}Dl(){return this.Cn.C()}Zl(t){const e=this.Cn.C();return t!==e.x&&(this.Cn._(As(t,e.y)),this.Xl()),this}Jl(t){const e=this.Cn.C();return t!==e.y&&(this.Cn._(As(e.x,t)),this.Xl()),this}X(t){const e=this.U.C();return t.x===e.x&&t.y===e.y||(this.U._(As(t.x,t.y)),this.Xl()),this}_t(){return this.U.C()}Ql(t){const e=this.U.C();return t!==e.x&&(this.U._(As(t,e.y)),this.Xl()),this}Kl(t){const e=this.U.C();return t!==e.x&&(this.U._(As(e.x,t)),this.Xl()),this}wr(t){return this.Sl._(t),this}_r(){return this.Sl.C()}ql(t){const e=this.xl.C();return t===e&&e.x===t.x&&e.y===t.y||(void 0===t?(this.Wl=!1,this.Xl()):(this.Wl=!0,this.xl._(t))),this}Xl(){if(!this.Wl){const t=this.Cn.C(),e=this.U.C(),i=As(t.x+e.x/2,t.y+e.y/2),s=this.xl.C();i.x===s.x&&i.y===s.y||this.xl._(i)}}}class uc extends hc{constructor(){super(...arguments),this.tc=[],this.Cn=Fs(As(0,0)),this.sc=oo,this.hc=!1}rc(t){return t=En(t),this.tc=t,this.hc=!0,this}nc(){return this.tc}Hi(){return this.sc.max.x}ji(){return this.sc.min.x}Xi(){return this.sc.max.y}Wi(){return this.sc.min.y}oc(){return 0}ac(){return 0}}class dc extends ac{constructor(t,e,i,s,r){super(t,e,i,s,r),this.lc=new Array,this.cc=new Array,this.sc=oo,this.uc=0,this.dc=!1,this.fc=[Array(),Array()],this.Ac=!1,this.gc=(new aa).setColor(Rs(42,171,240)),this.vc=!1,this.yc=!1,this.mc=!1}Sc(t,e){const i=this.uc-1,s=i>0&&!this.Ac;let[r,n]=s?[[this.lc[i]],[this.cc[i]]]:[[],[]];if(t instanceof Array){const[e,i]=Ms(t);r=Tn(r,e,{canReturnB:!0}),n=Tn(n,i,{canReturnB:!0})}else{const e=t.position;r.push(As(e,t.high)),n.push(As(e,t.low))}return this.Ac?(this.fc[0]=Tn(this.fc[0],r,{canReturnB:!0}),this.fc[1]=Tn(this.fc[1],n,{canReturnB:!0})):(this.fc=[r,n],this.Ac=!0),this.sc=Eo(this.sc,e||Eo(So(r),So(n))),this}zi(){return this.vc=!0,this.lc.length=0,this.cc.length=0,this.uc=0,this.sc=oo,this}bc(){return[this.lc,this.cc]}xc(){return[this.fc[0],this.fc[1]]}Mc(t){return this.gc="function"==typeof t?t(this.gc):t,this}wc(){return this.gc}_c(){return this.uc-(Number(this.yc)+Number(this.mc))}kc(){return this.fc.length}Cc(t){return this.yc=t,this}Tc(){return this.yc}Fc(t){return this.mc=t,this}Ic(){return this.mc}nl(){return this.rl===sa&&this.Pc===sa&&(this.Xe!==sa||this.gc!==sa)}Lc(t){this.Pc=t}ol(){return this.gc!==sa||super.ol()}hl(){return super.hl()||!this.Pc||this.Pc!==this.gc}}class fc extends hc{constructor(t,e,i,s,r){super(t,e,i,s,r),this.Cn=Fs(As(0,0)),this.Bc=Fs(0),this.$t=Fs(360),this.Dc=Fs(100),this.Rc=Fs(100),this.Ec=Fs(0),this.Oc=Fs(void 0),this.zc=As(0,0),this.Vc=As(0,0),this.Nc=As(0,0)}Gc(){return this.Dc.C()}$c(){return this.Rc.C()}Dl(){return this.Cn.C()}Uc(){return this.Bc.C()}Gt(){return this.$t.C()}Yc(){return this.Ec.C()}jc(){return this.Oc.C()}Hc(){return this.zc}Wc(){return this.Vc}Xc(){return this.Nc}ih(t){return this.Cn._(t),this}Zc(t){return this.Bc._(t),this}Ah(t){return this.$t._(t),this}Jc(t){return this.Rc._(t),this.Dc._(t),this}Qc(t){return this.Dc._(t),this}Kc(t){return this.Rc._(t),this}qc(t){return this.Ec._(t<0?0:t),this}tu(t){return this.Oc._(void 0!==t&&t<=0?void 0:t),this}}var gc;!function(t){t[t.Complex=0]="Complex",t[t.Simple=1]="Simple"}(gc||(gc={}));class pc extends ic{constructor(t,e,i,s,r){super(t,e,i,s,r),this.iu=$l.lineStyle,this.engine=t}dh(t){return this.iu=((t,e)=>"function"==typeof e?e(t):e)(this.iu,t),this}ao(){return this.iu}ll(){return((t,e)=>!t||t!==e)(this.su,this.iu)}eu(t){return((t,e)=>!t||t.getThickness()!==e)(this.su,t)}nl(){return((t,e)=>t===Lr&&e!==Lr)(this.su,this.iu)}ol(){return(t=>t!==Lr&&t.getFillStyle()!==sa)(this.iu)}hu(t){this.su=t}}class yc extends pc{constructor(t,e,i,s,r){super(t,e,i,s,r),this.Yt=As(0,0),this.$t=As(0,0),this.ru=!1}_(t){let{min:e,max:i}=t;return e.x===this.Yt.x&&e.y===this.Yt.y&&i.x===this.$t.x&&i.y===this.$t.y||(this.ru=!0,this.Yt=e,this.$t=i),this}Ut(){return this.Yt}Gt(){return this.$t}gh(t){return t.x===this.Yt.x&&t.y===this.Yt.y||(this.ru=!0,this.Yt=t),this}Ah(t){return t.x===this.$t.x&&t.y===this.$t.y||(this.ru=!0,this.$t=t),this}}class mc extends pc{constructor(t,e,i,s,r){super(t,e,i,s,r),this.nu=void 0,this.ou=0}}class vc extends pc{constructor(t,e,i,s,r){super(t,e,i,s,r),this.au=[],this.sc=oo,this.fc=new Array,this.lu=0,this.vc=!1,this.cu=Fs(void 0),this.yc=!1,this.mc=!1}xc(){return this.fc}bc(){return this.au}zi(){return this.vc=!0,this.au.length=0,this.lu=0,this.fc=[],this.sc=oo,this}_c(){return this.lu-(Number(this.yc)+Number(this.mc))}kc(){return this.fc.length}Cc(t){return this.yc=t,this}Tc(){return this.yc}Fc(t){return this.mc=t,this}Ic(){return this.mc}}class xc extends lc{constructor(t,e,i,s,r){super(t,e,i,s,[]),this.uu={uid:r,text:"",font:"",color:"",position:"absolute",left:0,top:0,padding:"",alignmentX:0,alignmentY:0,rotation:0,identifier:Ta.Other,visible:!0}}du(){var t;if(!this.getVisible()||0===this.fl.C().length||ra(this.Xe))return this.uu.visible=!1,this.uu;this.uu.visible=!0;const e=Wl(this.bl.C(),devicePixelRatio);this.uu.identifier=null!==(t=this.Zh)&&void 0!==t?t:Ta.Other,this.uu.text=this.fl.C(),this.uu.font=e.font,this.uu.color=ha(this.Xe)?"rgba(".concat(255*this.Xe.color.r,",").concat(255*this.Xe.color.g,",").concat(255*this.Xe.color.b,",").concat(this.Xe.color.a,")"):this.uu.color;const i=this.Cn.C(),s=hr(i,this.oi,this.gi.oi),r=Math.round(10*s.x)/10,n=Math.round(10*(this.gi._t().y-s.y))/10;this.uu.top=n,this.uu.left=r,this.uu.alignmentX=this.pl.C(),this.uu.alignmentY=this.yl.C(),this.uu.rotation=this.Sl.C();const o=this.nt.C(),a=this.On.C();return this.uu.padding="".concat(o.top+a.top,"px ").concat(o.right+a.right,"px ").concat(o.bottom+a.bottom,"px ").concat(o.left+a.left,"px"),this.uu}fu(){var t;this.du();const e=null===(t=this.gi.Au)||void 0===t?void 0:t.gu.getTextBoundingBox;if(e){const t=e(this.uu);if(t){const e=this.gi.Ja({clientX:t.left,clientY:t.top}),i=this.gi.Ja({clientX:t.left+t.width,clientY:t.top+t.height}),s=hr({x:e.engineX,y:e.engineY},this.gi.oi,this.oi),r=hr({x:i.engineX,y:i.engineY},this.gi.oi,this.oi);return{min:{x:Math.min(s.x,r.x),y:Math.min(s.y,r.y)},max:{x:Math.max(s.x,r.x),y:Math.max(s.y,r.y)}}}}return oo}vu(){var t;this.du();const e=null===(t=this.gi.Au)||void 0===t?void 0:t.gu.measureText;if(e){const t=e(this.uu);if(t)return t}return this.gi.yu.tr.Th(this.fl.C(),this.bl.C(),this.Sl.C())}_t(){if(!(this.oi instanceof rr))return{x:0,y:0};const t=this.oi.ri(),e=this.vu();return{x:e.x*t.x,y:e.y*t.y}}Er(){return this}Hi(){return 0}ji(){return 0}Xi(){return 0}Wi(){return 0}oc(){return 0}ac(){return 0}pu(t,e){return{}}mu(){return this}Su(t,e,i,s,r){return{}}}class bc extends Bl{constructor(){super(...arguments),this.zn=0}getHighlight(){return this.zn}setHighlight(t){return this.zn=t,this.En().forEach(e=>e.Fi(t)),this.L.D("highlightchange",{highlight:t}),this.Ws.Bs(),this}}class Sc extends bc{}class Ac extends Sc{constructor(t,e,i,s,r,n){super(t,e,i,r,n),this.bu=this.Ws.xu(this.renderingScale,gc.Simple).setVisible(!1).Ke(sa).Qe(Lr),this.L.Oi(this.bu)}Mu(){const t=this.wu();if(t.length>2){const e=So(t),i=As(e.max.x-e.min.x,e.max.y-e.min.y);this.setContentSize(i);const s=t.map(t=>{const s=Lo(t,Bo(e.min,-1));return this.scale.Jt(this.Cn,Lo(s,zo(Bo(Lo(this.origin,As(1,1)),-.5),i)))}).map(t=>hr(t,this.scale,this.renderingScale));this.bu.rc(s).setVisible(this.getVisible()).setVisible(this.getVisible())}else this.bu&&this.bu.setVisible(!1),this.setContentSize(As(0,0))}th(){return super.th(),this.ci||(this.Mu(),void 0!==this.Nn&&this.bu.il(this.Nn)),this}Er(){return this.Mu(),super.Er()}setVisible(t){return super.setVisible(t),this.bu.setVisible(t),this}}const Ec=t=>!(!t||"object"!=typeof t||!("elementAt"in t)),kc=t=>{if("srcLoopArray"in t){const{srcLoopArray:e,dataRanges:i,NewArray:s}=t;return{length:i.reduce((t,e)=>t+e.count,0),elementAt:t=>{let s=0;for(const r of i){if(s+r.count-1>=t){const i=r.offset+(t-s);return e[i]}s+=r.count}return Rn(0,()=>{}),-1},toArray:(t,r)=>{const n=r-t+1;if(1===i.length){const s=i[0],n=s.offset+t,o=s.offset+r;return e.subarray(n,o+1)}{const o=i[0],a=i[1],h=0,l=h+o.count-1,c=l+1,u=c+a.count-1,d=new s(n);let f=0;if(!(r<h||t>l)){const i=Math.max(h,t),s=Math.min(l,r)-i+1,n=o.offset+(t+f-h);d.set(e.subarray(n,n+s),f),f+=s}if(!(r<c||t>u)){const i=Math.max(c,t),s=Math.min(u,r)-i+1,n=a.offset+(t+f-c);d.set(e.subarray(n,n+s),f),f+=s}return d}}}}return{length:t.length,elementAt:e=>t[e],toArray:(e,i)=>Yr(t,e,i+1)}},wc=(t,e)=>Object.keys(t).length===Object.keys(e).length&&!Object.keys(t).find(t=>void 0===e[t])&&!Object.entries(t).find(t=>{let[i,s]=t;return e[i]!==s});class Mc{constructor(t){if(this._u=0,this.ku=0,this.Cu=0,this.Tu=!1,this.Fu=!0,this.Iu=!1,this.Pu={warningDisplayed:!1,expandEvents:[]},this.L=new Ar,this.Fu=!t||void 0===t.autoSortingEnabled||t.autoSortingEnabled,this.Lu=!1!==(null==t?void 0:t.allowInputModification),this.Bu=void 0===(null==t?void 0:t.includesNaN)||t.includesNaN,this.Du=void 0!==(null==t?void 0:t.strictMode)&&t.strictMode,this.Ia=void 0===(null==t?void 0:t.warnings)||t.warnings,this.Ru=void 0===(null==t?void 0:t.autoDetectPatterns)||t.autoDetectPatterns,null==t?void 0:t.schema){const e={};Object.entries(t.schema).forEach(t=>{let[i,s]=t;var r;if(!s)return;let n=void 0!==s.pattern?s.pattern:void 0;s.auto&&(n=("object"==typeof s.auto&&null!==(r=s.auto.step)&&void 0!==r?r:1)>0?"progressive":"regressive");const o={dataStorage:s.storage,Eu:{effective:n,userSpecified:n},auto:s.auto,cache:void 0,ensureNoDuplication:void 0!==s.ensureNoDuplication&&s.ensureNoDuplication};if(this.Du&&void 0===s.pattern)throw new Error("LightningChart JS error - DataSetXY property ('".concat(i,"') data pattern not specified. This is not allowed when strict mode is enabled."));e[i]=o}),this.Ou=e}if(this.Du&&!this.Ou)throw new Error("LightningChart JS error - DataSetXY schema not defined. This is not allowed when strict mode is enabled.")}appendJSON(t,e,i){if(!Array.isArray(t))return this.appendJSON([t]);const s=t.length;if(0===s)return this;const r=Object.keys(t[0]).filter(t=>(!(null==e?void 0:e.whitelist)||e.whitelist.includes(t))&&(!(null==e?void 0:e.blacklist)||!e.blacklist.includes(t)));if(0===r.length)return this;const n=t[0],o=Object.fromEntries(r.map(t=>{if("number"!=typeof n[t])return[t,[]];const e=this.Ou&&this.Ou[t];return[t,new((null==e?void 0:e.dataStorage)||Float64Array)(s)]}));for(let a=0;a<s;a+=1){const e=t[a];for(const t of r)o[t][a]=e[t]}return i&&Object.entries(i).forEach(t=>{let[e,i]=t;o[e]=i}),this.appendSamples(o,e),this}appendSample(t,e){const i=Object.keys(t).filter(t=>(!(null==e?void 0:e.whitelist)||e.whitelist.includes(t))&&(!(null==e?void 0:e.blacklist)||!e.blacklist.includes(t)));if(0===i.length)return this;const s=Object.fromEntries(i.map(e=>{var i,s;return[e,zc(t[e],this.Ou&&null!==(s=null===(i=this.Ou[e])||void 0===i?void 0:i.dataStorage)&&void 0!==s?s:Float64Array)]})),r=this.zu({appendCount:1,keys:i,parsedDataArrs:s,opts:e});if(!r.incomingDataReplacedCache&&this.Fu){let t=this.Vu(s);if(t=t&&t.filter(t=>this.Ou&&this.Ou[t].Eu&&!("autoDetectResult"in this.Ou[t].Eu)),t&&t.length>0)if(this.Iu);else{t.length>1&&this.Ia&&Ur.console.warn("LightningChart JS warning - DataSetXY data pushed in order that doesn't match data pattern. Automatic sorting is attempted, but there is more than 1 data pattern mismatch. Behavior may be compromised.");for(const e of t){const t=this.Ou?this.Ou[e]:void 0;if(!(t&&t.Eu&&"autoDetectResult"in t.Eu))return this.Nu(e,{parsedDataArrs:Object.fromEntries(r.keys.map(t=>[t,"number"==typeof s[t]?new Array(1).fill(s[t]):s[t]])),offset:0,count:1}),this}Ur.console.error("LightningChart JS error - data is arriving in wrong order and auto sorting is either disabled or not applicable. Chart functionality is compromised. Following data properties didn't match their configured pattern: ".concat(t.map(t=>"'".concat(t,"'")).join(", ")))}}for(const n of r.keys){const t=r.buckets[n].cache;if(!t)continue;const e=s[n];t[this._u]="number"==typeof e?e:e[0]}return this.L.D("change",{type:"change",iDataStart:this._u,iDataEnd:this._u}),this._u+=1,this._u>r.maxSampleCount-1&&void 0!==this.Gu&&(this._u=0,this.Tu=!0,this.L.D("loop",{type:"loop"})),this.ku=Math.min(this.ku+1,r.maxSampleCount),this.Cu+=1,this}appendSamples(t,e){const i=Object.entries(t).filter(t=>{let[,e]=t;return void 0!==e}).map(t=>t[0]);if(0===i.length)return this;const s=Object.entries(t).filter(t=>{let[,e]=t;return"object"==typeof e&&"length"in e}).map(t=>t[0]),r=s.reduce((e,i)=>Math.min(e,t[i].length),Number.MAX_SAFE_INTEGER);s.forEach(e=>{const i=t[e];i.length>r&&(Ur.console.warn("LightningChart JS warning - insymmetric DataSetXY input (".concat(e,"). Extra measurements will be dropped")),Array.isArray(i)?this.Lu?i.length=r:t[e]=i.slice(0,r):t[e]=i.subarray(0,r))});let n=null==e?void 0:e.offset,o=null==e?void 0:e.count;if(n=void 0!==n?n:0,o=void 0!==o?o:r-n,o<=0)return this;const a=Object.fromEntries(i.map(e=>{var i,s;const r=t[e];return this.Ou&&this.Ou[e]&&void 0!==this.Ou[e].dataStorage||this.Du||!Rc(r)?[e,zc(t[e],this.Ou&&null!==(s=null===(i=this.Ou[e])||void 0===i?void 0:i.dataStorage)&&void 0!==s?s:Float64Array)]:[e,r]})),h=this.zu({appendCount:o,keys:i,parsedDataArrs:a,opts:e});if(Object.entries(h.buckets).forEach(t=>{let[e,i]=t;if(0===this.ku&&i.ensureNoDuplication){const t=a[e],s=i.cache;if(Array.isArray(t)||s!==t)throw new Error("LightningChart JS error | DataSetXY ensureNoDuplication check failed for '".concat(e,"'"))}}),!h.incomingDataReplacedCache&&this.Fu){let t=this.Vu(a);if(t=t&&t.filter(t=>this.Ou&&this.Ou[t].Eu&&!("autoDetectResult"in this.Ou[t].Eu)),t&&t.length>0)if(this.Iu);else{t.length>1&&this.Ia&&Ur.console.warn("LightningChart JS warning - DataSetXY data pushed in order that doesn't match data pattern. Automatic sorting is attempted, but there is more than 1 data pattern mismatch. Behavior may be compromised.");for(const e of t){const t=this.Ou?this.Ou[e]:void 0;if(!(t&&t.Eu&&"autoDetectResult"in t.Eu))return this.Nu(e,{parsedDataArrs:Object.fromEntries(i.map(t=>[t,"number"==typeof a[t]?new Array(o).fill(a[t]):a[t]])),offset:n,count:o}),this}Ur.console.error("LightningChart JS error - data is arriving in wrong order and auto sorting is either disabled or not applicable. Chart functionality is compromised. Following data properties didn't match their configured pattern: ".concat(t.map(t=>"'".concat(t,"'")).join(", ")))}}const l=h.maxSampleCount-this._u,c=Math.min(o,l);if(c>0){if(!h.incomingDataReplacedCache)for(const t of h.keys){const e=h.buckets[t].cache,i=a[t];Pc(e,i,n,c,this._u)}this.L.D("change",{type:"change",iDataStart:this._u,iDataEnd:this._u+c-1}),this._u+=c,this._u>h.maxSampleCount-1&&(this._u=0,this.Tu=!0,this.L.D("loop",{type:"loop"}))}if(this.ku=Math.min(this.ku+c,h.maxSampleCount),this.Cu+=c,o-c>0&&!h.incomingDataReplacedCache){const t={};for(const e of h.keys)t[e]=Yr(a[e],n+c,void 0);this.appendSamples(t,e)}else this.$u();return this}fill(t){return this.Ou?(Object.keys(t).forEach(t=>{this.Ou&&!this.Ou[t]&&this.Ia&&Ur.console.warn("LightningChart JS warning - DataSetXY.fill() tried to fill data property that doesn't exist in schema (\"".concat(t,'")'))}),Object.entries(this.Ou).forEach(e=>{let[i,s]=e,r=t[i];s.cache&&void 0!==r&&(Is(r)&&(r=r.toUint32()),s.cache.fill(r))}),this.L.D("clear",{type:"clear"}),this):this}setSamples(t,e){return this.clear().appendSamples(t,e)}alterSamplesStartingFrom(t,e,i){var s,r,n;const o=Object.values(e).find(t=>"number"!=typeof t);let a=null==i?void 0:i.offset,h=null==i?void 0:i.count;const l=o?o.length:1;if(a=void 0!==a?a:0,h=void 0!==h?h:l-a,h<=0)return this;const c=Object.keys(e),u=Object.fromEntries(c.map(t=>{var i,s;return[t,zc(e[t],this.Ou&&null!==(s=null===(i=this.Ou[t])||void 0===i?void 0:i.dataStorage)&&void 0!==s?s:Float64Array)]})),d=this.Cu-1,f=void 0!==this.Gu?Math.max(this.Cu-this.Gu,0):0,g=t+h-1,p=Math.max(t,f),y=Math.min(g,d),m=y-p+1;if(this.Cu>0&&m>0){const e=this.zu({appendCount:0,keys:c,parsedDataArrs:u,opts:i}),o=null!==(n=null===(r=null===(s=Object.values(e.buckets).find(t=>t.cache))||void 0===s?void 0:s.cache)||void 0===r?void 0:r.length)&&void 0!==n?n:0;if(void 0!==this.Gu&&this.Tu&&this.Cu%this.Gu!=0){const i=this.Cu-this.Cu%this.Gu,s=this.Cu-1,r=this.Cu-this.ku,n=i-1,h=Math.max(p,r),l=Math.min(y,n)-h+1;if(l>0){const i=h-t,s=Cc(h,this.Cu,o,this._u);for(const t of e.keys){const r=e.buckets[t].cache,n=u[t];Pc(r,n,a+i,l,s)}}const c=Math.max(p,i),d=Math.min(y,s)-c+1;if(d>0){const i=c-t,s=Cc(c,this.Cu,o,this._u);for(const t of e.keys){const r=e.buckets[t].cache,n=u[t];Pc(r,n,a+i,d,s)}}}else{const t=p-f;for(const i of e.keys){const s=e.buckets[i].cache,r=u[i];Pc(s,r,a,m,t)}}this.L.D("clear",{type:"clear"})}const v=t+h-1-d;if(v>0){const i=y+1-t;this.appendSamples(e,{offset:a+i,count:v})}return this}alterSamplesByIndex(t,e){var i;if(!this.Ou)return this;const s=t.length,r=Object.keys(e),n=Object.fromEntries(r.map(t=>{var i,s;return[t,zc(e[t],this.Ou&&null!==(s=null===(i=this.Ou[t])||void 0===i?void 0:i.dataStorage)&&void 0!==s?s:Float64Array)]})),o=this.Cu-1,a=void 0!==this.Gu?Math.max(this.Cu-this.Gu,0):0;if(s<=0)return this;let h=!1;const l=Object.values(this.Ou).find(t=>t.cache).cache.length;for(let c=0;c<s;c+=1){const e=t[c];if(e<a||e>o)continue;const s=Cc(e,this.Cu,l,this._u);for(const t of r){const e=null===(i=this.Ou[t])||void 0===i?void 0:i.cache,r=n[t];e&&(e[s]="number"==typeof r?r:r[c],h=!0)}}return h&&this.L.D("clear",{type:"clear"}),this}alterSamplesByMatch(t,e,i){var s;if(!this.Ou)return this;const r=e.length,n=this.ku,o=this.Cu-1,a=Math.max(o-n+1,0),h=Object.keys(i),l=Object.fromEntries(h.map(t=>{var e,s;return[t,zc(i[t],this.Ou&&null!==(s=null===(e=this.Ou[t])||void 0===e?void 0:e.dataStorage)&&void 0!==s?s:Float64Array)]}));if(r<=0)return this;let c=!1;const u=this.Ou[t].cache,d=this.Uu(t);if(!u)return this;const f=u.length;for(let g=0;g<r;g+=1){const i=e[g];let r;if(d){const t=Fc(i,a,o,!0,t=>u[Cc(t,this.Cu,f,this._u)]);r=Cc(t,this.Cu,f,this._u)}else for(let t=0;t<f;t+=1)if(u[t]===i){r=t;break}if(void 0!==r){if(u[r]===i)for(const t of h){const e=null===(s=this.Ou[t])||void 0===s?void 0:s.cache,i=l[t];e&&(e[r]="number"==typeof i?i:i[g],c=!0)}}else this.Ia&&Ur.console.warn('LightningChart JS warning - DataSetXY.alterSamplesByMatch no match found for "'.concat(t,"=").concat(i,'"'))}return c&&this.L.D("clear",{type:"clear"}),this}$u(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.Ou&&this.Ru&&Object.entries(this.Ou).forEach(e=>{let i,[s,r]=e;if(r.cache)if(r.Eu&&"userSpecified"in r.Eu)i=r.Eu.userSpecified;else if(r.Eu&&"autoDetectResult"in r.Eu)i=r.Eu.autoDetectResult;else if(r.cache&&this.Cu>0&&!t){const t=void 0!==this.Gu&&this.Tu?this._u:0,e=this.ku-1,n=void 0!==this.Gu&&this.Tu?0:void 0,o=void 0!==this.Gu&&this.Tu?this._u-1:void 0,[a,h]=void 0!==n&&void 0!==o&&Math.abs(o-n)>Math.abs(e-t)?[n,o]:[t,e];if(1+h-a>=5){let t,e=r.cache[a];for(let i=a+1;i<=h;i+=1)if(!1!==t){const s=r.cache[i],n=Math.sign(s-e);0!==n&&t&&t.direction!==n?t=!1:0===n||t||(t={direction:n}),e=s}i=t&&t.direction>0?"progressive":t&&t.direction<0?"regressive":null,r.Eu={autoDetectResult:i,effective:i},this.Ia&&Ur.console.warn("LightningChart JS DataSetXY warning | Data pattern was detected automatically (".concat(s,"=").concat(i,").\nAutomatic detection is only intended for kick-starting application development, not for production use.\nDefine data patterns in schema when creating series or DataSetXY to clear this warning and improve performance."))}}})}zu(t){var e,i,s,r,n,o,a,h,l;if(this.Ou||(this.Ou=Object.fromEntries(t.keys.map(e=>[e,{dataStorage:Ic(t.parsedDataArrs[e]),Eu:void 0}]))),0===this.ku&&this.Ou&&!this.Du){const e=this.Ou;t.keys.forEach(i=>{e[i]||(e[i]={dataStorage:Ic(t.parsedDataArrs[i])})})}if((this.ku>0||this.Du)&&this.Ou){const e=this.Ou,i=t.keys.filter(t=>!e[t]);if(i.length>0&&t.appendCount>0){if(this.Du)throw new Error("LightningChart JS error - Input data includes data properties that are not defined in schema. This is not allowed when strict mode is enabled. Extra data properties: ".concat(i.map(t=>"'".concat(t,"'")).join(", ")));this.Ia&&Ur.console.warn("LightningChart JS warning - Input data includes data properties that are not defined in schema. This is OK for data sets that don't yet have data pushed in, but this was not the case. Extra data properties were dropped: ".concat(i.map(t=>"'".concat(t,"'")).join(", ")))}i.forEach(e=>{delete t.parsedDataArrs[e]}),t.keys=Object.keys(t.parsedDataArrs)}if(Object.entries(this.Ou).forEach(e=>{let[i,s]=e;s.dataStorage||(s.dataStorage=Ic(t.parsedDataArrs[i]))}),0===this.ku&&1===Object.keys(this.Ou).length&&!this.Du){const a=(null!==(i=null===(e=t.opts)||void 0===e?void 0:e.step)&&void 0!==i?i:1)>0?"progressive":"regressive";this.Ou._auto={dataStorage:Float64Array,auto:{start:null!==(r=null===(s=t.opts)||void 0===s?void 0:s.start)&&void 0!==r?r:0,step:null!==(o=null===(n=t.opts)||void 0===n?void 0:n.step)&&void 0!==o?o:1},Eu:{userSpecified:a,effective:a}}}Object.entries(this.Ou).forEach(e=>{let[i,s]=e;var r,n,o,a,h,l,c;if(!s.auto)return;const u=null!==(o=null!==(r="object"==typeof s.auto?s.auto.start:void 0)&&void 0!==r?r:null===(n=t.opts)||void 0===n?void 0:n.start)&&void 0!==o?o:0,d=null!==(l=null!==(a="object"==typeof s.auto?s.auto.step:void 0)&&void 0!==a?a:null===(h=t.opts)||void 0===h?void 0:h.step)&&void 0!==l?l:1;let f;if(0===this.ku)f=u;else{const t=this.Yu();if(!t)return;f=t[i]+d}const g=new(null!==(c=s.dataStorage)&&void 0!==c?c:Float64Array)(t.appendCount);for(let p=0;p<t.appendCount;p+=1)g[p]=f+p*d;t.parsedDataArrs[i]=g}),t.keys=Object.keys(t.parsedDataArrs);const c=Object.keys(this.Ou).filter(e=>!t.keys.includes(e));if(c.length>0&&t.appendCount>0){if(this.Du)throw new Error("LightningChart JS error - Input data is missing keys that were defined in schema. This is not allowed when strict mode is enabled. Missing keys: ".concat(c.map(t=>"'".concat(t,"'")).join(", ")));this.Ia&&Ur.console.warn("LightningChart JS warning - Input data is missing keys that were defined in schema. They will be filled with `0`. Missing keys: ".concat(c.map(t=>"'".concat(t,"'")).join(", ")))}for(const d of c)t.parsedDataArrs[d]=new(null!==(a=this.Ou[d].dataStorage)&&void 0!==a?a:Float64Array)(t.appendCount).fill(0);if(t.keys=Object.keys(t.parsedDataArrs),0===this.ku&&0===Object.values(this.Ou).reduce((t,e)=>t+(e.cache?1:0),0)&&(void 0===this.Gu||this.Gu===t.appendCount)&&this.Lu&&(0===(null===(h=t.opts)||void 0===h?void 0:h.offset)||void 0===(null===(l=t.opts)||void 0===l?void 0:l.offset)))return Object.entries(this.Ou).forEach(e=>{let[i,s]=e;var r,n;s.cache="number"==typeof t.parsedDataArrs[i]?new(null!==(r=s.dataStorage)&&void 0!==r?r:Float64Array)(t.appendCount).fill(t.parsedDataArrs[i]):Bc(t.parsedDataArrs[i],null!==(n=s.dataStorage)&&void 0!==n?n:Float64Array)}),this.$u(),{maxSampleCount:t.appendCount,buckets:this.Ou,incomingDataReplacedCache:!0,keys:t.keys};if(void 0===this.Gu){const e=this.ku+t.appendCount;if(!Object.values(this.Ou).find(t=>t.cache))return Object.values(this.Ou).forEach(t=>{var i;t.cache=new(null!==(i=t.dataStorage)&&void 0!==i?i:Float64Array)(e)}),this.$u(),{maxSampleCount:e,buckets:this.Ou,keys:t.keys};const i=Object.values(this.Ou)[0].cache.length;if(i<e){if(!this.Pu.warningDisplayed){const i=Ur.performance.now();if(this.Pu.expandEvents=this.Pu.expandEvents.filter(t=>i-t.timestamp<5e3),e>1e3&&this.Pu.expandEvents.push({timestamp:i}),this.Pu.expandEvents.length>5)return this.Ia&&Ur.console.warn("LightningChart JS warning - DataSetXY append operation was performed more than 5 times in 5 seconds.\nAutomatic max sample count control was enabled.\nFor streaming applications, DataSetXY.setMaxSampleCount() or Series.setMaxSampleCount() should be configured explicitly to get rid of this warning."),this.Pu.warningDisplayed=!0,this.setMaxSampleCount({mode:"auto"}),this.zu(t)}return Object.values(this.Ou).forEach(t=>{var i;const s=new(null!==(i=t.dataStorage)&&void 0!==i?i:Float64Array)(e);s.set(t.cache),t.cache=s}),this._u=this.ku,this.$u(),{maxSampleCount:e,buckets:this.Ou,keys:t.keys}}return i>4*e?(Object.values(this.Ou).forEach(t=>{var i;const s=new(null!==(i=t.dataStorage)&&void 0!==i?i:Float64Array)(e);s.set(t.cache.subarray(0,this.ku)),t.cache=s}),this.$u(),{maxSampleCount:e,buckets:this.Ou,keys:t.keys}):(this.$u(),{maxSampleCount:e,buckets:this.Ou,keys:t.keys})}t.appendCount+this.ku>this.Gu&&this.L.D("maxsamplecountexceed",{type:"maxsamplecountexceed",currentSampleCount:this.ku,currentMaxSampleCount:this.Gu,newTotalSampleCount:this.ku+t.appendCount});const u=this.Gu;return Object.values(this.Ou).forEach(t=>{var e;t.cache=t.cache||new(null!==(e=t.dataStorage)&&void 0!==e?e:Float64Array)(u)}),this.$u(),{maxSampleCount:u,buckets:this.Ou,keys:t.keys}}getSampleCount(){return this.ku}getNextSampleIndex(){return this.Cu}Uu(t){const e=this.Ou&&this.Ou[t];if(e)return e.Eu&&"userSpecified"in e.Eu?e.Eu.userSpecified:e.Eu&&"autoDetectResult"in e.Eu?e.Eu.autoDetectResult:void 0}ju(t){if(!this.Ou)return;const e=null==t?void 0:t.x,i=null==t?void 0:t.y,s=void 0!==e?this.Ou[e]:void 0,r=void 0!==i?this.Ou[i]:void 0;if(s&&s.Eu&&"userSpecified"in s.Eu){if("progressive"===s.Eu.userSpecified)return"ProgressiveX";if("regressive"===s.Eu.userSpecified)return"RegressiveX"}if(r&&r.Eu&&"userSpecified"in r.Eu){if("progressive"===r.Eu.userSpecified)return"ProgressiveY";if("regressive"===r.Eu.userSpecified)return"RegressiveY"}if(s&&s.Eu&&"autoDetectResult"in s.Eu&&s.Eu.autoDetectResult){if("progressive"===s.Eu.autoDetectResult)return"ProgressiveX";if("regressive"===s.Eu.autoDetectResult)return"RegressiveX"}if(r&&r.Eu&&"autoDetectResult"in r.Eu&&r.Eu.autoDetectResult){if("progressive"===r.Eu.autoDetectResult)return"ProgressiveY";if("regressive"===r.Eu.autoDetectResult)return"RegressiveY"}}Hu(t){if(!t||!this.Ou)return{dataPattern:void 0,Wu:Float64Array,Xu:Float64Array};const e={dataPattern:this.ju(t)};for(const i of Object.keys(t)){const s=i,r=t[s];if(void 0===r)continue;const n=this.Ou[r];n&&n.cache&&("x"===s&&(e.Zu=n.cache,e.Wu=n.dataStorage),"y"===s&&(e.Ju=n.cache,e.Xu=n.dataStorage),"color"===s&&(e.Qu=n.cache),"rotation"===s&&(e.Ku=n.cache),"size"===s&&(e.qu=n.cache),"lookupValue"===s&&(e.td=n.cache))}return e}setMaxSampleCount(t){if("object"==typeof t){this.sd&&this.removeEventListener("maxsamplecountexceed",this.sd);const e=t.max,i=t.initial;this.sd=t=>{if(void 0!==e&&t.currentMaxSampleCount>=e)return;let i=Math.max(2*t.currentMaxSampleCount,t.newTotalSampleCount);void 0!==e&&(i=Math.min(i,e)),this.setMaxSampleCount(i)},this.addEventListener("maxsamplecountexceed",this.sd),void 0===this.Gu&&(void 0!==i?this.setMaxSampleCount(i):this.setMaxSampleCount(Math.min(2*this.ku,void 0!==e?e:Number.MAX_SAFE_INTEGER)))}else if("number"==typeof t){const e=t;if(void 0!==this.Gu&&this.Gu>e)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to shrink data set. This is currently not supported.");if(!this.Ou||!Object.values(this.Ou).find(t=>t.cache))return this.Gu=e,this;if(e===this.Gu)return this;if(this.Tu&&0!==this._u)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to expand data set that has exceeded its max sample count. This is currently not supported.");this.Gu=e,this.ku<e?(this._u=this.ku,this.Tu=!1):(this._u=0,this.Tu=!0),Object.values(this.Ou).forEach(t=>{var i;const s=new(null!==(i=t.dataStorage)&&void 0!==i?i:Float64Array)(e);s.set(t.cache),t.cache=s})}return this}getMaxSampleCount(){return this.Gu}clear(){return this._u=0,this.ku=0,this.Cu=0,this.Tu=!1,this.L.D("clear",{type:"clear"}),this}readBack(t){var e;if(!this.Ou)return{data:{},iSampleFirst:0};const i=null===(e=Object.values(this.Ou).find(t=>t.cache))||void 0===e?void 0:e.cache;if(!i)return{data:{},iSampleFirst:0};const s=i.length;let r,n=[];if(null==t?void 0:t.onlyInRange){const e=this.Ou[t.onlyInRange.key],i=this.Uu(t.onlyInRange.key),s=e.cache;if(!i)throw new Error("LightningChart JS - attempted to use `DataSetXY.readBack` with `onlyInRange` without a data pattern.\nThis operation is only supported for progressive data");if(!s)return{data:{},iSampleFirst:0};const o=Math.min(t.onlyInRange.start,t.onlyInRange.end),a=Math.max(t.onlyInRange.start,t.onlyInRange.end),h=Tc(o,a,s,this.Cu,this.ku,this._u,i,0);if(!h)return{data:{},iSampleFirst:0};n=h.dataRanges,r=h.iFirstSample}else if(void 0!==this.Gu&&this.Tu&&this.Cu%this.Gu!=0){const t=this._u,e=s-t,i=this._u-1;n.push({offset:t,count:e}),n.push({offset:0,count:i+1}),r=this.Cu-s}else n.push({offset:0,count:this.ku}),r=0;const o=n.reduce((t,e)=>t+e.count,0),a=Object.fromEntries(Object.entries(this.Ou).filter(t=>{let[e,i]=t;return i.cache}).map(t=>{let[e,i]=t;var s;const r=i.cache;let a;if(1===n.length&&n[0].count===r.length)a=r;else{a=new(null!==(s=i.dataStorage)&&void 0!==s?s:Float64Array)(o);let t=0;for(const e of n)a.set(i.cache.subarray(e.offset,e.offset+e.count),t),t+=e.count}return[e,a]}));return{data:a,iSampleFirst:r}}ed(t,e){var i,s;const r=this.readBack(e);return{xValues:null!==(i=r.data[t.x])&&void 0!==i?i:new Float64Array,yValues:null!==(s=r.data[t.y])&&void 0!==s?s:new Float64Array,lookupValues:t.lookupValue?r.data[t.lookupValue]:void 0,colors:t.color?r.data[t.color]:void 0,sizes:t.size?r.data[t.size]:void 0,rotations:t.rotation?r.data[t.rotation]:void 0,iSampleFirst:r.iSampleFirst}}hd(t){}rd(){return{min:0,max:void 0!==this.Gu&&this.Tu?this.Gu-1:this.ku-1}}nd(t){t=Math.min(t,this.ku),this.Cu-=t,this.ku-=t,this._u-=t,this._u<0&&void 0!==this.Gu&&(this._u+=this.Gu)}Nu(t,e){const i=this.Ou;if(!i)return;const s=this.Uu(t),r="progressive"===s,n=i[t].cache,o=e.parsedDataArrs[t],a=Object.keys(e.parsedDataArrs);if(!s||!n||!o)return;const h=e.count,l=o[0];if(this.Vu(Object.fromEntries(a.map(t=>[t,e.parsedDataArrs[t][e.offset+e.count-1]])))){const t=n.length,s=this.ku,o=this.Cu-1,c=Math.max(o-s+1,0),u=Fc(l,c,o,r,e=>n[Cc(e,this.Cu,t,this._u)]),d=u-1,f=u+1,g=n[Cc(u,this.Cu,t,this._u)],p=f<=this.Cu-1?n[Cc(f,this.Cu,t,this._u)]:void 0,y=void 0!==p&&(r&&p<l||!r&&p>l)?f+1:r&&g<l||!r&&g>l?u+1:d+1,m=o-y+1,v=Object.fromEntries(a.map(t=>{var e;return[t,new(null!==(e=i[t].dataStorage)&&void 0!==e?e:Float64Array)(m)]}));let x=0;for(let e=y;e<=o;e+=1){const s=Cc(e,this.Cu,t,this._u);for(const t of a)v[t][x]=i[t].cache[s];x+=1}this.nd(m);const b=Object.fromEntries(a.map(t=>{var s;const r=new(null!==(s=i[t].dataStorage)&&void 0!==s?s:Float64Array)(h+m);return r.set(e.parsedDataArrs[t]),r.set(v[t],h),[t,r]}));this.Iu=!0,this.appendSamples(b),this.Iu=!1,this.L.D("clear",{type:"clear"})}else{const i=this.Yu(),s=i?i[t]:0;let r=0;for(let t=0;t<h;t+=1)if(o[t]>s){r=t;break}this.Iu=!0,this.appendSamples(e.parsedDataArrs,{offset:r}),this.Iu=!1}}Vu(t){const e=this.Yu();if(!e||!this.Ou)return;const i=Object.keys(t),s=[];for(const r of i){const i=this.Uu(r);if(!i)continue;const n=e[r],o=t[r],a="number"==typeof o?o:o[0];("progressive"===i&&a<n||"regressive"===i&&a>n)&&s.push(r)}return s.length>0?s:void 0}od(t){const e=this.Hu(t);if(!e.Zu||!e.Ju||0===this.ku)return;if(void 0===this.Gu)return this.Cu>0?{x:e.Zu[0],y:e.Ju[0]}:void 0;if(!this.Tu)return{x:e.Zu[0],y:e.Ju[0]};let i=this._u-this.ku;return i<0&&(i+=this.Gu),{x:e.Zu[i],y:e.Ju[i]}}ad(t){const e=this.Hu(t);if(!e.Zu||!e.Ju||0===this.ku)return;if(void 0===this.Gu){const t=this.ku-1;return t>=0?{x:e.Zu[t],y:e.Ju[t]}:void 0}let i=this._u-1;return i<0&&(i+=this.Gu),{x:e.Zu[i],y:e.Ju[i]}}ld(){if(!this.Ou||0===this.ku)return;let t;if(void 0===this.Gu){if(this.Cu>0)return;t=0}else this.Tu?(t=this._u-this.ku,t<0&&(t+=this.Gu)):t=0;return Object.fromEntries(Object.entries(this.Ou).map(e=>{let[i,s]=e;return[i,s.cache[t]]}))}Yu(){if(!this.Ou||0===this.ku)return;let t;return void 0===this.Gu?t=this.ku-1:(t=this._u-1,t<0&&(t+=this.Gu)),Object.fromEntries(Object.entries(this.Ou).map(e=>{let[i,s]=e;return[i,s.cache[t]]}))}ud(t,e){const i=this.Hu(t);if(!(this.Ou&&0!==this.ku&&i&&i.Zu&&i.Ju))return;const s=i.Zu.length,r=this.ku,n=this.Cu-1,o=Math.max(n-r+1,0)+e,a=Cc(o,this.Cu,s,this._u);return{x:i.Zu[a],y:i.Ju[a],lookupValue:i.td?i.td[a]:void 0,color:i.Qu?i.Qu[a]:void 0,size:i.qu?i.qu[a]:void 0,rotation:i.Ku?i.Ku[a]:void 0,iSample:o,sample:Object.fromEntries(Object.entries(this.Ou).map(t=>{let[e,i]=t;return[e,i.cache?i.cache[a]:void 0]}))}}dd(t,e,i,s,r){if(!t)return;const n=this.Ou,o=this.Hu(t),a=o.dataPattern,h=o.Zu,l=o.Ju;if(!h||!l||!n)return;const c=(t,e)=>({x:h[t],y:l[t],lookupValue:o.td?o.td[t]:void 0,color:o.Qu?o.Qu[t]:void 0,size:o.qu?o.qu[t]:void 0,rotation:o.Ku?o.Ku[t]:void 0,iSample:e,sample:Object.fromEntries(Object.entries(n).map(e=>{let[i,s]=e;return[i,s.cache?s.cache[t]:void 0]}))}),u=h.length,d=this.ku,f=this.Cu-1,g=Math.max(f-d+1,0);if(a){const s=za(a),r=this.od(t),h=this.ad(t);if(!(r&&h&&o.Zu&&o.Ju))return;const l="ProgressiveX"===a||"RegressiveX"===a?"x":"y",d="x"===l?"y":"x",p="x"===l?o.Zu:o.Ju,y="x"===d?o.Zu:o.Ju,m=e[l],v=Math.min(r[l],h[l]),x=Math.max(r[l],h[l]);if(m<v||m>x)return;const b=Fc(m,g,f,s,t=>p[Cc(t,this.Cu,u,this._u)]),S=Cc(b,this.Cu,u,this._u);if(!i)return c(S,b);const A=b-1,E=b+1,k=p[S],w=s?m>=k?E<=f?E:void 0:A>=g?A:void 0:m<=k?E<=f?E:void 0:A>=g?A:void 0;if(void 0===w)return;const M=Cc(w,this.Cu,u,this._u),C=b<w?{pos:p[S],val:y[S],iSample:b}:{pos:p[M],val:y[M],iSample:w},T=b>w?{pos:p[S],val:y[S],iSample:b}:{pos:p[M],val:y[M],iSample:w},F=(m-C.pos)/(T.pos-C.pos),P=Ia(C.val,T.val,F),B=Object.fromEntries(Object.entries(n).map(t=>{let[e,i]=t;return[e,i.cache?i.cache[S]:void 0]}));return"x"===Da(a)?{x:m,y:P,iSample:Ia(C.iSample,T.iSample,F),sample:B}:{y:m,x:P,iSample:Ia(C.iSample,T.iSample,F),sample:B}}let p,y=Number.MAX_VALUE;const m=hr(e,s,r),v=this.ku-1;for(let x=0;x<=v;x+=1){const t=h[x],e=l[x];if(!this.Bu||!Number.isNaN(t)&&!Number.isNaN(e)){const i=ar(t,s.x,r.x),n=ar(e,s.y,r.y),o=(i-m.x)**2+(n-m.y)**2;o<y&&(y=o,p=x)}}return void 0===p?void 0:c(p,p)}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}const Cc=(t,e,i,s)=>t%i,Tc=(t,e,i,s,r,n,o,a)=>{if(0===s||0===r)return;const h="progressive"===o,l=i.length,c=s-1,u=Math.max(c-r+1,0),d=Ec(i)?Fc(t,u,c,h,t=>i.elementAt(Cc(t,s,l))):Fc(t,u,c,h,t=>i[Cc(t,s,l)]),f=Ec(i)?Fc(e,u,c,h,t=>i.elementAt(Cc(t,s,l))):Fc(e,u,c,h,t=>i[Cc(t,s,l)]),g=Math.min(d,f),p=Math.max(d,f);if(g===p&&(0===g||g===c))return;const y=Math.max(g-a,u),m=Math.min(p+a,c),v=Cc(y,s,l),x=Cc(m,s,l);return v>x?{iFirstSample:y,iLastSample:m,iFirstSampleDataArray:v,iLastSampleDataArray:x,dataRanges:[{offset:v,count:l-v},{offset:0,count:x+1}]}:{iFirstSample:y,iLastSample:m,iFirstSampleDataArray:v,iLastSampleDataArray:x,dataRanges:[{offset:v,count:x-v+1}]}},Fc=(t,e,i,s,r)=>{const n=i;for(;e!==i;){const n=Math.ceil((e+i)/2),o=r(n);s&&t<o||!s&&t>o?i=n-1:e=n}const o=Math.abs(t-r(e));return e<n&&Math.abs(t-r(e+1))<o?e+1:e},Pc=(t,e,i,s,r)=>{if("number"==typeof e)t.fill(e,r,r+s);else{const n=e.length;if(Array.isArray(e))for(let o=0;o<s;o+=1)t[r+o]=e[i+o];else t.set(n===s?e:e.subarray(i,i+s),r)}},Bc=(t,e)=>void 0===t?void 0:Array.isArray(t)?new e(t):t instanceof e?t:new e(t),Lc=/^(\d{4}-\d{2}-\d{2})(?:T(\d{2}:\d{2}:\d{2}(?:\.\d+)?)(Z|[+-]\d{2}:\d{2})?)?$/,Dc=t=>"string"==typeof t&&Lc.test(t)&&!Ur.isNaN(Date.parse(t)),zc=(t,e)=>{if("number"==typeof t)return t;if(Is(t))return t.toUint32();if(t instanceof Date)return t.getTime();if("string"==typeof t){if(Dc(t))return new Date(t).getTime();throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings")}const i=t.length,s=t[0]&&t[0]instanceof Date,r=t[0]&&Dc(t[0]),n=t[0]&&Is(t[0]);if(!r&&t[0]&&"string"==typeof t[0])throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");if(r){const s=new e(i);for(let e=0;e<i;e+=1)s[e]=new Date(t[e]).getTime();return s}if(s){const s=new e(i);for(let e=0;e<i;e+=1)s[e]=t[e].getTime();return s}if(n){const e=t.length,i=new Uint32Array(e);for(let s=0;s<e;s+=1){const e=t[s],r=255*e.a<<24|255*e.b<<16|255*e.g<<8|255*e.r;i[s]=r}return i}return t},Ic=t=>{if(t&&Array.isArray(t))return Float64Array;const e="object"==typeof t?Object.getPrototypeOf(t).constructor:void 0;return null!=e?e:Float64Array},Rc=t=>!!t&&!Array.isArray(t)&&(t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array);class _c extends bc{constructor(t,e,i,s,r){var n;super(t,e,i,s,r),this.fl="label",this.bu=this.Ws.bn(this.renderingScale).Jr(this.fl).Ke(sa).mn(Zn).Sn(Zn),this.setMargin(null!==(n=r.uiTextPadding)&&void 0!==n?n:5),this.L.Oi(this.bu)}En(){return[this.bu]}setFillStyle(t){return this.bu.Ke(t),this.Ws.Bs(),this}getFillStyle(){return this.bu.pr()}th(){void 0!==this.Nn&&this.bu.il(this.Nn);const t=this.getPosition(As(0,0),Rr.Content),e=hr(t,this.scale,this.renderingScale);return this.bu.ih(e),this.bu.Zh=this.Zh,this}Er(){this.bu.Er();const t=0===this.fl.length?As(0,0):this.bu.vu();return this.setContentSize(t),super.Er()}setText(t){return this.fl=t,this.bu.Jr(this.fl),this.Ws.Bs(),this}getText(){return this.fl}setFont(t){return this.bu.Mr(t),this.Ws.Bs(),this}getFont(){return this.bu.br()}setTextRotation(t){return this.bu.wr(t),this.Ws.Bs(),this}getTextRotation(){return this.bu._r()}}const Vc=l(l(l({},Ol),Gl),{},{uiElement:_c});class Nc extends Sc{constructor(t,e,i,s,r){super(t,e,i,s,r),this.fitTo=this.Gn.bind(this),this.setSize=this.fitTo,this.bu=this.Ws.fd(e).Ke(sa).Qe(Lr),this.Ad=this.bu.Go(),this.L.Oi(this.bu)}En(){return[this.bu]}setCornerRadius(t,e){var i,s,r,n;return this.gd=t,this.Ad.vd(t?{extent:t,c_x1_y1:null===(i=null==e?void 0:e.bottomLeft)||void 0===i||i,c_x1_y2:null===(s=null==e?void 0:e.topLeft)||void 0===s||s,c_x2_y1:null===(r=null==e?void 0:e.bottomRight)||void 0===r||r,c_x2_y2:null===(n=null==e?void 0:e.topRight)||void 0===n||n,skipTooSmallCheck:!!e}:void 0),this.Ws.Bs(),this}getCornerRadius(){return this.gd}setFillStyle(t){return this.bu.Ke(t),this.Ws.Bs(),this}getFillStyle(){return this.bu.pr()}setStrokeStyle(t){return this.bu.Qe(t),this.Ws.Bs(),this}getStrokeStyle(){return this.bu.ja()}th(){void 0!==this.Nn&&this.bu.il(this.Nn);const t=So([this.getPosition(As(-1,-1),Rr.Content),this.getPosition(As(1,1),Rr.Content)].map(t=>hr(t,this.scale,this.renderingScale)));return this.Ad.yd(t.min.x,t.min.y,t.max.x,t.max.y),this}Gn(t){return this.setContentSize(t),this.Ws.Bs(),this}$n(){return 0}Un(){return 0}jn(){return 0}Yn(){return 0}}class Oc extends Ac{constructor(t,e,i,s,r){super(t,e,i,gc.Simple,s,r),this.xd=Fs(As(0,0)),this.Md=Fs(10),this.wd=Fs(void 0),this.Kn=Fs(Nr.Right),this.Mu()}En(){return[this.bu]}setFillStyle(t){return this.bu.Ke(t),this.Ws.Bs(),this}getFillStyle(){return this.bu.pr()}setStrokeStyle(t){return this.bu.Qe(t),this.Ws.Bs(),this}getStrokeStyle(){return this.bu.ja()}setDirection(t){return this.Kn._(t),this.Ws.Bs(),this}getDirection(){return this.Kn.C()}setPointerLength(t){return this.Md._(t),this.Ws.Bs(),this}getPointerLength(){return this.Md.C()}setPointerAngle(t){return this.wd._(t),this.Ws.Bs(),this}getPointerAngle(){let t=this.wd.C();if(void 0===t){const e=this._d();if(0===e)return 0;t=0!==e?180*Math.atan(2*this.getPointerLength()/e)/Math.PI:0}return Math.min(Math.max(t,1),89)}Gn(t){return this.xd._(t),this.Ws.Bs(),this}kd(){const t=this.getPointerAngle();return 0===t?0:2*this.getPointerLength()/Math.tan(t*Math.PI/180)}Cd(){return yn(this.Kn.C())?this.xd.C().x:this.xd.C().y}_d(){return yn(this.Kn.C())?this.xd.C().y:this.xd.C().x}$n(){switch(this.Kn.C()){case Nr.Right:return 0;case Nr.Left:return this.getPointerLength();case Nr.Up:case Nr.Down:return Math.max(0,this.kd()-this._d());default:return 0}}Un(){switch(this.Kn.C()){case Nr.Right:return this.getPointerLength();case Nr.Left:return 0;case Nr.Up:case Nr.Down:return Math.max(0,this.kd()-this._d());default:return 0}}jn(){switch(this.Kn.C()){case Nr.Right:case Nr.Left:return Math.max(0,this.kd()-this._d());case Nr.Up:return this.getPointerLength();case Nr.Down:default:return 0}}Yn(){switch(this.Kn.C()){case Nr.Right:case Nr.Left:return Math.max(0,this.kd()-this._d());case Nr.Up:return 0;case Nr.Down:return this.getPointerLength();default:return 0}}wu(){const t=pn(this.Kn.C()),e=Fo(As(0,0),t),i=this.getPointerLength(),s=this.kd(),r=this.Cd(),n=this._d();if(!(0!==i&&0!==s||0!==r&&0!==n))return[];const o=As(0,0),a=Lo(Lo(o,Bo(t,-i)),Bo(e,s/2)),h=Lo(a,Bo(e,(n-s)/2)),l=Lo(h,Bo(t,-r)),c=Lo(Lo(o,Bo(t,-i)),Bo(e,-s/2)),u=Lo(c,Bo(e,-(n-s)/2)),d=Lo(u,Bo(t,-r));let f;return f=0===r||0===n?[o,a,c]:0===i||0===s?[h,l,d,u]:qr(n,s)?[o,a,l,d,c]:[o,a,h,l,d,u,c],f}}class Yc extends bc{constructor(t,e,i,s,r){super(t,e,i,s,r),this.fitTo=this.Gn.bind(this),this.setSize=this.fitTo,this.Td=new Mc,this.bu=this.Ws.Ld(e).dh(Lr).Pd(sa).Id(sa).Fd(this.Td,{x:"x",y:"y"}),this.L.Oi(this.bu)}En(){return[this.bu]}setShape(t){return this.bu.Bd(t),this}getShape(){return this.bu.Dd()}setRotation(t){return this.bu.Rd(t),this}getRotation(){return this.bu.Ed()}setFillStyle(t){return this.bu.Id(t),this.Ws.Bs(),this}getFillStyle(){return this.bu.Od()}setStrokeStyle(t){return this.bu.zd(t),this.Ws.Bs(),this}getStrokeStyle(){return this.bu.Vd()}th(){void 0!==this.Nn&&this.bu.il(this.Nn);const t=hr(this.getPosition({x:0,y:0},Rr.Content),this.scale,this.renderingScale),e=Math.max(this.size.x,this.size.y);if(this.Td.clear(),e>0){const i=this.bu.Dd(),s=this.bu.Od(),r=hh(i)&&i,n=Pr(s)&&s;if(r){const t=e/r._t().y;this.bu.Nd(t)}else if(n){const t=n.source;if(t instanceof Image){const i=e/t.height;this.bu.Nd(i)}}else this.bu.Nd(e);this.Td.appendSample(t)}return this}Gn(t){return this.setContentSize(t),this.Ws.Bs(),this}$n(){return 0}Un(){return 0}jn(){return 0}Yn(){return 0}}const Gc=l(l(l({},Ol),Gl),{},{uiElement:Yc});class Xc extends Ul{setSize(t){return this.setContentSize(t),this.Ws.Bs(),this}}class Uc extends Ll{constructor(){super(...arguments),this.Gd=[],this.$d=0,this.Ud=t=>{const e=this.Gd.indexOf(t);e>=0&&this.Gd.splice(e,1)}}getMembers(){return this.Gd}getMemberCount(){return this.Gd.length}setMinimumSize(t){return this.Yd=t,this.Ws.Bs(),this}getMinimumSize(){return this.Yd}addElement(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const i=t.ro(this.Ws,this.renderingScale,this.scale,this.Ud,this.bi,!1);return i.setPointerEvents(this.getPointerEvents()),e>=0?this.Gd.splice(e,0,i):this.Gd.push(i),i.setVisible(this.getVisible()),this.L.Ni(i),this.ci&&(Rn(0,()=>{}),i.dispose()),i}dispose(){return super.dispose(),this.Gd.slice().forEach(Zr),this}th(){super.th(),this.Gd.forEach(t=>{t.Zh=this.Zh});const t=this.Nn;return void 0!==t&&this.Gd.forEach((e,i)=>{e.Nn=t+1+.01*i}),this}setVisible(t){return super.setVisible(t),this.Gd.forEach(e=>e.setVisible(t)),this}setPointerEvents(t){super.setPointerEvents(t);for(let e=0;e<this.Gd.length;e+=1)this.Gd[e].setPointerEvents(t);return this}getPointerEvents(){if(super.getPointerEvents())return!0;for(let t=0;t<this.Gd.length;t+=1)if(this.Gd[t].getPointerEvents())return!0;return!1}setHighlight(t){super.setHighlight(t);for(let e=0;e<this.Gd.length;e+=1){const i=this.Gd[e];Or(i)&&i.setHighlight(t)}return this}}class Hc extends Uc{th(){super.th();const t=this.getPosition(As(-1,1),Rr.Content),e=this.Gd.reduce((t,e)=>t+ +(e instanceof Xc),0),i=e>0?(this.size.x-this.$d)/e:0;return this.Gd.reduce((e,s)=>s instanceof Xc?this.scale.Jt({x:e,y:t.y},{x:i+s.getSize().x,y:0}).x:s.setOrigin(As(-1,1)).setPosition(As(e,t.y)).th().getPosition(As(1,0)).x,t.x),this}Er(){for(let i=0;i<this.Gd.length;i+=1){const t=this.Gd[i];t instanceof jc&&t.setMinimumSize(0),t.Er()}const t=this.Gd.reduce(this.jd.bind(this),Es(0,0));this.$d=t.x;const e=void 0===this.Yd?t:As(Math.max(t.x,this.Yd),t.y);this.setContentSize(e);for(let i=0;i<this.Gd.length;i+=1){const t=this.Gd[i];t instanceof jc&&t.setMinimumSize(e.y).Er()}return super.Er()}jd(t,e){const i=e.getSize();return t.x+=i.x,t.y=Math.max(t.y,i.y),t}addGap(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return this.addElement(Wc,e).setSize(As(0,t))}}class jc extends Uc{th(){super.th();const t=this.getPosition(As(-1,1),Rr.Content),e=this.Gd.reduce((t,e)=>t+ +(e instanceof Xc),0),i=e>0?(this.size.y-this.$d)/e:0;return this.Gd.reduce((e,s)=>s instanceof Xc?this.scale.Jt({x:t.x,y:e},{x:0,y:-(i+s.getSize().y)}).y:s.setOrigin(As(-1,1)).setPosition(As(t.x,e)).th().getPosition(As(0,-1)).y,t.y),this}Er(){for(let i=0;i<this.Gd.length;i+=1){const t=this.Gd[i];t instanceof Hc&&t.setMinimumSize(0),t.Er()}const t=this.Gd.reduce(this.jd.bind(this),Es(0,0));this.$d=t.y;const e=void 0===this.Yd?t:As(t.x,Math.max(t.y,this.Yd));this.setContentSize(e);for(let i=0;i<this.Gd.length;i+=1){const t=this.Gd[i];t instanceof Hc&&t.setMinimumSize(e.x).Er()}return super.Er()}jd(t,e){const i=e.getSize();return t.y+=i.y,t.x=Math.max(t.x,i.x),t}addGap(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return this.addElement(Wc,e).setSize(As(0,t))}}const Wc=l(l(l({},Ol),Gl),{},{uiElement:Xc});class Zc extends jc{constructor(){super(...arguments),this.Gd=[]}addRow(){return this.addElement(Qc,void 0)}getRow(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&this.Gd.length<=t?(this.addRow(),this.getRow(t,!0)):this.Gd[t]}}const Jc=l(l(l({},Ol),Yl),Xl),qc=l(l({},Jc),{},{uiElement:jc,background:Nc}),Qc=l(l({},Jc),{},{uiElement:Hc,background:Nc}),Kc={setTextLabel:null,setText(t){return this.setTextLabel.setText(t),this},getText(){return this.setTextLabel.getText()}},$c=(t=>{const e={},i="stylable".concat(t,"s");return e[i]=[],e["set".concat(t,"FillStyle")]=function(t){return this[i].forEach(e=>e.setFillStyle(t)),this},e["get".concat(t,"FillStyle")]=function(){return this[i][0].getFillStyle()},e["set".concat(t,"Font")]=function(t){return this[i].forEach(e=>e.setFont(t)),this},e["get".concat(t,"Font")]=function(){return this[i][0].getFont()},e["set".concat(t,"Rotation")]=function(t){return this[i].forEach(e=>e.setTextRotation(t)),this},e["get".concat(t,"Rotation")]=function(){return this[i][0].getTextRotation()},e})("Text"),tu={button:void 0,isLocked:!1,setOn(t){const e=this.button.getOn()!==t;return this.button.setOn(t),e&&this.L.D("switch",{state:t}),this},getOn(){return this.button.getOn()},setLocked(t){return this.isLocked=t,this},getLocked(){return this.isLocked},setButtonOffFillStyle(t){return this.button.setOffFillStyle(t),this},getButtonOffFillStyle(){return this.button.getOffFillStyle()},setButtonOnFillStyle(t){return this.button.setOnFillStyle(t),this},getButtonOnFillStyle(){return this.button.getOnFillStyle()},setButtonStrokeStyle(t){return this.button.setStrokeStyle(t),this},getButtonStrokeStyle(){return this.button.getStrokeStyle()},setButtonSize(t){return this.button.setSize(t),this},getButtonSize(){return this.button.getSize()},setButtonShape(t){return this.button.setButtonShape(t),this},getButtonShape(){return this.button.getButtonShape()}},eu={textFillStyleHidden:void 0,setTextFillStyleHidden(t){return this.textFillStyleHidden="function"==typeof t?t(this.textFillStyleHidden):t,this},getTextFillStyleHidden(){return this.textFillStyleHidden}},iu={pointable:void 0,setDirection(t){return this.pointable.setDirection(t),this},getDirection(){return this.pointable.getDirection()},setPointerLength(t){return this.pointable.setPointerLength(t),this},getPointerLength(){return this.pointable.getPointerLength()}},su=l(l(l({},Ol),Yl),{},{background:Nc,ro(t,e,i,s,r,n){const o=new Hc(t,e,i,this.background,s,r),a=o.addElement(Vc,void 0),h=Object.assign(o,Kc,{setTextLabel:a},$c,{stylableTexts:[a]});return Nl(h,r,n),this.applyStylers(h,r)}}).addStyler(Vl),ru=l(l(l({},Ol),Yl),{},{background:Oc,direction:Nr.Up,setDirection(t){return this.direction=t,this},ro(t,e,i,s,r,n){const o=this.direction,a=new Hc(t,e,i,this.background,s,r),h=a.addElement(Vc,void 0),l=a.getBackground().setDirection(o),c=a.th.bind(a),u=Object.assign(a,Kc,{setTextLabel:h},$c,{stylableTexts:[h]},iu,{pointable:l},{setTickLabelPadding(t){return this.getDirection()===Nr.Up?(this.setPadding({top:t}),h.setMargin({top:0})):this.getDirection()===Nr.Down?(this.setPadding({bottom:t}),h.setMargin({bottom:0})):this.getDirection()===Nr.Right?(this.setPadding({right:t}),h.setMargin({right:0})):this.getDirection()===Nr.Left&&(this.setPadding({left:t}),h.setMargin({left:0})),this},getTickLabelPadding(){return this.getDirection()===Nr.Up?this.getPadding().top:this.getDirection()===Nr.Down?this.getPadding().bottom:this.getDirection()===Nr.Right?this.getPadding().right:this.getPadding().left},Zh:void 0,th(){h.Zh=this.Zh,c()}});return u.no="other",u.setPointerLength(r.xAxisNumericTicks.majorTickStyle.getTickLength()).setTickLabelPadding(r.xAxisNumericTicks.majorTickStyle.getTickPadding()).setTextFont(r.uiTextFont).setTextFillStyle(r.uiTextFillStyle).setBackground(t=>t.setFillStyle(r.uiBackgroundFillStyle).setStrokeStyle(r.uiBackgroundStrokeStyle)),Nl(u,r,n),this.applyStylers(u,r)}});const nu=l(l({},Ol),{},{uiElement:class extends Bl{constructor(t,e,i,s,r,n){super(t,e,i,r,n),this.Hd=!1,this.Wd=sa,this.Xd=sa,this.getOn=()=>this.Hd,this.Xd=n.uiButtonFillStyleHidden||n.uiButtonFillStyle,this.Zd=new Yc(this.Ws,this.renderingScale,this.scale,Jr,n).setShape(s).setFillStyle(this.Xd),this.L.Ni(this.Zd)}En(){return[...this.Zd.En()]}setOn(t){return this.Hd=t,this.Zd.setFillStyle(t?this.Wd:this.Xd),this.Ws.Bs(),this}setOffFillStyle(t){return this.Xd="function"==typeof t?t(this.Xd):t,this.Hd||this.Zd.setFillStyle(this.Xd),this}getOffFillStyle(){return this.Xd}setSize(t){return this.Zd.fitTo("number"==typeof t?As(t,t):t),this}getSize(){return this.Zd.getSize()}setOnFillStyle(t){return this.Wd="function"==typeof t?t(this.Wd):t,this.Hd&&this.Zd.setFillStyle(this.Wd),this}getOnFillStyle(){return this.Wd}setStrokeStyle(t){return this.Zd.setStrokeStyle(t),this}getStrokeStyle(){return this.Zd.getStrokeStyle()}setButtonShape(t){return this.Zd.setShape(t),this.Ws.Bs(),this}getButtonShape(){return this.Zd.getShape()}th(){return super.th(),this.Zd.Nn=this.Nn,this.Zd.setVisible(this.getVisible()).setPosition(this.getPosition(As(0,0),Rr.Content)).th(),this}Er(){const t=this.Zd.Er().getSize();return this.setContentSize(t),super.Er()}dispose(){return super.dispose(),this.Zd.dispose(),this}setPointerEvents(t){return this.Zd.setPointerEvents(t),this}getPointerEvents(){return this.Zd.getPointerEvents()}setHighlight(t){const e=Yn(t);return this.Zd.setHighlight(e),this.L.D("highlightchange",{highlight:e}),this.Ws.Bs(),this}getHighlight(){return this.Zd.getHighlight()}},buttonShape:La.Circle,setButtonShape(t){return l(l({},this),{},{buttonShape:t})},ro(t,e,i,s,r,n){const o=this.applyStylers(new this.uiElement(t,e,i,this.buttonShape,s,r),r);return Nl(o,r,n),o}}),ou=l(l(l({},Ol),Yl),{},{background:Nc,buttonBuilder:nu,setButtonShape(t){return l(l({},this),{},{buttonBuilder:this.buttonBuilder.setButtonShape(t)})},ro(t,e,i,s,r,n){var o;const a=new Hc(t,e,i,this.background,s,r),h=a.addElement(qc);h.addGap();const l=h.addElement(this.buttonBuilder);h.addGap();const c=a.addElement(qc);c.addGap();const u=c.addElement(Vc);c.addGap(),a.addGap();const d=Object.assign(a,Kc,{setTextLabel:u},$c,{stylableTexts:[u]},tu,{button:l},eu);let f;return d.addEventListener("click",()=>{d.getLocked()||d.setOn(!d.getOn())}),d.addEventListener("pointerenter",()=>{d.setHighlight(!0)}),d.addEventListener("pointerleave",()=>{d.setHighlight(!1)}),d.setMouseStyle(Xh.Point),d.setTextFillStyleHidden(r.uiTextFillStyleHidden||r.uiTextFillStyle),d.addEventListener("switch",t=>{t.state?f&&d.setTextFillStyle(f):(f=d.getTextFillStyle(),d.setTextFillStyle(d.getTextFillStyleHidden()))}),d.setPadding({left:null!==(o=r.uiTextPadding)&&void 0!==o?o:5}),Nl(d,r,n),this.applyStylers(d,r)}}).addStyler(Vl).addStyler((t,e)=>(t.setButtonOnFillStyle(e.uiButtonFillStyle).setButtonOffFillStyle(e.uiButtonFillStyleHidden).setButtonSize(e.uiButtonSize).setButtonStrokeStyle(e.uiButtonStrokeStyle),t));class au extends Bl{constructor(t,e,i,s,r){super(t,e,i,s,r),this.Jd=10,this.Qd=Nr.Up,this.Kd=0,this.no="major",this.fl=t.bn(this.renderingScale).mn(Zn).Sn(Zn),this.L.Oi(this.fl),this.uh=t.fh(this.renderingScale),this.L.Oi(this.uh)}En(){return[this.fl]}th(){if(super.th(),this.ci)return this;const t=hr(this.getPosition(),this.scale,this.renderingScale),e=this.renderingScale.Jt(t,{x:this.Qd===Nr.Right?-this.Jd:this.Qd===Nr.Left?this.Jd:0,y:this.Qd===Nr.Up?-this.Jd:this.Qd===Nr.Down?this.Jd:0}),i=this.renderingScale.Jt(e,{x:this.Qd===Nr.Right?-this.Kd:this.Qd===Nr.Left?this.Kd:0,y:this.Qd===Nr.Up?-this.Kd:this.Qd===Nr.Down?this.Kd:0});return this.uh.gh(t).Ah(e),this.fl.ih(i).Yl(this.Qd===Nr.Up?{x:0,y:1}:this.Qd===Nr.Down?{x:0,y:-1}:this.Qd===Nr.Right?{x:1,y:0}:{x:-1,y:0}),this.fl.Zh=this.Zh,this}Er(){const t=this.uh.ao().getThickness();return this.size=this.Qd===Nr.Left||this.Qd===Nr.Right?{x:this.Jd+this.Kd+this.fl.Er().vu().x,y:t}:{y:this.Jd+this.Kd+this.fl.Er().vu().y,x:t},super.Er()}dispose(){return super.dispose(),this.fl.dispose(),this.uh.dispose(),this}setVisible(t){return super.setVisible(t),this.fl.setVisible(t),this.uh.setVisible(t),this}setPointerEvents(t){return this.fl.setPointerEvents(t),this.uh.setPointerEvents(t),this}getPointerEvents(){return this.fl.getPointerEvents()}getText(){return this.fl.qr()}setTextFillStyle(t){return this.fl.Ke(t),this.Ws.Bs(),this}getTextFillStyle(){return this.fl.pr()}setTextFont(t){return this.fl.Mr(t),this}setTextRotation(t){return this.fl.wr(t),this}getTextRotation(){return this.fl._r()}getTextFont(){return this.fl.br()}setText(t){return this.fl.Jr(t),this.Ws.Bs(),this}setDirection(t){return this.Qd=t,this.Ws.Bs(),this}getDirection(){return this.Qd}setPointerLength(t){return this.Jd=t,this.Ws.Bs(),this}getPointerLength(){return this.Jd}setTickLabelPadding(t){return this.Kd=t,this.Ws.Bs(),this}getTickLabelPadding(){return this.Kd}setTickStyle(t){return this.uh.dh(t),this.Ws.Bs(),this}getTickStyle(){return this.uh.ao()}}const hu=l(l({},Ol),{},{direction:Nr.Up,setDirection(t){return this.direction=t,this},ro(t,e,i,s,r,n){const o=this.direction,a=new au(t,e,i,s,r);return Nl(a,r,n),a.setDirection(o),this.applyStylers(a,r)}}).addStyler(Vl),lu=hu.addStyler((t,e)=>(t.no="major",t.setPointerLength(e.xAxisNumericTicks.majorTickStyle.tickLength).setTickLabelPadding(e.xAxisNumericTicks.majorTickStyle.tickPadding).setTickStyle(e.xAxisNumericTicks.majorTickStyle.tickStyle).setTextFont(e.xAxisNumericTicks.majorTickStyle.labelFont).setTextFillStyle(e.xAxisNumericTicks.majorTickStyle.labelFillStyle))),cu=hu.addStyler((t,e)=>(t.no="minor",t.setPointerLength(e.xAxisNumericTicks.minorTickStyle.tickLength).setTickLabelPadding(e.xAxisNumericTicks.minorTickStyle.tickPadding).setTickStyle(e.xAxisNumericTicks.minorTickStyle.tickStyle).setTextFont(e.xAxisNumericTicks.minorTickStyle.labelFont).setTextFillStyle(e.xAxisNumericTicks.minorTickStyle.labelFillStyle)));class uu extends Bl{constructor(t,e,i,s,r,n){var o,a,h,l,c,u;super(t,e,i,s,r),this.qd=[],this.tf="",this.if=(t,e)=>void 0!==t.label?t.label:e.percentageValues?"".concat((100*t.value).toFixed(0),"%"):ea(e,t.value),this.sf=0,this.ef=!1,this.hf=n,this.rf=t.fd(e).Qe(Lr),this.Ad=this.rf.Go().vd("number"==typeof r.legendLUTCornerRadius?{extent:r.legendLUTCornerRadius,c_x1_y1:!0,c_x1_y2:!0,c_x2_y1:!0,c_x2_y2:!0}:void 0),this.L.Oi(this.rf),this.nf=t.bn(e).Ke(r.uiTextFillStyle).Mr(r.uiTextFont).setPointerEvents(!1),this.L.Oi(this.nf),this.af=null!==(o=r.legendLUTLabelMargin)&&void 0!==o?o:7,this.lf=null!==(a=r.legendLUTUnitLabelMargin)&&void 0!==a?a:7,"vertical"===n?(this.cf=null!==(h=r.legendLUTLengthVertical)&&void 0!==h?h:140,this.uf=null!==(l=r.legendLUTThicknessVertical)&&void 0!==l?l:25):(this.cf=null!==(c=r.legendLUTLengthHorizontal)&&void 0!==c?c:160,this.uf=null!==(u=r.legendLUTThicknessHorizontal)&&void 0!==u?u:15)}En(){return[this.rf,this.nf]}df(t){return this.nf.mn(t),this.qd.forEach(e=>e.mn(t)),this.Ws.Bs(),this}ff(t){this.Af=t;const e=gu(t,"vertical"===this.hf?0:90,this.ef);return this.rf.Ke(e),this.Ws.Bs(),this}Ys(){return this.Af}gf(t){return this.cf=t,this.Ws.Bs(),this}Yl(t){return this.hf=t,this.Ws.Bs(),this}vf(){return this.cf}yf(t){return this.uf=t,this.Ws.Bs(),this}pf(){return this.uf}mf(t){return this.tf=t,this.Ws.Bs(),this}Sf(){return this.tf}bf(t){return this.if=t,this.Ws.Bs(),this}setLUTDisplayProportionalSteps(t){if(this.ef=t,this.Af){const t=gu(this.Af,"vertical"===this.hf?0:90,this.ef);this.rf.Ke(t)}return this.Ws.Bs(),this}getLUTDisplayProportionalSteps(){return this.ef}setFillStyle(t){return this.nf.Ke(t),this.Ws.Bs(),this}getFillStyle(){return this.nf.pr()}setFont(t){return this.nf.Mr(t),this.Ws.Bs(),this}getFont(){return this.nf.br()}setTextRotation(t){return this.sf=t,this.nf.wr(t),this.Ws.Bs(),this}getTextRotation(){return this.nf._r()}th(){var t,e,i,s;if(super.th(),this.ci||!this.getVisible())return this;const r=this.Af;if(r){const n=this.renderingScale.ri(),o=r.min,a=r.max;if("vertical"===this.hf){const i=this.getPosition({x:-1,y:-1},Rr.Content),s=Lo(i,{x:this.uf*this.renderingScale.x.getPixelSize()+this.af*n.x,y:0}),h={x:s.x,y:s.y+(this.tf.length>0?this.lf*n.y+this.nf._t().y:0)+.5*((null===(t=this.qd[0])||void 0===t?void 0:t._t().y)||0)},l={x:h.x,y:this.getPosition({x:-1,y:1},Rr.Content).y-.5*((null===(e=this.qd[this.qd.length-1])||void 0===e?void 0:e._t().y)||0)};this.Ad.yd(i.x,h.y,i.x+this.uf*this.renderingScale.x.getPixelSize(),h.y+this.cf*this.renderingScale.y.getPixelSize()),this.nf.Yl({x:-1,y:-1}).ih(s),r.getSteps().forEach((t,e)=>{const i=xo(h,l,this.ef?!0===r.getInterpolation()?(t.value-o)/(a-o):.9*(t.value-o)/(a-o):!0===r.getInterpolation()?e/(r.getSteps().length-1):e/r.getSteps().length);this.qd[e].Yl({x:-1,y:0}).ih(i)})}else{const t=this.getPosition({x:-1,y:-1},Rr.Content),e=this.getPosition({x:1,y:1},Rr.Content),h=Math.max(this.qd.reduce((t,e)=>Math.max(t,e._t().y),0),this.nf.Er()._t().y),l=Lo(t,{x:.5*((null===(i=this.qd[0])||void 0===i?void 0:i._t().x)||0),y:h}),c={x:e.x,y:l.y},u={x:r.getInterpolation()?c.x-(.5*((null===(s=this.qd[this.qd.length-1])||void 0===s?void 0:s._t().x)||0)+(this.tf.length>0?this.lf*n.x+this.nf._t().x:0)):l.x+this.cf*this.renderingScale.x.getPixelSize(),y:l.y},d={x:l.x,y:l.y+this.af*n.y};this.Ad.yd(d.x,d.y,d.x+this.cf*this.renderingScale.x.getPixelSize(),d.y+this.uf*this.renderingScale.y.getPixelSize()),this.nf.Yl({x:1,y:1}).ih(c),r.getSteps().forEach((t,e)=>{const i=xo(l,u,this.ef?!0===r.getInterpolation()?(t.value-o)/(a-o):.9*(t.value-o)/(a-o):!0===r.getInterpolation()?e/(r.getSteps().length-1):e/r.getSteps().length);this.qd[e].Yl({x:0,y:1}).ih(i)})}}return this}Er(){if(this.Af&&this.getVisible()){const t=this.Af.getSteps();for(let e=this.qd.length;e<t.length;e+=1){const t=this.Ws.bn(this.renderingScale).setPointerEvents(!1);this.qd.push(t),this.L.Oi(t)}for(let e=0;e<t.length;e+=1)this.qd[e].Ke(this.nf.pr()).Mr(this.nf.br()).Jr(this.if(t[e],this.Af)).wr(this.sf);for(let e=t.length;e<this.qd.length;e+=1)this.qd[e].dispose();if(this.qd.length=t.length,this.nf.Jr(this.tf),"vertical"===this.hf){const t=this.uf,e=this.cf,i=t+Math.max(this.qd.reduce((t,e)=>Math.max(t,e.Er().vu().x),0),this.nf.Er().vu().x),s=(this.tf.length>0?this.lf+this.nf.Er().vu().y:0)+e+.5*this.qd[0].Er().vu().y+.5*this.qd[this.qd.length-1].Er().vu().y;this.setContentSize({x:i,y:s})}else{const t=this.cf,e=this.uf,i=Math.max(this.tf.length>0?this.lf+this.nf.Er().vu().x+(this.Af.getInterpolation()?.5*this.qd[this.qd.length-1].Er().vu().x:0):0,this.Af.getInterpolation()?.5*this.qd[this.qd.length-1].Er().vu().x:0),s=t+.5*this.qd[0].Er().vu().x+i,r=e+this.af+Math.max(this.qd.reduce((t,e)=>Math.max(t,e.Er().vu().y),0),this.nf.Er().vu().y);this.setContentSize({x:s,y:r})}}else this.qd.forEach(t=>t.dispose()),this.qd.length=0,this.nf.setVisible(!1),this.rf.setVisible(!1),this.setContentSize({x:0,y:0});return super.Er()}dispose(){return super.dispose(),this.rf.dispose(),this.qd.forEach(Zr),this.nf.dispose(),this}setPointerEvents(t){return this.rf.setPointerEvents(t),this}getPointerEvents(){return this.rf.getPointerEvents()}}const du={lutElement:{},setLUT(t){return this.lutElement.ff(t),this},getLUT(){return this.lutElement.Ys()},setLUTLength(t){return this.lutElement.gf(t),this},getLUTLength(){return this.lutElement.vf()},setLUTThickness(t){return this.lutElement.yf(t),this},getLUTThickness(){return this.lutElement.pf()},setLookUpUnit(t){return this.lutElement.mf(t),this},getLookUpUnit(){return this.lutElement.Sf()},setLUTStepValueFormatter(t){return this.lutElement.bf(t),this},setLUTDisplayProportionalSteps(t){return this.lutElement.setLUTDisplayProportionalSteps(t),this},getLUTDisplayProportionalSteps(){return this.lutElement.getLUTDisplayProportionalSteps()}},fu=l(l(l({},Ol),Yl),{},{background:Nc,alignment:"horizontal",setAlignment(t){return l(l({},this),{},{alignment:t})},ro(t,e,i,s,r,n){const o=new jc(t,e,i,this.background,s,r),a=o.addElement({ro:()=>new uu(t,e,i,Jr,r,this.alignment)}),h=Object.assign(o,$c,{stylableTexts:[a]},du,{lutElement:a});return Nl(h,r,n),this.applyStylers(h,r)}}).addStyler(Vl),gu=(t,e,i)=>{const s=t.getSteps(),r=t.min,n=t.max-r;if(!0===t.getInterpolation())return new Js({angle:e,stops:s.map((e,o)=>({offset:i?(e.value-r)/n:o/(s.length-1),color:e.color||t.color}))});const o=[];for(let a=0;a<s.length;a+=1){const e=s[a];o.push({offset:i?.9*(e.value-r)/n:a/s.length,color:e.color||t.color});const h=a<s.length-1?s[a+1]:void 0;o.push({offset:i?h?.9*(h.value-r)/n:1:h?(a+1)/s.length:1,color:e.color||t.color})}return new Js({angle:e,stops:o})},pu=ou.addStyler(t=>t.addEventListener("switch",e=>!0===e.state?setTimeout(()=>t.setOn(!1),300):void 0)),yu={TextBox:su,CheckBox:ou,ButtonBox:pu,PointableTextBox:ru,AxisTickMajor:lu,AxisTickMinor:cu,LUTRange:fu};class mu extends kl{constructor(t,e,i,s,r,n){super(t,e,i,s,n),this.xf=r}}class vu extends El{constructor(t,e,i,s,r,n,o,a,h,l,c,u,d,f,g,p){var y,m,v;super(l,h,o,f,g,{numeric:h.getWidth({x:f.xAxisNumericTicks,y:f.yAxisNumericTicks}),datetime:h.getWidth({x:f.xAxisDateTimeTicks,y:f.yAxisDateTimeTicks}),time:h.getWidth({x:f.xAxisTimeTicks,y:f.yAxisTimeTicks})},p),this.Mf=new Map,this.wf=void 0,this._f=0,this.kf=[],this.Cf=[],this.Tf=!0,this.Ff=[],this.If=t=>{const e=this.Cf.indexOf(t);e>=0&&this.Cf.splice(e,1)},this.Pf=t=>(this.Cf.indexOf(t)<0&&this.Cf.push(t),this.If),this.Lf=!0,this.Bf=Sn(this.Ff),this.cf={relative:1},this.Df=(t,e)=>e.getAllocatesAxisSpace()?Math.max(t,e.update().co()):t,this.Rf=t=>{const e=this.kf.indexOf(t);-1!==e&&this.kf.splice(e,1)},this.us=Ca.onHover,this.L=new Ar,this.oh={},this.Ef=o instanceof er?o:void 0,this.isX=this.rr.getWidth({x:!0,y:!1}),this.isY=this.rr.getHeight({x:!0,y:!1}),this.Of=t,this.zf=e,this.Vf=s,this.Nf=r,this.chart=l,this.Gf=u,this.$f=i,this.vs=n,"logarithmic"===p.type&&this.chart.gi.ka(_l.Po),this.mr=bu,d(this,this.Pf),o.Uf=this,this.Yf=c,this.jf=this.Yf>50?1:-1,this.Hf=(v=this.rr.toPoint(0,-this.jf),Math.abs(v.x)>=Math.abs(v.y)?v.x>=0?Nr.Right:Nr.Left:v.y>=0?Nr.Up:Nr.Down),this.Wf=a,this.Xf=this.oi instanceof er?(new rr).Qt(this.rr.toVec2(this.oi,this.Wf)):(new nr).Qt(this.rr.toVec2(this.oi,this.Wf)),this.Zf=this.chart.Jf,this.Qf=(new rr).Qt(this.rr.toVec2(this.rr.getWidth(this.Zf),this.Wf)),this.Kf=this.zf.fh(this.Xf).setPointerEvents(!1),this.qf=this.$f.qe(this.Zf).Ke(h.getWidth({x:f.xAxisOverlayStyle,y:f.yAxisOverlayStyle})).Qe(Lr).Pi(f.highlightColorOffsetAxisOverlay||f.highlightColorOffset),this.tA=this.$f.qe(this.Zf).Ke(h.getWidth({x:f.xAxisZoomingBandFillStyle,y:f.yAxisZoomingBandFillStyle})).Qe(h.getWidth({x:f.xAxisZoomingBandStrokeStyle,y:f.yAxisZoomingBandStrokeStyle})).Pi(f.highlightColorOffsetAxisOverlay||f.highlightColorOffset),this.Jh=this.$f.bn(this.Xf).setPointerEvents(!1).wr(this.rr.getTitleTextRotation(this.jf)).Sn(Zn).mn(Zn),this.chart.gi.Ms.xs(this.qf,t=>this.qf.Fi(t),{animationEnabled:this.Rh}),this.L.Oi(this.qf),this.Kf.dh(h.getWidth({x:f.xAxisStrokeStyle,y:f.yAxisStrokeStyle})),this.Jh.Ke(h.getWidth({x:f.xAxisTitleFillStyle,y:f.yAxisTitleFillStyle})).Mr(h.getWidth({x:f.xAxisTitleFont,y:f.yAxisTitleFont})),this.ys=n.ps(this,{}),this.kr=this.ys.iA([this.Jh]).Ls(f.effectsText),this.sA=null!==(y=h.getWidth({x:f.xAxisMarginAfterTicks,y:f.yAxisMarginAfterTicks}))&&void 0!==y?y:7,this.eA=null!==(m=h.getWidth({x:f.xAxisMarginAfterTitle,y:f.yAxisMarginAfterTitle}))&&void 0!==m?m:7}setHighlight(t){return this.chart.gi.Ms.Vs(this.qf,t),this.L.D("highlightchange",{highlight:Yn(t)}),this}getHighlight(){return this.chart.gi.Ms.Cs(this)}yn(){return this.zh}pn(){return void 0!==this.Ir}setKeepTickLabelsInAxisBounds(t){return this.Lf=t,this.chart.gi.Bs(),this}getKeepTickLabelsInAxisBounds(){return this.Lf}setTickStrategy(t,e){return super.cr(t,e)}getTickStrategy(){return this.Ph}addBand(t){var e;const i=null===(e=null==t?void 0:t.onTop)||void 0===e||e,s=null==t?void 0:t.legend,r=i?this.Nf:this.Vf,n=new $h(r,this.chart,this.Bf,this,this.Xf,this.rr,this.bi,this.vs);return s&&this.chart.legend.add(n,s),this.Ff.push(n),n}addConstantLine(t){var e;const i=null===(e=null==t?void 0:t.onTop)||void 0===e||e,s=null==t?void 0:t.legend,r=i?this.Nf:this.Vf,n=new tl(r,this.chart,this.Bf,this,this.Xf,this.rr,this.bi,this.vs);return s&&this.chart.legend.add(n,s),this.Ff.push(n),n}hA(t){this.Ff.forEach(t)}rA(t){return this.Ff.map(t)}getHighlighters(){return this.Ff}setThickness(t){return"number"==typeof t?(this.nA=t,this.oA=t):"object"==typeof t?(this.nA=t.min,this.oA=t.max):void 0===t&&(this.nA=void 0,this.oA=void 0),this.zr=void 0,this.chart.gi.Bs(),this}getThickness(){return{min:this.nA,max:this.oA}}aA(){return this.Cf}Nr(t){return{}}Yr(t,e,i,s,r){var n;const o=e.Fh;return{keyValue:t,tickLevel:e,labelText:i,labelPosition:this.rr.toPoint(t,0),labelAlignment:this.rr.toPoint(o.getLabelAlignment(),null!==(n=o.labelAlignmentOpposite)&&void 0!==n?n:-this.jf),labelOffset:{x:0,y:0},labelRotation:e.Fh.labelRotation}}Wr(t,e,i){if(!this.ui)return{lA:0,cA:0,uA:0,ticksInfo:e,updatedTicks:i};const s=this.Jh&&this.Jh.qr().length>0&&this.getTitleFillStyle()!==sa,r=this.rr.getHeight(s?this.Jh.Er().vu():{x:0,y:0})+(s?this.eA:0);let n=0;this.Lh.forEach((t,e)=>{const i=e.Fh.tickLength<0||e.Fh.tickPadding<0,s=e.Fh.tickLength+e.Fh.tickPadding;t.forEach(t=>{if(!t.Dr.getVisible()||ra(t.Dr.pr()))return void(i||(n=Math.max(n,s)));const e=s+this.rr.getHeight(t.Dr.Er().vu());i||(n=Math.max(n,e))})});const o=this.kf.reduce(this.Df,0);n=Math.max(n,o),n+=this.sA;const a=Qr(r+n,void 0!==this.nA?this.nA:0,void 0!==this.oA?this.oA:ro);return this._f=a,{lA:n,cA:r,uA:a,ticksInfo:e,updatedTicks:i}}Qr(t,e){return new mu(e,t,this.zf,this.Xf,this.Xf)}Kh(){return this.Xf}Cr(){if(this.Mf){for(const t of this.Mf)t[1].grid.dispose(),t[1].tick.dispose();this.Mf.clear()}super.Cr()}fn(t,e){return"linear"===this.ar.type||"linear-highPrecision"===this.ar.type?wa(t,e,this.oi):Ma(t,e,this.oi)}dA(t,e){return e instanceof er?wa:Ma}vn(t,e,i){if("logarithmic"!==this.ar.type){const s=this.oi.Zt(Math.abs(e-t));return{start:t+Math.sign(t-e)*i.start*s,end:e+Math.sign(e-t)*i.end*s}}const s=this.oi,r={start:s.G,end:s.$};s.H(t,e).es();const n={start:s.Jt(t,i.start*Math.sign(t-e)),end:s.Jt(e,i.end*Math.sign(e-t))};return s.H(r.start,r.end).es(),n}Rr(t){var e,i;const s=this.Or(),r=s.min,n=s.max,o=this.Lh.size>0,a=(null===(e=this.zr)||void 0===e?void 0:e.physicalAxisSize)!==t.physicalAxisSize;let h=(null===(i=this.zr)||void 0===i?void 0:i.min)!==r||this.zr.max!==n;if(this.zr&&this.Ef){const t=this.Ef.getPixelSize(),e=Math.abs(n-this.zr.max),i=Math.abs(e/t),s=Math.abs(r-this.zr.min),o=Math.abs(s/t);h=Math.max(i,o)>=10}return!(!o||a||h||t.anyPreviousAxisUpdated)}th(t){const e=this.getVisible()&&t.fA>0,i=this.oi.getInnerStart()<this.oi.getInnerEnd()?this.oi.getInnerStart():this.oi.getInnerEnd(),s=this.oi.getInnerEnd()>this.oi.getInnerStart()?this.oi.getInnerEnd():this.oi.getInnerStart();e||this.Cr();const r=this.Kf.ao().getThickness()*this.jf/2,n=this.Wf.getInnerInterval(),o=this.Yf/100*n,a=o+t.AA,h=n*this.jf,c=a+r;if("Empty"!==this.Ph&&e){const e=this.oi.bt(),i=this.oi.xt(),s=Math.min(e,i),r=Math.max(e,i);for(const[n,l]of this.Lh){let e=this.Mf.get(n);if(!e)if(n.mh)e={grid:this.Of[0].gA(this.Xf).setPointerEvents(!1),tick:this.Of[0].gA(this.Xf).setPointerEvents(!1)};else if("vA"in n){const t=Array.from(this.Lh.keys()).filter(t=>"vA"in t).reverse().indexOf(n),i=this.Of[t];if(!i)throw new Error("Not enough tick layers. This is an internal LCJS error - if you see this, please contact LightningChart support.");e={grid:i.gA(this.Xf).setPointerEvents(!1),tick:i.gA(this.Xf).setPointerEvents(!1)}}if(!e)continue;e.grid.zi(),e.tick.zi();const i=n.Fh,u=o-h*i.getGridStrokeLength(),d=c+i.getTickLength()*this.jf,f=d+i.getTickPadding()*this.jf;for(const[n,o]of l){const i=t.ticksInfo.get(o);if(!i)continue;const n={start:this.rr.toPoint(o.S,a),end:this.rr.toPoint(o.S,u)},h={start:this.rr.toPoint(o.S,c),end:this.rr.toPoint(o.S,d)};let l=0;if(this.Lf){const t=o.Dr.vu(),e=this.oi.Bt(i.keyValue)+this.rr.getWidth(i.labelOffset)+(-.5*this.rr.getWidth(i.labelAlignment)-.5)*this.rr.getWidth(t),n=e+this.rr.getWidth(t);l=n>r?r-n:e<s?s-e:0}o.Dr.ih(this.rr.toPoint(this.oi.Jt(o.S,l),f)).Yl(i.labelAlignment).wr(i.labelRotation),e.grid.Go().yA(n.start,n.end),e.tick.Go().yA(h.start,h.end)}e.grid.dh(n.Fh.getGridStrokeStyle()),e.tick.dh(n.Fh.getTickStyle()),this.Mf.set(n,e)}}const u=c,d=u+this.jf*t.uA,f={start:this.rr.toVec2(this.oi.getInnerStart(),u),end:this.rr.toVec2(this.oi.getInnerEnd(),d)},g=hr(f.start,this.Xf,this.Zf),p=hr(f.end,this.Xf,this.Zf);this.Kf.gh(this.rr.toPoint(i,a)).Ah(this.rr.toPoint(s,a)).setVisible(e);let y=this.pA;y||(y="center-chart",("pixels"in this.cf||void 0!==this.mA||void 0!==this.SA||1!==t.bA||this.isY)&&(y="center"));const m=a+t.lA*this.jf;if(this.Jh.ih(this.rr.toPoint(this.rr.getWidth(hr("center-chart"===y?{x:.5*this.Zf.x.getInnerInterval(),y:.5*this.Zf.y.getInnerInterval()}:"center"===y?Bo(Lo(g,p),.5):"start"===y?g:p,this.Zf,this.Xf)),m)).Yl(this.rr.toPoint("center-chart"===y||"center"===y?0:"start"===y?-1:1,-1*this.jf)).setVisible(e),this.wf){const e=this.Yf/100*n+t.AA,i=-this.jf*n-t.AA,s={start:this.rr.toVec2(this.wf.min,c+this.jf*this._f),end:this.rr.toVec2(this.wf.max,e+i)},r=hr(s.start,this.Xf,this.Zf),o=hr(s.end,this.Xf,this.Zf);this.tA.ih(r).X(Do(o,r)).setVisible(!0)}else this.tA.setVisible(!1);this.qf.ih(g).X(Do(p,g)).setVisible(e);for(const v of this.kf)if(v.update().plot(e,a,h,t.AA,c),this.$f.gi.Au&&v.getVisible()&&v.getMarkerVisible()&&v.ho.Zh===Ta.CursorTickMarker){const t=zl(v.ho);this.$f.gi.Au.xA(l(l({},t),{},{blacklist:[Ta.CursorResultTable,Ta.CursorTickMarker]}))}for(const l of this.Ff)l.th();return{width:Math.abs(p.x-g.x),height:Math.abs(p.y-g.y),left:Math.min(g.x,p.x),right:this.Zf.x.getInnerEnd()-Math.max(g.x,p.x),bottom:Math.min(g.y,p.y),top:this.Zf.y.getInnerEnd()-Math.max(g.y,p.y)}}setLength(t){return this.cf=t,this.zr=void 0,this.chart.gi.Bs(),this}getLength(){return this.cf}setMargins(t,e){return this.mA=t,this.SA=e,this.zr=void 0,this.chart.gi.Bs(),this}getMargins(){var t,e;return{start:null!==(t=this.mA)&&void 0!==t?t:0,end:null!==(e=this.SA)&&void 0!==e?e:0}}getStackIndex(){var t,e;return null!==(e=null===(t=[...this.chart.MA,...this.chart.wA,...this.chart._A,...this.chart.kA].find(t=>t.axis===this))||void 0===t?void 0:t.iStack)&&void 0!==e?e:0}getParallelIndex(){var t,e;return null!==(e=null===(t=[...this.chart.MA,...this.chart.wA,...this.chart._A,...this.chart.kA].find(t=>t.axis===this))||void 0===t?void 0:t.iParallel)&&void 0!==e?e:0}CA(){return this._f}TA(t,e){e=e||yu.AxisTickMajor;const i=new Rl(this,t?this.Of[0]:this.$f,this.$f,this.oi,this.Qf,this.Qf,this.rr,this.Hf,this.Rf,this.bi,e).setTextFormatter(this.formatValue);return this.kf.push(i),this.zr=void 0,"other"===i.ho.no&&(i.ho.Zh=Ta.CursorTickMarker),i}FA(t,e){const i=-this.rr.getWidth(e);this.pan(i)}pan(t,e){var i,s;const r=this.ur,n=this.dr,o=this.oi.Jt(r,t),a=this.oi.Jt(n,t);this.Pr(o,a,{allowIntervalLengthChange:!1,skipIntervalRestriction:!1});const h=this.Sr();if(!1!==(null==e?void 0:e.releaseScrollingAxisIfLiveReached)&&(null===(i=this.Lr)||void 0===i?void 0:i.id)===sl&&this.Eh&&h){const t=this.ph({forStart:o,forEnd:a,allowIntervalLengthChange:!1});t&&(this.dr>this.ur&&this.dr>=t.end||this.dr<this.ur&&this.ur>=t.start)&&this.setStopped(!1)}if(!1!==(null==e?void 0:e.releaseScrollingAxisIfLiveReached)&&(null===(s=this.Lr)||void 0===s?void 0:s.id)===rl&&this.Eh&&h){const t=this.ph({forStart:o,forEnd:a,allowIntervalLengthChange:!1});t&&(this.dr<this.ur&&this.dr<=t.end||this.dr>this.ur&&this.ur<=t.start)&&this.setStopped(!1)}}zoom(t,e){const i=this.oi.Bt(this.ur),s=this.oi.Bt(this.dr),r=this.oi.Bt(t),n=Qr((r-i)/(s-i),0,1),o=.2*this.oi.Mt(),a=n*o*-e,h=(1-n)*o*e,l=this.oi.Jt(this.ur,a),c=this.oi.Jt(this.dr,h),u=this.gn();let d=l,f=c;if(void 0!==(null==u?void 0:u.intervalMax)&&Math.abs(f-d)>u.intervalMax){const t=u.intervalMax-Math.abs(f-d);d-=t*n,f+=t*(1-n)}if(void 0!==(null==u?void 0:u.intervalMin)&&Math.abs(f-d)<u.intervalMin){const t=u.intervalMin-Math.abs(f-d);d-=t*n,f+=t*(1-n)}this.Pr(d,f,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1})}addCustomTick(t){return this.TA(!0,t)}setTitlePosition(t){return this.pA=t,this.chart.gi.Bs(),this}getTitlePosition(){var t;return null!==(t=this.pA)&&void 0!==t?t:"center-chart"}getUiPosition(){return this.Yf}setStrokeStyle(t){return this.Kf.dh(t),this.zf.Bs(),this}getStrokeStyle(){return this.Kf.ao()}getOverlayStyle(){return this.qf.pr()}setOverlayStyle(t){return this.qf.Ke(t),this.zf.Bs(),this}setAnimationHighlight(t){return this.chart.gi.Ms.Ns(this.qf,t),this}getAnimationHighlight(){return this.chart.gi.Ms.Gs(this.qf)}getMarginAfterTicks(){return this.sA}setMarginAfterTicks(t){return this.sA=t,this.zr=void 0,this.zf.Bs(),this}getMarginAfterTitle(){return this.eA}setMarginAfterTitle(t){return this.eA=t,this.zr=void 0,this.zf.Bs(),this}Y(){return this.oi.Y(),this}j(){return this.oi.j(),this}dispose(){var t;(null===(t=this.Lr)||void 0===t?void 0:t.dispose)&&this.Lr.dispose({axis:this}),this.Kf.dispose(),this.qf.dispose(),this.tA.dispose(),this.Jh.dispose(),this.Br(Zr);for(const e of this.Mf.values())e.grid.dispose(),e.tick.dispose();return this.Cf.slice().forEach(Zr),this.Ff.slice().forEach(Zr),this.Gf(this),this.L.D("dispose",{}),this}setVisible(t){this.Kf.setVisible(t),this.Jh.setVisible(t),this.qf.setVisible(t),this.Br(e=>{e.Fs(t)});for(const e of this.Mf.values())e.grid.setVisible(t),e.tick.setVisible(t);return super.setVisible(t),this.zr=void 0,this.chart.gi.Bs(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationHighlight(this.Rh),this}setHighlightOnHover(t){return this.us=t?Ca.onHover:Ca.noHighlighting,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.us!==Ca.noHighlighting}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}setPointerEvents(t){return this.L.setPointerEvents(t),this}getPointerEvents(){return this.L.getPointerEvents()}set draggable(t){this.L.draggable=t}get draggable(){return this.L.draggable}setUserInteractions(t){return this.oh=void 0===t?{pan:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,chartInteractions:{pan:!1,paginate:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,restorePrevious:!1}}:t,this}getUserInteractions(){return this.oh}}var xu;!function(t){t.Start="start",t.Center="center",t.End="end",t.CenterChart="center-chart"}(xu||(xu={}));const bu=t=>t.curEnd>t.curStart?{startMin:t.dataMin,endMax:t.dataMax}:{endMin:t.dataMin,startMax:t.dataMax},Su={getWidth:t=>t.x,getHeight:t=>t.y,toVec2:(t,e)=>({x:t,y:e}),toPoint:(t,e)=>As(t,e)},Au={getWidth:t=>t.y,getHeight:t=>t.x,toVec2:(t,e)=>({x:e,y:t}),toPoint:(t,e)=>As(e,t)},Eu=t=>!!(t&&"object"==typeof t&&"x"in t&&t.x instanceof vu&&"y"in t&&t.y instanceof vu),ku=fs({type:"tick-style",gridStrokeLength:1,gridStrokeStyle:new th,tickLength:7,tickStyle:new th,tickPadding:0,labelFont:new Xa,labelFillStyle:new aa,labelAlignment:0,labelAlignmentOpposite:void 0,labelRotation:0,labelShadow:void 0});class wu extends ku{constructor(t){super(t)}setGridStrokeLength(t){return this.set("gridStrokeLength",t)}getGridStrokeLength(){return this.get("gridStrokeLength")}setGridStrokeStyle(t){return this.set("gridStrokeStyle","function"==typeof t?t(this.get("gridStrokeStyle")):t)}getGridStrokeStyle(){return this.get("gridStrokeStyle")}setTickLength(t){return this.set("tickLength",t)}getTickLength(){return this.get("tickLength")}setTickStyle(t){return this.set("tickStyle","function"==typeof t?t(this.get("tickStyle")):t)}getTickStyle(){return this.get("tickStyle")}setTickPadding(t){return this.set("tickPadding",t)}getTickPadding(){return this.get("tickPadding")}setLabelFillStyle(t){return this.set("labelFillStyle","function"==typeof t?t(this.get("labelFillStyle")):t)}getLabelFillStyle(){return this.get("labelFillStyle")}setLabelShadow(t){return this.set("labelShadow",t)}getLabelShadow(){return this.get("labelShadow")}setLabelFont(t){return this.set("labelFont","function"==typeof t?t(this.get("labelFont")):t)}getLabelFont(){return this.get("labelFont")}setLabelAlignment(t,e){return this.withMutations(i=>i.set("labelAlignment",t).set("labelAlignmentOpposite",e))}getLabelAlignment(){return this.get("labelAlignment")}setLabelRotation(t){return this.set("labelRotation",t)}getLabelRotation(){return this.get("labelRotation")}}const Mu=t=>!(!t||"object"!=typeof t||!("type"in t)||"tick-style"!==t.type),Cu=new wu({labelFillStyle:sa,gridStrokeStyle:Lr,tickStyle:Lr}),Tu=t=>Mu(t)&&ra(t.labelFillStyle)&&Dr(t.gridStrokeStyle)&&Dr(t.tickStyle),Fu=1e6,Pu=fs({type:"time-ticks",cursorFormatter:void 0,timeOrigin:void 0,majorTickStyle:new wu,minorTickStyle:new wu,majorFormattingFunction:void 0,minorFormattingFunction:void 0}),Bu=36e5,Lu=6e4,Du=1e3,zu=1e-6,Iu=(t,e)=>{const i=e-t;return i>=864e5?"MajorHours12":i>=Bu?"MajorHours":i>=6e5?"MajorMinutes15":i>=9e4?"MajorMinutes":i>=10500?"MajorSeconds15":i>=Du?"MajorSeconds":i>=100?"MajorMilliseconds100":i>=10?"MajorMilliseconds10":i>=1?"MajorMilliseconds":i>=.1?"MajorMicroseconds100":i>=.01?"MajorMicroseconds10":i>=.001?"MajorMicroseconds":i<=.001?"MajorNanoseconds100":"Unknown"},Ru={hhmmss:t=>{let e=Math.abs(t);const i=t>=0?"":"-",s=Math.floor(e/Bu);e%=Bu;const r=Math.floor(e/Lu);e%=Lu;const n=Math.floor(e/Du);return"".concat(i).concat(zn(s,2),":").concat(zn(r,2),":").concat(zn(n,2))},hhmmssmmm:t=>{let e=Math.abs(t);const i=t>=0?"":"-",s=Math.floor(e/Bu);e%=Bu;const r=Math.floor(e/Lu);e%=Lu;const n=Math.floor(e/Du);e%=Du;const o=Math.floor(e/1);return"".concat(i).concat(zn(s,2),":").concat(zn(r,2),":").concat(zn(n,2),".").concat(zn(o,3))},hhmmssmmmuuu:t=>{const e=Math.abs(t),i=t>=0?"":"-",s=Math.floor(e/Bu),r=Math.floor(e/Lu)%60,n=Math.floor(e/Du)%60,o=Math.floor(e/1)%1e3,a=t.toLocaleString("en-US",{minimumFractionDigits:3,maximumFractionDigits:3}).split(".")[1];return"".concat(i).concat(zn(s,2),":").concat(zn(r,2),":").concat(zn(n,2),".").concat(zn(o,3)).concat(a)},hhmmssmmmuuunnn:t=>{const e=Math.abs(t),i=t>=0?"":"-",s=Math.floor(e/Bu),r=Math.floor(e/Lu)%60,n=Math.floor(e/Du)%60,o=Math.floor(e/1)%1e3,a=t.toLocaleString("en-US",{minimumFractionDigits:6,maximumFractionDigits:6}).split(".")[1];return"".concat(i).concat(zn(s,2),":").concat(zn(r,2),":").concat(zn(n,2),".").concat(zn(o,3)).concat(a)}},_u={MajorHours12:{major:{format:Ru.hhmmss,getKeyValues:(t,e,i,s)=>{const r=432e5;return t=Math.floor(t/(4*r))*r*4,gl(t,e,r,void 0,Fu)},fitKeyValues:yl({ignore:"first"},2,4)},minor:{format:Ru.hhmmss,getKeyValues:(t,e,i,s)=>fl(t,e,36e5,Fu),fitKeyValues:yl({},2,3,4,6)},defaultValueFormatter:Ru.hhmmss},MajorHours:{major:{format:Ru.hhmmss,getKeyValues:(t,e,i,s)=>{const r=Bu;return t=Math.floor(t/(12*r))*r*12,gl(t,e,r,void 0,Fu)},fitKeyValues:yl({ignore:"first"},2,6,12)},minor:{format:Ru.hhmmss,getKeyValues:(t,e,i,s)=>fl(t,e,3e5,Fu),fitKeyValues:yl({},2,4,6)},defaultValueFormatter:Ru.hhmmss},MajorMinutes15:{major:{format:Ru.hhmmss,getKeyValues:(t,e,i,s)=>(t=Math.floor(t/Bu)*Bu,gl(t,e,9e5,void 0,Fu)),fitKeyValues:yl({ignore:"first"},2)},minor:{format:Ru.hhmmss,getKeyValues:(t,e,i,s)=>fl(t,e,6e4,Fu),fitKeyValues:yl({},3,5)},defaultValueFormatter:Ru.hhmmss},MajorMinutes:{major:{format:Ru.hhmmss,getKeyValues:(t,e,i,s)=>{const r=Lu;return t=Math.floor(t/6e5)*r*10,gl(t,e,r,void 0,Fu)},fitKeyValues:yl({ignore:"first"},2,5)},minor:{format:Ru.hhmmss,getKeyValues:(t,e,i,s)=>fl(t,e,5e3,Fu),fitKeyValues:yl({},2,3,4,6)},defaultValueFormatter:Ru.hhmmss},MajorSeconds15:{major:{format:Ru.hhmmss,getKeyValues:(t,e,i,s)=>(t=15e3*Math.floor(t/6e4)*4,gl(t,e,15e3,void 0,Fu)),fitKeyValues:yl({ignore:"first"},2,4)},minor:{format:Ru.hhmmss,getKeyValues:(t,e,i,s)=>fl(t,e,1e3,Fu),fitKeyValues:yl({},3,5)},defaultValueFormatter:Ru.hhmmss},MajorSeconds:{major:{format:Ru.hhmmss,getKeyValues:(t,e,i,s)=>{const r=Du;return t=Math.floor(t/1e4)*r*10,gl(t,e,r,void 0,Fu)},fitKeyValues:yl({ignore:"first"},2,5)},minor:{format:Ru.hhmmssmmm,getKeyValues:(t,e,i,s)=>fl(t,e,100,Fu),fitKeyValues:yl({},2,3,5)},defaultValueFormatter:Ru.hhmmssmmm},MajorMilliseconds100:{major:{format:Ru.hhmmssmmm,getKeyValues:(t,e,i,s)=>(t=100*Math.floor(t/1e3)*10,gl(t,e,100,void 0,Fu)),fitKeyValues:yl({ignore:"first"},2,5)},minor:{format:Ru.hhmmssmmm,getKeyValues:(t,e,i,s)=>fl(t,e,10,Fu),fitKeyValues:yl({},2,3,5)},defaultValueFormatter:Ru.hhmmssmmm},MajorMilliseconds10:{major:{format:Ru.hhmmssmmm,getKeyValues:(t,e,i,s)=>(t=10*Math.floor(t/100)*10,gl(t,e,10,void 0,Fu)),fitKeyValues:yl({ignore:"first"},2,5)},minor:{format:Ru.hhmmssmmm,getKeyValues:(t,e,i,s)=>fl(t,e,1,Fu),fitKeyValues:yl({},2,3,5)},defaultValueFormatter:Ru.hhmmssmmm},MajorMilliseconds:{major:{format:Ru.hhmmssmmmuuu,getKeyValues:(t,e,i,s)=>(t=1*Math.floor(t/10)*10,gl(t,e,1,void 0,Fu)),fitKeyValues:yl({ignore:"first"},2,5)},minor:{format:Ru.hhmmssmmmuuu,getKeyValues:(t,e,i,s)=>fl(t,e,.1,Fu),fitKeyValues:yl({},2)},defaultValueFormatter:Ru.hhmmssmmmuuu},MajorMicroseconds100:{major:{format:Ru.hhmmssmmmuuu,getKeyValues:(t,e,i,s)=>(t=.1*Math.floor(t/1)*10,gl(t,e,.1,void 0,Fu)),fitKeyValues:yl({ignore:"first"},2,5)},minor:{format:Ru.hhmmssmmmuuu,getKeyValues:(t,e,i,s)=>fl(t,e,.01,Fu),fitKeyValues:yl({},2,3,5)},defaultValueFormatter:Ru.hhmmssmmmuuu},MajorMicroseconds10:{major:{format:Ru.hhmmssmmmuuu,getKeyValues:(t,e,i,s)=>(t=.01*Math.floor(t/.1)*10,gl(t,e,.01,void 0,Fu)),fitKeyValues:yl({ignore:"first"},2,5)},minor:{format:Ru.hhmmssmmmuuu,getKeyValues:(t,e,i,s)=>fl(t,e,.001,Fu),fitKeyValues:yl({},2,3,5)},defaultValueFormatter:Ru.hhmmssmmmuuu},MajorMicroseconds:{major:{format:Ru.hhmmssmmmuuunnn,getKeyValues:(t,e,i,s)=>(t=.001*Math.floor(t/.01)*10,gl(t,e,.001,void 0,Fu)),fitKeyValues:yl({ignore:"first"},2,5)},minor:{format:Ru.hhmmssmmmuuunnn,getKeyValues:(t,e,i,s)=>fl(t,e,100*zu,Fu),fitKeyValues:yl({},2,3,5)},defaultValueFormatter:Ru.hhmmssmmmuuunnn},MajorNanoseconds100:{major:{format:Ru.hhmmssmmmuuunnn,getKeyValues:(t,e,i,s)=>{const r=100*zu;return t=Math.floor(t/.001)*r*10,gl(t,e,r,void 0,Fu)},fitKeyValues:yl({ignore:"first"},2,5)},minor:{format:Ru.hhmmssmmmuuunnn,getKeyValues:(t,e,i,s)=>fl(t,e,10*zu,Fu),fitKeyValues:yl({},2,3,5)},defaultValueFormatter:Ru.hhmmssmmmuuunnn},Unknown:{major:{format:(t,e,i)=>"",getKeyValues:(t,e,i,s)=>[],fitKeyValues:void 0},minor:{format:(t,e,i)=>"",getKeyValues:(t,e,i,s)=>[],fitKeyValues:void 0},defaultValueFormatter:(t,e,i)=>""}};class Vu extends Pu{xh(t){const e=this.timeOrigin||0,i=[{Dr:"Major ticks",vA:0,Fh:this.majorTickStyle,Sh:this.majorFormattingFunction?this.majorFormattingFunction:(t,i,s)=>{const r=Iu(Math.min(i.start,i.end),Math.max(i.start,i.end));return(0,_u[r].major.format)(t+e,i,s)},_n:(t,e,i,s,r)=>{const n=Iu(i,s);return(0,_u[n].major.getKeyValues)(t,e,i,s,r)},ir:{tn:(t,e,i,s,r,n)=>{const o=Iu(r,n),a=_u[o].major.fitKeyValues;if(a)return a(t,e,i,s,r,n)},en:"hide-label"},kn:void 0}];return Mu(this.minorTickStyle)&&i.push({Dr:"Minor ticks",vA:1,Fh:this.minorTickStyle,Sh:this.minorFormattingFunction?this.minorFormattingFunction:(t,i,s)=>{const r=Iu(Math.min(i.start,i.end),Math.max(i.start,i.end));return(0,_u[r].minor.format)(t+e,i,s)},_n:(t,e,i,s,r)=>{const n=Iu(i,s);return(0,_u[n].minor.getKeyValues)(t,e,i,s,r)},ir:{tn:(t,e,i,s,r,n)=>{const o=Iu(r,n),a=_u[o].minor.fitKeyValues;if(a)return a(t,e,i,s,r,n)},en:"hide-tick"},kn:void 0}),{Mh:[],wh:i,_h:this.cursorFormatter||((t,i,s)=>{const r=Iu(Math.min(i.start,i.end),Math.max(i.start,i.end));return _u[r].defaultValueFormatter(t+e,i,s)}),kh:1e-4,Ch:864e6}}setTickStyle(t){return this.setMajorTickStyle(t).setMinorTickStyle(t)}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const e=this.get("minorTickStyle");return this.set("minorTickStyle",t(e))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTimeOrigin(t){return this.set("timeOrigin",t)}getTimeOrigin(){return this.get("timeOrigin")}setFormattingFunction(t){return this.withMutations(e=>e.set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t))}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const Nu=(t,e,i,s,r)=>(n,o)=>a=>{const h=new Date(a+n),l={year:o?h.getUTCFullYear():h.getFullYear(),monthIndex:o?h.getUTCMonth():h.getMonth(),day:o?h.getUTCDate():h.getDate(),hours:o?h.getUTCHours():h.getHours(),minutes:o?h.getUTCMinutes():h.getMinutes(),seconds:o?h.getUTCSeconds():h.getSeconds(),millis:o?h.getUTCMilliseconds():h.getMilliseconds()},c=s?s(l):void 0;if(0===t&&!0===c)return a;const u=l[e];r.includes("year")&&(l.year=Math.floor(l.year/i)*i),r.includes("monthIndex")&&(l.monthIndex=0),r.includes("day")&&(l.day=1),r.includes("hours")&&(l.hours=0),r.includes("minutes")&&(l.minutes=0),r.includes("seconds")&&(l.seconds=0),r.includes("millis")&&(l.millis=0);let d=(0===t?1:t)*i;return-1===t&&!1===c&&(d=0),0!==d&&(l[e]=i*(d>0?Math.floor((u+d)/i):Math.ceil((u+d)/i))),o?Date.UTC(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis)-n:new Date(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis).getTime()-n},Ou=function(t,e,i){for(var s=arguments.length,r=new Array(s>3?s-3:0),n=3;n<s;n++)r[n-3]=arguments[n];return Nu(-1,t,e,i,r)},Yu=function(t,e,i){for(var s=arguments.length,r=new Array(s>3?s-3:0),n=3;n<s;n++)r[n-3]=arguments[n];return Nu(-1,t,e,i,r)},Gu=function(t,e,i){for(var s=arguments.length,r=new Array(s>3?s-3:0),n=3;n<s;n++)r[n-3]=arguments[n];return Nu(0,t,e,i,r)},Xu=function(t,e){for(var i=arguments.length,s=new Array(i>2?i-2:0),r=2;r<i;r++)s[r-2]=arguments[r];return Nu(1,t,e,void 0,s)},Uu=t=>(e,i)=>s=>{const r=new Date(s+e),n=i?r.getUTCDay():r.getDay(),o=1===n&&0===(i?r.getUTCHours():r.getHours())&&0===(i?r.getUTCMinutes():r.getMinutes())&&0===r.getSeconds()&&0===r.getMilliseconds();if(0===t&&!0===o)return s;let a=i?r.getUTCDate():r.getDate();return-1===t&&1===n&&!1===o||(-1===t?a-=n>=2?n-1:n+6:a+=n>0?8-n:1),i?Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),a,0,0,0,0)-e:new Date(r.getFullYear(),r.getMonth(),a,0,0,0,0).getTime()-e},Hu=[{label:"NanoSecond10",unit:1e-5,irregular:!1,greatTicks:void 0,majorTicks:{fitFunction:yl({offset:0},2,5)},minorTicks:{amount:4,fitFunction:yl(void 0,2)}},{label:"NanoSecond100",unit:1e-4,irregular:!1,greatTicks:{getReferenceKeyValue:(t,e)=>t=>1e-4*Math.floor(t/1e-4)},majorTicks:{fitFunction:yl({offset:0},2,5)},minorTicks:{amount:4,fitFunction:yl(void 0,2)}},{label:"MicroSecond1",unit:.001,irregular:!1,greatTicks:{getReferenceKeyValue:(t,e)=>t=>.001*Math.floor(t/.001)},majorTicks:{fitFunction:yl({offset:0},2,5)},minorTicks:{amount:4,fitFunction:yl(void 0,2)}},{label:"MicroSecond10",unit:.01,irregular:!1,greatTicks:{getReferenceKeyValue:(t,e)=>t=>.01*Math.floor(t/.01)},majorTicks:{fitFunction:yl({offset:0},2,5)},minorTicks:{amount:4,fitFunction:yl(void 0,2)}},{label:"MicroSecond100",unit:.1,irregular:!1,greatTicks:{getReferenceKeyValue:(t,e)=>t=>.1*Math.floor(t/.1)},majorTicks:{fitFunction:yl({offset:0},2,5)},minorTicks:{amount:4,fitFunction:yl(void 0,2)}},{label:"MilliSecond1",unit:1,irregular:!1,greatTicks:{getReferenceKeyValue:Ou("millis",1,t=>t.millis%1==0,"millis")},majorTicks:{fitFunction:yl({offset:0},2,5)},minorTicks:{amount:4,fitFunction:yl(void 0,2)}},{label:"MilliSecond10",unit:10,irregular:!1,greatTicks:{getReferenceKeyValue:Ou("millis",10,t=>t.millis%10==0,"millis")},majorTicks:{fitFunction:yl({offset:0},2,5)},minorTicks:{amount:4,fitFunction:yl(void 0,2)}},{label:"MilliSecond100",unit:100,irregular:!1,greatTicks:{getReferenceKeyValue:Ou("millis",100,t=>t.millis%100==0,"millis")},majorTicks:{fitFunction:yl({offset:0},2,5)},minorTicks:{amount:4,fitFunction:yl(void 0,2)}},{label:"Second",unit:1e3,irregular:!1,greatTicks:{getReferenceKeyValue:Ou("seconds",1,t=>0===t.millis,"millis")},majorTicks:{fitFunction:ml(3,5,10,15,30)},minorTicks:{amount:4,fitFunction:yl(void 0,2)}},{label:"Minute",unit:6e4,irregular:!1,greatTicks:{getReferenceKeyValue:Ou("minutes",1,t=>0===t.seconds&&0===t.millis,"seconds","millis")},majorTicks:{fitFunction:ml(3,5,10,15,30)},minorTicks:{amount:12,fitFunction:yl(void 0,3,6)}},{label:"Hour",unit:36e5,irregular:!1,greatTicks:{getReferenceKeyValue:Ou("hours",1,t=>0===t.minutes&&0===t.seconds&&0===t.millis,"minutes","seconds","millis")},majorTicks:{fitFunction:ml(3,6,12)},minorTicks:{amount:8,fitFunction:yl(void 0,2,4)}},{label:"Day",unit:864e5,irregular:!1,greatTicks:{getReferenceKeyValue:Ou("day",1,t=>0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis,"hours","minutes","seconds","millis")},majorTicks:{fitFunction:yl({ignore:"last"},2,4)},minorTicks:{amount:7,fitFunction:yl({ignore:"last"},2,3)}},{label:"Week",unit:6048e5,irregular:!0,getPrevKeyValue:Uu(-1),getNextKeyValueIncludingRef:Uu(0),getNextKeyValue:Uu(1),greatTicks:!0,majorTicks:{fitFunction:yl(void 0,2)},minorTicks:{fitFunction:void 0}},{label:"Month",unit:2592e6,irregular:!0,getPrevKeyValue:Yu("monthIndex",1,t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis,"day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Gu("monthIndex",1,t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis,"day","hours","minutes","seconds","millis"),getNextKeyValue:Xu("monthIndex",1,"day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:yl(void 0,2,3,6)},minorTicks:{fitFunction:yl(void 0,2,4,6)}},{label:"Year",unit:31536e6,irregular:!0,getPrevKeyValue:Yu("year",1,t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis,"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Gu("year",1,t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis,"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Xu("year",1,"monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:yl({ignore:"first"},2,5)},minorTicks:{fitFunction:yl(void 0,2,5)}},{label:"Decade",unit:31536e7,irregular:!0,getPrevKeyValue:Yu("year",10,t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis,"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Gu("year",10,t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis,"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Xu("year",10,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:yl(void 0,2,4)},minorTicks:{fitFunction:yl(void 0,2,5)}},{label:"Century",unit:316224e7,irregular:!0,getPrevKeyValue:Yu("year",100,t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis,"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Gu("year",100,t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis,"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Xu("year",100,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0},{label:"Millennium",unit:316224e8,irregular:!0,getPrevKeyValue:Yu("year",1e3,t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis,"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Gu("year",1e3,t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis,"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Xu("year",1e3,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0}],ju=(t,e,i,s,r)=>{const n=e-t;let o;for(let a=r?0:Hu.length-1;r?a<Hu.length:a>=0;r?a+=1:a-=1){const t=n/Hu[a].unit;if((void 0===i||t>=i)&&(void 0===s||t<=s)){o=Hu[a];break}}return o},Wu=(t,e,i)=>{let s=ju(e,i,void 0,2,!0);if(void 0!==s&&0===Hu.indexOf(s)&&(s=Hu[1]),void 0===s)return;if("great"===t)return s;const r="major"===t?1:2,n=Hu[Hu.indexOf(s)-r];return void 0===n?Hu[0]:n},Zu=(t,e,i)=>(s,r,n,o)=>{const a=Wu("great",s,r);if(void 0===a)return[];if("Decade"===a.label||"Century"===a.label||"Millennium"===a.label)return[];const h=o>n?s:r,l=(s+r)/2,c=o>n?r:s;if(Hu.indexOf(a)<=Hu.findIndex(t=>"Hour"===t.label))return"left"===i?[h]:[];let u;if(!0===a.irregular)u=pl(s,r,a.getPrevKeyValue(t,e),a.getNextKeyValue(t,e));else{const i=a.greatTicks.getReferenceKeyValue(t,e)(s);u=gl(s,r,a.unit,i,void 0)}const d=((t,e,i)=>{for(const s of i)if(s>=t&&s<=e)return s})(s,r,u);return"left"===i?void 0===d||yo(d,l,c)?[h]:[d]:void 0!==d&&yo(d,l,c)?[d]:[c]},Ju=(t,e,i)=>(s,r,n,o)=>{const a=Wu(t,n,o);let h;if(void 0===a)return[];if("great"===t&&void 0!==a.greatTicks)if(!0===a.irregular)h=pl(s,r,a.getPrevKeyValue(e,i),a.getNextKeyValue(e,i));else{const t=a.greatTicks.getReferenceKeyValue(e,i)(s);h=gl(s,r,a.unit,t,void 0)}else if("major"===t&&void 0!==a.majorTicks)h=!0===a.irregular?((t,e,i,s)=>{const r=[];let n=i(t),o=0;for(;n<e;)if(r.push(n),n=s(n),o+=1,o>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return r.push(n),r})(s,r,a.getPrevKeyValue(e,i),a.getNextKeyValue(e,i)):((t,e,i)=>{const s=[];let r=t,n=0;for(;(r-t)/(e-t)<.98;)if(s.push(r),n+=1,r=t+n*i,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return s.push(r),s})(s,r,a.unit);else{if("minor"!==t||void 0===a.minorTicks)return[];if(!0===a.irregular)h=((t,e,i,s)=>{const r=[];let n=s(t),o=0;for(;n<e;)if(r.push(n),n=s(n),o+=1,o>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return r})(s,r,a.getNextKeyValueIncludingRef(e,i),a.getNextKeyValue(e,i));else{const t=(t=>{if(void 0!==t)return Hu[Hu.indexOf(t)+1]})(a);if(void 0===t)return[];h=fl(s,r,t.unit/a.minorTicks.amount,void 0)}}return h},qu=t=>(e,i,s,r,n,o)=>{const a=Wu(t,n,o);if(void 0===a)return;let h;return"major"===t?h=a.majorTicks.fitFunction:a.minorTicks&&(h=a.minorTicks.fitFunction),h?h(e,i,s,r,n,o):void 0},Qu=fs({utc:!1,locale:void 0,dateOrigin:void 0,cursorFormatter:void 0,greatTickStyle:new wu,majorTickStyle:new wu,minorTickStyle:new wu,formatOptionsMajorCentury:{year:"numeric",hour12:!1},formatOptionsMinorDecade:{year:"numeric",hour12:!1},formatOptionsMajorDecade:{year:"numeric",hour12:!1},formatOptionsMinorYear:{year:"numeric",hour12:!1},formatOptionsMajorYear:{year:"numeric",hour12:!1},formatOptionsMinorMonth:{month:"short",hour12:!1},formatOptionsGreatYear:{year:"numeric",hour12:!1},formatOptionsMajorMonth:{month:"long",hour12:!1},formatOptionsMinorWeek:{day:"numeric",hour12:!1},formatOptionsGreatMonth:{year:"numeric",month:"long",hour12:!1},formatOptionsMajorWeek:{day:"numeric",weekday:"short",hour12:!1},formatOptionsMinorDay:{day:"numeric",weekday:"short",hour12:!1},formatOptionsGreatWeek:(t,e,i)=>{const s=new Date(t),r=(t=>{const e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));const i=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e.getTime()-i.getTime())/864e5+1)/7)})(s);return"".concat(new Intl.DateTimeFormat(i,{year:"numeric",month:"long",hour12:!1}).format(s)," Week ").concat(r)},formatOptionsMajorDay:{weekday:"long",day:"numeric",hour12:!1},formatOptionsMinorHour:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsGreatDay:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorHour:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsMinorMinute:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsGreatHour:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorMinute:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsMinorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},formatOptionsGreatMinute:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},formatOptionsMinorMillisecond:t=>{const e=new Date(t);return e.setHours(0,0,0,0),Ru.hhmmssmmm(t-e.getTime())},formatMillisecondRange:t=>{const e=new Date(t);return e.setHours(0,0,0,0),Ru.hhmmssmmm(t-e.getTime())},formatMicrosecondRange:t=>{const e=new Date(t);return e.setHours(0,0,0,0),Ru.hhmmssmmmuuu(t-e.getTime())},formatNanosecondRange:(t,e,i,s)=>{if(s){const t=new Date(s.valueShifted);return t.setHours(0,0,0,0),Ru.hhmmssmmmuuunnn(s.valueShifted-t.getTime())}{const e=new Date(t);return e.setHours(0,0,0,0),Ru.hhmmssmmmuuunnn(t-e.getTime())}},formatOptionsGreatSecond:{},formatOptionsMajorMilliSecond:{}});class Ku extends Qu{xh(t){const e=void 0!==this.dateOrigin?this.dateOrigin.getTime():0,i=t=>Hu.map(e=>{const i=((t,e,i)=>{switch(i.label){case"NanoSecond10":case"NanoSecond100":return t.formatNanosecondRange;case"MicroSecond1":case"MicroSecond10":case"MicroSecond100":return t.formatMicrosecondRange;case"MilliSecond1":case"MilliSecond10":case"MilliSecond100":return"Great"===e?t.formatOptionsGreatMinute:t.formatMillisecondRange;case"Second":return"Great"===e?t.formatOptionsGreatMinute:"Major"===e?t.formatOptionsMajorSecond:t.formatOptionsMinorSecond;case"Minute":return"Great"===e?t.formatOptionsGreatMinute:"Major"===e?t.formatOptionsMajorMinute:t.formatOptionsMinorMinute;default:case"Hour":return"Great"===e?t.formatOptionsGreatHour:"Major"===e?t.formatOptionsMajorHour:t.formatOptionsMinorHour;case"Day":return"Great"===e?t.formatOptionsGreatDay:"Major"===e?t.formatOptionsMajorDay:t.formatOptionsMinorDay;case"Week":return"Great"===e?t.formatOptionsGreatWeek:"Major"===e?t.formatOptionsMajorWeek:t.formatOptionsMinorWeek;case"Month":return"Great"===e?t.formatOptionsGreatMonth:"Major"===e?t.formatOptionsMajorMonth:t.formatOptionsMinorMonth;case"Year":return"Great"===e?t.formatOptionsGreatYear:"Major"===e?t.formatOptionsMajorYear:t.formatOptionsMinorYear;case"Decade":return"Great"===e?void 0:"Major"===e?t.formatOptionsMajorDecade:t.formatOptionsMinorDecade;case"Century":return"Great"===e?void 0:"Major"===e?t.formatOptionsMajorCentury:void 0;case"Millennium":return}})(this,t,e);if("object"!=typeof i)return i;try{return new Intl.DateTimeFormat(this.locale,i)}catch(t){let s="";for(const t in i)s+=" ".concat(t,": ").concat(i[t],",");Ur.console.error("Invalid Intl.DateTimeFormat ( locale: ".concat(this.locale,", formatOptions {").concat(s,"} )"))}}),s=new Map;s.set("great",i("Great")),s.set("major",i("Major")),s.set("minor",i("Minor"));const r=t=>String(t),n=(t,i)=>(n,o)=>{let a=n,h=n+e;const l=o.start,c=o.end,u=l>c,d=Wu(t,u?c:l,u?l:c);if(void 0===d)return r(h);if("great"===t){const t=qr(n,"left"===i?l:c);let s;if(s=!1===t?n:!1===d.irregular?"left"===i&&!1===u||"right"===i&&!0===u?d.greatTicks.getReferenceKeyValue(e,this.utc)(n):d.greatTicks.getReferenceKeyValue(e,this.utc)(n+1*d.unit):"left"===i&&!1===u||"right"===i&&!0===u?d.getPrevKeyValue(e,this.utc)(n):d.getNextKeyValue(e,this.utc)(n),a=s,h=s+e,"right"===i&&!0===t)return"";if("right"===i&&"Week"===d.label)return""}const f=s.get(t);if(void 0===f)return r(h,this.locale);const g=f[Hu.indexOf(d)];return void 0===g?"":"function"==typeof g?g(h,o,this.locale,{valueShifted:a,shiftOrigin:this.dateOrigin?this.dateOrigin.getTime():0}):g.format(h)},o=[],a=[{Dr:"Great ticks (directive)",vA:0,bh:!0,_n:Ju("great",e,this.utc),kn:void 0},{Dr:"Major ticks",vA:1,Fh:this.majorTickStyle,Sh:n("major"),_n:Ju("major",e,this.utc),ir:{tn:qu("major"),en:"hide-tick"},kn:void 0}];Tu(this.greatTickStyle)||o.push({Dr:"Great ticks (left)",Fh:this.greatTickStyle.setLabelAlignment(-1),Sh:n("great","left"),_n:Zu(e,this.utc,"left"),mh:!0,rn:!1}),Tu(this.minorTickStyle)||a.push({Dr:"Minor ticks",vA:2,Fh:this.minorTickStyle,Sh:n("minor"),_n:Ju("minor",e,this.utc),ir:{tn:qu("minor"),sr:(t,e,i,s,r,n)=>{const o=Wu("minor",r,n);return!o||"Week"!==o.label},en:"hide-tick"},kn:void 0,sn:2});const h=this.cursorFormatter;return{Mh:o,wh:a,_h:h?(t,i,s)=>h(e+t,i,s):(t,i,s)=>{const r=ju(Math.min(i.start,i.end),Math.max(i.start,i.end),void 0,1,!0),n=r&&r.unit<=.1,o=r&&r.unit<=100,a=r&&r.unit<=6e4,h=new Date(e+t),l=new Date(e+t);l.setHours(0,0,0,0);const c=n?this.formatNanosecondRange:o?this.formatMicrosecondRange:a?this.formatMillisecondRange:Ru.hhmmss;return"".concat(new Intl.DateTimeFormat(s,{year:"numeric",month:"numeric",day:"numeric"}).format(h)," ").concat(c(h.getTime()-l.getTime(),i,this.locale,{valueShifted:t,shiftOrigin:e}))},kh:10**-5,Ch:31536e9}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTickStyle(t){return this.setGreatTickStyle(t).setMajorTickStyle(t).setMinorTickStyle(t)}setGreatTickStyle(t){if("function"==typeof t){const e=this.get("greatTickStyle");return this.set("greatTickStyle",t(e))}return this.set("greatTickStyle",t)}getGreatTickStyle(){return this.get("greatTickStyle")}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const e=this.get("minorTickStyle");return this.set("minorTickStyle",t(e))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setUTC(t){return this.set("utc",t)}getUTC(){return this.get("utc")}setLocale(t){return this.set("locale",t)}getLocale(){return this.get("locale")}setDateOrigin(t){return this.set("dateOrigin",t)}getDateOrigin(){return this.get("dateOrigin")}setFormatting(t,e,i){return this.withMutations(s=>s.set("formatOptionsGreatYear",t||this.formatOptionsGreatYear).set("formatOptionsGreatMonth",t||this.formatOptionsGreatMonth).set("formatOptionsGreatWeek",t||this.formatOptionsGreatWeek).set("formatOptionsGreatDay",t||this.formatOptionsGreatDay).set("formatOptionsGreatHour",t||this.formatOptionsGreatHour).set("formatOptionsGreatMinute",t||this.formatOptionsGreatMinute).set("formatOptionsMajorCentury",e||this.formatOptionsMajorCentury).set("formatOptionsMajorDecade",e||this.formatOptionsMajorDecade).set("formatOptionsMajorYear",e||this.formatOptionsMajorYear).set("formatOptionsMajorMonth",e||this.formatOptionsMajorMonth).set("formatOptionsMajorWeek",e||this.formatOptionsMajorWeek).set("formatOptionsMajorDay",e||this.formatOptionsMajorDay).set("formatOptionsMajorHour",e||this.formatOptionsMajorHour).set("formatOptionsMajorMinute",e||this.formatOptionsMajorMinute).set("formatOptionsMajorSecond",e||this.formatOptionsMajorSecond).set("formatOptionsMinorDecade",i||this.formatOptionsMinorDecade).set("formatOptionsMinorYear",i||this.formatOptionsMinorYear).set("formatOptionsMinorMonth",i||this.formatOptionsMinorMonth).set("formatOptionsMinorWeek",i||this.formatOptionsMinorWeek).set("formatOptionsMinorDay",i||this.formatOptionsMinorDay).set("formatOptionsMinorHour",i||this.formatOptionsMinorHour).set("formatOptionsMinorMinute",i||this.formatOptionsMinorMinute).set("formatOptionsMinorSecond",i||this.formatOptionsMinorSecond))}setFormattingDecade(t,e){return this.withMutations(i=>(t&&(i=i.set("formatOptionsMajorDecade",t)),e&&(i=i.set("formatOptionsMinorYear",e)),i))}setFormattingYear(t,e){return this.withMutations(i=>(t&&(i=i.set("formatOptionsMajorYear",t)),e&&(i=i.set("formatOptionsMinorMonth",e)),i))}setFormattingMonth(t,e,i){return this.withMutations(s=>(t&&(s=s.set("formatOptionsGreatYear",t)),e&&(s=s.set("formatOptionsMajorMonth",e)),i&&(s=s.set("formatOptionsMinorWeek",i)),s))}setFormattingWeek(t,e,i){return this.withMutations(s=>(t&&(s=s.set("formatOptionsGreatMonth",t)),e&&(s=s.set("formatOptionsMajorWeek",e)),i&&(s=s.set("formatOptionsMinorDay",i)),s))}setFormattingDay(t,e,i){return this.withMutations(s=>(t&&(s=s.set("formatOptionsGreatWeek",t)),e&&(s=s.set("formatOptionsMajorDay",e)),i&&(s=s.set("formatOptionsMinorHour",i)),s))}setFormattingHour(t,e,i){return this.withMutations(s=>(t&&(s=s.set("formatOptionsGreatDay",t)),e&&(s=s.set("formatOptionsMajorHour",e)),i&&(s=s.set("formatOptionsMinorMinute",i)),s))}setFormattingMinute(t,e,i){return this.withMutations(s=>(t&&(s=s.set("formatOptionsGreatHour",t)),e&&(s=s.set("formatOptionsMajorMinute",e)),i&&(s=s.set("formatOptionsMinorSecond",i)),s))}setFormattingSecond(t,e,i){return this.withMutations(s=>(t&&(s=s.set("formatOptionsGreatMinute",t)),e&&(s=s.set("formatOptionsMajorSecond",e)),i&&(s=s.set("formatOptionsMinorMillisecond",i)),s))}setFormattingMilliSecond(t,e){return this.withMutations(i=>(t&&(i=i.set("formatOptionsGreatSecond",t)),e&&(i=i.set("formatOptionsMajorMilliSecond",e)),i))}}const $u=(t,e)=>(i,s,r,n,o)=>{const a=s-i;if(e){let e=5;o<=125?e=2:o<=250?e=3:o<=500&&(e=4);const r=Math.log10(a/e),n=Math.floor(2*r)/2;let h;h=n%1==0?10**(n-t):10**Math.ceil(n)/2;const l=1/h;h=Math.round(h*l)/l;const c=Math.round(Math.floor(i/(10*h))*h*10*l)/l;return gl(c,s,h,void 0,l)}let h=a/5;const l=1/h;return h=Math.round(h*l)/l,fl(i,s,h,l)},td=(t,e,i,s,r,n)=>0===e?t.filter((t,e)=>e%2==0):1===e?t.filter((t,e)=>e%5==0):2===e?t.filter((t,e)=>e%10==0):void 0,ed=(t,e,i,s,r,n)=>{},id=(t,e,i,s,r,n)=>0===e?t.filter((t,e)=>e%2==0):1===e?t.filter((t,e)=>e%3==0):2===e?t.filter((t,e)=>e%4==0):3===e?t.filter((t,e)=>e%5==0):void 0,sd=(t,e,i,s,r,n)=>0===e?[t[1],t[3],t[5]]:1===e?[t[0],t[3]]:2===e?[t[1]]:void 0,rd=(t,e)=>{const i=Uo(t),s=Ho(t);if(e)return(t,e)=>{const r=[],n=Math.floor(i(t)),o=Math.ceil(i(e));for(let i=n-1;i<=o+1;i+=1){const t=s**i;r.push(t)}return r};const r=10===t?9:4;return(t,e)=>{const n=Math.round(i(t)),o=Math.round(i(e)),a=[],h=s**n,l=(s**o-h)/r;for(let i=1;i<=r;i+=1){const s=h+l*i;s>t&&s<e&&a.push(s)}return a}},nd=fs({cursorFormatter:void 0,extremeTickStyle:new wu,majorTickStyle:new wu,minorTickStyle:new wu,formattingOffset:void 0,extremeFormattingFunction:void 0,majorFormattingFunction:void 0,minorFormattingFunction:void 0,fallBackToExtremeTicksAutomatically:!0});class od extends nd{xh(t){const e=this.formattingOffset,i=this.get("extremeFormattingFunction")||("logarithmic"===t.type?(e,i)=>qo.LogarithmicNoExponents(e,i,void 0,t.base):qo.Numeric),s=this.get("majorFormattingFunction")||("logarithmic"===t.type?(e,i)=>qo.LogarithmicNoExponents(e,i,void 0,t.base):qo.Numeric),r=this.get("minorFormattingFunction")||("logarithmic"===t.type?(e,i)=>qo.LogarithmicNoExponents(e,i,void 0,t.base):qo.Numeric),n=[],o=[];Tu(this.extremeTickStyle)||n.push({Dr:"Extreme ticks",Fh:this.extremeTickStyle,Sh:void 0===e?i:(t,s,r)=>i(e+t,s,r),_n:dl,mh:!0,rn:!0});const a={Dr:"Major ticks",vA:0,Fh:this.majorTickStyle,Sh:void 0===e?s:(t,i,r)=>s(e+t,i,r),_n:"logarithmic"===t.type?rd(t.base,!0):$u(0,!0),ir:{en:"hide-label",tn:"logarithmic"===t.type?id:td},kn:void 0};if(o.push(a),!Tu(this.minorTickStyle)){const i="logarithmic"===t.type?rd(t.base,!1):$u(1,!1);o.push({Dr:"Minor ticks",vA:1,Fh:this.minorTickStyle,Sh:void 0===e?r:(t,i,s)=>r(e+t,i,s),_n:(t,e,s,r,n)=>i(t,e,s,r,n),ir:{en:"hide-tick",tn:"logarithmic"===t.type?sd:ed},kn:80})}const h=this.cursorFormatter?this.cursorFormatter:qo.Numeric;return{Mh:n,wh:o,_h:void 0===e?h:(t,i,s)=>h(e+t,i,s),kh:1e-9,Ch:void 0,Ur:this.fallBackToExtremeTicksAutomatically?a:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setExtremeTickStyle(t){if("function"==typeof t){const e=this.get("extremeTickStyle");return this.set("extremeTickStyle",t(e))}return this.set("extremeTickStyle",t)}getExtremeTickStyle(){return this.get("extremeTickStyle")}setFormattingOffset(t){return this.set("formattingOffset",t)}getFormattingOffset(){return this.get("formattingOffset")}setTickStyle(t){const e=this.setMajorTickStyle(t).setMinorTickStyle(t);return e.extremeTickStyle!==Cu?e.setExtremeTickStyle(t):e}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const e=this.get("minorTickStyle");return this.set("minorTickStyle",t(e))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setFormattingFunction(t){return this.withMutations(e=>e.set("extremeFormattingFunction",t).set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t))}getExtremeFormattingFunction(){return this.get("extremeFormattingFunction")}setExtremeFormattingFunction(t){return this.set("extremeFormattingFunction",t)}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}getFallBackToExtremeTicksAutomatically(){return this.get("fallBackToExtremeTicksAutomatically")}setFallBackToExtremeTicksAutomatically(t){return this.set("fallBackToExtremeTicksAutomatically",t)}}const ad=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",s=arguments.length>3?arguments[3]:void 0;e+=".".concat(i.slice(i.indexOf("image/")+6));const r=t.captureFrame(i,s);if("image/png"!==i&&r.type.includes("image/png"))throw new Error("saveToFile | type not supported by browser: ".concat(i,"\nCheck support table for HTMLCanvasElement.toDataURL"));if(Ur.navigator.msSaveBlob)Ur.navigator.msSaveBlob(r,e);else{const t=Ur.document.createElement("a");Ur.document.body.appendChild(t);const i=Ur.URL.createObjectURL(r);t.href=i,t.download=e,t.click(),setTimeout(()=>{Ur.URL.revokeObjectURL(i),Ur.document.body.removeChild(t)},0)}},hd=(t,e,i,s,r,n)=>{const o=t.ro(e,i,s,r,n,!0);return o.setDraggingMode(Vr.draggable),o},ld=(t,e)=>{if("relative"===t)return e;if(t instanceof sr)return t;const i=t.x instanceof El?t.x.oi:t.x.x,s=t.y instanceof El?t.y.oi:t.y.y;return ga(i,s)},cd=(t,e,i,s,r)=>{if(i){const n=t,o=e,a=Eu(o)?o:ma(o)?s:void 0;if(a&&pa(i)){const t=hr(n,a,r.oi);return r.Qa({engineX:t.x,engineY:t.y})}if(a&&ma(i))return hr(n,a,s);if(a&&Eu(i))return hr(n,a,i)}else{const i=t;if(ma(e)){const t=r.Ja(i);return hr({x:t.engineX,y:t.engineY},r.oi,s)}if(Eu(e)){const t=e,s=r.Ja(i);return hr({x:s.engineX,y:s.engineY},r.oi,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")};class ud{constructor(t){this.IA=[],this.PA=t}LA(){return this.BA(),{add:()=>this.DA(),finishPlot:()=>{this.RA()}}}DA(){let t=this.IA.find(t=>t.isFree);return t||(t={isFree:!1,shape:this.PA()},this.IA.push(t)),t.isFree=!1,t.shape}BA(){this.IA.forEach(t=>{t.isFree=!0})}RA(){this.IA.filter(t=>t.isFree).forEach(t=>{t.shape.dispose(),this.IA.splice(this.IA.indexOf(t),1)})}EA(){this.IA.forEach(t=>t.shape.dispose()),this.IA.length=0}En(){return this.IA.map(t=>t.shape)}}const dd=t=>{const e=t.layer,i=t.scale,s=t.panel,r=t.legend;let n;const o=s.gi.Ms,a=new Map,h=(t,e,i,s)=>{var r;a.has(t)||a.set(t,[]),null===(r=a.get(t))||void 0===r||r.push({eventType:e,callback:i}),t.addEventListener(e,i,s)},c=()=>{for(const[t,e]of a.entries())for(const{eventType:i,callback:s}of e)t.removeEventListener(i,s);a.clear()},u=[];let d=[],f=[];const g=new ud(()=>e.bn(i).mn(Zn).Sn(Zn)),p=new ud(()=>e.Ld(i)),y=e.fd(i).Ke(s.getTheme().uiBackgroundFillStyle).setVisible(!1),m=y.Go().vd({extent:8,c_x1_y1:!0,c_x1_y2:!0,c_x2_y1:!0,c_x2_y2:!0}),v=s.getTheme().uiButtonFillStyle,x=s.getTheme().uiButtonFillStyleHidden,b=s.getTheme().uiTextFillStyle,S=s.getTheme().uiTextFillStyleHidden,A=s.getTheme().uiTextFont,E=s.getTheme().uiBackgroundFillStyle,k=s.getTheme().uiBackgroundStrokeStyle,w=s.getTheme().uiButtonStrokeStyle,M=()=>{y.setVisible(!1),u.forEach(t=>t.setVisible(!1).Er()),d.forEach(t=>t.setVisible(!1)),f.forEach(t=>t.setVisible(!1))},C=n=>{var a,l,d,f;c(),n.titleEvents.zi(),n.backgroundEvents.zi(),u.forEach(t=>t.dispose()),u.length=0;const y=g.LA(),m=p.LA(),E=null!==(a=n.marginInner)&&void 0!==a?a:0,k=n.marginOuter,M=n.chartPadding,C={left:k.left+M.left,right:k.right+M.right,top:k.top+M.top,bottom:k.bottom+M.bottom},T=s.getSizePixels();let F,P={x:-1,y:1};if("number"==typeof n.position)switch(n.position){case vd.TopLeft:case vd.TopCenter:case vd.TopRight:case vd.BottomLeft:case vd.BottomCenter:case vd.BottomRight:F={x:T.x-n.chartTitleSpace.left-n.chartTitleSpace.right-C.left-C.right,y:T.y-n.chartTitleSpace.top-n.chartTitleSpace.bottom-C.top-C.bottom};break;default:F={x:T.x-C.left-C.right,y:T.y-C.top-C.bottom}}else n.position.origin&&(P=n.position.origin),F={x:T.x-n.position.x*(P.x+1)/2,y:n.position.y*(P.y+1)/2};const B=void 0!==n.orientation?n.orientation===xd.Vertical:"number"==typeof n.position&&n.position<6,L=null!==(l=n.padding)&&void 0!==l?l:{left:5,right:5,top:5,bottom:5},D=L.top+L.bottom,z=L.left+L.right,I=null!==(d=n.entryMargin)&&void 0!==d?d:10,R={left:I,right:I,top:I,bottom:I},_=t.panel.getTheme().uiButtonSize;let V=0,N=0,O=0,Y=0;const G=[],X=n.title?y.add().Yl({x:-1,y:0}).Jr(n.title).Mr(n.titleFont?new Xa(n.titleFont):A.setWeight("bold")).Ke(null!==(f=n.titleFillStyle)&&void 0!==f?f:b).mn(R):void 0;if(X){const t=X.setVisible(!0).Er().vu();O=B?t.y:t.x+I,Y=B?t.x:t.y,V=t.x,N=t.y,n.titleEvents.Oi(X)}const U=n.entries.filter(t=>!1!==t.options.show),H=U.map((t,n)=>{var a,l;const c=void 0!==t.options.text?t.options.text:t.component&&"getName"in t.component?t.component.getName():"",d=t.component&&t.component.getVisible?t.component.getVisible()?void 0!==t.options.textFillStyle?t.options.textFillStyle:b:S:void 0!==t.options.textFillStyle?t.options.textFillStyle:b,f=t.options.textFont?new Xa(t.options.textFont):A,g=y.add().Yl({x:-1,y:0}).Jr(c).Ke(d).Mr(f).mn(R),p=void 0!==t.options.buttonShape?t.options.buttonShape:t.component&&t.component.js?t.component.js():La.Circle,E=hh(p);E&&p.Js instanceof Image&&h(p.Js,"load",()=>{r.zs()});const k=t.component&&t.component.getVisible?t.component.getVisible()?void 0!==t.options.buttonFillStyle?t.options.buttonFillStyle:t.component&&t.component.sh?Bn(s.getTheme(),t.options.matchStyleExactly||!1,t.component.sh()):v:x:void 0!==t.options.buttonFillStyle?t.options.buttonFillStyle:t.component&&t.component.sh?Bn(s.getTheme(),t.options.matchStyleExactly||!1,t.component.sh()):v,M=null!==(a=t.options.buttonStrokeStyle)&&void 0!==a?a:w,C=void 0!==t.options.buttonSize?t.options.buttonSize:E?Math.max(p._t().x,p._t().y):c?_:0,T=void 0!==t.options.buttonRotation?t.options.buttonRotation:t.component&&t.component.getPointRotation?t.component.getPointRotation():0,P=m.add().OA({x:-1,y:0}).Nd(C).Rd(T);k&&P.Id(k),void 0!==p&&P.Bd(p),P.zd(M);const L=null===t.options.lut?void 0:t.options.lut?t.options.lut:t.component&&t.component.Ys?null===(l=t.component.Ys())||void 0===l?void 0:l.lut:void 0;let X;L&&(X=new uu(e,i,i,()=>{},s.getTheme(),B?"vertical":"horizontal").ff(L),u.push(X),X.ff(L).setVisible(!0).Yl(B?"vertical":"horizontal").setFillStyle(d).setFont(f).setMargin(I).df(Zn),t.options.lutLength&&X.gf(t.options.lutLength),t.options.lutThickness&&X.yf(t.options.lutThickness),t.options.lutDisplayProportionalSteps&&X.setLUTDisplayProportionalSteps(t.options.lutDisplayProportionalSteps),t.options.lutStepValueFormatter&&X.bf(t.options.lutStepValueFormatter),L.units&&X.mf(L.units)),o.xs(g,t=>{g.Fi(t)},{animationEnabled:!0}),o.xs(P,t=>{P.Fi(t)},{animationEnabled:!0});const H=t.component&&Or(t.component)?t.component:void 0;H&&h(H,"highlightchange",t=>{const e=t.highlight;g.Fi(e),P.Fi(e),s.gi.Bs()}),[g,P].forEach(e=>{e&&(h(e,"pointerenter",()=>{!1!==t.options.highlight&&(H&&H.setHighlight(!0),g.Fi(1),P.Fi(1))}),h(e,"pointerleave",()=>{H&&H.setHighlight(!1),g.Fi(0),P.Fi(0)}))}),[g,P,X].forEach(e=>{e&&(h(e,"pointerenter",()=>{s.engine.setMouseStyle(Xh.Point)}),h(e,"pointerleave",()=>{s.engine.clearMouseStyle()}),t.options.events&&Object.entries(t.options.events).forEach(i=>{let[s,r]=i;h(e,s,e=>r(e,{entry:t,allEntries:U}))}),h(e,"click",()=>{r.zs(),s.gi.Bs()}))});const j=g.setVisible(!0).Er().vu();let W={length:0,thickness:0};if(X){const t=X.Er().getSize();W=B?{length:t.y,thickness:t.x}:{length:t.x,thickness:t.y}}const Z=B?{width:(C?I+C:0)+Math.max(j.x,W.thickness),height:Math.max(C,j.y)+W.length}:{width:(C?I+C:0)+j.x+W.length,height:Math.max(C,j.y,W.thickness)};return V=Math.max(Z.width,V),N=Math.max(Z.height,N),(B?O+Z.height<F.y-D:O+Z.width<F.x-z)?(Y=B?Math.max(Z.width,Y):Math.max(Z.height,Y),O+=B?Z.height:Z.width,n===U.length-1&&G.push(B?{width:Y,height:0===G.length?O:F.y-D}:{width:0===G.length?O:F.x-z,height:Y})):(G.push(B?{width:Y,height:F.y-D}:{width:F.x-z,height:Y}),O=B?Z.height:Z.width,n===U.length-1&&G.push(B?{width:Z.width,height:F.y-D}:{width:F.x-z,height:Z.height}),Y=B?Z.width:Z.height),{text:c?g:void 0,button:c&&0!==C?P:void 0,buttonSize:C,lut:X}});return{entries:H,sectionSizes:G,legendTitle:X,isVertical:B,availableChartSize:F,horizontalLegendPadding:z,verticalLegendPadding:D,marginInner:E,totalMarginOuter:C,maxEntryWidth:V,maxEntryHeight:N,chartSize:T,legendSpace:{left:0,right:0,top:0,bottom:0},origin:P,legendPadding:L,entryMarginValue:I,shapeProviderText:y,shapeProviderMarker:m}};return{update:t=>{if(!t.visible||t.renderOnTop)return Zn;const e=C(t);n=e;const{entries:i,sectionSizes:s,isVertical:r,availableChartSize:o,horizontalLegendPadding:a,verticalLegendPadding:h,marginInner:c,totalMarginOuter:u,maxEntryWidth:d,maxEntryHeight:f,legendSpace:g,shapeProviderText:p,shapeProviderMarker:y}=e;if(p.finishPlot(),y.finishPlot(),0===i.length&&0===s.length)return Zn;const m=gd(r,s,a,h,o);if(t.autoHideThreshold&&fd(t.autoHideThreshold,m,o,r,d,f))return Zn;const v=l({},g),x=t.chartPadding,b=Math.max(0,u.left-x.left),S=Math.max(0,u.right-x.right),A=Math.max(0,u.top-x.top),E=Math.max(0,u.bottom-x.bottom);switch(t.position){case vd.RightTop:case vd.RightCenter:case vd.RightBottom:v.right=m.width+c+S;break;case vd.LeftTop:case vd.LeftCenter:case vd.LeftBottom:v.left=m.width+c+b;break;case vd.TopLeft:case vd.TopCenter:case vd.TopRight:v.top=m.height+c+A;break;case vd.BottomLeft:case vd.BottomCenter:case vd.BottomRight:v.bottom=m.height+c+E}return v},plot:t=>{var e;if(!t.visible)return void M();const i=n||C(t);n=void 0;const{entries:s,sectionSizes:r,legendTitle:o,isVertical:a,availableChartSize:h,horizontalLegendPadding:c,verticalLegendPadding:u,chartSize:v,maxEntryWidth:x,maxEntryHeight:b,origin:S,legendPadding:A,entryMarginValue:w,shapeProviderText:T,shapeProviderMarker:F,totalMarginOuter:P}=i;if(d=g.En(),f=p.En(),0===s.length&&0===r.length)return M(),T.finishPlot(),void F.finishPlot();const B=gd(a,r,c,u,h);if(t.autoHideThreshold&&fd(t.autoHideThreshold,B,h,a,x,b))return M(),T.finishPlot(),void F.finishPlot();const L=(S.x+1)*B.width/2,D=(S.y+1)*B.height/2;d.forEach(t=>t.setVisible(!0)),f.forEach(t=>t.setVisible(!0));const z=t.chartTitleSpace;let I={leftBottom:{x:0,y:0},leftTop:{x:0,y:0},rightTop:{x:0,y:0},rightBottom:{x:0,y:0}};switch(t.position){case vd.RightTop:case vd.RightCenter:case vd.RightBottom:I={leftBottom:{x:v.x-B.width-P.right,y:0+P.bottom},leftTop:{x:v.x-B.width-P.right,y:v.y-P.top},rightTop:{x:v.x-P.right,y:v.y-P.top},rightBottom:{x:v.x-P.right,y:0+P.bottom}};break;case vd.LeftTop:case vd.LeftCenter:case vd.LeftBottom:I={leftBottom:{x:0+P.left,y:0+P.bottom},leftTop:{x:0+P.left,y:v.y-P.top},rightTop:{x:B.width+P.left,y:v.y-P.top},rightBottom:{x:B.width+P.left,y:0+P.bottom}};break;case vd.TopLeft:case vd.TopCenter:case vd.TopRight:I={leftBottom:{x:0+P.left,y:v.y-B.height-P.top-z.top},leftTop:{x:0+P.left,y:v.y-P.top-z.top},rightTop:{x:v.x-P.right,y:v.y-P.top-z.top},rightBottom:{x:v.x-P.right,y:v.y-B.height-P.top-z.top}};break;case vd.BottomLeft:case vd.BottomCenter:case vd.BottomRight:I={leftBottom:{x:0+P.left,y:0+P.bottom+z.bottom},leftTop:{x:0+P.left,y:B.height+P.bottom+z.bottom},rightTop:{x:v.x-P.right,y:B.height+P.bottom+z.bottom},rightBottom:{x:v.x-P.right,y:0+P.bottom+z.bottom}};break;default:I={leftBottom:{x:t.position.x-L,y:t.position.y-D},leftTop:{x:t.position.x-L,y:t.position.y-D+B.height},rightTop:{x:t.position.x-L+B.width,y:t.position.y-D+B.height},rightBottom:{x:t.position.x-L+B.width,y:t.position.y-D}}}if(t.backgroundVisible){let e={x:0,y:0};const i=B.width,s=B.height;switch(t.position){case vd.RightTop:e={x:v.x-B.width-P.right,y:v.y-B.height-P.top};break;case vd.RightCenter:e={x:v.x-B.width-P.right,y:v.y/2-B.height/2-P.top/2+P.bottom/2};break;case vd.RightBottom:e={x:v.x-B.width-P.right,y:0+P.bottom};break;case vd.LeftTop:e={x:0+P.left,y:v.y-B.height-P.top};break;case vd.LeftCenter:e={x:0+P.left,y:v.y/2-B.height/2-P.top/2+P.bottom/2};break;case vd.LeftBottom:e={x:0+P.left,y:0+P.bottom};break;case vd.TopLeft:e={x:0+P.left,y:v.y-B.height-P.top-z.top};break;case vd.TopCenter:e={x:v.x/2-B.width/2+P.left/2-P.right/2,y:v.y-B.height-P.top-z.top};break;case vd.TopRight:e={x:v.x-B.width-P.right,y:v.y-B.height-P.top-z.top};break;case vd.BottomLeft:e={x:0+P.left,y:0+P.bottom+z.bottom};break;case vd.BottomCenter:e={x:v.x/2-B.width/2+P.left/2-P.right/2,y:0+P.bottom+z.bottom};break;case vd.BottomRight:e={x:v.x-B.width-P.right,y:0+P.bottom+z.bottom};break;default:e={x:t.position.x-L,y:t.position.y-D}}m.yd(e.x,e.y,e.x+i,e.y+s)}t.backgroundEvents.Oi(y),y.setVisible(null===(e=t.backgroundVisible)||void 0===e||e),y.Ke(void 0!==t.backgroundFillStyle?t.backgroundFillStyle:E),y.Qe(void 0!==t.backgroundStrokeStyle?t.backgroundStrokeStyle:k);let R={x:0,y:0};switch(t.position){case vd.LeftTop:case vd.RightTop:R={x:I.leftTop.x,y:I.leftTop.y};break;case vd.LeftCenter:case vd.RightCenter:R={x:I.leftBottom.x,y:I.leftBottom.y+(I.leftTop.y-I.leftBottom.y)/2+B.height/2};break;case vd.LeftBottom:case vd.RightBottom:R={x:I.leftBottom.x,y:I.leftBottom.y+B.height};break;case vd.TopLeft:case vd.BottomLeft:R={x:I.leftTop.x,y:I.leftTop.y};break;case vd.TopCenter:case vd.BottomCenter:R={x:I.leftBottom.x+(I.rightBottom.x-I.leftBottom.x)/2-B.width/2,y:I.leftTop.y};break;case vd.TopRight:case vd.BottomRight:R={x:I.rightTop.x-B.width,y:I.leftTop.y};break;default:R={x:I.leftTop.x,y:I.leftTop.y}}R={x:R.x+A.left,y:R.y-A.top};const _=l({},R);let V=0,N=0;const O=[];let Y=[];if(o){const t=o.vu();o.ih(l(l({},R),{},{y:R.y-t.y/2})),N+=a?t.y:t.x+w,R=l(l({},R),{},a?{y:R.y-t.y}:{x:R.x+t.x+w})}s.forEach(t=>{const e=t.text?t.text.vu():{x:0,y:0},i=t.button?t.buttonSize:0,s=t.lut||void 0,n=pd(e,i,a,w,t.lut);N+n>=(a?r[V].height:r[V].width)&&r.length-1>V&&(O.push(Y),Y=[],V+=1,N=0),Y.push({entry:t,textSize:e,buttonSize:i,lut:s,entryLength:n}),N+=n}),Y.length>0&&O.push(Y);const G=O.map((t,e)=>{const i=t.reduce((t,e)=>t+e.entryLength,0);if(0===e&&o){const t=o.vu();return i+(a?t.y:t.x+w)}return i});O.forEach((e,i)=>{let s;const n=G[i],h=O.length>1;if(0===i)if(h)if(a){const t=r[i].height-n;s={x:_.x,y:_.y-t/2}}else{const t=r[i].width-n;s={x:_.x+t/2,y:_.y}}else s=l({},_);else if(a){const e=r.slice(0,i).reduce((t,e)=>t+e.width,0),o=r[i].height;let a;if(h){const e=o-n;let i;switch(t.position){case vd.LeftTop:case vd.RightTop:i=I.leftTop.y-A.top;break;case vd.LeftCenter:case vd.RightCenter:i=I.leftBottom.y+(I.leftTop.y-I.leftBottom.y)/2+o/2;break;case vd.LeftBottom:case vd.RightBottom:i=I.leftBottom.y+o+A.bottom;break;default:i=_.y}a=i-e/2}else a=_.y;s={x:_.x+e,y:a}}else{const e=r.slice(0,i).reduce((t,e)=>t+e.height,0),o=r[i].width;let a;if(h){const e=o-n;let i;switch(t.position){case vd.TopLeft:case vd.BottomLeft:i=I.leftTop.x+A.left;break;case vd.TopCenter:case vd.BottomCenter:i=I.leftBottom.x+(I.rightBottom.x-I.leftBottom.x)/2-o/2;break;case vd.TopRight:case vd.BottomRight:i=I.rightTop.x-o-A.right;break;default:i=_.x}a=i+e/2}else a=_.x;s={x:a,y:_.y-e}}if(0===i&&o){const t=o.vu();a?(o.ih({x:s.x,y:s.y-t.y/2}),s=l(l({},s),{},{y:s.y-t.y})):(o.ih({x:s.x,y:s.y-t.y/2}),s=l(l({},s),{},{x:s.x+t.x+w}))}let c=l({},s);e.forEach(t=>{yd(c,t.entry.button,t.entry.text,t.lut,t.textSize,t.buttonSize,a,w),c=l(l({},c),{},a?{y:c.y-t.entryLength}:{x:c.x+t.entryLength})})}),T.finishPlot(),F.finishPlot()},dispose:()=>{c(),g.EA(),p.EA(),y.dispose(),u.forEach(t=>t.dispose())}}},fd=(t,e,i,s,r,n)=>(s?Math.ceil(e.width)>=Math.ceil(i.x*t):Math.ceil(e.height)>=Math.ceil(i.y*t))||r>i.x||n>i.y,gd=(t,e,i,s,r)=>t?{width:e.reduce((t,e)=>t+e.width,0)+i,height:e.length>1?r.y:e[0].height+s}:{width:e.length>1?r.x:e[0].width+i,height:e.reduce((t,e)=>t+e.height,0)+s},pd=function(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0;if(r){const n=r.Er().getSize(),o=i?{length:n.y,thickness:n.x}:{length:n.x,thickness:n.y};return i?Math.max(e,t.y)+o.length:(e?s+e:0)+t.x+o.length}return i?Math.max(e,t.y):(e?s+e:0)+t.x},yd=function(t,e,i,s,r,n,o){let a,h,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;if(r.y>n?(a={x:t.x+(n?l:0),y:t.y-r.y/2},h={x:a.x+n,y:t.y-r.y/2}):(a={x:t.x+(n?l:0),y:t.y-n/2},h={x:a.x+n,y:t.y-n/2}),e&&e.Fd(new Mc({schema:{x:{},y:{}}}).appendSample(a),{x:"x",y:"y"}),i&&i.ih(h),s){const e=s.Er().getSize(),i=o?{length:e.y,thickness:e.x}:{length:e.x,thickness:e.y},a=o?{x:h.x+i.thickness/2,y:t.y-Math.max(n,r.y)-i.length/2}:{x:h.x+r.x+i.length/2,y:t.y-i.thickness/2};s.setPosition(a),s.th()}},md=t=>"Ys"in t;var vd,xd;!function(t){t[t.RightTop=0]="RightTop",t[t.RightCenter=1]="RightCenter",t[t.RightBottom=2]="RightBottom",t[t.LeftTop=3]="LeftTop",t[t.LeftCenter=4]="LeftCenter",t[t.LeftBottom=5]="LeftBottom",t[t.TopLeft=6]="TopLeft",t[t.TopCenter=7]="TopCenter",t[t.TopRight=8]="TopRight",t[t.BottomLeft=9]="BottomLeft",t[t.BottomCenter=10]="BottomCenter",t[t.BottomRight=11]="BottomRight"}(vd||(vd={})),function(t){t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical"}(xd||(xd={}));const bd={toggleIndividualVisibility:(t,e)=>{if(!e.entry.component||!e.entry.component.getVisible||!e.entry.component.setVisible)return;const i=e.entry.component.getVisible();e.entry.component.setVisible(!i)},focusClicked:(t,e)=>{if(!e.entry.component||!e.entry.component.getVisible||!e.entry.component.setVisible)return;let i=!1;e.allEntries.forEach(t=>{t.component&&t.component.getVisible&&t.component.getVisible()&&t!==e.entry&&(i=!0)}),e.allEntries.forEach(t=>{t.component&&t.component.setVisible&&t.component.setVisible(!i)}),e.entry.component.setVisible(!0)},doNothing:()=>{}};class Sd{constructor(t,e,i,s,r,n){var o;this.zA=[],this.VA=!0,this.Cn=vd.BottomCenter,this.Yh=void 0,this.NA=!1,this.GA=!1,this.$A=!0,this.UA=!1,this.YA={left:0,right:0,top:0,bottom:0},this.ci=!1,this.jA=5,this.HA={x:0,y:0},this.WA=!0,this.XA=.5,this.ZA=[],this.JA=!1,this.title=new Ar,this.background=new Ar,this.QA=e,this.KA=null!==(o=e.getTheme().panelPadding)&&void 0!==o?o:7,this.qA={events:{click:bd.toggleIndividualVisibility}},t!==dd&&(this.NA=!0);const a=this.NA?{panel:e}:{panel:e,layer:i,scale:s,legend:this};this.tg=t(a),r&&(this.zA=r),n&&this.setOptions(n),this.QA.gi.Bs();const h=()=>{Ur.setTimeout(()=>{this.zs(),this.QA.gi.Bs()},0)};Ur.setTimeout(()=>{this.ci||this.QA.addEventListener("resize",h)},0),this.ig=()=>{this.QA.removeEventListener("resize",h)}}sg(t,e){const i=t&&"number"==typeof t?l(l({},Zn),{},{top:t}):t&&"number"!=typeof t?t:Zn;let s={visible:this.zA.length>0&&this.VA,chartTitleSpace:i,marginOuter:this.YA,chartPadding:e,titleEvents:this.title,backgroundEvents:this.background,position:this.Cn,orientation:this.eg,padding:this.On?this.On:this.GA?{left:5,right:5,top:5,bottom:5}:Zn,entryMargin:this.jA,marginInner:this.KA,renderOnTop:this.UA,title:this.Yh,titleFont:this.hg,titleFillStyle:this.rg,backgroundVisible:this.GA,backgroundFillStyle:this.ng,backgroundStrokeStyle:this.og,autoHideThreshold:this.XA,entries:this.zA};if(this.NA){const t=this.QA.getTheme().uiTextFillStyle,e=this.QA.getTheme().uiButtonFillStyle,i=this.QA.getTheme().uiTextFont,r=this.zA.map(s=>{var r,n,o,a,h;return{component:s.component,options:l(l({},s.options),{},{show:null===(r=s.options.show)||void 0===r||r,text:null!==(n=s.options.text)&&void 0!==n?n:s.component&&s.component.getName?s.component.getName():"",textFont:s.options.textFont?s.options.textFont:i,textFillStyle:s.options.textFillStyle?s.options.textFillStyle:t,buttonSize:null!==(o=s.options.buttonSize)&&void 0!==o?o:10,buttonShape:null!==(a=s.options.buttonShape)&&void 0!==a?a:La.Circle,buttonRotation:null!==(h=s.options.buttonRotation)&&void 0!==h?h:0,buttonFillStyle:s.component&&s.component.sh?Bn(this.QA.getTheme(),s.options.matchStyleExactly||!1,s.component.sh()):e,events:l({click:bd.toggleIndividualVisibility},s.options.events)})}});s=l(l({},s),{},{entries:r})}return s}ag(){let t=!1;const e=this.QA.getSizePixels(),i=this.QA.getMinimumSize(),s=void 0===i||e.x>i.x&&e.y>i.y;return e.x===this.HA.x&&e.y===this.HA.y&&s||(t=!0),this.HA=e,t}lg(){const t=this.zA.map(t=>({entryText:t.component&&t.component.getName?t.component.getName():void 0,buttonShape:t.component&&t.component.js?t.component.js():void 0,legendStyle:t.component&&t.component.sh?t.component.sh():void 0}));if(this.ZA.length!==t.length)return this.ZA=t,!0;const e=t.some((t,e)=>{var i,s,r,n;const o=this.ZA[e];if(t.entryText!==o.entryText)return!0;if(t.buttonShape!==o.buttonShape)return!0;if(t.legendStyle&&o.legendStyle){if(t.legendStyle.fill!==o.legendStyle.fill)return!0;if(t.legendStyle.fill2!==o.legendStyle.fill2)return!0;if(t.legendStyle.stroke!==o.legendStyle.stroke)return!0;if(t.legendStyle.point3D!==o.legendStyle.point3D)return!0;if((null===(i=t.legendStyle.behavior)||void 0===i?void 0:i.colorStep)!==(null===(s=o.legendStyle.behavior)||void 0===s?void 0:s.colorStep))return!0;if((null===(r=t.legendStyle.behavior)||void 0===r?void 0:r.priority)!==(null===(n=o.legendStyle.behavior)||void 0===n?void 0:n.priority))return!0;if(t.legendStyle.lutValue!==o.legendStyle.lutValue)return!0}});return this.ZA=t,e}cg(){this.JA||this.Cn===vd.RightCenter||this.zA.some(t=>{var e;return!!(t.component&&t.component.Ys&&(null===(e=t.component.Ys())||void 0===e?void 0:e.lut)||(t=>!(!t||"object"!=typeof t||!("type"in t)||"lut"!==t.type))(t.component)||t.options.lut)})&&(this.Cn=vd.RightCenter,this.WA=!0)}Er(t,e){var i;if(this.ci)return Zn;if((this.ag()||this.lg())&&(this.WA=!0),this.cg(),!this.WA&&!this.NA)return null!==(i=this.ug)&&void 0!==i?i:Zn;const s=this.sg(t,e),r=this.tg.update(s);return this.ug=r||Zn,this.ug}th(t,e){if(!this.ci&&this.WA){const i=this.sg(t,e);this.tg.plot(i),this.WA=!1}}Sc(t,e){if(void 0===t||!this.zA.some(e=>e.component===t)){if(this.zA.push({component:t,options:l(l({},this.qA),e)}),t instanceof Fa){const e=()=>{this.zs(),this.QA.gi.Bs()},i=()=>{t.removeEventListener("dispose",i),t.removeEventListener("visiblechange",e),this.remove(t),this.QA.gi.Bs()};t.addEventListener("visiblechange",e),t.addEventListener("dispose",i)}return this.WA=!0,this}}dg(){return this.$A}zs(){return this.WA=!0,this}Ag(t){const e=(t=Array.isArray(t)?t:[t]).map(t=>md(t)?this.zA.find(e=>e.component===t):this.zA.find(e=>{var i,s,r;return(null===(i=e.component)||void 0===i?void 0:i.Ys)&&(null===(r=null===(s=e.component)||void 0===s?void 0:s.Ys())||void 0===r?void 0:r.lut)===t})).filter(t=>void 0!==t),i=this.zA.filter(t=>!e.includes(t));return this.zA=[...e,...i],this.WA=!0,this.QA.gi.Bs(),this}add(t,e){return void 0===t&&void 0===e||(t instanceof wd?t.gg().forEach(t=>this.Sc(t,e)):t&&!md(t)?this.Sc({Ys:()=>({lut:t})},e):this.Sc(t,e),this.WA=!0,this.QA.gi.Bs()),this}remove(t){const e=this.zA.find(e=>e.component===t);if(e){const t=this.zA.indexOf(e);this.zA.splice(t,1)}return this.WA=!0,this.QA.gi.Bs(),this}clear(){return this.zA=[],this.WA=!0,this.QA.gi.Bs(),this}dispose(){return this.ci||(this.ci=!0,this.ig(),this.tg.dispose&&this.tg.dispose(),this.WA=!0,this.QA.gi.Bs()),this}setOptions(t){var e,i,s,r,n,o,a,h;return void 0!==t.addEntriesAutomatically&&(this.$A=t.addEntriesAutomatically),void 0!==t.position&&(this.Cn=t.position,this.JA=!0),void 0!==t.orientation&&(this.eg=t.orientation),void 0!==t.padding&&("number"==typeof t.padding?this.On={left:t.padding,right:t.padding,top:t.padding,bottom:t.padding}:this.On={left:null!==(e=t.padding.left)&&void 0!==e?e:0,right:null!==(i=t.padding.right)&&void 0!==i?i:0,top:null!==(s=t.padding.top)&&void 0!==s?s:0,bottom:null!==(r=t.padding.bottom)&&void 0!==r?r:0}),void 0!==t.marginOuter&&("number"==typeof t.marginOuter?this.YA={left:t.marginOuter,right:t.marginOuter,top:t.marginOuter,bottom:t.marginOuter}:this.YA={left:null!==(n=t.marginOuter.left)&&void 0!==n?n:0,right:null!==(o=t.marginOuter.right)&&void 0!==o?o:0,top:null!==(a=t.marginOuter.top)&&void 0!==a?a:0,bottom:null!==(h=t.marginOuter.bottom)&&void 0!==h?h:0}),void 0!==t.entryMargin&&(this.jA=t.entryMargin),void 0!==t.marginInner&&(this.KA=t.marginInner),void 0!==t.renderOnTop&&(this.UA=t.renderOnTop),void 0!==t.title&&(this.Yh=t.title),void 0!==t.titleFont&&(this.hg=t.titleFont),void 0!==t.titleFillStyle&&(this.rg=t.titleFillStyle),void 0!==t.visible&&(this.VA=t.visible),void 0!==t.backgroundVisible&&(this.GA=t.backgroundVisible),void 0!==t.backgroundFillStyle&&(this.ng=t.backgroundFillStyle),void 0!==t.backgroundStrokeStyle&&(this.og=t.backgroundStrokeStyle),void 0!==t.autoHideThreshold&&(this.XA=t.autoHideThreshold),void 0!==t.entries&&(this.qA=l(l({},this.qA),t.entries),this.zA.forEach(t=>{t.options=l(l({},this.qA),t.options)})),this.WA=!0,this.QA.gi.Bs(),this}getOptions(){return{addEntriesAutomatically:this.$A,position:this.Cn,orientation:this.eg,padding:this.On,marginOuter:this.YA,entryMargin:this.jA,marginInner:this.KA,renderOnTop:this.UA,title:this.Yh,titleFont:new Xa(this.hg),titleFillStyle:this.rg,visible:this.VA,backgroundVisible:this.GA,backgroundFillStyle:this.ng,backgroundStrokeStyle:this.og,autoHideThreshold:this.XA,entries:this.qA}}setEntryOptions(t,e){const i=md(t)?this.zA.find(e=>e.component===t):this.zA.find(e=>{var i,s,r;return(null===(i=e.component)||void 0===i?void 0:i.Ys)&&(null===(r=null===(s=e.component)||void 0===s?void 0:s.Ys())||void 0===r?void 0:r.lut)===t});return i&&(i.options=l(l({},i.options),e)),this.WA=!0,this.QA.gi.Bs(),this}getEntryOptions(t){const e=md(t)?this.zA.find(e=>e.component===t):this.zA.find(e=>{var i,s,r;return(null===(i=e.component)||void 0===i?void 0:i.Ys)&&(null===(r=null===(s=e.component)||void 0===s?void 0:s.Ys())||void 0===r?void 0:r.lut)===t});if(e)return e.options}getEntries(){return this.zA}}class Ad{constructor(t,e,i,s,r,n,o,a,h){this.coordsRelative="relative",this.coordsClient="client",this.vg=[],this.Os=[],this.yg=void 0,this.pg=void 0,this.mg=void 0,this.nt=Ps(0,0,0,0),this.Sg=!1,this.ci=!1,this.bg=()=>{this.xg=!0,this.Mg.Bs()},this.wg=t=>e=>{const i=this.vg.indexOf(e);-1!==i&&this.vg.splice(i,1),this.gi.Bs(),t.N()},this.xg=!0,this.background=new Ar,this._g=t,this.kg=i,this.Mg=s,this.removePanel=r,this.bi=e.gi.bi;const l=e.gi._t();this.uiScale=i.d2({scaleXYConstructor:rr}).ti(0,100).ii(0,100).X(l),this.Jf=i.d2({scaleXYConstructor:rr}).ti(0,this.uiScale.x.getCellSize()).ii(0,this.uiScale.y.getCellSize()).X(l),this.engine=e.gi.Cg,this.gi=e.gi.yu,this.ys=this.gi.ys.ps(this,{}),this.Tg=()=>e.Fg("unidentified ui"),this.Ig=e.Pg(),this.Lg=this.Mg.qe(this.uiScale).ih(As(0,0)).X(As(100,100)).Ke(n).Qe(o),this.background.Oi(this.Lg),a?(a.addEventListener("resize",this.bg),this.Bg=()=>a.removeEventListener("resize",this.bg)):(e.gi.R("resize",this.bg),this.Dg=()=>e.gi.V("resize",this.bg));const c=t=>{this.Sg=t.isInView,this.L.D("inviewchanged",{isInView:this.Sg})};e.gi.R("inviewchanged",c),this.Rg=()=>e.gi.V("inviewchanged",c),this.yg=r,this.legend=new Sd(null!=h?h:dd,this,this.Ig,this.Jf),this.Os=[this.legend]}getTheme(){return this.bi}getSizePixels(){return this.Jf.getInnerIntervalPixels()}setBackgroundFillStyle(t){return this.Lg.Ke(t),this.Mg.Bs(),this}getBackgroundFillStyle(){return this.Lg.pr()}setBackgroundStrokeStyle(t){return this.Lg.Qe(t),this.Mg.Bs(),this}getBackgroundStrokeStyle(){return this.Lg.ja()}translateCoordinate(t,e,i){return cd(t,e,i,this.Jf,this.gi)}Eg(t){return this.vg.push(t),this.gi.Bs(),t}addUIElement(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:su,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.uiScale;e=ld(e,this.Jf);const i=this.Tg();return this.Eg(hd(t,i,this.uiScale,e,this.wg(i),this.bi))}dispose(){return this.ci||(this.ci=!0,this.Dg&&this.Dg(),this.Bg&&this.Bg(),Ed(this.uiScale),Ed(this.Jf),this.Rg&&this.Rg(),this.pg&&this.pg(),this.Mg.N(),this.Ig.N(),this.vg.slice().forEach(t=>{t.dispose()}),this.Os.forEach(t=>t.dispose()),this.gi.Bs(),this.yg&&this.yg(this),this.L.D("dispose",{})),this}isDisposed(){return this.ci}saveToFile(t,e,i){return ad(this.engine,t,e,i),this}mn(t){this.nt=t,this.bg()}Y(){return this.Jf.Y(),this.uiScale.Y(),this}j(){return this.Jf.j(),this.uiScale.j(),this}th(t){if(this.xg){const t=this.Mg.gi._t(),e=t.x,i=t.y;this.uiScale.X(e,i),this.Jf.X(e,i);const s=[this.nt.left,this.nt.right],r=[this.nt.bottom,this.nt.top];this.uiScale.Kt(s),this.uiScale.qt(r);const n=this.uiScale.getInnerIntervalPixels();this.Jf.ti(0,n.x).Kt(s).ii(0,n.y).qt(r),this.L.D("resize",{width:n.x,height:n.y,engineHeight:i,engineWidth:e})}this.xg=!1}Og(){for(let t=0;t<this.vg.length;t+=1)this.vg[t].Er().th();this.mg&&this.mg()}zg(t,e){if(t){const i=t(e);this.addEventListener("resize",i.Er.bind(i)),this.pg=i.N.bind(i),this.mg=i.Er.bind(i)}}getIsInView(){return this.Sg}}const Ed=t=>{t.yt&&t.yt()};class kd extends Ad{constructor(t,e,i,s,r,n,o){super(t,e,i,e.Vg("uipanel bg",0),s,e.gi.bi.uiPanelBackgroundFillStyle,e.gi.bi.uiPanelBackgroundStrokeStyle,n),this.L=new Ar,this.legend.setOptions(l({position:vd.LeftTop},o)),this.zg(r,this.Jf)}setMinimumSize(t){return this.Yd=t,this.gi.Bs(),this}getMinimumSize(){return this.Yd}th(t){this.Os.forEach(t=>t.Er(0,Zn)),super.th(t),super.Og(),this.Os.forEach(t=>t.th(0,Zn))}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class wd extends Ad{constructor(t,e,i,s,r,n,o,a,h,l,c,u){super(t,e,i,s,r,n,o,c,u),this.Ng={},this.Rh=!0,this.Gg={left:!1,top:!1,right:!1,bottom:!1},this.title=new Ar,this.$g=e.Ug("chart internal ui",0),this.On=void 0!==this.bi.panelPadding?{left:this.bi.panelPadding,right:this.bi.panelPadding,top:this.bi.panelPadding,bottom:this.bi.panelPadding}:{left:7,right:7,top:7,bottom:7},this.Yh=this.$g.bn(this.uiScale).Jr("Chart").ih(As(50,100)).Yl(As(0,1)).Mr(a).Ke(h).setPointerEvents(!1).Zr(l),this.Yh.Zh=Ta.ChartTitle,this.title.Oi(this.Yh),this.Yg=this.ys.iA([this.Yh]).Ls(this.bi.effectsText)}addLegend(t){var e;let i;(t=l({addEntriesAutomatically:!1,backgroundVisible:!0},t)).addEntriesAutomatically&&this.legend&&(i=this.legend.getEntries());const s=null!==(e=t.customLegend)&&void 0!==e?e:dd,r=new Sd(s,this,this.Ig,this.Jf,i,t);return this.Os.push(r),this.gi.Bs(),r}setAnimationsEnabled(t){return this.Rh=t,this}getAnimationsEnabled(){return this.Rh}setTitle(t){return this.Yh.Jr(t),this.gi.Bs(),this}getTitle(){return this.Yh.qr()}getTitleSize(){return this.Yh.Er().vu()}setTitleFillStyle(t){return this.Yh.Ke(t),this.bg(),this}getTitleFillStyle(){return this.Yh.pr()}setTitleShadow(t){return this.Yh.Zr(t),this.gi.Bs(),this}getTitleShadow(){return this.Yh.El()}setTitleFont(t){return this.Yh.Mr(t),this.bg(),this}getTitleFont(){return this.Yh.br()}setTitleRotation(t){return this.Yh.wr(t),this.gi.Bs(),this}getTitleRotation(){return this.Yh._r()}setTitleEffect(t){return this.Yg.Ls(t),this.gi.Bs(),this}getTitleEffect(){return this.Yg.Ds()}setTitleMargin(t){var e,i;return this.Ng="object"==typeof t?this.Ng?(e=this.Ng,{left:void 0!==(i=t).left?i.left:e.left,top:void 0!==i.top?i.top:e.top,right:void 0!==i.right?i.right:e.right,bottom:void 0!==i.bottom?i.bottom:e.bottom}):t:{left:t,top:t,right:t,bottom:t},this.bg(),this}getTitleMargin(){return this.Ng}Sn(t,e){const i="object"==typeof t?Ls(this.On,t):{left:t,top:t,right:t,bottom:t};return i.bottom===this.On.bottom&&i.left===this.On.left&&i.right===this.On.right&&i.top===this.On.top||(Object.entries(t).forEach(t=>{const i=t[0],s=t[1];void 0===s||!e&&this.Gg[i]||(this.On[i]=s,this.Gg[i]=e)}),this.bg()),this}setPadding(t){return this.Sn("object"==typeof t?t:{left:t,top:t,right:t,bottom:t},!0),this}getPadding(){return this.On}jg(t){const e=t.Hg(),i=null==e?void 0:e.height,s=null==e?void 0:e.width;if(void 0!==i&&void 0!==s)return{x:i/2,y:s/2}}dispose(){return super.dispose(),this.$g.N(),this}}const Md={Wg(t,e){var i,s;return t.pr()!==sa&&0!==t.qr().length&&t.getVisible()?t.Er().vu().y+(null!==(i=e.bottom)&&void 0!==i?i:10)+(null!==(s=e.top)&&void 0!==s?s:10):0},Xg(t,e,i,s,r){var n;const o=r&&r.left?r.left:0,a=r&&r.right?r.right:0,h={x:50,y:100-i.y*(s.top+(null!==(n=e.top)&&void 0!==n?n:10))};t.ih(h).Yl({x:0,y:1}).mn({top:0,bottom:0,right:s.right+(e.right||0)+a,left:s.left+(e.left||0)+o})}};class Cd extends Fa{constructor(t,e,i,s,r){super(t,e,s,r),this.Zg=Oa,this.Jg=!0,this.Qg=!0,this.Kg=!0,this.fs=t,this.qg=i,this.gs=new Map}Ji(t,e,i){const s=null==t?void 0:t.dataPoint;if(s)return l(l({cursorPosition:{resultTable:this.fs.translateCoordinate(e,this.fs.coordsRelative),resultTableScale:this.fs.Jf,axisLocation:s}},s),{},{series:this,axisX:this.fs.getDefaultAxisX(),axisY:this.fs.getDefaultAxisY(),axisZ:this.fs.getDefaultAxisZ()})}setCursorEnabled(t){return this.Jg=t,this}getCursorEnabled(){return this.Jg}setCursorFormattingOverride(t){return this.tv=t,this}getCursorFormattingOverride(){return this.tv}sv(){return this.getCursorEnabled()}setAutoScrollingEnabled(t){return this.Qg=t,this.fs.gi.Bs(),this}getAutoScrollingEnabled(){return this.Qg}setColorShadingStyle(t){return this.Zg=t,this.gs.forEach((e,i)=>i.ev(t)),this.qg.Bs(),this}getColorShadingStyle(){return this.Zg}setDepthTestEnabled(t){return this.Kg=t,this.gs.forEach((e,i)=>i.hv(t)),this.qg.Bs(),this}getDepthTestEnabled(){return this.Kg}rv(){}th(){}nv(){}getXMax(){const t=this.bu;return t?t.Hi():0}getXMin(){const t=this.bu;return t?t.ji():0}getYMax(){const t=this.bu;return t?t.Xi():0}getYMin(){const t=this.bu;return t?t.Wi():0}getZMax(){const t=this.bu;return t?t.pe():0}getZMin(){const t=this.bu;return t?t.ye():0}un(){const t=this.bu;return t?ws(t.oc(),t.ac(),t.ov()):ws(0,0,0)}}class Td extends Cd{constructor(t,e,i,s,r,n){super(t,e,i,s,n),this.Es="Box Series 3D",this.av=.25,this.lv=!1,this.L=new Ar,this.Xe=In(this.bi.boxSeries3DFillStyle,r),this.bu=this.qg.uv().hv(this.Kg).Ke(this.Xe).cv(this.av).Fi(this.getHighlight()),this._s(this.bu)}dv(){return this.lv}invalidateData(t){const e=t.length;if(0===e)return this;this.lv&&this.fs.gi.ka(_l.Lo);const i=t[0];if(!i)return this;let s;if("xMin"in i||"yMin"in i||"zMin"in i||"xMax"in i||"yMax"in i||"zMax"in i){s=[];for(let i=0;i<e;i+=1){const e=t[i],r="xMin"in e&&"xMax"in e,n="yMin"in e&&"yMax"in e,o="zMin"in e&&"zMax"in e;s[i]={color:e.color,value:e.value,id:e.id,xCenter:r?(e.xMin+e.xMax)/2:void 0,yCenter:n?(e.yMin+e.yMax)/2:void 0,zCenter:o?(e.zMin+e.zMax)/2:void 0,xSize:r?e.xMax-e.xMin:void 0,ySize:n?e.yMax-e.yMin:void 0,zSize:o?e.zMax-e.zMin:void 0}}}else s=t;return this.bu.fv(s.slice()),this.fs.gi.Bs(),this.lv=!0,this}setFillStyle(t){return this.Xe="function"==typeof t?t(this.Xe):t,this.bu.Ke(t),this.fs.gi.Bs(),this}getFillStyle(){return this.Xe}setRoundedEdges(t){return void 0!==t&&isNaN(t)&&(console.error("'BoxSeries3D.setRoundedEdges | NaN was supplied.'"),t=void 0),this.av=void 0!==t?Qr(t,0,1):void 0,this.bu.cv(this.av),this.qg.Bs(),this}getRoundedEdges(){return this.av}Av(){return this.Qg&&this.getVisible()}eh(t,e){t.Fi(e),this.fs.gi.Bs()}Ys(){return Ln(this.Xe,this.bu.wi())}th(){super.th(),this.bu.Er(!1)}sh(){return{fill:this.Xe}}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}const Fd=t=>{if(eh(t)){const e=t.getThickness(),i=t.getFillStyle();if(ha(i))return 1===e?ja:new Za({size:e,fillStyle:i,shape:"sphere"})}return ja},Pd={UserSeries:{type:"ApplicationType",args:{type:"UserSeries"}},InternalUI:{type:"ApplicationType",args:{type:"InternalUI"}}};class Bd{constructor(t,e,i,s,r,n,o,a,h,l){this.S=0,this.ui=!0,this.ci=!1,this.li=!0,this.L=new Ar,this.Bs=t,this.gv=e,this.vv=i,this.yv=s,this.pv=r,this.mv=n,this.sf=o,this.Sv=a,this.bv=h,this.oo=l}setValue(t){return t===this.S||(this.S=t,this.Bs(),this.L.D("valuechange",{value:this.S})),this}getValue(){return this.S}setTickStyle(t){return this.vv="function"==typeof t?t(this.vv):t,this.Bs(),this}getTickStyle(){return this.vv}setTickLength(t){return this.yv=t,this.Bs(),this}getTickLength(){return this.yv}setGridStrokeStyle(t){return this.pv="function"==typeof t?t(this.pv):t,this.Bs(),this}getGridStrokeStyle(){return this.pv}setTextPadding(t){return this.mv=t,this.Bs(),this}getTextPadding(){return this.mv}setTextRotation(t){return this.sf=t,this.Bs(),this}getTextRotation(){return this.sf}setTextFillStyle(t){return this.Sv="function"==typeof t?t(this.Sv):t,this.Bs(),this}getTextFillStyle(){return this.Sv}setTextFont(t){return this.bv="function"==typeof t?t(this.bv):t,this.Bs(),this}getTextFont(){return this.bv}setTextFormatter(t){return this.oo=t,this.Bs(),this}dispose(){return this.ci||(this.ci=!0,this.gv(),this.Bs(),this.L.D("dispose",{})),this}isDisposed(){return this.ci}setVisible(t){const e=this.ui!==t;return this.ui=t,e&&(this.L.D("visiblechange",{isVisible:this.ui}),this.Bs()),this}getVisible(){return this.ui}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}setPointerEvents(t){return this.li=t,this.Bs(),this}getPointerEvents(){return this.li}}class Ld extends Bd{constructor(t,e,i,s,r,n,o,a,h,l,c,u,d){super(t,e,i,s,r,n,o,a,h,l),this.ng=c,this.og=u,this.On=d}setBackgroundFillStyle(t){return this.ng="function"==typeof t?t(this.ng):t,this.Bs(),this}getBackgroundFillStyle(){return this.ng}setBackgroundStrokeStyle(t){return this.og="function"==typeof t?t(this.og):t,this.Bs(),this}getBackgroundStrokeStyle(){return this.og}setPadding(t){return this.On="number"==typeof t?{left:t,top:t,right:t,bottom:t}:l(l({},this.On),t),this.Bs(),this}getPadding(){return this.On}}class Dd{constructor(t,e,i,s){this.xv=[],this.Mv=new Map,this.wv=t,this._v=e,this.kv=i,this.nv=s}LA(){this.kv&&this.kv();const t=[];return{add:(e,i)=>{t.push({instanceUniqueProperties:e,instanceSharedProperties:i})},finishPlot:()=>{const e=[];let i=[];t.forEach(t=>{const i=e.find(e=>((t,e)=>{const i=Object.keys(t);for(const s of i)if(t[s]!==e[s])return!1;return!0})(e.sharedProperties,t.instanceSharedProperties));i?i.instances.push(t.instanceUniqueProperties):e.push({sharedProperties:t.instanceSharedProperties,instances:[t.instanceUniqueProperties]})});const s=this.xv.slice(),r=[];e.forEach(t=>{let e=s.shift();e||(e=this.wv(),this.xv.push(e));const n=[],o=e.Cv().slice();t.instances.forEach(t=>{const e=o.shift();n.push(l(l({},t),{},{existingMember:e}))});const a=this._v(e,n,t.sharedProperties);i=Tn(i,a,{canReturnB:!0});for(let i=0;i<t.instances.length;i+=1)r.push({mi:t.instances[i].mi,collection:e,member:a[i]});o.forEach(t=>{null==e||e.Ud(t)})}),s.forEach(t=>{t.dispose();const e=this.xv.indexOf(t);e<0?Rn(0,()=>{}):this.xv.splice(e,1)}),r.forEach(t=>{const e=this.Mv.get(t.mi);e&&t.collection.gi.za({entity:e.collection,collectionMember:e.member},{entity:t.collection,collectionMember:t.member})}),this.Mv.clear(),r.forEach(t=>{this.Mv.set(t.mi,t)}),this.nv&&this.nv(this.xv,i)}}}EA(){this.xv.forEach(t=>{t.dispose()}),this.xv.length=0}}class zd extends El{constructor(t,e,i,s,r,n,o,a,h){super(t,e,i,s,a,{numeric:e.Tv({x:t.gi.bi.xAxis3DNumericTicks,y:t.gi.bi.yAxis3DNumericTicks,z:t.gi.bi.zAxis3DNumericTicks}),datetime:e.Tv({x:t.gi.bi.xAxis3DDateTimeTicks,y:t.gi.bi.yAxis3DDateTimeTicks,z:t.gi.bi.zAxis3DDateTimeTicks}),time:e.Tv({x:t.gi.bi.xAxis3DTimeTicks,y:t.gi.bi.yAxis3DTimeTicks,z:t.gi.bi.zAxis3DTimeTicks})},{type:"linear"}),this.kf=[],this.L=new Ar,this.chart=t,this.qg=r,this.Fv=n,this.Iv=o,this.Pv=this.qg.oi;const l=this.rr.Tv({x:this.bi.xAxis3DStrokeStyle,y:this.bi.yAxis3DStrokeStyle,z:this.bi.zAxis3DStrokeStyle});this.Lv=this.qg.Dv([Pd.InternalUI]).dh(l).Bv(Fd(l)).setPointerEvents(!1),this.Jh=this.Fv.bn(this.Iv).setPointerEvents(!1).Ke(e.Tv({x:t.gi.bi.xAxis3DTitleFillStyle,y:t.gi.bi.yAxis3DTitleFillStyle,z:t.gi.bi.zAxis3DTitleFillStyle})).Mr(e.Tv({x:t.gi.bi.xAxis3DTitleFont,y:t.gi.bi.yAxis3DTitleFont,z:t.gi.bi.zAxis3DTitleFont})).il(3),this.Rv=new ud(()=>this.Fv.bn(this.Iv).il(2).Sn(Zn).mn(Zn)),this.Ev=new Dd(()=>this.Fv.Ov(this.Iv).setPointerEvents(!1).il(1),(t,e,i)=>(t.Ke(i.fillStyle).Qe(i.strokeStyle),e.map(e=>{let{positions:i,existingMember:s}=e;const r=s||t.Go();return r.rc(i),r}))),this.zv=new Dd(()=>this.qg.gA().setPointerEvents(!1),(t,e,i)=>(t.zi().dh(i.lineStyle),e.map(e=>{let{positions:i,existingMember:s}=e;return s||t.Sc(i)}))),this.ys=h,this.kr=this.ys.iA([this.Jh]).Ls(s.effectsText),i.Uf=this}setTickStrategy(t,e){return super.cr(t,e)}getTickStrategy(){return this.Ph}addCustomTick(){const t=new Ld(()=>this.chart.gi.Bs(),()=>{const e=this.kf.indexOf(t);e>=0&&this.kf.splice(e,1)},this.bi.xAxis3DNumericTicks.majorTickStyle.tickStyle,this.bi.xAxis3DNumericTicks.majorTickStyle.tickLength,this.bi.xAxis3DNumericTicks.majorTickStyle.gridStrokeStyle,this.bi.xAxis3DNumericTicks.majorTickStyle.tickPadding,this.bi.xAxis3DNumericTicks.majorTickStyle.labelRotation,this.bi.xAxis3DNumericTicks.majorTickStyle.labelFillStyle,this.bi.xAxis3DNumericTicks.majorTickStyle.labelFont,t=>this.formatValue(t),sa,Lr,{left:4,right:4,top:4,bottom:4});return this.kf.push(t),this.chart.gi.Bs(),t}setStrokeStyle(t){return this.Lv.dh(t).Bv(Fd(this.Lv.ao())),this.chart.gi.Bs(),this}getStrokeStyle(){return this.Lv.ao()}setVisible(t){return super.setVisible(t),this.Lv.setVisible(t),!1===t&&(this.zv.EA(),this.Rv.EA(),this.Ev.EA()),this.qg.Bs(),this}aA(){return this.chart.getSeries()}vn(t,e,i){const s=Math.abs(this.oi.Z(Math.abs(e-t))*this.qg.Vv(1));return{start:t+i.start*s*Math.sign(t-e),end:e+i.end*s*Math.sign(e-t)}}Nr(t){const e=this.Pv,i=ws(e.x.q(),e.y.q(),e.z.q()),{gridlinePositionA:s,gridlinePositionB:r,gridlinePositionC:n}=this.rr.Nv(t.cameraDirection),o=t=>({x:-1===t.x?this.Pv.x.getInnerStart():1===t.x?this.Pv.x.getInnerEnd():0,y:-1===t.y?this.Pv.y.getInnerStart():1===t.y?this.Pv.y.getInnerEnd():0,z:-1===t.z?this.Pv.z.getInnerStart():1===t.z?this.Pv.z.getInnerEnd():0}),a=o(s),h=o(r),l=o(n),c=this.rr.Qd,u=bo(t.start,t.end,.5),d=so.addVec(u,so.multiplyVec(so.multiply(c,-1),i)),f=this.qg.Gv(u)||As(0,0),g=this.qg.Gv(d)||As(0,0);return{center:u,wuSize:i,tickDirection3D:c,tickDirection2D:To(Do(hr(f,this.chart.gi.oi,this.Iv),hr(g,this.chart.gi.oi,this.Iv))),gridlinePositionA:a,gridlinePositionB:h,gridlinePositionC:l}}Yr(t,e,i,s,r){return l(l({},this.$v(r,t,e.Fh.tickLength,e.Fh.tickPadding)),{},{keyValue:t,tickLevel:e,labelText:i,labelOffset:{x:0,y:0},labelRotation:e.Fh.labelRotation})}Qr(t,e){const i=new Id(e,t,this.Fv,this.Iv,this.qg);return i.Dr.il(0),i}Wr(t,e,i){return{ticksInfo:e,updatedTicks:i}}Kh(){return this.Iv}$v(t,e,i,s){const{wuSize:r,start:n,end:o,tickDirection3D:a,tickDirection2D:h}=t,l=(e-this.oi.getInnerStart())/(this.oi.getInnerEnd()-this.oi.getInnerStart()),c=so.addVec(bo(n,o,l),so.multiplyVec(so.multiply(a,this.qg.Vv(.5*this.Lv.ao().getThickness())),r)),u=so.addVec(c,so.multiplyVec(so.multiply(a,this.qg.Vv(i)),r)),d=this.qg.Gv(u)||As(0,0);return{labelPosition:Lo(hr(d,this.chart.gi.oi,this.Iv),Bo(h,s)),labelAlignment:{x:-h.x,y:-h.y},posTickEnd3D:u,posTickStart3D:c,tickPositionRelative:l}}Uv(t,e,i){const{wuSize:s,start:r,end:n,tickDirection3D:o}=e,a=(t-this.oi.getInnerStart())/(this.oi.getInnerEnd()-this.oi.getInnerStart()),h=so.addVec(bo(r,n,a),so.multiplyVec(so.multiply(o,this.qg.Vv(.5*this.Lv.ao().getThickness())),s)),l=so.addVec(h,so.multiplyVec(so.multiply(o,this.qg.Vv(10)),s)),c=this.qg.Gv(h)||As(0,0),u=this.qg.Gv(l)||As(0,0);return this.Fv.fh(this.Iv).gh(c).Ah(u).dh(new th({fillStyle:new aa({color:Vs(120*i)}),thickness:1}))}fn(t,e){return Rd(t,e,this.oi)}Yv(t){const e=this.Pv;let i,s;this.jv()?(i=ws(e.x.getInnerEnd(),e.y.getInnerStart(),e.z.getInnerStart()),s=ws(e.x.getInnerEnd(),e.y.getInnerStart(),e.z.getInnerEnd())):(i=ws(e.x.getInnerStart(),e.y.getInnerStart(),e.z.getInnerStart()),s=this.rr.Hv(ws(e.x.getInnerEnd(),e.y.getInnerEnd(),e.z.getInnerEnd()),i));const r=this.qg.Gv(i)||As(0,0),n=this.qg.Gv(s)||As(0,0);return{cameraDirection:t,physicalAxisSize:Po(Do(r,n)),start:i,end:s,start2D:r,end2D:n}}th(t){if(!this.ui)return;const e=Math.min(this.ur,this.dr),i=Math.max(this.ur,this.dr);this.Lv.zi().Sc([t.start,t.end]);const s=this.zv.LA();for(const[l,f]of this.Lh)for(const[,e]of f){const i=t.ticksInfo.get(e);if(!i)continue;const r=this.Wv(t,i);s.add({mi:0,positions:[r.tickStroke.start,r.tickStroke.end]},{lineStyle:l.Fh.tickStyle}),r.gridStroke&&s.add({mi:0,positions:r.gridStroke},{lineStyle:l.Fh.gridStrokeStyle}),e.Dr.ih(i.labelPosition).Yl(i.labelAlignment).wr(i.labelRotation).Ol(i.labelOffset.x,i.labelOffset.y)}const r=this.Rv.LA(),n=this.Ev.LA(),o={x:0,y:0};this.kf.forEach(a=>{if(!a.ui||a.S<e||a.S>i)return;const h=this.$v(t,a.S,a.yv,a.mv),c=this.Wv(t,h);if(a.Sv!==sa){const t=r.add().ih(h.labelPosition).Yl(h.labelAlignment).Ke(a.Sv).Mr(a.bv).Jr(a.oo(a.S)).wr(a.sf).setPointerEvents(a.li);t.Zh=a.Zh;const e=t.Er()._t();if(o.x=Math.max(o.x,e.x),o.y=Math.max(o.y,e.y),a.ng!==sa){const e=t.fu(),i=[{x:e.min.x-a.On.left,y:e.max.y+a.On.top},{x:e.max.x+a.On.right,y:e.max.y+a.On.top},{x:e.max.x+a.On.right,y:e.min.y-a.On.bottom},{x:e.min.x-a.On.left,y:e.min.y-a.On.bottom}];n.add({mi:0,positions:i},{fillStyle:a.ng,strokeStyle:a.og}),this.Fv.gi.Au&&a.Zh===Ta.CursorTickMarker&&this.Fv.gi.Au.xA(l(l({},this.Fv.gi.Ka(e.min,e.max,t.oi,a.On)),{},{blacklist:[Ta.CursorTickMarker]}))}}s.add({mi:0,positions:[c.tickStroke.start,c.tickStroke.end]},{lineStyle:a.vv}),c.gridStroke&&s.add({mi:0,positions:c.gridStroke},{lineStyle:a.pv})}),r.finishPlot(),n.finishPlot(),s.finishPlot();const a=this.hn((t,e)=>{const i=e.Dr.Er()._t();return t.x=Math.max(t.x,i.x),t.y=Math.max(t.y,i.y),t},{x:o.x,y:o.y}),h=Math.atan((t.end2D.y-t.start2D.y)/(t.end2D.x-t.start2D.x));this.Jh.Yl({x:0,y:0}).wr(180*-h/Math.PI);const c=so.addVec(t.center,so.multiplyVec(so.multiply(t.tickDirection3D,this.qg.Vv(.5*this.Lv.ao().getThickness()+this.nn((t,e)=>Math.max(t,e.tickLength),0))),t.wuSize)),u=this.qg.Gv(c)||As(0,0),d=Lo(hr(u,this.chart.gi.oi,this.Iv),Lo(Lo(zo(a,t.tickDirection2D),Bo(t.tickDirection2D,this.nn((t,e)=>Math.max(t),0))),zo(Bo(this.Jh.Er()._t(),.5),t.tickDirection2D)));this.Jh.ih(d)}Wv(t,e){const{gridlinePositionA:i,gridlinePositionB:s,gridlinePositionC:r}=t,n=e.posTickStart3D,o=e.posTickEnd3D,a=e.tickPositionRelative;let h;return qr(a,0)||qr(a,1)||(h=[this.Xv()?l(l({},i),{},{x:n.x}):this.Zv()?l(l({},i),{},{y:n.y}):this.jv()?l(l({},i),{},{z:n.z}):{x:0,y:0,z:0},this.Xv()?l(l({},s),{},{x:n.x}):this.Zv()?l(l({},s),{},{y:n.y}):this.jv()?l(l({},s),{},{z:n.z}):{x:0,y:0,z:0},this.Xv()?l(l({},r),{},{x:n.x}):this.Zv()?l(l({},r),{},{y:n.y}):this.jv()?l(l({},r),{},{z:n.z}):{x:0,y:0,z:0}]),{gridStroke:h,tickStroke:{start:n,end:o}}}Jv(t){const e=this.ur,i=this.dr,s=.01*t*(i-e),r=e+s,n=i+s;this.Pr(r,n,{allowIntervalLengthChange:!1,skipIntervalRestriction:!1})}Qv(t,e,i){if(0===e)return;i<0&&(e*=-1,i*=-1);const s=this.dr-this.ur,r=s*(e>=1?1+.02*i:1-.02*i)-s;"centered"===t?this.Pr(this.ur+r/2,this.dr-r/2,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1}):"keep-start"===t?this.Pr(this.ur,this.dr-r/2,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1}):"keep-end"===t&&this.Pr(this.ur+r/2,this.dr,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1})}Cr(){super.Cr(),this.zv.EA(),this.Rv.EA(),this.Ev.EA()}Xv(){return this.rr.Xv()}Zv(){return this.rr.Zv()}jv(){return this.rr.jv()}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}setPointerEvents(t){return this.L.setPointerEvents(t),this}getPointerEvents(){return this.L.getPointerEvents()}}class Id extends kl{constructor(t,e,i,s,r,n){super(t,e,i,s,n),this.Kv=r}}const Rd=(t,e,i)=>Qr(t+.1*(e-t)+Math.abs(i.q())/100*Math.sign(e-t),Math.min(t,e),Math.max(t,e)),_d=(t,e,i,s)=>({an:i=>{const s=t();let r;for(const t of s){if(!t.Av())continue;const s=e(t,i);r=void 0===s?r:void 0!==r?Math.min(r,s):s}return r},ln:e=>{const s=t();let r;for(const t of s){if(!t.Av())continue;const s=i(t,e);r=void 0===s?r:void 0!==r?Math.max(r,s):s}return r},un:()=>{const e=t();let i;for(const t of e){if(!t.Av())continue;const e=s(t);i=void 0===e?i:void 0!==i?Math.max(i,e):e}return i}}),Vd=t=>l(l({},_d(t,t=>t.getYMin(),t=>t.getYMax(),t=>t.un().y)),{},{Tv:t=>t.y,Hv:(t,e)=>({x:e.x,y:t.y,z:e.z}),Qd:ws(-1,0,0),Nv:t=>{const e={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:ws(e.x,0,e.z),gridlinePositionB:ws(e.x,0,-e.z),gridlinePositionC:ws(-e.x,0,-e.z)}},Xv:()=>!1,Zv:()=>!0,jv:()=>!1}),Nd=t=>l(l({},_d(t,t=>t.getZMin(),t=>t.getZMax(),t=>t.un().z)),{},{Tv:t=>t.z,Hv:(t,e)=>({x:e.x,y:e.y,z:t.z}),Qd:ws(1,0,0),Nv:t=>{const e={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:ws(e.x,-e.y,0),gridlinePositionB:ws(e.x,e.y,0),gridlinePositionC:ws(-e.x,e.y,0)}},Xv:()=>!1,Zv:()=>!1,jv:()=>!0});class Od extends Cd{constructor(t,e,i,s,r){super(t,e,i,s,r),this.lv=!1,this.L=new Ar}dv(){return this.getPointAmount()>0}setStrokeStyle(t){this.iu="function"==typeof t?t(this.iu):t;const e=this.iu;return this.bu.dh(e),this.qg.Bs(),this}getStrokeStyle(){return this.iu}add(t){return this.lv&&this.fs.gi.ka(_l.Lo),this.lv=!0,(t=Array.isArray(t)?t:[t])?(this.bu.Sc(t.slice()),this.qg.Bs(),this):this}clear(){return this.bu.zi(),this}getPointAmount(){const t=this.bu;return t._c()+t.kc()}Av(){return this.Qg&&this.getPointAmount()>0&&this.getVisible()}eh(t,e){t.Fi(e),this.qg.Bs()}sh(){return{stroke:this.iu}}Ys(){return Ln(this.iu.getFillStyle(),this.bu.wi())}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class Yd extends Od{constructor(t,e,i,s,r,n){super(t,e,i,s,n),this.Es="Line Series 3D",this.iu=In(s.lineSeries3DStrokeStyle,r),this.qv=$l.pointStyle3D,this.ty(this.iu),this.bu=this.qg.Dv([Pd.UserSeries]).hv(this.Kg).dh(this.iu).Bv(this.qv).Fi(this.getHighlight()),this._s(this.bu)}setStrokeStyle(t){super.setStrokeStyle(t),this.ty(this.iu);const e=this.qv;return this.bu.Bv(e),this}ty(t){const e=new Ka.Triangulated({shape:"sphere",fillStyle:t.getFillStyle(),size:t.getThickness()});this.qv=e}}class Gd extends Od{constructor(t,e,i,s,r,n){super(t,e,i,s,n),this.Es="Point Line Series 3D",this.qv=In(s.pointLineSeries3DPointStyle,r),this.iu=In(s.lineSeries3DStrokeStyle,r),this.iy(),this.bu=this.qg.Dv([Pd.UserSeries]).hv(this.Kg).dh(this.iu).Bv(this.qv).Fi(this.getHighlight()),this._s(this.bu)}setPointStyle(t){return this.qv="function"==typeof t?t(this.qv):t,this.iy(),this.bu.Bv(this.qv),this.qg.Bs(),this}getPointStyle(){return this.qv}setStrokeStyle(t){super.setStrokeStyle(t);const e=this.iu,i=Math.abs(e.getThickness()),s=this.qv,r=s.getSize();i>("object"==typeof r?Math.max(r.x,r.y,r.z):r)&&(this.qv=s.setSize(i)),this.iy();const n=this.qv;return this.bu.Bv(n),this.qg.Bs(),this}Ys(){return Ln(this.iu.getFillStyle(),this.bu.wi())||Ln(this.qv.getFillStyle(),this.bu.wi())}iy(){const t=this.qv,e=t.getSize();this.qv=t.setSize(e)}eh(t,e){t.Fi(e),this.qg.Bs()}}class Xd extends Cd{constructor(t,e,i,s,r,n){super(t,e,i,s,r),this.lv=!1,this.L=new Ar,((null==n?void 0:n.individualPointSizeAxisEnabled)||(null==n?void 0:n.individualPointSizeEnabled))&&this.fs.gi.ka(_l.Bo)}dv(){return this.getPointAmount()>0}add(t){return this.lv&&this.fs.gi.ka(_l.Lo),this.lv=!0,(t=Array.isArray(t)?t:[t])?(this.bu.Sc(t.slice()),this.qg.Bs(),this):this}clear(){return this.bu.zi(),this}getPointAmount(){const t=this.bu;return t._c()+t.kc()}Av(){return this.Qg&&this.getPointAmount()>0&&this.getVisible()}eh(t,e){t.Fi(e),this.qg.Bs()}sh(){return{point3D:this.sy}}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class Ud extends Xd{constructor(t,e,i,s,r,n){super(t,e,i,s,r,n),this.Es="Point Series 3D";const o=void 0!==(null==n?void 0:n.automaticColorIndex)?n.automaticColorIndex:this.fs.getSeries().length;this.sy=In(s.pointSeries3DPointStyle,o);const a=l({individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1},n);this.bu=this.qg.hy(a).hv(this.Kg).ey(this.sy).Fi(this.getHighlight()),this._s(this.bu)}setPointStyle(t){this.sy="function"==typeof t?t(this.sy):t;const e=this.sy;return this.bu.ey(e),this.qg.Bs(),this}getPointStyle(){return this.sy}Ys(){return Ln(this.sy.getFillStyle(),this.bu.wi())}}class Hd extends wd{constructor(t,e,i,s,r,n,o,a,h,l,c,u){super(t,e,i,s,r,n,o,a,h,l,c,u),this.ny=[],this.oy=0,this.ly=t=>{const e=this.ny.indexOf(t);e>=0&&(this.ny.splice(e,1),this.L.D("seriesdispose",{series:t}))},this.seriesBackground=new Ar,this.uy=this.ys.iA()}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.ny.forEach(e=>e.setAnimationHighlight(t)),this}Ay(t,e){this.uy.ks([e]),this.seriesBackground.Oi(t)}setSeriesBackgroundFillStyle(t){return this.gy.Ke(t),this.gi.Bs(),this}getSeriesBackgroundFillStyle(){return this.gy.pr()}setSeriesBackgroundStrokeStyle(t){return this.vy.Qe(t),this.gi.Bs(),this}getSeriesBackgroundStrokeStyle(){return this.vy.ja()}setSeriesBackgroundEffect(t){return this.uy.Ls(t),this.gi.Bs(),this}getSeriesBackgroundEffect(){return this.uy.Ds()}yy(t,e){this.ny.push(t),void 0!==this.py&&t.setHighlightOnHover(this.py),this.L.D("seriesadd",{series:t}),this.Os.forEach(i=>{i.dg()&&null!==(null==e?void 0:e.legend)&&i.Sc(t,null==e?void 0:e.legend)})}gg(){return this.ny}setSeriesHighlightOnHover(t){return this.py=t,this.ny.forEach(e=>e.setHighlightOnHover(t)),this}dispose(){return this.ny.slice().forEach(Zr),super.dispose()}}const jd=so.normalize({x:-.5610788649579117,y:-.35242840511865414,z:-1.1349149375849081});class Wd{constructor(t,e,i,s){this.my=!0,this.Sy=!0,this.by=2*-Math.PI/2160,this.xy=2*Math.PI/2160,this.My=.1,this.wy=1*Math.PI/180,this._y=t,this.ky=e,this.Cy=i,this.Gv=s}getDefaultCameraConfiguration(t,e){const i={direction:jd,location:so.multiply(jd,-1)};return this.cameraLocationChanged({boundingBox:t,cameraDirection:i.direction,cameraLocation:i.location,projection:e})||i}applyCameraInteractions(t,e){let i={direction:t.cameraDirection,location:t.cameraLocation};return e.forEach(t=>{"rotate"===t.type?i=this.Ty(i,t):"wheel-zoom"===t.type?i=this.Fy(i,t):"rotate+zoom"===t.type?i=this.Iy(i,t):"fixed-rotate"===t.type?i=this.Py(i,t):"move"===t.type&&(i=this.Ly(i,t))}),this.my?i=this.By(t.boundingBox,i):this.Sy&&(i=this.Dy(t.boundingBox,t.projection,i)),i}Ty(t,e){const{rotation:i}=e,s=t.location,r=so.multiply(so.normalize(t.location),-1),{Right:n,Up:o}=this.Ry(r);let a=s;const h=this.Ey(r),l=i.x*this.by*h;a=so.rotateAroundAxis(a,o,l);const c=(i.y>0?1:-1)*Math.min(Math.abs(i.y)*this.xy,h-this.wy);return 0!==c&&(a=so.rotateAroundAxis(a,n,c)),{location:a,direction:so.multiply(so.normalize(a),-1)}}Fy(t,e){const{deltaY:i}=e;this.my&&this.Oy(!1);const s=t.location,r=so.multiply(so.normalize(s),-1),n=i*this.My,o=so.length(s)*-n;return{direction:r,location:so.addVec(s,so.multiply(r,o))}}Iy(t,e){const{rotation:i,cameraDistance:s}=e;this.my&&this.Oy(!1);let r=this.Ty(t,{type:"rotate",rotation:i});const n=r.location,o=so.multiply(so.normalize(n),-1),a=so.multiply(o,-s);return r={direction:so.multiply(so.normalize(a),-1),location:a},r}Py(t,e){this.my&&this.Oy(!1);const{rotation:i}=e,s=t.location,r=t.direction,{Right:n,Up:o}=this.Ry(r),a=i.x*this.by;let h=so.normalize(so.rotateAroundAxis(r,o,a));const l=i.y*this.xy;return h=so.normalize(so.rotateAroundAxis(h,n,l)),{location:s,direction:h}}Ly(t,e){this.my&&this.Oy(!1),this.Sy=!1;const{amountRight:i,amountForward:s}=e,r=t.location,n=t.direction,{Right:o}=this.Ry(n);return{location:so.addVec(r,so.multiply(n,.01*s),so.multiply(o,.01*i)),direction:n}}projectionChanged(t,e){return this.viewportChanged(t)}boundingBoxChanged(t){const e={location:t.cameraLocation,direction:so.multiply(so.normalize(t.cameraLocation),-1)};return this.my?this.By(t.boundingBox,e):this.Dy(t.boundingBox,t.projection,e)}cameraLocationChanged(t){const e={location:t.cameraLocation,direction:so.multiply(so.normalize(t.cameraLocation),-1)};return this.my?this.By(t.boundingBox,e):this.Dy(t.boundingBox,t.projection,e)}viewportChanged(t){const e={location:t.cameraLocation,direction:so.multiply(so.normalize(t.cameraLocation),-1)};if(this.my)return this.By(t.boundingBox,e)}By(t,e,i){let s=e;i=void 0!==i?i:0,s=this.zy(t,s,100,20,1,i,5);const r=this.Ey(s.direction);return s=this.Vy(s,this.Ny(t,s,100,1),r),s}zy(t,e,i,s,r,n,o){return Zd(n,o,t=>({direction:e.direction,location:so.multiply(e.direction,-t)}),e=>this.Gy(t,e),i,r,"linear",s)}Ny(t,e,i,s){const{Right:r,Left:n,Up:o,Down:a}=this.Ry(e.direction),h=this.$y(t,!1,e);let l=e;const c=s,u=.1;return Math.abs(h.bottom-h.top)>c&&(l=h.bottom<h.top?Jd(0,u,t=>({location:l.location,direction:so.normalize(so.lerp(l.direction,a,t))}),e=>this.Uy(t,e),0,c,!0,i):Jd(0,u,t=>({location:l.location,direction:so.normalize(so.lerp(l.direction,o,t))}),e=>this.Uy(t,e),0,c,!0,i)),Math.abs(h.left-h.right)>c&&(l=h.left<h.right?Jd(0,u,t=>({location:l.location,direction:so.normalize(so.lerp(l.direction,n,t))}),e=>this.Yy(t,e),0,c,!0,i):Jd(0,u,t=>({location:l.location,direction:so.normalize(so.lerp(l.direction,r,t))}),e=>this.Yy(t,e),0,c,!0,i)),l}Gy(t,e){const i=this.$y(t,!0,e);return Math.min(i.left+i.right,i.top+i.bottom)}Yy(t,e){const i=this.$y(t,!1,e);return Math.abs(i.left-i.right)}Uy(t,e){const i=this.$y(t,!1,e);return Math.abs(i.top-i.bottom)}$y(t,e,i){const s=So(this.jy(t,e,i).map(t=>hr(t,this._y,this.ky)));return{left:s.min.x,right:this.ky.x.getInnerEnd()-s.max.x,top:this.ky.y.getInnerEnd()-s.max.y,bottom:s.min.y}}jy(t,e,i){const s=this.Cy,r=ws(s.x.getInnerStart(),s.y.getInnerStart(),s.z.getInnerStart()),n=ws(s.x.getInnerEnd(),s.y.getInnerEnd(),s.z.getInnerEnd()),o=[],a=e?16:4,h=(r.x+n.x)/2,l=(r.z+n.z)/2,c=Math.sqrt(2)*(n.x-h),u=Math.sqrt(2)*(n.z-l);return[r.y,n.y].forEach(t=>{for(let e=0;e<a;e+=1){const i=Math.PI/4+2*Math.PI*e/a,s=h+Math.cos(i)*c,r=l+Math.sin(i)*u;o.push({x:s,y:t,z:r})}}),o.map(t=>this.Gv(t,i)).filter(t=>void 0!==t)}Dy(t,e,i){const s=so.length(i.location),r=this.Hy(t,e);return s<r.min?{direction:i.direction,location:so.multiply(i.direction,-r.min)}:s>r.max?{direction:i.direction,location:so.multiply(i.direction,-r.max)}:i}Hy(t,e){return{min:("perspective"===e?.8:.5)*Math.sqrt(t.x**2+t.y**2+t.z**2),max:3*Math.sqrt(t.x**2+t.y**2+t.z**2)}}Ry(t){const e=ws(0,1,0),i=so.normalize(so.cross(e,so.multiply(t,-1)));let s=so.cross(i,t);return s.y=Math.abs(s.y),s=so.normalize(s),{Right:i,Up:s,Down:so.multiply(s,-1),Left:so.multiply(i,-1)}}Ey(t){const e={x:0,y:1,z:0},i=so.angle(t,e),s=so.angle(t,so.multiply(e,-1));return Math.min(i,s)}Vy(t,e,i){return{location:so.lerp(t.location,e.location,i),direction:so.normalize(so.lerp(t.direction,e.direction,i))}}Oy(t){return this.my=t,this}Wy(){return this.my}}const Zd=(t,e,i,s,r,n,o,a)=>{let h,l=0,c=(e+t)/2;do{const a=i(c);if(h={value:c,result:a,score:s(a)},Math.abs(h.score-r)<=n)break;const u=h.score>r;u&&"linear"===o||!u&&"reversed"===o?(c=(h.value+t)/2,e=h.value):(c=(h.value+e)/2,t=h.value),l+=1}while(l<a);return h.result},Jd=(t,e,i,s,r,n,o,a)=>{let h,l=0,c=t;do{const u=i(c),d=s(u);if(void 0===h||Math.abs(d-r)<Math.abs(h.score-r)){if(h={value:c,result:u,score:s(u)},Math.abs(h.score-r)<=n)break}else if(o)break;l+=1,c+=1/(a-1)*(e-t)}while(l<a);return h.result};class qd extends Cd{constructor(t,e,i,s,r,n){super(t,e,i,r,n),this.Es="Surface Grid Series 3D",this.Xy={},this.lv=!1,this.L=new Ar,this.Zg=Va;const o=void 0!==(null==s?void 0:s.automaticColorIndex)?s.automaticColorIndex:this.fs.getSeries().length;this.Xe=In(this.bi.surfaceGridSeries3DFillStyle,o),this.Zy=In(this.bi.surfaceGridSeries3DWireframeStyle,o);const a={heatmapDataType:"intensity",dataOrder:s.dataOrder||"columns",columns:s.columns,rows:s.rows};this.Fa=a,this.bu=this.qg.Qy(a).Ke(this.Xe).Jy(this.Zy).ev(this.Zg).Fi(this.getHighlight()),this._s(this.bu),this.setHighlightOnHover(!1)}dv(){return this.lv}Ji(t,e,i){const s=null==t?void 0:t.dataPoint;if(s)return l(l({cursorPosition:{resultTable:this.fs.translateCoordinate(e,this.fs.coordsRelative),resultTableScale:this.fs.Jf,axisLocation:s}},s),{},{series:this,axisX:this.fs.getDefaultAxisX(),axisY:this.fs.getDefaultAxisY(),axisZ:this.fs.getDefaultAxisZ(),lut:fa(this.Xe)?this.Xe.lut:void 0})}sh(){return{fill:this.Xe}}Ky(){const t=this.Xy.start||{x:0,z:0};let e;e=this.Xy.end?{x:(this.Xy.end.x-t.x)/this.Fa.columns,z:(this.Xy.end.z-t.z)/this.Fa.rows}:this.Xy.step?this.Xy.step:{x:1,z:1},this.bu.qy(t,e),this.fs.gi.Bs()}setStart(t){return this.Xy.start=t,this.Ky(),this}getStart(){return this.bu.tp().start}setStep(t){return this.Xy.step=t,this.Ky(),this}getStep(){return this.bu.tp().step}setEnd(t){return this.Xy.end=t,this.Ky(),this}getEnd(){return this.bu.tp().end}setFillStyle(t){return this.Xe="function"==typeof t?t(this.Xe):t,this.bu.Ke(this.Xe),this.qg.Bs(),this}getFillStyle(){return this.Xe}setWireframeStyle(t){return this.Zy="function"==typeof t?t(this.Zy):t,this.bu.Jy(this.Zy),this.qg.Bs(),this}getWireframeStyle(){return this.bu.ip()}setIntensityInterpolation(t){return t=t||"disabled",this.bu.sp(t),this.qg.Bs(),this}getIntensityInterpolation(){return this.bu.ep()}invalidateIntensityValues(t){if(this.lv&&this.fs.gi.ka(_l.Lo),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const e={x:t.length,y:t[0].length,columns:"columns"===this.Fa.dataOrder?t.length:t[0].length,rows:"rows"===this.Fa.dataOrder?t.length:t[0].length},i="columns"===this.Fa.dataOrder?this.Fa.columns:this.Fa.rows,s="columns"===this.Fa.dataOrder?this.Fa.rows:this.Fa.columns;if(e.x>i||e.y>s){if(!0===this.fs._g.Ia){const t="SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ".concat(this.Fa.columns,"x").concat(this.Fa.rows,", input ").concat(e.columns,"x").concat(e.rows,".\n    Excess data will be automatically clipped. This can result in sub-optimal performance.");Ur.console.warn(t)}const r=[];for(let e=0;e<i;e+=1)r[e]=t[e].slice(0,s);t=r}this.bu.hp({type:"intensity",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const e={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Fa.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Fa.dataOrder?t.values.length:t.values[0].length};let i="columns"===this.Fa.dataOrder?t.iColumn:t.iRow;const s=i+e.primary-1;let r="columns"===this.Fa.dataOrder?t.iRow:t.iColumn;const n=r+e.secondary-1,o=("columns"===this.Fa.dataOrder?this.Fa.columns:this.Fa.rows)-1,a=("columns"===this.Fa.dataOrder?this.Fa.rows:this.Fa.columns)-1;if(i<0||r<0||s>o||n>a){if(!0===this.fs._g.Ia){const i="SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ".concat(this.Fa.columns,"x").concat(this.Fa.rows,", input ").concat(e.columns,"x").concat(e.rows," starting at [").concat(t.iColumn,",").concat(t.iRow,"].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.");Ur.console.warn(i)}const h=Math.max(-i,0),l=Math.max(-r,0),c=Math.max(s-o,0),u=Math.max(n-a,0),d=e.primary-(h+c),f=[];if(0===l&&0===u)for(let e=0;e<d;e+=1)f[e]=t.values[h+e];else for(let e=0;e<d;e+=1)f[e]=t.values[h+e].slice(l,0===u?void 0:-u);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},i=Math.max(i,0),r=Math.max(r,0)}this.bu.hp({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:i,startSecondary:r,values:t.values})}return this.qg.Bs(),this.lv=!0,this}invalidateHeightMap(t){if(this.lv&&this.fs.gi.ka(_l.Lo),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const e={x:t.length,y:t[0].length,columns:"columns"===this.Fa.dataOrder?t.length:t[0].length,rows:"rows"===this.Fa.dataOrder?t.length:t[0].length},i="columns"===this.Fa.dataOrder?this.Fa.columns:this.Fa.rows,s="columns"===this.Fa.dataOrder?this.Fa.rows:this.Fa.columns;if(e.x>i||e.y>s){if(!0===this.fs._g.Ia){const t="SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ".concat(this.Fa.columns,"x").concat(this.Fa.rows,", input ").concat(e.columns,"x").concat(e.rows,".\n    Excess data will be automatically clipped. This can result in sub-optimal performance.");Ur.console.warn(t)}const r=[];for(let e=0;e<i;e+=1)r[e]=t[e].slice(0,s);t=r}this.bu.rp({type:"y",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const e={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Fa.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Fa.dataOrder?t.values.length:t.values[0].length};let i="columns"===this.Fa.dataOrder?t.iColumn:t.iRow;const s=i+e.primary-1;let r="columns"===this.Fa.dataOrder?t.iRow:t.iColumn;const n=r+e.secondary-1,o=("columns"===this.Fa.dataOrder?this.Fa.columns:this.Fa.rows)-1,a=("columns"===this.Fa.dataOrder?this.Fa.rows:this.Fa.columns)-1;if(i<0||r<0||s>o||n>a){if(!0===this.fs._g.Ia){const i="SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ".concat(this.Fa.columns,"x").concat(this.Fa.rows,", input ").concat(e.columns,"x").concat(e.rows," starting at [").concat(t.iColumn,",").concat(t.iRow,"].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.");Ur.console.warn(i)}const h=Math.max(-i,0),l=Math.max(-r,0),c=Math.max(s-o,0),u=Math.max(n-a,0),d=e.primary-(h+c),f=[];if(0===l&&0===u)for(let e=0;e<d;e+=1)f[e]=t.values[h+e];else for(let e=0;e<d;e+=1)f[e]=t.values[h+e].slice(l,0===u?void 0:-u);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},i=Math.max(i,0),r=Math.max(r,0)}this.bu.rp({type:"y",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:i,startSecondary:r,values:t.values})}return this.qg.Bs(),this.lv=!0,this}setCullMode(t){return this.bu.np("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.bu.op()}Ys(){return Ln(this.Xe,this.bu.wi())}rv(){}th(){}nv(){}Av(){return this.Qg&&this.getVisible()}eh(t,e){t.Fi(e),this.qg.Bs()}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class Qd extends Cd{constructor(t,e,i,s,r,n){super(t,e,i,r,n),this.Es="Surface Grid Series 3D",this.lv=!1,this.Xy={},this.L=new Ar,this.fs.gi.ka(_l.Lo),this.Zg=Va;const o=void 0!==(null==s?void 0:s.automaticColorIndex)?s.automaticColorIndex:this.fs.getSeries().length;this.Xe=In(this.bi.surfaceScrollingGridSeries3DFillStyle,o),this.Zy=In(this.bi.surfaceScrollingGridSeries3DWireframeStyle,o);const a={heatmapDataType:"intensity",scrollDimension:s.scrollDimension||"columns",columns:s.columns,rows:s.rows};this.Fa=a,this.bu=this.qg.ap(a).Ke(this.Xe).Jy(this.Zy).ev(this.Zg).Fi(this.getHighlight()),this._s(this.bu),this.setHighlightOnHover(!1)}dv(){return this.lv}Ji(t,e,i){const s=null==t?void 0:t.dataPoint;if(s)return l(l({cursorPosition:{resultTable:this.fs.translateCoordinate(e,this.fs.coordsRelative),resultTableScale:this.fs.Jf,axisLocation:s}},s),{},{series:this,axisX:this.fs.getDefaultAxisX(),axisY:this.fs.getDefaultAxisY(),axisZ:this.fs.getDefaultAxisZ(),lut:fa(this.Xe)?this.Xe.lut:void 0})}Ky(){const t=this.Xy.start||{x:0,z:0};let e;e=this.Xy.step?this.Xy.step:{x:1,z:1},this.bu.qy(t,e),this.fs.gi.Bs()}setStart(t){return this.Xy.start=t,this.Ky(),this}getStart(){return this.bu.tp().start}setStep(t){return this.Xy.step=t,this.Ky(),this}getStep(){return this.bu.tp().step}setFillStyle(t){return this.Xe="function"==typeof t?t(this.Xe):t,this.bu.Ke(this.Xe),this.qg.Bs(),this}getFillStyle(){return this.Xe}setWireframeStyle(t){return this.Zy="function"==typeof t?t(this.Zy):t,this.bu.Jy(this.Zy),this.qg.Bs(),this}getWireframeStyle(){return this.bu.ip()}setIntensityInterpolation(t){return t=t||"disabled",this.bu.sp(t),this.qg.Bs(),this}getIntensityInterpolation(){return this.bu.ep()}clear(){return this.bu.zi(),this.qg.Bs(),this}addValues(t){if(!t)return this;let e=t.yValues,i=t.intensityValues;if(!e&&!i)return this;if(e&&0===e.length&&(e=void 0),i&&0===i.length&&(i=void 0),this.lv=!0,e){const t=e[0].length,i=0+t-1,s="columns"===this.Fa.scrollDimension?this.Fa.rows:this.Fa.columns;if(i>s-1){if(!0===this.fs._g.Ia){const e="SurfaceScrollingGridSeries3D.addValues input yValues overflow.\nGrid was created with ".concat(s," ").concat("columns"===this.Fa.scrollDimension?"rows":"columns",", input yValues have ").concat(t,".\nExcess data will be automatically clipped. This can result in sub-optimal performance.");Ur.console.warn(e)}const i=[];for(let t=0;t<e.length;t+=1)i[t]=e[t].slice(0,s+1);e=i}}if(i){const t=i[0].length,e=0+t-1,s="columns"===this.Fa.scrollDimension?this.Fa.rows:this.Fa.columns;if(e>s-1){if(!0===this.fs._g.Ia){const e="SurfaceScrollingGridSeries3D.addValues intensityValues overflow.\nGrid was created with ".concat(s," ").concat("columns"===this.Fa.scrollDimension?"rows":"columns",", input intensityValues have ").concat(t,".\nExcess data will be automatically clipped. This can result in sub-optimal performance.");Ur.console.warn(e)}const e=[];for(let t=0;t<i.length;t+=1)e[t]=i[t].slice(0,s+1);i=e}}if(e&&i){const t=e.length,s=i.length;if(t!==s){if(!0===this.fs._g.Ia){const e="SurfaceScrollingGridSeries3D.addValues input yValues and intensityValues size does not match.\nyValues: ".concat(t,"\nintensityValues: ").concat(s,"\nData will be automatically clipped according to the smaller supplied sample. This can result in sub-optimal performance.");Ur.console.warn(e)}t>s?e=e.slice(0,s):i=i.slice(0,t)}}const s=e?e.length:null==i?void 0:i.length,r=e?e[0].length:null==i?void 0:i[0].length;return this.bu.lp({startPrimary:0,startSecondary:0,lengthPrimary:s,lengthSecondary:r,heightMapValues:e,intensityValues:i}),this.qg.Bs(),this}invalidateValues(t){return this.bu.hp(t),this.fs.gi.Bs(),this}getSampleCount(){return this.bu.cp()}setCullMode(t){return this.bu.np("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.bu.op()}Ys(){return Ln(this.Xe,this.bu.wi())}rv(){}th(){}nv(){}Av(){return this.Qg&&this.getVisible()}eh(t,e){t.Fi(e),this.qg.Bs()}sh(){return{fill:this.Xe}}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}const Kd=t=>!!(t&&"object"==typeof t&&"id"in t&&"chart"in t&&t.chart instanceof mf),$d=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y&&"z"in t&&"number"==typeof t.z),tf=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/\s+/g;return Array.from(t.split(e).map(parseFloat))},ef=t=>{if(t.length<=3)return t;const e=new Array;for(let i=1;i<t.length-1;i+=1)e.push(t[0]),e.push(t[i]),e.push(t[i+1]);return e},sf=t=>{const e=t.split(/\s+/g);let i=[],s=[],r=[];for(const n of e){const t=tf(n.trim(),"/");i.push(t[0]),t.length>1&&!Number.isNaN(t[1])&&r.push(t[1]),t.length>2&&!Number.isNaN(t[2])&&s.push(t[2])}return i=ef(i),r=ef(r),s=ef(s),{vertexIndex:i,textureIndex:r||void 0,normalIndex:s||void 0}},rf={id:"",ambient:Rs(0,0,0,0),diffuse:Rs(254,204,0),emissive:Rs(0,0,0,0),specular:Rs(255,255,255),specularCoeff:1,opacity:1};class nf extends Cd{constructor(t,e,i,s,r,n){super(t,e,i,s,n),this.Es="Mesh Model 3D",this.up=new Float32Array,this.dp=new Float32Array,this.fp=new Uint16Array,this.oi={x:1,y:1,z:1},this.Ap={x:0,y:0,z:0},this.gp={x:0,y:0,z:0},this.vp={x:0,y:0,z:0},this.yp={w:1,x:0,y:0,z:0},this.pp={x:0,y:0,z:0},this.mp=new Array,this.Sp=[],this.sc=ao,this.L=new Ar;const o=void 0!==(null==r?void 0:r.automaticColorIndex)?r.automaticColorIndex:this.fs.getSeries().length;this.bu=this.qg.bp().hv(this.Kg).Ke(In(this.bi.meshModel3DFillStyle||this.bi.pointSeriesFillStyle,o)).Fi(this.getHighlight()),this._s(this.bu)}dv(){return this.up.length>0}Ji(t,e,i){const s=this.getFillStyle();return Qn({series:this,axisX:this.fs.getDefaultAxisX(),axisY:this.fs.getDefaultAxisY(),axisZ:this.fs.getDefaultAxisZ(),lut:fa(s)?s.lut:void 0},{cursorPosition:0,index:0,x:0,y:0,z:0,value:0,coordAxis:0,coordModel:0},()=>{const i=this.bu.xp(t,e);if(i)return l(l({cursorPosition:{resultTable:this.fs.translateCoordinate(e,this.fs.coordsRelative),resultTableScale:this.fs.Jf,axisLocation:i.coordAxis}},i.coordAxis),{},{index:i.index,value:i.value,coordAxis:i.coordAxis,coordModel:i.coordModel,series:this,axisX:this.fs.getDefaultAxisX(),axisY:this.fs.getDefaultAxisY(),axisZ:this.fs.getDefaultAxisZ(),lut:fa(s)?s.lut:void 0})})}setModelGeometry(t){const{indices:e,vertices:i,normals:s}=t;let r=no,n=ro,o=no,a=ro,h=no,l=ro;for(let d=0;d<i.length;d+=3){const t=i[d],e=i[d+1],s=i[d+2];r=Math.max(r,t),n=Math.min(n,t),o=Math.max(o,e),a=Math.min(a,e),h=Math.max(h,s),l=Math.min(l,s)}this.sc={min:{x:n,y:a,z:l},max:{x:r,y:o,z:h}};for(let d=0;d<i.length;d+=3)i[d]-=this.sc.min.x,i[d+1]-=this.sc.min.y,i[d+2]-=this.sc.min.z;this.pp={x:this.sc.max.x-this.sc.min.x,y:this.sc.max.y-this.sc.min.y,z:this.sc.max.z-this.sc.min.z},this.up=i instanceof Float32Array?i:new Float32Array(i),this.checkedNormals=s&&!Number.isNaN(s[0])?s instanceof Float32Array?s:new Float32Array(s):void 0,this.checkedNormals||this.setColorShadingStyle(Va);const c=new Array,u={indexStart:0,count:e.length,useIndexBuffer:!0,offset:0,material:{id:rf.id,diffuse:rf.diffuse,specular:rf.specular,ambient:rf.ambient,emissive:rf.emissive,specularCoeff:rf.specularCoeff,opacity:1}};return c.push(u),this.Sp=c,this.bu.Mp({vertices:this.up,normals:this.checkedNormals,indices:e instanceof Uint32Array||e instanceof Uint16Array?e:new Uint16Array(e),modelSize:this.pp,parts:this.Sp}),this.fs.gi.Bs(),this}wp(t){if(!t)return this;this.mp=[];let e={id:rf.id,diffuse:rf.diffuse,specular:rf.specular,ambient:rf.ambient,emissive:rf.emissive,specularCoeff:rf.specularCoeff,opacity:1};const i=t.split("\n");for(let s of i){if(s=s.trim(),""===s||s.startsWith("#"))continue;const t=s.split(/\s+/g);switch(t[0].trim().toLowerCase()){case"ka":{const t=tf(s.substring(2).trim()).map(t=>255*t);e.ambient=Rs(t[0],t[1],t[2])}break;case"ke":{const t=tf(s.substring(2).trim()).map(t=>255*t);e.emissive=Rs(t[0],t[1],t[2])}break;case"kd":{const t=tf(s.substring(2).trim()).map(t=>255*t);e.diffuse=Rs(t[0],t[1],t[2])}break;case"ks":{const t=tf(s.substring(2).trim()).map(t=>255*t);e.specular=Rs(t[0],t[1],t[2])}break;case"d":e.opacity=parseFloat(t[1].trim());break;case"tr":e.opacity=1-parseFloat(t[1].trim());break;case"newmtl":e.diffuse=Rs(255*e.diffuse.r,255*e.diffuse.g,255*e.diffuse.b,255*e.opacity),e.specular=Rs(255*e.specular.r,255*e.specular.g,255*e.specular.b,255*e.opacity),e.emissive=Rs(255*e.emissive.r,255*e.emissive.g,255*e.emissive.b,255*e.opacity),e={id:t[1],diffuse:rf.diffuse,specular:rf.specular,ambient:rf.ambient,emissive:rf.emissive,specularCoeff:rf.specularCoeff,opacity:rf.opacity},this.mp.push(e)}}return this}setModelMaterial(t){return t?(this.wp(t),this.setFillStyle(sa),this.Sp?(this.Sp.forEach(t=>{const e=this.mp.find(e=>e.id.toLowerCase()===t.material.id.toLowerCase());e&&(t.material=e)}),this.Sp.sort((t,e)=>e.material.opacity-t.material.opacity),this.fs.gi.Bs(),this):this):this}setModelFromObj(t){if(!t)return this;const e=new Array,i=new Array,s=new Array,r=new Array,n=new Array,o=new Array,a=new Array;let h={indexStart:0,count:0,offset:0,useIndexBuffer:!1,material:{id:rf.id,diffuse:rf.diffuse,specular:rf.specular,ambient:rf.ambient,emissive:rf.emissive,specularCoeff:rf.specularCoeff,opacity:rf.opacity}},l=0,c=0,u=0,d=0,f=0,g=0,p=0,y=no,m=ro,v=no,x=ro,b=no,S=ro;const A=t.replace(/\r/g,"").split("\n");for(let E of A){if(E=E.trim(),""===E||E.startsWith("#"))continue;const t=E.split(/\s+/g);let A=0;switch(t[0].trim().toLowerCase()){case"v":{const t=tf(E.substring(1).trim()),i=t[0],s=t[1],r=t[2];y=Math.max(y,i),m=Math.min(m,i),v=Math.max(v,s),x=Math.min(x,s),b=Math.max(b,r),S=Math.min(S,r),e.push(...t.slice(0,3)),l+=1,d=l}break;case"vt":{const t=tf(E.substring(2).trim());i.push(...t),c+=1,f=c}break;case"vn":{const t=tf(E.substring(2).trim());s.push(...t),u+=1,g=u}break;case"usemtl":{const e=this.mp.find(e=>e.id.toLowerCase()===t[1].toLowerCase());p+=a.length>0?h.count:0,h={indexStart:void 0!==h?3*p*2:0,count:0,offset:void 0!==h?1*p:0,useIndexBuffer:!1,material:e||{id:t[1].toLowerCase(),diffuse:rf.diffuse,specular:rf.specular,ambient:rf.ambient,emissive:rf.emissive,specularCoeff:1,opacity:1}},a.push(h)}break;case"fo":A+=1;case"f":A+=1;{const t=sf(E.substring(A).trim());for(let i=0;i<t.vertexIndex.length;i+=1){let s=t.vertexIndex[i];s<0?s+=d:s-=1,s*=3,r.push(e[s]),r.push(e[s+1]),r.push(e[s+2])}if(h.count+=t.vertexIndex.length,t.textureIndex)for(let e=0;e<t.textureIndex.length;e+=1){let s=t.textureIndex[e];s<0?s+=f:s-=1,s*=3,o.push(i[s]),o.push(i[s+1]),o.push(i[s+2])}if(t.normalIndex)for(let e=0;e<t.normalIndex.length;e+=1){let i=t.normalIndex[e];i<0?i+=g:i-=1,i*=3,n.push(s[i]),n.push(s[i+1]),n.push(s[i+2])}}}}this.sc={min:{x:m,y:x,z:S},max:{x:y,y:v,z:b}};for(let E=0;E<r.length;E+=3)r[E]-=this.sc.min.x,r[E+1]-=this.sc.min.y,r[E+2]-=this.sc.min.z;if(this.pp={x:this.sc.max.x-this.sc.min.x,y:this.sc.max.y-this.sc.min.y,z:this.sc.max.z-this.sc.min.z},a.length<1&&r.length>0&&(h.count=r.length/3,a.push(h)),this.Sp=a,this.up=new Float32Array(r),n.length<1)for(let E=0;E<r.length/9;E+=1){const t={x:r[9*E],y:r[9*E+1],z:r[9*E+2]},e={x:r[9*E+3],y:r[9*E+4],z:r[9*E+5]},i={x:r[9*E+6],y:r[9*E+7],z:r[9*E+8]},s=so.normalize(so.cross(so.subtractVec(t,e),so.subtractVec(t,i)));for(let r=0;r<3;r+=1)n.push(s.x),n.push(s.y),n.push(s.z)}return this.dp=new Float32Array(n.map((t,e)=>n[e])),this.checkedNormals=new Float32Array,this.mp&&this.Sp.sort((t,e)=>e.material.opacity-t.material.opacity),this.bu.Mp({vertices:this.up,normals:this.dp,indices:this.fp,modelSize:this.pp,parts:this.Sp}),this.fs.gi.Bs(),this}setVertexValues(t){return this.bu._p(t),this.fs.gi.Bs(),this}setScale(t){const e={x:"number"==typeof t?t:(null==t?void 0:t.x)||1,y:"number"==typeof t?t:(null==t?void 0:t.y)||1,z:"number"==typeof t?t:(null==t?void 0:t.z)||1};return this.oi=e,this.bu.kp(e),this.fs.gi.Bs(),this}getScale(){return this.oi}setModelLocation(t){return this.gp=t,this.bu.Cp(t),this.fs.gi.Bs(),this}getModelLocation(){return this.gp}setModelAlignment(t){return this.Ap=t,this.bu.Tp(t),this.fs.gi.Bs(),this}getModelAlignment(){return this.Ap}setModelRotation(t){return this.setModelRotationEuler(t)}getModelRotation(){return this.vp}setModelRotationEuler(t){const e={x:No(t.x),y:No(t.y),z:No(t.z)};return this.vp=e,this.bu.Fp(this.vp),this.fs.gi.Bs(),this}getModelRotationEuler(){return this.vp}setModelRotationQuaternion(t){return this.yp=t,this.bu.Ip(this.yp),this.fs.gi.Bs(),this}getModelRotationQuaternion(){return this.yp}setBackfaceCullingMode(t){return this.bu.Pp(t),this.fs.gi.Bs(),this}getBackfaceCullingMode(){return this.bu.Lp()}setFillStyle(t){return this.bu.Ke(t),this.fs.gi.Bs(),this}getFillStyle(){return this.bu.pr()}setColorShadingStyle(t){return this.checkedNormals||t!==Oa?super.setColorShadingStyle(t):(console.warn("Phong shading style is not supported without normals. Switching to Simple shading style."),super.setColorShadingStyle(new Ya))}Av(){return!1}eh(t,e){t.Fi(e),this.fs.gi.Bs()}Ys(){return Ln(this.getFillStyle(),this.bu.wi())}sh(){return{fill:this.getFillStyle()}}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}const of={None:class extends Ul{Gn(t){return this.size=t,this}$n(){return 0}Un(){return 0}jn(){return 0}Yn(){return 0}setHighlight(t){return this}getHighlight(){return 0}setFillStyle(){return this}getFillStyle(){return sa}setStrokeStyle(){return this}getStrokeStyle(){return Lr}setStrokeThickness(){return this}getStrokeThickness(){return 0}},Rectangle:Nc,Circle:class extends Sc{constructor(t,e,i,s,r){super(t,e,i,s,r),this.pd=As(0,0),this.bu=t.md(e).Zc(0).Ah(360).Ke(sa).Qe(Lr),this.L.Oi(this.bu)}En(){return[this.bu]}setFillStyle(t){return this.bu.Ke(t),this.Ws.Bs(),this}getFillStyle(){return this.bu.pr()}setStrokeStyle(t){return this.bu.Qe(t),this.Ws.Bs(),this}getStrokeStyle(){return this.bu.ja()}th(){void 0!==this.Nn&&this.bu.il(this.Nn);const t=this.getSize(Rr.Content).x/2;return this.bu.Qc(t*this.renderingScale.ri().x).Kc(t*this.renderingScale.ri().y).ih(hr(this.getPosition(As(0,0),Rr.Content),this.scale,this.renderingScale)).tu(255).Er(),this}Gn(t){const e=Math.sqrt(t.x*t.x/4+t.y*t.y/4);return this.setContentSize(As(2*e,2*e)),this.pd=t,this.Ws.Bs(),this}$n(){return(this.getSize(Rr.Content).x-this.pd.x)/2}Un(){return(this.getSize(Rr.Content).x-this.pd.x)/2}jn(){return(this.getSize(Rr.Content).y-this.pd.y)/2}Yn(){return(this.getSize(Rr.Content).y-this.pd.y)/2}fitTo(t){const e=Math.min(t.x,t.y);return this.setContentSize(As(e,e)),this.pd=t,this}},Diamond:class extends Ac{constructor(t,e,i,s,r){super(t,e,i,gc.Simple,s,r),this.Sd=Fs(As(0,0)),this.bd=!1,this.Mu()}wu(){const t=this.Sd.C();if(this.bd){const e=Math.min(t.x,t.y);return[As(0,0),As(e/2,e/2),As(0,e),As(-e/2,e/2)]}const e=2*Math.sqrt(this.Sd.C().x*this.Sd.C().x/4+this.Sd.C().y*this.Sd.C().y/4),i=As(Math.cos(Math.PI/4)*e,0),s=As(0,Math.sin(Math.PI/4)*e),r=As(0,0),n=Lo(r,Lo(i,s)),o=Lo(n,Lo(s,Bo(i,-1)));return[r,n,o,Do(o,Lo(i,s))]}En(){return[this.bu]}setFillStyle(t){return this.bu.Ke(t),this.Ws.Bs(),this}getFillStyle(){return this.bu.pr()}setStrokeStyle(t){return this.bu.Qe(t),this.Ws.Bs(),this}getStrokeStyle(){return this.bu.ja()}Gn(t){return this.Sd._(t),this.bd=!1,this.Ws.Bs(),this}$n(){return this.bd?0:(this.getSize(Rr.Content).x-this.Sd.C().x)/2}Un(){return this.bd?0:(this.getSize(Rr.Content).x-this.Sd.C().x)/2}jn(){return this.bd?0:(this.getSize(Rr.Content).y-this.Sd.C().y)/2}Yn(){return this.bd?0:(this.getSize(Rr.Content).y-this.Sd.C().y)/2}fitTo(t){return this.Sd._(t),this.bd=!0,this.Ws.Bs(),this}},Pointer:Oc};class af extends Zc{constructor(t,e,i,s,r,n){super(t,e,i,s,r,n),this.Zn=this.bi.cursorResultTableTextFont,this.sf=0,this.Sv=this.bi.cursorResultTableTextFillStyle,this.Nn=100,this.Zh=Ta.CursorResultTable}setContent(t){var e;let i;void 0===t?i=[]:Array.isArray(t)?(i=[],t.forEach(t=>{i.push(Array.isArray(t)?t:[t])})):i=[[t]];for(let o=0;o<i.length;o+=1){const t=i[o];let e=!1;for(let i=0;i<t.length;i+=1){const s=t[i],r="object"==typeof s&&"text"in s?s.text:"string"==typeof s?s:void 0,n="object"==typeof s&&"icon"in s?s.icon:hh(s)?s:void 0,o=s instanceof Fa&&s;if(!(r&&r.length>0||n||o)){e=!0;break}}e||(t.unshift(""),t.push(""))}const s=i.length;let r=this.getMembers().length;for(let o=0;o<Math.max(s,r);o+=1){const t=this.getRow(o,!0);if(o>=s)this.getMembers()[o].dispose(),o-=1,r-=1;else{const r=i[o].length;let a=t.getMembers().length;for(let h=0;h<Math.max(r,a);h+=1){const l=i[o][h],c="object"==typeof l&&"font"in l?l.font:void 0,u="object"==typeof l&&"fillStyle"in l?l.fillStyle:void 0,d="object"==typeof l&&"text"in l?l.text:"string"==typeof l?l:void 0,f="object"==typeof l&&"icon"in l?l.icon:hh(l)?l:void 0,g=l instanceof Fa&&l||("object"==typeof l&&"component"in l?l.component:void 0),p="object"==typeof l&&"componentColor"in l&&l.componentColor,y="object"==typeof l&&"componentFillStyle"in l&&l.componentFillStyle,m="object"==typeof l&&"rowFillStyle"in l?l.rowFillStyle:void 0,v=t.getMembers();if(h>=r)t.getMembers()[h].dispose(),h-=1,a-=1;else if(void 0!==d&&d.length>0||f||g){const i=c?this.Zn.withMutations(t=>{for(const e of Object.keys(c)){const i=c[e];void 0!==i&&t.set(e,i)}return t}):this.Zn,r=u||this.Sv,a=v[h];if(d){let e;a&&a instanceof _c?e=a:(a&&a.dispose(),e=t.addElement(Vc,h)),e.setText(d).setFont(i).setFillStyle(r).setTextRotation(this.sf)}else if(f){let s;a&&a instanceof Yc?s=a:(a&&a.dispose(),s=t.addElement(Gc,h)),s.setFillStyle(r).setShape(f).setSize({y:i.size,x:i.size}),s.setMargin(null!==(e=this.bi.uiTextPadding)&&void 0!==e?e:5)}else if(g){let e;a&&"setTextFillStyleHidden"in(n=a)&&"setText"in n?e=a:(a&&a.dispose(),e=t.addElement(ou.setBackground(of.None),h).setOn(!0));const s=g.js();void 0!==s&&e.setButtonShape(s),e.setText(g.getName()).setTextFont(i).setTextFillStyle(r).setTextRotation(this.sf),p?e.setButtonOnFillStyle(new aa({color:p})):y?e.setButtonOnFillStyle(y):e.setButtonOnFillStyle(Bn(g.fs.getTheme(),!1,g.sh()))}m&&t.setBackground(t=>{t.setFillStyle(m);const e=this.getBackground();Ba(e)&&t instanceof Nc&&t.setCornerRadius(e.getCornerRadius(),{topLeft:0===o,topRight:0===o,bottomLeft:o===s-1,bottomRight:o===s-1})})}else{const e=v[h];e&&e instanceof Xc||(e&&e.dispose(),t.addGap(void 0,h))}}}}var n;return this.Ws.Bs(),this}th(){if(super.th(),this.Ws.gi.Au&&this.getVisible()){const t=zl(this);this.Ws.gi.Au.xA(l(l({},t),{},{blacklist:[Ta.CursorResultTable]}))}return this}setTextFillStyle(t){this.Sv="function"==typeof t?t(this.Sv):t;for(let e=0;e<this.getMemberCount();e+=1){const t=this.getRow(e);for(let e=0;e<t.getMembers().length;e+=1){const i=t.getMembers()[e];i instanceof _c&&i.setFillStyle(this.Sv)}}return this.Ws.Bs(),this}getTextFillStyle(){return this.Sv}setTextFont(t){return Ua(t)?this.Zn=t:this.Zn=t(this.Zn),this.Ws.Bs(),this}getTextFont(){return this.Zn}setTextRotation(t){return this.sf=t,this.Ws.Bs(),this}getTextRotation(){return this.sf}Bp(){for(let t=0;t<this.Gd.length;t+=1)for(let e=0;e<this.Gd[t].getMembers().length;e+=1)this.Gd[t].getMembers()[e].dispose()}Er(){for(let t=0;t<this.Gd.length;t+=1)this.Gd[t].setMinimumSize(void 0);super.Er();for(let t=0;t<this.Gd.length;t+=1)this.Gd[t].setMinimumSize(this.size.x);return super.Er(),this}}class hf{constructor(t,e,i,s,r,n){this.Dp=[],this.Rp=!0,this.Ep=!0,this.Sg=!1,this.ui=!0,this.ci=!1,this.Op=[],this.zp=!0,this.L=new Ar,this.Ws=t,this.renderingScale=e,this.scale=i,this.Vp=s,this.Np=r,this.bi=n,this.Gp=new af(this.Ws,this.renderingScale,this.scale,this.Np,Jr,n).setPointerEvents(!1).setBackground(t=>t.setFillStyle(n.cursorResultTableFillStyle).setStrokeStyle(n.cursorResultTableStrokeStyle)).setTextFillStyle(n.cursorResultTableTextFillStyle).setTextFont(n.cursorResultTableTextFont),this.$p=new cf(t=>this.Gp.setOrigin(t),()=>this.Gp.getOrigin()),this.Yp=new cf(t=>this.Gp.setPosition(t),()=>this.Gp.getPosition())}isDisposed(){return this.ci}setPointMarkerVisible(t){return this.Rp=t,this.Dp.forEach(e=>e.pointMarker.setVisible(e.targetVisible&&t)),this.Ws.Bs(),this}getPointMarkerVisible(){return this.Rp}setPointMarker(t){return this.Dp.forEach(e=>t(e.pointMarker)),this.Op.push(t),this.Ws.Bs(),this}setResultTableVisible(t){return this.Ep=t,this.Ws.Bs(),this}getResultTableVisible(){return this.Ep}setResultTable(t){return t(this.Gp),this.Ws.Bs(),this}setAutoFit(t){return this.zp=t,this.$p.resetValue(),this.Yp.resetValue(),this.Ws.Bs(),this}getAutoFit(){return this.zp}setVisible(t){return this.ui=t,this.Ws.Bs(),this}getVisible(){return this.ui}dispose(){return this.Dp.forEach(t=>t.pointMarker.dispose()),this.Gp.dispose(),this.Op.length=0,this.Vp(this),this.L.D("dispose",{}),this}jp(){const t=this.Gp,e=this.Ws.gi.oi,i=hr(t.getPosition(As(-1,-1),Rr.PaddedBackground),t.scale,e),s=hr(t.getPosition(As(1,1),Rr.PaddedBackground),t.scale,e),r=i.x<e.x.getInnerStart()||s.x>e.x.getInnerEnd(),n=i.y<e.y.getInnerStart()||s.y>e.y.getInnerEnd();return{x:r,y:n,either:r||n}}th(){if(this.ui&&((this.$p.isAltered()||this.Yp.isAltered())&&(this.$p.resetValue(),this.Yp.resetValue(),this.Gp.Er()),this.zp&&this.jp().either)){const t=this.Gp.Ws.gi.oi;let e=hr(this.Gp.getPosition(As(-1,-1),Rr.PaddedBackground),this.Gp.scale,t),i=hr(this.Gp.getPosition(As(1,1),Rr.PaddedBackground),this.Gp.scale,t);const s={x:{min:Math.min(t.x.getInnerStart(),t.x.getInnerEnd()),max:Math.max(t.x.getInnerStart(),t.x.getInnerEnd())},y:{min:Math.min(t.y.getInnerStart(),t.y.getInnerEnd()),max:Math.max(t.y.getInnerStart(),t.y.getInnerEnd())}},r=this.Gp.getOrigin();let n={x:0,y:0},o=l({},r);if(i.y>s.y.max?n.y=s.y.max-i.y:e.y<s.y.min&&(n.y=s.y.min-e.y),(i.x>s.x.max||e.x<s.x.min)&&(o.x*=-1),0!==n.x||0!==n.y||o.x!==r.x||o.y!==r.y){const r=this.Gp.getPosition();let a=this.Gp.scale.Jt(r,n);this.Yp.alter(a),this.$p.alter(o),this.Gp.Er(),this.jp().x&&(e=hr(this.Gp.getPosition(As(-1,-1),Rr.PaddedBackground),this.Gp.scale,t),i=hr(this.Gp.getPosition(As(1,1),Rr.PaddedBackground),this.Gp.scale,t),i.x>s.x.max?n.x=s.x.max-i.x:e.x<s.x.min&&(n.x=s.x.min-e.x),a=this.Gp.scale.Jt(r,n),this.Yp.alter(a),this.Gp.Er())}}return this.Dp.forEach(t=>t.pointMarker.setVisible(t.targetVisible&&this.Sg&&this.ui&&this.Rp)),this.Dp.forEach(t=>t.pointMarker.th()),this.Gp.th(),this}Er(){return this.Gp.setVisible(this.Sg&&this.ui&&this.Ep),this.Dp.forEach(t=>t.pointMarker.Er()),this.Gp.Er(),this}Hp(t,e){const i=e===this.scale?t:hr(t,e,this.scale);this.Gp.setPosition(i)}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}const lf=(t,e)=>t.setResultTable(t=>t.setEffect(!0).setOrigin(As(-1,-1)).setMargin(.5*e.cursorPointMarkerSize.x+2).setBackground(t=>{e.cursorResultTableBorderRadius&&Ba(t)&&t.setCornerRadius(e.cursorResultTableBorderRadius)}));class cf{constructor(t,e){this.Wp=t,this.Xp=e}alter(t){this.Zp=void 0!==this.Zp?this.Zp:this.Xp(),this.Jp=t,this.Wp(t)}resetValue(){void 0!==this.Jp&&(void 0!==this.Zp&&this.isAltered()&&this.Wp(this.Zp),this.Zp=void 0,this.Jp=void 0)}getNormalValue(){return void 0!==this.Zp?this.Zp:this.Xp()}isAltered(){return void 0!==this.Jp&&this.Xp()===this.Jp}}class uf extends hf{constructor(t,e,i,s,r,n,o){super(t,e,i,s,r,n),this.chart=o,this.Qp=this.chart.getDefaultAxisX().addCustomTick().setVisible(!1).setGridStrokeStyle(n.cursor3DGridStrokeStyleX).setTickStyle(n.cursor3DTickStrokeStyleX).setTextFillStyle(n.cursor3DTickLabelFillStyleX).setTextFont(n.cursor3DTickLabelFontX).setBackgroundFillStyle(n.cursor3DTickLabelBackgroundFillStyleX).setBackgroundStrokeStyle(n.cursor3DTickLabelBackgroundStrokeStyleX).setPadding(n.cursor3DTickLabelPaddingX),this.Kp=this.chart.getDefaultAxisY().addCustomTick().setVisible(!1).setGridStrokeStyle(n.cursor3DGridStrokeStyleY).setTickStyle(n.cursor3DTickStrokeStyleY).setTextFillStyle(n.cursor3DTickLabelFillStyleY).setTextFont(n.cursor3DTickLabelFontY).setBackgroundFillStyle(n.cursor3DTickLabelBackgroundFillStyleY).setBackgroundStrokeStyle(n.cursor3DTickLabelBackgroundStrokeStyleY).setPadding(n.cursor3DTickLabelPaddingY),this.qp=this.chart.getDefaultAxisZ().addCustomTick().setVisible(!1).setGridStrokeStyle(n.cursor3DGridStrokeStyleZ).setTickStyle(n.cursor3DTickStrokeStyleZ).setTextFillStyle(n.cursor3DTickLabelFillStyleZ).setTextFont(n.cursor3DTickLabelFontZ).setBackgroundFillStyle(n.cursor3DTickLabelBackgroundFillStyleZ).setBackgroundStrokeStyle(n.cursor3DTickLabelBackgroundStrokeStyleZ).setPadding(n.cursor3DTickLabelPaddingZ),this.Qp.Zh=Ta.CursorTickMarker,this.Kp.Zh=Ta.CursorTickMarker,this.qp.Zh=Ta.CursorTickMarker}setTickX(t){return t(this.Qp),this.chart.gi.Bs(),this}setTickY(t){return t(this.Kp),this.chart.gi.Bs(),this}setTickZ(t){return t(this.qp),this.chart.gi.Bs(),this}setTicks(t){return t(this.Qp),t(this.Kp),t(this.qp),this.chart.gi.Bs(),this}dispose(){return super.dispose(),this.Qp.dispose(),this.Kp.dispose(),this.qp.dispose(),this}th(){return this.Qp.setVisible(this.ui&&this.Sg),this.Kp.setVisible(this.ui&&this.Sg),this.qp.setVisible(this.ui&&this.Sg),super.th()}setPosition(){if(0===arguments.length)return this;const t=arguments.length<=0?void 0:arguments[0];this.Sg=!0;const e=this.renderingScale,i=ld(t.resultTableScale,e),s=i===this.scale?t.resultTable:hr(t.resultTable,i,this.scale);this.Gp.setPosition(s),this.Qp.setValue(t.axisLocation.x),this.Kp.setValue(t.axisLocation.y),this.qp.setValue(t.axisLocation.z);let r=this.Dp[0];if(!r){const t=new Yc(this.Ws,this.renderingScale,this.scale,Jr,this.bi).setPointerEvents(!1).setFillStyle(this.bi.cursorPointMarkerFillStyle).setStrokeStyle(this.bi.cursorPointMarkerStrokeStyle).setSize(this.bi.cursorPointMarkerSize).setShape(this.bi.cursorPointMarkerShape);r={pointMarker:t,targetVisible:!0},this.Dp.push(r),this.Op.forEach(e=>e(t))}return t.pointMarkerShape&&r.pointMarker.setShape(t.pointMarkerShape),t.pointMarkerSize&&r.pointMarker.setSize(t.pointMarkerSize),t.pointMarkerFillStyle&&r.pointMarker.setFillStyle(t.pointMarkerFillStyle),t.pointMarkerStrokeStyle&&r.pointMarker.setStrokeStyle(t.pointMarkerStrokeStyle),r.pointMarker.setPosition(s),this.chart.gi.Bs(),this}}class df{constructor(t,e){this.tm=[],this.im=(t,e)=>(this.tm.forEach(i=>i(t,e)),t),this.addStyler=t=>new df(this.Np,this.tm.map(t=>t).concat(t)),this.setResultTableBackground=t=>new df(t,this.tm.map(t=>t)),this.sm=(t,e,i,s,r,n)=>this.im(new uf(t,e,i,s,this.Np,r,n),r),this.Np=t,this.tm=e}}const ff=new df(Nc,[(t,e)=>{lf(t,e)}]),gf=(t,e,i,s)=>{t.background.addEventListener(e,i,s),t.seriesBackground.addEventListener(e,i,s),t.getSeries().forEach(t=>t.addEventListener(e,i,s));const r=t=>t.series.addEventListener(e,i,s);return t.addEventListener("seriesadd",r),()=>{t.background.removeEventListener(e,i),t.seriesBackground.removeEventListener(e,i),t.getSeries().forEach(t=>t.removeEventListener(e,i)),t.removeEventListener("seriesadd",r)}},pf=(t,e,i,s)=>{var r,n,o,a,h,l;io(),e.camera&&i.hm(),e.x&&t.axisX.fit(null!==(r=e.animationsEnabled)&&void 0!==r?r:void 0,null!==(n=e.stopScroll)&&void 0!==n?n:void 0),e.y&&t.axisY.fit(null!==(o=e.animationsEnabled)&&void 0!==o?o:void 0,null!==(a=e.stopScroll)&&void 0!==a?a:void 0),e.z&&t.axisZ.fit(null!==(h=e.animationsEnabled)&&void 0!==h?h:void 0,null!==(l=e.stopScroll)&&void 0!==l?l:void 0);const c=t.engine.setMouseStyle(Xh.ZoomOut);Ur.setTimeout(()=>{t.engine.restoreMouseStyle(c)},500);const u=e.on;u&&Ur.requestAnimationFrame(()=>u({event:s}))},yf=(t,e,i,s)=>{io(),t.restorePreviousZoomState();const r=e.on;r&&Ur.requestAnimationFrame(()=>r({event:s}))};class mf extends Hd{constructor(t,e,i,s,r,n,o){var a,h;super(t,e,i,e.Vg("chart3D bg",0),s,e.gi.bi.chart3DBackgroundFillStyle,e.gi.bi.chart3DBackgroundStrokeStyle,e.gi.bi.chart3DTitleFont,e.gi.bi.chart3DTitleFillStyle,e.gi.bi.chart3DTitleShadow,n,null===(a=null==o?void 0:o.legend)||void 0===a?void 0:a.customLegend),this.rm=1,this.nm=[],this.om=2,this.am=!0,this.lm=!0,this.um=!0,this.dm=0,this.coordsAxis={id:"axes",chart:this},this.coordsWorld={id:"world",chart:this},this.ra=[],this.fm=[],this.Am=!1,this.gm=()=>{if(this.ci)return;const t=new Map;this.forEachAxis(e=>{void 0!==e.aA().find(t=>t.dv())&&t.set(e,l(l({},e.getInterval()),{},{stopped:e.getStopped()}))}),t.size<=0||(this.fm.push(t),this.fm.length>100&&this.fm.shift())},this.ga=()=>{const t=this.qg.vm();this.pm.ym(t),this.Sm.ym(t);const e=this.bm.viewportChanged(this.xm());e&&this.Mm(e),this.gi.Bs()},this.L=new Ar,this.gi.ka(_l.wo),this.Yh.Jr("Chart3D"),this.wm=i.d3(),this.wm.x.H(-1,1),this.wm.y.H(-1,1),this.wm.z.H(-1,1),this.qg=e._m("chart3D layer3D",0,this.wm),this.pm=e.km("chart3D series bg",0),this.Sm=e.Cm("chart3D axis ui",1),this.Tm={x:new zd(this,(h=()=>this.ny,l(l({},_d(h,t=>t.getXMin(),t=>t.getXMax(),t=>t.un().x)),{},{Tv:t=>t.x,Hv:(t,e)=>({x:t.x,y:e.y,z:e.z}),Qd:ws(0,-1,0),Nv:t=>{const e={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:ws(0,e.y,e.z),gridlinePositionB:ws(0,e.y,-e.z),gridlinePositionC:ws(0,-e.y,-e.z)}},Xv:()=>!0,Zv:()=>!1,jv:()=>!1})),this.wm.x,this.bi,this.qg,this.Sm,this.Jf,!1,this.ys),y:new zd(this,Vd(()=>this.ny),this.wm.y,this.bi,this.qg,this.Sm,this.Jf,!1,this.ys),z:new zd(this,Nd(()=>this.ny),this.wm.z,this.bi,this.qg,this.Sm,this.Jf,!1,this.ys)},this.Fm=this.qg.Dv([Pd.InternalUI]).setPointerEvents(!1),this.setBoundingBoxStrokeStyle(this.bi.chart3DBoundingBoxStrokeStyle),this.gy=this.pm.xu(this.gi.oi,gc.Simple).Ke(this.bi.chart3DSeriesBackgroundFillStyle).Qe(Lr).setPointerEvents(!0),this.vy=this.pm.xu(this.gi.oi,gc.Simple).Ke(sa).Qe(this.bi.chart3DSeriesBackgroundStrokeStyle).setPointerEvents(!1),super.Ay(this.gy,this.vy),this.Im({x:1,y:1,z:1},!0),this.bm=new Wd(this.gi.oi,this.Jf,this.wm,(t,e)=>(e&&this.Mm(e),this.qg.Gv(t))),this.Pm=this.bm.getDefaultCameraConfiguration(this.Lm(this.Bm),this.getProjection()),this.Mm(this.Pm);const c=$r(o?o.cursorBuilder:void 0,ff),u=e.Dm();this.Rm=ym(this,u,c.sm(u,this.Jf,this.Jf,Jr,this.bi,this),this,"show-pointed",vf,()=>0),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled)),this.addEventListener("resize",this.ga),this.ga(),this.zg(r,this.Jf),this.Em=(t=>{let e=!1,i=!1,s=!1;const r=(t=>{let e=!0,i=t.getCameraLocation(),s=t.getCameraAutomaticFittingEnabled();return{Om:()=>{e&&(i=t.getCameraLocation(),s=t.getCameraAutomaticFittingEnabled()),e=!1},hm:()=>{t.setCameraLocation(i).setCameraAutomaticFittingEnabled(s),e=!0}}})(t);let n={};const o=()=>Gr({rotate:{drag:{},ctrl:{drag:!1},shift:{drag:!1},alt:{drag:!1}},zoom:{wheel:{},camera:!0,mode:"centered",pinch:{camera:!1,x:!0,y:!0,z:!0}},restoreDefault:{doubleClick:!0,camera:!0,x:!0,y:!0,z:!0},restorePrevious:!1},n),a=n=>{const a=o();let h=!1,l=!1,c=!1;for(const t of Object.keys(a)){const e=a[t];"object"==typeof e&&(void 0!==e.ctrl&&(h=!0),void 0!==e.shift&&(l=!0),void 0!==e.alt&&(c=!0))}i=n.ctrlKey,e=n.shiftKey,s=n.altKey,("Control"===n.key&&h||"Shift"===n.key&&l||"Alt"===n.key&&c)&&n.preventDefault();const u=ba(a.restoreDefault,void 0,n,e,i,s);u&&u.code===n.code&&(mn(n),pf(t,u,r,n));const d=ba(a.restorePrevious,void 0,n,e,i,s);d&&d.code===n.code&&(mn(n),yf(t,d,0,n))},h=t=>{i=t.ctrlKey,e=t.shiftKey,s=t.altKey},l=()=>{i=!1,e=!1,s=!1};Ur.addEventListener("keydown",a),Ur.addEventListener("keyup",h),Ur.addEventListener("blur",l),t.addEventListener("dispose",()=>{Ur.removeEventListener("keydown",a),Ur.removeEventListener("keyup",h),Ur.removeEventListener("blur",l)});const c=t=>{},u=n=>{const a=Sa(!1!==t.gi.Fa.Ia),h=o(),l=ba(h.rotate,"drag",n,e,i,s),c=ba(h.pan,"drag",n,e,i,s);c&&a.push(()=>((t,e,i,s)=>{const r=t.getCursorMode();t.setCursorMode(void 0);let n=e;"mouse"===e.pointerType&&e.preventDefault();const o=s=>{var r,o,a;if(s.pointerId!==e.pointerId)return;mn(s);const h=s.clientX-n.clientX,l=s.clientY-n.clientY;if(n=s,i&&i.x){const e=h+-l;t.axisX.Jv(-Math.sign(e)*(null!==(r=i.sensitivity)&&void 0!==r?r:1)),!1!==i.stopScroll&&t.axisX.setStopped(!0)}if(i&&i.y){const e=-h+l;t.axisY.Jv(Math.sign(e)*(null!==(o=i.sensitivity)&&void 0!==o?o:1)),!1!==i.stopScroll&&t.axisY.setStopped(!0)}if(i&&i.z){const e=-h+l;t.axisZ.Jv(Math.sign(e)*(null!==(a=i.sensitivity)&&void 0!==a?a:1)),!1!==i.stopScroll&&t.axisZ.setStopped(!0)}const c=null==i?void 0:i.on;c&&Ur.requestAnimationFrame(()=>c({event:s}))},a=i=>{i.pointerId===e.pointerId&&(mn(i),t.setCursorMode(r),Ur.removeEventListener("pointermove",o),Ur.removeEventListener("pointerup",a),t.engine.container.removeEventListener("pointerdown",h),s())},h=i=>{i.pointerId!==e.pointerId&&(t.setCursorMode(r),Ur.removeEventListener("pointermove",o),Ur.removeEventListener("pointerup",a),t.engine.container.removeEventListener("pointerdown",h),s())};Ur.addEventListener("pointermove",o),Ur.addEventListener("pointerup",a),t.engine.container.addEventListener("pointerdown",h),io()})(t,n,c,d())),l&&a.push(()=>((t,e,i,s,r)=>{const n=t.getCursorMode();t.setCursorMode(void 0);let o=e,a=!1,h=0;"mouse"===e.pointerType&&e.preventDefault();const l=s=>{var n,l;if(s.pointerId!==e.pointerId)return;mn(s);const c={x:s.clientX-o.clientX,y:s.clientY-o.clientY};o=s,h+=Po(c),r.Om(),t.zm({x:c.x*(null!==(n=i.sensitivity)&&void 0!==n?n:1),y:-c.y*(null!==(l=i.sensitivity)&&void 0!==l?l:1)}),a||(eo(),a=!0);const u=i.on;u&&Ur.requestAnimationFrame(()=>u({event:s}))},c=i=>{i.pointerId===e.pointerId&&(mn(i),t.setCursorMode(n),Ur.removeEventListener("pointermove",l),Ur.removeEventListener("pointerup",c),t.engine.container.removeEventListener("pointerdown",u),s(),h>=10&&to("click"))},u=i=>{i.pointerId!==e.pointerId&&(t.setCursorMode(n),Ur.removeEventListener("pointermove",l),Ur.removeEventListener("pointerup",c),t.engine.container.removeEventListener("pointerdown",u),s())};Ur.addEventListener("pointermove",l),Ur.addEventListener("pointerup",c),t.engine.container.addEventListener("pointerdown",u),io()})(t,n,l,d(),r));const u=ba(h.zoom,"drag",n,e,i,s);u&&a.push(()=>((t,e,i,s,r)=>{const n=t.getCursorMode();t.setCursorMode(void 0);let o=e;"mouse"===e.pointerType&&e.preventDefault();const a=s=>{var n,a,h,l,c,u,d;if(s.pointerId!==e.pointerId)return;mn(s);const f=s.clientX-o.clientX,g=s.clientY-o.clientY;if(o=s,i.x){const e=f+-g;t.axisX.Qv(null!==(n=i.mode)&&void 0!==n?n:"centered",Math.sign(e),null!==(a=i.sensitivity)&&void 0!==a?a:1),!1!==i.stopScroll&&t.axisX.setStopped(!0)}if(i.y){const e=-f+g;t.axisY.Qv(null!==(h=i.mode)&&void 0!==h?h:"centered",-Math.sign(e),null!==(l=i.sensitivity)&&void 0!==l?l:1),!1!==i.stopScroll&&t.axisY.setStopped(!0)}if(i.z){const e=-f+g;t.axisZ.Qv(null!==(c=i.mode)&&void 0!==c?c:"centered",-Math.sign(e),null!==(u=i.sensitivity)&&void 0!==u?u:1),!1!==i.stopScroll&&t.axisZ.setStopped(!0)}if(i.camera){const e=f+-g;r.Om(),t.Vm(-.15*Math.sign(e)*(null!==(d=i.sensitivity)&&void 0!==d?d:1))}const p=i.on;p&&Ur.requestAnimationFrame(()=>p({event:s}))},h=i=>{i.pointerId===e.pointerId&&(mn(i),t.setCursorMode(n),Ur.removeEventListener("pointermove",a),Ur.removeEventListener("pointerup",h),t.engine.container.removeEventListener("pointerdown",l),s())},l=e=>{t.setCursorMode(n),Ur.removeEventListener("pointermove",a),Ur.removeEventListener("pointerup",h),t.engine.container.removeEventListener("pointerdown",l),s()};Ur.addEventListener("pointermove",a),Ur.addEventListener("pointerup",h),t.engine.container.addEventListener("pointerdown",l),io()})(t,n,u,d(),r)),a.end();const f=ba(h.rotate,"pinch",n,e,i,s),g=ba(h.pan,"pinch",n,e,i,s),p=ba(h.zoom,"pinch",n,e,i,s);(f||p||g)&&((t,e,i,s,r,n,o)=>{if(!i&&!s&&!r)return;const a=l=>{if(l.pointerId===e.pointerId)return;const c=n();let u;t.engine.container.removeEventListener("pointerdown",a),Ur.removeEventListener("pointerup",h);let d,f=l;const g=l,p=t.getCursorMode();t.setCursorMode(void 0);const y=t.getCameraLocation();let m,v,x;const b=[],S=()=>{var n,a,h,c,p,S,E,k;A=void 0;const w=u,M=f;if(b.forEach(t=>{t.pointerId===e.pointerId?u=t:t.pointerId===l.pointerId&&(f=t)}),b.length=0,d=d||u,void 0===u||void 0===w||void 0===d)return;if(!v||!x){const e=t=>{for(;t<0;)t+=360;for(;t>360;)t-=360;return t},i=(i,s)=>{const r=t.qg.Gv(i),n=t.qg.Gv(s);if(!r||!n)return{deg:-1,dir:{x:0,y:0}};const o=t.gi.Qa({engineX:r.x,engineY:r.y}),a=t.gi.Qa({engineX:n.x,engineY:n.y});return{deg:e(Oo(Do(n,r))),dir:To(Do({x:a.clientX,y:a.clientY},{x:o.clientX,y:o.clientY}))}},s=t.axisX.getInterval(),r=t.axisY.getInterval(),n=t.axisZ.getInterval(),o={x:i({x:s.start,y:r.start,z:n.start},{x:s.end,y:r.start,z:n.start}),y:i({x:s.start,y:r.start,z:n.start},{x:s.start,y:r.end,z:n.start}),z:i({x:s.end,y:r.start,z:n.start},{x:s.end,y:r.start,z:n.end})},a=t.gi.Ja(d),h=t.gi.Ja(g),l=e(Oo(Do({x:h.engineX,y:h.engineY},{x:a.engineX,y:a.engineY})));v=["x","y","z"].reduce((t,i)=>{const s=Math.abs(o[i].deg-l),r=Math.abs(e(o[i].deg+180)-l),n=Math.min(s,r);return Math.min(n,r)<t.angleDiff?{angleDiff:n,axis:i}:t},{axis:"x",angleDiff:1e3}).axis,x=o[v].dir}const C=u.clientX-w.clientX,T=u.clientY-w.clientY,F=f.clientX-M.clientX,P=f.clientY-M.clientY,B=Math.sqrt((d.clientX-g.clientX)**2+(d.clientY-g.clientY)**2),L=Math.sqrt((u.clientX-f.clientX)**2+(u.clientY-f.clientY)**2),D=so.length(y),z=B/L*(null!==(n=null==r?void 0:r.sensitivity)&&void 0!==n?n:1)*D,I=As((null!==(a=null==i?void 0:i.sensitivity)&&void 0!==a?a:1)*(C+F)/2,(null!==(h=null==i?void 0:i.sensitivity)&&void 0!==h?h:1)*-(T+P)/2);o.Om(),(i||(null==r?void 0:r.camera))&&(t.nm.push({type:"rotate+zoom",rotation:i?I:{x:0,y:0},cameraDistance:(null==r?void 0:r.camera)?z:D}),t.gi.Bs());const R=void 0===m?0:L-Po(m)?1:-1,_=m?.25*(null!==(c=null==r?void 0:r.sensitivity)&&void 0!==c?c:1)*(L-Po(m)):0;r&&r.x&&("x"===v||void 0===r.y&&void 0===r.z)&&(t.axisX.Qv(null!==(p=r.mode)&&void 0!==p?p:"centered",R,_),!1!==r.stopScroll&&t.axisX.setStopped(!0)),r&&r.y&&("y"===v||void 0===r.x&&void 0===r.z)&&(t.axisY.Qv(null!==(S=r.mode)&&void 0!==S?S:"centered",R,_),!1!==r.stopScroll&&t.axisY.setStopped(!0)),r&&r.z&&("z"===v||void 0===r.x&&void 0===r.y)&&(t.axisZ.Qv(null!==(E=r.mode)&&void 0!==E?E:"centered",R,_),!1!==r.stopScroll&&t.axisZ.setStopped(!0));const V=(w.clientX+M.clientX)/2,N=(w.clientY+M.clientY)/2,O={x:(u.clientX+f.clientX)/2-V,y:(u.clientY+f.clientY)/2-N},Y=_o(To(O),x),G=Po(O)*Y*.3*(null!==(k=null==s?void 0:s.sensitivity)&&void 0!==k?k:1);s&&s.x&&("x"===v||void 0===s.y&&void 0===s.z)&&(t.axisX.Jv(-G),!1!==s.stopScroll&&t.axisX.setStopped(!0)),s&&s.y&&("y"===v||void 0===s.x&&void 0===s.z)&&(t.axisY.Jv(-G),!1!==s.stopScroll&&t.axisY.setStopped(!0)),s&&s.z&&("z"===v||void 0===s.x&&void 0===s.y)&&(t.axisZ.Jv(-G),!1!==s.stopScroll&&t.axisZ.setStopped(!0)),m={x:Math.abs(u.clientX-f.clientX),y:Math.abs(u.clientY-f.clientY)};const X=(null==s?void 0:s.on)||(null==i?void 0:i.on)||(null==r?void 0:r.on);X&&Ur.requestAnimationFrame(()=>X({event:void 0}))};let A;const E=t=>{t.pointerId!==e.pointerId&&t.pointerId!==l.pointerId||(mn(t),b.push(t),A||(A=Ur.requestAnimationFrame(S)))},k=i=>{i.pointerId!==e.pointerId&&i.pointerId!==l.pointerId||(mn(i),t.setCursorMode(p),Ur.removeEventListener("pointermove",E),Ur.removeEventListener("pointerup",k),c(),A&&Ur.cancelAnimationFrame(A))};Ur.addEventListener("pointermove",E),Ur.addEventListener("pointerup",k),io()},h=i=>{i.pointerId===e.pointerId&&(t.engine.container.removeEventListener("pointerdown",a),Ur.removeEventListener("pointerup",h))};t.engine.container.addEventListener("pointerdown",a),Ur.addEventListener("pointerup",h)})(t,n,f,g,p,d,r)};gf(t,"wheel",n=>{const a=Sa(!1!==t.gi.Fa.Ia),h=o(),l=ba(h.pan,"wheel",n,e,i,s);l&&a.push(()=>((t,e,i)=>{var s,r,n;mn(e),i.x&&(t.axisX.Jv(2*Math.sign(e.deltaY)*(null!==(s=i.sensitivity)&&void 0!==s?s:1)),!1!==i.stopScroll&&t.axisX.setStopped(!0)),i.y&&(t.axisY.Jv(2*Math.sign(e.deltaY)*(null!==(r=i.sensitivity)&&void 0!==r?r:1)),!1!==i.stopScroll&&t.axisY.setStopped(!0)),i.z&&(t.axisZ.Jv(2*Math.sign(e.deltaY)*(null!==(n=i.sensitivity)&&void 0!==n?n:1)),!1!==i.stopScroll&&t.axisZ.setStopped(!0));const o=i.on;o&&Ur.requestAnimationFrame(()=>o({event:e}))})(t,n,l));const c=ba(h.zoom,"wheel",n,e,i,s);c&&a.push(()=>((t,e,i,s)=>{var r,n,o,a,h,l,c;mn(e),i.x&&(t.axisX.Qv(null!==(r=i.mode)&&void 0!==r?r:"centered",-Math.sign(e.deltaY),3*(null!==(n=i.sensitivity)&&void 0!==n?n:1)),!1!==i.stopScroll&&t.axisX.setStopped(!0)),i.y&&(t.axisY.Qv(null!==(o=i.mode)&&void 0!==o?o:"centered",-Math.sign(e.deltaY),3*(null!==(a=i.sensitivity)&&void 0!==a?a:1)),!1!==i.stopScroll&&t.axisY.setStopped(!0)),i.z&&(t.axisZ.Qv(null!==(h=i.mode)&&void 0!==h?h:"centered",-Math.sign(e.deltaY),3*(null!==(l=i.sensitivity)&&void 0!==l?l:1)),!1!==i.stopScroll&&t.axisZ.setStopped(!0)),i.camera&&(s.Om(),t.Vm(.5*Math.sign(e.deltaY)*(null!==(c=i.sensitivity)&&void 0!==c?c:1)));const u=i.on;u&&Ur.requestAnimationFrame(()=>u({event:e}))})(t,n,c,r)),a.end()}),gf(t,"dblclick",n=>{if(n.defaultPrevented)return;const a=Sa(!1!==t.gi.Fa.Ia),h=o(),l=ba(h.restoreDefault,void 0,n,e,i,s);l&&l.doubleClick&&(mn(n),pf(t,l,r,n));const c=ba(h.restorePrevious,void 0,n,e,i,s);c&&c.doubleClick&&(mn(n),yf(t,c,0,n)),a.end()}),gf(t,"click",n=>{if(n.defaultPrevented)return;const a=Sa(!1!==t.gi.Fa.Ia),h=o(),l=ba(h.restoreDefault,void 0,n,e,i,s);l&&l.singleClick&&(mn(n),pf(t,l,r,n));const c=ba(h.restorePrevious,void 0,n,e,i,s);c&&c.singleClick&&(mn(n),yf(t,c,0,n)),a.end()}),gf(t,"contextmenu",n=>{if(n.defaultPrevented)return;const a=Sa(!1!==t.gi.Fa.Ia),h=o(),l=ba(h.restoreDefault,"rmb",n,e,i,s);l&&l.singleClick&&(mn(n),pf(t,l,r,n));const c=ba(h.restorePrevious,"rmb",n,e,i,s);c&&c.singleClick&&(mn(n),yf(t,c,0,n)),a.end()});const d=()=>(f(),g(),()=>{f=gf(t,"pointermove",c),g=gf(t,"pointerdown",u)});let f=gf(t,"pointermove",c),g=gf(t,"pointerdown",u);return{setUserInteractions:t=>{if(void 0===t)n={rotate:!1,zoom:!1,pan:!1,restoreDefault:!1,restorePrevious:!1};else if(0===Object.keys(t).length)n={};else for(const e of Object.keys(t))!1===t[e]||"object"==typeof t[e]?n[e]=t[e]:n[e]={}},getUserInteractions:o}})(this),this.Nm(this.axisX),this.Nm(this.axisY),this.Nm(this.axisZ);const d=l({position:vd.RightCenter,backgroundVisible:!0},null==o?void 0:o.legend);this.legend.setOptions(d)}restorePreviousZoomState(t){if(this.fm.length<=1)return this;this.fm.pop();const e=this.fm[this.fm.length-1];return e?(this.Am=!0,this.forEachAxis(i=>{if((null==t?void 0:t.whitelist)&&!t.whitelist.includes(i))return;const s=e.get(i);s?i.ai(s.start,s.end,null==t?void 0:t.animate,void 0!==(null==t?void 0:t.stopAxisAfter)?t.stopAxisAfter:s.stopped,"userSetInterval"):i.fit(null==t?void 0:t.animate,null==t?void 0:t.stopAxisAfter)}),this.Am=!1,this):this}clearPreviousZoomStateHistory(){if(void 0!==this.Gm)this.fm.length=0;else for(;this.fm.length>1;)this.fm.unshift();return this}Nm(t){const e=()=>{this.Am||(this.Gm&&Ur.clearTimeout(this.Gm),this.Gm=Ur.setTimeout(()=>{this.gm(),this.Gm=void 0},300))};Ur.requestAnimationFrame(()=>{e()}),t.addEventListener("intervalchange",e),t.addEventListener("dispose",()=>{this.fm.forEach(e=>{e.delete(t)})})}setUserInteractions(t){return this.Em.setUserInteractions(t),this}getUserInteractions(){return this.Em.getUserInteractions()}setProjection(t){this.qg.$m(t);const e=this.bm.projectionChanged(this.xm(),t);return e&&this.Mm(e),this.gi.Bs(),this}getProjection(){return this.qg.Um()}setCursor(t){return this.Rm.setCursor(t),this}getCursor(){return this.Rm.getCursor()}setCursorMode(t){return this.Rm.setCursorMode(t),this}getCursorMode(){return this.Rm.getCursorMode()}setCustomCursor(t){return this.Rm.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.Rm.Ym(t),this}setCursorFormatting(t){return this.Rm.setCursorFormatting(t),this}getCursorFormatting(){return this.Rm.getCursorFormatting()}addCursor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ff;const e=this.Tg(),i=t.sm(e,this.Jf,this.Jf,this.wg(e),this.bi,this);return this.Eg(i),i}addPointSeries(t){const e=new(t&&t.type||Ud)(this,this.ly,this.qg,this.bi,this.gi.ys,t);return this.yy(e,t),e}addLineSeries(t){const e=new Yd(this,this.ly,this.qg,this.bi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ny.length,this.gi.ys);return this.yy(e,t),e}addPointLineSeries(t){const e=new Gd(this,this.ly,this.qg,this.bi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ny.length,this.gi.ys);return this.yy(e,t),e}addSurfaceGridSeries(t){const e=new qd(this,this.ly,this.qg,t,this.bi,this.gi.ys);return this.yy(e,t),e}addSurfaceScrollingGridSeries(t){const e=new Qd(this,this.ly,this.qg,t,this.bi,this.gi.ys);return this.yy(e,t),e}addBoxSeries(t){const e=new Td(this,this.ly,this.qg,this.bi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ny.length,this.gi.ys);return this.yy(e,t),e}addMeshModel(t){const e=new nf(this,this.ly,this.qg,this.bi,t,this.gi.ys);return this.yy(e,t),e}translateCoordinate(t,e,i){if(Kd(e)||Kd(i)||$d(t)){if(Kd(e)&&Kd(i)&&$d(t)){if("axes"===e.id&&"world"===i.id)return this.qg.jm(t);if("world"===e.id&&"axes"===i.id)return this.qg.Hm(t);if(e.id===i.id)return t}if(Kd(e)&&pa(i)&&$d(t)){const e=this.qg.Gv(t);return e?this.gi.Qa({engineX:e.x,engineY:e.y}):{clientX:-1,clientY:-1}}if(Kd(e)&&ma(i)&&$d(t)){const e=this.qg.Gv(t);return e?hr(e,this.gi.oi,this.Jf):{clientX:-1,clientY:-1}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}return cd(t,e,i,this.Jf,this.gi)}getDefaultAxisX(){return this.Tm.x}getDefaultAxisY(){return this.Tm.y}getDefaultAxisZ(){return this.Tm.z}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}get axisZ(){return this.getDefaultAxisZ()}get zAxis(){return this.getDefaultAxisZ()}getDefaultAxes(){return[this.Tm.x,this.Tm.y,this.Tm.z]}setCameraLocation(t){let e={location:t,direction:so.normalize(so.multiply(t,-1))};const i=this.bm.cameraLocationChanged(this.xm(e));return i&&(e=i),this.Mm(e),this.gi.Bs(),this}getCameraLocation(){return this.qg.getCameraLocation()}getCameraDirection(){return this.qg.getCameraDirection()}setCameraAutomaticFittingEnabled(t){this.bm.Oy(t);const e=this.bm.cameraLocationChanged(this.xm());return e&&this.Mm(e),this}getCameraAutomaticFittingEnabled(){return this.bm.Wy()}setBoundingBoxStrokeStyle(t){return this.Fm.dh(t).Bv(Fd(this.Fm.ao())),this.qg.Bs(),this}getBoundingBoxStrokeStyle(){return this.Fm.ao()}setBoundingBox(t){return this.Im(t,!1),this}Im(t,e){this.Bm=t;const i=this.Lm(t);if(this.wm.x.X(i.x),this.wm.y.X(i.y),this.wm.z.X(-i.z),!e){const t=this.bm.boundingBoxChanged(this.xm());t&&this.Mm(t)}this.gi.Bs()}getBoundingBox(){return this.Bm}th(t){const e=Md.Wg(this.Yh,this.Ng);this.Os.forEach(t=>t.Er(e,this.On));const i=Zn;if(Md.Xg(this.Yh,this.Ng,this.uiScale.ri(),this.On,i),0!==this.dm){const e=this.dm*t*.006;this.nm.push({type:"wheel-zoom",deltaY:e}),this.dm=Math.sign(this.dm)*Math.max(Math.abs(this.dm)-.01*t,0),0!==this.dm&&this.gi.Bs(!0)}const s=this.getCameraDirection();if(this.nm.length>0){const t=this.bm.applyCameraInteractions(this.xm(),this.nm);t&&this.Mm(t),this.nm.length=0}this.Wm&&so.equals(this.Wm.location,this.Pm.location)&&so.equals(this.Wm.direction,this.Pm.direction)||this.L.D("camerachange",{cameraLocation:this.getCameraLocation()}),this.Wm=this.Pm,super.th(t);for(let p=0;p<this.ny.length;p+=1)this.ny[p].rv();for(let p=0;p<this.ny.length;p+=1)this.ny[p].th();this.Tm.x.dn(),this.Tm.y.dn(),this.Tm.z.dn();const r=this.Tm.x.Er(this.Tm.x.Yv(s)),n=this.Tm.y.Er(this.Tm.y.Yv(s)),o=this.Tm.z.Er(this.Tm.z.Yv(s));this.Tm.x.th(r),this.Tm.y.th(n),this.Tm.z.th(o),this.Rm.th(!1,this.ny,void 0),super.Og();const a=this.wm,h=ws(a.x.getInnerStart(),a.y.getInnerStart(),a.z.getInnerStart()),l=ws(a.x.getInnerEnd(),a.y.getInnerEnd(),a.z.getInnerEnd());this.Fm.zi().Sc([ws(l.x,h.y,h.z),ws(l.x,l.y,h.z),ws(l.x,l.y,l.z),ws(l.x,h.y,l.z),ws(h.x,h.y,l.z),ws(h.x,l.y,l.z),ws(l.x,l.y,l.z),ws(l.x,l.y,h.z),ws(h.x,l.y,h.z),ws(h.x,l.y,l.z),ws(h.x,h.y,l.z),ws(h.x,h.y,h.z)]);const c=[ws(h.x,h.y,h.z),ws(l.x,h.y,h.z),ws(h.x,l.y,h.z),ws(l.x,l.y,h.z),ws(h.x,h.y,l.z),ws(l.x,h.y,l.z),ws(h.x,l.y,l.z),ws(l.x,l.y,l.z)].map(t=>this.qg.Gv(t)),u=this.qg.Gv(ws((h.x+l.x)/2,(h.y+l.y)/2,(h.z+l.z)/2)),d=Cn(c,u),f=[];for(let p=0;p<d.length;p+=1){const t=d[p];wo(t,u,d[p>0?p-1:d.length-1],d[p<d.length-1?p+1:0])||f.push(t)}const g=Cn(f,u);this.gy.rc(g),this.vy.rc(g);for(let p=0;p<this.ny.length;p+=1)this.ny[p].nv();this.Os.forEach(t=>t.th(e,this.On))}dispose(){return this.ra.forEach(t=>{t()}),this.ra.length=0,this.wm.N(),this.qg.N(),this.Sm.N(),this.pm.N(),this.Rm.N(),super.dispose()}Y(){return this.wm.x.Y(),this.wm.y.Y(),this.wm.z.Y(),super.Y()}j(){return super.j()}Mm(t){this.qg.setCameraLocation(t.location).setCameraDirection(t.direction).setLightLocation(so.addVec(t.location,so.multiply(t.direction,-this.om))),this.Pm=t,this.gi.Bs()}Lm(t){return so.divide(t,so.length(t)/this.rm)}xm(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.Pm;return{boundingBox:this.Lm(this.Bm),cameraLocation:t.location,cameraDirection:t.direction,projection:this.getProjection()}}forEachAxis(t){return t(this.Tm.x),t(this.Tm.y),t(this.Tm.z),this}getSeries(){return this.ny}getMinimumSize(){}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationZoom(t),this.forEachAxis(e=>e.setAnimationsEnabled(t)),this}setAnimationZoom(t){return this.am=!!t,this}getAnimationZoom(){return this.am}zm(t){this.nm.push({type:"rotate",rotation:t}),this.gi.Bs()}Vm(t){this.am?Math.sign(this.dm)!==Math.sign(t)?this.dm=t:this.dm+=t:this.nm.push({type:"wheel-zoom",deltaY:t}),this.gi.Bs()}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}const vf=(t,e,i)=>{var s,r;const n=t.axisX.getTitle()||void 0,o=t.axisY.getTitle()||void 0,a=t.axisZ.getTitle()||void 0;return(t=>t&&"object"==typeof t&&"z"in t&&"column"in t&&"row"in t)(e)?dm(e,[[{component:e.series,componentColor:fm(e),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[...n?[n,""]:[],{text:Ea(e.axisX.formatValue(e.x),e.axisX),font:{weight:"bold"}}],[...o?[o,""]:[],{text:Ea(e.axisY.formatValue(e.y),e.axisY),font:{weight:"bold"}}],[...a?[a,""]:[],{text:Ea(e.axisZ.formatValue(e.z),e.axisZ),font:{weight:"bold"}}],void 0!==e.intensity?["Value","",{text:Ea(e.lut?ea(e.lut,e.intensity):e.intensity.toFixed(2),null===(s=e.lut)||void 0===s?void 0:s.units),font:{weight:"bold"}}]:[]]):(t=>t&&"object"==typeof t&&"index"in t)(e)?dm(e,[[{component:e.series,componentColor:fm(e),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],void 0!==e.value?["Value","",{text:Ea(e.lut?ea(e.lut,e.value):e.value.toFixed(2),null===(r=e.lut)||void 0===r?void 0:r.units),font:{weight:"bold"}}]:[]]):dm(e,[[{component:e.series,componentColor:fm(e),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[...n?[n,""]:[],{text:Ea(e.axisX.formatValue(e.x),e.axisX),font:{weight:"bold"}}],[...o?[o,""]:[],{text:Ea(e.axisY.formatValue(e.y),e.axisY),font:{weight:"bold"}}],[...a?[a,""]:[],{text:Ea(e.axisZ.formatValue(e.z),e.axisZ),font:{weight:"bold"}}]])};class xf extends hf{setPosition(){const t=this.renderingScale;for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];if(i.length>0){const e=ld(i[0].resultTableScale,t),s=e===this.scale?i[0].resultTable:hr(i[0].resultTable,e,this.scale);this.Gp.setPosition(s)}return this.Sg=!1,this.Dp.forEach(t=>{t.targetVisible=!1}),i.forEach((e,i)=>{const s=ld(e.pointMarkerScale,t),r=s===this.scale?e.pointMarker:hr(e.pointMarker,s,this.scale);let n=this.Dp[i];if(!n){const t=new Yc(this.Ws,this.renderingScale,this.scale,Jr,this.bi).setPointerEvents(!1).setFillStyle(this.bi.cursorPointMarkerFillStyle).setStrokeStyle(this.bi.cursorPointMarkerStrokeStyle).setSize(this.bi.cursorPointMarkerSize).setShape(this.bi.cursorPointMarkerShape);n={pointMarker:t,targetVisible:!0},this.Dp.push(n),this.Op.forEach(e=>e(t))}e.pointMarkerShape&&n.pointMarker.setShape(e.pointMarkerShape),e.pointMarkerSize&&n.pointMarker.setSize(e.pointMarkerSize),e.pointMarkerFillStyle&&n.pointMarker.setFillStyle(e.pointMarkerFillStyle),e.pointMarkerStrokeStyle&&n.pointMarker.setStrokeStyle(e.pointMarkerStrokeStyle),n.pointMarker.setPosition(r),n.targetVisible=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;const s=e!==i?hr(t,e,i):t;return s.x>=i.x.getInnerStart()&&s.x<=i.x.getInnerEnd()&&s.y>=i.y.getInnerStart()&&s.y<=i.y.getInnerEnd()}(e.pointMarker,s),n.targetVisible&&(this.Sg=!0)}),this.Ws.Bs(),this}}class bf{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.tm=[],this.im=(t,e)=>(this.tm.forEach(i=>i(t,e)),t),this.addStyler=t=>new bf(this.Np,this.tm.map(t=>t).concat(t)),this.setResultTableBackground=t=>new bf(t,this.tm.map(t=>t)),this.sm=(t,e,i,s,r)=>this.im(new xf(t,e,i,s,this.Np,r),r),this.Np=t,this.tm=e}}const Sf=new bf(Nc,[lf]),Af=Sf,Ef=Sf,kf=Sf,wf=Sf,Mf=Af,Cf=new bf(Nc,[lf,t=>t.setPointMarkerVisible(!1).setResultTable(t=>t.setOrigin(Uh.LeftBottom))]),Tf=Sf,Ff="World",Pf="USA",Bf="NorthAmerica",Lf="SouthAmerica",Df="Canada",zf="Europe",If="Asia",Rf="Africa",_f="Australia",Vf=(t,e)=>!(!e.name||t.name.toLowerCase()!==e.name.toLowerCase())||"ISO_A3"in t&&"ISO_A3"in e&&t.ISO_A3.toLowerCase()===e.ISO_A3.toLowerCase(),Nf=(t,e)=>{let i=e.geometry;return i=Of(t,e,i),i=Yf(t,e,i),i},Of=(t,e,i)=>{if(t===If){const t=[];for(let e=0;e<i.length;e+=1){t[e]=[];const s=i[e],r=t[e];for(let t=0;t<s.length;t+=1){const e=s[t];e.x<-100?r[t]={x:e.x+360,y:e.y}:r[t]=e}}return t}return i},Yf=(t,e,i)=>{const s=e.name.toLowerCase();let r;if(t===Pf&&("alaska"===s?r={translate:{x:55,y:-25},scale:{x:.16,y:.16}}:"hawaii"===s&&(r={translate:{x:48,y:7},scale:{x:1,y:1}})),r){const{translate:t,scale:n}=r,o=So(Kr(i)),a=[];for(let e=0;e<i.length;e+=1){a[e]=[];const r=i[e],h=a[e];for(let e=0;e<r.length;e+=1){const i=r[e];let a=i.x;"alaska"===s&&1===Math.sign(a)&&(a=-180-(180-a)),h[e]={x:t.x+(a-o.min.x)*n.x+o.min.x,y:t.y+(i.y-o.min.y)*n.y+o.min.y}}}return e.outlier=!0,e.transform=l(l({},r),{},{vertexBoundaries:o}),a}return i},Gf={World:{min:{x:-180,y:-90},max:{x:180.0000000000002,y:83.63410065300012}},Europe:{min:{x:-25,y:34},max:{x:40,y:70}},Africa:{min:{x:-17,y:-40},max:{x:52,y:37.37549753800012}},Asia:{min:{x:27,y:-10.922621351999808},max:{x:180.0000000000002,y:81.85871002800009}},NorthAmerica:{min:{x:-179.1435033839999,y:5.515082098000121},max:{x:-50,y:83.11652252800009}},SouthAmerica:{min:{x:-85,y:-55.9185042229998},max:{x:-35,y:15}},USA:{min:{x:-125,y:24},max:{x:-68,y:50}},Canada:{min:{x:-141.0181,y:41.7297},max:{x:-52.6194,y:75}},Australia:{min:{x:111,y:-43.6586},max:{x:155,y:-9.2199}}},Xf={World:.6,Europe:1/1.4,Africa:1.3,Asia:.8,NorthAmerica:.9,SouthAmerica:1.5,USA:3/4,Canada:6/8,Australia:11/12};class Uf extends wd{constructor(t,e,i,s,r,n,o){var a;super(t,e,i,e.Vg("mapChart bg",0),s,e.gi.bi.mapChartBackgroundFillStyle,e.gi.bi.mapChartBackgroundStrokeStyle,e.gi.bi.mapChartTitleFont,e.gi.bi.mapChartTitleFillStyle,e.gi.bi.mapChartTitleShadow,o,null===(a=null==n?void 0:n.legend)||void 0===a?void 0:a.customLegend),this.Xm=[],this.oi=this.kg.d2({scaleXYConstructor:rr}),this.Zm=!0,this.Jm=this.bi.mapChartSeparateRegionFillStyle,this.Qm=this.bi.mapChartSeparateRegionStrokeStyle,this.Rh=!0,this.Km=0,this.qm=!0,this.tS=new Map,this.regions=new Ar,this.iS=t=>{this.oi.x.X(t.engineWidth).St([this.nt.left+this.On.left,this.nt.right+this.On.right]),this.oi.y.X(t.engineHeight).St([this.nt.bottom+this.On.bottom,this.nt.top+this.On.top+Md.Wg(this.Yh,this.Ng)]),this.sS&&this.eS(this.hS,this.oi,this.sS)},this.L=new Ar,this.gi.ka(_l.ko),this.Rh=!1!==(null==n?void 0:n.animationsEnabled),this.rS=e.Cm("mapChart plotting",0),this.addEventListener("resize",this.iS),this.Yh.Jr("Map Chart");const h=e.Dm(),c=$r(n?n.cursorBuilder:void 0,Cf);this.Rm=ym(this,h,c.sm(h,this.uiScale,this.uiScale,Jr,this.bi),void 0,"show-pointed",jf,()=>0),this.nS=this.ys.iA(),this.zg(r,this.uiScale),this.oS=this.rS.Ov(this.oi).setPointerEvents(this.Zm).Ke(this.bi.mapChartFillStyle).Qe(this.bi.mapChartStrokeStyle),this.regions.Vi(this.oS,t=>{if(!this.aS)return;const e=this.lS(this.aS,t);return e?e.region:void 0}),this.oS.addEventListener("pointermove",(t,e)=>{const i=e.collectionMember;if(!this.aS||!i)return;const s=this.lS(this.aS,i);this.cS(s),this.qm&&s&&this.gi.Ms.Vs(s.region,!0)}),this.oS.addEventListener("pointerleave",(t,e)=>{const i=e.collectionMember;if(!this.aS||!i)return;const s=this.lS(this.aS,i);this.uS(),this.qm&&s&&this.gi.Ms.Vs(s.region,!1)}),this.dS=this.rS.Ov(this.oi).setPointerEvents(this.Zm).Ke(this.bi.mapChartOutlierRegionFillStyle).Qe(this.bi.mapChartOutlierRegionStrokeStyle);const u=$r(n&&n.type,Ff);this.hS=u,this.fS(u).then(()=>{this.L.D("ready",{})});const d=l({renderOnTop:!0,backgroundVisible:!0},null==n?void 0:n.legend);this.legend.setOptions(d)}setFillStyle(t){return this.oS.Ke(t),this.Os.forEach(t=>{t.dg()&&t.add(this)}),this.Os.forEach(t=>t.zs()),this.gi.Bs(),this}getFillStyle(){return this.oS.pr()}setStrokeStyle(t){return this.oS.Qe(t),this.gi.Bs(),this}getStrokeStyle(){return this.oS.ja()}setEffect(t){return this.nS.Ls(t),this.gi.Bs(),this}getEffect(){return this.nS.Ds()}setOutlierRegionFillStyle(t){return this.dS.Ke(t),this.gi.Bs(),this}getOutlierRegionFillStyle(){return this.dS.pr()}setOutlierRegionStrokeStyle(t){return this.dS.Qe(t),this.gi.Bs(),this}getOutlierRegionStrokeStyle(){return this.dS.ja()}setSeparateRegionFillStyle(t){return this.Jm="function"==typeof t?t(this.Jm):t,this.Xm.forEach(t=>t.Ke(this.Jm)),this.gi.Bs(),this}getSeparateRegionFillStyle(){return this.Jm}setSeparateRegionStrokeStyle(t){return this.Qm="function"==typeof t?t(this.Qm):t,this.Xm.forEach(t=>t.Qe(this.Qm)),this.gi.Bs(),this}getSeparateRegionStrokeStyle(){return this.Qm}invalidateRegionValues(t){if(!this.aS||!this.AS)return this.gS=this.gS||[],this.gS.push(t),this;if("function"==typeof t)for(let e=0;e<this.aS.regions.length;e+=1){const i=this.aS.regions[e],s=this.AS[e],r=t(l(l({},i),{},{geometry:void 0}),s);if(void 0!==r&&r!==s){this.AS[e]=r;const t=this.tS.get(i);null==t||t.forEach(t=>{t.vS(r)})}}else for(const e of t)if(e)for(let t=0;t<this.aS.regions.length;t+=1){const i=this.aS.regions[t],s=this.AS[t];if(void 0!==e.value&&e.value!==s&&Vf(i,e)){this.AS[t]=e.value;const s=this.tS.get(i);null==s||s.forEach(t=>{t.vS(e.value)})}}return this.Os.forEach(t=>{t.dg()&&t.add(this)}),this.gi.Bs(),this}setPointerEvents(t){return this.Zm=t,this.oS.setPointerEvents(t),this}getPointerEvents(){return this.Zm}setHighlight(t){var e;return t=Yn(t),this.Km=t,null===(e=this.aS)||void 0===e||e.regions.forEach(e=>{this.gi.Ms.Vs(e,t)}),this.L.D("highlightchange",{highlight:t}),this}getHighlight(){return this.Km}setAnimationHighlight(t){var e;return null===(e=this.aS)||void 0===e||e.regions.forEach(e=>{this.gi.Ms.Ns(e,t)}),this}getAnimationHighlight(){var t;return this.gi.Ms.Gs(null===(t=this.aS)||void 0===t?void 0:t.regions[0])}setHighlightOnHover(t){return this.qm=t,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.qm}async fS(t){const e=await((t,e)=>{let i;if(t===Ff)i="countries_world.json";else if(t===Bf)i="countries_northAmerica.json";else if(t===Lf)i="countries_southAmerica.json";else if(t===Rf)i="countries_africa.json";else if(t===zf)i="countries_europe.json";else if(t===If)i="countries_asia.json";else if(t===Pf)i="states_usa.json";else if(t===Df)i="territoriesProvinces_canada.json";else{if(t!==_f){const e="LCJS MapChart unidentified `type`: ".concat(t);throw Ur.alert(e),new Error(e)}i="territories_australia.json"}return new Promise((t,s)=>{(t=>{if(t.resourcesBaseUrl){const e="".concat(t.resourcesBaseUrl).concat(t.fileName);return void Ur.fetch(e).then(e=>{t.success(e)}).catch(()=>{t.error({url:e})})}const e="".concat(Ur.location.origin,"/resources").concat(t.fileName);Ur.fetch(e).then(e=>{if(!e.ok)throw new Error;t.success(e)}).catch(()=>{const i="https://lcjs-resources.lightningchart.com/v1".concat(t.fileName);Ur.fetch(i).then(e=>{Ur.console.warn("LightningChart JS warning | fallbacking publicly hosted asset resources.\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/warning-using-publicly-hosted-resources/"),t.success(e)}).catch(()=>{t.error({url:e})})})})({fileName:"/maps/".concat(i),resourcesBaseUrl:e,success:e=>e.json().then(t),error:t=>{let{url:i}=t;return Hn(e,i,"Map Chart",{shouldCrash:!0})}})})})(t,this._g.me);this.AS=new Array(e.regions.length).map(t=>{}).fill(void 0);const i=Gf[t];if(!i)throw new Error("Unidentified map type.");for(const r of e.outliers)for(const t of r.geometry)this.dS.Go().rc(t);if(t===Pf){const t=25.8,e=29.7;this.Xm.push(this.Mg.qe(this.oi).setPointerEvents(!1).Ke(this.Jm).Qe(this.Qm).ih({x:-126,y:t}).X({x:10,y:e-t}),this.Mg.qe(this.oi).setPointerEvents(!1).Ke(this.Jm).Qe(this.Qm).ih({x:-113,y:t}).X({x:7,y:e-t}))}const s=this.gi.Ms.No(this.oS,{animationEnabled:this.Rh});for(let r=0;r<e.regions.length;r+=1){const i=e.regions[r],n=Nf(t,i),o=[];for(const t of n)t.length<3||o.push(this.oS.Go().rc(t));this.tS.set(i,o),s.Go(i,t=>{o.forEach(e=>e.Fi(t))})}if(this.nS.ks([this.oS]),this.sS=i,this.eS(t,this.oi,i),this.aS=e,this.gS){for(const t of this.gS)this.invalidateRegionValues(t);this.gS=void 0}this.gi.Bs()}eS(t,e,i){const s=Xf[t],r=e.x.getCellSize(),n=e.y.getCellSize()/r,o={min:{x:i.min.x,y:i.min.y},max:{x:i.max.x,y:i.max.y}};if(n<s){const t=(o.max.x-o.min.x)*(s/n-1);o.min.x-=t/2,o.max.x+=t/2}else if(n>s){const t=(o.max.y-o.min.y)*(n/s-1);o.min.y-=t/2,o.max.y+=t/2}e.x.H(o.min.x,o.max.x),e.y.H(o.min.y,o.max.y);const a=this.oi.x.Ct(),h=this.oi.y.Ct();this.L.D("viewchange",{latitudeRange:{start:o.min.y,end:o.max.y},longitudeRange:{start:o.min.x,end:o.max.x},margin:{top:h[1],bottom:h[0],left:a[0],right:a[1]}})}cS(t){this.yS=t,this.gi.Bs()}uS(){this.yS=void 0,this.gi.Bs()}lS(t,e){const i=Array.from(this.tS.entries()).findIndex(t=>{let[i,s]=t;return s.includes(e)}),s=null==t?void 0:t.regions[i],r=this.gi._a();if(!r)return;const n=this.gi.Ja(r),o=this.AS&&this.AS[i];let a=hr({x:n.engineX,y:n.engineY},this.gi.oi,this.oi);a={x:Qr(a.x,this.oi.x.getInnerStart(),this.oi.x.getInnerEnd()),y:Qr(a.y,this.oi.y.getInnerStart(),this.oi.y.getInnerEnd())};let h=a.x,l=a.y;const c=s.transform;s.outlier&&c&&(h=(h-c.translate.x-c.vertexBoundaries.min.x)/c.scale.x+c.vertexBoundaries.min.x,l=(l-c.translate.y-c.vertexBoundaries.min.y)/c.scale.y+c.vertexBoundaries.min.y);const u=this.getFillStyle();return{cursorPosition:{pointMarker:{x:n.engineX,y:n.engineY},pointMarkerScale:this.gi.oi,resultTable:{x:n.engineX,y:n.engineY},resultTableScale:this.gi.oi},region:s,value:o,longitude:l,latitude:h,lut:fa(u)?u.lut:void 0}}setCursor(t){return this.Rm.setCursor(t),this}getCursor(){return this.Rm.getCursor()}setCursorMode(t){return this.Rm.setCursorMode(t),this}getCursorMode(){return this.Rm.getCursorMode()}setCustomCursor(t){return this.Rm.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.Rm.Ym(t),this}setCursorFormatting(t){return this.Rm.setCursorFormatting(t),this}getCursorFormatting(){return this.Rm.getCursorFormatting()}addCursor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cf;const e=this.Tg(),i=t.sm(e,this.uiScale,this.uiScale,this.wg(e),this.bi);return this.Eg(i),i}setAnimationsEnabled(t){return this.Rh=!t,this}getAnimationsEnabled(){return this.Rh}getMinimumSize(){}gg(){return[this]}th(t){super.th(t),super.Og();const e=Md.Wg(this.Yh,this.Ng),i=this.Os.reduce((t,i)=>{const s=i.Er(e,this.On);return{top:Math.max(t.top,s.top),bottom:Math.max(t.bottom,s.bottom),left:Math.max(t.left,s.left),right:Math.max(t.right,s.right)}},{top:0,bottom:0,left:0,right:0});Md.Xg(this.Yh,this.Ng,this.uiScale.ri(),this.On,i);const s=Ts(this.oi.x.bt()+i.left,this.oi.y.bt()+i.bottom,this.oi.x.Mt()-i.right,this.oi.y.Mt()-i.top);return this.rS.ym(s),this.Rm.th(!1,[],void 0,{explicitTarget:this.yS}),this.Os.forEach(t=>t.th(e,this.On)),this}dispose(){return this.rS.N(),this.Rm.N(),Ed(this.oi),super.dispose()}Y(){return super.Y(),this.oi.Y(),this}j(){return super.j(),this.oi.j(),this}Ys(){return Ln(this.getFillStyle(),this.oS.wi())}sh(){return{fill:this.getFillStyle()}}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}const Hf=(t,e)=>{const i=t>0,s=e>0;return"".concat([zn(Math.abs(0|t),2),"\xb0 ",zn(Math.abs(0|(t<0?t=-t:t)%1*60),2),"' "].join("")+(i?"E":"W"),", ").concat([zn(Math.abs(0|e),2),"\xb0 ",zn(Math.abs(0|(e<0?e=-e:e)%1*60),2),"' "].join("")+(s?"N":"S"))},jf=(t,e,i)=>{var s;const r=[[{text:e.region.name,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[Hf(e.longitude,e.latitude)]];return void 0!==e.value&&r.push({text:Ea(e.lut?ea(e.lut,e.value):e.value.toFixed(2),null===(s=e.lut)||void 0===s?void 0:s.units),font:{weight:"bold"}}),r};class Wf extends El{constructor(t,e,i,s,r,n,o,a,h){super(t,e,e.pS(i),s,r,{numeric:e.mS({amplitude:s.polarAmplitudeAxisNumericTicks,radial:s.polarAmplitudeAxisNumericTicks}),datetime:e.mS({amplitude:s.polarAmplitudeAxisDateTimeTicks,radial:s.polarAmplitudeAxisDateTimeTicks}),time:e.mS({amplitude:s.polarAmplitudeAxisTimeTicks,radial:s.polarAmplitudeAxisTimeTicks})},{type:"linear"}),this.L=new Ar,this.SS=n,this.bS=o,this.xS=a,this.ys=h,this.MS=i,this.wS=e.mS({amplitude:s.polarAmplitudeAxisStrokeStyle,radial:s.polarRadialAxisStrokeStyle}),this.Jh=a.bn(i).setPointerEvents(!1).Mr(e.mS({amplitude:s.polarAmplitudeAxisTitleFont,radial:s.polarRadialAxisTitleFont})).Ke(e.mS({amplitude:s.polarAmplitudeAxisTitleFillStyle,radial:s.polarRadialAxisTitleFillStyle})),this.kr=this.ys.iA([this.Jh]).Ls(s.effectsText)}setTickStrategy(t,e){return super.cr(t,e)}setStrokeStyle(t){return this.wS="function"==typeof t?t(this.wS):t,this.bS.Bs(),this}getStrokeStyle(){return this.wS}Nr(t){return{}}Yr(t,e,i,s){const r=this._S(this.MS,t,e.Fh);return{keyValue:t,tickLevel:e,labelText:i,labelPosition:Lo(this.kS(this.MS,t),r.padding),labelAlignment:r.alignment,labelRotation:r.rotation,labelOffset:r.offset}}Qr(t,e,i,s){return new Zf(e,t,this.MS,this.xS,this.CS(this.SS,this.MS),this.xS.fh(this.MS).setPointerEvents(!1))}Kh(){return this.MS}th(t){this.TS(this.MS,this.wS,t.uA),this.FS(this.MS,this.Jh,t.uA),t.ticksInfo.forEach((t,e)=>{e.Dr.ih(t.labelPosition).Yl(t.labelAlignment).wr(t.labelRotation).Ol(t.labelOffset.x,t.labelOffset.y),this.IS&&!1===this.IS(e)&&e.Dr.setVisible(!1),this.PS(this.MS,e.LS,e.BS,e)})}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}setPointerEvents(t){return this.L.setPointerEvents(t),this}getPointerEvents(){return this.L.getPointerEvents()}}class Zf extends kl{constructor(t,e,i,s,r,n,o){super(t,e,s,i,o),this.LS=r,this.BS=n,r.setPointerEvents(!1),this.gs.push(r,n)}}class Jf extends Wf{constructor(t,e,i,s,r,n,o,a,h){super(t,qf(()=>this.aA()),e,i,s,r,n,o,a),this.Lv=this.bS.fh(this.MS).setPointerEvents(!1),this.DS=h,this.setScrollStrategy(ol),this.setTickStrategy(hl),this.setTitle("Amplitude"),this.Jh.Zr(i.polarAmplitudeAxisTitleShadow)}aA(){return this.DS()}Wr(t,e,i){return{ticksInfo:e,uA:this.hn((t,e)=>{const i=e.xn.Fh,s=.5*this.wS.getThickness()+i.tickLength+i.tickPadding+Math.abs(e.Dr.Er().vu().y);return Math.max(t,s)},0),updatedTicks:i}}fn(t,e){return wa(t,e,this.MS.y)}vn(t,e,i){const s=2*Math.abs(e-t),r=this.MS.x.Zt(s);return{start:t+i.start*r*Math.sign(t-e),end:e+i.end*r*Math.sign(e-t)}}kS(t,e){return{x:t.ce()?e-t.le().start:t.le().start-e,y:0}}CS(t,e){return t.md(e)}PS(t,e,i,s){const r=s.xn.Fh,n=t.ce()?s.S-t.le().start:t.le().start-s.S;qr(s.S,t.le().start)||qr(s.S,t.le().end)?e.setVisible(!1):e.setVisible(!0).Zc(0).Ah(360).tu(void 0).qc(0).Jc(n).tu(60).Ke(sa).Qe(r.gridStrokeStyle);const o=.5*this.wS.getThickness();i.gh({x:n,y:-o*t.ri().y}).Ah({x:n,y:-(o+r.tickLength)*t.ri().y}).dh(r.tickStyle)}_S(t,e,i){return{alignment:{x:0,y:1},padding:{x:0,y:t.ri().y*-(.5*this.wS.getThickness()+i.tickLength+i.tickPadding)},rotation:0,offset:{x:0,y:0}}}TS(t,e,i){const s=t.ce()?t.le().end-t.le().start:t.le().start-t.le().end;this.Lv.gh({x:0,y:0}).Ah({x:s,y:0}).dh(e)}FS(t,e,i){const s=t.ce()?(t.le().start+t.le().end)/2-t.le().start:t.le().start-(t.le().start+t.le().end)/2;e.Yl({x:0,y:1}).ih({x:s,y:-i*t.ri().y})}}const qf=t=>l(l({},_d(t,t=>t.getAmplitudeMin(),t=>t.getAmplitudeMax(),t=>{})),{},{pS:t=>({getInnerStart:()=>t.le().start,getInnerEnd:()=>t.le().end,H:(e,i)=>t.oe(e,i),st:(e,i,s,r,n)=>t.y.st(e,i,s,r,n)}),mS:t=>t.amplitude});class Qf{constructor(t,e,i,s){this.RS=!1,this.L=new Ar,this.fs=t,this.ES=e,this.ny=i,this.bu=s}setGeometry(t){return this.OS=t,this.RS=!0,this.fs.gi.Bs(),this}getGeometry(){return this.OS}setPointerEvents(t){return this.bu.setPointerEvents(t),this}dispose(){return this.bu.dispose(),this.ES(this),this.L.D("dispose",{}),this}setVisible(t){const e=this.bu.getVisible()!==t;return this.bu.setVisible(t),e&&this.L.D("visiblechange",{isVisible:t}),this.fs.gi.Bs(),this}getVisible(){return this.bu.getVisible()}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class Kf extends Fa{constructor(){super(...arguments),this.Qg=!0,this.Jg=!0}setAutoScrollingEnabled(t){return this.Qg=t,this.fs.gi.Bs(),this}getAutoScrollingEnabled(){return this.Qg}rv(){}th(){}nv(){}setCursorEnabled(t){return this.Jg=t,this}getCursorEnabled(){return this.Jg}sv(){return this.getVisible()&&this.getCursorEnabled()}setCursorFormattingOverride(t){return this.tv=t,this}getCursorFormattingOverride(){return this.tv}}class $f extends Kf{constructor(t,e,i,s,r,n){super(e,i,r,n),this.Ws=t,this.fs=e,this.scale=s}getAmplitudeMin(){return this.zS?this.zS.min:void 0}getAmplitudeMax(){return this.zS?this.zS.max:void 0}}const tg=(t,e)=>{const i=[],s=e.le().start,r=e.le().end,n=e.ce(),o=e.de()?1:-1,a=e.Ae(),h=Math.abs(r-s),l=Math.min(s,r)+.001*h,c=Math.max(s,r)-.001*h;for(const u of t){const t=Qr(u.amplitude,l,c),e=u.angle*Math.PI/180-a,r=Math.cos(e*o)*(n?t-s:s-t),h=Math.sin(e*o)*(n?t-s:s-t),d=u.color;i.push({x:r,y:h,color:d})}return i},eg=t=>{const e={min:ro,max:no};for(const i of t)e.min=Math.min(e.min,i.amplitude),e.max=Math.max(e.max,i.amplitude);return e},ig=t=>t.slice().map(t=>t.angle>=0&&t.angle<=360?t:l(l({},t),{},{angle:t.angle%360})),sg=(t,e)=>{let i=Oo(t);for(e.de()||(i*=-1),i+=180*e.Ae()/Math.PI;i<0;)i+=360;i%=360;const s=Po(t),r=e.le(),n=Math.abs(r.end-r.start);return{angle:i,amplitude:Ia(r.start,r.end,s/n)}};class rg extends $f{constructor(t,e,i,s,r,n,o){super(t,e,i,s,r,o),this.Es="Polygon Series",this.VS=[],this.NS=[],this.GS=t=>{const e=this.NS.indexOf(t);e>=0&&this.NS.splice(e,1);const i=this.VS.findIndex(e=>e===t.bu);i>=0&&this.VS.splice(i,1),this.Ws.Bs()},this.L=new Ar,this.Xe=In(this.bi.polarPolygonSeriesFillStyle,n),this.Ze=In(this.bi.polarPolygonSeriesStrokeStyle,n)}solveNearest(t,e){const i=this.fs.gi.Ja(t),s={x:i.engineX,y:i.engineY},r=xa(s,this.VS,(t,e)=>{const i=t.dd(e);if(i)return hr(i,this.scale,t.gi.oi)},mo);if(!r)return;const n=hr(r[0],r[1].gi.oi,this.scale);if(!this.$S(r[1]))return;const o=sg(n,this.scale);return l({cursorPosition:{pointMarker:n,pointMarkerScale:this.scale,resultTable:n,resultTableScale:this.scale},series:this},o)}Ji(t,e,i){return Qn({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},()=>this.solveNearest(e,this.fs.getCursorMode()))}addPolygon(){const t=new Qf(this.fs,this.GS,this,this.US());return this.NS.push(t),t}setFillStyle(t){this.Xe="function"==typeof t?t(this.Xe):t;const e=this.Xe;for(const i of this.VS)i.Ke(e);return this.Ws.Bs(),this}getFillStyle(){return this.Xe}setStrokeStyle(t){this.Ze="function"==typeof t?t(this.Ze):t;const e=this.Ze;for(const i of this.VS)i.Qe(e);return this.Ws.Bs(),this}getStrokeStyle(){return this.Ze}Av(){return this.Qg&&void 0!==this.NS.find(t=>void 0!==t.YS)&&this.getVisible()}th(){this.NS.forEach(t=>{(t.RS||this.scale.ge())&&t.jS&&(t.bu.rc(tg(t.jS,this.scale)),t.RS=!1,t.bu.Er())})}rv(){super.rv();const t=Cs(ro,no);this.NS.forEach(e=>{if(!e.OS)return;const i=!e.RS&&e.jS?e.jS:ig(e.OS);e.jS=i;const s=!e.RS&&e.YS?e.YS:eg(i);e.YS=s,t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max)}),this.zS=t}eh(t,e){t.Fi(e),this.Ws.Bs()}sh(){return{fill:this.Xe,stroke:this.Ze}}US(){const t=this.Ws.xu(this.scale,gc.Simple).Ke(this.Xe).Qe(this.Ze).Fi(this.getHighlight());return this.VS.push(t),this._s(t),t}$S(t){return this.NS.find(e=>e.bu===t)}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class ng extends $f{constructor(t,e,i,s,r,n,o){super(t,e,i,s,r,o),this.Es="Area Series",this.HS=[],this.WS=!1,this.XS=!1,this.ZS=!1,this.L=new Ar,this.Xe=In(this.bi.polarAreaSeriesFillStyle,n),this.Ze=In(this.bi.polarAreaSeriesStrokeStyle,n)}setData(t){0!==this.HS.length&&this.fs.gi.ka(_l.Lo);const e=(t=>{const e=[];let i,s,r=!1;for(let n=0;n<t.length;n+=1){const o=t[n];let a=!0;if(i){a=!1;const t=o.angle-i.angle;if(qr(t,0))a=!0;else{const e=Math.sign(t);void 0===s?(s=e,a=!0):s===e&&(a=!0)}}a?e.push(o):r=!0,i=o}return{progressivePoints:e,userDataModified:r}})(t);return e.userDataModified&&!1===this.ZS&&(console.warn("".concat(this.Es," setData data format is faulty. Consecutive 'angle' values should progress in the same direction! Invalid data points have been removed.")),this.ZS=!0),this.HS=e.progressivePoints,this.WS=!0,this.zS=eg(this.HS),this.Ws.Bs(),this}setFillStyle(t){return this.Xe="function"==typeof t?t(this.Xe):t,this.Ws.Bs(),this}getFillStyle(){return this.Xe}setStrokeStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.Ws.Bs(),this}getStrokeStyle(){return this.Ze}setConnectDataAutomaticallyEnabled(t){return this.XS=t,this.Ws.Bs(),this}getConnectDataAutomaticallyEnabled(){return this.XS}Av(){return this.Qg&&this.HS.length>0&&this.getVisible()}sh(){return{fill:this.Xe,stroke:this.Ze}}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class og extends ng{constructor(t,e,i,s,r,n,o){super(t,e,i,s,r,n,o),this.JS=this.Ws.xu(this.scale,gc.Simple).Fi(this.getHighlight()),this._s(this.JS)}solveNearest(t,e){const i=this.fs.gi.Ja(t),s={x:i.engineX,y:i.engineY},r=this.JS.dd(s);if(!r)return;const n=sg(r,this.scale);return l({cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this},n)}Ji(t,e,i){return Qn({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},()=>this.solveNearest(e,this.fs.getCursorMode()))}th(){if(this.WS||this.scale.ge()){const t=this.HS,e=!0===this.XS?tg(t,this.scale):[...tg(t,this.scale),{x:0,y:0}];this.JS.rc(e).Ke(this.Xe).Qe(this.Ze),this.WS=!1,this.JS.Er()}}eh(t,e){t.Fi(e),this.Ws.Bs()}}class ag extends $f{constructor(t,e,i,s,r,n,o){super(t,e,i,s,r,o),this.Es="Line Series",this.HS=[],this.WS=!1,this.XS=!1,this.L=new Ar,this.iu=In(this.bi.polarLineSeriesStrokeStyle,n),this.QS=t.Dv(s,void 0,[Pd.UserSeries]).dh(this.iu).Fi(this.getHighlight()),this._s(this.QS)}solveNearest(t,e){const i=this.fs.gi.Ja(t),s={x:i.engineX,y:i.engineY},r=this.QS.KS(s);if(!r)return;const n=sg(r,this.scale);return l({cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this},n)}Ji(t,e,i){return Qn({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},()=>this.solveNearest(e,"show-nearest"))}setData(t){return 0!==this.HS.length&&this.fs.gi.ka(_l.Lo),this.HS=ig(t),this.WS=!0,this.zS=eg(this.HS),this.Ws.Bs(),this}setStrokeStyle(t){this.iu="function"==typeof t?t(this.iu):t;const e=this.iu;return this.QS.dh(e),this.Ws.Bs(),this}getStrokeStyle(){return this.iu}setConnectDataAutomaticallyEnabled(t){return this.XS=t,this.Ws.Bs(),this}getConnectDataAutomaticallyEnabled(){return this.XS}Av(){return this.Qg&&this.HS.length>0&&this.getVisible()}eh(t,e){t.Fi(e),this.Ws.Bs()}th(){if(this.WS||this.scale.ge()){const t=tg(this.HS,this.scale),e=So(t);this.XS?(t.push(l({},t[0])),this.QS.Fc(!0)):this.QS.Fc(!1),this.QS.zi().Sc(t).Ci(e),this.WS=!1,this.QS.Er()}}sh(){return{stroke:this.iu}}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class hg extends Pl{constructor(t,e,i,s,r,n,o,a,h){super(),this.mi=Jn(),this.ci=!1,this.L=new Ar,this.qS=s,this.tb=r,this.ib=n,this.sb=o,this.eb=a,this.Ws=t,this.scale=e,this.hb=i,this.bi=h}rb(t){this.nb=t}setHighlight(t){const e=Yn(t);return this.ob=e<=0?void 0:e,this.nb&&this.nb.Fi(e),this.L.D("highlightchange",{highlight:e}),this}dispose(){return this.hb&&this.hb(this),this.Ws.gi.Bs(),this.L.D("dispose",{}),this.ci=!0,this}setVisible(t){return super.setVisible(t),this.ib(),this.Ws.gi.Bs(),this}isDisposed(){return this.ci}setPointerEvents(t){return this.sb(this,t),this}getPointerEvents(){return this.eb(this)}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class lg extends hg{constructor(t,e,i,s,r,n,o,a,h,l,c,u,d,f,g,p,y,m){super(e,i,s,r,n,o,a,h,m),this.ab=1,this.lb=1,this.ny=t,this.Ws=e,this.scale=i,this.dimensionStrategy=l,this.start=c,this.end=u,this.lowerExtreme=d,this.lowerQuartile=f,this.median=g,this.upperQuartile=p,this.upperExtreme=y,this.boundaries=Cs(this.dimensionStrategy.toPoint(c,d),this.dimensionStrategy.toPoint(u,y)),this.cb=this.bi.boxSeriesBodyFillStyle,this.ub=this.bi.boxSeriesBodyStrokeStyle,this.iu=this.bi.boxSeriesStrokeStyle,this.fb=this.bi.boxSeriesMedianStrokeStyle,this.Er()}Ji(t,e){const i=this.ny.Xs.toPoint((this.start+this.end)/2,this.median);return l(l({cursorPosition:{resultTable:i,resultTableScale:this.scale,pointMarker:i,pointMarkerScale:{x:this.ny.axisX,y:this.ny.axisY}}},i),{},{figure:this,start:this.start,end:this.end,lowerExtreme:this.lowerExtreme,lowerQuartile:this.lowerQuartile,median:this.median,upperQuartile:this.upperQuartile,upperExtreme:this.upperExtreme,series:this.ny,axisX:this.ny.axisX,axisY:this.ny.axisY})}Ab(){return this.boundaries}setBodyWidth(t){return this.ab=t,this.Er(),this}getBodyWidth(){return this.ab}setBodyFillStyle(t){return this.cb="function"==typeof t?t(this.cb):t,this.tb(),this}getBodyFillStyle(){return this.cb}setBodyStrokeStyle(t){return this.ub="function"==typeof t?t(this.ub):t,this.tb(),this}getBodyStrokeStyle(){return this.ub}setTailWidth(t){return this.lb=t,this.Er(),this}getTailWidth(){return this.lb}setStrokeStyle(t){return this.iu="function"==typeof t?t(this.iu):t,this.tb(),this}getStrokeStyle(){return this.iu}setMedianStrokeStyle(t){return this.fb="function"==typeof t?t(this.fb):t,this.tb(),this}getMedianStrokeStyle(){return this.fb}Er(){this.qS()}getDominantStyle(){return this.getBodyFillStyle()}}class cg extends Kf{constructor(t,e,i,s,r,n,o,a,h,l){super(t,e,h,l),this.Hs=!0,this.gs=new Map,this.fs=t,this.Ws=i,this.axisX=s,this.axisY=r,this.axisXAttachHandler=n,this.axisYAttachHandler=o,this.scale=ga(s.oi,r.oi),this.gb=t.yb,t.yb+=1,this.pb(this.scale),this.attacheAxis()}get xAxis(){return this.axisX}get yAxis(){return this.axisY}tl(){const t=Array.from(this.gs.keys());for(const e of t){const t=e.tl();if(t)return t}}setClipping(t){return this.Hs=t,this.Ws.Bs(),this}getClipping(){return this.Hs}attacheAxis(){this.mb=this.axisXAttachHandler(this),this.Sb=this.axisYAttachHandler(this)}_s(t,e){super._s(t,e),t.il(this.gb)}getName(){const t=this.ws(),e="ProgressiveY"===t||"RegressiveY"===t?this.axisX.getTitle():this.axisY.getTitle();return this.Es||e.length>0&&e||"Series"}setDrawOrder(t){return this.gb=t.seriesDrawOrderIndex,this.gs.forEach((t,e)=>{e.il(this.gb)}),this.fs.gi.Bs(),this}dispose(){return super.dispose(),this.mb(this),this.Sb(this),this.fs.legend.remove(this),this}nv(){super.nv(),Aa(this.Hs,Array.from(this.gs.keys()),this.scale)}getXMax(){var t;return null!==(t=this.bb(!1))&&void 0!==t?t:0}getXMin(){var t;return null!==(t=this.xb(!1))&&void 0!==t?t:0}getYMax(){var t;return null!==(t=this.Mb(!1))&&void 0!==t?t:0}getYMin(){var t;return null!==(t=this.wb(!1))&&void 0!==t?t:0}getBoundaries(){return Cs(As(this.getXMin()||0,this.getYMin()||0),As(this.getXMax()||0,this.getYMax()||0))}setCursorEnabled(t){return super.setCursorEnabled(t)}}const ug=(t,e,i,s)=>{const r=t.length;let n=0;if(void 0!==e){const r=i-e;if(r>0){const e=t.slice(n,r);n+=r,s(e,!0)}}for(;n<r;){const e=t.slice(n,n+i);n+=i,s(e,!1)}};class dg extends cg{constructor(t,e,i,s,r,n,o,a,h,l){super(t,e,i,s,r,n,o,a,h,l),this._b=[],this.kb=void 0,this.Cb=!1,this.hb=t=>{const e=this._b.findIndex(e=>e===t);e>=0&&this._b.splice(e,1),this.Cb=!0,this.kb=void 0,this.Ws.Bs()},this.qS=()=>{this.kb=void 0,this.Cb=!0,this.fs.gi.Bs()},this.tb=()=>{this.Cb=!0,this.fs.gi.Bs()},this.ib=()=>{this.kb=void 0,this.Cb=!0,this.fs.gi.Bs()},this.sb=(t,e)=>{this.setPointerEvents(e)},this.Tb=t=>this.getPointerEvents(),this.us=Ca.onHoverIndividual}dv(){return this._b.length>0}th(){super.th(),this.Cb&&(this.Fb(this._b),this.Cb=!1)}clear(){return this._b.slice().forEach(Zr),this._b.length=0,this.Cb=!0,this.kb=void 0,this.Ws.Bs(),this}Ib(t,e){void 0!==e?this._b.splice(e,0,t):this._b.push(t),this.Cb=!0,this.Pb&&this.Pb(t),this.L.Ni(t),this.Ws.Bs(),t.addEventListener("pointerenter",()=>{this.us===Ca.onHoverIndividual&&t.setHighlight(!0)}),t.addEventListener("pointerleave",()=>{this.us===Ca.onHoverIndividual&&t.setHighlight(!1)})}Av(){return this.Qg&&this._b.length>0&&this.getVisible()}setDefaultStyle(t){return this.Pb=t,this._b.forEach(t),t(this.Lb),this.Cb=!0,this.fs.gi.Bs(),this}setVisible(t){return super.setVisible(t),t!==this.getVisible()&&this._b.forEach(e=>e.setVisible(t)),this}bb(){return this.kb||(this.kb=this.Bb()),this.kb.max.x}xb(){return this.kb||(this.kb=this.Bb()),this.kb.min.x}Mb(){return this.kb||(this.kb=this.Bb()),this.kb.max.y}wb(){return this.kb||(this.kb=this.Bb()),this.kb.min.y}un(){return As(0,0)}Bb(){const t=Cs(Es(ro,ro),Es(no,no));for(let e=0;e<this._b.length;e+=1)if(this._b[e].getVisible()){const i=this._b[e].Ab();t.min.x=Math.min(t.min.x,i.min.x),t.min.y=Math.min(t.min.y,i.min.y),t.max.x=Math.max(t.max.x,i.max.x),t.max.y=Math.max(t.max.y,i.max.y)}return t}sh(){return{fill:this._b.length>0?this._b[0].getDominantStyle():this.Lb.getDominantStyle()}}}class fg extends dg{constructor(t,e,i,s,r,n,o,a,h,l,c,u){super(t,e,i,s,r,n,o,a,l,c),this.Es="Box Series",this.Db=Wn(),this.Rb=t=>hr(this.Xs.toPoint((t.start+t.end)/2,t.median),this.scale,this.Ws.gi.oi),this.L=new Ar,this.fs.gi.ka(_l.Io),this.Xs=h,this.Lb=new lg(this,this.Ws,this.scale,this.hb,Jr,Jr,Jr,Jr,t=>!1,this.Xs,0,0,0,0,0,0,0,this.bi).dispose(),this.Eb=new Dd(()=>{const t=this.Ws.gA(this.scale);return this._s(t,{setEventHandlers:!1,pointerEventsDisabled:!0}),t},(t,e,i)=>(t.dh(i.strokeStyle),e.map(e=>{const i=e.existingMember||t.Go();return i.yA(e.start,e.end),i}))),this.Ob=new Dd(()=>{const t=this.Db.Zi(this.Ws.Ov(this.scale));return this._s(t,{setEventHandlers:!1}),t},(t,e,i)=>(t.Ke(i.fillStyle).Qe(i.strokeStyle),e.map(e=>{const i=e.existingMember||t.Go();return i.rc(e.vertices),this.Db.Qi(i,e.figure),e.figure.rb(i),i})),()=>{this.Db.zi()},(t,e)=>{this.Ts(e)})}solveNearest(t,e){const i=this.fs.gi.Ja(t),s={x:i.engineX,y:i.engineY};if(0===this._b.length)return;const r=xa(s,this._b.filter(t=>t.getVisible()),this.Rb,mo);if(!r)return;const n=hr(r[0],this.Ws.gi.oi,this.scale);return l(l({cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}}},n),{},{figure:r[1],start:r[1].start,end:r[1].end,lowerExtreme:r[1].lowerExtreme,lowerQuartile:r[1].lowerQuartile,median:r[1].median,upperQuartile:r[1].upperQuartile,upperExtreme:r[1].upperExtreme,series:this,axisX:this.axisX,axisY:this.axisY})}Ji(t,e,i){if(!i)return;const s=this._b.find(t=>t.nb===i);if(!s)return;const r=this.Xs.toPoint((s.start+s.end)/2,s.median);return l(l({cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}}},r),{},{start:s.start,end:s.end,lowerExtreme:s.lowerExtreme,lowerQuartile:s.lowerQuartile,median:s.median,upperQuartile:s.upperQuartile,upperExtreme:s.upperExtreme,figure:s,series:this,axisX:this.axisX,axisY:this.axisY})}pb(t){if(!(t instanceof rr||t instanceof nr))throw new Error("BoxSeries only supports Linear Axes")}Fb(t){const e=this.Ob.LA(),i=this.Eb.LA();t.forEach(t=>{if(!t.getVisible())return;const s=this.Xs.toPoint((t.start+t.end-t.ab*(t.end-t.start))/2,t.lowerQuartile),r=this.Xs.toPoint((t.end-t.start)*t.ab,t.upperQuartile-t.lowerQuartile),n=this.Xs.toPoint((t.start+t.end)/2,t.lowerQuartile),o=this.Xs.toPoint((t.start+t.end)/2,t.lowerExtreme),a=this.Xs.toPoint((t.start+t.end)/2,t.upperQuartile),h=this.Xs.toPoint((t.start+t.end)/2,t.upperExtreme),l=this.Xs.toPoint((t.start+t.end-t.lb*(t.end-t.start))/2,t.lowerExtreme),c=this.Xs.toPoint((t.start+t.end+t.lb*(t.end-t.start))/2,t.lowerExtreme),u=this.Xs.toPoint((t.start+t.end-t.lb*(t.end-t.start))/2,t.upperExtreme),d=this.Xs.toPoint((t.start+t.end+t.lb*(t.end-t.start))/2,t.upperExtreme),f=this.Xs.toPoint((t.start+t.end-t.ab*(t.end-t.start))/2,t.median),g=this.Xs.toPoint((t.start+t.end+t.ab*(t.end-t.start))/2,t.median);e.add({mi:t.mi,vertices:[{x:s.x,y:s.y},{x:s.x,y:s.y+r.y},{x:s.x+r.x,y:s.y+r.y},{x:s.x+r.x,y:s.y}],figure:t},{fillStyle:t.cb,strokeStyle:t.ub}),i.add({mi:0,start:n,end:o,figure:t},{strokeStyle:t.iu}),i.add({mi:0,start:a,end:h,figure:t},{strokeStyle:t.iu}),i.add({mi:0,start:l,end:c,figure:t},{strokeStyle:t.iu}),i.add({mi:0,start:u,end:d,figure:t},{strokeStyle:t.iu}),i.add({mi:0,start:f,end:g,figure:t},{strokeStyle:t.fb})}),e.finishPlot(),i.finishPlot()}add(t){const e=new lg(this,this.Ws,this.scale,this.hb,this.qS,this.tb,this.ib,this.sb,this.Tb,this.Xs,t.start,t.end,t.lowerExtreme,t.lowerQuartile,t.median,t.upperQuartile,t.upperExtreme,this.bi);return this.Ib(e),this.Cb=!0,this.fs.gi.Bs(),e}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class gg extends hg{constructor(t,e,i,s,r,n,o,a,h,l,c){super(e,i,s,r,n,o,a,h,l),this.dimensions={x:0,y:0,radiusX:0,radiusY:0},this.sc=Cs(As(0,0),As(0,0)),this.ny=t,this.Ws=e,this.scale=i,this.Xe=In(l.ellipseSeriesFillStyle,c),this.Ze=In(l.ellipseSeriesStrokeStyle,c)}Ji(t,e){const i=this.getDimensions(),s=As(i.x,i.y);return l(l(l({cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.ny.axisX,y:this.ny.axisY}}},s),{},{figure:this},this.getDimensions()),{},{series:this.ny,axisX:this.ny.axisX,axisY:this.ny.axisY})}Ab(){return this.sc}setDimensions(t){return this.dimensions=t,this.sc=Cs(As(t.x-t.radiusX,t.y-t.radiusY),As(t.x+t.radiusX,t.y+t.radiusY)),this.qS(),this.Ws.Bs(),this}getDimensions(){return this.dimensions}setFillStyle(t){return this.Xe="function"==typeof t?t(this.Xe):t,this.tb(),this}getFillStyle(){return this.Xe}setStrokeStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.tb(),this}getStrokeStyle(){return this.Ze}getDominantStyle(){return this.Xe}}class pg extends dg{constructor(t,e,i,s,r,n,o,a,h,l,c){super(t,e,i,s,r,n,o,a,h,l),this.Es="Ellipse Series",this.Db=Wn(),this.Rb=t=>{const e=t.getDimensions(),i=As(e.x,e.y);return hr(i,this.scale,this.Ws.gi.oi)},this.L=new Ar,this.fs.gi.ka(_l.Io),this.zb=c,this.Lb=new gg(this,this.Ws,this.scale,Jr,Jr,Jr,Jr,Jr,t=>!1,this.bi,this.zb).dispose(),this.Ob=new Dd(()=>{const t=this.Db.Zi(this.Ws.Ov(this.scale));return this._s(t,{setEventHandlers:!1}),t},(t,e,i)=>(t.Ke(i.fillStyle).Qe(i.strokeStyle),e.map(e=>{const i=e.existingMember||t.Go();return i.rc(e.vertices),this.Db.Qi(i,e.figure),e.figure.rb(i),i})),()=>{this.Db.zi()},(t,e)=>{this.Ts(e)})}solveNearest(t,e){const i=this.fs.gi.Ja(t),s={x:i.engineX,y:i.engineY};if(0===this._b.length)return;const r=xa(s,this._b.filter(t=>t.getVisible()),this.Rb,mo);if(!r)return;const n=hr(r[0],this.Ws.gi.oi,this.scale);return l(l(l({cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}}},n),{},{figure:r[1]},r[1].getDimensions()),{},{series:this,axisX:this.axisX,axisY:this.axisY})}Ji(t,e,i){if(!i)return;const s=this._b.find(t=>t.nb===i);if(!s)return;const r=s.getDimensions();return l(l({cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}}},r),{},{figure:s,series:this,axisX:this.axisX,axisY:this.axisY})}pb(t){if(!(t instanceof rr||t instanceof nr))throw new Error("EllipseSeries only supports Linear Axes")}Fb(t){const e=this.Ob.LA();t.forEach(t=>{if(!t.getVisible())return;const i=t.getDimensions(),s=[],r=void 0!==i.drawSteps?i.drawSteps:72;for(let e=0;e<=r;e+=1){const t=e/r*2*Math.PI,n=i.x+i.radiusX*Math.cos(t),o=i.y+i.radiusY*Math.sin(t);s.push({x:n,y:o})}const n=t.getFillStyle(),o=t.getStrokeStyle();e.add({mi:t.mi,vertices:s,figure:t},{fillStyle:n,strokeStyle:o})}),e.finishPlot()}add(t){const e=new gg(this,this.Ws,this.scale,this.hb,this.qS,this.tb,this.ib,this.sb,this.Tb,this.bi,this.zb).setDimensions(t);return this.Ib(e),this.Cb=!0,this.fs.gi.Bs(),e}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class yg extends hg{constructor(t,e,i,s,r,n,o,a,h,l,c){super(e,i,s,r,n,o,a,h,l),this.Vb=[],this.sc=oo,this.ny=t,this.Ws=e,this.scale=i,this.Xe=In(l.polygonSeriesFillStyle,c),this.Ze=In(l.polygonSeriesStrokeStyle,c)}Ji(t,e){const i=this.Ab(),s=As((i.min.x+i.max.x)/2,(i.min.y+i.max.y)/2);return l(l({cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.ny.axisX,y:this.ny.axisY}}},s),{},{figure:this,coordinates:this.getDimensions(),series:this.ny,axisX:this.ny.axisX,axisY:this.ny.axisY})}Ab(){return this.sc}setDimensions(t){return this.Vb=t,this.sc=So(this.Vb),this.qS(),this.Ws.Bs(),this}getDimensions(){return this.Vb}setFillStyle(t){return this.Xe="function"==typeof t?t(this.Xe):t,this.tb(),this}getFillStyle(){return this.Xe}setStrokeStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.tb(),this}getStrokeStyle(){return this.Ze}getDominantStyle(){return this.Xe}}class mg extends dg{constructor(t,e,i,s,r,n,o,a,h,l,c){super(t,e,i,s,r,n,o,a,h,l),this.Es="Polygon Series",this.Db=Wn(),this.Rb=t=>{const e=t.Ab(),i=As((e.min.x+e.max.x)/2,(e.min.y+e.max.y)/2);return hr(i,this.scale,this.Ws.gi.oi)},this.L=new Ar,this.fs.gi.ka(_l.Io),this.zb=c,this.Lb=new yg(this,this.Ws,this.scale,Jr,Jr,Jr,Jr,Jr,t=>!1,this.bi,this.zb).dispose(),this.Ob=new Dd(()=>{const t=this.Db.Zi(this.Ws.Ov(this.scale));return this._s(t,{setEventHandlers:!1}),t},(t,e,i)=>(t.Ke(i.fillStyle).Qe(i.strokeStyle),e.map(e=>{const i=e.existingMember||t.Go();return i.rc(e.vertices),this.Db.Qi(i,e.figure),e.figure.rb(i),i})),()=>{this.Db.zi()},(t,e)=>{this.Ts(e)})}solveNearest(t,e){const i=this.fs.gi.Ja(t),s={x:i.engineX,y:i.engineY};if(0===this._b.length)return;const r=xa(s,this._b.filter(t=>t.getVisible()),this.Rb,mo);if(!r)return;const n=hr(r[0],this.Ws.gi.oi,this.scale);return l(l({cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}}},n),{},{figure:r[1],coordinates:r[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY})}Ji(t,e,i){if(!i)return;const s=this._b.find(t=>t.nb===i);if(!s)return;const r=s.Ab(),n=As((r.min.x+r.max.x)/2,(r.min.y+r.max.y)/2);return l(l({cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}}},n),{},{coordinates:s.getDimensions(),figure:s,series:this,axisX:this.axisX,axisY:this.axisY})}pb(t){}Fb(t){const e=this.Ob.LA();t.forEach(t=>{if(!t.getVisible())return;const i=t.getDimensions(),s=t.getFillStyle(),r=t.getStrokeStyle();e.add({mi:t.mi,vertices:i,figure:t},{fillStyle:s,strokeStyle:r})}),e.finishPlot()}add(t){const e=new yg(this,this.Ws,this.scale,this.hb,this.qS,this.tb,this.ib,this.sb,this.Tb,this.bi,this.zb).setDimensions(t);return this.Ib(e),this.Cb=!0,this.fs.gi.Bs(),e}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class vg extends hg{constructor(t,e,i,s,r,n,o,a,h,l,c){super(e,i,s,r,n,o,a,h,l),this.Nb={x:0,y:0,width:0,height:0},this.Gb={x1:0,y1:0,x2:0,y2:0},this.sc=Cs(As(0,0),As(0,0)),this.ny=t,this.Xe=In(l.rectangleSeriesFillStyle,c),this.Ws=e,this.scale=i,this.Ze=In(l.rectangleSeriesStrokeStyle,c)}setCornerRadius(t){return this.$b=t,this.qS(),this}getCornerRadius(){return this.$b}Ji(t,e){const i=this.getDimensionsPositionAndSize(),s=As(i.x+i.width/2,i.y+i.height/2);return l(l(l({cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.ny.axisX,y:this.ny.axisY}}},s),{},{figure:this,positionAndSize:this.getDimensionsPositionAndSize()},this.getDimensionsTwoPoints()),{},{series:this.ny,axisX:this.ny.axisX,axisY:this.ny.axisY})}Ab(){return this.sc}setDimensions(t){return"x"in t?(this.Nb=t,this.Gb={x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height}):(this.Gb=t,this.Nb={x:t.x1,y:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}),this.sc=So([this.Nb,As(this.Nb.x+this.Nb.width,this.Nb.y+this.Nb.height)]),this.qS(),this.Ws.Bs(),this}getDimensionsPositionAndSize(){return this.Nb}getDimensionsTwoPoints(){return this.Gb}setFillStyle(t){return this.Xe="function"==typeof t?t(this.Xe):t,this.tb(),this}getFillStyle(){return this.Xe}setStrokeStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.tb(),this}getStrokeStyle(){return this.Ze}getDominantStyle(){return this.Xe}}class xg extends dg{constructor(t,e,i,s,r,n,o,a,h,l,c){super(t,e,i,s,r,n,o,a,h,l),this.Es="Rectangle Series",this.Ub=Wn(),this.Rb=t=>{const e=t.getDimensionsPositionAndSize(),i=As(e.x+e.width/2,e.y+e.height/2);return hr(i,this.scale,this.Ws.gi.oi)},this.L=new Ar,this.fs.gi.ka(_l.Io),this.zb=c,this.Lb=new vg(this,this.Ws,this.scale,Jr,Jr,Jr,Jr,Jr,t=>!1,this.bi,this.zb).dispose(),this.Yb=new Dd(()=>{const t=this.Ub.Zi(this.Ws.fd(this.scale));return this._s(t,{setEventHandlers:!1}),t},(t,e,i)=>(t.Ke(i.fillStyle).Qe(i.strokeStyle),e.map(e=>{const i=e.existingMember||t.Go();return i.yd(e.x1,e.y1,e.x2,e.y2).vd(e.roundedCorners?{extent:e.roundedCorners,c_x1_y1:!0,c_x1_y2:!0,c_x2_y1:!0,c_x2_y2:!0}:void 0),this.Ub.Qi(i,e.figure),e.figure.rb(i),i})),()=>{this.Ub.zi()},(t,e)=>{this.Ts(e)})}solveNearest(t,e){const i=this.fs.gi.Ja(t),s={x:i.engineX,y:i.engineY};if(0===this._b.length)return;const r=xa(s,this._b.filter(t=>t.getVisible()),this.Rb,mo);if(!r)return;const n=hr(r[0],this.Ws.gi.oi,this.scale);return l(l(l({cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}}},n),{},{figure:r[1],positionAndSize:r[1].getDimensionsPositionAndSize()},r[1].getDimensionsTwoPoints()),{},{series:this,axisX:this.axisX,axisY:this.axisY})}Ji(t,e,i){if(!i)return;const s=this._b.find(t=>t.nb===i);if(!s)return;const r=s.getDimensionsPositionAndSize(),n=As(r.x+r.width/2,r.y+r.height/2);return l(l(l({cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}}},n),{},{positionAndSize:s.getDimensionsPositionAndSize()},s.getDimensionsTwoPoints()),{},{figure:s,series:this,axisX:this.axisX,axisY:this.axisY})}pb(t){}Fb(t){const e=this.Yb.LA();t.forEach(t=>{if(!t.getVisible())return;const i=t.getDimensionsTwoPoints(),s=t.getFillStyle(),r=t.getStrokeStyle();e.add(l({mi:t.mi,figure:t,roundedCorners:t.$b},i),{fillStyle:s,strokeStyle:r})}),e.finishPlot()}add(t){const e=new vg(this,this.Ws,this.scale,this.hb,this.qS,this.tb,this.ib,this.sb,this.Tb,this.bi,this.zb).setDimensions(t);return this.Ib(e),this.Cb=!0,this.fs.gi.Bs(),e}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class bg extends hg{constructor(t,e,i,s,r,n,o,a,h,l,c){super(e,i,s,r,n,o,a,h,l),this.dimensions={startX:0,startY:0,endX:0,endY:0},this.sc=Cs(As(0,0),As(0,0)),this.ny=t,this.bi=l,this.Ws=e,this.scale=i,this.Ze=In(l.segmentSeriesStrokeStyle,c)}Ji(t,e){const i=this.getDimensions(),s=As((i.startX+i.endX)/2,(i.startY+i.endY)/2);return l(l(l({cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.ny.axisX,y:this.ny.axisY}}},s),{},{figure:this},this.getDimensions()),{},{series:this.ny,axisX:this.ny.axisX,axisY:this.ny.axisY})}Ab(){return this.sc}setDimensions(t){return this.dimensions=t,this.sc=Cs(As(Math.min(t.startX,t.endX),Math.min(t.startY,t.endY)),As(Math.max(t.startX,t.endX),Math.max(t.startY,t.endY))),this.qS(),this.Ws.Bs(),this}getDimensions(){return this.dimensions}setStrokeStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.tb(),this}getStrokeStyle(){return this.Ze}getDominantStyle(){const t=this.Ze;return t!==Lr?t.getFillStyle():sa}}class Sg extends dg{constructor(t,e,i,s,r,n,o,a,h,l,c){super(t,e,i,s,r,n,o,a,h,l),this.Es="Segment Series",this.jb=Wn(),this.Rb=t=>{const e=t.getDimensions(),i=As((e.startX+e.endX)/2,(e.startY+e.endY)/2);return hr(i,this.scale,this.Ws.gi.oi)},this.L=new Ar,this.fs.gi.ka(_l.Io),this.zb=c,this.Lb=new bg(this,this.Ws,this.scale,Jr,Jr,Jr,Jr,Jr,t=>!1,this.bi,this.zb).dispose(),this.Eb=new Dd(()=>{const t=this.jb.Zi(this.Ws.gA(this.scale));return this._s(t,{setEventHandlers:!1}),t},(t,e,i)=>(t.dh(i.strokeStyle),e.map(e=>{const i=e.existingMember||t.Go();return i.yA(e.start,e.end),this.jb.Qi(i,e.figure),e.figure.rb(i),i})),()=>{this.jb.zi()},(t,e)=>{this.Ts(e)})}solveNearest(t,e){const i=this.fs.gi.Ja(t),s={x:i.engineX,y:i.engineY};if(0===this._b.length)return;const r=xa(s,this._b.filter(t=>t.getVisible()),this.Rb,mo);if(!r)return;const n=hr(r[0],this.Ws.gi.oi,this.scale);return l(l(l({cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}}},n),{},{figure:r[1]},r[1].getDimensions()),{},{series:this,axisX:this.axisX,axisY:this.axisY})}Ji(t,e,i){if(!i)return;const s=this._b.find(t=>t.nb===i);if(!s)return;const r=s.getDimensions(),n=As((r.startX+r.endX)/2,(r.startY+r.endY)/2);return l(l(l({cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}}},n),r),{},{figure:s,series:this,axisX:this.axisX,axisY:this.axisY})}pb(t){}Fb(t){const e=this.Eb.LA();t.forEach(t=>{if(!t.getVisible())return;const i=t.getDimensions(),s={x:i.startX,y:i.startY},r={x:i.endX,y:i.endY},n=t.getStrokeStyle();e.add({mi:t.mi,start:s,end:r,figure:t},{strokeStyle:n})}),e.finishPlot()}add(t){const e=new bg(this,this.Ws,this.scale,this.hb,this.qS,this.tb,this.ib,this.sb,this.Tb,this.bi,this.zb).setDimensions(t);return this.Ib(e),this.Cb=!0,this.fs.gi.Bs(),e}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}const Ag={x:0,y:0};class Eg extends hg{constructor(t,e,i,s,r,n,o,a,h,l,c){var u;super(e,i,s,r,n,o,a,h,l),this.fl="Text",this.ia=Ag,this.hf=Ag,this.Sl=0,this.nt=Zn,this.ny=t,this.Xe=l.textSeriesFillStyle?In(l.textSeriesFillStyle,c):l.uiTextFillStyle,this.Zn=null!==(u=l.textSeriesFont)&&void 0!==u?u:l.uiTextFont,this.bu=this.Ws.bn(i,!1).Zr(l.textSeriesShadow),this.bu.Al=!0,this.L.Oi(this.bu,{getExtraData:(t,e,i)=>this.Ji(i,t)}),this.addEventListener("dispose",()=>this.bu.dispose())}Ji(t,e){const i=this.ia;return l(l({cursorPosition:{resultTable:i,resultTableScale:this.scale,pointMarker:i,pointMarkerScale:{x:this.ny.axisX,y:this.ny.axisY}}},i),{},{figure:this,series:this.ny,axisX:this.ny.axisX,axisY:this.ny.axisY})}Ab(){return{min:{x:this.ia.x,y:this.ia.y},max:{x:this.ia.x,y:this.ia.y}}}Hb(){this.bu.Jr(this.fl).ih(this.ia).Yl(this.hf).wr(this.Sl).mn(this.nt).Ke(this.Xe).Mr(this.Zn)}getSizePixels(){return this.Hb(),this.bu.Er().vu()}getBoundingBox(){return this.Hb(),this.bu.Er().fu()}setText(t){return this.fl=t,this.qS(),this}getText(){return this.fl}setLocation(t){return this.ia=t,this.qS(),this}getLocation(){return this.ia}setAlignment(t){return this.hf=t,this.qS(),this}getAlignment(){return this.hf}setRotation(t){return this.Sl=t,this.qS(),this}getRotation(){return this.Sl}setMargin(t){return this.nt=Ls(this.nt,t),this.qS(),this}getMargin(){return this.nt}setLabelShadow(t){return this.bu.Zr(t),this.Ws.Bs(),this}getLabelShadow(){return this.bu.El()}setFillStyle(t){return this.Xe="function"==typeof t?t(this.Xe):t,this.tb(),this}getFillStyle(){return this.Xe}setFont(t){return this.Zn="function"==typeof t?t(this.Zn):t,this.tb(),this}getFont(){return this.Zn}getDominantStyle(){return this.Xe}}class kg extends dg{constructor(t,e,i,s,r,n,o,a,h,l,c){super(t,e,i,s,r,n,o,a,h,l),this.Es="Text Series",this.Rb=t=>hr(t.getLocation(),this.scale,this.Ws.gi.oi),this.L=new Ar,this.zb=c,this.Lb=new Eg(this,this.Ws,this.scale,Jr,Jr,Jr,Jr,Jr,t=>!1,this.bi,this.zb).dispose()}pb(t){}Fb(t){t.forEach(t=>{t.Hb(),t.bu.setVisible(t.getVisible())})}add(t){const e=new Eg(this,this.Ws,this.scale,this.hb,this.qS,this.tb,this.ib,this.sb,this.Tb,this.bi,this.zb);return(null==t?void 0:t.alignment)&&e.setAlignment(t.alignment),(null==t?void 0:t.fillStyle)&&e.setFillStyle(t.fillStyle),(null==t?void 0:t.font)&&e.setFont(t.font),(null==t?void 0:t.location)&&e.setLocation(t.location),(null==t?void 0:t.margin)&&e.setMargin(t.margin),void 0!==(null==t?void 0:t.rotation)&&e.setRotation(t.rotation),(null==t?void 0:t.text)&&e.setText(t.text),this.Ib(e),this.Cb=!0,this._s(e.bu,{setEventHandlers:!1,isText:!0}),this.fs.gi.Bs(),this.L.Oi(e.bu,{getExtraData:(t,i,s)=>e.Ji(s,t)}),e}Ji(t,e,i){return Qn({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0},()=>this.solveNearest(e,this.fs.getCursorMode()))}solveNearest(t,e){const i=this.fs.gi.Ja(t),s={x:i.engineX,y:i.engineY};if(0===this._b.length)return;const r=xa(s,this._b.filter(t=>t.getVisible()),this.Rb,mo);if(!r)return;const n=hr(r[0],this.Ws.gi.oi,this.scale);return l(l({cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}}},n),{},{figure:r[1],series:this,axisX:this.axisX,axisY:this.axisY})}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class wg extends cg{constructor(t,e,i,s,r,n,o,a,h,l,c,u){super(t,e,i,s,r,n,o,a,l,c),this.Es="Heatmap Grid Series",this.Xy={},this.fs.gi.ka(_l.Fo),this.Wb=h,this.bi=l;const d=u;this.Xe=In(l.heatmapGridSeriesFillStyle,d),this.Zy=In(this.bi.heatmapGridSeriesWireframeStyle,d);const f={heatmapDataType:"intensity",dataOrder:h.dataOrder||"columns",columns:h.columns,rows:h.rows};this.Fa=f,this.Xb=this.Ws.Zb(this.scale,[],f).Ke(this.Xe).Jy(this.Zy).Fi(this.getHighlight()),this._s(this.Xb),this.setHighlightOnHover(!1)}solveNearest(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"show-nearest";const i=this.fs.gi.Ja(t),s={x:i.engineX,y:i.engineY},r=hr(s,this.Ws.gi.oi,this.scale),n=um(e)?this.Xb.Jb(r):this.Xb.dd(r);if(n)return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},x:n.x,y:n.y,column:n.column,row:n.row,intensity:n.cellValue,series:this,axisX:this.axisX,axisY:this.axisY,lut:fa(this.Xe)?this.Xe.lut:void 0}}Ji(t,e,i){return Qn({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,intensity:0,column:0,row:0,lut:fa(this.Xe)?this.Xe.lut:void 0},()=>this.solveNearest(e,this.fs.getCursorMode()))}Ky(){const t=this.Xy.start||{x:0,y:0};let e;e=this.Xy.end?{x:(this.Xy.end.x-t.x)/this.Fa.columns,y:(this.Xy.end.y-t.y)/this.Fa.rows}:this.Xy.step?this.Xy.step:{x:1,y:1},this.Xb.qy(t,e),this.fs.gi.Bs()}setStart(t){return this.Xy.start=t,this.Ky(),this}getStart(){return this.Xb.tp().start}setStep(t){return this.Xy.step=t,this.Ky(),this}getStep(){return this.Xb.tp().step}setEnd(t){return this.Xy.end=t,this.Ky(),this}getEnd(){return this.Xb.tp().end}Av(){return this.Qg&&this.getVisible()}Ys(){return Ln(this.Xe,this.Xb.wi())}sh(){return{fill:this.Xe}}Qb(t){this.Xb.Qb().forEach(e=>{t.Xb.hp(e)})}bb(){const t=this.Xb;return t?t.Hi():void 0}xb(){const t=this.Xb;return t?t.ji():void 0}Mb(){const t=this.Xb;return t?t.Xi():void 0}wb(){const t=this.Xb;return t?t.Wi():void 0}un(){const t=As(0,0);return t.x=Math.max(t.x,this.Xb.oc()),t.y=Math.max(t.y,this.Xb.ac()),t}pb(t){if(!(t instanceof rr))throw new Error("HeatmapGridSeries can only be attached to a pair of Linear Axes.")}eh(t,e){t.Fi(e),this.Ws.Bs()}th(){return super.th(),this.Xb.Ci(this.getBoundaries()),this}}class Mg extends wg{constructor(t,e,i,s,r,n,o,a,h,l,c,u){super(t,e,i,s,r,n,o,a,h,l,c,u),this.lv=!1,this.L=new Ar}dv(){return this.lv}invalidateIntensityValues(t){if(this.lv&&this.fs.gi.ka(_l.Lo),Array.isArray(t)){if(0===t.length)return this;const e={x:t.length,y:t[0].length,columns:"columns"===this.Fa.dataOrder?t.length:t[0].length,rows:"rows"===this.Fa.dataOrder?t.length:t[0].length},i="columns"===this.Fa.dataOrder?this.Fa.columns:this.Fa.rows,s="columns"===this.Fa.dataOrder?this.Fa.rows:this.Fa.columns;if(e.x>i||e.y>s){if(!0===this.fs._g.Ia){const t="HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ".concat(this.Fa.columns,"x").concat(this.Fa.rows,", input ").concat(e.columns,"x").concat(e.rows,".\nExcess data will be automatically clipped. This can result in sub-optimal performance.");Ur.console.warn(t)}const r=[];for(let e=0;e<i;e+=1)r[e]=t[e].slice(0,s);t=r}this.Xb.hp({type:"intensity",lengthPrimary:e.x,lengthSecondary:e.y,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length)return this;const e={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Fa.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Fa.dataOrder?t.values.length:t.values[0].length},i="columns"===this.Fa.dataOrder?t.iColumn:t.iRow,s=i+e.primary-1,r="columns"===this.Fa.dataOrder?t.iRow:t.iColumn,n=r+e.secondary-1,o=("columns"===this.Fa.dataOrder?this.Fa.columns:this.Fa.rows)-1,a=("columns"===this.Fa.dataOrder?this.Fa.rows:this.Fa.columns)-1;if(i<0||r<0){if(!0===this.fs._g.Ia){const e="HeatmapGridSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niColumn: ".concat(t.iColumn,", iRow: ").concat(t.iRow,".\nNo intensity values will be invalidated.");Ur.console.warn(e)}return this}if(s>o||n>a){if(!0===this.fs._g.Ia){const i="HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ".concat(this.Fa.columns,"x").concat(this.Fa.rows,", input ").concat(e.columns,"x").concat(e.rows," starting at [").concat(t.iColumn,",").concat(t.iRow,"].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.");Ur.console.warn(i)}const i=Math.max(s-o,0),r=e.primary-i,h=Math.max(n-a,0),l=[];for(let e=0;e<r;e+=1)l[e]=t.values[e].slice(0,h>0?-h:void 0);t={iColumn:t.iColumn,iRow:t.iRow,values:l}}this.Xb.hp({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:i,startSecondary:r,values:t.values})}return this.L.D("invalidateintensity",{value:t}),this.Ws.Bs(),this.lv=!0,this}setFillStyle(t){return this.Xe="function"==typeof t?t(this.Xe):t,this.Xb.Ke(this.Xe),this.L.D("stylechange",{}),this.Ws.Bs(),this}getFillStyle(){return this.Xe}setIntensityInterpolation(t){return t=t||"disabled",this.Xb.sp(t),this.Ws.Bs(),this.L.D("stylechange",{}),this}getIntensityInterpolation(){return this.Xb.ep()}clear(){return this.Xb.zi(),this.Ws.Bs(),this.L.D("dataclear",{}),this}setWireframeStyle(t){return this.Zy="function"==typeof t?t(this.Zy):t,this.Xb.Jy(this.Zy),this.Ws.Bs(),this.L.D("stylechange",{}),this}getWireframeStyle(){return this.Zy}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class Cg extends cg{constructor(t,e,i,s,r,n,o,a,h,c,u,d){super(t,e,i,s,r,n,o,a,c,u),this.Es="Scrolling Heatmap Grid Series",this.Xy={},this.fs.gi.ka(_l.Fo),this.fs.gi.ka(_l.Lo);const f=d;this.Xe=In(c.heatmapScrollingGridSeriesFillStyle,f),this.Zy=In(this.bi.heatmapScrollingGridSeriesWireframeStyle,f);const g=l({scrollDimension:"columns",heatmapDataType:"intensity"},h);this.Fa=g,this.Kb=this.Ws.qb(this.scale,[],g).Ke(this.Xe).Jy(this.Zy).Fi(this.getHighlight()),this._s(this.Kb),this.setHighlightOnHover(!1)}dv(){return this.Kb.cp()>0}solveNearest(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"show-nearest";const i=this.fs.gi.Ja(t),s={x:i.engineX,y:i.engineY},r=hr(s,this.Ws.gi.oi,this.scale),n=um(e)?this.Kb.Jb(r):this.Kb.dd(r);if(n)return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},x:n.x,y:n.y,column:n.column,row:n.row,intensity:n.cellValue,series:this,axisX:this.axisX,axisY:this.axisY,lut:fa(this.Xe)?this.Xe.lut:void 0}}Ji(t,e,i){return Qn({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,intensity:0,multiHit:0,column:0,row:0,lut:fa(this.Xe)?this.Xe.lut:void 0},()=>this.solveNearest(e,this.fs.getCursorMode()))}Ky(){const t=this.Xy.start||{x:0,y:0};let e;e=this.Xy.step?this.Xy.step:{x:1,y:1},this.Kb.qy(t,e),this.fs.gi.Bs()}setStart(t){return this.Xy.start=t,this.Ky(),this}getStart(){return this.Kb.tp().start}setStep(t){return this.Xy.step=t,this.Ky(),this}getStep(){return this.Kb.tp().step}clear(){return this.Kb.zi(),this.Ws.Bs(),this}setWireframeStyle(t){return this.Zy="function"==typeof t?t(this.Zy):t,this.Kb.Jy(this.Zy),this.Ws.Bs(),this}getWireframeStyle(){return this.Zy}setPixelInterpolationMode(t){return t=t||"disabled",this.Kb.sp(t),this.Ws.Bs(),this}getPixelInterpolationMode(){return this.Kb.ep()}setDataCleaning(t){return this.Kb.tx(t),this.Ws.Bs(),this}Av(){return this.Qg&&this.getVisible()}Ys(){return Ln(this.Xe,this.Kb.wi())}sh(){return{fill:this.Xe}}Ke(t){return this.Xe="function"==typeof t?t(this.Xe):t,this.Kb.Ke(this.Xe),this.Ws.Bs(),this}pb(t){if(!(t instanceof rr))throw new Error("HeatmapScrollingGridSeries can only be attached to a pair of Linear Axes.")}bb(){return this.Kb.Hi()||0}xb(){return this.Kb.ji()||0}Mb(){return this.Kb.Xi()||0}wb(){return this.Kb.Wi()||0}un(){const t=As(0,0);return t.x=Math.max(t.x,this.Kb.oc()),t.y=Math.max(t.y,this.Kb.ac()),t}eh(t,e){t.Fi(e),this.Ws.Bs()}}class Tg extends Cg{constructor(t,e,i,s,r,n,o,a,h,l,c,u){super(t,e,i,s,r,n,o,a,h,l,c,u),this.L=new Ar}addIntensityValues(t){if(0===t.length||0===t[0].length)return this;const e=t.length,i=t[0].length,s=("columns"===this.Fa.scrollDimension?t.length:t[0].length,"rows"===this.Fa.scrollDimension?t.length:t[0].length,0+i-1),r=this.Fa.resolution-1;if(s>r){if(!0===this.fs._g.Ia){const t="HeatmapScrollingGridSeries.addIntensityValues intensity matrix overflow.\nGrid resolution: ".concat(this.Fa.resolution,", input ").concat(e,"x").concat(i,".\nExcess data will be automatically clipped. This can result in sub-optimal performance.");Ur.console.warn(t)}const s=[];for(let i=0;i<e;i+=1)s[i]=t[i].slice(0,r+1);t=s}return this.Kb.lp(t),this.Ws.Bs(),this}invalidateIntensityValues(t){return this.Kb.hp(t.iSample,t.values),this.Ws.Bs(),this}getSampleCount(){return this.Kb.cp()}setFillStyle(t){return this.Ke(t),this}getFillStyle(){return this.Xe}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class Fg extends cg{constructor(){super(...arguments),this.ix=[],this.au=[],this.sx=[],this.hx=[],this.nx=1e3,this.ox=0,this.us=Ca.onHover,this.lx=[],this.ux=[],this.Ax=!1,this.gx=(t,e)=>{const i=t.KS(e);if(i)return[hr(i[0],this.scale,this.Ws.gi.oi),hr(i[1],this.scale,this.Ws.gi.oi)]},this.vx=(t,e)=>{const i=t.yx(e);if(i)return[hr(i[0],this.scale,this.Ws.gi.oi),hr(i[1],this.scale,this.Ws.gi.oi)]},this.mx=t=>{const e=t.length;if(this.ix.length>0){const i=this.ix.length-1,s=this.ix[i];if(e>0){const[e,i]=s.bc(),[r,n]=s.xc();if((r?e.length+r.length:e.length)>=this.nx){const o=r&&r.length>0?r[r.length-1]:e[e.length-1],a=n&&n.length>0?n[n.length-1]:i[e.length-1],h=(o.x+t[0].position)/2,l=Vo(h,o,As(t[0].position,t[0].high)).y,c=Vo(h,a,As(t[0].position,t[0].low)).y,u=ks(h,l,c);s.Sc(u,Cs(As(h,c),As(h,l))).Fc(!0),this.Sx([u].concat(t)).Cc(!0)}else s.Sc(t)}}else e>0&&this.Sx(t)},this.bx=t=>{const e=this.lx,i=t.length;if(this.lx.length>0){if(i>0){const i=e[e.length-1],s=i.bc(),r=i.xc();if(s.length+r.length>=this.nx){const n=r.length>0?r[r.length-1]:s[s.length-1],o=(n.x+t[0].x)/2,a=Vo(o,n,As(t[0].x,t[0].y)).y,h=As(o,a);i.Sc(h,Cs(As(o,a),As(o,a))).Fc(!0),e.push(this.xx([h].concat(t),this.Mx).Cc(!0))}else i.Sc(t)}}else i>0&&e.push(this.xx(t))},this.wx=t=>{const e=this.ux,i=t.length;if(this.ux.length>0){if(i>0){const i=e[e.length-1],s=i.bc(),r=i.xc();if(s.length+r.length>=this.nx){const n=r.length>0?r[r.length-1]:s[s.length-1],o=(n.x+t[0].x)/2,a=Vo(o,n,As(t[0].x,t[0].y)).y,h=As(o,a);i.Sc(h,Cs(As(o,a),As(o,a))).Fc(!0),e.push(this._x([h].concat(t)).Cc(!0))}else i.Sc(t)}}else i>0&&e.push(this._x(t))}}ws(){return"ProgressiveX"}dv(){return this.getPointAmount()>0}setDataCleaning(t){const e=t&&t.minDataPointCount;return this.ox=void 0!==e&&e>0?e:0,this.Ws.Bs(),this}clear(){for(let t=0;t<this.ix.length;t+=1)this.ix[t].dispose();for(let t=0;t<this.lx.length;t+=1)this.lx[t].dispose();for(let t=0;t<this.ux.length;t+=1)this.ux[t].dispose();return this.au.length=0,this.sx.length=0,this.hx.length=0,this.Mx=void 0,this.ix.length=0,this.lx.length=0,this.ux.length=0,this.Ws.Bs(),this.L.D("dataclear",{}),this}getPointAmount(){return this.ix.reduce((t,e)=>t+e._c()+e.kc(),this.au.length)}bb(){return ln(this.ix,en,Math.max,on,this.Mx)||0}xb(){return ln(this.ix,tn,Math.min,nn,this.Mx)||0}Mb(){return ln(this.ix,rn,Math.max,hn,this.Mx)||0}wb(){return ln(this.ix,sn,Math.min,an,this.Mx)||0}un(){const t=As(0,0);for(const e of this.ix)t.x=Math.max(t.x,e.oc()),t.y=Math.max(t.y,e.ac());return t}Ys(){return Ln(this.kx,void 0)||Ln(this.Cx,void 0)}Av(){return this.Qg&&this.getPointAmount()>0&&this.getVisible()}pb(t){}Tx(t,e,i){this.au=Tn(this.au,t,{canReturnB:!1}),this.sx=Tn(this.sx,e,{canReturnB:!1}),this.hx=Tn(this.hx,i,{canReturnB:!1}),this.Ws.Bs()}Fx(t,e,i,s){this.Ix(e,i,s),this.Tx(Array.isArray(t)?t:[t],e,i)}Ix(t,e,i){const s=Eo(So(t),So(e));this.Mx?this.Mx=Eo(this.Mx,s):this.Mx=s,i&&(this.Mx=Eo(this.Mx,i))}Px(){const t=this.ix.length,e=Math.min(this.scale.x.getInnerStart(),this.scale.x.getInnerEnd());let i=0;if(t>1)for(let s=0;s<t-1;s+=1)this.scale.x.Jt(this.ix[s].Hi(),this.ix[s].oc())<e&&(i+=1);return i}Lx(t,e,i,s){if(i>0){const r=Math.ceil(i/e),n=t.length-r;if(n>0&&s>0){const e=n-s>0?s:n;if(e>0){for(let i=0;i<e;i+=1)t[i].dispose();t.splice(0,e)}}}}Bx(t){const e=this.ix.length>0?this.ix[this.ix.length-1]:void 0,i=e?e.bc()[0].length+(e.xc()[0]?e.xc()[0].length:0):void 0;ug(t,i,this.nx,this.mx)}Dx(t){const e=this.lx.length>0?this.lx[this.lx.length-1].bc().length+this.lx[this.lx.length-1].xc().length:void 0;ug(t,e,this.nx,this.bx)}Rx(t,e){const i=this.lx.length>0?this.lx[this.lx.length-1].bc().length+this.lx[this.lx.length-1].xc().length:void 0;ug(t,i,this.nx,this.bx),ug(e,i,this.nx,this.wx)}Sx(t,e){const i=this.Ws.Ex(this.scale).Sc(t,e).Ke(this.kx).Mc(this.Cx).Fi(this.getHighlight());return this.ix.push(i),this._s(i),i}Ox(t,e,i){const s=this.Ws.Dv(this.scale,void 0,[Pd.UserSeries]).Sc(t,i).setPointerEvents(!1).dh(e).Fi(this.getHighlight());return this._s(s),s}xx(t,e){return this.Ox(t,this.zx,e)}_x(t,e){return this.Ox(t,this.Vx,e)}Nx(t){this.kx="function"==typeof t?t(this.kx):t;const e=this.kx;for(let i=0;i<this.ix.length;i+=1)this.ix[i].Ke(e);this.Ws.Bs()}Gx(t){this.Cx="function"==typeof t?t(this.Cx):t;const e=this.Cx;for(let i=0;i<this.ix.length;i+=1)this.ix[i].Mc(e);this.Ws.Bs()}$x(){return this.kx}wc(){return this.Cx}Ux(t){this.zx="function"==typeof t?t(this.zx):t;const e=this.zx;for(let i=0;i<this.lx.length;i+=1)this.lx[i].dh(e);this.Ws.Bs()}Yx(t){this.Vx="function"==typeof t?t(this.Vx):t;const e=this.Vx;for(let i=0;i<this.ux.length;i+=1)this.ux[i].dh(e);this.Ws.Bs()}jx(){return this.zx}Hx(){return this.Vx}eh(t,e){t.Fi(e),this.Wx(e),this.Ws.Bs()}Wx(t){for(let e=0;e<this.lx.length;e+=1)this.lx[e].Fi(t);for(let e=0;e<this.ux.length;e+=1)this.ux[e].Fi(t)}rv(){if(super.rv(),this.Ax=!1,this.ox>0){const t=this.Px();this.Lx(this.ix,this.nx,this.ox,t),this.lx.length>0&&this.Lx(this.lx,this.nx,this.ox,t),this.ux.length>0&&this.Lx(this.ux,this.nx,this.ox,t),this.Ax=!0}}th(){if(super.th(),this.au.length>0&&(this.Bx(this.au),this.Xx(this.sx,this.hx),this.Ax=!0),this.Ax){const t=this.getBoundaries();for(const e of this.ix)e.Ci(t);for(const e of this.lx)e.Ci(t);for(const e of this.ux)e.Ci(t)}}nv(){super.nv(),this.Mx=void 0,this.au.length=0,this.sx.length=0,this.hx.length=0}}class Pg extends Fg{constructor(t,e,i,s,r,n,o,a,h,l,c){super(t,e,i,s,r,n,o,a,h,l),this.L=new Ar,this.fs.gi.ka(_l.To);const u=c;this.kx=In(this.bi.areaRangeSeriesFillStyle,u),this.zx=In(this.bi.areaRangeSeriesStrokeStyle,u),this.Cx=In(this.bi.areaRangeSeriesFillStyleInverted,u),this.Vx=In(this.bi.areaRangeSeriesStrokeStyleInverted,u)}solveNearest(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.fs.getCursorMode()||"show-nearest";const i=this.fs.gi.Ja(t),s=((t,e,i)=>{let s,r,n=Number.MAX_VALUE;for(let o=0;o<e.length;o+=1){const a=e[o],h=i(a,t);if(h){const e=mo(t,h[0]),i=mo(t,h[1]);(void 0===s||e<n||i<n)&&(s=h,r=a,e<n?n=e:i<n&&(n=i))}}return s&&r?[s,r]:void 0})({x:i.engineX,y:i.engineY},this.ix,um(e)?this.vx:this.gx);if(void 0!==s&&void 0!==s[0]){const t=hr(s[0][0],this.Ws.gi.oi,this.scale),e=hr(s[0][1],this.Ws.gi.oi,this.scale);return l(l({cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}}},t),{},{series:this,axisX:this.axisX,axisY:this.axisY,multiHit:[t,e]})}}add(t){const e=Array.isArray(t)?t:[t],[i,s]=Ms(e);this.Fx(t,i,s);const r=this.au[this.au.length-1];return this.Zx=r?{position:r.position,high:r.high,low:r.low}:void 0,this.L.D("dataadd",{data:e,boundaries:this.Mx}),this}addArraysHighLow(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t.length!==e.length)throw new Error("arrayHigh and arrayLow lengths are not equal");{let r=s;r||(r=this.Zx?this.Zx.position+i:0),this.add(function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3?arguments[3]:void 0;const r=void 0!==s?s:0,n=new Array(t.length);for(let o=0;o<t.length;o+=1)n[o]={position:r+i*o,high:t[o],low:e[o]};return n}(t,e,i,r))}return this}Xx(t,e){this.Rx(t,e)}setHighFillStyle(t){return this.Nx(t),this}setLowFillStyle(t){return this.Gx(t),this}setHighStrokeStyle(t){return this.Ux(t),this}setLowStrokeStyle(t){return this.Yx(t),this}getHighFillStyle(){return this.$x()}getLowFillStyle(){return this.wc()}getHighStrokeStyle(){return this.jx()}getLowStrokeStyle(){return this.Hx()}Jx(){return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t=>t;const i=[];let s;for(let r=0;r<t.length;r+=1){s=t[r];const n=e(s.bc()),o=s.xc(),a=o?e(o):[];let h=!1,l=!1;"Tc"in s&&(h=s.Tc(),l=s.Ic()),i.push.apply(i,n.slice(h?1:0,n.length-(l&&0===a.length?1:0))),i.push.apply(i,a.slice(h&&0===n.length?1:0,a.length-(l?1:0)))}return i}(this.ix,t=>{const e=t[0],i=t[1];if(!e||!i)return[];const s=[],r=e.length;for(let n=0;n<r;n+=1)s[n]={position:e[n].x,high:e[n].y,low:i[n].y};return s})}sh(){return{fill:this.kx,fill2:this.Cx,behavior:{colorStep:!0}}}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class Bg extends cg{constructor(t,e,i,s,r,n,o,a,h,l){super(t,e,i,s,r,n,o,a,h,l),this.Qx=t=>t[4]>=t[1],this.kb=Cs(Es(ro,ro),Es(no,no)),this.Kx=[],this.qx=!1,this.tM=-1,this.iM=[],this.sM=!0,this.eM=!1,this.hM=4,this.rM=[1e-7,1e-6,1e-5,1e-4,.001,.01,.1,1,5,10,30,60,300,600,1800,3600,7200,14400,28800,36e3,43200,50400,57600,64800,72e3,86400,172800,259200,345600,432e3,604800,1209600,2592e3,7776e3,10368e3,15552e3,31536e3,15768e4,31536e4,63072e4,7884e5,15768e5,31536e5,3942e6,47304e5,63072e5,7884e6,15768e6,31536e6,3942e7,47304e6,63072e6,7884e7,15768e7,31536e7,63072e7,7884e8,15768e8,31536e8,47304e8,63072e8],this.L=new Ar,this.fs.gi.ka(_l.po)}dv(){return this.iM.length>0}ws(){return"ProgressiveX"}Jx(){return this.iM}Av(){return this.Qg&&this.iM.length>0&&this.getVisible()}nM(t){if(!(this.iM.length<1))return[this.iM[t][0],this.iM[t][1],this.iM[t][2],this.iM[t][3],this.iM[t][4]]}solveNearest(t,e){if(0===this.iM.length)return;const i=this.fs.translateCoordinate(t,{x:this.axisX,y:this.axisY}).x,s=void 0!==this.getPackDataState();let r,n,o,a,h;if(s){const t=this.oM;if(!t)return;const e=jn(i,t.length-1,e=>t[e][0]),s=void 0!==e&&t[e];if(!s)return;a=s[3],o=s[2],n=s[1],h=s[4],r=s[0]}else{const t=jn(i,this.iM.length-1,t=>this.iM[t][0]),e=void 0!==t&&this.iM[t];if(!e)return;r=e[0],n=e[1],o=e[2],a=e[3],h=e[4]}return{cursorPosition:{resultTable:As(r,h),resultTableScale:this.scale,pointMarker:As(r,h),pointMarkerScale:{x:this.axisX,y:this.axisY}},x:r,y:h,open:n,high:o,low:a,close:h,position:r,isPacked:s,series:this,axisX:this.axisX,axisY:this.axisY}}Ji(t,e,i){return Qn({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,open:0,high:0,low:0,close:0,position:0,isPacked:0},()=>this.solveNearest(e,this.fs.getCursorMode()))}pb(t){if(!(t.x instanceof er))throw new Error("OHLCSeries must be attached to a Linear X Axis.");this.aM=t.x}un(){return As(5,5)}Ax(t){const e=t.length-1;if(e<0)return this;for(let i=0;i<=e;i+=1)t[i][3]<this.kb.min.y&&(this.kb.min.y=t[i][3]),this.kb.max.y<t[i][2]&&(this.kb.max.y=t[i][2]);return this.kb.min.x=Math.min(this.kb.min.x,t[0][0]),this.kb.max.x=Math.max(this.kb.max.x,t[e][0]),this}bb(){return this.kb.max.x}xb(){return this.kb.min.x}Mb(){return this.kb.max.y}wb(){return this.kb.min.y}add(t){this.iM.length>0&&this.fs.gi.ka(_l.Lo);const e=Array.isArray(t[0])?t:[t[0]];if(e.length>0){this.qx=!0;const t=this.iM.length,i=this.Kx.length,s=e.length;this.iM.length=t+s,this.Kx.length=i+s;for(let r=0;r<s;r+=1)this.iM[t+r]=e[r],this.Kx[i+r]=this.iM[t+r];this.Ax(e),this.L.D("dataadd",{data:e}),this.Ws.Bs()}return this}setPackData(t){return t!==this.sM&&(this.eM=!0,this.sM=t,this.fs.gi.Bs()),this}getPackData(){return this.sM}getPackDataState(){const t=this.tM;if(!(t<0||void 0===this.oM||this.oM.length===this.iM.length))return{figureAxisInterval:t}}setFigureWidth(t){return this.lM=t,this.fs.gi.Bs(),this}getFigureWidth(){return this.lM}setFigureMinimumGap(t){return this.hM=t,this.fs.gi.Bs(),this}getFigureMinimumGap(){return this.hM}clear(){return this.iM=[],this.Kx=[],this.oM=void 0,this.cM(),this.kb.min.x=ro,this.kb.min.y=ro,this.kb.max.x=no,this.kb.max.y=no,this.L.D("dataclear",{}),this}uM(t){return this.aM.getPixelSize()*t/1e3}dM(){const t=this.rM.length-1,e=this.uM(this.lM+this.hM);let i=jn(e,t,t=>this.rM[t]);return void 0===i?i=e<this.rM[0]?0:this.rM[t]<e?t:this.rM.length/2:this.rM[i]<e&&(i+=1),this.rM.length<=i&&(i=t),1e3*this.rM[i]}th(){if(super.th(),!this.sM){this.oM=void 0;let t=null;if(this.eM?(this.eM=!1,t=this.iM,this.cM()):t=this.Kx,t.length>=1){for(let e=0;e<t.length;e+=1){const i=t[e],s=i[0];this.Qx(i)?this.fM(s,i):this.AM(s,i)}this.Kx.length=0,this.qx=!1,this.tM=-1}}}nv(){super.nv();const t=this.dM();if(this.sM&&this.iM.length>=1&&(t!==this.tM||this.qx||this.eM)){this.eM=!1,this.tM=t,this.qx=!1,this.cM(),this.oM=[];const e=this.iM.length;let i=this.iM[0][0]-this.iM[0][0]%(t/2)+t,s=0;for(;s<e;){let r=this.nM(s);if(void 0===r)break;let n=r[3],o=r[2];const a=s;for(s+=1;s<e&&this.iM[s][0]<i;)r=this.iM[s],this.iM[s][3]<n&&(n=this.iM[s][3]),o<this.iM[s][2]&&(o=this.iM[s][2]),s+=1;const h=s-1;let l=r[0];a<h&&(l=this.iM[h][0],r=[l,this.iM[a][1],o,n,this.iM[h][4]]),r[1]<r[4]?this.fM(l,r):this.AM(l,r),this.oM.push(r),i+=t}}}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}const Lg={Candlesticks:class extends Bg{constructor(t,e,i,s,r,n,o,a,h,l){super(t,e,i,s,r,n,o,a,h,l),this.gM=1175494351e-14,this.lM=this.bi.ohlcCandleThicknessPixels||5,this.vM=this.bi.ohlcCandleTailStrokeStylePositive,this.yM=this.bi.ohlcCandleTailStrokeStyleNegative,this.pM=this.bi.ohlcCandleBodyFillStylePositive,this.mM=this.bi.ohlcCandleBodyFillStyleNegative,this.SM=i.gA(this.scale).dh(new th({thickness:this.lM,fillStyle:this.pM})),this.SM.nu={x:0,y:1},this.bM=i.gA(this.scale).dh(new th({thickness:this.lM,fillStyle:this.mM})),this.bM.nu={x:0,y:-1},this.xM=i.gA(this.scale).dh(this.vM),this.MM=i.gA(this.scale).dh(this.yM),this._s(this.SM),this._s(this.bM),this._s(this.xM),this._s(this.MM)}setBodyThickness(t){return this.lM=t,this.SM.dh(new th({thickness:this.lM,fillStyle:this.pM})),this.bM.dh(new th({thickness:this.lM,fillStyle:this.mM})),this.fs.gi.Bs(),this}getBodyThickness(){return this.lM}setBodyFillStylePositive(t){return this.pM="function"==typeof t?t(this.pM):t,this.SM.dh(new th({thickness:this.lM,fillStyle:this.pM})),this.fs.gi.Bs(),this}getBodyFillStylePositive(){return this.pM}setBodyFillStyleNegative(t){return this.mM="function"==typeof t?t(this.mM):t,this.bM.dh(new th({thickness:this.lM,fillStyle:this.mM})),this.fs.gi.Bs(),this}getBodyFillStyleNegative(){return this.mM}setTailStrokeStylePositive(t){return this.vM="function"==typeof t?t(this.vM):t,this.xM.dh(this.vM),this.fs.gi.Bs(),this}getTailStrokeStylePositive(){return this.vM}setTailStrokeStyleNegative(t){return this.yM="function"==typeof t?t(this.yM):t,this.MM.dh(this.yM),this.fs.gi.Bs(),this}getTailStrokeStyleNegative(){return this.yM}sh(){return{fill:this.pM,fill2:this.mM,behavior:{colorStep:!0}}}cM(){return this.xM.zi(),this.MM.zi(),this.SM.zi(),this.bM.zi(),this}fM(t,e){return Math.abs(e[1]-e[4])<this.gM?this.SM.Go().yA({x:t,y:e[1]-this.gM},{x:t,y:e[1]+this.gM}):this.SM.Go().yA({x:t,y:e[1]},{x:t,y:e[4]}),e[4]<e[2]&&this.xM.Go().yA({x:t,y:e[4]},{x:t,y:e[2]}),e[3]<e[1]&&this.xM.Go().yA({x:t,y:e[3]},{x:t,y:e[1]}),this}AM(t,e){return Math.abs(e[1]-e[4])<this.gM?this.bM.Go().yA({x:t,y:e[1]-this.gM},{x:t,y:e[1]+this.gM}):this.bM.Go().yA({x:t,y:e[1]},{x:t,y:e[4]}),e[3]<e[4]&&this.MM.Go().yA({x:t,y:e[3]},{x:t,y:e[4]}),e[1]<e[2]&&this.MM.Go().yA({x:t,y:e[1]},{x:t,y:e[2]}),this}},Bars:class extends Bg{constructor(t,e,i,s,r,n,o,a,h,l){super(t,e,i,s,r,n,o,a,h,l),this.lM=this.bi.ohlcBarThicknessPixels||10,this.wM=this.bi.ohlcBarStrokeStylePositive,this._M=this.bi.ohlcBarStrokeStyleNegative,this.kM=i.gA(this.scale).dh(this.wM),this._s(this.kM),this.CM=i.gA(this.scale).dh(this.wM),this.CM.nu={x:-this.lM/2,y:0},this._s(this.CM),this.TM=i.gA(this.scale).dh(this.wM),this.TM.nu={x:this.lM/2,y:0},this._s(this.TM),this.FM=i.gA(this.scale).dh(this._M),this._s(this.FM),this.IM=i.gA(this.scale).dh(this._M),this.IM.nu={x:-this.lM/2,y:0},this._s(this.IM),this.PM=i.gA(this.scale).dh(this._M),this.PM.nu={x:this.lM/2,y:0},this._s(this.PM)}setStrokeStylePositive(t){return this.wM="function"==typeof t?t(this.wM):t,this.kM.dh(this.wM),this.CM.dh(this.wM),this.TM.dh(this.wM),this.fs.gi.Bs(),this}getStrokeStylePositive(){return this.wM}setStrokeStyleNegative(t){return this._M="function"==typeof t?t(this._M):t,this.FM.dh(this._M),this.IM.dh(this._M),this.PM.dh(this._M),this.fs.gi.Bs(),this}getStrokeStyleNegative(){return this._M}sh(){return{fill:this.wM.getFillStyle(),fill2:this._M.getFillStyle(),behavior:{colorStep:!0}}}setFigureWidth(t){return super.setFigureWidth(t),this.CM.nu={x:-t/2,y:0},this.IM.nu={x:-t/2,y:0},this.TM.nu={x:t/2,y:0},this.PM.nu={x:t/2,y:0},this}cM(){return this.FM.zi(),this.kM.zi(),this.IM.zi(),this.CM.zi(),this.PM.zi(),this.TM.zi(),this}fM(t,e){return this.kM.Go().yA({x:t,y:e[3]},{x:t,y:e[2]}),this.CM.Go().yA({x:t,y:e[1]},{x:t,y:e[1]}),this.TM.Go().yA({x:t,y:e[4]},{x:t,y:e[4]}),this}AM(t,e){return this.FM.Go().yA({x:t,y:e[3]},{x:t,y:e[2]}),this.IM.Go().yA({x:t,y:e[1]},{x:t,y:e[1]}),this.PM.Go().yA({x:t,y:e[4]},{x:t,y:e[4]}),this}}};class Dg extends hf{constructor(t,e,i,s,r,n,o,a){super(t,e,i,s,r,a),this.LM=!1,this.BM=!1,this.DM=!1,this.RM=!1,this.EM=!1,this.OM=new Map,this.zM=new Map,this.VM=[],this.NM=[],this.GM=!0,this.$M=!0,this.UM=!1,this.YM=[],this.jM=new Set,this.HM=!1,this.Np=r,this.WM=n,this.XM=o,this.ZM=a.cursorGridStrokeStyleX,this.JM=a.cursorGridStrokeStyleY}setKeepWithinAxisBoundaries(t){return this.LM=t,this.Ws.Bs(),this}getKeepWithinAxisBoundaries(){return this.LM}dispose(){return super.dispose(),this.OM.forEach(t=>t.forEach(t=>t.dispose())),this.zM.forEach(t=>t.forEach(t=>t.dispose())),this.VM.length=0,this.NM.length=0,this.Op.length=0,this}th(){return this.UM&&this.ui&&this.setPosition(...this.YM),this.OM.forEach(t=>{t.forEach(t=>t.setVisible(!1).setMarkerVisible(!1))}),this.zM.forEach(t=>{t.forEach(t=>t.setVisible(!1).setMarkerVisible(!1))}),this.VM.forEach(t=>t.setVisible(this.ui&&this.Sg).setMarkerVisible(this.ui&&this.Sg&&this.GM)),this.NM.forEach(t=>t.setVisible(this.ui&&this.Sg).setMarkerVisible(this.ui&&this.Sg&&this.$M)),super.th()}jp(){if(!this.LM)return super.jp();const t={x:!0,y:!0,either:!1},e=this.Gp,i=e.getPosition(As(-1,-1),Rr.PaddedBackground),s=e.getPosition(As(1,1),Rr.PaddedBackground);return this.YM.forEach((r,n)=>{const o=r.pointMarkerScale.x,a=r.pointMarkerScale.y,h=hr(i,e.scale,{x:o,y:a}),l=hr(s,e.scale,{x:o,y:a});yo(h.x,o.ur,o.dr)&&yo(l.x,o.ur,o.dr)&&(t.x=!1),yo(h.y,a.ur,a.dr)&&yo(l.y,a.ur,a.dr)&&(t.y=!1)}),t.either=t.x||t.y,t}setPosition(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e=e.filter(t=>!Number.isNaN(t.pointMarker.x)&&!Number.isNaN(t.pointMarker.y)),this.YM=e,this.VM.length=0,this.NM.length=0;const s=this.renderingScale;if(e.length>0){const t=e[0].resultTable,i=ld(e[0].resultTableScale,s),r=i===this.scale?t:hr(t,i,this.scale);this.Gp.setPosition(r)}this.Sg=!1,this.Dp.forEach(t=>{t.targetVisible=!1});const r=new Map;e.forEach((t,e)=>{const i=t.pointMarkerScale.x,n=t.pointMarkerScale.y,o=r.get(i)||[],a=r.get(n)||[],h=!o.includes(t.pointMarker.x),l=!a.includes(t.pointMarker.y);o.push(t.pointMarker.x),a.push(t.pointMarker.y),r.set(i,o),r.set(n,a);const c=t.pointMarker,u=Rg(As(c.x,c.y),i,n);if(h){const t=this.QM(i,!0);t.setValue(c.x),t.setGridStrokeLength(this.BM?u.x:1).setAllocatesAxisSpace(this.HM),this.VM.push(t)}if(l){const t=this.QM(n,!1);t.setValue(c.y),t.setGridStrokeLength(this.DM?u.y:1).setAllocatesAxisSpace(this.HM),this.NM.push(t)}let d=this.Dp[e];if(!d){const t=new Yc(this.Ws,this.renderingScale,this.scale,Jr,this.bi).setPointerEvents(!1).setFillStyle(this.bi.cursorPointMarkerFillStyle).setStrokeStyle(this.bi.cursorPointMarkerStrokeStyle).setSize(this.bi.cursorPointMarkerSize).setShape(this.bi.cursorPointMarkerShape);d={pointMarker:t,targetVisible:!0},this.Dp.push(d),this.Op.forEach(e=>e(t))}void 0!==t.pointMarkerShape&&d.pointMarker.setShape(t.pointMarkerShape),void 0!==t.pointMarkerSize&&d.pointMarker.setSize(t.pointMarkerSize),t.pointMarkerFillStyle&&d.pointMarker.setFillStyle(t.pointMarkerFillStyle),t.pointMarkerStrokeStyle&&d.pointMarker.setStrokeStyle(t.pointMarkerStrokeStyle);const f=ld(t.pointMarkerScale,s),g=f===this.scale?t.pointMarker:hr(t.pointMarker,f,this.scale);d.pointMarker.setPosition(g),d.targetVisible=!0;const p=i.getInterval(),y=n.getInterval(),m=Math.min(p.start,p.end),v=Math.max(p.start,p.end),x=Math.min(y.start,y.end),b=Math.max(y.start,y.end);c.x>=m&&c.x<=v&&c.y>=x&&c.y<=b&&(this.Sg=!0)});for(const n of this.Dp)n.targetVisible||(n.pointMarker.dispose(),this.Dp.splice(this.Dp.indexOf(n),1));return this}setTickMarkersAllocateAxisSpace(t){return this.HM=t,this.Ws.Bs(),this}getTickMarkersAllocateAxisSpace(){return this.HM}QM(t,e){this.jM.has(t)||(t.addEventListener("dispose",()=>{var e;null===(e=i.get(t))||void 0===e||e.forEach(t=>t.dispose()),i.delete(t)}),this.jM.add(t));const i=e?this.OM:this.zM,s=e?this.VM:this.NM,r=i.get(t)||[];i.set(t,r);let n=r.find(t=>!s.includes(t));return n||(n=e?t.TA(!1,this.WM):t.TA(!1,this.XM),r.push(n),this.Xr(n,e),n.setPointerEvents(!1)),n}Xr(t,e){const i=e?this.ZM:this.JM;return t.setGridStrokeStyle(i),t.setPointerEvents(!1),(e?this.GM:this.$M)?t.setMarkerVisible(!0):t.setMarkerVisible(!1),t}setGridStrokeXCut(t){return this.BM=t,this.Ws.Bs(),this}getGridStrokeXCut(){return this.BM}setGridStrokeYCut(t){return this.DM=t,this.Ws.Bs(),this}getGridStrokeYCut(){return this.DM}setGridStrokeXStyle(t){return this.ZM=t instanceof Function?t(this.getGridStrokeXStyle()):t,this.OM.forEach(t=>t.forEach(t=>t.setGridStrokeStyle(this.ZM))),this}getGridStrokeXStyle(){return this.ZM}setGridStrokeYStyle(t){return this.JM=t instanceof Function?t(this.getGridStrokeYStyle()):t,this.zM.forEach(t=>t.forEach(t=>t.setGridStrokeStyle(this.JM))),this}getGridStrokeYStyle(){return this.JM}setTickMarkerXVisible(t){return this.GM=t,this.Ws.Bs(),this}getTickMarkerXVisible(){return this.GM}setTickMarkerYVisible(t){return this.$M=t,this.Ws.Bs(),this}getTickMarkerYVisible(){return this.$M}setTickMarkerX(t){return this.OM.forEach(e=>e.forEach(e=>e.setMarker(t))),this.WM=this.WM.addStyler(t),this.Ws.Bs(),this}setTickMarkerY(t){return this.zM.forEach(e=>e.forEach(e=>e.setMarker(t))),this.XM=this.XM.addStyler(t),this.Ws.Bs(),this}}class zg{constructor(t,e,i,s){this.tm=[],this.im=(t,e)=>(this.tm.forEach(i=>i(t,e)),t),this.addStyler=t=>new zg(this.Np,this.WM,this.XM,this.tm.map(t=>t).concat(t)),this.setResultTableBackground=t=>new zg(t,this.WM,this.XM,this.tm.map(t=>t)),this.sm=(t,e,i,s,r)=>this.im(new Dg(t,e,i,s,this.Np,this.WM,this.XM,r),r),this.Np=t,this.tm=s,this.WM=e,this.XM=i}}const Ig=new zg(Nc,yu.PointableTextBox,yu.PointableTextBox,[(t,e)=>{lf(t,e),t.setTickMarkerX(t=>{t.setEffect(!0).setTextFont(e.cursorTickMarkerXTextFont).setTextFillStyle(e.cursorTickMarkerXTextFillStyle),Dl(t)&&t.setBackground(t=>t.setFillStyle(e.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(e.cursorTickMarkerXBackgroundStrokeStyle))}),t.setTickMarkerY(t=>{t.setEffect(!0).setTextFont(e.cursorTickMarkerYTextFont).setTextFillStyle(e.cursorTickMarkerYTextFillStyle),Dl(t)&&t.setBackground(t=>t.setFillStyle(e.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(e.cursorTickMarkerYBackgroundStrokeStyle))})}]),Rg=(t,e,i)=>{const s=e.oi,r=i.oi;let n=(t.x-s.getInnerStart())/(s.getInnerEnd()-s.getInnerStart()),o=(t.y-r.getInnerStart())/(r.getInnerEnd()-r.getInnerStart());return 1===i.jf&&(n=1-n),1===e.jf&&(o=1-o),As(o,n)};class _g{constructor(t,e,i,s){this.KM=!1,this.L=new Ar,this.chart=i,this.qM=s,this.me=t.me,this.ke=s||qh,this.tw=Ur.document.createElement("div"),this.tw.style.position="absolute",this.tw.style.pointerEvents="none",Ur.document.body.append(this.tw);const r=()=>{const t=i.engine.container.getBoundingClientRect();this.tw.style.left="".concat(t.left,"px"),this.tw.style.top="".concat(t.top,"px"),this.tw.style.width="".concat(t.width,"px"),this.tw.style.height="".concat(t.height,"px")};r(),i.addEventListener("resize",r),this.iw(this.tw),this.sw(),this.ew(),this.hw(),this.rw(e),this.chart.nw().push(this)}iw(t){this.ow=Ur.document.createElement("div"),this.ow.style.pointerEvents="all",t.append(this.ow),this.aw=Ur.document.createElement("div"),this.lw=new Gh(this.me,this.ke,this.chart,this.aw),this.cw=Ur.document.createElement("table"),this.cw.style.borderSpacing="0",this.ow.appendChild(this.lw.De()),this.ow.appendChild(this.aw),this.aw.appendChild(this.cw)}ew(){let t=0,e=0,i=0,s=0,r=!1;this.KM=!1,this.ow.onmousedown=n=>{n=n||Ur.event,i=n.clientX,s=n.clientY,r=!0,Ur.document.onmouseup=t=>{this.KM?this.ow.addEventListener("click",mn,!0):this.ow.removeEventListener("click",mn,!0),r=!1,this.KM=!1,Ur.document.onmouseup=null,Ur.document.onmousemove=null},Ur.document.onmousemove=n=>{n=n||Ur.event,r&&(t=i-n.clientX,e=s-n.clientY,i=n.clientX,s=n.clientY,this.KM=!0,this.ow.style.top=this.ow.offsetTop-e+"px",this.ow.style.left=this.ow.offsetLeft-t+"px",this.ow.style.removeProperty("right"),this.ow.style.removeProperty("bottom"))}}}hw(){let t=0,e=0,i=0,s=0,r=!1;this.ow.ontouchstart=n=>{n=n||Ur.event,i=n.touches[0].clientX,s=n.touches[0].clientY,r=!0,this.ow.ontouchend=()=>{r=!1,Ur.document.ontouchend=null,Ur.document.ontouchmove=null},this.ow.ontouchmove=n=>{r&&(mn(n),n=n||Ur.event,t=i-n.touches[0].clientX,e=s-n.touches[0].clientY,i=n.touches[0].clientX,s=n.touches[0].clientY,this.ow.style.top=this.ow.offsetTop-e+"px",this.ow.style.left=this.ow.offsetLeft-t+"px",this.ow.style.removeProperty("right"),this.ow.style.removeProperty("bottom"))}}}sw(){this.ow.style.setProperty("top","10px"),this.ow.style.setProperty("left","10px"),this.ow.style.position="absolute",this.ow.style.display="flex",this.ow.style.alignItems="flex-start",this.aw.style.setProperty("display","none")}removePositionProperty(){this.ow.style.removeProperty("top"),this.ow.style.removeProperty("left"),this.ow.style.removeProperty("bottom"),this.ow.style.removeProperty("right")}setPositionProperty(t){switch(this.removePositionProperty(),t){case Kh.BottomLeft:this.ow.style.setProperty("bottom","10px"),this.ow.style.setProperty("left","10px");break;case Kh.TopLeft:this.ow.style.setProperty("top","10px"),this.ow.style.setProperty("left","10px");break;case Kh.BottomRight:this.ow.style.setProperty("bottom","10px"),this.ow.style.setProperty("right","10px");break;case Kh.TopRight:default:this.ow.style.setProperty("top","10px"),this.ow.style.setProperty("right","10px")}}rw(t){for(let e=0;e<t.length;e+=1){const i=this.cw.insertRow();for(let s=0;s<t[e].length;s+=1){const r=i.insertCell(),n=t[e][s];"object"!=typeof n?this.uw(n,r):this.addCustomButton(n,r)}}}uw(t,e){switch(t){case vh.ZoomIn:this.dw(new Dh(this.me,this.chart,this.ke),e);break;case vh.ZoomInX:this.dw(new zh(this.me,this.chart,this.ke),e);break;case vh.ZoomInY:this.dw(new Ih(this.me,this.chart,this.ke),e);break;case vh.ZoomOut:this.dw(new Rh(this.me,this.chart,this.ke),e);break;case vh.ZoomOutX:this.dw(new _h(this.me,this.chart,this.ke),e);break;case vh.ZoomOutY:this.dw(new Vh(this.me,this.chart,this.ke),e);break;case vh.ZoomToFit:this.dw(new Oh(this.me,this.chart,this.ke),e);break;case vh.ToggleAnimations:this.dw(new Nh(this.me,this.chart,this.ke),e);break;default:console.error('No predefined button like "'.concat(vh[t],'" exists.'))}}dw(t,e){e.rowSpan=t.Se.rows,e.colSpan=t.Se.columns,t.Be(e)}addCustomButton(t,e){const i=new Yh(this.me,t,this.chart);return this.dw(i,e),this}dispose(){this.tw.remove(),this.L.D("dispose",{})}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class Vg extends cg{constructor(t,e,i,s,r,n,o,a,h,l,c,u){var d;super(t,e,i,s,r,n,o,a,h,l),this.fw=t=>{this.L.D(t.type,t)},this.Aw=0,this.L=new Ar,this.Fa=u,this.bu=this.Ws.Ld(this.scale).dh(In(this.bi.lineSeriesStrokeStyle,c)).Id(In(this.bi.pointSeriesFillStyle,c)).zd(In(this.bi.pointSeriesStrokeStyle,c)).Pd(In(this.bi.areaSeriesPositiveFillStyle,c)).gw(void 0).Nd(7),this.bu.yw=!1!==(null===(d=this.Fa)||void 0===d?void 0:d.allowDataGrouping),this._s(this.bu)}dv(){return this.pw().getSampleCount()>0}ws(){return this.getDataSet().ju(this.mw)}setDataSet(t,e){var i;const s=null===(i=this.Td)||void 0===i?void 0:i.qi;if(t===s&&e&&this.mw&&wc(e,this.mw))return this;const r=["change","clear","loop","maxsamplecountexceed"];return s&&r.forEach(t=>s.removeEventListener(t,this.fw)),t?(r.forEach(e=>t.addEventListener(e,this.fw)),!e&&t.Ou&&(e=this.Sw(t.Ou)),e&&t.hd(e),this.mw=e,this.bw=!1,(null==e?void 0:e.color)&&this.fs.gi.ka(_l.Do),(null==e?void 0:e.size)&&this.fs.gi.ka(_l.Bo),this.Td=qn(t,this.Td,()=>({change:()=>{this.Aw+=1,this.Aw>1&&this.fs.gi.ka(_l.Lo),this.fs.gi.Bs()},clear:()=>{this.fs.gi.Bs()}})),e&&this.bu.Fd(t,e),this.fs.gi.Bs(),this):(this.bu.Fd(),this)}getDataSet(){return this.pw()}setDataMapping(t){var e;return(null===(e=this.Td)||void 0===e?void 0:e.qi)?this.setDataSet(this.getDataSet(),t):this.mw=t,this.bw=!1,this}getDataMapping(){return this.mw}setStrokeStyle(t){return this.bu.dh(t),this.Ws.Bs(),this}getStrokeStyle(){return this.bu.ao()}setAreaFillStyle(t){return this.bu.Pd(t),this.Ws.Bs(),this}getAreaFillStyle(){return this.bu.xw()}setPointFillStyle(t){return this.bu.Id(t),this.Ws.Bs(),this}getPointFillStyle(){return this.bu.Od()}setPointStrokeStyle(t){return this.bu.zd(t),this.Ws.Bs(),this}getPointStrokeStyle(){return this.bu.Vd()}setPointSize(t){return this.bu.Nd(t),this.Ws.Bs(),this}getPointSize(){return this.bu.Mw()}setPointShape(t){return this.bu.Bd(t),this.Ws.Bs(),this}getPointShape(){return this.bu.Dd()}setPointRotation(t){return this.bu.Rd(t),this.Ws.Bs(),this}getPointRotation(){return this.bu.Ed()}setPointAlignment(t){return this.bu.OA(t),this.fs.gi.Bs(),this}getPointAlignment(){return this.bu.ww()}setCurvePreprocessing(t){return this.bu.gw(t),this.Ws.Bs(),this}getCurvePreprocessing(){return this.bu._w()}appendJSON(t,e,i){return this.pw().appendJSON(t,e,i),this.Ws.gi.Bs(),this}appendSample(t,e){return this.pw().appendSample(t,e),this.Ws.gi.Bs(),this}appendSamples(t,e){return this.pw().appendSamples(t,e),this.Ws.gi.Bs(),this}fill(t){return this.pw().fill(t),this.Ws.Bs(),this}setSamples(t,e){return this.pw().setSamples(t,e),this.Ws.Bs(),this}alterSamplesStartingFrom(t,e,i){return this.pw().alterSamplesStartingFrom(t,e,i),this.Ws.Bs(),this}alterSamplesByIndex(t,e){return this.pw().alterSamplesByIndex(t,e),this.Ws.Bs(),this}alterSamplesByMatch(t,e,i){return this.pw().alterSamplesByMatch(t,e,i),this.Ws.Bs(),this}getSampleCount(){return this.pw().getSampleCount()}getNextSampleIndex(){return this.pw().getNextSampleIndex()}setMaxSampleCount(t){return this.pw().setMaxSampleCount(t),this.Ws.Bs(),this}getMaxSampleCount(){return this.pw().getMaxSampleCount()}clear(){return this.pw().clear(),this.Ws.Bs(),this}readBack(t){if(this.mw||this.kw(),!this.mw)return{xValues:new Float64Array,yValues:new Float64Array,iSampleFirst:0};const e=this.pw();if(null==t?void 0:t.onlyInRange){const i=e.ju(this.mw),s=i&&Da(i);if(!s)throw new Error("LightningChart JS - attempted to use `PointLineAreaSeries.readBack` with `onlyInRange` without a data pattern.\nThis operation is only supported for progressive data");const r=this.mw[s];return e.ed(this.mw,{onlyInRange:{key:r,start:t.onlyInRange.start,end:t.onlyInRange.end}})}return e.ed(this.mw)}solveNearest(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.fs.getCursorMode()||"show-nearest";this.mw||this.kw();let i=um(e);void 0!==this.getCurvePreprocessing()&&(i=!1);const s=this.Cw(),r=ya(t)?this.fs.translateCoordinate(t,{x:this.axisX,y:this.axisY}):t,n=s.dd(this.mw,r,i,this.scale,this.fs.Jf);if(void 0!==n)return l(l({cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}}},n),{},{series:this,axisX:this.axisX,axisY:this.axisY,pointShape:this.getPointShape()})}Ji(t,e,i){const s=this.getDataSet(),r=null==t?void 0:t.dataPoint;return void 0===s.ju(this.mw)||r?r?l(l({cursorPosition:{resultTable:r,resultTableScale:this.scale,pointMarker:r,pointMarkerScale:{x:this.axisX,y:this.axisY}}},r),{},{series:this,axisX:this.axisX,axisY:this.axisY,pointShape:this.getPointShape()}):void 0:Qn({series:this,axisX:this.axisX,axisY:this.axisY},{x:0,y:0,cursorPosition:0,rotation:0,size:0,color:0,lookupValue:0,multiHit:0,iSample:0,sample:0,pointShape:0},()=>this.solveNearest(e,this.fs.getCursorMode()))}Cw(){return this.pw()}Ys(){return Ln(this.getPointFillStyle(),this.bu.wi())||Ln(this.getStrokeStyle().getFillStyle(),this.bu.wi())||Ln(this.getAreaFillStyle(),this.bu.wi())}Av(){var t;const e=null===(t=this.Td)||void 0===t?void 0:t.qi;return this.getVisible()&&this.getAutoScrollingEnabled()&&void 0!==e&&e.Cu>0}pb(t){}bb(t){this.mw||this.kw();const e=this.bu.tl();return e&&"y"===e.Tw&&t&&e.Fw(),this.bu.Hi(t)}xb(t){this.mw||this.kw();const e=this.bu.tl();return e&&"y"===e.Tw&&t&&e.Fw(),this.bu.ji(t)}Mb(t){this.mw||this.kw();const e=this.bu.tl();return e&&"x"===e.Tw&&!t&&e.Fw(),this.bu.Xi(t)}wb(t){this.mw||this.kw();const e=this.bu.tl();return e&&"x"===e.Tw&&t&&e.Fw(),this.bu.Wi(t)}un(){return{x:this.bu.oc(),y:this.bu.ac()}}kw(){var t;const e=null===(t=this.Td)||void 0===t?void 0:t.qi;if((!this.mw||this.bw)&&e&&e.Ou){const t=e.Ou,i=this.Iw;let s=!1;if(this.mw&&this.bw&&i){const e=Object.keys(t).length!==Object.keys(i).length,r=Object.entries(t).find(t=>{let[e,s]=t;var r;return e in i&&i[e]!==(null===(r=s.Eu)||void 0===r?void 0:r.effective)});s=!e&&void 0===r}if(!s){const t=this.Sw(e.Ou);!t||this.mw&&wc(this.mw,t)||(this.mw=t,this.bw=!0,t.color&&this.fs.gi.ka(_l.Do),t.size&&this.fs.gi.ka(_l.Bo),this.bu.Fd(e,t)),this.Iw=Object.fromEntries(Object.entries(e.Ou).map(t=>{let[e,i]=t;var s;return[e,null===(s=i.Eu)||void 0===s?void 0:s.effective]}))}}}rv(){var t,e,i,s;if(super.rv(),this.kw(),((null===(t=this.Fa)||void 0===t?void 0:t.strictMode)||(null===(e=this.Td)||void 0===e?void 0:e.qi.Du))&&this.mw&&(null===(i=this.Td)||void 0===i?void 0:i.qi)){const t=this.Td.qi.Ou;t&&Object.values(this.mw).forEach(e=>{if(!(e in t))throw new Error("LightningChart JS error - PointLineAreaSeries data mapping is referencing a data property ('".concat(e,"') that doesn't exist in the connected data set. This is not allowed when strict mode is enabled."))})}const r=Da(null!==(s=this.ws())&&void 0!==s?s:"ProgressiveX");this.bu.Pw("x"===r?0===this.xAxis.Yf?"bottom":"top":0===this.yAxis.Yf?"left":"right")}pw(){var t;if(!this.Td){const t=new Mc(this.Fa);return this.setDataSet(t,!0!==this.bw?this.mw:void 0),t}return null===(t=this.Td)||void 0===t?void 0:t.qi}Sw(t){var e,i;if((null===(e=this.Fa)||void 0===e?void 0:e.strictMode)||(null===(i=this.Td)||void 0===i?void 0:i.qi.Du))throw new Error("LightningChart JS error - PointLineAreaSeries data mapping is not explicitly defined. This is not allowed when strict mode is enabled.");const s=Object.entries(t),r=s.find(t=>t[0].toLowerCase().includes("x")),n=s.find(t=>t[0].toLowerCase().includes("y")),o=s.find(t=>t[0].toLowerCase().includes("size")),a=s.find(t=>t[0].toLowerCase().includes("rot")),h=s.find(t=>t[0].toLowerCase().includes("lookup")||t[0].toLowerCase().includes("value")&&!t[0].toLowerCase().includes("y")&&!t[0].toLowerCase().includes("x")),c=s.find(t=>t[0].toLowerCase().includes("color")),u={};o&&(u.size=o[0]),a&&(u.rotation=a[0]),h&&(u.lookupValue=h[0]),c&&(u.color=c[0]);const d=s.find(t=>{var e;return Boolean(null===(e=t[1].Eu)||void 0===e?void 0:e.effective)}),f=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];for(const s of i)if(s!==t)return s[0];for(const n of s)if(n!==t&&!Object.keys(u).includes(n[0]))return n[0]};if("xValues"in t&&"yValues"in t)return l(l({},u),{},{x:"xValues",y:"yValues"});if("yValues"in t){const t=f(s.find(t=>"yValues"===t[0]));if(t)return l(l({},u),{},{x:t,y:"yValues"})}if("xValues"in t){const t=f(s.find(t=>"xValues"===t[0]));if(t)return l(l({},u),{},{y:t,x:"xValues"})}if(r&&n)return l(l({},u),{},{x:r[0],y:n[0]});if(d){const t="x",e="y",i=f(d);if(i)return l(l({},u),{},{[t]:d[0],[e]:i})}return s.length>=2?l(l({},u),{},{x:s[0][0],y:s[1][0]}):void 0}sh(){const t=this.getPointFillStyle(),e=this.getAreaFillStyle();return{stroke:this.getStrokeStyle(),fill:t!==sa?t:e,behavior:{priority:"stroke"}}}js(){return this.Rs||this.getPointShape()}eh(t,e){t.Fi(e),this.Ws.Bs()}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}const Ng={pan:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,chartInteractions:void 0},Og=(t,e,i,s)=>{t.seriesBackground.addEventListener(e,i,s),t.getSeries().forEach(t=>t.addEventListener(e,i,s));const r=t=>t.series.addEventListener(e,i,s);return t.addEventListener("seriesadd",r),()=>{t.seriesBackground.removeEventListener(e,i),t.getSeries().forEach(t=>t.removeEventListener(e,i)),t.removeEventListener("seriesadd",r)}},Yg=(t,e,i,s)=>{const r=[];t.forEachAxis(t=>{const n=e=>i(t,e);t.addEventListener(e,n,s),r.push(()=>t.removeEventListener(e,n))});const n=t=>{const n=e=>i(t.axis,e);t.axis.addEventListener(e,n,s),r.push(()=>t.axis.removeEventListener(e,n))};return t.addEventListener("axisadd",n),r.push(()=>t.removeEventListener("axisadd",n)),()=>{r.forEach(t=>t())}},Gg=(t,e,i)=>{io();const s=new Map;t.forEachAxis(t=>{var i,r;const n=t.oh.chartInteractions;!1===n||"object"==typeof n&&!1===n.restoreDefault||s.set(t,{animate:null!==(i=e.animationsEnabled)&&void 0!==i?i:void 0,stopAxisAfter:null!==(r=e.stopScroll)&&void 0!==r?r:void 0})}),t.Lw(s);const r=t.engine.setMouseStyle(Xh.ZoomOut);Ur.setTimeout(()=>{t.engine.restoreMouseStyle(r)},500);const n=e.on;n&&Ur.requestAnimationFrame(()=>n({event:i}))},Xg=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return(t,i)=>e.forEach(e=>e.forEach(e=>{e.axis.oi.X(t),e.axis.Wf.X(i)}))},Ug=As(10,10);var Hg;!function(t){t[t.Top=0]="Top",t[t.Bottom=1]="Bottom",t[t.Left=2]="Left",t[t.Right=3]="Right"}(Hg||(Hg={}));const jg=new Set([Hg.Top,Hg.Bottom,Hg.Left,Hg.Right]),Wg=t=>t.setStopped(!0),Zg=(t,e)=>{if(!t||!e)throw new Error("LightningChart JS error | either X or Y axis didn't exist when creating a series.");const i="linear-highPrecision"===t.ar.type||"linear-highPrecision"===e.ar.type,s="logarithmic"===t.ar.type||"logarithmic"===e.ar.type;if(i&&s){const i="Invalid Axis combination | 'logarithmic' can't be combined with 'linear-highPrecision' (x: ".concat(t.ar.type,", y: ").concat(e.ar.type,")");throw new Error(i)}};var Jg,qg,Qg;!function(t){t[t.seriesBackground=0]="seriesBackground",t[t.gridLine0=1]="gridLine0",t[t.gridLine1=2]="gridLine1",t[t.gridLine2=3]="gridLine2",t[t.highlightersBelow=4]="highlightersBelow"}(Jg||(Jg={})),function(t){t[t.plotting=0]="plotting",t[t.highlightersAbove=1]="highlightersAbove",t[t.fg=2]="fg"}(qg||(qg={}));class Kg extends Hd{constructor(t,e,i,s,r,n,o){var a,h,c,u,d;super(t,e,i,e.Vg("chartXY bg",0),s,e.gi.bi.chartXYBackgroundFillStyle,e.gi.bi.chartXYBackgroundStrokeStyle,e.gi.bi.chartXYTitleFont,e.gi.bi.chartXYTitleFillStyle,e.gi.bi.chartXYTitleShadow,o,null===(a=null==n?void 0:n.legend)||void 0===a?void 0:a.customLegend),this.Bw=this.kg.d2({scaleXYConstructor:rr}),this.MA=[],this.wA=[],this.kA=[],this._A=[],this.Dw=new Map,this.Rw=!0,this.Ew=[],this.Ow=this.bi.chartXYZoomingRectangleFillStyle,this.zw=this.bi.chartXYZoomingRectangleStrokeStyle,this.pA=$g,this.yb=0,this.fm=[],this.gm=()=>{if(this.ci)return;const t=new Map;this.forEachAxis(e=>{void 0!==e.aA().find(t=>t.dv())&&t.set(e,l(l({},e.getInterval()),{},{stopped:e.getStopped()}))}),t.size<=0||(this.fm.push(t),this.fm.length>100&&this.fm.shift())},this.Vw=(t,e,i)=>{const s=t.solveNearest(e,i);return s&&yo(s.cursorPosition.pointMarker.x,s.axisX.getInterval().start,s.axisX.getInterval().end)&&yo(s.cursorPosition.pointMarker.y,s.axisY.getInterval().start,s.axisY.getInterval().end)?s:void 0},this.Nw=Xg(this.wA,this.MA),this.Gw=Xg(this.kA,this._A),this.$w=t=>{this.Nw(t.engineWidth,t.engineHeight),this.Gw(t.engineHeight,t.engineWidth),this.Bw.X(t.engineWidth,t.engineHeight),this.gi.Bs()},this.Uw=(t,e)=>{this.Dw.set(t,e)},this.Gf=t=>{const e=this.wA.findIndex(e=>e.axis===t),i=this.MA.findIndex(e=>e.axis===t),s=this.kA.findIndex(e=>e.axis===t),r=this._A.findIndex(e=>e.axis===t);e>=0&&this.wA.splice(e,1),i>=0&&this.MA.splice(i,1),s>=0&&this.kA.splice(s,1),r>=0&&this._A.splice(r,1),this.Dw.delete(t),this.gi.Bs()},this.addAreaRangeSeries=t=>{const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zg(e,i);const s=new Pg(this,this.ly,this.rS,e,i,this.Yw(e),this.Yw(i),this.Tg,this.bi,this.gi.ys,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ny.length);return this.yy(s,t),s},this.L=new Ar,this.gi.ka(_l.Co),this.Sn({left:null!==(h=this.bi.panelPadding)&&void 0!==h?h:7,right:null!==(c=this.bi.panelPadding)&&void 0!==c?c:7,top:null!==(u=this.bi.panelPadding)&&void 0!==u?u:7,bottom:null!==(d=this.bi.panelPadding)&&void 0!==d?d:7},!1),this.jw=e.km("chartXY series bg",Jg.seriesBackground),this.Hw=[Jg.gridLine0,Jg.gridLine1,Jg.gridLine2].map(t=>e.Ww("chartXY gridline #".concat(t),t)),this.Vf=e.Ww("chartXY highlighters below",Jg.highlightersBelow),this.rS=e.Cm("chartXY plotting",qg.plotting),this.Nf=e.Cm("chartXY highlighters above",qg.highlightersAbove),this.zf=e.Cm("chartXY fg",qg.fg),this.Bw.x.H(0,this.uiScale.x.getCellSize()-(this.nt.left+this.nt.right+this.On.left+this.On.right)),this.Bw.y.H(0,this.uiScale.y.getCellSize()-(this.nt.bottom+this.nt.top+this.On.bottom+this.On.top)),this.Bw.X(this.uiScale._t().x,this.uiScale._t().y),this.gy=this.jw.qe(this.Bw).Ke(this.bi.chartXYSeriesBackgroundFillStyle).Qe(Lr),this.vy=this.jw.qe(this.Bw).Ke(sa).Qe(this.bi.chartXYSeriesBackgroundStrokeStyle).setPointerEvents(!1),super.Ay(this.gy,this.vy),this.setSeriesBackgroundEffect(!1);const f=$r(n?n.cursorBuilder:void 0,Ig),g=e.Dm();this.Rm=ym(this,g,f.sm(g,this.Bw,this.Bw,Jr,this.bi),this,"show-all",rp,(t,e)=>{const i=this.translateCoordinate(t,{x:t.axisX,y:t.axisY},this.coordsClient);return Math.sqrt((i.clientX-e.clientX)**2+(i.clientY-e.clientY)**2)}),this.addAxisX(n&&n.defaultAxisX),this.addAxisY(n&&n.defaultAxisY),this.addEventListener("resize",this.$w),this.Yh.Jr("ChartXY"),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled)),this.zg(r,this.Bw),this.Em=(t=>{let e={},i=!1,s=!1,r=!1;const n=()=>{var i;const s=t.getAxes().find(t=>{var e,i;return(null===(e=t.getScrollStrategy())||void 0===e?void 0:e.id)===sl||(null===(i=t.getScrollStrategy())||void 0===i?void 0:i.id)===rl}),r=t.getSeries().map(t=>t.ws()).find(t=>t),n=t.getSeries().find(t=>t instanceof Vg&&!ra(t.getAreaFillStyle())&&t.ws()),o=s?{type:"scrolling",scrollingAxis:s,x:s.isX,y:s.isY}:r?{type:"progressive",x:"ProgressiveX"===r||"RegressiveX"===r,y:"ProgressiveY"===r||"RegressiveY"===r}:{type:"freeform"};if("progressive"===o.type){const t={zoom:{wheel:{},stopScroll:!0},pan:{lmb:!1,rmb:{drag:{}}},restoreDefault:{doubleClick:!0},rectangleZoom:{lmb:{drag:{}},rmb:!1}},i={pan:{lmb:!1,rmb:{drag:{}}},zoom:{wheel:{},mode:n?"keep-start":"centered"},restoreDefault:{doubleClick:!0},rectangleZoom:{lmb:{drag:{}},rmb:!1}};return Gr({rectangleZoom:{x:o.x,y:o.y,rmb:!1},pan:{x:o.x,y:o.y,pinch:{},lmb:!1,rmb:{drag:{}}},paginate:!1,zoom:{x:o.x,y:o.y,wheel:{},pinch:{},stopScroll:!0},restoreDefault:{doubleClick:!0},restorePrevious:{ctrl:{code:"KeyZ"}},xAxis:o.x?t:i,yAxis:o.y?t:i},e)}if("scrolling"===o.type){const t=((null===(i=o.scrollingAxis.Lr)||void 0===i?void 0:i.id)===rl?-1:1)*(o.scrollingAxis.getInterval().end>o.scrollingAxis.getInterval().start?1:-1)>0?"keep-end":"keep-start",s={zoom:{wheel:{},stopScroll:!1,mode:t},pan:{drag:{}},restoreDefault:{doubleClick:!0}},r={rectangleZoom:{lmb:{},rmb:!1,mmb:!1},pan:{lmb:!1,rmb:{drag:{}},mmb:!1},zoom:{drag:!1,wheel:{},mode:n?"keep-start":"centered"},restoreDefault:{doubleClick:!0}};return Gr({rectangleZoom:!1,pan:{x:o.x,y:o.y,pinch:{},drag:{}},paginate:!1,zoom:{x:o.x,y:o.y,wheel:{},pinch:{stopScroll:!0},stopScroll:!1,mode:t},restoreDefault:{doubleClick:!0},restorePrevious:!1,xAxis:o.x?s:r,yAxis:o.y?s:r},e)}return Gr({pan:{x:!0,y:!0,pinch:{},lmb:!1,rmb:{drag:{}}},zoom:{x:!0,y:!0,pinch:{},wheel:{},mode:"toward-pointer"},rectangleZoom:{x:!0,y:!0,lmb:!0,rmb:!1},restoreDefault:{doubleClick:!0},restorePrevious:{ctrl:{code:"KeyZ"}},axes:{pan:{rmb:{drag:{}},lmb:!1},rectangleZoom:{lmb:{drag:{}},rmb:!1},zoom:{wheel:{}},restoreDefault:{doubleClick:!0}}},e)},o=t=>{const e=n(),i=t.getUserInteractions();let s=t.isX?e.xAxis:e.yAxis,r=e.axes;return s=!1!==s?s:Ng,r=!1!==r?r:Ng,Gr(null!=r?r:{},null!=s?s:{},i)},a=t=>{},h=e=>{if(!t.axisX||!t.axisY)return;const o=Sa(!1!==t.gi.Fa.Ia),a=n(),h=ba(a.pan,"drag",e,i,s,r);h&&o.push(()=>((t,e,i,s)=>{let r;const n=t.getCursorMode();let o=!1,a=e;"mouse"===e.pointerType&&e.preventDefault();const h=s=>{if(s.pointerId!==e.pointerId)return;const n=s.clientX-a.clientX,h=s.clientY-a.clientY;if(a=s,!o){if(!("mouse"===s.pointerType||Math.max(Math.abs(s.clientX-e.clientX),Math.abs(s.clientY-e.clientY))>=10))return;o=!0,r=t.engine.setMouseStyle(!1===i.x?Xh.Vertical:!1===i.y?Xh.Horizontal:Xh.Move),t.setCursorMode(void 0),eo()}mn(s),i.x&&t.forEachAxisX(t=>{var e;const s=t.oh.chartInteractions;!1===s||"object"==typeof s&&!1===s.pan||(!1!==i.stopScroll&&t.setStopped(!0),t.pan(-n*(null!==(e=i.sensitivity)&&void 0!==e?e:1)))}),i.y&&t.forEachAxisY(t=>{var e;const s=t.oh.chartInteractions;!1===s||"object"==typeof s&&!1===s.pan||(!1!==i.stopScroll&&t.setStopped(!0),t.pan(h*(null!==(e=i.sensitivity)&&void 0!==e?e:1)))});const l=i.on;l&&Ur.requestAnimationFrame(()=>l({event:s}))},l=i=>{i.pointerId===e.pointerId&&(Ur.removeEventListener("pointermove",h),Ur.removeEventListener("pointerup",l),t.engine.container.removeEventListener("pointerdown",c),r=t.engine.restoreMouseStyle(r),s(),t.setCursorMode(n))},c=i=>{i.pointerId!==e.pointerId&&(Ur.removeEventListener("pointermove",h),Ur.removeEventListener("pointerup",l),t.engine.container.removeEventListener("pointerdown",c),r=t.engine.restoreMouseStyle(r),s(),t.setCursorMode(n))};Ur.addEventListener("pointermove",h),Ur.addEventListener("pointerup",l),t.engine.container.addEventListener("pointerdown",c),io()})(t,e,h,f()));const l=ba(a.zoom,"drag",e,i,s,r);l&&o.push(()=>((t,e,i,s)=>{let r=t.engine.setMouseStyle(Xh.ZoomIn);const n=t.getCursorMode();t.setCursorMode(void 0);let o=!1,a=e;"mouse"===e.pointerType&&e.preventDefault();const h=s=>{if(s.pointerId!==e.pointerId)return;mn(s);const n={x:s.clientX-a.clientX,y:s.clientY-a.clientY};a=s,i.x&&t.forEachAxisX(s=>{var o;const a=s.oh.chartInteractions;if(!1===a||"object"==typeof a&&!1===a.zoom)return;let h;h="keep-start"===i.mode?s.getInterval().start:"keep-end"===i.mode?s.getInterval().end:"centered"===i.mode?s.oi.Dt((s.oi.bt()+s.oi.xt())/2):t.translateCoordinate(e,{x:s,y:s}).x;const l=.05*s.rr.getWidth({x:-n.x,y:n.y})*(null!==(o=i.sensitivity)&&void 0!==o?o:1);s.zoom(h,l),!1!==i.stopScroll&&s.setStopped(!0),r=t.engine.setMouseStyle(l<0?Xh.ZoomIn:Xh.ZoomOut,r)}),i.y&&t.forEachAxisY(s=>{var o;const a=s.oh.chartInteractions;if(!1===a||"object"==typeof a&&!1===a.zoom)return;let h;h="keep-start"===i.mode?s.getInterval().start:"keep-end"===i.mode?s.getInterval().end:"centered"===i.mode?s.oi.Dt((s.oi.bt()+s.oi.xt())/2):t.translateCoordinate(e,{x:s,y:s}).y;const l=.05*s.rr.getWidth({x:-n.x,y:n.y})*(null!==(o=i.sensitivity)&&void 0!==o?o:1);s.zoom(h,l),!1!==i.stopScroll&&s.setStopped(!0),r=t.engine.setMouseStyle(l<0?Xh.ZoomIn:Xh.ZoomOut,r)}),o||(eo(),o=!0);const h=i.on;h&&Ur.requestAnimationFrame(()=>h({event:s}))},l=i=>{i.pointerId===e.pointerId&&(Ur.removeEventListener("pointermove",h),Ur.removeEventListener("pointerup",l),t.engine.container.removeEventListener("pointerdown",c),r=t.engine.restoreMouseStyle(r),s(),t.setCursorMode(n))},c=i=>{i.pointerId!==e.pointerId&&(Ur.removeEventListener("pointermove",h),Ur.removeEventListener("pointerup",l),t.engine.container.removeEventListener("pointerdown",c),r=t.engine.restoreMouseStyle(r),s(),t.setCursorMode(n))};Ur.addEventListener("pointermove",h),Ur.addEventListener("pointerup",l),t.engine.container.addEventListener("pointerdown",c),io()})(t,e,l,f()));const c=ba(a.rectangleZoom,void 0,e,i,s,r);c&&o.push(()=>((t,e,i,s)=>{let r;const n=t.getCursorMode(),o=t.addRectangleSeries({legend:null}).setDrawOrder({seriesDrawOrderIndex:1e3}).setPointerEvents(!1).setCursorEnabled(!1).setAutoScrollingEnabled(!1).setClipping(!1),a=o.add({x1:0,x2:0,y1:0,y2:0});let h=!1,l=!1;"mouse"===e.pointerType&&e.preventDefault();const c=s=>{if(s.pointerId!==e.pointerId)return;mn(s),i.x&&t.forEachAxisX(t=>{const e=t.oh.chartInteractions;!1===e||"object"==typeof e&&!1===e.rectangleZoom||t.setStopped(!0)}),i.y&&t.forEachAxisY(t=>{const e=t.oh.chartInteractions;!1===e||"object"==typeof e&&!1===e.rectangleZoom||t.setStopped(!0)});const o=t.translateCoordinate(e,t.coordsAxis),c=t.translateCoordinate(s,t.coordsAxis),u=hr({x:0,y:0},t.Bw,t.coordsAxis),d=hr({x:t.Bw.x.getInnerEnd(),y:t.Bw.y.getInnerEnd()},t.Bw,t.coordsAxis);!1===i.x?a.setDimensions({y1:o.y,x1:u.x,y2:c.y,x2:d.x}):!1===i.y?a.setDimensions({x1:o.x,y1:u.y,x2:c.x,y2:d.y}):a.setDimensions({x1:o.x,y1:o.y,x2:c.x,y2:c.y});const f=mo({x:s.clientX,y:s.clientY},{x:i.x?e.clientX:s.clientX,y:i.y?e.clientY:s.clientY})>=20,g=yo(c.x,u.x,d.x)&&yo(c.y,u.y,d.y);if(a.setFillStyle(f&&g?t.getZoomingRectangleFillStyle():sa).setStrokeStyle(f&&g?t.getZoomingRectangleStrokeStyle():Lr),h||(eo(),h=!0),t.setCursorMode(f?void 0:n),f){if(r=t.engine.setMouseStyle(Xh.ZoomIn,r),!l){const t=i.start;t&&t({event:s})}}else r=t.engine.restoreMouseStyle(r);l=f},u=a=>{if(a.pointerId!==e.pointerId)return;const h=mo({x:a.clientX,y:a.clientY},{x:i.x?e.clientX:a.clientX,y:i.y?e.clientY:a.clientY})>=20,l=t.translateCoordinate(a,t.coordsAxis),f=hr({x:0,y:0},t.Bw,t.coordsAxis),g=hr({x:t.Bw.x.getInnerEnd(),y:t.Bw.y.getInnerEnd()},t.Bw,t.coordsAxis),p=yo(l.x,f.x,g.x)&&yo(l.y,f.y,g.y);h&&p&&t.forEachAxis(s=>{var r,n;if(s.isX&&!i.x)return;if(s.isY&&!i.y)return;const o=s.oh.chartInteractions;if(!1===o||"object"==typeof o&&!1===o.rectangleZoom)return;const h=t.translateCoordinate(e,{x:s,y:s}),l=t.translateCoordinate(a,{x:s,y:s}),c=s.rr.getWidth(h),u=s.rr.getWidth(l),d=Math.sign(u-c),f=Math.sign(s.getInterval().end-s.getInterval().start),g=d===f?c:u,p=d===f?u:c;s.ai(g,p,null!==(r=i.animationsEnabled)&&void 0!==r?r:void 0,null!==(n=i.stopScroll)&&void 0!==n?n:void 0,"interactionSetInterval")}),h&&to("click"),t.setCursorMode(n),o.dispose(),Ur.removeEventListener("pointermove",c),Ur.removeEventListener("pointerup",u),t.engine.container.removeEventListener("pointerdown",d),r=t.engine.restoreMouseStyle(r),s();const y=h&&p&&i.on;y&&Ur.requestAnimationFrame(()=>y({event:a}))},d=i=>{i.pointerId!==e.pointerId&&(t.setCursorMode(n),o.dispose(),Ur.removeEventListener("pointermove",c),Ur.removeEventListener("pointerup",u),t.engine.container.removeEventListener("pointerdown",d),r=t.engine.restoreMouseStyle(r),s())};Ur.addEventListener("pointermove",c),Ur.addEventListener("pointerup",u),t.engine.container.addEventListener("pointerdown",d),io()})(t,e,c,f())),o.end();const u=ba(a.pan,"pinch",e,i,s,r),d=ba(a.zoom,"pinch",e,i,s,r);(d||u)&&((t,e,i,s,r)=>{if(!i&&!s)return;const n=a=>{if(a.pointerId===e.pointerId)return;const h=r();let l;t.engine.container.removeEventListener("pointerdown",n),Ur.removeEventListener("pointerup",o);let c=a;const u=t.getCursorMode();t.setCursorMode(void 0);const d=r=>{var n,o,h,u;const d=l,f=c;if(r.pointerId===e.pointerId)l=r;else{if(r.pointerId!==a.pointerId)return;c=r}if(mn(r),void 0===l||void 0===d)return;const g={x:(l.clientX-d.clientX+(c.clientX-f.clientX))/2*(null!==(n=null==i?void 0:i.sensitivity)&&void 0!==n?n:1),y:(l.clientY-d.clientY+(c.clientY-f.clientY))/-2*(null!==(o=null==i?void 0:i.sensitivity)&&void 0!==o?o:1)};let p=!1;if(i&&i.x&&(p=!0,t.forEachAxisX(t=>{const e=t.oh.chartInteractions;!1===e||"object"==typeof e&&!1===e.pan||t.FA({},g)})),i&&i.y&&(p=!0,t.forEachAxisY(t=>{const e=t.oh.chartInteractions;!1===e||"object"==typeof e&&!1===e.pan||t.FA({},g)})),p){const t=null==i?void 0:i.on;t&&Ur.requestAnimationFrame(()=>t({event:r}))}const y=zo(Do({x:Math.abs(d.clientX-f.clientX),y:Math.abs(d.clientY-f.clientY)},{x:Math.abs(l.clientX-c.clientX),y:Math.abs(l.clientY-c.clientY)}),{x:null!==(h=null==s?void 0:s.sensitivity)&&void 0!==h?h:1,y:null!==(u=null==s?void 0:s.sensitivity)&&void 0!==u?u:1});let m=!1;if(s&&s.x&&(m=!0,t.forEachAxisX(t=>{var e;const i=t.oh.chartInteractions;!1===i||"object"==typeof i&&!1===i.zoom||t.ai(t.oi.Jt(t.getInterval().start,-t.rr.getWidth(y)),t.oi.Jt(t.getInterval().end,t.rr.getWidth(y)),!1,null!==(e=s.stopScroll)&&void 0!==e?e:void 0,"interactionZoom")})),s&&s.y&&(m=!0,t.forEachAxisY(t=>{var e;const i=t.oh.chartInteractions;!1===i||"object"==typeof i&&!1===i.zoom||t.ai(t.oi.Jt(t.getInterval().start,-t.rr.getWidth(y)),t.oi.Jt(t.getInterval().end,t.rr.getWidth(y)),!1,null!==(e=s.stopScroll)&&void 0!==e?e:void 0,"interactionZoom")})),m){const t=null==s?void 0:s.on;t&&Ur.requestAnimationFrame(()=>t({event:r}))}},f=i=>{i.pointerId!==e.pointerId&&i.pointerId!==a.pointerId||(mn(i),t.setCursorMode(u),Ur.removeEventListener("pointermove",d),Ur.removeEventListener("pointerup",f),h())};Ur.addEventListener("pointermove",d),Ur.addEventListener("pointerup",f),io()},o=i=>{i.pointerId===e.pointerId&&(t.engine.container.removeEventListener("pointerdown",n),Ur.removeEventListener("pointerup",o))};t.engine.container.addEventListener("pointerdown",n),Ur.addEventListener("pointerup",o)})(t,e,u,d,f)};Og(t,"wheel",e=>{const o=Sa(!1!==t.gi.Fa.Ia),a=n(),h=ba(a.pan,"wheel",e,i,s,r);h&&o.push(()=>((t,e,i)=>{if(mn(e),t.forEachAxisX(t=>{var s;const r=t.oh.chartInteractions;!1===r||"object"==typeof r&&!1===r.pan||i.x&&(!1!==i.stopScroll&&t.setStopped(!0),t.pan(-30*Math.sign(e.deltaY)*(null!==(s=i.sensitivity)&&void 0!==s?s:1)))}),t.forEachAxisY(t=>{var s;const r=t.oh.chartInteractions;!1===r||"object"==typeof r&&!1===r.pan||i.y&&(!1!==i.stopScroll&&t.setStopped(!0),t.pan(-30*Math.sign(e.deltaY)*(null!==(s=i.sensitivity)&&void 0!==s?s:1)))}),i.x||i.y){const s=t.engine.setMouseStyle(!i.x&&i.y?Xh.Vertical:i.x&&!i.y?Xh.Horizontal:Xh.Move);Ur.setTimeout(()=>{t.engine.restoreMouseStyle(s)},500);const r=i.on;r&&Ur.requestAnimationFrame(()=>r({event:e}))}})(t,e,h));const l=ba(a.zoom,"wheel",e,i,s,r);l&&o.push(()=>((t,e,i)=>{mn(e),t.forEachAxisX(s=>{var r;const n=s.oh.chartInteractions;if(!1===n||"object"==typeof n&&!1===n.zoom)return;if(!i.x)return;let o;o="keep-start"===i.mode?s.getInterval().start:"keep-end"===i.mode?s.getInterval().end:"centered"===i.mode?s.oi.Dt((s.oi.bt()+s.oi.xt())/2):t.translateCoordinate(e,{x:s,y:s}).x,s.zoom(o,Math.sign(e.deltaY)*(null!==(r=i.sensitivity)&&void 0!==r?r:1)),!1!==i.stopScroll&&s.setStopped(!0)}),t.forEachAxisY(s=>{var r;const n=s.oh.chartInteractions;if(!1===n||"object"==typeof n&&!1===n.zoom)return;if(!i.y)return;let o;o="keep-start"===i.mode?s.getInterval().start:"keep-end"===i.mode?s.getInterval().end:"centered"===i.mode?s.oi.Dt((s.oi.bt()+s.oi.xt())/2):t.translateCoordinate(e,{x:s,y:s}).y,s.zoom(o,Math.sign(e.deltaY)*(null!==(r=i.sensitivity)&&void 0!==r?r:1)),!1!==i.stopScroll&&s.setStopped(!0)});const s=t.engine.setMouseStyle(e.deltaY<0?Xh.ZoomIn:Xh.ZoomOut);Ur.setTimeout(()=>{t.engine.restoreMouseStyle(s)},500);const r=i.on;r&&Ur.requestAnimationFrame(()=>r({event:e}))})(t,e,l)),o.end()}),Og(t,"click",e=>{if(e.defaultPrevented)return;const o=Sa(!1!==t.gi.Fa.Ia),a=n(),h=ba(a.restoreDefault,void 0,e,i,s,r);h&&h.singleClick&&o.push(()=>{mn(e),Gg(t,h,e)});const l=ba(a.restorePrevious,void 0,e,i,s,r);l&&l.singleClick&&o.push(()=>{mn(e);const i=t.getAxes().filter(t=>{const e=t.oh.chartInteractions;return!(!1===e||"object"==typeof e&&!1===e.restorePrevious)});t.restorePreviousZoomState({whitelist:i});const s=t.engine.setMouseStyle(Xh.ZoomOut);Ur.setTimeout(()=>{t.engine.restoreMouseStyle(s)},500);const r=l.on;r&&Ur.requestAnimationFrame(()=>r({event:e}))}),o.end()}),Og(t,"contextmenu",e=>{if(e.defaultPrevented)return;const o=Sa(!1!==t.gi.Fa.Ia),a=n(),h=ba(a.restoreDefault,"rmb",e,i,s,r);h&&h.singleClick&&o.push(()=>{mn(e),Gg(t,h,e)});const l=ba(a.restorePrevious,"rmb",e,i,s,r);l&&l.singleClick&&o.push(()=>{mn(e);const i=t.getAxes().filter(t=>{const e=t.oh.chartInteractions;return!(!1===e||"object"==typeof e&&!1===e.restorePrevious)});t.restorePreviousZoomState({whitelist:i});const s=t.engine.setMouseStyle(Xh.ZoomOut);Ur.setTimeout(()=>{t.engine.restoreMouseStyle(s)},500);const r=l.on;r&&Ur.requestAnimationFrame(()=>r({event:e}))}),o.end()}),Og(t,"dblclick",e=>{if(e.defaultPrevented)return;const o=Sa(!1!==t.gi.Fa.Ia),a=n(),h=ba(a.restoreDefault,void 0,e,i,s,r);h&&h.doubleClick&&o.push(()=>{mn(e),Gg(t,h,e)});const l=ba(a.restorePrevious,void 0,e,i,s,r);l&&l.doubleClick&&o.push(()=>{mn(e);const i=t.getAxes().filter(t=>{const e=t.oh.chartInteractions;return!(!1===e||"object"==typeof e&&!1===e.restorePrevious)});t.restorePreviousZoomState({whitelist:i});const s=t.engine.setMouseStyle(Xh.ZoomOut);Ur.setTimeout(()=>{t.engine.restoreMouseStyle(s)},500);const r=l.on;r&&Ur.requestAnimationFrame(()=>r({event:e}))}),o.end()});const l=(e,n)=>{const a=Sa(!1!==t.gi.Fa.Ia),h=o(e),l=ba(h.pan,"drag",n,i,s,r);l&&a.push(()=>((t,e,i,s)=>{const r=t.chart,n=r.getCursorMode();r.setCursorMode(void 0);let o=r.engine.setMouseStyle(t.isY?Xh.Vertical:Xh.Horizontal),a=!1,h=e;"mouse"===e.pointerType&&e.preventDefault();const l=s=>{var r;if(s.pointerId!==e.pointerId)return;mn(s);const n=s.clientX-h.clientX,o=s.clientY-h.clientY;h=s,!1!==i.stopScroll&&t.setStopped(!0),t.pan((t.isX?-n:o)*(null!==(r=i.sensitivity)&&void 0!==r?r:1)),a||(eo(),a=!0);const l=i.on;l&&Ur.requestAnimationFrame(()=>l({event:s}))},c=i=>{i.pointerId===e.pointerId&&(mn(i),Ur.removeEventListener("pointermove",l),Ur.removeEventListener("pointerup",c),o=t.chart.engine.restoreMouseStyle(o),s(),t.chart.setCursorMode(n))};Ur.addEventListener("pointermove",l),Ur.addEventListener("pointerup",c)})(e,n,l,f()));const c=ba(h.zoom,"drag",n,i,s,r);c&&a.push(()=>((t,e,i,s)=>{const r=t.chart;let n=r.engine.setMouseStyle(Xh.ZoomIn);const o=r.getCursorMode();r.setCursorMode(void 0);let a=!1,h=e;"mouse"===e.pointerType&&e.preventDefault();const l=s=>{var o;if(s.pointerId!==e.pointerId)return;mn(s);const l={x:s.clientX-h.clientX,y:s.clientY-h.clientY};let c;h=s,c="keep-start"===i.mode?t.getInterval().start:"keep-end"===i.mode?t.getInterval().end:t.oi.Dt((t.oi.bt()+t.oi.xt())/2);const u=.05*t.rr.getWidth({x:-l.x,y:l.y})*(null!==(o=i.sensitivity)&&void 0!==o?o:1);t.zoom(c,u),!1!==i.stopScroll&&t.setStopped(!0),n=r.engine.setMouseStyle(u<0?Xh.ZoomIn:Xh.ZoomOut,n),a||(eo(),a=!0);const d=i.on;d&&Ur.requestAnimationFrame(()=>d({event:s}))},c=t=>{t.pointerId===e.pointerId&&(mn(t),Ur.removeEventListener("pointermove",l),Ur.removeEventListener("pointerup",c),n=r.engine.restoreMouseStyle(n),r.setCursorMode(o),s())};Ur.addEventListener("pointermove",l),Ur.addEventListener("pointerup",c)})(e,n,c,f()));const u=ba(h.rectangleZoom,void 0,n,i,s,r);u&&a.push(()=>((t,e,i,s)=>{const r=t.chart,n=r.getCursorMode();r.setCursorMode(void 0);let o=r.engine.setMouseStyle(Xh.ZoomIn);const a=t.addBand({onTop:!0}).setPointerEvents(!1).setValueStart(t.rr.getWidth(r.translateCoordinate(e,{x:t,y:t}))).setValueEnd(t.rr.getWidth(r.translateCoordinate(e,{x:t,y:t}))).setVisible(!1).setFillStyle(r.getZoomingRectangleFillStyle()).setStrokeStyle(r.getZoomingRectangleStrokeStyle());let h=!1,l=!1;"mouse"===e.pointerType&&e.preventDefault();const c=s=>{if(s.pointerId!==e.pointerId)return;mn(s),t.setStopped(!0);const n=r.translateCoordinate(s,{x:t,y:t});a.setValueEnd(t.rr.getWidth(n));const o=mo({x:s.clientX,y:s.clientY},{x:t.isX?e.clientX:s.clientX,y:t.isY?e.clientY:s.clientY})>=20;if(a.setVisible(o),h||(eo(),h=!0),o&&!l){const t=o&&i.start;t&&t({event:s})}l=o},u=h=>{var l,d;if(h.pointerId!==e.pointerId)return;mn(h);const f=mo({x:h.clientX,y:h.clientY},{x:t.isX?e.clientX:h.clientX,y:t.isY?e.clientY:h.clientY})>=20;if(f){const s=t.rr.getWidth(r.translateCoordinate(e,{x:t,y:t})),n=t.rr.getWidth(r.translateCoordinate(h,{x:t,y:t})),o=Math.sign(n-s),a=Math.sign(t.getInterval().end-t.getInterval().start),c=o===a?s:n,u=o===a?n:s;t.ai(c,u,null!==(l=i.animationsEnabled)&&void 0!==l?l:void 0,null!==(d=i.stopScroll)&&void 0!==d?d:void 0,"interactionSetInterval")}a.dispose(),Ur.removeEventListener("pointermove",c),Ur.removeEventListener("pointerup",u),o=r.engine.restoreMouseStyle(o),s(),r.setCursorMode(n);const g=f&&i.on;g&&Ur.requestAnimationFrame(()=>g({event:h}))};Ur.addEventListener("pointermove",c),Ur.addEventListener("pointerup",u)})(e,n,u,f())),a.end()};Yg(t,"pointerenter",(t,e)=>{const i=o(t);t.getHighlightOnHover()&&(i.pan||i.rectangleZoom||i.restoreDefault||i.zoom)&&t.setHighlight(!0)}),Yg(t,"pointerleave",(t,e)=>{t.getHighlightOnHover()&&t.setHighlight(!1)}),Yg(t,"wheel",(e,n)=>{const a=Sa(!1!==t.gi.Fa.Ia),h=o(e),l=ba(h.zoom,"wheel",n,i,s,r);l&&a.push(()=>((t,e,i)=>{var s;let r;mn(e),r="keep-start"===i.mode?t.getInterval().start:"keep-end"===i.mode?t.getInterval().end:"centered"===i.mode?t.oi.Dt((t.oi.bt()+t.oi.xt())/2):t.rr.getWidth(t.chart.translateCoordinate(e,{x:t,y:t})),t.zoom(r,Math.sign(e.deltaY)*(null!==(s=i.sensitivity)&&void 0!==s?s:1)),!1!==i.stopScroll&&t.setStopped(!0);const n=t.chart.engine.setMouseStyle(e.deltaY<0?Xh.ZoomIn:Xh.ZoomOut);Ur.setTimeout(()=>{t.chart.engine.restoreMouseStyle(n)},500);const o=i.on;o&&Ur.requestAnimationFrame(()=>o({event:e}))})(e,n,l));const c=ba(h.pan,"wheel",n,i,s,r);c&&a.push(()=>((t,e,i)=>{var s;mn(e);const r=t.chart;!1!==i.stopScroll&&t.setStopped(!0),t.pan(30*Math.sign(e.deltaY)*t.rr.getWidth({x:-1,y:1})*(null!==(s=i.sensitivity)&&void 0!==s?s:1));const n=r.engine.setMouseStyle(t.isY?Xh.Vertical:Xh.Horizontal);Ur.setTimeout(()=>{t.chart.engine.restoreMouseStyle(n)},500);const o=i.on;o&&Ur.requestAnimationFrame(()=>o({event:e}))})(e,n,c)),a.end()}),Yg(t,"dblclick",(e,n)=>{var a,h;if(n.defaultPrevented)return;const l=o(e),c=ba(l.restoreDefault,void 0,n,i,s,r);if(c&&c.doubleClick){mn(n),e.fit(null!==(a=c.animationsEnabled)&&void 0!==a?a:void 0,null!==(h=c.stopScroll)&&void 0!==h?h:void 0);const i=t.engine.setMouseStyle(Xh.ZoomOut);Ur.setTimeout(()=>{t.engine.restoreMouseStyle(i)},500);const s=c.on;s&&Ur.requestAnimationFrame(()=>s({event:n}))}});const c=e=>{const o=n();let a=!1,h=!1,l=!1;for(const t of Object.keys(o)){const e=o[t];if("object"==typeof e)if("axes"===t||"xAxis"===t||"yAxis"===t){const t=e;if("object"!=typeof t)continue;for(const e of Object.keys(t)){const i=t[e];"object"==typeof i&&("ctrl"in i&&void 0!==i.ctrl&&(a=!0),"shift"in i&&void 0!==i.shift&&(h=!0),"alt"in i&&void 0!==i.alt&&(l=!0))}}else"ctrl"in e&&void 0!==e.ctrl&&(a=!0),"shift"in e&&void 0!==e.shift&&(h=!0),"alt"in e&&void 0!==e.alt&&(l=!0)}s=e.ctrlKey,i=e.shiftKey,r=e.altKey,("Control"===e.key&&a||"Shift"===e.key&&h||"Alt"===e.key&&l)&&e.preventDefault();const c=ba(o.restorePrevious,void 0,e,i,s,r);if(c&&c.code===e.code){mn(e);const i=t.getAxes().filter(t=>{const e=t.oh.chartInteractions;return!(!1===e||"object"==typeof e&&!1===e.restorePrevious)});t.restorePreviousZoomState({whitelist:i});const s=c.on;s&&Ur.requestAnimationFrame(()=>s({event:e}))}const u=ba(o.paginate,void 0,e,i,s,r);u&&((t,e,i)=>{var s,r,n,o;const a=null!==(r=null===(s=i.forward)||void 0===s?void 0:s.code)&&void 0!==r?r:"ArrowLeft",h=null!==(o=null===(n=i.backward)||void 0===n?void 0:n.code)&&void 0!==o?o:"ArrowRight",l=e.code===a?1:e.code===h?-1:0;if(0===l)return;let c=!1;if(t.forEachAxis(t=>{var e;const s=t.oh.chartInteractions;!1===s||"object"==typeof s&&!1===s.paginate||t.isX&&!i.x||t.isY&&!i.y||(c=!0,!1!==i.stopScroll&&t.setStopped(!0),t.pan(-l*(t.dr>t.ur?1:-1)*.5*t.oi.Mt()*(null!==(e=i.sensitivity)&&void 0!==e?e:1)))}),c){mn(e);const s=t.engine.setMouseStyle(!i.x&&i.y?Xh.Vertical:i.x&&!i.y?Xh.Horizontal:Xh.Move);Ur.setTimeout(()=>{t.engine.restoreMouseStyle(s)},500);const r=i.on;r&&Ur.requestAnimationFrame(()=>r({event:e}))}})(t,e,u);const d=ba(o.restoreDefault,void 0,e,i,s,r);if(d&&d.code===e.code){mn(e),t.getAxes().forEach(t=>{var e,i;const s=t.oh.chartInteractions;!1===s||"object"==typeof s&&!1===s.restoreDefault||t.fit(null!==(e=d.animationsEnabled)&&void 0!==e?e:void 0,null!==(i=d.stopScroll)&&void 0!==i?i:void 0)});const i=d.on;i&&Ur.requestAnimationFrame(()=>i({event:e}))}},u=t=>{s=t.ctrlKey,i=t.shiftKey,r=t.altKey},d=()=>{s=!1,i=!1,r=!1};Ur.addEventListener("keydown",c),Ur.addEventListener("keyup",u),Ur.addEventListener("blur",d),t.addEventListener("dispose",()=>{Ur.removeEventListener("keydown",c),Ur.removeEventListener("keyup",u),Ur.removeEventListener("blur",d)});const f=()=>(g(),p(),y(),()=>{g=Og(t,"pointermove",a),p=Og(t,"pointerdown",h),y=Yg(t,"pointerdown",l)});let g=Og(t,"pointermove",a),p=Og(t,"pointerdown",h),y=Yg(t,"pointerdown",l);return{setUserInteractions:t=>{if(void 0===t)e={pan:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,restorePrevious:!1,axes:!1,xAxis:!1,yAxis:!1};else if(0===Object.keys(t).length)e={};else for(const i of Object.keys(t))!1===t[i]||"object"==typeof t[i]?e[i]=t[i]:e[i]={}},getUserInteractions:n}})(this);const p=l({},null==n?void 0:n.legend);this.legend.setOptions(p)}get coordsAxis(){return{x:this.getDefaultAxisX(),y:this.getDefaultAxisY()}}getSeries(){return this.ny}restorePreviousZoomState(t){if(this.fm.length<=1)return this;this.fm.pop();const e=this.fm[this.fm.length-1];return e?(this.Xw=Ur.performance.now(),this.forEachAxis(i=>{if((null==t?void 0:t.whitelist)&&!t.whitelist.includes(i))return;const s=e.get(i);s?i.ai(s.start,s.end,null==t?void 0:t.animate,void 0!==(null==t?void 0:t.stopAxisAfter)?t.stopAxisAfter:s.stopped,"userSetInterval"):i.fit(null==t?void 0:t.animate,null==t?void 0:t.stopAxisAfter)}),this):this}clearPreviousZoomStateHistory(){if(void 0!==this.Gm)this.fm.length=0;else for(;this.fm.length>1;)this.fm.unshift();return this}setCursor(t){return this.Rm.setCursor(t),this}getCursor(){return this.Rm.getCursor()}setCursorMode(t){return this.Rm.setCursorMode(t),this}getCursorMode(){return this.Rm.getCursorMode()}setCustomCursor(t){return this.Rm.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.Rm.Ym(t),this}setCursorFormatting(t){return this.Rm.setCursorFormatting(t),this}getCursorFormatting(){return this.Rm.getCursorFormatting()}solveNearest(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getCursorMode()||"show-nearest";return this.Rm.solveNearest(t,e,this.ny,this.Vw)}addCursor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ig;const e=this.Tg(),i=t.sm(e,this.Bw,this.Bw,this.wg(e),this.bi);return i.UM=!0,this.Eg(i),i}getMinimumSize(){var t;const e={x:0,y:0};e.x+=this.nt.left+this.nt.right+this.On.left+this.On.right,e.y+=this.nt.top+this.nt.bottom+this.On.top+this.On.bottom;const i=this.Yh.Er().vu(),s=Ls(tp(this.pA||$g,null!==(t=this.bi.chartXYTitleMargin)&&void 0!==t?t:5),this.Ng);return e.x+=i.x+s.left+s.right,e.y+=i.y+s.top+s.bottom,this.Zw&&(e.x+=this.Zw.left,e.x+=this.Zw.right,e.y+=this.Zw.top,e.y+=this.Zw.bottom),e.x+=Ug.x,e.y+=Ug.y,e}getLayout(){const t=this.Jw;return this.gi.Qw()||!t?new Promise(t=>{this.addEventListener("layoutchange",t,{once:!0}),this.Jw=void 0}):new Promise(e=>{e(t)})}addAxisX(t){var e,i;const{opposite:s,type:r}=ka(t);let n;n="linear"===r.type?this.kg.d1({dimension:"x",scale1DConstructor:er}):"linear-highPrecision"===r.type?this.kg.d1({dimension:"x",scale1DConstructor:er}).Et():this.kg.d1({dimension:"x",scale1DConstructor:Xo}).hs(r.base),n.X(this.Bw.x._t());const o=s?this.MA:this.wA,a=new vu(this.Hw,this.zf,this.$g,this.Vf,this.Nf,this.gi.ys,n,this.Bw.y,(h=()=>a.aA(),l(l({},Su),(t=>l({defaultDragMouseStyle:Xh.Horizontal,getTitleTextRotation:()=>0},_d(t,(t,e)=>t.xb(e),(t,e)=>t.bb(e),t=>t.un().x)))(h))),this,s?100:0,this.Gf,this.Uw,this.bi,this.Rh,r);var h;let c,u;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(c=o.reduce((t,e)=>Math.max(t,e.iParallel+1),0),u=0):(c=null!==(e=t.iParallel)&&void 0!==e?e:0,u=null!==(i=t.iStack)&&void 0!==i?i:0),o.push({axis:a,iStack:u,iParallel:c}),this.gi.Bs(),this.L.D("axisadd",{axis:a}),this.Nm(a),a}addAxisY(t){var e,i;const{opposite:s,type:r}=ka(t);let n;n="linear"===r.type?this.kg.d1({dimension:"y",scale1DConstructor:er}):"linear-highPrecision"===r.type?this.kg.d1({dimension:"y",scale1DConstructor:er}).Et():this.kg.d1({dimension:"y",scale1DConstructor:Xo}).hs(r.base),n.X(this.Bw.y._t());const o=s?this._A:this.kA,a=new vu(this.Hw,this.zf,this.$g,this.Vf,this.Nf,this.gi.ys,n,this.Bw.x,(h=()=>a.aA(),l(l({},Au),(t=>l({defaultDragMouseStyle:Xh.Vertical,getTitleTextRotation:t=>90*t},_d(t,(t,e)=>t.wb(e),(t,e)=>t.Mb(e),t=>t.un().y)))(h))),this,s?100:0,this.Gf,this.Uw,this.bi,this.Rh,r);var h;let c,u;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(c=o.reduce((t,e)=>Math.max(t,e.iParallel+1),0),u=0):(c=null!==(e=t.iParallel)&&void 0!==e?e:0,u=null!==(i=t.iStack)&&void 0!==i?i:0),o.push({axis:a,iParallel:c,iStack:u}),this.gi.Bs(),this.L.D("axisadd",{axis:a}),this.Nm(a),a}Nm(t){const e=()=>{const e=Ur.performance.now();void 0!==this.Xw&&e-this.Xw<=1e3||t.getVisible()&&(this.Kw=e+300)};Ur.requestAnimationFrame(()=>{e()}),t.addEventListener("intervalchange",e),t.addEventListener("dispose",()=>{this.fm.forEach(e=>{e.delete(t)})})}swapAxes(t,e){const i=[this.wA,this.kA,this._A,this.MA],s=i.find(e=>void 0!==e.find(e=>e.axis===t)),r=i.find(t=>void 0!==t.find(t=>t.axis===e));if(!s||!r)return this;if(s!==r)throw new Error("LightningChart JS ChartXY.swapAxes does not support swapping Axes that are on different sides.");const n=s.find(e=>e.axis===t),o=s.find(t=>t.axis===e);if(!n||!o)return this;const a=n.iParallel,h=n.iStack;n.iParallel=o.iParallel,n.iStack=o.iStack,o.iParallel=a,o.iStack=h,this.Jw=void 0;const l=[];this.legend.getEntries().forEach(t=>{if(t.component&&t.component instanceof cg){const e=t.component.axisX,i=t.component.axisY,r=s.find(t=>t.axis===e||t.axis===i);r&&l.push({iStack:r.iStack,entry:t.component})}});const c=l.sort((t,e)=>e.iStack-t.iStack).map(t=>t.entry);return this.Os.forEach(t=>t.Ag(c)),this.gi.Bs(),this}dispose(){return this.Rm.N(),this.jw.N(),this.rS.N(),this.zf.N(),this.Hw.forEach(t=>t.N()),this.Nf.N(),this.Vf.N(),this.nw().forEach(t=>t.dispose()),Ed(this.Bw),this.wA.slice().forEach(t=>t.axis.dispose()),this.kA.slice().forEach(t=>t.axis.dispose()),this._A.slice().forEach(t=>t.axis.dispose()),this.MA.slice().forEach(t=>t.axis.dispose()),this.ny.slice().forEach(t=>{t.dispose()}),super.dispose()}getDefaultAxisX(){var t;return null===(t=[...this.wA,...this.MA].find(t=>t.axis.getVisible()))||void 0===t?void 0:t.axis}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}getDefaultAxisY(){var t;return null===(t=[...this.kA,...this._A].find(t=>t.axis.getVisible()))||void 0===t?void 0:t.axis}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}getDefaultAxes(){return[this.getDefaultAxisX(),this.getDefaultAxisY()]}getAxes(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];const s=e&&e.length>0?new Set(e):jg;return Kr(Array.from(s).map(t=>{switch(t){default:case Hg.Top:return this.MA.slice().sort((t,e)=>t.iStack-e.iStack).map(t=>t.axis);case Hg.Bottom:return this.wA.slice().sort((t,e)=>t.iStack-e.iStack).map(t=>t.axis);case Hg.Left:return this.kA.slice().sort((t,e)=>t.iStack-e.iStack).map(t=>t.axis);case Hg.Right:return this._A.slice().sort((t,e)=>t.iStack-e.iStack).map(t=>t.axis)}}))}qw(t){let e;return this.forEachAxisX(i=>{e=t===i?"x":e}),this.forEachAxisY(i=>{e=t===i?"y":e}),e}forEachAxisX(t){this.wA.forEach((e,i,s)=>t(e.axis,i,s.map(t=>t.axis))),this.MA.forEach((e,i,s)=>t(e.axis,i,s.map(t=>t.axis)))}forEachAxisY(t){this.kA.forEach((e,i,s)=>t(e.axis,i,s.map(t=>t.axis))),this._A.forEach((e,i,s)=>t(e.axis,i,s.map(t=>t.axis)))}setTitlePosition(t){return this.pA=t,this.Os.forEach(t=>t.zs()),this.gi.Bs(),this}getTitlePosition(){return this.pA}th(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var i;super.th(t);const s=Ur.performance.now();void 0!==this.Kw&&this.Kw<=s&&(this.gm(),this.Kw=void 0);for(const l of this.ny)l.rv();for(const l of this.ny)l.th();const r=On(this.ny.map(t=>t.tl())),n=new Set(r.map(t=>t.Tw));if(1===n.size){const t=Array.from(n)[0],e="x"===t?[this.wA,this.MA]:[this.kA,this._A],i="y"===t?[this.wA,this.MA]:[this.kA,this._A];e.forEach(t=>t.forEach(t=>t.axis.dn())),i.forEach(t=>t.forEach(t=>t.axis.dn()))}else this.kA.forEach(t=>t.axis.dn()),this.wA.forEach(t=>t.axis.dn()),this.MA.forEach(t=>t.axis.dn()),this._A.forEach(t=>t.axis.dn());let o=!1;this.forEachAxis(t=>{(t.yn()||t.pn())&&(o=!0)});const a=!this.Rw&&o,h=new Set(this.getAxes().map(t=>t.getStackIndex())).size>1;this.Rm.th(a,h?this.ny.sort((t,e)=>e.axisY.getStackIndex()-t.axisY.getStackIndex()):this.ny,this.Vw,{afterCursorPointedAt:t=>{const e=this.gi._a();if(t.length>1&&e){const t=this.gi.Ja(e);this.Rm.t_.Hp({x:t.engineX,y:t.engineY},this.gi.oi)}},overrideCursorPositions:(t,e)=>t.map(t=>t.multiHit?t.multiHit.map(e=>l(l({},t.cursorPosition),{},{pointMarker:e})):[t.cursorPosition]).flat()});const c=function(t,e,i,s){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const n=sp(t);let o=0;const a=[],h=n.parallels.map(t=>{const n=t.stacks.reduce((t,e)=>{var i,s;return t+(e.axis.getVisible()?(null!==(i=e.axis.mA)&&void 0!==i?i:0)+(null!==(s=e.axis.SA)&&void 0!==s?s:0):0)},0),h=t.stacks.reduce((t,e)=>t+(e.axis.getVisible()&&"pixels"in e.axis.cf?e.axis.cf.pixels:0),0),c=e-n-h;let u=0;const d=t.stacks.map(i=>{var n,h;const d=i.axis,f=d.getVisible(),g=Math.max(e-u,0),p=Math.min(f?"pixels"in d.cf?d.cf.pixels:d.cf.relative/t.sumRelativeSize*c:0,g),y=t.stacks.length,m=l(l({},r),{},{availableSpace:e,stack:i,axisLength:p,axisLengthOffset:u,axisThicknessOffset:o,stackAxisCount:y}),v=s(m,a);return a.push(l(l({},m),v)),f&&(u+=p+(null!==(n=d.mA)&&void 0!==n?n:0)+(null!==(h=d.SA)&&void 0!==h?h:0)),l(l({},v),{},{stack:i,axis:d})}),f=d.reduce((t,e)=>e.axis.getVisible()?Math.max(t,e.uA):t,0),g=d.reduce((t,e)=>Math.max(t,e.lA),0);return d.forEach(t=>{t.lA=g}),o+=f*i,l(l({},t),{},{stacks:d})});return{parallels:h,thicknessTotal:Math.abs(o)}},u=this.getTitleFillStyle()!==sa&&this.getTitle().length>0,d=u?this.Yh.Er().vu():{x:0,y:0},f=Ls(tp(this.pA,null!==(i=this.bi.chartXYTitleMargin)&&void 0!==i?i:5),this.Ng),g=u?ep(this.pA,d,f):Zn,p=this.Os.reduce((t,e)=>{const i=e.Er(g,this.On);return{top:Math.max(t.top,i.top),bottom:Math.max(t.bottom,i.bottom),left:Math.max(t.left,i.left),right:Math.max(t.right,i.right)}},{top:0,bottom:0,left:0,right:0}),y=this.Bw.x.getCellSize()-(this.On.left+this.On.right+g.left+g.right)-p.left-p.right,m=this.Bw.y.getCellSize()-(this.On.top+this.On.bottom+g.bottom+g.top)-p.top-p.bottom,v=new Map,x=(t,e)=>{const i=!!e.find(t=>!0===t.updatedTicks),s={physicalAxisSize:t.axisLength,fA:t.axisLength,i_:t.axisLengthOffset,AA:t.axisThicknessOffset,anyPreviousAxisUpdated:i,bA:t.stackAxisCount};return t.stack.axis.Er(s)},b=c(this.kA,m,-1,x),S=c(this._A,m,1,x),A=c(this.wA,y,-1,x),E=c(this.MA,y,1,x),k=[this.On.left+g.left+b.thicknessTotal+p.left,this.On.right+g.right+S.thicknessTotal+p.right],w=[this.On.bottom+A.thicknessTotal+g.bottom+p.bottom,this.On.top+g.top+E.thicknessTotal+p.top],M=this.Bw.x.getCellSize()-(k[0]+k[1]),C=this.Bw.y.getCellSize()-(w[0]+w[1]);this.Bw.x.H(0,M),this.Bw.y.H(0,C),this.Bw.x.St(k),this.Bw.y.St(w),super.Og();const T=[...b.parallels,...A.parallels,...S.parallels,...E.parallels].map(t=>t.stacks).flat(),F=t=>{var e,i;const s=t.stack.axis,r=T.find(t=>t.axis===s);if(!r)throw new Error("LightningChart JS unexpected runtime error");const n=s.getVisible()?t.margins[0]+t.axisLengthOffset+(null!==(e=s.mA)&&void 0!==e?e:0):0,o=s.getVisible()?t.margins[1]+(t.availableSpace-t.axisLengthOffset)-t.axisLength-(null!==(i=s.mA)&&void 0!==i?i:0):0;s.oi.St([n,o]);const a=t.stack.axis.th(r);return v.set(t.stack.axis,a),r},P=y-(b.thicknessTotal+S.thicknessTotal),B=m-(A.thicknessTotal+E.thicknessTotal);c(this.kA,B,-1,F,{margins:w}),c(this._A,B,1,F,{margins:w}),c(this.wA,P,-1,F,{margins:k}),c(this.MA,P,1,F,{margins:k}),this.Zw={left:b.thicknessTotal,top:E.thicknessTotal,right:S.thicknessTotal,bottom:A.thicknessTotal};const L={chartWidth:this.Bw.x.getCellSize(),chartHeight:this.Bw.y.getCellSize(),viewportWidth:M,viewportHeight:C,margins:{left:k[0],right:k[1],bottom:w[0],top:w[1]},axes:v},D=this.Jw;if(e)this.L.D("layoutchange",l(l({},L),{},{userChangedLayout:()=>{}}));else if(!D||Math.abs(D.chartWidth-L.chartWidth)>=1||Math.abs(D.chartHeight-L.chartHeight)>=1||Math.abs(D.viewportWidth-L.viewportWidth)>=1||Math.abs(D.viewportHeight-L.viewportHeight)>=1||this.getAxes().find(t=>{var e,i,s,r,n,o,a,h,l,c,u,d;const f=D.axes.get(t),g=L.axes.get(t);if(Math.abs((null!==(e=null==f?void 0:f.width)&&void 0!==e?e:0)-(null!==(i=null==g?void 0:g.width)&&void 0!==i?i:0))>=1||Math.abs((null!==(s=null==f?void 0:f.height)&&void 0!==s?s:0)-(null!==(r=null==g?void 0:g.height)&&void 0!==r?r:0))>=1||Math.abs((null!==(n=null==f?void 0:f.left)&&void 0!==n?n:0)-(null!==(o=null==g?void 0:g.left)&&void 0!==o?o:0))>=1||Math.abs((null!==(a=null==f?void 0:f.right)&&void 0!==a?a:0)-(null!==(h=null==g?void 0:g.right)&&void 0!==h?h:0))>=1||Math.abs((null!==(l=null==f?void 0:f.bottom)&&void 0!==l?l:0)-(null!==(c=null==g?void 0:g.bottom)&&void 0!==c?c:0))>=1||Math.abs((null!==(u=null==f?void 0:f.top)&&void 0!==u?u:0)-(null!==(d=null==g?void 0:g.top)&&void 0!==d?d:0))>=1)return t})){let e=!1;const i=()=>{e=!0};if(this.L.D("layoutchange",l(l({},L),{},{userChangedLayout:i})),this.xg||e)return this.engine.layout(),this.$w({width:this.uiScale._t().x,height:this.uiScale._t().y,engineWidth:this.gi.oi._t().x,engineHeight:this.gi.oi._t().y}),this.xg=!0,void this.th(t,!0)}this.Jw=L,this.gy.ih(As(0,0)).X(As(M,C)),this.vy.ih(As(0,0)).X(As(M,C));const z=ip(this.pA,d,f,this.uiScale.ri(),this.On,k,w,p);this.Yh.ih(z.position).mn(z.margin).Vl(z.horizontalAlignment).$l(z.verticalAlignment),this.Os.forEach(t=>t.th(g,this.On));const I=Ts(this.Bw.x.bt(),this.Bw.y.bt(),this.Bw.x.Mt(),this.Bw.y.Mt());this.rS.ym(I),this.Vf.ym(I),this.Nf.ym(I),this.mg&&this.mg();for(const l of this.ny)l.nv()}Lw(t){const e=On(this.ny.map(t=>t.tl())),i=new Set(e.map(t=>t.Tw));if(1===i.size){const s=Array.from(i)[0],r="x"===s?[this.wA,this.MA]:[this.kA,this._A],n="y"===s?[this.wA,this.MA]:[this.kA,this._A];r.forEach(e=>e.forEach(e=>{const i=t.get(e.axis);i&&e.axis.fit(i.animate,i.stopAxisAfter)})),e.forEach(t=>t.Fw()),n.forEach(e=>e.forEach(e=>{const i=t.get(e.axis);i&&(e.axis.getScrollStrategy()&&void 0===e.axis.getDefaultInterval()?e.axis.setStopped(!1):e.axis.fit(i.animate,i.stopAxisAfter))}))}else t.forEach((t,e)=>e.fit(null==t?void 0:t.animate,null==t?void 0:t.stopAxisAfter))}Y(){for(let t=0;t<this.wA.length;t+=1)this.wA[t].axis.Y();for(let t=0;t<this.MA.length;t+=1)this.MA[t].axis.Y();for(let t=0;t<this.kA.length;t+=1)this.kA[t].axis.Y();for(let t=0;t<this._A.length;t+=1)this._A[t].axis.Y();return super.Y()}Yw(t){if(this.Dw.has(t))return this.Dw.get(t);throw new Error("No attach handler for axis Make sure that passed axes definitely belong to this chart and that they haven't been disposed of.")}addPointLineAreaSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zg(e,i);const s=new Vg(this,this.ly,this.rS,e,i,this.Yw(e),this.Yw(i),this.Tg,this.bi,this.gi.ys,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ny.length,t);return this.yy(s,t),s}addLineSeries(t){return this.addPointLineAreaSeries(t).setAreaFillStyle(sa).setPointFillStyle(sa)}addPointSeries(t){return this.addPointLineAreaSeries(t).setAreaFillStyle(sa).setStrokeStyle(Lr)}addPointLineSeries(t){return this.addPointLineAreaSeries(t).setAreaFillStyle(sa)}addStepSeries(t){return this.addPointLineAreaSeries(t).setAreaFillStyle(sa).setCurvePreprocessing({type:"step"})}addSplineSeries(t){return this.addPointLineAreaSeries(t).setAreaFillStyle(sa).setCurvePreprocessing({type:"spline"})}addAreaSeries(t){return this.addPointLineAreaSeries(t).setPointFillStyle(sa)}addRectangleSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zg(e,i);const s=new xg(this,this.ly,this.rS,e,i,this.Yw(e),this.Yw(i),this.Tg,this.bi,this.gi.ys,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ny.length);return this.yy(s,t),s}addPolygonSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY(),s=new mg(this,this.ly,this.rS,e,i,this.Yw(e),this.Yw(i),this.Tg,this.bi,this.gi.ys,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ny.length);return this.yy(s,t),s}addSegmentSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zg(e,i);const s=new Sg(this,this.ly,this.rS,e,i,this.Yw(e),this.Yw(i),this.Tg,this.bi,this.gi.ys,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ny.length);return this.yy(s,t),s}addEllipseSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zg(e,i);const s=new pg(this,this.ly,this.rS,e,i,this.Yw(e),this.Yw(i),this.Tg,this.bi,this.gi.ys,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ny.length);return this.yy(s,t),s}addBoxSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zg(e,i);const s=t&&t.dimensionStrategy?t.dimensionStrategy:Su,r=new fg(this,this.ly,this.rS,e,i,this.Yw(e),this.Yw(i),this.Tg,s,this.bi,this.gi.ys,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ny.length);return this.yy(r,t),r}addTextSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zg(e,i);const s=new kg(this,this.ly,this.rS,e,i,this.Yw(e),this.Yw(i),this.Tg,this.bi,this.gi.ys,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ny.length);return this.yy(s,t),s}addHeatmapGridSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();let s;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error("Unsupported Heatmap Grid heatmapDataType: '".concat(t.heatmapDataType,"'"));return s=new Mg(this,this.ly,this.rS,e,i,this.Yw(e),this.Yw(i),this.Tg,t,this.bi,this.gi.ys,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ny.length),this.yy(s,t),s}addHeatmapScrollingGridSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();let s;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error("Unsupported Heatmap Grid heatmapDataType: '".concat(t.heatmapDataType,"'"));return s=new Tg(this,this.ly,this.rS,e,i,this.Yw(e),this.Yw(i),this.Tg,t,this.bi,this.gi.ys,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ny.length),this.yy(s,t),s}addOHLCSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();Zg(e,i);const s=new(t&&t.type?t.type:Lg.Candlesticks)(this,this.ly,this.rS,e,i,this.Yw(e),this.Yw(i),this.Tg,this.bi,this.gi.ys);return this.yy(s,t),s}addOnScreenMenu(t,e){return new _g(this._g,t,this,e)}setZoomingRectangleFillStyle(t){return this.Ow="function"==typeof t?t(this.Ow):t,this.gi.Bs(),this}getZoomingRectangleFillStyle(){return this.Ow}setZoomingRectangleStrokeStyle(t){return this.zw="function"==typeof t?t(this.zw):t,this.gi.Bs(),this}getZoomingRectangleStrokeStyle(){return this.zw}pan(t){this.forEachAxisX(e=>{e.setStopped(!0).pan(t.x)}),this.forEachAxisY(e=>{e.setStopped(!0).pan(t.y)})}zoom(t,e){this.forEachAxis(Wg),this.forEachAxisX(i=>{i.zoom(i.oi.Dt(t.x),e.x)}),this.forEachAxisY(i=>{i.zoom(i.oi.Dt(t.y),e.y)})}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.forEachAxis(e=>e.setAnimationsEnabled(t)),this}gg(){const t=[];return this.forEachAxis(e=>e.hA(e=>t.push(e))),super.gg().concat(t)}nw(){return this.Ew}Ue(){return this.jg(this.rS)}setCursorEnabledDuringAxisAnimation(t){return this.Rw=t,this}getCursorEnabledDuringAxisAnimation(){return this.Rw}forEachAxis(t){return this.forEachAxisX(t),this.forEachAxisY(t),this}translateCoordinate(t,e,i){if(i){const s=t,r=e,n=Eu(r)?r:ma(r)?this.Jf:void 0;if(n&&pa(i)){const t=hr(s,n,this.gi.oi);return this.gi.Qa({engineX:t.x,engineY:t.y})}if(n&&ma(i))return hr(s,n,this.Jf);if(n&&Eu(i))return hr(s,n,i)}else{const i=t;if(ma(e)){const t=this.gi.Ja(i);return hr({x:t.engineX,y:t.engineY},this.gi.oi,this.Jf)}if(Eu(e)){const t=e,s=this.gi.Ja(i);return hr({x:s.engineX,y:s.engineY},this.gi.oi,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addEventListener(t,e,i){this.L.addEventListener(t,e,i),"layoutchange"===t&&this.Jw&&e(l(l({},this.Jw),{},{userChangedLayout:()=>{}}))}removeEventListener(t,e){this.L.removeEventListener(t,e)}setUserInteractions(t){return this.Em.setUserInteractions(t),this}getUserInteractions(){return this.Em.getUserInteractions()}}!function(t){t.CenterTop="center-top",t.RightTop="right-top",t.LeftTop="left-top",t.CenterBottom="center-bottom",t.RightBottom="right-bottom",t.LeftBottom="left-bottom",t.SeriesCenterTop="series-center-top",t.SeriesRightTop="series-right-top",t.SeriesLeftTop="series-left-top",t.SeriesCenterBottom="series-center-bottom",t.SeriesRightBottom="series-right-bottom",t.SeriesLeftBottom="series-left-bottom"}(Qg||(Qg={}));const $g=Qg.CenterTop,tp=(t,e)=>{switch(t){case"center-top":case"series-center-bottom":return{left:0,right:0,top:0,bottom:e};case"left-top":return{left:20,right:0,top:0,bottom:e};case"right-top":return{left:0,right:20,top:0,bottom:e};case"center-bottom":return{left:0,right:0,top:0,bottom:0};case"left-bottom":return{left:20,right:0,top:0,bottom:0};case"right-bottom":return{left:0,right:20,top:0,bottom:0};case"series-center-top":return{left:0,right:0,top:e,bottom:0};case"series-left-top":return{left:e,right:0,top:e,bottom:0};case"series-right-top":return{left:0,right:e,top:e,bottom:0};case"series-left-bottom":return{left:e,right:0,top:0,bottom:e};case"series-right-bottom":return{left:0,right:e,top:0,bottom:e}}return Gn(0,"Unexpected ChartXY title position selection ".concat(t))},ep=(t,e,i)=>{switch(t){case"center-top":case"left-top":case"right-top":return{top:e.y+i.top+i.bottom,right:0,bottom:0,left:0};case"center-bottom":case"left-bottom":case"right-bottom":return{bottom:e.y+i.top+i.bottom,right:0,left:0,top:0};default:return Zn}},ip=(t,e,i,s,r,n,o,a)=>{const h=(i.left-i.right)*s.x,l=(i.bottom-i.top)*s.y,c={top:0,left:a.left+r.left,right:a.right+r.right,bottom:0};switch(t){case"center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+h,y:100-(r.top+i.top)*s.y},margin:c};case"left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:h,y:100-(r.top-i.top)*s.y},margin:c};case"right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100+h,y:100-(r.top-i.top)*s.y},margin:c};case"center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50+h,y:(r.bottom+i.bottom)*s.y},margin:c};case"left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:h,y:(r.bottom+i.bottom)*s.y},margin:c};case"right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100+h,y:(r.bottom+i.bottom)*s.y},margin:c};case"series-center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+h,y:100-o[1]*s.y+l},margin:c};case"series-left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:n[0]*s.x+h,y:100-o[1]*s.y+l},margin:Zn};case"series-right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100-n[1]*s.x+h,y:100-o[1]*s.y+l},margin:Zn};case"series-center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50,y:o[0]*s.y+l},margin:c};case"series-left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:n[0]*s.x+h,y:o[0]*s.y+l},margin:Zn};case"series-right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100-n[1]*s.x+h,y:o[0]*s.y+l},margin:Zn}}return Gn(0,"Unexpected ChartXY title position selection ".concat(t))},sp=t=>{const e=[];t.forEach((t,i)=>{const s=e.find(e=>e.iParallel===t.iParallel);s?(s.stacks.push(l({},t)),s.stacks.sort((t,e)=>t.iStack-e.iStack)):e.push({iParallel:t.iParallel,stacks:[l({},t)]})});const i=e.map(t=>{const e=t.stacks.reduce((t,e)=>t+(e.axis.getVisible()&&"relative"in e.axis.cf?e.axis.cf.relative:0),0);return l(l({},t),{},{sumRelativeSize:e})});return i.sort((t,e)=>t.iParallel-e.iParallel),{parallels:i}},rp=(t,e,i)=>{var s;const r=Array.from(new Set(i.map(t=>t.series.ws()))),n=1===r.length&&void 0!==r[0]?r[0]:void 0,o="ProgressiveY"===n||"RegressiveY"===n?{progressiveDimension:e.axisY.getTitle()||void 0,progressiveAxis:e.axisY,valueDimension:e.axisX.getTitle()||void 0,hitValueAxis:t=>t.axisX,value:t=>t.x,position:t=>t.y}:{progressiveDimension:e.axisX.getTitle()||void 0,progressiveAxis:e.axisX,valueDimension:e.axisY.getTitle()||void 0,hitValueAxis:t=>t.axisY,value:t=>t.y,position:t=>t.x};return(t=>t&&"object"==typeof t&&"column"in t&&"row"in t)(e)?dm(e,[[{component:e.series,componentColor:fm(e),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[t.getDefaultAxisX().getTitle()||"X","",{text:Ea(e.axisX.formatValue(e.x),e.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:Ea(e.axisY.formatValue(e.y),e.axisY),font:{weight:"bold"}}],void 0!==e.intensity?["Value","",{text:Ea(e.lut?ea(e.lut,e.intensity):e.intensity.toFixed(2),null===(s=e.lut)||void 0===s?void 0:s.units),font:{weight:"bold"}}]:[]]):n?[[{text:Ea(o.progressiveAxis.formatValue(o.position(e)),o.progressiveAxis),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],...i.map(t=>t.multiHit?dm(t,[[{component:t.series,componentColor:fm(t)},""],[...o.valueDimension?["".concat(o.valueDimension,"1"),""]:[],{text:Ea(o.hitValueAxis(t).formatValue(o.value(t.multiHit[0])),o.hitValueAxis(t)),font:{weight:"bold"}}],[...o.valueDimension?["".concat(o.valueDimension,"2"),""]:[],{text:Ea(o.hitValueAxis(t).formatValue(o.value(t.multiHit[1])),o.hitValueAxis(t)),font:{weight:"bold"}}]]):dm(t,[[{component:t.series,componentColor:fm(t)},"",{text:Ea(o.hitValueAxis(t).formatValue(o.value(t)),o.hitValueAxis(t)),font:{weight:"bold"}}]])).flat()]:i.map(e=>dm(e,[[{component:e.series,componentColor:fm(e),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[...o.progressiveDimension?["".concat(o.progressiveDimension),""]:[],{text:Ea(o.progressiveAxis.formatValue(o.position(e)),o.progressiveAxis),font:{weight:"bold"}}],[...o.valueDimension?["".concat(o.valueDimension),""]:[],{text:Ea(o.hitValueAxis(e).formatValue(o.value(e)),o.hitValueAxis(e)),font:{weight:"bold"}}]])).flat()};class np{constructor(t,e,i,s,r,n,o){var a;this.coordsRelative="relative",this.coordsClient="client",this.s_=[],this.e_=new Map,this.ny=new Map,this.h_=!0,this.r_=new Set,this.n_=()=>{this.o_.gi.Bs()},this.a_=(t,e,i)=>{0!==this.ny.size&&void 0!==[...this.ny.values()].find(t=>{let{series:e}=t;return!0===e.getVisible()})||this.l_.ai(e,i,!1,!1,"zoomBandChartOther"),this.o_.gi.Bs()},this.c_=!0,this.L=new Ar,e.gi.ka(_l._o),this._g=t,this.eg=(null==n?void 0:n.orientation)||"x",this.u_=void 0!==(null==n?void 0:n.useSharedValueAxis)&&n.useSharedValueAxis,this.d_=s,this.Qn="x"===this.eg?Su:Au;const h=l(l({},n),{},{defaultAxisX:this.Qn.getWidth({x:null==n?void 0:n.defaultAxis,y:void 0}),defaultAxisY:this.Qn.getHeight({x:null==n?void 0:n.defaultAxis,y:void 0}),legend:null!==(a=null==n?void 0:n.legend)&&void 0!==a?a:{addEntriesAutomatically:!1}});this.o_=new Kg(t,e,i,Jr,r,h,o).setTitle("Zoom Band Chart").setUserInteractions(void 0).setCursorMode(void 0),this.engine=this.o_.engine;const c=this.o_.getDefaultAxisX().setPointerEvents(!1),u=this.o_.getDefaultAxisY().setPointerEvents(!1);this.l_=this.Qn.getWidth({x:c,y:u}).setScrollStrategy(nl()).setAnimationScroll(!1).setStrokeStyle(Lr).setTickStrategy(al),(null==n?void 0:n.useSharedValueAxis)?this.f_=this.Qn.getHeight({x:c,y:u}):this.Qn.getHeight({x:c,y:u}).dispose();const d=this.getTheme().zoomBandChartDefocusOverlayFillStyle||new aa({color:this.getTheme().isDark?Rs(0,0,0,180):Rs(255,255,255,180)});this.A_=[this.o_.zf.qe(this.l_.Xf).Ke(d).Qe(Lr),this.o_.zf.qe(this.l_.Xf).Ke(d).Qe(Lr)];const f=this.o_.zf.gA(this.l_.Xf).dh(this.getTheme().zoomBandChartSplitterStrokeStyle||this.getTheme().chartXYSeriesBackgroundStrokeStyle);this.g_={collection:f,members:new Array(5).fill(0).map(t=>f.Go())};const g=this.getTheme(),p="function"==typeof g.zoomBandChartKnobFillStyle?Xr({resourcesBaseUrl:this._g.me,styleFactory:g.zoomBandChartKnobFillStyle,apply:t=>this.setKnobFillStyle(t)}):g.zoomBandChartKnobFillStyle||sa;this.v_=[this.o_.zf.qe(this.o_.Jf).Ke(p).Qe(Lr),this.o_.zf.qe(this.o_.Jf).Ke(p).Qe(Lr)],this.y_=this.getTheme().zoomBandChartKnobSize||{x:0,y:0},this.p_()}get chart(){return this.o_}setUserInteractions(t){return this.oh=void 0===t?{pan:{drag:!1,click:!1},zoom:{wheel:void 0,dragKnob:!1}}:t,this}getUserInteractions(){return Gr({pan:{drag:!0,click:!0},zoom:{wheel:{},dragKnob:!0}},this.oh)}add(t){this.r_.has(t.fs)||(this.r_.add(t.fs),t.fs.addEventListener("layoutchange",this.n_));const e=this.s_.map(t=>t.axis),i="x"===this.eg?t.axisX:t.axisY;if(!e.includes(i)){const t=t=>{this.a_(i,t.start,t.end)};i.addEventListener("intervalchange",t),this.s_.push({axis:i,deattach:()=>{i.removeEventListener("intervalchange",t)}}),this.l_.Fr(i.Tr(),i.getTickStrategy()),this.m_&&this.m_.remove(),this.m_=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(0===e.length)return{remove:Jr};let s=!1;const r=e.map(t=>{const i=i=>{((t,i,r)=>{s||(s=!0,e.filter(e=>e!==t).forEach(e=>e.ai(i,r,!1,t.getStopped(),"synchronizedAxis")),s=!1)})(t,i.start,i.end)};return t.addEventListener("intervalchange",i),i});let n=!1;const o=e.map(t=>{const i=i=>{((t,i)=>{n||(n=!0,e.filter(e=>e!==t).forEach(t=>t.setStopped(i)),n=!1)})(t,i.isStopped)};return t.addEventListener("stoppedchange",i),i});return{remove:()=>{e.forEach((t,e)=>{t.removeEventListener("intervalchange",r[e]),t.removeEventListener("stoppedchange",o[e])})}}}(...this.s_.map(t=>t.axis))}const s=this.Qn.getHeight({x:t.axisX,y:t.axisY});let r;if(this.u_)r=this.f_;else{const t=this.e_.get(s);t?r=t:(r=this.Qn.getHeight({x:this.o_.addAxisX.bind(this.o_),y:this.o_.addAxisY.bind(this.o_)})({type:s.ar.type}),this.S_(r)),this.e_.set(s,r)}const n=this.Qn.getWidth({x:this.l_,y:r}),o=this.Qn.getHeight({x:this.l_,y:r});let a;const h=[];if(t instanceof Vg)a=this.o_.addPointLineAreaSeries(l(l({},t.Fa),{},{axisX:n,axisY:o,xAxis:n,yAxis:o})).setStrokeStyle(t.getStrokeStyle()).setAreaFillStyle(t.getAreaFillStyle()).setPointFillStyle(t.getPointFillStyle()).setPointAlignment(t.getPointAlignment()).setPointRotation(t.getPointRotation()).setPointShape(t.getPointShape()).setPointSize(t.getPointSize()).setCurvePreprocessing(t.getCurvePreprocessing()),a.setDataSet(t.Cw(),t.getDataMapping());else if(t instanceof Bg){const e=this.o_.addPointLineAreaSeries({axisX:n,axisY:o,xAxis:n,yAxis:o});((t,e)=>{const i=t=>{if(0!==t.length)if("x"in t[0]){const i=t;e.appendJSON(i)}else{const i=t,s=[];for(let t=0;t<i.length;t+=1){const e=i[t];s.push({x:e[0],y:e[4]})}e.appendJSON(s)}},s=t.Jx();i(s);const r=t=>{i(t.data)},n=()=>{e.clear()};t.addEventListener("dataadd",r),t.addEventListener("dataclear",n),h.push(()=>{t.removeEventListener("dataadd",r),t.removeEventListener("dataclear",n)})})(t,e),a=e}else if(t instanceof Pg){const e=this.o_.addAreaRangeSeries({axisX:n,axisY:o,xAxis:n,yAxis:o}).setLowFillStyle(t.getLowFillStyle()).setHighFillStyle(t.getHighFillStyle()).setLowStrokeStyle(t.getLowStrokeStyle()).setHighStrokeStyle(t.getHighStrokeStyle()).add(t.Jx()),i=t=>e.add(t.data);t.addEventListener("dataadd",i),h.push(()=>t.removeEventListener("dataadd",i)),a=e;const s=t=>e.clear();t.addEventListener("dataclear",s),h.push(()=>{t.removeEventListener("dataclear",s)})}else{if(!(t instanceof wg))throw new Error("LightningChart JS Zoom Band Chart unsupported series type");{const e=this.o_.addHeatmapGridSeries(l(l({},t.Wb),{},{axisX:n,axisY:o,xAxis:n,yAxis:o})),i=()=>{e.setWireframeStyle(t.getWireframeStyle()).setIntensityInterpolation(t.getIntensityInterpolation()).setFillStyle(t.getFillStyle())};i(),a=e,t.Qb(a);const s=t=>e.invalidateIntensityValues(t.value);t.addEventListener("stylechange",i),h.push(()=>{t.removeEventListener("invalidateintensity",s),t.removeEventListener("stylechange",i)});const r=()=>{e.clear()};t.addEventListener("dataclear",r),h.push(()=>{t.removeEventListener("dataclear",r)})}}a.setPointerEvents(!1);const c=t=>{a.setVisible(t.isVisible)};t.addEventListener("visiblechange",c),h.push(()=>{t.removeEventListener("visiblechange",c)});const u=t=>{a.setHighlight(t.highlight)};h.push(()=>{t.addEventListener("highlightchange",u),t.removeEventListener("highlightchange",u)});const d=()=>{this.disposeSeries(t)};return t.addEventListener("dispose",d),h.push(()=>{t.removeEventListener("dispose",d)}),this.ny.set(t,{series:a,clearReferences:()=>h.forEach(t=>t())}),a}disposeSeries(t){const e=this.ny.get(t);if(e){const{clearReferences:i}=e;i(),this.ny.delete(t),e.series.dispose();const s=this.Qn.getHeight({x:t.axisX,y:t.axisY}),r=this.e_.get(s);r&&0===r.aA().length&&(this.e_.delete(s),r.dispose())}const i="x"===this.eg?t.axisX:t.axisY;if(!Array.from(this.ny.keys()).find(t=>i===("x"===this.eg?t.axisX:t.axisY))){const t=this.s_.findIndex(t=>t.axis===i);t>=0&&(this.s_[t].deattach(),this.s_.splice(t,1))}const s=Array.from(this.ny.keys()).find(t=>t.fs==t.fs);return s||(t.fs.removeEventListener("layoutchange",this.n_),this.r_.delete(t.fs)),this}setDefocusOverlayFillStyle(t){return this.A_.forEach(e=>e.Ke(t)),this.o_.gi.Bs(),this}getDefocusOverlayFillStyle(){return this.A_[0].pr()}setSplitterStrokeStyle(t){return this.g_.collection.dh(t),this.o_.gi.Bs(),this}getSplitterStrokeStyle(){return this.g_.collection.ao()}setKnobFillStyle(t){return this.v_.forEach(e=>e.Ke(t)),this.o_.gi.Bs(),this}getKnobFillStyle(){return this.v_[0].pr()}setKnobStrokeStyle(t){return this.v_.forEach(e=>e.Qe(t)),this.o_.gi.Bs(),this}getKnobStrokeStyle(){return this.v_[0].ja()}setKnobSize(t){return this.y_=t,this.o_.gi.Bs(),this}getKnobSize(){return this.y_}getDefaultAxisX(){return this.o_.getDefaultAxisX()}getDefaultAxisY(){return this.o_.getDefaultAxisY()}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}S_(t){t.setTickStrategy(al).setPointerEvents(!1).setStrokeStyle(Lr)}setStopAxisOnInteraction(t){return this.h_=t,this}getStopAxisOnInteraction(){return this.h_}p_(){let t;const e=(t,e,i,s)=>{var r,n;const o="x"===this.eg?null===(r=Array.from(this.ny.keys())[0])||void 0===r?void 0:r.axisX:null===(n=Array.from(this.ny.keys())[0])||void 0===n?void 0:n.axisY;if(!o)return;const a=o.getInterval(),h=this.l_.getInterval(),l=Math.abs(this.l_.oi.Bt(t)-this.l_.oi.Bt(e));i.preventTooSmall&&l<10||Math.sign(e-t)!==Math.sign(a.end-a.start)||Math.min(t,e)<Math.min(h.start,h.end)||Math.max(t,e)>Math.max(h.start,h.end)&&Math.max(a.start,a.end)<Math.max(t,e)||o.ai(t,e,i.animated,this.h_,s)};this.v_.forEach((i,s)=>{i.addEventListener("pointerenter",()=>{var e;(null===(e=this.getUserInteractions().zoom)||void 0===e?void 0:e.dragKnob)&&(t=this.engine.setMouseStyle(this.Qn.getWidth({x:Xh.Horizontal,y:Xh.Vertical}),t))}),i.addEventListener("pointerleave",()=>{t=this.engine.restoreMouseStyle(t)}),i.addEventListener("pointerdown",t=>{var i,r,n;if(!(null===(i=this.getUserInteractions().zoom)||void 0===i?void 0:i.dragKnob))return;const o="x"===this.eg?null===(r=Array.from(this.ny.keys())[0])||void 0===r?void 0:r.axisX:null===(n=Array.from(this.ny.keys())[0])||void 0===n?void 0:n.axisY;if(!o)return;mn(t);const a=i=>{if(i.pointerId!==t.pointerId)return;mn(i);const r=this.Qn.getWidth(this.o_.translateCoordinate(i,this.o_.coordsAxis)),n=o.getInterval(),a=0===s?r:n.start,h=1===s?r:n.end;e(a,h,{animated:!1,preventTooSmall:!0},"zoomBandChartOther")},h=e=>{e.pointerId===t.pointerId&&(mn(e),to("click"),Ur.removeEventListener("pointermove",a),Ur.removeEventListener("pointerup",h))};Ur.addEventListener("pointermove",a),Ur.addEventListener("pointerup",h)})}),this.o_.seriesBackground.addEventListener("pointerenter",()=>{var e;(null===(e=this.getUserInteractions().pan)||void 0===e?void 0:e.drag)&&(t=this.engine.setMouseStyle(Xh.Move,t))}),this.o_.seriesBackground.addEventListener("pointerleave",()=>{t=this.engine.restoreMouseStyle(t)});const i=(t,i)=>{var s,r,n;if(!(null===(s=this.getUserInteractions().pan)||void 0===s?void 0:s.drag))return;const o="x"===this.eg?null===(r=Array.from(this.ny.keys())[0])||void 0===r?void 0:r.axisX:null===(n=Array.from(this.ny.keys())[0])||void 0===n?void 0:n.axisY;if(!o)return;const a=o.getInterval(),h=this.l_.oi.Jt(a.start,this.Qn.getWidth(t)),l=this.l_.oi.Jt(a.end,this.Qn.getWidth(t));e(h,l,{animated:!1,preventTooSmall:!0},"zoomBandChartOther"),mn(i)};this.o_.seriesBackground.addEventListener("pointerdown",t=>{var e,s;if(!("x"===this.eg?null===(e=Array.from(this.ny.keys())[0])||void 0===e?void 0:e.axisX:null===(s=Array.from(this.ny.keys())[0])||void 0===s?void 0:s.axisY))return;mn(t);let r=t;const n=e=>{if(e.pointerId!==t.pointerId)return;const s={x:e.clientX-r.clientX,y:r.clientY-e.clientY};r=e,i(s,e)},o=e=>{e.pointerId===t.pointerId&&(mn(e),eo(),to("click"),Ur.removeEventListener("pointermove",n),Ur.removeEventListener("pointerup",o))};Ur.addEventListener("pointermove",n),Ur.addEventListener("pointerup",o)}),this.o_.seriesBackground.addEventListener("wheel",t=>{var i,s,r,n;const o=this.getUserInteractions();if(!(null===(i=o.zoom)||void 0===i?void 0:i.wheel))return;const a="x"===this.eg?null===(s=Array.from(this.ny.keys())[0])||void 0===s?void 0:s.axisX:null===(r=Array.from(this.ny.keys())[0])||void 0===r?void 0:r.axisY;if(!a)return;const h=a.getInterval(),l=this.l_.getInterval(),c=this.Qn.getWidth(this.o_.translateCoordinate(t,this.o_.coordsAxis)),u=this.l_.oi.Bt(h.start),d=this.l_.oi.Bt(h.end),f=this.l_.oi.Bt(c),g=Qr((f-u)/(d-u),0,1),p=.2*Math.abs(d-u)*(null!==(n=o.zoom.wheel.sensitivity)&&void 0!==n?n:1),y=g*p*-Math.sign(t.deltaY),m=(1-g)*p*Math.sign(t.deltaY),v=Qr(this.l_.oi.Jt(h.start,y),l.start,l.end),x=Qr(this.l_.oi.Jt(h.end,m),l.start,l.end);e(v,x,{animated:!1,preventTooSmall:!0},"zoomBandChartOther"),mn(t)}),this.A_.forEach((i,s)=>{i.addEventListener("pointerenter",()=>{var e;(null===(e=this.getUserInteractions().pan)||void 0===e?void 0:e.click)&&(t=this.engine.setMouseStyle(Xh.Point,t))}),i.addEventListener("pointerleave",()=>{t=this.engine.restoreMouseStyle(t)}),i.addEventListener("click",t=>{var i,s,r;if(t.defaultPrevented)return;if(!(null===(i=this.getUserInteractions().pan)||void 0===i?void 0:i.click))return;const n="x"===this.eg?null===(s=Array.from(this.ny.keys())[0])||void 0===s?void 0:s.axisX:null===(r=Array.from(this.ny.keys())[0])||void 0===r?void 0:r.axisY;if(!n)return;const o=this.Qn.getWidth(this.o_.translateCoordinate(t,this.o_.coordsAxis)),a=n.getInterval(),h=this.l_.getInterval(),l=Qr(o-(a.end-a.start)/2,Math.min(h.start,h.end),Math.max(h.start,h.end)-Math.abs(a.end-a.start)),c=l+(a.end-a.start);e(l,c,{animated:!0,preventTooSmall:!1},"zoomBandChartClick"),mn(t)})})}getSizePixels(){return this.o_.getSizePixels()}mn(t){this.o_.mn(t)}getMinimumSize(){return this.o_.getMinimumSize()}Y(){return this.o_.Y()}j(){return this.o_.j()}th(t){var e,i,s,r;const n=Nn(Array.from(this.ny.keys()).map(t=>t.fs)),o="x"===this.eg?null===(e=Array.from(this.ny.keys())[0])||void 0===e?void 0:e.axisX:null===(i=Array.from(this.ny.keys())[0])||void 0===i?void 0:i.axisY,a=(()=>{var t;const e=null===(t=this.s_.find(t=>t.axis.getVisible()))||void 0===t?void 0:t.axis;return!!e&&Math.sign(e.getInterval().end-e.getInterval().start)})(),h=Math.sign(this.l_.getInterval().end-this.l_.getInterval().start);if(h!==a&&0!==h&&0!==a&&this.l_.ai(this.l_.getInterval().end,this.l_.getInterval().start,!1,this.l_.getStopped(),"zoomBandChartOther"),this.ny.forEach((t,e)=>{const i=t.series;e instanceof Vg&&i instanceof Vg&&i.setDataSet(e.getDataSet(),e.getDataMapping())}),this.c_)if("x"===this.eg){const t=n.reduce((t,e)=>{const i=[];e.forEachAxisY(t=>{if(!t.getVisible()||0!==t.Yf)return;let e=i.find(e=>e.iParallel===t.getParallelIndex());e||(e={iParallel:t.getParallelIndex(),maxHeight:0},i.push(e)),e.maxHeight=Math.max(e.maxHeight,t.CA())});const s=i.reduce((t,e)=>t+e.maxHeight,0);return Math.max(t,s)},0),e=n.reduce((t,e)=>{const i=[];e.forEachAxisY(t=>{if(!t.getVisible()||100!==t.Yf)return;let e=i.find(e=>e.iParallel===t.getParallelIndex());e||(e={iParallel:t.getParallelIndex(),maxHeight:0},i.push(e)),e.maxHeight=Math.max(e.maxHeight,t.CA())});const s=i.reduce((t,e)=>t+e.maxHeight,0);return Math.max(t,s)},0),i=n.reduce((t,e)=>Math.max(t,e.getPadding().left),0),r=n.reduce((t,e)=>Math.max(t,e.getPadding().right),0);this.o_.forEachAxisY(t=>t.setThickness(0)),null===(s=this.getDefaultAxisY())||void 0===s||s.setThickness(t),this.o_.setPadding({left:i+(0===n.length?10:0),right:r+e+(0===n.length?10:0)})}else{const t=n.reduce((t,e)=>{const i=[];e.forEachAxisX(t=>{if(!t.getVisible()||0!==t.Yf)return;let e=i.find(e=>e.iParallel===t.getParallelIndex());e||(e={iParallel:t.getParallelIndex(),maxHeight:0},i.push(e)),e.maxHeight=Math.max(e.maxHeight,t.CA())});const s=i.reduce((t,e)=>t+e.maxHeight,0);return Math.max(t,s)},0),e=n.reduce((t,e)=>{const i=[];e.forEachAxisX(t=>{if(!t.getVisible()||100!==t.Yf)return;let e=i.find(e=>e.iParallel===t.getParallelIndex());e||(e={iParallel:t.getParallelIndex(),maxHeight:0},i.push(e)),e.maxHeight=Math.max(e.maxHeight,t.CA())});const s=i.reduce((t,e)=>t+e.maxHeight,0);return Math.max(t,s)},0),i=n.reduce((t,e)=>Math.max(t,e.getPadding().bottom),0),s=n.reduce((t,e)=>Math.max(t,e.getPadding().top),0);this.o_.forEachAxisX(t=>t.setThickness(0)),null===(r=this.getDefaultAxisX())||void 0===r||r.setThickness(t),this.o_.setPadding({bottom:i+(0===n.length?10:0),top:s+e+(0===n.length?10:0)})}this.o_.th(t);const l=this.l_.getInterval().start,c=this.l_.getInterval().end,u=Qr(o?o.getInterval().start:l,l,c),d=Qr(o?o.getInterval().end:c,l,c),f=this.Qn.getHeight(this.o_.Bw.getInnerIntervalPixels());this.A_[0].ih(this.Qn.toPoint(l,0)).X(this.Qn.toPoint(u-l,f)),this.A_[1].ih(this.Qn.toPoint(d,0)).X(this.Qn.toPoint(c-d,f)),this.g_.members[0].yA(this.Qn.toPoint(l,f),this.Qn.toPoint(u,f)),this.g_.members[1].yA(this.Qn.toPoint(u,f),this.Qn.toPoint(u,0)),this.g_.members[2].yA(this.Qn.toPoint(u,0),this.Qn.toPoint(d,0)),this.g_.members[3].yA(this.Qn.toPoint(d,0),this.Qn.toPoint(d,f)),this.g_.members[4].yA(this.Qn.toPoint(d,f),this.Qn.toPoint(c,f));const g=hr(this.Qn.toPoint(u,f/2),this.l_.Xf,this.o_.Jf),p=hr(this.Qn.toPoint(d,f/2),this.l_.Xf,this.o_.Jf),y=this.y_;this.v_[0].ih({x:g.x-y.x/2,y:g.y-y.y/2}).X({x:y.x,y:y.y}).wr(this.Qn.getWidth({x:0,y:90})),this.v_[1].ih({x:p.x-y.x/2,y:p.y-y.y/2}).X({x:y.x,y:y.y}).wr(this.Qn.getWidth({x:0,y:90}))}setSeriesBackgroundFillStyle(t){return this.o_.setSeriesBackgroundFillStyle(t),this.o_.gi.Bs(),this}getSeriesBackgroundFillStyle(){return this.o_.getSeriesBackgroundFillStyle()}setSeriesBackgroundStrokeStyle(t){return this.o_.setSeriesBackgroundStrokeStyle(t),this.o_.gi.Bs(),this}getSeriesBackgroundStrokeStyle(){return this.o_.getSeriesBackgroundStrokeStyle()}setSeriesBackgroundEffect(t){return this.o_.setSeriesBackgroundEffect(t),this.o_.gi.Bs(),this}getSeriesBackgroundEffect(){return this.o_.getSeriesBackgroundEffect()}getTheme(){return this.o_.getTheme()}setTitle(t){return this.o_.setTitle(t),this}getTitle(){return this.o_.getTitle()}setTitleFillStyle(t){return this.o_.setTitleFillStyle(t),this}getTitleFillStyle(){return this.o_.getTitleFillStyle()}setTitleFont(t){return this.o_.setTitleFont(t),this}getTitleFont(){return this.o_.getTitleFont()}setTitleMargin(t){return this.o_.setTitleMargin(t),this}getTitleMargin(){return this.o_.getTitleMargin()}setPadding(t){return void 0===t?this.c_=!0:(this.c_=!1,this.o_.setPadding(t),this.o_.forEachAxis(t=>t.setThickness(void 0))),this.o_.gi.Bs(),this}getPadding(){return this.o_.getPadding()}setBackgroundFillStyle(t){return this.o_.setBackgroundFillStyle(t),this}getBackgroundFillStyle(){return this.o_.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.o_.setBackgroundStrokeStyle(t),this}getBackgroundStrokeStyle(){return this.o_.getBackgroundStrokeStyle()}translateCoordinate(t,e,i){return cd(t,e,i,this.o_.Jf,this.o_.gi)}addUIElement(t,e){return this.o_.addUIElement(t,e)}saveToFile(t,e,i){return this.o_.saveToFile(t,e,i),this}dispose(){return this.o_.dispose(),this.e_.clear(),this.ny.clear(),this.d_(this),this}isDisposed(){return this.o_.isDisposed()}getLayout(){return this.o_.getLayout()}addEventListener(t,e,i){this.o_.addEventListener(t,e,i)}removeEventListener(t,e){this.o_.removeEventListener(t,e)}}class op extends $f{constructor(t,e,i,s,r,n,o){super(t,e,i,s,r,o),this.Es="Point Line Series",this.HS=[],this.WS=!1,this.XS=!1,this.b_=3,this.Sl=0,this.x_=La.Circle,this.L=new Ar,this.Xe=In(this.bi.polarPointLineSeriesFillStyle,n),this.iu=In(this.bi.polarPointLineSeriesStrokeStyle,n),this.QS=t.Dv(s,void 0,[Pd.UserSeries]).dh(this.iu).Fi(this.getHighlight()),this._s(this.QS),this.M_=t.Ld(s).Pd(sa).dh(Lr).Id(this.Xe).Bd(this.x_).Nd(this.b_).Fi(this.getHighlight()),this._s(this.M_)}solveNearest(t,e){const i=this.fs.gi.Ja(t),s={x:i.engineX,y:i.engineY},r=this.QS.KS(s);if(!r)return;const n=sg(r,this.scale);return l({cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this},n)}Ji(t,e,i){return Qn({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},()=>this.solveNearest(e,this.fs.getCursorMode()))}setData(t){return 0!==this.HS.length&&this.fs.gi.ka(_l.Lo),this.HS=ig(t),this.WS=!0,this.zS=eg(this.HS),this.Ws.Bs(),this}setStrokeStyle(t){this.iu="function"==typeof t?t(this.iu):t;const e=this.iu;return this.QS.dh(e),this.Ws.Bs(),this}getStrokeStyle(){return this.iu}setPointFillStyle(t){this.Xe="function"==typeof t?t(this.Xe):t;const e=this.Xe;return this.M_.Id(e),this.Ws.Bs(),this}getPointFillStyle(){return this.Xe}setPointSize(t){return this.b_=t,this.M_.Nd(t),this.Ws.Bs(),this}getPointSize(){return this.b_}setPointShape(t){return this.x_=t,this.M_.Bd(this.x_),this}getPointShape(){return this.x_}setPointRotation(t){return this.Sl=t,this.M_.Rd(t),this.Ws.Bs(),this}getPointRotation(){return this.Sl}sh(){return{fill:this.Xe,stroke:this.iu}}setConnectDataAutomaticallyEnabled(t){return this.XS=t,this.Ws.Bs(),this}getConnectDataAutomaticallyEnabled(){return this.XS}Av(){return this.Qg&&this.HS.length>0&&this.getVisible()}eh(t,e){t.Fi(e),this.Ws.Bs()}th(){if(this.WS||this.scale.ge()){const t=tg(this.HS,this.scale),e=So(t);this.XS?(t.push(l({},t[0])),this.QS.Fc(!0)):this.QS.Fc(!1),this.QS.zi().Sc(t).Ci(e),this.M_.Fd((new Mc).appendJSON(t),{x:"x",y:"y"}).Ci(e),this.WS=!1,this.QS.Er(),this.M_.Er()}}js(){return this.Rs||this.x_}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class ap extends $f{constructor(t,e,i,s,r,n,o){super(t,e,i,s,r,o),this.Es="Point Series",this.HS=[],this.WS=!1,this.b_=3,this.Sl=0,this.L=new Ar,this.Xe=In(this.bi.polarPointSeriesFillStyle,n),this.Ze=In(this.bi.polarPointSeriesStrokeStyle,n),this.Td=new Mc({schema:{x:{pattern:null},y:{pattern:null}}}),this.bu=t.Ld(s).dh(Lr).Pd(sa).Id(this.Xe).zd(this.Ze).Bd(La.Circle).Nd(this.b_).Fi(this.getHighlight()).Fd(this.Td,{x:"x",y:"y"}),this._s(this.bu)}solveNearest(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"show-nearest";const i=this.fs.translateCoordinate(t,this.fs.coordsAxis),s=tg([i],this.scale)[0],r=this.Td.dd({x:"x",y:"y"},s,um(e),this.scale,this.fs.Jf);if(!r)return;const n=sg(r,this.scale);return l({cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this},n)}Ji(t,e,i){return Qn({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},()=>this.solveNearest(e,this.fs.getCursorMode()))}setData(t){return 0!==this.HS.length&&this.fs.gi.ka(_l.Lo),this.HS=ig(t),this.WS=!0,this.zS=eg(this.HS),this.Ws.Bs(),this}setPointAlignment(t){return this.bu.OA(t),this.fs.gi.Bs(),this}getPointAlignment(){return this.bu.ww()}setPointFillStyle(t){this.Xe="function"==typeof t?t(this.Xe):t;const e=this.Xe;return this.bu.Id(e),this.Ws.Bs(),this}getPointFillStyle(){return this.Xe}setPointStrokeStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.bu.zd(this.Ze),this.Ws.Bs(),this}getPointStrokeStyle(){return this.Ze}setPointSize(t){return this.b_=t,this.bu.Nd(t),this.Ws.Bs(),this}getPointSize(){return this.b_}setPointShape(t){return this.bu.Bd(t),this.fs.gi.Bs(),this}getPointShape(){return this.bu.Dd()}setPointRotation(t){return this.Sl=t,this.bu.Rd(t),this.Ws.Bs(),this}getPointRotation(){return this.Sl}Av(){return this.Qg&&this.HS.length>0&&this.getVisible()}eh(t,e){t.Fi(e),this.Ws.Bs()}th(){if(this.WS||this.scale.ge()){const t=tg(this.HS,this.scale),e=So(t);this.Td.clear().appendJSON(t),this.bu.Ci(e),this.WS=!1,this.bu.Er()}}sh(){return{fill:this.Xe}}js(){return this.Rs||this.getPointShape()}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class hp extends $f{constructor(t,e,i,s,r,n,o){super(t,e,i,s,r,n),this.Es="Heatmap Series",this.w_=!0,this.lv=!1,this.L=new Ar;const a=this.fs.getSeries().length;this.Xe=In(this.bi.polarHeatmapSeriesFillStyle||this.bi.heatmapGridSeriesFillStyle,a);const h=o.amplitudeStart||0,l=o.amplitudeEnd?(o.amplitudeEnd-h)/(o.annuli-1):o.amplitudeStep||1,c={sectors:o.sectors,annuli:o.annuli,amplitudeStart:h,amplitudeStep:l,heatmapDataType:"intensity",dataOrder:o.dataOrder||"annuli"};this.Fa=c,this.__=t.k_(s,[],c).Ke(this.Xe).Fi(this.getHighlight()),this._s(this.__);const u=Math.min(c.amplitudeStart,c.amplitudeStart+(c.annuli-1)*c.amplitudeStep),d=Math.max(c.amplitudeStart,c.amplitudeStart+(c.annuli-1)*c.amplitudeStep);this.zS={min:u,max:d},this.setHighlightOnHover(!1)}solveNearest(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"show-nearest";const i=this.fs.gi.Ja(t),s={x:i.engineX,y:i.engineY},r=hr(s,this.fs.gi.oi,this.scale),n=sg(r,this.scale),o=um(e)?this.__.Jb(n):this.__.dd(n);if(!o)return;const a=tg([o],this.scale)[0];return{cursorPosition:{pointMarker:a,pointMarkerScale:this.scale,resultTable:a,resultTableScale:this.scale},series:this,angle:o.angle,amplitude:o.amplitude,intensity:o.cellValue,annulus:o.iAnnulus,sector:o.iSector,lut:fa(this.Xe)?this.Xe.lut:void 0}}Ji(t,e,i){return Qn({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0,intensity:0,sector:0,annulus:0,lut:fa(this.Xe)?this.Xe.lut:void 0},()=>this.solveNearest(e,this.fs.getCursorMode()))}invalidateIntensityValues(t){if(this.lv&&this.fs.gi.ka(_l.Lo),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const e={x:t.length,y:t[0].length,sectors:"annuli"===this.Fa.dataOrder?t[0].length:t.length,annuli:"annuli"===this.Fa.dataOrder?t.length:t[0].length},i="annuli"===this.Fa.dataOrder?this.Fa.annuli:this.Fa.sectors,s="annuli"===this.Fa.dataOrder?this.Fa.sectors:this.Fa.annuli;if(e.x>i||e.y>s){if(!0===this.fs._g.Ia){const t="PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nHeatmap ".concat(i,"x").concat(s,", input ").concat(e.x,"x").concat(e.y,".\nExcess data will be automatically clipped. This can result in sub-optimal performance.");Ur.console.warn(t)}const r=[];for(let e=0;e<i;e+=1)r[e]=t[e].slice(0,s);if(0===(t=r).length||0===t[0].length)return this}this.__.hp({type:"intensity",lengthPrimary:e.x,lengthSecondary:e.y,startPrimary:0,startSecondary:0,values:t})}else if("iSector"in t&&"iAnnulus"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const e={primary:t.values.length,secondary:t.values[0].length,sectors:"annuli"===this.Fa.dataOrder?t.values[0].length:t.values.length,annuli:"annuli"===this.Fa.dataOrder?t.values.length:t.values[0].length},i="annuli"===this.Fa.dataOrder?t.iAnnulus:t.iSector,s=i+e.primary-1,r="annuli"===this.Fa.dataOrder?t.iSector:t.iAnnulus,n=r+e.secondary-1,o="annuli"===this.Fa.dataOrder?this.Fa.annuli-1:this.Fa.sectors-1,a="annuli"===this.Fa.dataOrder?this.Fa.sectors-1:this.Fa.annuli-1;if(i<0||r<0){if(!0===this.fs._g.Ia){const e="PolarHeatmapSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niSector: ".concat(t.iSector,", iAnnuli: ").concat(t.iAnnulus,".\nNo intensity values will be invalidated.");Ur.console.warn(e)}return this}if(s>o||n>a){if(!0===this.fs._g.Ia){const t="PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nMax indexes ".concat(o,"x").concat(a,", input ").concat(e.primary,"x").concat(e.secondary," starting at [").concat(i,",").concat(r,"].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.");Ur.console.warn(t)}const h=Math.max(s-o,0),l=e.primary-h,c=Math.max(n-a,0),u=[];for(let e=0;e<l;e+=1)u[e]=t.values[e].slice(0,c>0?-c:void 0);if(0===(t={iSector:t.iSector,iAnnulus:t.iAnnulus,values:u}).values.length||0===t.values[0].length)return this}this.__.hp({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:i,startSecondary:r,values:t.values})}return this.Ws.Bs(),this.lv=!0,this}setFillStyle(t){return this.Xe="function"==typeof t?t(this.Xe):t,this.__.Ke(this.Xe),this.Ws.Bs(),this}getFillStyle(){return this.Xe}clear(){return this.__.zi(),this.Ws.Bs(),this}setIntensityInterpolation(t){return t=t||"disabled",this.__.sp(t),this.Ws.Bs(),this}getIntensityInterpolation(){return this.__.ep()}Ys(){return Ln(this.Xe,this.__.wi())}Av(){return this.Qg&&this.getVisible()}eh(t,e){t.Fi(e),this.Ws.Bs()}th(){}sh(){return{fill:this.Xe}}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class lp extends Wf{constructor(t,e,i,s,r,n,o,a){var h;super(t,up,e,i,s,r,n,o,a),this.C_=90,this.T_=12,this.F_=cp,this.Lv=this.bS.md(this.MS).setPointerEvents(!1),this.IS=t=>{if(0===this.getTitle().length||ra(this.getTitleFillStyle()))return;let e=180*(t.S-this.MS.Ae())/Math.PI%360;for(;e<0;)e+=360;for(;e>360;)e-=360;return!(e>=0&&e<=20||e>=340&&e<=360)&&void 0},this.Lr=void 0,this.setTickStyle(i.polarRadialAxisTickStyle),this.setTitle("Degrees"),this.setNorth(this.C_),this.I_=null!==(h=this.bi.polarRadialAxisMarginAfterTicks)&&void 0!==h?h:7}setTickStyle(t){return this.P_="function"==typeof t?t(this.P_):t,this.L_(),this.bS.Bs(),this}getTickStyle(){return this.P_}setTickFormattingFunction(t){return this.F_=t,this.L_(),this.bS.Bs(),this}getTickFormattingFunction(){return this.F_}setClockwise(t){this.MS.ue(t);const e=this.C_*Math.PI/180;return t?this.MS.fe(e+Math.PI/2):this.MS.fe(e-Math.PI/2),this.bS.Bs(),this}getClockwise(){return!this.MS.de()}setNorth(t){for(;t<0;)t+=360;t%=360,this.C_=t;const e=t*Math.PI/180;return this.getClockwise()?this.MS.fe(e+Math.PI/2):this.MS.fe(e-Math.PI/2),this.bS.Bs(),this}getNorth(){return 180*this.MS.Ae()/Math.PI}setDivision(t){return this.T_=t,this.L_(),this.bS.Bs(),this}getDivision(){return this.T_}getMarginAfterTicks(){return this.I_}setMarginAfterTicks(t){return this.I_=t,this.chart.gi.Bs(),this}aA(){return[]}Wr(t,e,i){return{ticksInfo:e,uA:this.hn((t,e)=>{const i=e.xn.Fh,s=.5*this.wS.getThickness()+i.tickLength+i.tickPadding+Math.abs(e.Dr.Er().vu().y);return Math.max(t,s)},0)+this.I_,updatedTicks:i}}fn(t,e){return e}vn(t,e,i){return{start:t,end:e}}kS(t,e){const i=t.de()?1:-1,s=t.Ae(),r=t.ce()?t.le().end-t.le().start:t.le().start-t.le().end;return{x:Math.cos((e-s)*i)*r,y:Math.sin((e-s)*i)*r}}CS(t,e){return t.fh(e)}PS(t,e,i,s){const r=this.P_,n=t.de()?1:-1,o=t.Ae(),a=(s.S-o)*n,h=Math.cos(a),l=Math.sin(a),c=t.ce()?t.le().end-t.le().start:t.le().start-t.le().end,u={x:h*c,y:l*c};e.gh({x:0,y:0}).Ah(u);const d={x:u.x+h*r.tickLength*t.ri().x,y:u.y+l*r.tickLength*t.ri().y};i.gh(u).Ah(d),e.dh(r.gridStrokeStyle),i.dh(r.tickStyle)}_S(t,e,i){const s=t.de()?1:-1;let r,n=(e-t.Ae())*s;for(;n<0;)n+=2*Math.PI;for(;n>=2*Math.PI;)n-=2*Math.PI;r=n>0&&n<=Math.PI?-n+Math.PI/2:-n-Math.PI/2;const o=Math.cos(n),a=Math.sin(n),h=i.tickLength+i.tickPadding;return{alignment:{x:0,y:0},padding:{x:o*h*t.ri().x,y:a*h*t.ri().y},rotation:180*r/Math.PI,offset:{x:0,y:0}}}TS(t,e,i){const s=t.ce()?t.le().end-t.le().start:t.le().start-t.le().end;this.Lv.Zc(0).Ah(360).qc(0).Jc(s+.5*e.getThickness()*t.ri().x).tu(360).Ke(sa).Qe(e)}FS(t,e,i){const s=t.Ae(),r=this._S(t,0+s,this.P_),n=t.ce()?t.le().end-t.le().start:t.le().start-t.le().end;e.Yl(r.alignment).wr(r.rotation).Ol(r.offset.x,r.offset.y).ih(Lo({x:n,y:0},r.padding))}L_(){this.Fr({Mh:[],wh:[{Dr:"Radial ticks",vA:0,Fh:this.P_,Sh:this.F_,_n:(t,e,i,s)=>{const r=[],n=2*Math.PI/this.T_;for(let o=0;o<2*Math.PI;o+=n)r.push(o);return r},ir:{tn:()=>{},sr:()=>!1,en:"hide-label"},kn:void 0}],_h:cp,kh:void 0,Ch:void 0},"Numeric")}}const cp=(t,e,i)=>(180*t/Math.PI).toFixed(0),up={an:()=>{},ln:()=>{},un:()=>{},pS:t=>({getInnerStart:()=>0,getInnerEnd:()=>2*Math.PI,H:(t,e)=>{},st:(e,i,s,r,n)=>t.x.st(e,i,s,r,n)}),mS:t=>t.radial},dp=t=>!!(t&&"object"==typeof t&&"axisAmplitude"in t&&"axisRadial"in t);class fp extends Fa{constructor(t,e,i,s,r,n){super(e,i,r,n),this.Es="Sector",this.B_=0,this.D_=1*Math.PI/2,this.R_=void 0,this.E_=void 0,this.L=new Ar,this.Ws=t,this.MS=s,this.JS=this.Ws.xu(this.MS).Fi(this.getHighlight()),this._s(this.JS),this.Xe=r.polarSectorFillStyle,this.Ze=r.polarSectorStrokeStyle,this.setPointerEvents(!1)}setAngleStart(t){return this.B_=t,this.Ws.Bs(),this}getAngleStart(){return this.B_}setAngleEnd(t){return this.D_=t,this.Ws.Bs(),this}getAngleEnd(){return this.D_}setAmplitudeStart(t){return this.R_=t,this.Ws.Bs(),this}getAmplitudeStart(){return this.R_}setAmplitudeEnd(t){return this.E_=t,this.Ws.Bs(),this}getAmplitudeEnd(){return this.E_}setFillStyle(t){return this.Xe="function"==typeof t?t(this.Xe):t,this.Ws.Bs(),this}getFillStyle(){return this.Xe}setStrokeStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.Ws.Bs(),this}getStrokeStyle(){return this.Ze}th(){const t=this.MS.le(),e=void 0!==this.R_?Qr(this.R_,t.start,t.end):t.start,i=void 0!==this.E_?Qr(this.E_,t.start,t.end):t.end,s=[],r=Math.min(this.B_,this.D_),n=Math.max(this.B_,this.D_);for(let a=r;a<=n;a+=1)s.push({angle:a,amplitude:e});for(let a=n;a>=r;a-=1)s.push({angle:a,amplitude:i});const o=tg(s,this.MS);this.JS.rc(o).Ke(this.Xe).Qe(this.Ze)}eh(t,e){t.Fi(e),this.Ws.Bs()}sh(){return{fill:this.Xe,stroke:this.Ze}}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class gp extends Hd{constructor(t,e,i,s,r,n,o){var a;super(t,e,i,e.Vg("polarChart bg",0),s,e.gi.bi.polarChartBackgroundFillStyle,e.gi.bi.polarChartBackgroundStrokeStyle,e.gi.bi.polarChartTitleFont,e.gi.bi.polarChartTitleFillStyle,e.gi.bi.polarChartTitleShadow,o,null===(a=null==n?void 0:n.legend)||void 0===a?void 0:a.customLegend),this.coordsClient="client",this.Ff=[],this.O_=t=>{this.MS.X(t.engineWidth,t.engineHeight)},this.Bf=Sn(this.Ff),this.z_=t=>{this.Ff.push(t)},this.V_=()=>this.ny,this.L=new Ar,this.gi.ka(_l.Mo),this.jw=e.km("polarChart series bg",0),this.N_=e.Cm("polarChart axis gridlines",0),this.G_=e.Cm("polarChart series",1),this.U_=e.Cm("polarChart axis lines",2),this.Y_=e.Cm("polarChart axis ticks",3),this.MS=i.d2({scaleXYConstructor:uh}),this.addEventListener("resize",this.O_),this.Yh.Jr("Polar Chart"),this.gy=this.jw.md(this.MS).Ke(this.bi.polarChartSeriesBackgroundFillStyle).Qe(Lr).Zc(0).Ah(360).qc(0),this.vy=this.jw.md(this.MS).Ke(sa).Qe(this.bi.polarChartSeriesBackgroundStrokeStyle).Zc(0).Ah(360).qc(0),super.Ay(this.gy,this.vy),this.zg(r,this.Jf),this.j_=new Jf(this,this.MS,this.bi,!1!==(null==n?void 0:n.animationsEnabled),this.N_,this.U_,this.Y_,this.ys,this.V_),this.H_=new lp(this,this.MS,this.bi,!1!==(null==n?void 0:n.animationsEnabled),this.N_,this.U_,this.Y_,this.ys),this.coordsAxis={axisAmplitude:this.j_,axisRadial:this.H_};const h=e.Dm(),c=$r(n?n.cursorBuilder:void 0,Mf);this.Rm=ym(this,h,c.sm(h,this.uiScale,this.uiScale,Jr,this.bi),this,"show-nearest",yp,(t,e)=>{const i=this.translateCoordinate(t,this.coordsClient);return Math.sqrt((i.clientX-e.clientX)**2+(i.clientY-e.clientY)**2)}),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled));const u=l({backgroundVisible:!0},null==n?void 0:n.legend);this.legend.setOptions(u)}getSeries(){return this.ny}setCursor(t){return this.Rm.setCursor(t),this}getCursor(){return this.Rm.getCursor()}setCursorMode(t){return this.Rm.setCursorMode(t),this}getCursorMode(){return this.Rm.getCursorMode()}setCustomCursor(t){return this.Rm.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.Rm.Ym(t),this}setCursorFormatting(t){return this.Rm.setCursorFormatting(t),this}getCursorFormatting(){return this.Rm.getCursorFormatting()}solveNearest(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getCursorMode()||"show-nearest";return this.Rm.solveNearest(t,e,this.ny,(t,e,i)=>t.solveNearest(e,i))}addCursor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mf;const e=this.Tg(),i=t.sm(e,this.uiScale,this.uiScale,this.wg(e),this.bi);return this.Eg(i),i}translateCoordinate(t,e,i){if(i){const e=t,s=this.Jf,r=i;if(pa(r)){const t=hr(e,s,this.gi.oi);return this.gi.Qa({engineX:t.x,engineY:t.y})}if(ma(r))return e;if(dp(r)){const t=hr(e,s,this.MS);return sg(t,this.MS)}}else{const i=t,s=e;if(ya(i)){if(dp(s)){const t=this.gi.Ja(i),e=hr({x:t.engineX,y:t.engineY},this.gi.oi,this.MS);return sg(e,this.MS)}if(pa(s))return i;if(ma(s)){const t=this.gi.Ja(i);return hr({x:t.engineX,y:t.engineY},this.gi.oi,this.Jf)}}else if((t=>!!(t&&"object"==typeof t&&"angle"in t&&"number"==typeof t.angle&&"amplitude"in t&&"number"==typeof t.amplitude))(i)){if(dp(s))return i;const t=tg([i],this.MS)[0];if(pa(s)){const e=hr(t,this.MS,this.gi.oi),i={engineX:e.x,engineY:e.y};return this.gi.Qa(i)}if(ma(s))return hr(t,this.MS,this.Jf)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addLineSeries(t){const e=new ag(this.G_,this,this.ly,this.MS,this.bi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ny.length,this.gi.ys);return this.yy(e,t),e}addPointSeries(t){const e=new ap(this.G_,this,this.ly,this.MS,this.bi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ny.length,this.gi.ys);return this.yy(e,t),e}addPointLineSeries(t){const e=new op(this.G_,this,this.ly,this.MS,this.bi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ny.length,this.gi.ys);return this.yy(e,t),e}addAreaSeries(t){const e=new og(this.G_,this,this.ly,this.MS,this.bi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ny.length,this.gi.ys);return this.yy(e,t),e}addPolygonSeries(t){const e=new rg(this.G_,this,this.ly,this.MS,this.bi,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ny.length,this.gi.ys);return this.yy(e,t),e}addHeatmapSeries(t){const e=new hp(this.G_,this,this.ly,this.MS,this.bi,this.gi.ys,t);return this.yy(e,t),e}addSector(t){const e=new fp(this.G_,this,this.Bf,this.MS,this.bi,this.gi.ys);return this.z_(e),this.Os.forEach(i=>{i.dg()&&null!==t&&i.Sc(e,t)}),e}getAmplitudeAxis(){return this.j_}get amplitudeAxis(){return this.j_}get axisAmplitude(){return this.j_}getRadialAxis(){return this.H_}get radialAxis(){return this.H_}get axisRadial(){return this.H_}th(t){super.th(t);const e=Md.Wg(this.Yh,this.Ng),i=this.Os.reduce((t,i)=>{const s=i.Er(e,this.On);return{top:Math.max(t.top,s.top),bottom:Math.max(t.bottom,s.bottom),left:Math.max(t.left,s.left),right:Math.max(t.right,s.right)}},{top:0,bottom:0,left:0,right:0});Md.Xg(this.Yh,this.Ng,this.uiScale.ri(),this.On,i);for(const u of this.ny)u.rv();this.j_.dn(),this.H_.dn();for(const u of this.ny)u.th();const s=this.MS.getInnerIntervalPixels().x/2,r=this.j_.Er({physicalAxisSize:s}),n=this.H_.Er({physicalAxisSize:2*Math.PI*s});this.j_.th(r),this.H_.th(n);const o=[this.On.left+n.uA+i.left,this.On.right+n.uA+i.right],a=[this.On.bottom+n.uA+i.bottom,this.On.top+n.uA+e+i.top];this.MS.Kt(o).qt(a);const h=this.MS.le().start,l=this.MS.le().end,c=this.MS.ce()?(n.uA||0)*this.MS.x.getPixelSize()+l-h:(n.uA||0)*this.MS.x.getPixelSize()+h-l;this.gy.Jc(c).tu(360),this.vy.Jc(c).tu(360);for(const u of this.Ff)u.th();this.Rm.th(!1,this.ny,(t,e,i)=>t.solveNearest(e,i));for(const u of this.ny)u.nv();return super.Og(),this.Os.forEach(t=>t.th(e,this.On)),this.W_(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.j_.setAnimationsEnabled(t),this.H_.setAnimationsEnabled(t),this}getMinimumSize(){return As(pp,pp)}W_(){}forEachAxis(t){return t(this.j_),t(this.H_),this}dispose(){return this.Ff.slice().forEach(t=>t.dispose()),this.Rm.N(),this.jw.N(),this.N_.N(),this.G_.N(),this.U_.N(),this.Y_.N(),super.dispose()}gg(){return[...this.ny,...this.Ff]}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}const pp=300,yp=(t,e,i)=>{var s;return(t=>t&&"object"==typeof t&&"annulus"in t&&"sector"in t)(e)?dm(e,[[{component:e.series,componentColor:fm(e),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],["Angle","",{text:e.angle.toFixed(0),font:{weight:"bold"}}],["Amplitude","",{text:Ea(t.getAmplitudeAxis().formatValue(e.amplitude),t.amplitudeAxis),font:{weight:"bold"}}],["Intensity","",{text:Ea(e.lut?ea(e.lut,e.intensity):e.intensity.toFixed(2),null===(s=e.lut)||void 0===s?void 0:s.units),font:{weight:"bold"}}]]):dm(e,[[{component:e.series,componentColor:fm(e),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],["Angle","",{text:e.angle.toFixed(0),font:{weight:"bold"}}],["Amplitude","",{text:Ea(t.getAmplitudeAxis().formatValue(e.amplitude),t.amplitudeAxis),font:{weight:"bold"}}]])};class mp extends Fa{constructor(t,e,i,s){super(t,e,i,s),this.Es="Slice",this.S=0,Ur.requestAnimationFrame(()=>{this.addEventListener("pointermove",()=>{this.fs.gi.Bs()})})}}class vp extends mp{}class xp extends vp{constructor(t,e,i,s,r,n,o,a){super(s,n,o,a),this.Es="Slice",this.S=0,this.X_=!1,this.Z_=sa,this.J_=sa,this.Q_=this.S,this.K_=Mr(()=>this.fs.gi.Bs()),this.q_=()=>{this.tk=void 0},this.L=new Ar,this.index=t,this.fs=s,this.scale=r,this.As=n,this.JS=e.xu(r,gc.Simple).Fi(this.getHighlight()),this._s(this.JS),this.Dr=i.bn(r).Fi(this.getHighlight()),this._s(this.Dr,{isText:!0})}setValue(t){return this.fs.getAnimationsEnabled()?this.getVisible()&&this.ik(this.Q_,t,()=>this.fs.Os.forEach(t=>t.zs())):this.Q_=t,this.S=t,this.fs.Os.forEach(t=>t.zs()),this.fs.gi.Bs(),this}getValue(){return this.S}setVisible(t){return!1===t?this.fs.getAnimationsEnabled()&&Math.abs(this.Q_)>0?(this.tk&&(this.tk.finish(!1),this.tk=void 0),this.ik(this.Q_,0,()=>super.setVisible(!1))):(this.Q_=0,super.setVisible(!1)):this.fs.getAnimationsEnabled()?(this.tk&&(this.tk.finish(!1),this.tk=void 0),super.setVisible(!0),this.ik(this.Q_,this.S)):(this.Q_=this.S,super.setVisible(!0)),this}ik(t,e,i){this.tk=this.K_(300,kr.ease)([[t,e]],t=>{let[e]=t;this.Q_=e,this.fs.gi.Bs()}),this.tk.addEventListener("everyAnimationEnd",this.q_),i&&this.tk.addEventListener("end",i)}setStyle(t,e,i,s,r){this.Z_=t,this.J_=i,this.JS.Ke(this.Z_).Qe(e),this.Dr.Ke(this.J_).Mr(s).Zr(r)}getAnimatedValue(){return this.Q_}eh(t,e){return t.Fi(e),this.fs.gi.Bs(),this}sh(){return{fill:this.Z_,stroke:this.JS.ja()}}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}var bp;!function(t){t[t.LabelsInsideSlices=0]="LabelsInsideSlices",t[t.LabelsOnSides=1]="LabelsOnSides"}(bp||(bp={}));const Sp=(t,e)=>t.getName().localeCompare(e.getName(),void 0,{numeric:!0}),Ap=()=>0,Ep=t=>"".concat(t.getName(),": ").concat(Math.round(t.getAnimatedValue()));var kp;!function(t){t[t.VariableHeight=0]="VariableHeight",t[t.VariableWidth=1]="VariableWidth"}(kp||(kp={}));const wp=(t,e)=>{let i=100;return t<=0?t=0:(i=t>=100?100:t,t=e*(i/100)),t},Mp=function(t,e,i,s,r){let n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:kp.VariableHeight,a=arguments.length>7?arguments[7]:void 0,h=arguments.length>8?arguments[8]:void 0;e=wp(e,s.x),i=wp(i,s.x);const l=t.length;let c=0,u=0;c=t.reduce((t,e)=>t+Math.abs(e.getAnimatedValue()),0);let d={x:a-e/2+h.left,y:s.y+r.bottom+h.bottom},f={x:a+e/2+h.left,y:s.y+r.bottom+h.bottom},g={x:0,y:r.bottom},p={x:0,y:r.bottom},y=0,m=0;if(n)for(let x=0;x<t.length;x+=1){const e=t[x],i=10;m+=Math.abs(e.getAnimatedValue());const a=o===kp.VariableWidth?(s.y-n*l)/l:s.y+r.bottom-m/c*s.y;if(o===kp.VariableWidth){n=a-n<i?Math.max(20,a-i):n;break}0!==y&&y-a-n<i&&(n=Math.max(0,y-a-i)),y=a}const v=(e-i)/2/s.y;for(let x=0;x<l;x+=1){const y=t[x];u+=Math.abs(y.getAnimatedValue());const m=o===kp.VariableWidth?(s.y-n*l)/l:s.y+r.bottom-u/c*s.y;let b=0;x>0&&(d={x:g.x+v*n,y:g.y-n},f={x:p.x-v*n,y:p.y-n}),b=(e+u/c*(i-e))/2,g={x:a-b+h.left,y:o===kp.VariableWidth?d.y-m:m+h.bottom},p={x:a+b+h.left,y:o===kp.VariableWidth?f.y-m:m+h.bottom},f.x>=d.x&&p.x>g.x&&y.JS.rc([g,d,f,p])}};class Cp extends wd{constructor(t,e,i,s,r,n,o){var a;super(t,e,i,e.Vg("funnelChart bg",0),s,e.gi.bi.funnelChartBackgroundFillStyle,e.gi.bi.funnelChartBackgroundStrokeStyle,e.gi.bi.funnelChartTitleFont,e.gi.bi.funnelChartTitleFillStyle,e.gi.bi.funnelChartTitleShadow,n,null===(a=null==o?void 0:o.legend)||void 0===a?void 0:a.customLegend),this.sk=[],this.ek=Ap,this.hk=!0,this.rk=this.bi.funnelChartSliceLabelShadow,this.nk=0,this.ak=20,this.lk=5,this.ck=kp.VariableHeight,this.uk=!0,this.dk=t=>{const e=this.sk.indexOf(t);e>=0&&(this.sk.splice(e,1),this.fk())},this.L=new Ar,this.gi.ka(_l.So),this.Ak=this.bi.effectsText,this.gk=e.Cm("funnelChart bottom",0),this.vk=e.Cm("funnelChart top",1),this.Yh.Jr("Funnel Chart"),this.yk=this.bi.funnelChartSliceFillStylePalette,this.pk=this.bi.funnelChartSliceStrokeStyle,this.mk=this.bi.funnelChartSliceLabelFont,this.Sk=this.bi.funnelChartSliceLabelFillStyle;const h=e.Dm(),c=$r(o?o.cursorBuilder:void 0,kf);this.Rm=ym(this,h,c.sm(h,this.uiScale,this.uiScale,Jr,this.bi),void 0,"show-pointed",Tp,()=>0),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled)),this.zg(r,this.Jf);const u=l({backgroundVisible:!0},null==o?void 0:o.legend);this.legend.setOptions(u)}setCursor(t){return this.Rm.setCursor(t),this}getCursor(){return this.Rm.getCursor()}setCursorMode(t){return this.Rm.setCursorMode(t),this}getCursorMode(){return this.Rm.getCursorMode()}setCustomCursor(t){return this.Rm.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.Rm.Ym(t),this}setCursorFormatting(t){return this.Rm.setCursorFormatting(t),this}getCursorFormatting(){return this.Rm.getCursorFormatting()}addCursor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kf;const e=this.Tg(),i=t.sm(e,this.uiScale,this.uiScale,this.wg(e),this.bi);return this.Eg(i),i}addSlice(t,e){const i=new xp(this.nk,this.gk,this.vk,this,this.Jf,this.dk,this.bi,this.gi.ys);return this.nk+=1,i.setName(t),i.setValue(e),i.ys.Ss.Ls(this.Ak),i.ys.bs.Ls(this.uk),this.sk.push(i),this.gi.Bs(),i.setHighlightOnHover(this.hk),this.Os.forEach(t=>{t.dg()&&t.Sc(i)}),i}addSlices(t){const e=[];for(let i=0;i<t.length;i+=1)e.push(this.addSlice(t[i].name,t[i].value));return e}getSlices(){return this.sk}setNeckWidth(t){return this.ak=Qr(t,1,99),this.gi.Bs(),this}getNeckWidth(){return this.ak}setSliceGap(t){return this.lk=Math.min(Math.max(t,0),20),this.gi.Bs(),this}setSliceMode(t){return this.ck=t,this.gi.Bs(),this}getFunnelSliceMode(){return this.ck}setLUT(t){return this.Af=t,this.gi.Bs(),this}setSliceFillStyle(t){return this.yk=t,this.gi.Bs(),this}getSliceFillStyle(){return this.yk}setSliceStrokeStyle(t){return this.pk="function"==typeof t?t(this.pk):t,this.gi.Bs(),this}getSliceStrokeStyle(){return this.pk}setSliceEffect(t){return this.uk=t,this.sk.forEach(e=>e.ys.bs.Ls(t)),this.gi.Bs(),this}getSliceEffect(){return this.uk}setSliceSorter(t){return this.ek=t,this.sk=this.sk.sort(this.ek),this.gi.Bs(),this}getSliceSorter(){return this.ek}setLabelFillStyle(t){return this.Sk="function"==typeof t?t(this.Sk):t,this.gi.Bs(),this}getLabelFillStyle(){return this.Sk}setLabelShadow(t){return this.rk=t,this.gi.Bs(),this}getLabelShadow(){return this.rk}setLabelFont(t){return this.mk="function"==typeof t?t(this.mk):t,this.gi.Bs(),this}getLabelFont(){return this.mk}setLabelEffect(t){return this.Ak=t,this.sk.forEach(e=>e.ys.Ss.Ls(t)),this.gi.Bs(),this}getLabelEffect(){return this.Ak}setLabelFormatter(t){return this.bk=t,this.gi.Bs(),this}getLabelFormatter(){return this.bk}setSliceHighlightOnHover(t){return this.hk=t,this.sk.forEach(e=>e.setHighlightOnHover(t)),this}th(t){super.th(t),super.Og(),this.sk=this.sk.sort(this.ek);for(let c=0,{length:u}=this.sk;c<u;c+=1)this.xk(this.sk[c],c);const e=this.sk.filter(t=>Math.abs(t.getAnimatedValue())>0),i=Md.Wg(this.Yh,this.Ng),s=this.Os.reduce((t,e)=>{const s=e.Er(i,this.On);return{top:Math.max(t.top,s.top),bottom:Math.max(t.bottom,s.bottom),left:Math.max(t.left,s.left),right:Math.max(t.right,s.right)}},{top:0,bottom:0,left:0,right:0});Md.Xg(this.Yh,this.Ng,this.uiScale.ri(),this.On,s);const r=As(this.Jf.x.getInnerInterval()-(this.On.left+this.On.right),this.Jf.y.getInnerInterval()-(this.On.bottom+this.On.top+i)),n=As(r.x-s.left-s.right,r.y-s.top-s.bottom),o=As(this.On.left+(r.x+s.left-s.right)/2,this.On.bottom+(r.y+s.bottom-s.top)/2);let a=0;for(let c=0;c<e.length;c+=1)a+=Math.abs(e[c].getAnimatedValue());const h=[];for(let c=0;c<e.length;c+=1)h.push((l=Math.abs(e[c].getAnimatedValue()))>0?l/a:0);var l;for(let c=0;c<e.length;c+=1){const t=e[c];t.Dr.Jr(this.bk(t,h[c])).Er()}h.push(a),this.Rm.th(!1,this.sk,(t,i,s)=>{const r=h[e.indexOf(t)]||0,n=this.gi.Ja(i);return{cursorPosition:{pointMarker:{x:n.engineX,y:n.engineY},pointMarkerScale:this.gi.oi,resultTable:{x:n.engineX,y:n.engineY},resultTableScale:this.gi.oi},slice:t,category:t.getName(),value:t.getValue(),relativeValue:r}}),this.Os.forEach(t=>t.th(i,this.On)),this.Mk(e,h,o,n,s)}xk(t,e){t.setStyle(this.Af?new aa({color:this.Af.getColors(t.getAnimatedValue(),void 0)}):this.yk(e,t),this.pk,this.Sk,this.mk,this.rk)}fk(){this.sk=this.sk.sort(this.ek),this.gi.Bs()}gg(){return this.sk}dispose(){return this.sk.slice().forEach(t=>t.dispose()),this.Rm.N(),this.gk.N(),this.vk.N(),super.dispose()}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}const Tp=(t,e,i)=>[[{component:e.slice,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:e.value.toString(),font:{weight:"bold"}}]],Fp=(t,e,i)=>{const s=t.nc();if(0===s.length)return{x:0,y:0};let r;const n=(s[1].y-s[0].y)/2+s[0].y;return r=e===Bp.Left?(s[0].x-s[1].x)/2+s[1].x-i:(s[2].x-(4===s.length?s[3].x:s[1].x))/2+(4===s.length?s[3].x:s[1].x)+i,{x:r,y:n}};class Pp extends Cp{constructor(){super(...arguments),this.bk=Ep,this.wk=0,this._k=10,this.kk=30,this.Ck=10,this.Tk=Bp.Left,this.Fk=[],this.Ik=this.bi.funnelChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.Ik=t;for(let e=0;e<this.Fk.length;e+=1)this.Fk[e].dh(this.Ik);return this.gi.Bs(),this}getLabelConnectorStyle(){return this.Ik}setLabelConnectorGapBeforeLabel(t){return this._k=t,this.gi.Bs(),this}getLabelConnectorGapBeforeLabel(){return this._k}setLabelConnectorGapBeforeSlice(t){return this.wk=t,this.gi.Bs(),this}getLabelConnectorGapBeforeSlice(){return this.wk}setLabelConnectorLengthAfterSlice(t){return this.kk=t,this.gi.Bs(),this}getLabelConnectorLengthAfterSlice(){return this.kk}setLabelConnectorMinLengthBeforeSlice(t){return this.Ck=t,this.gi.Bs(),this}getLabelConnectorMinLengthBeforeSlice(){return this.Ck}setLabelSide(t){return this.Tk=t,this.gi.Bs(),this}getLabelSide(){return this.Tk}Mk(t,e,i,s,r){let n=0,o=0;for(let w=0;w<t.length;w+=1){const e=t[w].Dr.setVisible(!0).Er().vu();n=Math.max(n,e.x),o+=e.y}const a=.4*s.x,h=s.x-a-(this.wk+this.kk+this.Ck+this._k);let l=!0;h<50?l=!1:n>h&&(t.forEach(t=>{const e=t.Dr.qr(),i=t.Dr.vu().x/e.length,s=Math.floor(h/i);if(s<e.length){const i=e.slice(0,s-3)+"...";t.Dr.Jr(i).Er()}}),o=0,n=t.reduce((t,e)=>{const i=e.Dr.vu();return o+=i.y,Math.max(t,i.x)},0));const c=this.Tk===Bp.Left?this.On.left+r.left:this.On.left+s.x,u=this.Tk===Bp.Left?-1:1,d=s.y-o;d<0&&(l=!1);const f=l?n+this._k+this.Ck+this.kk+this.wk:0,g=s.x-f,p=this.Tk===Bp.Left?this.On.left+f:this.On.left,y=this.Tk===Bp.Left?p+g:this.On.left+g,m=(p+y)/2;Mp(t,100,this.ak,{x:g,y:s.y},this.On,this.lk,this.ck,m,r);const v=t.filter(t=>l&&0!==t.JS.nc().length?(t.Dr.setVisible(!0),!0):(t.Dr.setVisible(!1),!1)),x=d/(v.length+1);let b=this.On.bottom+s.y-(this.ck==kp.VariableHeight?x:0)+r.bottom;this.ck==kp.VariableWidth&&(b-=o/t.length/2);const S=this.Tk===Bp.Left?p:y,A=this.Tk===Bp.Left?m-.5*this.ak/100*g:m+.5*this.ak/100*g,E=this.On.bottom+s.y+r.bottom,k=this.On.bottom+r.bottom;for(let w=0;w<this.Fk.length;w+=1)this.Fk[w].setVisible(!1);for(let w=0;w<v.length;w+=1){const t=v[w],e=t.JS,i=t.Dr,s=i.vu(),r=Fp(e,this.Tk,this.wk);if(this.ck==kp.VariableHeight){t.Dr.ih({x:c,y:b}).Yl({x:u,y:1});const e=b-.5*s.y,n={x:this.Tk===Bp.Left?Math.min(Ia(S,A,(e-E)/(k-E))-this.kk,r.x):Math.max(Ia(S,A,(e-E)/(k-E))+this.kk,r.x),y:e},o={x:this.Tk===Bp.Left?i.Dl().x+s.x+this._k:i.Dl().x-s.x-this._k,y:e};this.Pk([r,n,o]),b-=s.y+x}else{const e=this.Tk===Bp.Left?c+s.x+this._k:c-s.x-this._k;t.Dr.ih({x:c,y:r.y}).Yl({x:u,y:0}),this.Pk([r,{x:e,y:r.y}])}}}getMinimumSize(){return As(500,300)}Pk(t){if(t){let e;for(let t=0;t<this.Fk.length;t+=1)if(!this.Fk[t].getVisible()){e=this.Fk[t].setVisible(!0);break}void 0===e&&(e=this.vk.Dv(this.Jf,void 0,[Pd.InternalUI]).dh(this.Ik),this.Fk.push(e)),e.zi().Sc(t)}}}var Bp,Lp;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(Bp||(Bp={}));class Dp extends mp{}class zp extends Dp{constructor(t,e,i,s,r,n,o,a){super(s,n,o,a),this.X_=!1,this.Lk=sa,this.J_=sa,this.Q_=this.S,this.Bk=this.X_?1:0,this.Dk=this.getVisible(),this.K_=Mr(()=>this.fs.gi.Bs()),this.Rk=Mr(()=>this.fs.gi.Bs()),this.q_=()=>{this.tk=void 0},this.Ek=()=>{this.Ok=void 0},this.L=new Ar,this.index=t,this.fs=s,this.scale=r,this.As=n,this.zk=e.md(r).Fi(this.getHighlight()),this._s(this.zk),this.Dr=i.bn(r).Fi(this.getHighlight()),this._s(this.Dr,{isText:!0}),this.addEventListener("click",t=>{t.defaultPrevented||((t,e)=>{mn(e),t.setExploded(!t.getExploded())})(this,t)})}setValue(t){return this.fs.getAnimationsEnabled()?this.Dk&&this.ik(this.Q_,t,()=>this.fs.Os.forEach(t=>t.zs())):this.Q_=t,this.S=t,this.fs.Os.forEach(t=>t.zs()),this.fs.gi.Bs(),this}getValue(){return this.S}setExploded(t){if(t&&!1===this.fs.getMultipleSliceExplosion()){const t=this.fs.getSlices();for(let e=0;e<t.length;e+=1)t[e]!==this&&t[e].getExploded()&&t[e].setExploded(!1)}return this.fs.getAnimationsEnabled()?(this.Ok&&this.Ok.finish(),this.Ok=this.Rk(300,kr.ease)([[this.Bk,t?1:0]],t=>{let[e]=t;this.Bk=e,this.fs.gi.Bs()}),this.Ok.addEventListener("everyAnimationEnd",this.Ek),this.X_=!this.X_):!1!==this.fs.getMultipleSliceExplosion()||t?(this.Bk=this.X_?0:1,this.X_=!this.X_):(this.Bk=0,this.X_=!this.X_),this.fs.gi.Bs(),this}getExploded(){return this.X_}setVisible(t){return this.Dk=t,!1===t?this.fs.getAnimationsEnabled()&&Math.abs(this.Q_)>0?(this.tk&&(this.tk.finish(!1),this.tk=void 0),this.ik(this.Q_,0,()=>super.setVisible(!1))):(this.Q_=0,super.setVisible(!1)):this.fs.getAnimationsEnabled()?(this.tk&&(this.tk.finish(!1),this.tk=void 0),super.setVisible(!0),this.ik(this.Q_,this.S)):(this.Q_=this.S,super.setVisible(!0)),this}ik(t,e,i){this.tk=this.K_(300,kr.ease)([[t,e]],t=>{let[e]=t;this.Q_=e,this.fs.gi.Bs()}),this.tk.addEventListener("everyAnimationEnd",this.q_),i&&this.tk.addEventListener("end",i)}setStyle(t,e,i,s,r){this.Lk=t,this.J_=i,this.zk.Ke(this.Lk).Qe(e),this.Dr.Ke(this.J_).Mr(s).Zr(r)}getAnimatedValue(){return this.Q_}getAnimatedExplosion(){return this.Bk}sh(){return{fill:this.Lk,stroke:this.zk.ja()}}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class Ip extends mp{}class Rp extends Ip{constructor(t,e,i,s,r,n,o,a){super(s,n,o,a),this.Es="Slice",this.S=0,this.X_=!1,this.Z_=sa,this.J_=sa,this.Q_=this.S,this.K_=Mr(()=>this.fs.gi.Bs()),this.q_=()=>{this.tk=void 0},this.L=new Ar,this.index=t,this.fs=s,this.scale=r,this.As=n,this.JS=e.xu(r,gc.Simple).Fi(this.getHighlight()),this._s(this.JS),this.Dr=i.bn(r).Fi(this.getHighlight()),this._s(this.Dr,{isText:!0})}setValue(t){return this.fs.getAnimationsEnabled()?this.getVisible()&&this.ik(this.Q_,t,()=>this.fs.Os.forEach(t=>t.zs())):this.Q_=t,this.S=t,this.fs.Os.forEach(t=>t.zs()),this.fs.gi.Bs(),this}getValue(){return this.S}setVisible(t){return!1===t?this.fs.getAnimationsEnabled()&&Math.abs(this.Q_)>0?(this.tk&&(this.tk.finish(!1),this.tk=void 0),this.ik(this.Q_,0,()=>super.setVisible(!1))):(this.Q_=0,super.setVisible(!1)):this.fs.getAnimationsEnabled()?(this.tk&&(this.tk.finish(!1),this.tk=void 0),super.setVisible(!0),this.ik(this.Q_,this.S)):(this.Q_=this.S,super.setVisible(!0)),this}ik(t,e,i){this.tk=this.K_(300,kr.ease)([[t,e]],t=>{let[e]=t;this.Q_=e,this.fs.gi.Bs()}),this.tk.addEventListener("everyAnimationEnd",this.q_),i&&this.tk.addEventListener("end",i)}setStyle(t,e,i,s,r){this.Z_=t,this.J_=i,this.JS.Ke(this.Z_).Qe(e),this.Dr.Ke(this.J_).Mr(s).Zr(r)}getAnimatedValue(){return this.Q_}sh(){return{fill:this.Z_,stroke:this.JS.ja()}}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}!function(t){t[t.VariableHeight=0]="VariableHeight",t[t.VariableWidth=1]="VariableWidth"}(Lp||(Lp={}));const _p=(t,e)=>{let i=100;return t<=0?t=0:(i=t>=100?100:t,t=e*(i/100)),t},Vp=function(t,e,i,s,r){let n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Lp.VariableHeight,a=arguments.length>7?arguments[7]:void 0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Zn;e=_p(e,s.x),i=_p(i,s.x);const l=t.length;let c=0,u=0;c=t.reduce((t,e)=>t+Math.abs(e.getAnimatedValue()),0);let d={x:a-e/2+h.left,y:s.y+r.bottom+h.bottom},f={x:a+e/2+h.left,y:s.y+r.bottom+h.bottom},g={x:0,y:r.bottom},p={x:0,y:r.bottom},y=0,m=0;if(n)for(let x=0;x<t.length;x+=1){const e=10;m+=Math.abs(t[x].getAnimatedValue());const i=o===Lp.VariableWidth?(s.y-n*l)/l:s.y+r.bottom-m/c*s.y;if(o===Lp.VariableWidth){n=i-n<e?Math.max(20,i-e):n;break}0!==y&&y-i-n<e&&(n=Math.max(0,y-i-e)),y=i}const v=(e-i)/2/s.y;for(let x=0;x<l;x+=1){const y=t[x];u+=Math.abs(y.getAnimatedValue());const m=o===Lp.VariableWidth?(s.y-n*l)/l:s.y+r.bottom-u/c*s.y;let b=0;x>0&&(d={x:g.x+v*n,y:g.y-n},f={x:p.x-v*n,y:p.y-n}),b=(e+u/c*(i-e))/2,g={x:a-b+h.left,y:o===Lp.VariableWidth?d.y-m:m+h.bottom},p={x:a+b+h.left,y:o===Lp.VariableWidth?f.y-m:m+h.bottom},f.x>=d.x&&p.x>=g.x&&y.JS.rc([g,d,f,p])}};class Np extends wd{constructor(t,e,i,s,r,n,o){var a;super(t,e,i,e.Vg("pyramidChart bg",0),s,e.gi.bi.pyramidChartBackgroundFillStyle,e.gi.bi.pyramidChartBackgroundStrokeStyle,e.gi.bi.pyramidChartTitleFont,e.gi.bi.pyramidChartTitleFillStyle,e.gi.bi.pyramidChartTitleShadow,n,null===(a=null==o?void 0:o.legend)||void 0===a?void 0:a.customLegend),this.sk=[],this.ek=Ap,this.yk=this.bi.pyramidChartSliceFillStylePalette,this.pk=this.bi.pyramidChartSliceStrokeStyle,this.hk=!0,this.mk=this.bi.pyramidChartSliceLabelFont,this.Sk=this.bi.pyramidChartSliceLabelFillStyle,this.rk=this.bi.pyramidChartSliceLabelShadow,this.nk=0,this.ak=100,this.lk=5,this.ck=Lp.VariableHeight,this.uk=!0,this.dk=t=>{const e=this.sk.indexOf(t);e>=0&&(this.sk.splice(e,1),this.fk())},this.L=new Ar,this.gi.ka(_l.So),this.Ak=this.bi.effectsText,this.gk=e.Cm("pyramidChart bottom",0),this.vk=e.Cm("pyramidChart top",1),this.Yh.Jr("Pyramid Chart");const h=e.Dm(),c=$r(o?o.cursorBuilder:void 0,kf);this.Rm=ym(this,h,c.sm(h,this.uiScale,this.uiScale,Jr,this.bi),void 0,"show-pointed",Op,()=>0),this.zg(r,this.Jf),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled));const u=l({backgroundVisible:!0},null==o?void 0:o.legend);this.legend.setOptions(u)}setCursor(t){return this.Rm.setCursor(t),this}getCursor(){return this.Rm.getCursor()}setCursorMode(t){return this.Rm.setCursorMode(t),this}getCursorMode(){return this.Rm.getCursorMode()}setCustomCursor(t){return this.Rm.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.Rm.Ym(t),this}setCursorFormatting(t){return this.Rm.setCursorFormatting(t),this}getCursorFormatting(){return this.Rm.getCursorFormatting()}addCursor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kf;const e=this.Tg(),i=t.sm(e,this.uiScale,this.uiScale,this.wg(e),this.bi);return this.Eg(i),i}addSlice(t,e){const i=new Rp(this.nk,this.gk,this.vk,this,this.Jf,this.dk,this.bi,this.gi.ys);return this.nk+=1,i.setName(t),i.setValue(e),i.ys.Ss.Ls(this.Ak),i.ys.bs.Ls(this.uk),this.sk.push(i),this.gi.Bs(),this.Os.forEach(t=>{t.dg()&&t.Sc(i)}),i}addSlices(t){const e=[];for(let i=0;i<t.length;i+=1)e.push(this.addSlice(t[i].name,t[i].value));return e}getSlices(){return this.sk}setNeckWidth(t){return this.ak=Qr(t,1,100),this.gi.Bs(),this}getNeckWidth(){return this.ak}setSliceGap(t){return this.lk=Math.min(Math.max(t,0),20),this.gi.Bs(),this}setSliceMode(t){return this.ck=t,this.gi.Bs(),this}getPyramidSliceMode(){return this.ck}setLUT(t){return this.Af=t,this.gi.Bs(),this}setSliceFillStyle(t){return this.yk=t,this.gi.Bs(),this}getSliceFillStyle(){return this.yk}setSliceStrokeStyle(t){return this.pk="function"==typeof t?t(this.pk):t,this.gi.Bs(),this}getSliceStrokeStyle(){return this.pk}setSliceEffect(t){return this.uk=t,this.sk.forEach(e=>e.ys.bs.Ls(t)),this.gi.Bs(),this}getSliceEffect(){return this.uk}setSliceSorter(t){return this.ek=t,this.sk=this.sk.sort(this.ek),this.gi.Bs(),this}getSliceSorter(){return this.ek}setLabelFillStyle(t){return this.Sk="function"==typeof t?t(this.Sk):t,this.gi.Bs(),this}getLabelFillStyle(){return this.Sk}setLabelShadow(t){return this.rk=t,this.gi.Bs(),this}getLabelShadow(){return this.rk}setLabelFont(t){return this.mk="function"==typeof t?t(this.mk):t,this.gi.Bs(),this}getLabelFont(){return this.mk}setLabelEffect(t){return this.Ak=t,this.sk.forEach(e=>e.ys.Ss.Ls(t)),this.gi.Bs(),this}getLabelEffect(){return this.Ak}setLabelFormatter(t){return this.bk=t,this.gi.Bs(),this}getLabelFormatter(){return this.bk}setSliceHighlightOnHover(t){return this.hk=t,this.sk.forEach(e=>e.setHighlightOnHover(t)),this}th(t){super.th(t),super.Og(),this.sk=this.sk.sort(this.ek);for(let c=0,{length:u}=this.sk;c<u;c+=1)this.xk(this.sk[c],c);const e=this.sk.filter(t=>Math.abs(t.getAnimatedValue())>0),i=Md.Wg(this.Yh,this.Ng),s=this.Os.reduce((t,e)=>{const s=e.Er(i,this.On);return{top:Math.max(t.top,s.top),bottom:Math.max(t.bottom,s.bottom),left:Math.max(t.left,s.left),right:Math.max(t.right,s.right)}},{top:0,bottom:0,left:0,right:0});Md.Xg(this.Yh,this.Ng,this.uiScale.ri(),this.On,s);const r=As(this.Jf.x.getInnerInterval()-(this.On.left+this.On.right),this.Jf.y.getInnerInterval()-(this.On.bottom+this.On.top+i)),n=As(r.x-s.left-s.right,r.y-s.top-s.bottom),o=As(this.On.left+(r.x+s.left-s.right)/2,this.On.bottom+(r.y+s.bottom-s.top)/2);let a=0;for(let c=0;c<e.length;c+=1)a+=Math.abs(e[c].getAnimatedValue());const h=[];for(let c=0;c<e.length;c+=1)h.push((l=Math.abs(e[c].getAnimatedValue()))>0?l/a:0);var l;for(let c=0;c<e.length;c+=1){const t=e[c];t.Dr.Jr(this.bk(t,h[c])).Er()}h.push(a),this.Rm.th(!1,this.sk,(t,i,s)=>{const r=h[e.indexOf(t)]||0,n=this.gi.Ja(i);return{cursorPosition:{pointMarker:{x:n.engineX,y:n.engineY},pointMarkerScale:this.gi.oi,resultTable:{x:n.engineX,y:n.engineY},resultTableScale:this.gi.oi},slice:t,category:t.getName(),value:t.getValue(),relativeValue:r}}),this.Os.forEach(t=>t.th(i,this.On)),this.Mk(e,h,o,n,s)}xk(t,e){t.setStyle(this.Af?new aa({color:this.Af.getColors(t.getAnimatedValue(),void 0)}):this.yk(e,t),this.pk,this.Sk,this.mk,this.rk)}fk(){this.sk=this.sk.sort(this.ek),this.gi.Bs()}gg(){return this.sk}dispose(){return this.sk.slice().forEach(t=>t.dispose()),this.Rm.N(),this.gk.N(),this.vk.N(),super.dispose()}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}const Op=(t,e,i)=>[[{component:e.slice,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:e.value.toString(),font:{weight:"bold"}}]],Yp=(t,e,i)=>{const s=t.nc();if(0===s.length)return{x:0,y:0};let r;const n=(s[1].y-s[0].y)/2+s[0].y;return r=e===Xp.Left?(s[0].x-s[1].x)/2+s[1].x-i:(s[2].x-(4===s.length?s[3].x:s[1].x))/2+(4===s.length?s[3].x:s[1].x)+i,{x:r,y:n}};class Gp extends Np{constructor(){super(...arguments),this.bk=Ep,this.wk=0,this._k=10,this.kk=30,this.Ck=10,this.Tk=Xp.Left,this.Vk=bp.LabelsOnSides,this.Fk=[],this.Ik=this.bi.pyramidChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.Ik=t;for(let e=0;e<this.Fk.length;e+=1)this.Fk[e].dh(this.Ik);return this.gi.Bs(),this}getLabelConnectorStyle(){return this.Ik}setLabelConnectorGapBeforeLabel(t){return this._k=t,this.gi.Bs(),this}getLabelConnectorGapBeforeLabel(){return this._k}setLabelConnectorGapBeforeSlice(t){return this.wk=t,this.gi.Bs(),this}getLabelConnectorGapBeforeSlice(){return this.wk}setLabelConnectorLengthAfterSlice(t){return this.kk=t,this.gi.Bs(),this}getLabelConnectorLengthAfterSlice(){return this.kk}setLabelConnectorMinLengthBeforeSlice(t){return this.Ck=t,this.gi.Bs(),this}getLabelConnectorMinLengthBeforeSlice(){return this.Ck}setLabelSide(t){return this.Tk=t,this.gi.Bs(),this}getLabelSide(){return this.Tk}Mk(t,e,i,s,r){let n=0,o=0;for(let w=0;w<t.length;w+=1){const e=t[w].Dr.vu();n=Math.max(n,e.x),o+=e.y}const a=.4*s.x,h=s.x-a-(this.wk+this.kk+this.Ck+this._k);let l=!0;h<50?l=!1:n>h&&(t.forEach(t=>{const e=t.Dr.qr(),i=t.Dr.vu().x/e.length,s=Math.floor(h/i);if(s<e.length){const i=e.slice(0,s-3)+"...";t.Dr.Jr(i).Er()}}),o=0,n=t.reduce((t,e)=>{const i=e.Dr.vu();return o+=i.y,Math.max(t,i.x)},0));const c=this.Tk===Xp.Left?this.On.left+r.left:this.On.left+s.x,u=this.Tk===Xp.Left?-1:1,d=s.y-o;d<0&&(l=!1);const f=l?n+this._k+this.Ck+this.kk+this.wk:0,g=s.x-f,p=this.Tk===Xp.Left?this.On.left+f:this.On.left,y=this.Tk===Xp.Left?p+g:this.On.left+g,m=(p+y)/2;Vp(t,.001,this.ak,{x:g,y:s.y},this.On,this.lk,this.ck,m,r);const v=t.filter(t=>l&&0!==t.JS.nc().length?(t.Dr.setVisible(!0),!0):(t.Dr.setVisible(!1),!1)),x=d/(v.length+1);let b=this.On.bottom+s.y-(this.ck==Lp.VariableHeight?x:0)+r.bottom;this.ck==Lp.VariableWidth&&(b-=o/t.length/2);const S=m,A=this.Tk===Xp.Left?p:y,E=this.On.bottom+s.y+r.bottom,k=this.On.bottom+r.bottom;for(let w=0;w<this.Fk.length;w+=1)this.Fk[w].setVisible(!1);for(let w=0;w<v.length;w+=1){const t=v[w],e=t.JS,i=t.Dr,s=i.vu(),r=Yp(e,this.Tk,this.wk);if(this.ck==Lp.VariableHeight){t.Dr.ih({x:c,y:b}).Yl({x:u,y:1});const e=b-.5*s.y,n={x:this.Tk===Xp.Left?Math.min(Ia(S,A,(e-E)/(k-E))-this.kk,r.x):Math.max(Ia(S,A,(e-E)/(k-E))+this.kk,r.x),y:e},o={x:this.Tk===Xp.Left?i.Dl().x+s.x+this._k:i.Dl().x-s.x-this._k,y:e};this.Pk([r,n,o]),b-=s.y+x}else{const e=this.Tk===Xp.Left?c+s.x+this._k:c-s.x-this._k;t.Dr.ih({x:c,y:r.y}).Yl({x:u,y:0}),this.Pk([r,{x:e,y:r.y}])}}}getMinimumSize(){return As(500,300)}Pk(t){let e;for(let i=0;i<this.Fk.length;i+=1)if(!this.Fk[i].getVisible()){e=this.Fk[i].setVisible(!0);break}void 0===e&&(e=this.vk.Dv(this.Jf,void 0,[Pd.InternalUI]).dh(this.Ik),this.Fk.push(e)),e.zi().Sc(t)}}var Xp,Up;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"}(Xp||(Xp={})),function(t){t[t.Normal=0]="Normal",t[t.Circle=1]="Circle"}(Up||(Up={}));class Hp{constructor(t,e,i,s,r,n,o,a,h){this.Eh=!1,this.Nk=nl({start:!1}),this.Gk=t=>this.axisScale.Wt(t,qo.Numeric),this.formatValue=t=>this.Gk(t,{start:this.axisScale.G,end:this.axisScale.$}),this.$k=t,this.Mn=e,this.scale=i,this.chart=s,this.tag=r,this.axisScale=or.d1({scale1DConstructor:er,dimension:"x"}).H(0,1),this.Uk=n,this.Nk=a,h&&(this.Gk=h),o&&this.setInterval(o),this.Yk=this.$k.fh(this.scale).setPointerEvents(!1),this.jk=this.Mn.bn(this.scale).Jr(this.tag).setPointerEvents(!1),this.Hk=this.$k.Dv(this.scale,void 0,[Pd.InternalUI]).dh(this.chart.getNibStyle()),this.Uk.ks([this.jk])}Mk(t,e,i,s,r,n,o){const a=e.length,h=e[i>0?i-1:a-1],l=e[i],c=e[i<a-1?i+1:0],u=this.chart.getNibLength();this.Yk.gh(t).Ah(l).dh(this.chart.getAxisStyle()),this.Hk.zi().Sc(n===Up.Normal?[xo(l,h,Qr(.5*u/Po(Do(h,l)),0,1)),l,xo(l,c,Qr(.5*u/Po(Do(c,l)),0,1))]:function(t,e,i,s){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;const n=s/i,o=[];for(let a=-s/2;a<=s/2;a+=r){const r=n*(a/s)+e,h=As(t.x+Math.cos(r)*i,t.y+Math.sin(r)*i);o.push(h)}return o}(t,s,r,u)),o?this.jk.setVisible(!0).ih(Lo(l,As(o.paddingX,o.paddingY))).Vl(o.alignmentX).$l(o.alignmentY):this.jk.setVisible(!1)}dn(t){if(this.Nk&&!this.Eh){const e=this.Nk.apply({axis:this,curStart:this.axisScale.getInnerStart(),curEnd:this.axisScale.getInnerEnd(),seriesDataRange:t});e&&this.axisScale.H(e.start,e.end)}}getLabelSize(){return this.jk.Mr(this.chart.getAxisLabelFont()).Ke(this.chart.getAxisLabelStyle()).Er()._t()}dispose(){this.Yk&&this.Yk.dispose(),this.jk&&this.jk.dispose(),this.Hk&&this.Hk.dispose()}getTag(){return this.tag}setInterval(t){const{start:e,end:i,stopAxisAfter:s}=t;return void 0!==s&&(this.Eh=s),this.axisScale.H(null!=e?e:this.axisScale.getInnerStart(),null!=i?i:this.axisScale.getInnerEnd()),this.chart.gi.Bs(),this}getInterval(){return{start:this.axisScale.getInnerStart(),end:this.axisScale.getInnerEnd()}}setScaleLabelFormatter(t){return this.Gk=t,this.chart.gi.Bs(),this}setScrollStrategy(t){return this.Nk=bl(t),this.chart.gi.Bs(),this}getScrollStrategy(){return this.Nk}}const jp=(t,e,i,s,r,n)=>(t.alignmentX=(r+Math.PI/2)%(2*Math.PI)<=Math.PI?-1:1,t.alignmentY=r%(2*Math.PI)<=Math.PI?-1:1,t.paddingX=Math.cos(r)*n,t.paddingY=Math.sin(r)*n,t),Wp=t=>{if(0===t.axisIndex)return t.paddingX=t.labelPadding,t.alignmentX=-1,t;let e=!1;const i=t.chart.getAxes();if(i.length>1){const t=i[0].getInterval();e=i.some(e=>{const i=e.getInterval();return i.start!==t.start||i.end!==t.end})}return e?(t.paddingX=t.labelPadding,t.alignmentX=-1,t):void 0};class Zp extends Kf{constructor(t,e,i,s,r,n,o,a,h,l,c,u){super(t,h,l,u),this.Es="Spider Series",this.Wk=new Map,this.Xk=new Map,this.us=Ca.onHover,this.b_=8,this.Sl=0,this.Zk=(()=>{const t=Mr(()=>{});let e;return(i,s,r,n)=>{const o=null==n?void 0:n.onStart,a=null==n?void 0:n.onCompleted,h=(null==n?void 0:n.easing)||kr.ease,l=(null==n?void 0:n.durationMs)||1e3;let c;if(e)if(0===e.nextAnimations.length){const t=e.NextAnimation([[i,s]],i=>{let[s]=i;e=t,r(s)},l,h);c=t}else{i=e.nextAnimations.pop().values[0][0];const t=e.NextAnimation([[i,s]],i=>{let[s]=i;e=t,r(s)},l,h);c=t}else c=t(l,h)([[i,s]],t=>{let[e]=t;r(e)}),e=c;c.addEventListener("end",()=>{e=void 0}),o&&c.addEventListener("start",o),a&&c.addEventListener("end",a)}})(),this.Jk={},this.Qk={},this.Dk=this.getVisible(),this.Kk=1,this.qk=((t,e)=>{const i=Mr(()=>{});let s,r,n=1;return(o,a,h)=>{if(o===r)return;r=o;const l=(null==h?void 0:h.easing)||kr.ease,c=(null==h?void 0:h.durationMs)||1e3;s&&(s.finish(!1),s=void 0),!1===o?a&&n&&(s=i(c,l)([[n,0]],e=>{let[i]=e;n=i,t(n)}),s.addEventListener("end",()=>{s=void 0,e(!1)}),n=0,e(!1)):a?(e(!0),s=i(c,l)([[n,1]],e=>{let[i]=e;n=i,t(n)}),s.addEventListener("end",()=>{s=void 0})):(n=1,e(!0))}})(t=>{this.Kk=t,this.Ws.gi.Bs()},t=>{super.setVisible(t)}),this.tC=!1,this.L=new Ar,this.fs=t,this.Ws=e,this.x_=s,this.iC=r,this.Tm=n,this.sC=o,this.eC=a,this.scale=i,this.hC=In(l.spiderSeriesFillStyle,c),this.rC=In(l.spiderSeriesStrokeStyle,c),this.nC=In(l.spiderSeriesPointFillStyle,c)}oC(){return this.tC}Ji(t,e,i){const s=this.eC(e);if(void 0!==s&&this.Wk.has(s.tag)){const t=this.Wk.get(s.tag),e=this.sC(s.tag,t);return{cursorPosition:{pointMarker:e,pointMarkerScale:this.scale,resultTable:e,resultTableScale:this.scale},series:this,axis:s.tag,value:t}}}Av(){return this.Qg&&this.Wk.size>0&&this.getVisible()}addPoints(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];const s=0===this.Wk.size;s||this.fs.gi.ka(_l.Lo),e=e.filter(t=>void 0!==t.axis);for(let r=0;r<e.length;r+=1){const t=e[r].axis;this.iC(t)}if(this.fs.getAnimationsEnabled()&&void 0!==this.Jk){let t;e.forEach(t=>this.Xk.set(t.axis,t.value)),this.Zk(0,1,e=>{this.Xk.forEach((i,s)=>{const r=(null==t?void 0:t.get(s))||0;this.Wk.set(s,r+e*(i-r)),this.Ws.gi.Bs()})},{easing:this.Jk.easing,durationMs:this.Jk.durationMs,onStart:()=>{this.tC=s,t=new Map(this.Wk)},onCompleted:()=>{this.tC=!1}})}else for(let r=0;r<e.length;r+=1){const t=e[r].axis;this.Wk.set(t,e[r].value),this.Xk.set(t,e[r].value)}return this.Ws.Bs(),this}getValue(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.fs.getAxis(t))return e?this.Wk.get(t):this.Xk.get(t)}setAnimationAddPoints(t,e){return this.Jk=t?{easing:t,durationMs:e}:void 0,this.Ws.Bs(),this}setVisibleStateChangedAnimation(t,e){return this.Qk=t?{easing:t,durationMs:e}:void 0,this.Ws.Bs(),this}setFillStyle(t){return this.hC="function"==typeof t?t(this.hC):t,this.JS&&(this.JS.Ke(this.hC),this.Ws.Bs()),this}getFillStyle(){return this.hC}setStrokeStyle(t){return this.rC="function"==typeof t?t(this.rC):t,this.JS&&(this.JS.Qe(this.rC),this.Ws.Bs()),this}getStrokeStyle(){return this.rC}setPointFillStyle(t){return this.nC="function"==typeof t?t(this.nC):t,this.M_&&(this.M_.Id(this.nC),this.Ws.Bs()),this}getPointFillStyle(){return this.nC}setPointSize(t){return this.b_=t,this.M_&&this.M_.Nd(t),this}getPointSize(){return this.b_}getPointShape(){return this.x_}setPointRotation(t){return this.Sl=t,this.M_&&this.M_.Rd(t),this.Ws.Bs(),this}getPointRotation(){return this.Sl}th(){if(super.th(),!this.ci){const t=new Array(this.Tm.length);for(let e=0;e<this.Tm.length;e+=1){const i=this.Tm[e].getInterval().start,s=this.Wk.get(this.Tm[e].tag);t[e]=void 0!==s?this.sC(this.Tm[e].tag,i+this.Kk*(s-i)):this.sC(this.Tm[e].tag,i)}En(t),t.length>=3&&(this.JS||(this.JS=this.Ws.xu(this.scale,gc.Simple).Qe(this.rC).Ke(this.hC).Fi(this.getHighlight()),this._s(this.JS)),this.JS.rc(t),this.M_||(this.M_=this.Ws.Ld(this.scale).Pd(sa).dh(Lr).Nd(this.b_).Bd(this.x_).Rd(this.Sl).Id(this.nC).Fi(this.getHighlight()),this._s(this.M_)),this.M_.Fd(new Mc({schema:{x:{pattern:null},y:{pattern:null}}}).appendJSON(t),{x:"x",y:"y"}))}}sh(){return{fill:this.hC,stroke:this.rC}}js(){return this.Rs||this.x_}eh(t,e){return t.Fi(e),this.Ws.Bs(),this}setVisible(t){var e,i;return this.Dk=t,this.qk(t,this.fs.getAnimationsEnabled()&&void 0!==this.Qk,{easing:null===(e=this.Qk)||void 0===e?void 0:e.easing,durationMs:null===(i=this.Qk)||void 0===i?void 0:i.durationMs}),this}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}const Jp=(t,e)=>{const i=Math.PI/2-2*t*Math.PI/e;return i>=0?i:i+2*Math.PI},qp=t=>t.jk.fu(),Qp=t=>t.fu(),Kp=(t,e,i,s)=>t.qc(0).ih(i).Zc(90).Ah(-270).tu(e===Up.Circle?void 0:s.length),$p={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},ty={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},ey=()=>{ty.alignmentX=0,ty.alignmentY=0,ty.paddingX=0,ty.paddingY=0};class iy extends Hd{constructor(t,e,i,s,r,n,o){var a;super(t,e,i,e.Vg("spiderChart bg",0),s,e.gi.bi.spiderChartBackgroundFillStyle,e.gi.bi.spiderChartBackgroundStrokeStyle,e.gi.bi.spiderChartTitleFont,e.gi.bi.spiderChartTitleFillStyle,e.gi.bi.spiderChartTitleShadow,o,null===(a=null==n?void 0:n.legend)||void 0===a?void 0:a.customLegend),this.Tm=[],this.aC=[],this.lC=[],this.Nk=nl({start:!1}),this.cC=!0,this.uC=Wp,this.dC=jp,this.fC=Up.Normal,this.AC=4,this.gC=this.bi.spiderChartWebStyle,this.vC=this.bi.spiderChartScaleLabelFillStyle,this.yC=this.bi.spiderChartScaleLabelShadow,this.pC=this.bi.spiderChartScaleLabelFont,this.mC=5,this.SC=this.bi.spiderChartAxisLabelFillStyle,this.bC=this.bi.spiderChartAxisLabelFont,this.xC=5,this.MC=this.bi.spiderChartAxisStrokeStyle,this.wC=this.bi.spiderChartAxisNibStrokeStyle,this._C=10,this.kC=Ps(),this.hasAxis=t=>this.Tm.reduce((e,i)=>e||i.tag===t,!1),this.CC=()=>{const t=this.Tm.map(qp).concat(this.lC.map(Qp));return fo(t)},this.TC=()=>this.FC.md(this.Jf).setPointerEvents(!1),this.IC=t=>t.dispose(),this.PC=()=>this.zf.bn(this.Jf).setPointerEvents(!1),this.LC=t=>t.dispose(),this.BC=t=>{this.cC&&!this.hasAxis(t)&&this.addAxis(t)},this.sC=(t,e)=>{for(const i of this.Tm)if(i.tag===t){const t=Math.max(Math.min((e-i.axisScale.getInnerStart())/(i.axisScale.getInnerEnd()-i.axisScale.getInnerStart()),1),0);return xo(i.Yk.Ut(),i.Yk.Gt(),t)}},this.eC=t=>{if(0===this.Tm.length)return;const e=Do(this.translateCoordinate(t,this.coordsRelative),this.Tm[0].Yk.Ut()),i=Math.atan2(e.y,e.x);let s,r=ro;for(const n of this.Tm){const t=Do(n.Yk.Gt(),n.Yk.Ut()),e=Math.atan2(t.y,t.x),o=Math.abs(i-e);o<r&&(s=n,r=o)}return s},this.L=new Ar,this.gi.ka(_l.xo),this.jw=e.km("spiderChart series bg",0),this.FC=e.Cm("spiderChart web shapes",0),this.DC=e.Cm("spiderChart axis bg",1),this.rS=e.Cm("spiderChart plotting",2),this.zf=e.Cm("spiderChart fg",3),this.Uk=this.ys.iA().Ls(this.bi.effectsText),this.Yh.Jr("Spider Chart"),this.gy=this.jw.md(this.Jf).Ke(this.bi.spiderChartSeriesBackgroundFillStyle).Qe(Lr).Zc(90).Ah(-270).qc(0),this.vy=this.jw.md(this.Jf).Ke(sa).Qe(this.bi.spiderChartSeriesBackgroundStrokeStyle).Zc(90).Ah(-270).qc(0),super.Ay(this.gy,this.vy);const h=e.Dm(),c=$r(n?n.cursorBuilder:void 0,Af);this.Rm=ym(this,h,c.sm(h,this.uiScale,this.uiScale,Jr,this.bi),this,"show-pointed",sy,()=>0),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled)),this.zg(r,this.Jf);const u=l({backgroundVisible:!0},null==n?void 0:n.legend);this.legend.setOptions(u)}getSeries(){return this.ny}getAxes(){return this.Tm}getAxis(t){const e=this.Tm.find(e=>e.getTag()===t);if(!e)throw new Error('Axis with tag "'.concat(t,'" was not found.'));return e}setCursor(t){return this.Rm.setCursor(t),this}getCursor(){return this.Rm.getCursor()}setCursorMode(t){return this.Rm.setCursorMode(t),this}getCursorMode(){return this.Rm.getCursorMode()}setCustomCursor(t){return this.Rm.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.Rm.Ym(t),this}setCursorFormatting(t){return this.Rm.setCursorFormatting(t),this}getCursorFormatting(){return this.Rm.getCursorFormatting()}addCursor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Af;const e=this.Tg(),i=t.sm(e,this.uiScale,this.uiScale,this.wg(e),this.bi);return this.Eg(i),i}addAxis(t){const e=this.Tm.find(e=>e.tag===t);if(e)return e;const i=new Hp(this.DC,this.zf,this.Jf,this,t,this.Uk,this.RC,this.Nk,this.scaleLabelFormatter);return this.Tm.push(i),this.Uk.ks(this.Tm.map(t=>t.jk)),this.gi.Bs(),i}addSeries(t){const e=void 0!==(null==t?void 0:t.pointShape)?t.pointShape:La.Circle,i=void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ny.length,s=new Zp(this,this.rS,this.Jf,e,this.BC,this.Tm,this.sC,this.eC,this.ly,this.bi,i,this.gi.ys);return this.yy(s,t),s}getSeriesCount(){return this.ny.length}setWebMode(t){return this.fC=t,this.gi.Bs(),this}getWebMode(){return this.fC}setWebCount(t){return this.AC=t,this.gi.Bs(),this}getWebCount(){return this.AC}setWebStyle(t){return this.gC="function"==typeof t?t(this.gC):t,this.gi.Bs(),this}getWebStyle(){return this.gC}setScaleLabelStyle(t){return this.vC="function"==typeof t?t(this.vC):t,this.gi.Bs(),this}getScaleLabelStyle(){return this.vC}setScaleLabelShadow(t){return this.yC=t,this.gi.Bs(),this}getScaleLabelShadow(){return this.yC}setScaleLabelFont(t){return this.pC="function"==typeof t?t(this.pC):t,this.gi.Bs(),this}getScaleLabelFont(){return this.pC}setScaleLabelPadding(t){return this.mC=t,this.gi.Bs(),this}getScaleLabelPadding(){return this.mC}setScaleLabelStrategy(t){return this.uC=t,this.gi.Bs(),this}setScaleLabelFormatter(t){return this.scaleLabelFormatter=t,this.Tm.forEach(e=>{e.setScaleLabelFormatter(t)}),this.gi.Bs(),this}setAxisLabelStyle(t){return this.SC="function"==typeof t?t(this.SC):t,this.gi.Bs(),this}getAxisLabelStyle(){return this.SC}setAxisLabelFont(t){return this.bC="function"==typeof t?t(this.bC):t,this.gi.Bs(),this}getAxisLabelFont(){return this.bC}setAxisLabelEffect(t){return this.Uk.Ls(t),this.gi.Bs(),this}getAxisLabelEffect(){return this.Uk.Ds()}setAxisLabelPadding(t){return this.xC=t,this.gi.Bs(),this}getAxisLabelPadding(){return this.xC}setAxisLabelStrategy(t){return this.dC=t,this.gi.Bs(),this}setAxisStyle(t){return this.MC="function"==typeof t?t(this.MC):t,this.gi.Bs(),this}getAxisStyle(){return this.MC}setNibStyle(t){return this.wC="function"==typeof t?t(this.wC):t,this.gi.Bs(),this}getNibStyle(){return this.wC}setNibLength(t){return this._C=t,this.gi.Bs(),this}getNibLength(){return this._C}setAutoAxis(t){return this.cC=t,this}getAutoAxis(){return this.cC}setScrollStrategy(t){return this.Nk=bl(t),this.Tm.forEach(e=>e.setScrollStrategy(t)),this.gi.Bs(),this}setAxisInterval(t){return this.RC=t,this.Tm.forEach(e=>e.setInterval(t)),this}th(t){super.th(t);const e=this.Tm.length,i=Md.Wg(this.Yh,this.Ng),s=this.Os.reduce((t,e)=>{const s=e.Er(i,this.On);return{top:Math.max(t.top,s.top),bottom:Math.max(t.bottom,s.bottom),left:Math.max(t.left,s.left),right:Math.max(t.right,s.right)}},{top:0,bottom:0,left:0,right:0});Md.Xg(this.Yh,this.Ng,this.uiScale.ri(),this.On,s);const r=As(this.Jf.x.getInnerInterval()-(this.On.left+this.On.right),this.Jf.y.getInnerInterval()-(this.On.bottom+this.On.top+i)),n=As(r.x-s.left-s.right,r.y-s.top-s.bottom),o=function(){return{left:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,top:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,right:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,bottom:arguments.length>3&&void 0!==arguments[3]?arguments[3]:0}}(0,0,0,0);if(void 0!==this.dC){const t=Math.min(n.x,n.y)/2;for(let i=0;i<e;i+=1){const s=Jp(i,e),r=Math.cos(s),n=Math.sin(s),a=this.Tm[i].getLabelSize();ey();const h=this.dC(ty,i,e,this.Tm[i].tag,s,this.xC),l=As(r*t+h.paddingX,n*t+h.paddingY);r>0?o.right=Math.max(o.right,l.x+.5*(1-h.alignmentX)*a.x-t):o.left=Math.max(o.left,-l.x+.5*(h.alignmentX+1)*a.x-t),n>0?o.top=Math.max(o.top,l.y+.5*(1-h.alignmentY)*a.y-t):o.bottom=Math.max(o.bottom,-l.y+.5*(h.alignmentY+1)*a.y-t)}}this.Tm.forEach(t=>{const e=!this.getSeries().some(t=>t.oC())&&this.getSeriesCount()>1,i=this.EC(t.tag,e);i&&t.dn(i)});const a=As(this.Jf.x.getInnerStart()+this.On.left+s.left+n.x/2,this.Jf.y.getInnerStart()+this.On.bottom+s.bottom+n.y/2),h=Math.min(n.x/2-(o.left+o.right)/2,n.y/2-(o.bottom+o.top)/2);this.kC=Ps(this.nt.left+this.On.left+o.left,this.nt.top+this.On.top+i+o.top,this.nt.right+this.On.right+o.right,this.nt.bottom+this.On.bottom+o.bottom),this.Mk(a,h);for(const l of this.ny)l.rv();for(const l of this.ny)l.th();this.Rm.th(!1,this.ny,void 0),super.Og(),this.Os.forEach(t=>t.th(i,this.On));for(const l of this.ny)l.nv()}dispose(){return this.jw.N(),this.FC.N(),this.DC.N(),this.rS.N(),this.zf.N(),this.Rm.N(),super.dispose()}getMinimumSize(){return As(this.kC.left+this.kC.right+100,this.kC.bottom+this.kC.top+100)}Mk(t,e){const i=this.Tm.length,s=[];for(let r=0;r<i;r+=1){const n=Jp(r,i),o=As(t.x+Math.cos(n)*e,t.y+Math.sin(n)*e);s.push(o)}Kp(this.gy,this.fC,t,s),Kp(this.vy,this.fC,t,s),this.gy.Jc(e),this.vy.Jc(e),((t,e,i,s,r,n,o,a)=>{const h=t.length,l=n.length,c=e>0&&l>1;for(let u=0;u<Math.max(e,h);u+=1)if(c&&u<e){u>=h&&t.push(o());const a=t[u];Kp(a,i,s,n);const l=r*((u+1)/e);a.Jc(l)}else u<t.length&&a(t[u]);t.length=c?e:0})(this.aC,this.AC,this.fC,t,e,s,this.TC,this.IC);for(const r of this.aC)r.Ke(sa).Qe(this.gC);for(let r=0;r<i;r+=1){const n=this.Tm[r],o=Jp(r,i);ey();const a=void 0!==this.dC?this.dC(ty,r,i,this.Tm[r].tag,o,this.xC):void 0;n.Mk(t,s,r,o,e,this.fC,a)}((t,e,i,s,r,n,o,a,h)=>{const c=r.length,u=t.length;let d=0;void 0!==e&&r.forEach((r,h)=>{var f,g,p,y;const m=r.tag,v=Jp(h,c);for(let x=0;x<i;x+=1){$p.alignmentX=0,$p.alignmentY=0,$p.paddingX=0,$p.paddingY=0;const b=e(l(l({},$p),{},{chart:r.chart,axis:r,axisIndex:h,axisCount:c,axisTag:m,axisAngle:v,webIndex:x,webCount:i,labelPadding:s}));if(void 0!==b){d>=u&&t.push(a());const e=t[d];d+=1;const s=(i-x)/i,l=r.formatValue(r.axisScale.getInnerStart()+s*(r.axisScale.getInnerEnd()-r.axisScale.getInnerStart())),c=xo(n,o[h],s);e.ih(Lo(c,As(null!==(f=b.paddingX)&&void 0!==f?f:0,null!==(g=b.paddingY)&&void 0!==g?g:0))).Vl(null!==(p=b.alignmentX)&&void 0!==p?p:0).$l(null!==(y=b.alignmentY)&&void 0!==y?y:0).Jr(l)}}});for(let l=d;l<u;l+=1)h(t[l]);t.length=d})(this.lC,this.uC,this.AC,this.mC,this.Tm,t,s,this.PC,this.LC);for(const r of this.lC)r.Ke(this.vC).Mr(this.pC).Zr(this.yC)}EC(t,e){let i,s;const r=this.getAxis(t);for(const n of this.ny){const t=n.getValue(r.tag,e);void 0!==t&&(i=void 0===i?t:Math.min(i,t),s=void 0===s?t:Math.max(s,t))}if(void 0!==i&&void 0!==s)return Cs(i,s)}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}const sy=(t,e,i)=>dm(e,[[{component:e.series,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[e.axis],[{text:t.getAxis(e.axis).formatValue(e.value),font:{weight:"bold"}}]]),ry={Eh:!1,Oh:0,zh:!1,Nh:0,Vh:!1,Gh:0,$h:0,Lr:nl({})},ny=t=>{if(!t||"object"!=typeof t||null===t)return!1;const e=t.type;return!(!e||!["spark-line","spark-bar","spark-win-loss","spark-area","spark-pie"].includes(e))},oy=(t,e,i,s,r,n,o,a)=>{const{type:h,data:c}=t;if(0===c.length)return;const u=[s,r];"spark-line"===h&&py(t,e,u,n,o,a),"spark-bar"===h&&yy(l(l({},t),{},{winLoss:!1}),e,u,n,o,a),"spark-win-loss"===h&&yy(l(l({},t),{},{winLoss:!0}),e,u,n,o,a),"spark-area"===h&&my(t,e,u,n,o,a),"spark-pie"===h&&vy(t,e,u,n,o,a)},ay=(t,e,i,s)=>({x:ly(t.x,e.x,i.x,s),y:cy(t.y,e.y,i.y,s)}),hy=(t,e,i,s)=>({position:ly(t.position,e.x,i.x,s),high:cy(t.high,e.y,i.y,s),low:cy(t.low,e.y,i.y,s)}),ly=(t,e,i,s)=>{const r=Qr(t,e,e+i);return s[0].x+s[1].x*(r-e)/i},cy=(t,e,i,s)=>{const r=Qr(t,e,e+i);return s[0].y+s[1].y*(r-e)/i},uy=(t,e,i,s,r,n,o,a)=>{for(const h of t)"point"===h.type&&dy(h,e,i,r,n,o,a),"axis-band"===h.type&&fy(h,i,r,n,o,a),"constant-line"===h.type&&gy(h,i,s,r,n,o,a)},dy=(t,e,i,s,r,n,o)=>{const{value:a,fillStyle:h,shape:l,size:c,rotation:u}=t;let d={x:NaN,y:NaN};if("start"===a&&(d=e[0]),"end"===a&&(d=e[e.length-1]),"min"===a){d=e[0];for(const t of e)d=d.y<t.y?d:t}if("max"===a){d=e[0];for(const t of e)d=d.y>t.y?d:t}("object"!=typeof a||(d=ay(a,i,s,r),((t,e)=>{const i=e[0],s=e[1],r=t.x,n=t.y;return i.x<=r&&r<=i.x+s.x&&i.y<=n&&n<=i.y+s.y})(d,r)))&&n.pointSet.add().Bd(void 0!==l?l:La.Circle).Rd(u||0).Nd(c||5).Id(h||o.sparkPointChartFillStyle).Fd((new Mc).appendSample(d),{x:"x",y:"y"})},fy=(t,e,i,s,r,n)=>{const{axis:o,start:a,end:h,fillStyle:l,strokeStyle:c}=t;let u=As(no,ro),d=As(no,ro);"x"===o&&(u=ay({x:a,y:no},e,i,s),d=ay({x:h,y:ro},e,i,s)),"y"===o&&(u=ay({x:no,y:a},e,i,s),d=ay({x:ro,y:h},e,i,s));const f=s[0],g=s[1],p=Qr(u.x,f.x,f.x+g.x),y=Qr(u.y,f.y,f.y+g.y),m=Qr(d.x,f.x,f.x+g.x),v=Qr(d.y,f.y,f.y+g.y);r.rect.add().Zl(p).Jl(y).X(As(m-p,v-y)).Ke(l||n.sparkChartBandFillStyle).Qe(c||n.sparkChartBandStrokeStyle).Qe(Lr)},gy=(t,e,i,s,r,n,o)=>{const{axis:a,value:h,strokeStyle:l}=t,c=h||0,u=e.y,d=i.y,f=e.x,g=i.x,p=[];if("y"===a&&u<=c&&c<=d){const t=ay(As(f,c),{x:f,y:u},s,r),e=ay(As(g,c),{x:f,y:u},s,r);p.push([t,e])}if("x"===a&&f<=c&&c<=g){const t=ay(As(c,u),{x:f,y:u},s,r),e=ay(As(c,d),{x:f,y:u},s,r);p.push([t,e])}p.length>0&&n.line.add().dh(l||o.sparkChartConstantLineStrokeStyle).gh(p[0][0]).Ah(p[0][1])},py=(t,e,i,s,r,n)=>{const{strokeStyle:o,data:a,markers:h}=t,l=a.length;l>1e4&&r.Ia&&Ur.console.warn("LightningChart JS warning: SparkLineChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let c=ro,u=no,d=ro,f=no;for(let y=0;y<l;y+=1){const t=a[y];c=Math.min(c,t.x),u=Math.max(u,t.x),d=Math.min(d,t.y),f=Math.max(f,t.y)}const g={x:u-c,y:f-d},p=a.map(t=>ay(t,{x:c,y:d},g,i));e.lineSet.add().Fi(n).dh(o||s.sparkLineChartStrokeStyle).zi().Sc(p),h&&uy(h,p,{x:c,y:d},{x:u,y:f},g,i,e,s)},yy=(t,e,i,s,r,n)=>{const{data:o,fillStyle:a,strokeStyle:h,threshold:l,winFillStyle:c,lossFillStyle:u}=t,d=t.barSize||1,f=t.gap||1,g=t.winLoss,p=l||0,y=f/d*1;let m=ro,v=no;if(g)m=-1,v=1;else for(const S of o)m=Math.min(m,S),v=Math.max(v,S);const x={x:0,y:g?-1:Math.min(0,m)},b={x:1*o.length+(o.length-1)*y,y:g?2:Math.max(v,1e-5)};o.map((t,e)=>{const s={x:1*(e+1)+e*y,y:g?t>=p?1:0:t},r=ay({x:1*e+e*y,y:g?t>=p?0:-1:0},x,b,i),n=ay(s,x,b,i);return{value:t,position:r,width:n.x-r.x,height:n.y-r.y}}).forEach(t=>{var i;e.rect.add().Fi(n).ih(t.position).Kl(t.height).Ql(t.width).Ke((i=t.value,g?(i>=p?c:u)||s.sparkBarChartFillStyle:a||s.sparkBarChartFillStyle)).Qe(h||s.sparkBarChartStrokeStyle)})},my=(t,e,i,s,r,n)=>{const{data:o,fillStyle:a,strokeStyle:h,markers:l}=t,c=o.length;c>1e4&&r.Ia&&Ur.console.warn("LightningChart JS warning: SparkAreaChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let u=ro,d=no,f=ro,g=no;for(let v=0;v<c;v+=1){const t=o[v];u=Math.min(u,t.x),d=Math.max(d,t.x),f=Math.min(f,t.y),g=Math.max(g,t.y)}const p={x:d-u,y:g-f},y=[],m=[];for(const v of o){const t=ks(v.x,v.y,f);y.push(hy(t,{x:u,y:f},p,i)),m.push(ay(v,{x:u,y:f},p,i))}e.junction.add().Fi(n).zi().Sc(y).Ke(a||s.sparkAreaChartFillStyle),e.lineSet.add().Fi(n).zi().Sc(m).dh(h||s.sparkAreaChartStrokeStyle),l&&uy(l,m,{x:u,y:f},{x:d,y:g},p,i,e,s)},vy=(t,e,i,s,r,n)=>{const{data:o,strokeStyle:a}=t,h=o.map(t=>"number"==typeof t?t:t.value),l=o.map(t=>"object"==typeof t?t.fillStyle:void 0),c=h.reduce((t,e)=>t+e,0),u=ay(As(50,50),{x:0,y:0},{x:100,y:100},i),d=i[1],f=d.x<=d.y?d.x/2:d.y/2;let g=90;h.forEach((t,i)=>{const r=t/c*360;e.arc.add().Fi(n).ih(u).Jc(f).qc(0).Zc(g).Ah(g+r).Ke(l[i]||In(s.sparkPieChartFillStyle,i)).Qe(a||s.sparkPieChartStrokeStyle),g+=r})},xy=(t,e)=>{const i=(t=>{const e=Rs(0,0,0),i=Rs(255,255,255),s=new aa({color:t.uiStrokeColorContrastHigh}),r=new aa({color:t.uiStrokeColorContrastMedium}),n=new aa({color:t.uiStrokeColorContrastLow}),o=new Xa({family:t.fontFamily,weight:"normal",style:"normal"}),a=t.isDark?Rs(0,0,0,255):void 0,h=o.setSize(18*t.fontScaler),c=o.setSize(16*t.fontScaler),u=o.setSize(14*t.fontScaler),d=o.setSize(10*t.fontScaler),f=o.withMutations(e=>e.set("size",14*t.fontScaler).set("weight","bold")),g=o.setSize(13*t.fontScaler),p=new th({thickness:2,fillStyle:n}),y=new aa({color:t.dataHighlightOverlayColor}),m=new th({thickness:2,fillStyle:t.legendBackgroundBorderFillStyle}),v=t.dataColorPalette.map(t=>new aa({color:t.stroke})),x=t=>v[t%v.length],b=v.map(t=>new th({thickness:2,fillStyle:t})),S=t=>b[t%b.length],A=t.dataColorPalette.map(t=>new aa({color:t.border})).map(t=>new th({thickness:2,fillStyle:t})),E=t=>A[t%A.length],k=t.dataColorPalette.map(t=>{const e=t.area;return new Js({angle:0,stops:[{offset:0,color:e.setA(0)},{offset:.8,color:e}]})}),w=t=>k[t%k.length],M=t.dataColorPaletteInverted.map(t=>{const e=t.area;return new Js({angle:180,stops:[{offset:0,color:e.setA(0)},{offset:.8,color:e}]})}),C=t=>M[t%M.length],T=t.dataColorPalette.map(t=>{const e=t.area;return new Js({angle:180,stops:[{color:cr(e,Rs(255,255,255,e.getA()),.3),offset:0},{color:e,offset:.5},{color:cr(e,Rs(0,0,0,e.getA()),.3),offset:1}]})}),F=t=>T[t%T.length],P=t.dataColorPaletteInverted.map(t=>new aa({color:t.border})).map(t=>new th({thickness:2,fillStyle:t})),B=t=>P[t%P.length],L=new aa({color:t.dataColorPositive}),D=new aa({color:t.dataColorNegative}),z=new th({thickness:1,fillStyle:new aa({color:t.dataStrokeColorContrastHigh.setA(50)})}),I=new th({thickness:2,fillStyle:t.axisLineFillStyle}),R=new aa({color:Rs(0,0,0,1)}),_=new th({thickness:1,fillStyle:t.axisGridMajorFillStyle}),V=new th({thickness:1,fillStyle:t.axisTickMajorFillStyle}),N=u,O=t.axisLabelMajorFillStyle,Y=new th({thickness:1,fillStyle:t.axisGridMinorFillStyle}),G=new th({thickness:1,fillStyle:t.axisTickMinorFillStyle}),X=d,U=O,H=Cu,j=new wu({gridStrokeStyle:_,tickStyle:V,tickLength:7,tickPadding:5,labelFont:N,labelFillStyle:O,labelShadow:a}),W=new wu({gridStrokeStyle:Y,tickStyle:G,tickLength:4,tickPadding:10,labelFont:X,labelFillStyle:U,labelShadow:a}),Z=new od({extremeTickStyle:H,majorTickStyle:j,minorTickStyle:W.setLabelFillStyle(sa)}),J=new Ku({greatTickStyle:Cu,majorTickStyle:j,minorTickStyle:W}),q=J,Q=J,K=new Vu({majorTickStyle:j,minorTickStyle:W}),$=new aa({color:t.dataHighlightOverlayColor}),tt=new th({thickness:1,fillStyle:r}),et=new th({thickness:2,fillStyle:r}),it=t=>new Ka.Triangulated({shape:"sphere",size:10,fillStyle:v[t%v.length]}),st=v[0],rt=t.uiTextFillStyle,nt=t.legendBackgroundFillStyle,ot=new th({thickness:1,fillStyle:t.legendBackgroundBorderFillStyle}),at=Pn(t.legendButtonDefaultColor),ht=Pn(t.isDark?Rs(70,70,70,255):Rs(170,170,170,255)),lt=new aa({color:t.isDark?Rs(70,70,70,255):Rs(170,170,170,255)}),ct=new th({thickness:1,fillStyle:s}),ut=new rh({thickness:1,fillStyle:t.cursorGridFillStyle,pattern:ih.DashedEqual,patternScale:3}),dt=new th({thickness:1,fillStyle:t.cursorGridFillStyle}),ft=t.zoomBandChartDefocusOverlayFillStyle,gt=new th({thickness:2,fillStyle:new aa({color:t.zoomBandChartSplitterColor})}),pt=new aa({color:t.uiBackgroundColor}),yt=new th({thickness:1,fillStyle:new aa({color:t.isDark?i:e})});let mt={isDark:t.isDark,effect:t.effect,effectsText:t.effectsText,effectsDashboardSplitters:t.effectsDashboardSplitters,lcjsBackgroundFillStyle:t.lcjsBackgroundFillStyle,lcjsBackgroundStrokeStyle:Lr,highlightColorOffset:t.highlightColorOffset,highlightColorOffsetAxisOverlay:t.highlightColorOffsetAxisOverlay,dashboardSplitterStyle:new th({thickness:4,fillStyle:t.dashboardSplitterFillStyle}),panelPadding:7,chartXYBackgroundFillStyle:t.panelBackgroundFillStyle,chartXYBackgroundStrokeStyle:Lr,chartXYTitleFont:h,chartXYTitleFillStyle:t.titleFillStyle,chartXYTitleShadow:a,chartXYTitleMargin:5,chartXYSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chartXYSeriesBackgroundStrokeStyle:p,chartXYZoomingRectangleFillStyle:y,chartXYZoomingRectangleStrokeStyle:m,lineSeriesStrokeStyle:S,pointLineSeriesStrokeStyle:S,pointLineSeriesFillStyle:x,pointSeriesFillStyle:x,pointSeriesStrokeStyle:yt,ellipseSeriesFillStyle:x,ellipseSeriesStrokeStyle:S,polygonSeriesFillStyle:x,polygonSeriesStrokeStyle:S,rectangleSeriesFillStyle:x,rectangleSeriesStrokeStyle:Lr,segmentSeriesStrokeStyle:S,boxSeriesBodyFillStyle:x(0),boxSeriesBodyStrokeStyle:Lr,boxSeriesStrokeStyle:new th({thickness:1,fillStyle:v[0]}),boxSeriesMedianStrokeStyle:new th({thickness:1,fillStyle:new aa({color:e})}),ohlcCandleThicknessPixels:5,ohlcCandleBodyFillStylePositive:L,ohlcCandleBodyFillStyleNegative:D,ohlcCandleTailStrokeStylePositive:new th({thickness:1,fillStyle:new aa({color:t.uiStrokeColorContrastHigh})}),ohlcCandleTailStrokeStyleNegative:new th({thickness:1,fillStyle:new aa({color:t.uiStrokeColorContrastHigh})}),ohlcBarThicknessPixels:10,ohlcBarStrokeStylePositive:new th({thickness:2,fillStyle:L}),ohlcBarStrokeStyleNegative:new th({thickness:2,fillStyle:D}),heatmapGridSeriesFillStyle:x,heatmapGridSeriesWireframeStyle:z,heatmapScrollingGridSeriesFillStyle:x,heatmapScrollingGridSeriesWireframeStyle:z,areaRangeSeriesFillStyle:w,areaRangeSeriesStrokeStyle:E,areaRangeSeriesFillStyleInverted:C,areaRangeSeriesStrokeStyleInverted:B,areaSeriesBipolarHighFillStyle:w,areaSeriesBipolarHighStrokeStyle:E,areaSeriesBipolarLowFillStyle:C,areaSeriesBipolarLowStrokeStyle:B,areaSeriesPositiveFillStyle:w,areaSeriesPositiveStrokeStyle:E,areaSeriesNegativeFillStyle:C,areaSeriesNegativeStrokeStyle:B,xAxisTitleFont:c,xAxisTitleFillStyle:t.axisTitleFillStyle,xAxisStrokeStyle:I,xAxisOverlayStyle:R,xAxisZoomingBandFillStyle:y,xAxisZoomingBandStrokeStyle:Lr,xAxisNumericTicks:Z,xAxisDateTimeTicks:q,xAxisTimeTicks:K,yAxisTitleFont:c,yAxisTitleFillStyle:t.axisTitleFillStyle,yAxisStrokeStyle:I,yAxisOverlayStyle:R,yAxisZoomingBandFillStyle:y,yAxisZoomingBandStrokeStyle:Lr,yAxisNumericTicks:Z,yAxisDateTimeTicks:Q,yAxisTimeTicks:K,bandFillStyle:$,bandStrokeStyle:tt,constantLineStrokeStyle:et,barChartBackgroundFillStyle:t.panelBackgroundFillStyle,barChartBackgroundStrokeStyle:Lr,barChartTitleFont:h,barChartTitleFillStyle:t.titleFillStyle,barChartTitleShadow:a,barChartSeriesBackgroundFillStyle:sa,barChartSeriesBackgroundStrokeStyle:Lr,barChartBarFillStyle:x,barChartBarStrokeStyle:new th({thickness:1,fillStyle:n}),barChartValueAxisTitleFont:c,barChartValueAxisTitleFillStyle:t.axisTitleFillStyle,barChartValueAxisStrokeStyle:I,barChartValueAxisTicks:Z.setMajorTickStyle(t=>t.setGridStrokeStyle(Lr)).setMinorTickStyle(t=>t.setGridStrokeStyle(Lr)),barChartCategoryAxisTitleFont:c,barChartCategoryAxisTitleFillStyle:t.axisTitleFillStyle,barChartCategoryAxisStrokeStyle:I,barChartCategoryLabels:{formatter:(t,e)=>t,labelFillStyle:Z.majorTickStyle.labelFillStyle,labelFont:Z.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,tickStyle:Z.majorTickStyle.tickStyle,tickLength:0,labelShadow:a},barChartValueLabelsAfterBars:{position:"after-bar",formatter:t=>t.chart.valueAxis.formatValue(t.value),labelFillStyle:Z.majorTickStyle.labelFillStyle,labelFont:Z.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,displayStackedIndividuals:!1,displayStackedSum:!0,labelShadow:a},barChartValueLabelsInsideBars:{position:"inside-bar",formatter:t=>t.chart.valueAxis.formatValue(t.value),labelFillStyle:Z.majorTickStyle.labelFillStyle,labelFont:Z.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,displayStackedIndividuals:!1,displayStackedSum:!0,labelShadow:a},barChartCornerRadius:10,chart3DBackgroundFillStyle:t.panelBackgroundFillStyle,chart3DBackgroundStrokeStyle:Lr,chart3DTitleFont:h,chart3DTitleFillStyle:t.titleFillStyle,chart3DTitleShadow:a,chart3DSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chart3DSeriesBackgroundStrokeStyle:p,chart3DBoundingBoxStrokeStyle:Lr,xAxis3DTitleFont:c,xAxis3DTitleFillStyle:t.axisTitleFillStyle,xAxis3DStrokeStyle:I,xAxis3DNumericTicks:Z,xAxis3DDateTimeTicks:J,xAxis3DTimeTicks:K,yAxis3DTitleFont:c,yAxis3DTitleFillStyle:t.axisTitleFillStyle,yAxis3DStrokeStyle:I,yAxis3DNumericTicks:Z,yAxis3DDateTimeTicks:J,yAxis3DTimeTicks:K,zAxis3DTitleFont:c,zAxis3DTitleFillStyle:t.axisTitleFillStyle,zAxis3DStrokeStyle:I,zAxis3DNumericTicks:Z,zAxis3DDateTimeTicks:J,zAxis3DTimeTicks:K,lineSeries3DStrokeStyle:S,pointLineSeries3DStrokeStyle:S,pointLineSeries3DPointStyle:it,pointSeries3DPointStyle:it,pointCloudSeries3DPointStyle:t=>new Ka.Pixelated({size:5,fillStyle:v[t%v.length]}),surfaceGridSeries3DFillStyle:x,surfaceGridSeries3DWireframeStyle:z,surfaceScrollingGridSeries3DFillStyle:x,surfaceScrollingGridSeries3DWireframeStyle:z,boxSeries3DFillStyle:x,meshModel3DFillStyle:x(0),polarChartBackgroundFillStyle:t.panelBackgroundFillStyle,polarChartBackgroundStrokeStyle:Lr,polarChartTitleFont:h,polarChartTitleFillStyle:t.titleFillStyle,polarChartTitleShadow:a,polarChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,polarChartSeriesBackgroundStrokeStyle:p,polarSectorFillStyle:$,polarSectorStrokeStyle:tt,polarAmplitudeAxisTitleFont:c,polarAmplitudeAxisTitleFillStyle:t.axisTitleFillStyle,polarAmplitudeAxisTitleShadow:a,polarAmplitudeAxisStrokeStyle:I,polarAmplitudeAxisNumericTicks:Z,polarAmplitudeAxisDateTimeTicks:J,polarAmplitudeAxisTimeTicks:K,polarRadialAxisTitleFont:c,polarRadialAxisTitleFillStyle:t.axisTitleFillStyle,polarRadialAxisStrokeStyle:I,polarRadialAxisTickStyle:j.setTickPadding(10),polarRadialAxisMarginAfterTicks:0,polarLineSeriesStrokeStyle:S,polarPointLineSeriesFillStyle:x,polarPointLineSeriesStrokeStyle:S,polarPointSeriesFillStyle:x,polarPointSeriesStrokeStyle:yt,polarPolygonSeriesFillStyle:F,polarPolygonSeriesStrokeStyle:E,polarAreaSeriesFillStyle:F,polarAreaSeriesStrokeStyle:E,polarHeatmapSeriesFillStyle:x,mapChartBackgroundFillStyle:t.panelBackgroundFillStyle,mapChartBackgroundStrokeStyle:Lr,mapChartTitleFont:h,mapChartTitleFillStyle:t.titleFillStyle,mapChartTitleShadow:a,mapChartFillStyle:st,mapChartStrokeStyle:new th({thickness:1,fillStyle:new aa({color:t.dataStrokeColorContrastMedium})}),mapChartOutlierRegionFillStyle:sa,mapChartOutlierRegionStrokeStyle:new th({thickness:1,fillStyle:n}),mapChartSeparateRegionFillStyle:nt,mapChartSeparateRegionStrokeStyle:ot,dataGridBackgroundFillStyle:t.panelBackgroundFillStyle,dataGridBackgroundStrokeStyle:Lr,dataGridTitleFont:h,dataGridTitleFillStyle:t.titleFillStyle,dataGridTitleShadow:a,dataGridTextFont:u,dataGridTextFillStyle:st,dataGridCellBackgroundFillStyle:new aa({color:t.uiBackgroundColor}),dataGridBorderStrokeStyle:new th({thickness:.4,fillStyle:new aa({color:t.uiBackgroundBorderColor})}),dataGridScrollBarBackgroundFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarBackgroundStrokeStyle:Lr,dataGridScrollBarFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarStrokeStyle:ot,dataGridScrollBarButtonFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarButtonStrokeStyle:ot,dataGridScrollBarButtonArrowFillStyle:new aa({color:t.legendButtonDefaultColor}),dataGridScrollBarThickness:20,dataGridCellPadding:5,sparkLineChartStrokeStyle:S(0),sparkPointChartFillStyle:x(0),sparkBarChartFillStyle:x(0),sparkBarChartStrokeStyle:E(0),sparkAreaChartFillStyle:w(0),sparkAreaChartStrokeStyle:E(0),sparkPieChartFillStyle:x,sparkPieChartStrokeStyle:ot,sparkChartBandFillStyle:$,sparkChartBandStrokeStyle:tt,sparkChartConstantLineStrokeStyle:et,dataGridTextShadow:a,textSeriesShadow:a,spiderChartBackgroundFillStyle:t.panelBackgroundFillStyle,spiderChartBackgroundStrokeStyle:Lr,spiderChartTitleFont:h,spiderChartTitleFillStyle:t.titleFillStyle,spiderChartTitleShadow:a,spiderChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,spiderChartSeriesBackgroundStrokeStyle:p,spiderChartWebStyle:new th({thickness:2,fillStyle:n}),spiderChartScaleLabelFillStyle:t.axisLabelMajorFillStyle,spiderChartScaleLabelFont:u,spiderChartAxisLabelFillStyle:t.axisTitleFillStyle,spiderChartAxisLabelFont:c,spiderChartAxisStrokeStyle:new th({thickness:2,fillStyle:r}),spiderChartAxisNibStrokeStyle:new th({thickness:2,fillStyle:s}),spiderSeriesFillStyle:F,spiderSeriesStrokeStyle:E,spiderSeriesPointFillStyle:x,spiderChartScaleLabelShadow:a,pieChartBackgroundFillStyle:t.panelBackgroundFillStyle,pieChartBackgroundStrokeStyle:Lr,pieChartTitleFont:h,pieChartTitleFillStyle:t.titleFillStyle,pieChartTitleShadow:a,pieChartSliceFillStylePalette:x,pieChartSliceStrokeStyle:ot,pieChartSliceLabelFont:g,pieChartSliceLabelFillStyle:t.uiTextFillStyle,pieChartConnectorStrokeStyle:ct,pieChartSliceLabelShadow:a,funnelChartBackgroundFillStyle:t.panelBackgroundFillStyle,funnelChartBackgroundStrokeStyle:Lr,funnelChartTitleFont:h,funnelChartTitleFillStyle:t.titleFillStyle,funnelChartTitleShadow:a,funnelChartSliceFillStylePalette:x,funnelChartSliceStrokeStyle:ot,funnelChartSliceLabelFont:g,funnelChartSliceLabelFillStyle:t.uiTextFillStyle,funnelChartConnectorStrokeStyle:ct,funnelChartSliceLabelShadow:a,pyramidChartBackgroundFillStyle:t.panelBackgroundFillStyle,pyramidChartBackgroundStrokeStyle:Lr,pyramidChartTitleFont:h,pyramidChartTitleFillStyle:t.titleFillStyle,pyramidChartTitleShadow:a,pyramidChartSliceFillStylePalette:x,pyramidChartSliceStrokeStyle:ot,pyramidChartSliceLabelFont:g,pyramidChartSliceLabelFillStyle:t.uiTextFillStyle,pyramidChartConnectorStrokeStyle:ct,gaugeChartValueLabelFont:g.setSize(60),gaugeChartUnitLabelFont:g.setSize(40),gaugeChartTickFont:g.setSize(30),gaugeChartBarThickness:40,gaugeChartValueIndicatorThickness:10,gaugeChartRoundedEdges:!0,gaugeChartNeedleLength:40,gaugeChartStartAngle:225,gaugeChartEndAngle:-45,gaugeChartNeedleAlignment:0,gaugeChartGapBetweenBarAndValueIndicators:10,gaugeChartTickFillStyle:t.uiTextFillStyle,gaugeChartBarGradient:!0,gaugeChartBarStrokeStyle:Lr,gaugeChartUnitLabelFillStyle:t.uiTextFillStyle,gaugeChartValueLabelFillStyle:t.uiTextFillStyle,gaugeChartBarColor:i,gaugeChartGlowColor:Rs(255,255,64),gaugeChartNeedleFillStyle:new aa({color:i}),gaugeChartNeedleThickness:10,gaugeChartNeedleStrokeStyle:new th({thickness:2,fillStyle:new aa({color:e})}),pyramidChartSliceLabelShadow:a,gaugeChartBackgroundFillStyle:t.panelBackgroundFillStyle,gaugeChartBackgroundStrokeStyle:Lr,gaugeChartTitleFont:h,gaugeChartTitleFillStyle:t.titleFillStyle,gaugeChartTitleShadow:a,treeMapChartBackgroundFillStyle:t.panelBackgroundFillStyle,treeMapChartBackgroundStrokeStyle:Lr,treeMapChartParentColor:t.treeMapChartParentColor,treeMapChartNodeColors:t.treeMapChartNodeColors,treeMapChartNodeStrokeStyle:new th({thickness:1,fillStyle:new aa({color:_s("000")})}),treeMapChartTitleFillStyle:t.titleFillStyle,treeMapChartTitleShadow:a,treeMapChartTitleFont:h,treeMapChartPathLabelFillStyle:rt,treeMapChartPathLabelFont:g,treeMapChartLabelHeaderFillStyle:t.treeMapChartLabelHeaderFillStyle,treeMapChartLabelHeaderFont:h,treeMapChartLabelFillStyle:t.treeMapChartLabelFillStyle,treeMapChartLabelFont:g,treeMapChartCornerRadius:8,uiPanelBackgroundFillStyle:t.panelBackgroundFillStyle,uiPanelBackgroundStrokeStyle:Lr,zoomBandChartDefocusOverlayFillStyle:ft,zoomBandChartSplitterStrokeStyle:gt,zoomBandChartKnobFillStyle:t.zoomBandChartKnobFillStyle,zoomBandChartKnobSize:t.zoomBandChartKnobSize,onScreenMenuBackgroundColor:Rs(254,204,0,.7),parallelCoordinateChartBackgroundFillStyle:t.panelBackgroundFillStyle,parallelCoordinateChartBackgroundStrokeStyle:Lr,parallelCoordinateChartTitleFont:h,parallelCoordinateChartTitleFillStyle:t.titleFillStyle,parallelCoordinateChartTitleShadow:a,parallelCoordinateChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,parallelCoordinateChartSeriesBackgroundStrokeStyle:p,parallelCoordinateChartSeriesColor:e=>t.dataColorPalette[e%t.dataColorPalette.length].stroke,parallelCoordinateChartSeriesColorUnselected:t.dataColorUnselected,parallelCoordinateChartSeriesLineThickness:2,parallelCoordinateChartPointedSeriesLineStyle:b[0],parallelCoordinateAxisTitleFont:c,parallelCoordinateAxisTitleFillStyle:t.axisTitleFillStyle,parallelCoordinateAxisNumericTicks:Z,parallelCoordinateAxisDateTimeTicks:J,parallelCoordinateAxisTimeTicks:K,parallelCoordinateAxisStrokeStyle:I,parallelCoordinateAxisRangeSelectorFillStyle:t.seriesBackgroundFillStyle,parallelCoordinateAxisRangeSelectorStrokeStyle:ot,parallelCoordinateAxisBackgroundFillStyle:new Js({angle:90,stops:[{offset:0,color:t.isDark?Rs(0,0,0,0):Rs(255,255,255,0)},{offset:1,color:t.isDark?Rs(0,0,0,255):Rs(255,255,255,180)}]}),uiButtonFillStyle:at,uiButtonFillStyleHidden:ht,uiButtonStrokeStyle:t.isDark?Lr:new th({thickness:1,fillStyle:new aa({color:e})}),uiButtonSize:10,uiBackgroundFillStyle:nt,uiBackgroundStrokeStyle:ot,uiTextFillStyle:rt,uiTextFillStyleHidden:lt,uiTextFont:g,uiTextPadding:5,legendTitleFillStyle:rt,legendTitleFont:f,legendBorderRadius:5,legendPadding:5,legendLUTLabelMargin:7,legendLUTUnitLabelMargin:7,legendLUTCornerRadius:5,legendLUTLengthHorizontal:160,legendLUTThicknessHorizontal:15,legendLUTLengthVertical:140,legendLUTThicknessVertical:25,cursorTickMarkerXBackgroundFillStyle:nt,cursorTickMarkerXBackgroundStrokeStyle:ot,cursorTickMarkerXTextFillStyle:rt,cursorTickMarkerXTextFont:g,cursorTickMarkerYBackgroundFillStyle:nt,cursorTickMarkerYBackgroundStrokeStyle:ot,cursorTickMarkerYTextFillStyle:rt,cursorTickMarkerYTextFont:g,cursorPointMarkerSize:{x:9,y:9},cursorPointMarkerShape:La.Circle,cursorPointMarkerFillStyle:ut.getFillStyle(),cursorPointMarkerStrokeStyle:Lr,cursorDynamicBehavior:{pointMarkerFill:s=>new aa({color:cr(s,t.isDark?e:i,.2,230)}),pointMarkerStroke:s=>new th({thickness:2,fillStyle:new aa({color:cr(s,t.isDark?i:e,t.isDark?.8:.6,204)})}),pointMarkerSize:t=>({x:t+3,y:t+3})},cursorResultTableFillStyle:t.resultTableBackgroundFillStyle,cursorResultTableStrokeStyle:new th({thickness:1,fillStyle:t.resultTableBackgroundBorderFillStyle}),cursorResultTableTextFillStyle:rt,cursorResultTableTextFont:g,cursorResultTableHeaderBackgroundFillStyle:t.resultTableHeaderBackgroundFillStyle,cursorResultTableBorderRadius:5,cursorGridStrokeStyleX:ut,cursorGridStrokeStyleY:ut,cursor3DGridStrokeStyleX:dt,cursor3DGridStrokeStyleY:dt,cursor3DGridStrokeStyleZ:dt,cursor3DTickStrokeStyleX:j.tickStyle,cursor3DTickStrokeStyleY:j.tickStyle,cursor3DTickStrokeStyleZ:j.tickStyle,cursor3DTickLabelFillStyleX:rt,cursor3DTickLabelFillStyleY:rt,cursor3DTickLabelFillStyleZ:rt,cursor3DTickLabelFontX:g,cursor3DTickLabelFontY:g,cursor3DTickLabelFontZ:g,cursor3DTickLabelBackgroundFillStyleX:pt,cursor3DTickLabelBackgroundFillStyleY:pt,cursor3DTickLabelBackgroundFillStyleZ:pt,cursor3DTickLabelBackgroundStrokeStyleX:ot,cursor3DTickLabelBackgroundStrokeStyleY:ot,cursor3DTickLabelBackgroundStrokeStyleZ:ot,cursor3DTickLabelPaddingX:{left:4,right:4,top:4,bottom:4},cursor3DTickLabelPaddingY:{left:4,right:4,top:4,bottom:4},cursor3DTickLabelPaddingZ:{left:4,right:4,top:4,bottom:4}};return t.overrideThemeProperties&&(mt=l(l({},mt),t.overrideThemeProperties)),mt})(t),s=l(l({},e),{},{header1Font:i.xAxisTitleFont,header2Font:i.xAxisNumericTicks.getMajorTickStyle().labelFont,header3Font:i.uiTextFont,mainDataColor:t.dataColorPalette[0].stroke});return l(l({},i),{},{examples:s})},by="Segoe UI, -apple-system, Verdana, Helvetica",Sy=(t,e)=>{const i=new Image;i.crossOrigin="*";const s="".concat(t,"/").concat(e);return i.src=s,i},Ay=(t,e,i)=>s=>{const r=!0===t?e[s%e.length].stroke:cr(e[s%e.length].stroke,Rs(255,255,255),.5);return new js({stops:[{color:cr(r,Rs(255,255,255),.5*i).setA(100),offset:0},{color:r.setA(100),offset:.5},{color:cr(r,Rs(30,30,30),.5*i).setA(100),offset:1}]})},Ey=(t,e,i)=>s=>{const r=!0===t?e[s%e.length].stroke:cr(e[s%e.length].stroke,Rs(255,255,255),.2);return new js({stops:[{color:cr(r,Rs(255,255,255),.2*i),offset:0},{color:r,offset:.5},{color:cr(r,Rs(0,0,0),.2*i),offset:1}]})},ky=(t,e,i)=>s=>{const r=!0===t?e[s%e.length].stroke:cr(e[s%e.length].stroke,Rs(255,255,255),.2);return new Js({angle:90,stops:[{color:cr(r,Rs(255,255,255),.5*i),offset:0},{color:r,offset:.35},{color:cr(r,Rs(30,30,30),.5*i),offset:1}]})},wy=(t,e,i)=>(()=>{const i=new Map;return s=>{const r=i.get(s);if(r)return r;const n=(i=>{const s=!0===t?e[i%e.length].stroke:cr(e[i%e.length].stroke,Rs(255,255,255),.3);return new Js({angle:90,stops:[{color:cr(s,Rs(255,255,255),.5),offset:0},{color:s,offset:.35},{color:cr(s,Rs(30,30,30),.5),offset:1}]})})(s);return i.set(s,n),n}})(),My=Xn(()=>{const t=Rs(255,255,255),e=new aa({color:t}),i=!0,s=new ch({spread:1,blur:9,offset:{x:0,y:0},color:Rs(0,0,0,150)}),r=new js({position:{x:.8,y:.8},extent:Xs.farthestCorner,shape:Gs.ellipse,stops:[{offset:0,color:Rs(50,51,52)},{offset:.5,color:Rs(14,15,16)},{offset:1,color:Rs(0,0,0)}]}),n=new aa({color:Rs(45,45,45)}),o=new js({position:{x:.5,y:.5},extent:Xs.farthestCorner,shape:Gs.circle,stops:[{offset:0,color:Rs(120,120,120,100)},{offset:1,color:Rs(0,0,0,50)}]}),a=new js({position:{x:.5,y:.5},extent:Xs.farthestCorner,shape:Gs.circle,stops:[{offset:0,color:Rs(30,30,30,200)},{offset:1,color:Rs(0,0,0,255)}]}),h=by,l=new aa({color:Rs(255,255,220)}),c=new aa({color:Rs(255,255,166)}),u=new aa({color:Rs(255,255,220)}),d=new aa({color:Rs(255,255,200)}),f=d,g=f,p=new Js({angle:45,stops:[{offset:0,color:Rs(230,230,230)},{offset:1,color:Rs(150,150,150)}]}),y=new aa({color:Rs(220,220,220)}),m=new aa({color:Rs(200,200,200,50)}),v=new aa({color:Rs(200,200,200,150)}),x=new aa({color:Rs(200,200,200,20)}),b=new aa({color:Rs(220,220,220)}),S=new Js({angle:0,stops:[{offset:0,color:Rs(10,10,10,220)},{offset:1,color:Rs(30,30,30,220)}]}),A=e,E=Rs(255,255,200),k=new aa({color:Rs(0,0,0,224)}),w=new aa({color:Rs(166,166,166)}),M=new aa({color:Rs(49,53,58)}),C=Rs(20,20,20),T=Rs(0,0,0),F=t,P=Rs(150,150,150),B=Rs(50,50,50),L=Rs(50,50,50),D=Rs(100,100,100),z=Rs(200,200,200),I=[Rs(255,255,91,255),Rs(255,205,91,255),Rs(255,155,91,255),Rs(255,196,188,255),Rs(255,148,184,255),Rs(219,148,198,255),Rs(235,196,224,255),Rs(169,148,198,255),Rs(148,226,198,255),Rs(148,255,176,255),Rs(180,255,165,255)].map(t=>({stroke:t,border:t,area:t.setA(180)})),R=t.setA(20),_=Rs(176,255,157,255),V=Rs(255,112,76,255),N={mapChartFillStyle:new Js({angle:135,stops:[{color:Rs(255,255,91,255),offset:0},{color:Rs(255,155,91,255),offset:1}]}),spiderSeriesFillStyle:Ay(i,I,.5),pieChartSliceFillStylePalette:Ey(i,I,1),funnelChartSliceFillStylePalette:ky(i,I,1),pyramidChartSliceFillStylePalette:ky(i,I,1),rectangleSeriesFillStyle:wy(i,I),gaugeChartBarColor:Rs(255,255,91,255),gaugeChartGlowColor:Rs(255,255,91,64)},O=new aa({color:Rs(176,255,157,255)}),Y=new aa({color:Rs(255,146,146,255)}),G=new aa({color:Rs(176,255,157,255)}),X=new aa({color:Rs(230,63,63,255)}),U=new aa({color:Rs(176,255,157,120)}),H=new aa({color:Rs(229,63,63,180)}),j=new aa({color:Rs(27,37,36,255)}),W=new aa({color:Rs(62,27,27,255)}),Z=[Rs(255,0,0),Rs(255,255,0),Rs(0,255,0)],J=[Rs(10,10,255),Rs(10,190,255),Rs(251,255,0),Rs(255,38,0)],q=[Rs(255,255,0),Rs(255,204,0),Rs(255,128,0),Rs(255,0,0)],Q=[Rs(0,0,0),Rs(167,4,69,255),Rs(255,0,0),Rs(252,252,168,255)],K=new js({stops:[{color:Rs(61,61,80,100),offset:0},{color:Rs(44,44,55,30),offset:1}]}),$=new aa({color:Rs(148,148,198,255)}),tt=U.getColor().setA(255),et=Rs(100,100,100),it=[Rs(255,241,149,200),Rs(255,230,65,200),Rs(238,211,32,200),Rs(238,176,32,200),Rs(255,159,13,200),Rs(254,120,37,200),Rs(253,91,56,200),Rs(253,75,84,200),Rs(254,95,124,200),Rs(227,56,160,200),Rs(226,53,134,200),Rs(216,90,166,200),Rs(254,151,206,200),Rs(237,151,254,200),Rs(243,177,255,200),Rs(233,133,252,200),Rs(210,101,230,200),Rs(178,61,200,200),Rs(193,81,156,200),Rs(217,95,145,200)];return xy({isDark:i,highlightColorOffset:Rs(60,60,60,60),highlightColorOffsetAxisOverlay:Rs(255,255,255,40),effect:s,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:r,dashboardSplitterFillStyle:n,panelBackgroundFillStyle:o,seriesBackgroundFillStyle:a,fontFamily:h,fontScaler:1,titleFillStyle:l,axisTitleFillStyle:c,axisLabelMajorFillStyle:u,uiTitleFillStyle:d,uiTextFillStyle:f,cursorTextFillStyle:g,axisLineFillStyle:p,axisTickMajorFillStyle:y,axisGridMajorFillStyle:m,axisTickMinorFillStyle:v,axisGridMinorFillStyle:x,cursorGridFillStyle:b,legendBackgroundFillStyle:S,legendBackgroundBorderFillStyle:A,legendButtonDefaultColor:E,resultTableBackgroundFillStyle:k,resultTableBackgroundBorderFillStyle:w,resultTableHeaderBackgroundFillStyle:M,uiBackgroundColor:C,uiBackgroundBorderColor:T,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:P,uiStrokeColorContrastLow:B,dataStrokeColorContrastHigh:L,dataStrokeColorContrastMedium:D,dataStrokeColorContrastLow:z,dataColorPalette:I,dataColorPaletteInverted:[{area:Rs(190,50,50,100),border:Rs(210,80,80)}],dataHighlightOverlayColor:R,dataColorPositive:_,dataColorNegative:V,zoomBandChartDefocusOverlayFillStyle:new aa({color:Rs(0,0,0,180)}),zoomBandChartSplitterColor:Rs(251,251,90),zoomBandChartKnobFillStyle:t=>new Fr({source:Sy(t,"zoomBandChart/darkgold-selector.png"),fitMode:Cr.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:Rs(255,255,255,24),overrideThemeProperties:N,treeMapChartParentColor:Rs(24,30,33),treeMapChartNodeColors:it,treeMapChartLabelFillStyle:new aa({color:Rs(33,33,33)}),treeMapChartLabelHeaderFillStyle:new aa({color:Rs(250,250,250)})},{positiveTextFillStyle:O,negativeTextFillStyle:Y,positiveFillStyle:G,negativeFillStyle:X,positiveAreaFillStyle:U,negativeAreaFillStyle:H,positiveBackgroundFillStyle:j,negativeBackgroundFillStyle:W,badGoodColorPalette:Z,coldHotColorPalette:J,intensityColorPalette:q,spectrogramColorPalette:Q,bollingerFillStyle:K,bollingerBorderFillStyle:$,highlightPointColor:t,highlightDataGridColor:tt,unfocusedDataColor:et})}),Cy=Xn(()=>{const t=Rs(255,255,255),e=new aa({color:t}),i=!0,s=new ch({spread:0,blur:9,offset:{x:0,y:0},color:Rs(105,255,236,40)}),r=new aa({color:Rs(2,21,30)}),n=new js({stops:[{color:Rs(19,40,66,150),offset:0},{color:Rs(0,0,0,150),offset:1}]}),o=new aa({color:Rs(0,5,8,150)}),a=by,h=e,l=e,c=e,u=e,d=e,f=d,g=new aa({color:Rs(20,224,250,255)}),p=e,y=new aa({color:Rs(61,94,110,100)}),m=new aa({color:Rs(61,94,110,255)}),v=new aa({color:Rs(61,94,110,40)}),x=e,b=new aa({color:Rs(0,18,23,255)}),S=e,A=t,E=new aa({color:Rs(0,0,0,225)}),k=e,w=new aa({color:Rs(18,66,75)}),M=Rs(0,38,48,220),C=Rs(0,0,0),T=t,F=Rs(150,150,150),P=Rs(19,78,93),B=Rs(50,50,50),L=Rs(0,36,48),D=Rs(200,200,200),z=[Rs(45,253,253,255),Rs(44,172,247,255),Rs(46,100,248,255),Rs(96,84,199,255),Rs(184,104,245,255),Rs(98,160,218,255),Rs(43,238,245,255),Rs(38,140,206,255),Rs(112,96,224,255),Rs(206,157,255,255)].map(t=>({stroke:t,border:t,area:t.setA(180)})),I=t.setA(50),R=Rs(3,217,194,255),_=Rs(230,63,63,255),V={mapChartFillStyle:new Js({angle:135,stops:[{color:Rs(118,248,231,255),offset:0},{color:Rs(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:Ay(i,z,1),pieChartSliceFillStylePalette:Ey(i,z,1),funnelChartSliceFillStylePalette:ky(i,z,1),pyramidChartSliceFillStylePalette:ky(i,z,1),rectangleSeriesFillStyle:wy(i,z),gaugeChartBarColor:Rs(3,217,194,255),gaugeChartGlowColor:Rs(3,217,194,120)},N=new aa({color:Rs(45,253,253,255)}),O=new aa({color:Rs(255,146,146,255)}),Y=new aa({color:Rs(45,253,253,255)}),G=new aa({color:Rs(230,63,63,255)}),X=new aa({color:Rs(1,190,164,120)}),U=new aa({color:Rs(229,63,63,180)}),H=new aa({color:Rs(1,53,57,255)}),j=new aa({color:Rs(62,27,27,255)}),W=[Rs(1,104,119,255),Rs(0,165,144,255),Rs(0,246,214,255)],Z=[Rs(0,87,95,255),Rs(0,125,124,255),Rs(1,209,182,255),Rs(0,255,221,255),Rs(218,112,112,255),Rs(172,47,47,255)],J=[Rs(126,255,253,255),Rs(50,233,230,255),Rs(0,196,193,255),Rs(62,138,178,255),Rs(139,88,191,255),Rs(162,55,143,255)],q=[Rs(13,31,52,255),Rs(101,50,118,255),Rs(1,142,172,255),Rs(2,196,170,255),Rs(0,255,221,255)],Q=new js({stops:[{color:Rs(122,103,254,70),offset:0},{color:Rs(178,168,255,10),offset:1}]}),K=new aa({color:Rs(122,103,254,255)}),$=X.getColor().setA(255),tt=Rs(15,83,83),et=[Rs(139,252,252,150),Rs(60,239,239,150),Rs(2,201,201,150),Rs(26,159,159,150),Rs(15,146,187,150),Rs(65,168,200,150),Rs(67,146,207,150),Rs(64,108,209,150),Rs(189,64,233,150),Rs(219,84,238,150),Rs(192,55,212,150),Rs(212,98,229,150),Rs(248,110,211,150),Rs(251,154,225,150),Rs(251,154,184,150),Rs(233,105,144,150),Rs(255,133,170,150),Rs(249,110,135,150),Rs(245,72,101,150),Rs(210,57,84,150)];return xy({isDark:i,highlightColorOffset:Rs(60,60,60,60),highlightColorOffsetAxisOverlay:Rs(255,255,255,40),effect:s,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new Fr({source:Sy(t,"themes/turquoiseHexagon.jpg"),fitMode:Cr.Fill}),dashboardSplitterFillStyle:r,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:o,fontFamily:a,fontScaler:1,titleFillStyle:h,axisTitleFillStyle:l,axisLabelMajorFillStyle:c,uiTitleFillStyle:u,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:g,axisTickMajorFillStyle:p,axisGridMajorFillStyle:y,axisTickMinorFillStyle:m,axisGridMinorFillStyle:v,cursorGridFillStyle:x,legendBackgroundFillStyle:b,legendBackgroundBorderFillStyle:S,legendButtonDefaultColor:A,resultTableBackgroundFillStyle:E,resultTableBackgroundBorderFillStyle:k,resultTableHeaderBackgroundFillStyle:w,uiBackgroundColor:M,uiBackgroundBorderColor:C,uiStrokeColorContrastHigh:T,uiStrokeColorContrastMedium:F,uiStrokeColorContrastLow:P,dataStrokeColorContrastHigh:B,dataStrokeColorContrastMedium:L,dataStrokeColorContrastLow:D,dataColorPalette:z,dataColorPaletteInverted:[{area:Rs(170,60,210,100),border:Rs(210,100,250)}],dataHighlightOverlayColor:I,dataColorPositive:R,dataColorNegative:_,zoomBandChartDefocusOverlayFillStyle:new aa({color:Rs(0,0,0,180)}),zoomBandChartSplitterColor:Rs(43,244,244),zoomBandChartKnobFillStyle:t=>new Fr({source:Sy(t,"zoomBandChart/turquoise-selector.png"),fitMode:Cr.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:Rs(255,255,255,24),overrideThemeProperties:V,treeMapChartParentColor:Rs(0,35,41),treeMapChartNodeColors:et,treeMapChartLabelFillStyle:new aa({color:Rs(33,33,33)}),treeMapChartLabelHeaderFillStyle:new aa({color:Rs(250,250,250)})},{positiveTextFillStyle:N,negativeTextFillStyle:O,positiveFillStyle:Y,negativeFillStyle:G,positiveAreaFillStyle:X,negativeAreaFillStyle:U,positiveBackgroundFillStyle:H,negativeBackgroundFillStyle:j,badGoodColorPalette:W,coldHotColorPalette:Z,intensityColorPalette:J,spectrogramColorPalette:q,bollingerFillStyle:Q,bollingerBorderFillStyle:K,highlightPointColor:t,highlightDataGridColor:$,unfocusedDataColor:tt})}),Ty=Xn(()=>{const t=!1,e=new ch({spread:0,blur:6,offset:{x:2,y:-2},color:Rs(0,0,0,30)}),i=new js({position:{x:.8,y:.8},extent:Xs.farthestCorner,shape:Gs.ellipse,stops:[{offset:0,color:Rs(255,255,255)},{offset:1,color:Rs(255,255,255)}]}),s=new aa({color:Rs(219,227,233,255)}),r=new js({position:{x:.5,y:.5},extent:Xs.farthestCorner,shape:Gs.circle,stops:[{offset:0,color:Rs(255,255,255,200)},{offset:1,color:Rs(240,244,246,200)}]}),n=new js({position:{x:.5,y:.5},extent:Xs.farthestCorner,shape:Gs.circle,stops:[{offset:0,color:Rs(255,255,255,255)},{offset:1,color:Rs(255,255,255,255)}]}),o=by,a=new aa({color:Rs(33,43,49)}),h=new aa({color:Rs(33,43,49)}),l=new aa({color:Rs(33,43,49)}),c=new aa({color:Rs(33,43,49)}),u=c,d=u,f=new Js({angle:45,stops:[{offset:0,color:Rs(225,225,225)},{offset:1,color:Rs(225,225,225)}]}),g=new aa({color:Rs(150,150,150,255)}),p=new aa({color:Rs(150,150,150,170)}),y=new aa({color:Rs(150,150,150,150)}),m=new aa({color:Rs(150,150,150,100)}),v=new aa({color:Rs(60,70,80)}),x=new Js({angle:0,stops:[{offset:0,color:Rs(255,255,255,240)},{offset:1,color:Rs(255,255,255,240)}]}),b=new aa({color:Rs(168,186,199)}),S=Rs(150,150,150),A=new aa({color:Rs(255,255,255,230)}),E=new aa({color:Rs(168,186,199)}),k=new aa({color:Rs(228,235,243)}),w=Rs(255,255,255,255),M=Rs(168,168,199,255),C=Rs(168,186,199,255),T=Rs(168,186,199,255),F=Rs(168,186,199,255),P=Rs(168,186,199,255),B=Rs(100,100,100),L=Rs(200,200,200),D=[Rs(28,181,140,255),Rs(255,132,0,255),Rs(240,39,39,255),Rs(86,121,251,255),Rs(2,181,213,255),Rs(13,212,158,255),Rs(22,167,3,255),Rs(234,103,232,255),Rs(62,183,179,255),Rs(140,93,3,255),Rs(155,158,186,255)].map(t=>({stroke:t,border:t,area:t.setA(180)})),z=Rs(150,150,150,80),I=Rs(46,182,120,255),R=Rs(255,66,66,255),_=new th({thickness:2,fillStyle:new aa({color:Rs(168,186,199,255)})}),V={mapChartFillStyle:new Js({angle:-45,stops:[{color:Rs(2,181,213,255),offset:0},{color:Rs(175,243,255,255),offset:1}]}),spiderSeriesFillStyle:Ay(t,D,.8),pieChartSliceFillStylePalette:Ey(t,D,.8),funnelChartSliceFillStylePalette:ky(t,D,.5),pyramidChartSliceFillStylePalette:ky(t,D,.5),rectangleSeriesFillStyle:wy(t,D),gaugeChartBarColor:Rs(46,182,120,255),gaugeChartGlowColor:Rs(46,182,120,120),chartXYSeriesBackgroundStrokeStyle:_,chart3DSeriesBackgroundStrokeStyle:_,polarChartSeriesBackgroundStrokeStyle:_,spiderChartSeriesBackgroundStrokeStyle:_,dataGridTextFillStyle:new aa({color:Rs(0,88,64,255)})},N=new aa({color:Rs(4,146,108,255)}),O=new aa({color:Rs(240,39,39,255)}),Y=new aa({color:Rs(28,181,140,255)}),G=new aa({color:Rs(230,88,88,255)}),X=new aa({color:Rs(28,181,140,180)}),U=new aa({color:Rs(230,88,88,180)}),H=new aa({color:Rs(229,243,228)}),j=new aa({color:Rs(232,225,216)}),W=[Rs(193,48,48,255),Rs(240,234,60,255),Rs(45,191,55,255)],Z=[Rs(10,19,255,255),Rs(15,191,250,255),Rs(249,255,2,255),Rs(253,133,0,255),Rs(255,24,0,255)],J=[Rs(50,99,213),Rs(8,179,77),Rs(255,246,0),Rs(255,126,0),Rs(189,36,30)],q=[Rs(16,64,176),Rs(8,179,77),Rs(255,246,0),Rs(255,126,0),Rs(168,6,0)],Q=new aa({color:Rs(185,198,207,255)}),K=new js({stops:[{color:Rs(151,190,220,10),offset:0},{color:Rs(151,190,220,50),offset:1}]}),$=X.getColor().setA(255),tt=Rs(150,150,150),et=[Rs(255,243,136,125),Rs(254,237,99,125),Rs(255,216,109,125),Rs(255,172,100,125),Rs(255,133,101,125),Rs(255,113,142,125),Rs(230,103,129,125),Rs(242,126,219,125),Rs(255,155,235,125),Rs(255,181,240,125),Rs(203,143,255,125),Rs(208,154,255,125),Rs(171,188,255,125),Rs(197,209,255,125),Rs(171,187,255,125),Rs(84,167,239,125),Rs(38,196,214,125),Rs(38,214,196,125),Rs(69,225,141,125),Rs(36,191,88,125)];return xy({isDark:t,highlightColorOffset:Rs(-60,-60,-60,60),highlightColorOffsetAxisOverlay:Rs(0,0,0,40),effect:e,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:i,dashboardSplitterFillStyle:s,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:o,fontScaler:1,titleFillStyle:a,axisTitleFillStyle:h,axisLabelMajorFillStyle:l,uiTitleFillStyle:c,uiTextFillStyle:u,cursorTextFillStyle:d,axisLineFillStyle:f,axisTickMajorFillStyle:g,axisGridMajorFillStyle:p,axisTickMinorFillStyle:y,axisGridMinorFillStyle:m,cursorGridFillStyle:v,legendBackgroundFillStyle:x,legendBackgroundBorderFillStyle:b,legendButtonDefaultColor:S,resultTableBackgroundFillStyle:A,resultTableBackgroundBorderFillStyle:E,resultTableHeaderBackgroundFillStyle:k,uiBackgroundColor:w,uiBackgroundBorderColor:M,uiStrokeColorContrastHigh:C,uiStrokeColorContrastMedium:T,uiStrokeColorContrastLow:F,dataStrokeColorContrastHigh:P,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:L,dataColorPalette:D,dataColorPaletteInverted:[{area:Rs(190,50,50,100),border:Rs(210,80,80)}],dataHighlightOverlayColor:z,dataColorPositive:I,dataColorNegative:R,zoomBandChartDefocusOverlayFillStyle:new aa({color:Rs(255,255,255,180)}),zoomBandChartSplitterColor:Rs(80,93,101),zoomBandChartKnobFillStyle:t=>new Fr({source:Sy(t,"zoomBandChart/light-selector.png"),fitMode:Cr.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:Rs(0,0,0,24),overrideThemeProperties:V,treeMapChartParentColor:Rs(217,217,217),treeMapChartNodeColors:et,treeMapChartLabelFillStyle:new aa({color:Rs(0,0,0)}),treeMapChartLabelHeaderFillStyle:new aa({color:Rs(33,33,33)})},{positiveTextFillStyle:N,negativeTextFillStyle:O,positiveFillStyle:Y,negativeFillStyle:G,positiveAreaFillStyle:X,negativeAreaFillStyle:U,positiveBackgroundFillStyle:H,negativeBackgroundFillStyle:j,badGoodColorPalette:W,coldHotColorPalette:Z,intensityColorPalette:J,spectrogramColorPalette:q,bollingerFillStyle:K,bollingerBorderFillStyle:Q,highlightPointColor:Rs(0,0,0),highlightDataGridColor:$,unfocusedDataColor:tt})}),Fy=Xn(()=>{const t=!1,e=new js({position:{x:.8,y:.8},extent:Xs.farthestCorner,shape:Gs.ellipse,stops:[{offset:0,color:Rs(255,255,255)},{offset:1,color:Rs(255,255,255)}]}),i=new aa({color:Rs(214,236,216,255)}),s=new js({position:{x:.5,y:.5},extent:Xs.farthestCorner,shape:Gs.circle,stops:[{offset:0,color:Rs(233,244,231,70)},{offset:1,color:Rs(233,244,231,200)}]}),r=new js({position:{x:.5,y:.5},extent:Xs.farthestCorner,shape:Gs.circle,stops:[{offset:0,color:Rs(255,255,255,255)},{offset:1,color:Rs(255,255,255,255)}]}),n=by,o=new aa({color:Rs(1,61,53)}),a=new aa({color:Rs(1,61,53)}),h=new aa({color:Rs(1,61,53)}),l=new aa({color:Rs(1,61,53)}),c=l,u=c,d=new Js({angle:45,stops:[{offset:0,color:Rs(225,225,225)},{offset:1,color:Rs(225,225,225)}]}),f=new aa({color:Rs(188,211,186,255)}),g=new aa({color:Rs(188,211,186,150)}),p=new aa({color:Rs(188,211,186,50)}),y=new aa({color:Rs(188,211,186,50)}),m=new aa({color:Rs(104,148,111,255)}),v=new Js({angle:0,stops:[{offset:0,color:Rs(255,255,255,240)},{offset:1,color:Rs(255,255,255,240)}]}),x=new aa({color:Rs(104,148,111)}),b=Rs(150,150,150),S=new aa({color:Rs(255,255,255,230)}),A=new aa({color:Rs(104,148,111)}),E=new aa({color:Rs(226,236,224)}),k=Rs(255,255,255,255),w=Rs(179,201,183,255),M=Rs(188,211,186,255),C=Rs(188,211,186,255),T=Rs(188,211,186,255),F=Rs(188,211,186,255),P=Rs(100,100,100),B=Rs(200,200,200),L=[Rs(138,195,142,255),Rs(193,161,114,255),Rs(178,99,99,255),Rs(142,156,210,255),Rs(154,209,219,255),Rs(164,212,199,255),Rs(104,156,97,255),Rs(196,147,195,255),Rs(92,190,187,255),Rs(126,100,51,255),Rs(136,138,157,255)].map(t=>({stroke:t,border:t,area:t.setA(180)})),D=Rs(150,150,150,80),z=Rs(46,182,84,255),I=Rs(232,96,96,255),R=new th({thickness:2,fillStyle:new aa({color:Rs(188,211,186,255)})}),_={mapChartFillStyle:new Js({angle:-45,stops:[{color:Rs(118,160,121,255),offset:0},{color:Rs(174,227,178,255),offset:1}]}),spiderSeriesFillStyle:Ay(t,L,.8),pieChartSliceFillStylePalette:Ey(t,L,.8),pyramidChartSliceFillStylePalette:ky(t,L,.5),funnelChartSliceFillStylePalette:ky(t,L,.5),rectangleSeriesFillStyle:wy(t,L),gaugeChartBarColor:Rs(46,182,84,255),gaugeChartGlowColor:Rs(46,182,84,120),chartXYSeriesBackgroundStrokeStyle:R,chart3DSeriesBackgroundStrokeStyle:R,polarChartSeriesBackgroundStrokeStyle:R,spiderChartSeriesBackgroundStrokeStyle:R,dataGridTextFillStyle:new aa({color:Rs(77,66,21,255)})},V=new aa({color:Rs(93,151,97,255)}),N=new aa({color:Rs(178,99,99,255)}),O=new aa({color:Rs(138,195,142,255)}),Y=new aa({color:Rs(178,99,99,255)}),G=new aa({color:Rs(138,195,142,180)}),X=new aa({color:Rs(178,99,99,180)}),U=new aa({color:Rs(224,240,237)}),H=new aa({color:Rs(251,227,227)}),j=[Rs(178,99,99,255),Rs(215,224,111,255),Rs(80,186,88,255)],W=[Rs(62,64,142,255),Rs(66,131,77,255),Rs(250,250,135,255),Rs(202,161,78,255),Rs(179,53,53,255)],Z=[Rs(64,86,138),Rs(123,192,205),Rs(255,252,149),Rs(220,155,92),Rs(184,78,74)],J=[Rs(64,86,138),Rs(123,192,205),Rs(255,252,149),Rs(220,155,92),Rs(132,60,57)],q=new aa({color:Rs(185,198,207,255)}),Q=new js({stops:[{color:Rs(151,190,220,10),offset:0},{color:Rs(151,190,220,50),offset:1}]}),K=G.getColor().setA(255),$=Rs(150,150,150),tt=[Rs(242,239,210,150),Rs(243,238,183,150),Rs(210,222,136,150),Rs(204,217,148,150),Rs(157,190,124,150),Rs(143,178,72,150),Rs(198,147,88,150),Rs(216,148,71,150),Rs(229,142,103,150),Rs(225,174,152,150),Rs(219,149,203,150),Rs(216,188,209,150),Rs(109,198,189,150),Rs(172,206,202,150),Rs(164,223,217,150),Rs(174,215,233,150),Rs(203,225,235,150),Rs(220,227,243,150),Rs(207,213,227,150),Rs(171,182,209,150)];return xy({isDark:t,highlightColorOffset:Rs(-60,-60,-60,60),highlightColorOffsetAxisOverlay:Rs(0,0,0,40),effect:void 0,effectsText:!1,effectsDashboardSplitters:!1,lcjsBackgroundFillStyle:e,dashboardSplitterFillStyle:i,panelBackgroundFillStyle:s,seriesBackgroundFillStyle:r,fontFamily:n,fontScaler:1,titleFillStyle:o,axisTitleFillStyle:a,axisLabelMajorFillStyle:h,uiTitleFillStyle:l,uiTextFillStyle:c,cursorTextFillStyle:u,axisLineFillStyle:d,axisTickMajorFillStyle:f,axisGridMajorFillStyle:g,axisTickMinorFillStyle:p,axisGridMinorFillStyle:y,cursorGridFillStyle:m,legendBackgroundFillStyle:v,legendBackgroundBorderFillStyle:x,legendButtonDefaultColor:b,resultTableBackgroundFillStyle:S,resultTableBackgroundBorderFillStyle:A,resultTableHeaderBackgroundFillStyle:E,uiBackgroundColor:k,uiBackgroundBorderColor:w,uiStrokeColorContrastHigh:M,uiStrokeColorContrastMedium:C,uiStrokeColorContrastLow:T,dataStrokeColorContrastHigh:F,dataStrokeColorContrastMedium:P,dataStrokeColorContrastLow:B,dataColorPalette:L,dataColorPaletteInverted:[{area:Rs(210,70,70,100),border:Rs(200,110,110)}],dataHighlightOverlayColor:D,dataColorPositive:z,dataColorNegative:I,zoomBandChartDefocusOverlayFillStyle:new aa({color:Rs(255,255,255,180)}),zoomBandChartSplitterColor:Rs(68,106,64),zoomBandChartKnobFillStyle:t=>new Fr({source:Sy(t,"zoomBandChart/lightnature-selector.png"),fitMode:Cr.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:Rs(0,0,0,24),overrideThemeProperties:_,treeMapChartParentColor:Rs(239,247,238),treeMapChartNodeColors:tt,treeMapChartLabelFillStyle:new aa({color:Rs(0,0,0)}),treeMapChartLabelHeaderFillStyle:new aa({color:Rs(33,33,33)})},{positiveTextFillStyle:V,negativeTextFillStyle:N,positiveFillStyle:O,negativeFillStyle:Y,positiveAreaFillStyle:G,negativeAreaFillStyle:X,positiveBackgroundFillStyle:U,negativeBackgroundFillStyle:H,badGoodColorPalette:j,coldHotColorPalette:W,intensityColorPalette:Z,spectrogramColorPalette:J,bollingerFillStyle:Q,bollingerBorderFillStyle:q,highlightPointColor:Rs(0,0,0),highlightDataGridColor:K,unfocusedDataColor:$})}),Py=Xn(()=>{const t=Rs(255,255,255),e=new aa({color:t}),i=!0,s=new ch({spread:1,blur:9,offset:{x:0,y:0},color:Rs(255,255,255,30)}),r=new aa({color:Rs(6,15,36)}),n=new js({stops:[{color:Rs(46,13,87,50),offset:0},{color:Rs(0,0,0,150),offset:1}]}),o=new aa({color:Rs(0,5,8,150)}),a=by,h=e,l=e,c=e,u=e,d=e,f=d,g=new Js({angle:45,stops:[{offset:0,color:Rs(241,133,255,255)},{offset:1,color:Rs(115,207,238,255)}]}),p=e,y=new aa({color:Rs(61,94,110,100)}),m=new aa({color:Rs(61,94,110,255)}),v=new aa({color:Rs(61,94,110,40)}),x=e,b=new aa({color:Rs(0,18,23,255)}),S=e,A=Rs(115,207,238,255),E=new aa({color:Rs(0,0,0,224)}),k=e,w=new aa({color:Rs(68,31,78)}),M=Rs(0,38,48,255),C=Rs(0,0,0),T=t,F=Rs(150,150,150),P=Rs(19,57,93),B=Rs(50,50,50),L=Rs(0,17,48),D=Rs(200,200,200),z=[Rs(20,211,237,255),Rs(98,147,252,255),Rs(164,73,250,255),Rs(129,117,253,255),Rs(95,134,252,255),Rs(22,133,212,255),Rs(35,200,242,255),Rs(104,121,233,255),Rs(137,69,232,255),Rs(70,72,241,255)].map(t=>({stroke:t,border:t,area:t.setA(180)})),I=t.setA(50),R=Rs(3,217,194,255),_=Rs(243,21,110,255),V={mapChartFillStyle:new Js({angle:135,stops:[{color:Rs(118,248,231,255),offset:0},{color:Rs(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:Ay(i,z,.5),pieChartSliceFillStylePalette:Ey(i,z,2),funnelChartSliceFillStylePalette:ky(i,z,1),pyramidChartSliceFillStylePalette:ky(i,z,1),rectangleSeriesFillStyle:wy(i,z),gaugeChartBarColor:Rs(3,217,194,255),gaugeChartGlowColor:Rs(3,217,194,150)},N=new aa({color:Rs(20,211,237,255)}),O=new aa({color:Rs(253,145,178,255)}),Y=new aa({color:Rs(20,211,237,255)}),G=new aa({color:Rs(239,68,121,255)}),X=new aa({color:Rs(20,211,237,120)}),U=new aa({color:Rs(239,68,121,180)}),H=new aa({color:Rs(1,53,57,255)}),j=new aa({color:Rs(94,19,42,255)}),W=[Rs(174,51,132,255),Rs(204,107,218,255),Rs(189,215,253,255)],Z=[Rs(0,63,95,255),Rs(0,149,255,255),Rs(0,225,255,255),Rs(255,154,254,255),Rs(204,98,170,255),Rs(139,39,84,255)],J=[Rs(197,241,255,255),Rs(70,210,255,255),Rs(0,164,217,255),Rs(90,99,222,255),Rs(138,75,192,255),Rs(151,27,162,255)],q=[Rs(13,31,52,255),Rs(129,54,130,255),Rs(131,108,176,255),Rs(7,162,213,255),Rs(26,247,255,255)],Q=new js({stops:[{color:Rs(219,42,235,60),offset:0},{color:Rs(237,73,252,10),offset:1}]}),K=new aa({color:Rs(237,73,252,255)}),$=X.getColor().setA(255),tt=Rs(8,70,100),et=[Rs(149,230,255,150),Rs(93,213,243,150),Rs(20,189,223,150),Rs(5,151,181,150),Rs(2,138,198,150),Rs(2,113,198,150),Rs(97,148,236,150),Rs(93,111,230,150),Rs(151,120,223,150),Rs(128,87,227,150),Rs(153,52,230,150),Rs(179,92,245,150),Rs(248,110,211,150),Rs(255,155,228,150),Rs(251,88,207,150),Rs(255,0,162,150),Rs(214,73,177,150),Rs(209,71,159,150),Rs(238,101,169,150),Rs(210,57,134,150)];return xy({isDark:i,highlightColorOffset:Rs(60,60,60,60),highlightColorOffsetAxisOverlay:Rs(255,255,255,40),effect:s,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new Fr({source:Sy(t,"themes/cyberSpace.jpg"),fitMode:Cr.Fill}),dashboardSplitterFillStyle:r,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:o,fontFamily:a,fontScaler:1,titleFillStyle:h,axisTitleFillStyle:l,axisLabelMajorFillStyle:c,uiTitleFillStyle:u,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:g,axisTickMajorFillStyle:p,axisGridMajorFillStyle:y,axisTickMinorFillStyle:m,axisGridMinorFillStyle:v,cursorGridFillStyle:x,legendBackgroundFillStyle:b,legendBackgroundBorderFillStyle:S,legendButtonDefaultColor:A,resultTableBackgroundFillStyle:E,resultTableBackgroundBorderFillStyle:k,resultTableHeaderBackgroundFillStyle:w,uiBackgroundColor:M,uiBackgroundBorderColor:C,uiStrokeColorContrastHigh:T,uiStrokeColorContrastMedium:F,uiStrokeColorContrastLow:P,dataStrokeColorContrastHigh:B,dataStrokeColorContrastMedium:L,dataStrokeColorContrastLow:D,dataColorPalette:z,dataColorPaletteInverted:[{area:Rs(41,130,255,100),border:Rs(45,110,240)}],dataHighlightOverlayColor:I,dataColorPositive:R,dataColorNegative:_,zoomBandChartDefocusOverlayFillStyle:new aa({color:Rs(0,0,0,180)}),zoomBandChartSplitterColor:Rs(219,119,255),zoomBandChartKnobFillStyle:t=>new Fr({source:Sy(t,"zoomBandChart/cyberspace-selector.png"),fitMode:Cr.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:Rs(255,255,255,24),overrideThemeProperties:V,treeMapChartParentColor:Rs(30,30,59),treeMapChartNodeColors:et,treeMapChartLabelFillStyle:new aa({color:Rs(33,33,33)}),treeMapChartLabelHeaderFillStyle:new aa({color:Rs(250,250,250)})},{positiveTextFillStyle:N,negativeTextFillStyle:O,positiveFillStyle:Y,negativeFillStyle:G,positiveAreaFillStyle:X,negativeAreaFillStyle:U,positiveBackgroundFillStyle:H,negativeBackgroundFillStyle:j,badGoodColorPalette:W,coldHotColorPalette:Z,intensityColorPalette:J,spectrogramColorPalette:q,bollingerFillStyle:Q,bollingerBorderFillStyle:K,highlightPointColor:t,highlightDataGridColor:$,unfocusedDataColor:tt})}),By={};Object.defineProperty(By,"darkGold",{get:My,enumerable:!0}),Object.defineProperty(By,"turquoiseHexagon",{get:Cy,enumerable:!0}),Object.defineProperty(By,"light",{get:Ty,enumerable:!0}),Object.defineProperty(By,"lightNature",{get:Fy,enumerable:!0}),Object.defineProperty(By,"cyberSpace",{get:Py,enumerable:!0});const Ly=By,Dy=Ly.darkGold;class zy extends wd{constructor(t,e,i,s,r,n){var o,a,h,c;let u;super(t,e,i,e.Vg("dataGrid bg",0),s,e.gi.bi.dataGridBackgroundFillStyle,e.gi.bi.dataGridBackgroundStrokeStyle,e.gi.bi.dataGridTitleFont,e.gi.bi.dataGridTitleFillStyle,e.gi.bi.dataGridTitleShadow,n),this.OC=[],this.zC=[],this.VC=[],this.NC=new Map,this.GC=!0,this.$C=!0,this.UC=!0,this.YC=!0,this.jC=!0,this.HC=!0,this.WC=!0,this.XC=!0,this.ZC=!0,this.JC=!0,this.QC=!0,this.KC=!0,this.qC=!0,this.tT=!0,this.iT=!0,this.sT=!0,this.eT=new Set,this.hT=new Set,this.rT=!0,this.nT=!0,this.oT=(t,e)=>{t.borders=void 0===e?Vy:l(l({},t.borders),e),this.aT(t),this.KC=!0,this.gi.Bs()},this.aT=t=>{t.borders&&(!1===t.borders.top&&this.lT(t.column,t.row-1,t=>{t.borders=t.borders?l(l({},null==t?void 0:t.borders),{},{bottom:!1}):l(l({},this.cT),{},{bottom:!1})}),!1===t.borders.bottom&&this.lT(t.column,t.row+1,t=>{t.borders=t.borders?l(l({},t.borders),{},{top:!1}):l(l({},this.cT),{},{top:!1})}),!1===t.borders.left&&this.lT(t.column-1,t.row,t=>{t.borders=t.borders?l(l({},t.borders),{},{right:!1}):l(l({},this.cT),{},{right:!1})}),!1===t.borders.right&&this.lT(t.column+1,t.row,t=>{t.borders=t.borders?l(l({},t.borders),{},{left:!1}):l(l({},this.cT),{},{left:!1})}),!0===t.borders.top&&this.lT(t.column,t.row-1,t=>{t.borders=t.borders?l(l({},null==t?void 0:t.borders),{},{bottom:!0}):l(l({},this.cT),{},{bottom:!0})}),!0===t.borders.bottom&&this.lT(t.column,t.row+1,t=>{t.borders=t.borders?l(l({},t.borders),{},{top:!0}):l(l({},this.cT),{},{top:!0})}),!0===t.borders.left&&this.lT(t.column-1,t.row,t=>{t.borders=t.borders?l(l({},t.borders),{},{right:!0}):l(l({},this.cT),{},{right:!0})}),!0===t.borders.right&&this.lT(t.column+1,t.row,t=>{t.borders=t.borders?l(l({},t.borders),{},{left:!0}):l(l({},this.cT),{},{left:!0})}))},this.uT={x:0,y:0},this.cells=new Ar,this.L=new Ar,this.gi.ka(_l.fo),this.Yh.Jr("Data Grid"),this.dT=i.d2({scaleXYConstructor:rr}),this.dT.x.Uf=ry,this.fT=i.d2({scaleXYConstructor:rr}),this.AT={x:0,y:0},this.gT=this.bi.dataGridTextFont,this.vT=this.bi.dataGridTextFillStyle,this.cT={top:!0,bottom:!0,left:!0,right:!0},this.yT=this.bi.dataGridCellBackgroundFillStyle,this.pT=this.bi.dataGridBorderStrokeStyle,this.mT="left-center",this.ST={left:null!==(o=this.bi.dataGridCellPadding)&&void 0!==o?o:5,right:null!==(a=this.bi.dataGridCellPadding)&&void 0!==a?a:5,bottom:null!==(h=this.bi.dataGridCellPadding)&&void 0!==h?h:5,top:null!==(c=this.bi.dataGridCellPadding)&&void 0!==c?c:5},this.bT=e.km("dataGrid grid bg",0),this.xT=e.km("dataGrid cell bg",1),this.MT=e.Cm("dataGrid cell content",0),this.wT=e.Cm("dataGrid scrollbar bg",1),this._T=e.Cm("dataGrid scrollbar fg",2),this.kT=this.bT.xu(this.fT).Ke(this.bi.dataGridBackgroundFillStyle).Qe(Lr).setPointerEvents(!1),this.CT=this.MT.gA(this.dT).setPointerEvents(!1),this.TT=new ud(()=>{const t=this.xT.qe(this.dT).setPointerEvents(!0);return this.cells.Oi(t,{getExtraData:()=>this.NC.get(t),continueIfNotPrevented:(t,e,i)=>{const s=ba(this.getUserInteractions().scroll,"wheel",e,e.shiftKey,e.ctrlKey,e.altKey);if(s&&"wheel"===t&&e instanceof WheelEvent){mn(e),this.FT({x:!0===s.x?Math.sign(e.deltaY):0,y:!0===s.y?Math.sign(e.deltaY):0});const t=s.on;t&&t({event:e})}}}),t}),this.IT=new ud(()=>this.MT.qe(this.dT).setPointerEvents(!1)),this.PT=new ud(()=>this.MT.bn(this.dT,!1).setPointerEvents(!1)),this.LT=new ud(()=>this.MT.Dv(this.dT,{},[Pd.InternalUI,{type:"DataPattern",args:{pattern:"ProgressiveX"}}]).setPointerEvents(!1)),this.BT=new ud(()=>this.MT.fh(this.dT).setPointerEvents(!1)),this.DT=new ud(()=>this.MT.Ld(this.dT).Pd(sa).dh(Lr).setPointerEvents(!1)),this.RT=new ud(()=>this.MT.qe(this.dT).setPointerEvents(!1)),this.ET=new ud(()=>this.MT.Ex(this.dT).setPointerEvents(!1)),this.OT=new ud(()=>this.MT.md(this.dT).setPointerEvents(!1)),this.zT={background:this.wT.qe(this.fT).setPointerEvents(!0).Ke(this.bi.dataGridScrollBarBackgroundFillStyle).Qe(this.bi.dataGridScrollBarBackgroundStrokeStyle),scrollbar:this._T.qe(this.fT).setPointerEvents(!0).Ke(this.bi.dataGridScrollBarFillStyle).Qe(this.bi.dataGridScrollBarStrokeStyle),button1:this.wT.qe(this.fT).setPointerEvents(!0).Ke(this.bi.dataGridScrollBarButtonFillStyle).Qe(this.bi.dataGridScrollBarButtonStrokeStyle),button2:this.wT.qe(this.fT).setPointerEvents(!0).Ke(this.bi.dataGridScrollBarButtonFillStyle).Qe(this.bi.dataGridScrollBarButtonStrokeStyle),buttonIcon1:this._T.Ld(this.fT).setPointerEvents(!1).dh(Lr).Id(this.bi.dataGridScrollBarButtonArrowFillStyle).Bd(La.Triangle),buttonIcon2:this._T.Ld(this.fT).setPointerEvents(!1).dh(Lr).Id(this.bi.dataGridScrollBarButtonArrowFillStyle).Bd(La.Triangle)},this.VT={background:this.wT.qe(this.fT).setPointerEvents(!0).Ke(this.bi.dataGridScrollBarBackgroundFillStyle).Qe(this.bi.dataGridScrollBarBackgroundStrokeStyle),scrollbar:this._T.qe(this.fT).setPointerEvents(!0).Ke(this.bi.dataGridScrollBarFillStyle).Qe(this.bi.dataGridScrollBarStrokeStyle),button1:this.wT.qe(this.fT).setPointerEvents(!0).Ke(this.bi.dataGridScrollBarButtonFillStyle).Qe(this.bi.dataGridScrollBarButtonStrokeStyle),button2:this.wT.qe(this.fT).setPointerEvents(!0).Ke(this.bi.dataGridScrollBarButtonFillStyle).Qe(this.bi.dataGridScrollBarButtonStrokeStyle),buttonIcon1:this._T.Ld(this.fT).setPointerEvents(!1).dh(Lr).Id(this.bi.dataGridScrollBarButtonArrowFillStyle).Bd(La.Triangle),buttonIcon2:this._T.Ld(this.fT).setPointerEvents(!1).dh(Lr).Id(this.bi.dataGridScrollBarButtonArrowFillStyle).Bd(La.Triangle)},this.zT.scrollbar.addEventListener("pointerenter",t=>{u=this.engine.setMouseStyle(Xh.Vertical,u)}),this.zT.scrollbar.addEventListener("pointerleave",t=>{u=this.engine.restoreMouseStyle(u)}),this.zT.scrollbar.addEventListener("pointerdown",t=>{mn(t);let e=t;const i=t=>{const i=t.clientY-e.clientY;e=t,this.NT({x:0,y:-i})},s=e=>{e.pointerId===t.pointerId&&(Ur.removeEventListener("pointermove",i),Ur.removeEventListener("pointerup",s))};Ur.addEventListener("pointermove",i),Ur.addEventListener("pointerup",s)}),this.zT.scrollbar.addEventListener("wheel",t=>{mn(t),this.FT({x:0,y:Math.sign(t.deltaY)})}),this.zT.background.addEventListener("pointerenter",t=>{u=this.engine.setMouseStyle(Xh.Vertical,u)}),this.zT.background.addEventListener("pointerleave",t=>{u=this.engine.restoreMouseStyle(u)}),this.zT.background.addEventListener("click",t=>{mn(t);const e=this.gi.Ja(t),i=hr({x:e.engineX,y:e.engineY},this.gi.oi,this.fT);this.FT({x:0,y:i.y>this.zT.scrollbar.Dl().y?-1:1})}),this.zT.background.addEventListener("wheel",t=>{mn(t),this.FT({x:0,y:Math.sign(t.deltaY)})}),this.zT.button1.addEventListener("pointerenter",t=>{u=this.engine.setMouseStyle(Xh.Point,u)}),this.zT.button1.addEventListener("pointerleave",t=>{u=this.engine.restoreMouseStyle(u)}),this.zT.button1.addEventListener("click",t=>{mn(t),this.FT({x:0,y:1})}),this.zT.button2.addEventListener("click",t=>{mn(t),this.FT({x:0,y:-1})}),this.zT.button2.addEventListener("pointerenter",t=>{u=this.engine.setMouseStyle(Xh.Point,u)}),this.zT.button2.addEventListener("pointerleave",t=>{u=this.engine.restoreMouseStyle(u)}),this.VT.scrollbar.addEventListener("pointerenter",t=>{u=this.engine.setMouseStyle(Xh.Horizontal,u)}),this.VT.scrollbar.addEventListener("pointerleave",t=>{u=this.engine.restoreMouseStyle(u)}),this.VT.scrollbar.addEventListener("pointerdown",t=>{mn(t);let e=t;const i=t=>{const i=t.clientX-e.clientX;e=t,this.NT({x:i,y:0})},s=e=>{e.pointerId===t.pointerId&&(Ur.removeEventListener("pointermove",i),Ur.removeEventListener("pointerup",s))};Ur.addEventListener("pointermove",i),Ur.addEventListener("pointerup",s)}),this.VT.scrollbar.addEventListener("wheel",t=>{mn(t),this.FT({x:Math.sign(t.deltaY),y:0})}),this.VT.background.addEventListener("pointerenter",t=>{u=this.engine.setMouseStyle(Xh.Horizontal,u)}),this.VT.background.addEventListener("pointerleave",t=>{u=this.engine.restoreMouseStyle(u)}),this.VT.background.addEventListener("click",t=>{mn(t);const e=this.gi.Ja(t),i=hr({x:e.engineX,y:e.engineY},this.gi.oi,this.fT);this.FT({x:i.x<this.VT.scrollbar.Dl().x?-1:1,y:0})}),this.VT.background.addEventListener("wheel",t=>{mn(t),this.FT({x:Math.sign(t.deltaY),y:0})}),this.VT.button1.addEventListener("pointerenter",t=>{u=this.engine.setMouseStyle(Xh.Point,u)}),this.VT.button1.addEventListener("pointerleave",t=>{u=this.engine.restoreMouseStyle(u)}),this.VT.button1.addEventListener("click",t=>{mn(t),this.FT({x:-1,y:0})}),this.VT.button2.addEventListener("click",t=>{mn(t),this.FT({x:1,y:0})}),this.VT.button2.addEventListener("pointerenter",t=>{u=this.engine.setMouseStyle(Xh.Point,u)}),this.VT.button2.addEventListener("pointerleave",t=>{u=this.engine.restoreMouseStyle(u)}),this.zg(r,this.uiScale),this.addEventListener("resize",()=>{this.GC=!0,this.gi.Bs(),this.dT.X(this.Jf._t()),this.fT.X(this.Jf._t())}),this.GT=this.ys.iA([this.kT])}getMinimumSize(){return{x:200,y:200}}setAnimationsEnabled(t){return this}gg(){return[]}dispose(){return super.dispose(),this.bT.N(),this.xT.N(),this.MT.N(),this.wT.N(),this._T.N(),Ed(this.dT),Ed(this.fT),this.PT.EA(),this.TT.EA(),this.IT.EA(),this.LT.EA(),this.BT.EA(),this.DT.EA(),this.RT.EA(),this.ET.EA(),this.OT.EA(),this}Y(){return super.Y(),this.dT.Y(),this.fT.Y(),this}j(){return super.j(),this.dT.j(),this.fT.j(),this}setBackgroundEffect(t){return this.GT.Ls(t),this.gi.Bs(),this}getBackgroundEffect(){return this.GT.Ds()}setUserInteractions(t){return this.oh=void 0===t?{scroll:!1}:t,this}getUserInteractions(){return Gr({scroll:{wheel:{x:!1,y:!0},ctrl:{wheel:{x:!0,y:!1}}}},this.oh)}setGridBackgroundFillStyle(t){return this.kT.Ke(t),this.gi.Bs(),this}getGridBackgroundFillStyle(){return this.kT.pr()}setCellContent(t,e,i,s,r){if("number"==typeof i&&void 0!==s&&void 0!==r){const n=i,o=s,a=r;let h=[];for(let i=t;i<t+n;i+=1)for(let t=e;t<e+o;t+=1){const e=this.lT(i,t);e&&h.push(e)}h=Nn(h);let c={highlight:0};for(const t of h){const e=this.OC.indexOf(t);e<0||(c=l(l({},c),{},{highlight:t.highlight,textFont:t.textFont,textFillStyle:t.textFillStyle,contentAlignment:t.contentAlignment,borders:t.borders,padding:t.padding,backgroundFillStyle:t.backgroundFillStyle}),this.OC.splice(e,1))}const u=l(l({},c),{},{column:t,row:e,columnSpan:n,rowSpan:o,content:a});this.OC.push(u),this.YC=!0,"string"==typeof u.content||"number"==typeof u.content?this.$C=!0:this.UC=!0,this.gi.Bs()}else this.$T(t,e,i);return this}setColumnContent(t,e){const i=e.length;if(0===i)return this;for(let s=0;s<i;s+=1){const i=e[s];this.$T(t,s,i)}return this}setRowContent(t,e){const i=e.length;if(0===i)return this;for(let s=0;s<i;s+=1){const i=e[s];this.$T(s,t,i)}return this}setTableContent(t){const e=t.length;if(0===e)return this;const i=t[0].length;if(0===i)return this;for(let s=0;s<i;s+=1)for(let i=0;i<e;i+=1){const e=t[i][s];this.$T(s,i,e)}return this}setColumnWidth(t,e){let i=this.zC.find(e=>e.column===t);return i||(i={column:t,min:void 0,max:void 0},this.zC.push(i)),"object"==typeof e?(i.min=e.min,i.max=e.max):void 0===e?this.zC.splice(this.zC.indexOf(i),1):(i.min=e,i.max=e),this.HC=!0,this.gi.Bs(),this}setRowHeight(t,e){let i=this.VC.find(e=>e.row===t);return i||(i={row:t,min:void 0,max:void 0},this.VC.push(i)),"object"==typeof e?(i.min=e.min,i.max=e.max):void 0===e?this.VC.splice(this.VC.indexOf(i),1):(i.min=e,i.max=e),this.HC=!0,this.gi.Bs(),this}setColumnPaddings(t,e){return"number"==typeof e&&(e=Bs(e,e,e,e)),this.UT(t,t=>this.YT(t,e)),this}setRowPaddings(t,e){return"number"==typeof e&&(e=Bs(e,e,e,e)),this.jT(t,t=>this.YT(t,e)),this}setCellPadding(t,e,i){return"number"==typeof i&&(i=Bs(i,i,i,i)),this.lT(t,e,t=>this.YT(t,i)),this}setCellsPaddings(t){return"number"==typeof t&&(t=Bs(t,t,t,t)),this.ST=l(l({},this.ST),t),this.HT(t=>this.YT(t,this.ST)),this}setCellBorders(t,e,i){return this.lT(t,e,t=>this.oT(t,i)),this}setRowBorders(t,e){return this.jT(t,t=>this.oT(t,e)),this}setColumnBorders(t,e){return this.UT(t,t=>this.oT(t,e)),this}setCellsBorders(t){return this.cT=void 0===t?Vy:t,this.HT(t=>this.oT(t,this.cT)),this}setCellsBorderStrokeStyle(t){return this.pT="function"==typeof t?t(this.pT):t,this.tT=!0,this.gi.Bs(),this}setColumnTextFillStyle(t,e){return this.UT(t,t=>this.WT(t,e)),this}setRowTextFillStyle(t,e){return this.jT(t,t=>this.WT(t,e)),this}setCellTextFillStyle(t,e,i){return this.lT(t,e,t=>this.WT(t,i)),this}setCellsTextFillStyle(t){return this.vT="function"==typeof t?t(this.vT):t,this.HT(t=>this.WT(t,this.vT)),this}setColumnTextFont(t,e){return this.UT(t,t=>this.XT(t,e)),this}setRowTextFont(t,e){return this.jT(t,t=>this.XT(t,e)),this}setCellTextFont(t,e,i){return this.lT(t,e,t=>this.XT(t,i)),this}setCellsTextFont(t){return this.gT="function"==typeof t?t(this.gT):t,this.HT(t=>this.XT(t,this.gT)),this}setColumnContentAlignment(t,e){return this.UT(t,t=>this.ZT(t,e)),this}setRowContentAlignment(t,e){return this.jT(t,t=>this.ZT(t,e)),this}setCellContentAlignment(t,e,i){return this.lT(t,e,t=>this.ZT(t,i)),this}setCellsContentAlignment(t){return this.mT=t,this.HT(t=>this.ZT(t,this.mT)),this}setCellBackgroundFillStyle(t,e,i){return this.lT(t,e,t=>this.JT(t,i)),this}setColumnBackgroundFillStyle(t,e){return this.UT(t,t=>this.JT(t,e)),this}setRowBackgroundFillStyle(t,e){return this.jT(t,t=>this.JT(t,e)),this}setCellsBackgroundFillStyle(t){return this.yT="function"==typeof t?t(this.yT):t,this.HT(t=>this.JT(t,this.yT)),this}setCellHighlight(t,e,i){return this.lT(t,e,t=>{t.highlight=Yn(i)}),this.qC=!0,this.gi.Bs(),this}setColumnHighlight(t,e){const i=Yn(e);return this.UT(t,t=>{t.highlight=i}),this.qC=!0,this.gi.Bs(),this}setRowHighlight(t,e){const i=Yn(e);return this.jT(t,t=>{t.highlight=i}),this.qC=!0,this.gi.Bs(),this}removeCell(t,e){return this.lT(t,e,t=>this.OC.splice(this.OC.indexOf(t),1)),this.jC=!0,this.gi.Bs(),this}removeRow(t){return this.jT(t,t=>this.OC.splice(this.OC.indexOf(t),1)),this.OC.filter(e=>e.row>t).forEach(t=>{t.row-=1}),this.jC=!0,this.gi.Bs(),this}removeColumn(t){return this.UT(t,t=>this.OC.splice(this.OC.indexOf(t),1)),this.OC.filter(e=>e.column>t).forEach(t=>{t.column-=1}),this.jC=!0,this.gi.Bs(),this}removeCells(){return this.OC.splice(0),this.jC=!0,this.gi.Bs(),this}getColumnMax(){return 0===this.OC.length?0:this.OC.reduce((t,e)=>Math.max(t,e.column+e.columnSpan-1),0)}getRowMax(){return 0===this.OC.length?0:this.OC.reduce((t,e)=>Math.max(t,e.row+e.rowSpan-1),0)}th(t){var e;super.th(t),Md.Xg(this.Yh,this.Ng,this.uiScale.ri(),this.On),super.Og();const i=Math.round(this.pT.Yi()),s=i/2;let r=this.$C||this.UC||this.YC||this.jC||this.HC||this.WC||this.QC||this.KC||this.tT||this.sT;if(r){this.OC.forEach(t=>{this.hT.add(t.column)}),this.OC.forEach(t=>{this.eT.add(t.row)});const t=this.PT.LA(),e=this.QT(s,t);t.finishPlot();const n=this.KT(this.hT.size,e),o=this.qT(this.eT.size,e),a=n.reduce(go,0)+i,h=o.reduce(go,0)+i,l=new Array(n.length+1).fill(0).map((t,e)=>n.reduce((t,i,s)=>t+(s<e?i:0),0)),c=new Array(o.length+1).fill(0).map((t,e)=>o.reduce((t,i,s)=>t+(s<e?i:0),0));if(this.tF){const t=this.tF.columnWidths.every((t,e)=>t===n[e]),e=this.tF.rowHeights.every((t,e)=>t===o[e]);t&&e&&(r=!1)}this.tF={columnWidths:n,rowHeights:o,dataGridWidth:a,dataGridHeight:h,columnWidthsCumulative:l,rowHeightsCumulative:c,cellsContentSizes:e}}const n=r||this.UC||this.YC||this.jC||this.XC||this.ZC||this.JC||this.KC||this.qC||this.tT||this.GC||this.sT;if((n||this.iT)&&this.tF){const t=this.Jf.getInnerIntervalPixels(),r=Md.Wg(this.Yh,this.Ng),o=[this.On.left+s,this.On.right+s],a=[this.On.bottom+s,this.On.top+r+s],h={x:t.x-o[0]-o[1],y:t.y-a[0]-a[1]},l=[this.On.left,this.On.right],c=[this.On.bottom,this.On.top+r],u={x:Math.round(t.x-l[0]-l[1]),y:Math.round(t.y-c[0]-c[1])},d={x:Math.ceil(s),y:Math.floor(u.y-s)};this.fT.Kt(o).qt(a).ti(0,h.x).ii(0,h.y);const f=null!==(e=this.bi.dataGridScrollBarThickness)&&void 0!==e?e:20,g={x:Math.min(h.x,this.tF.dataGridWidth+f)-f,y:Math.min(h.y,this.tF.dataGridHeight+f)-f};0===this.uT.x&&0===this.uT.y||(this.AT.y+=this.tF.dataGridHeight*this.uT.y/g.y,this.AT.x+=this.tF.dataGridWidth*this.uT.x/g.x,this.uT.x=0,this.uT.y=0),this.AT.y=Qr(this.AT.y,h.y-this.tF.dataGridHeight-f,0),this.AT.x=Qr(this.AT.x,0,this.tF.dataGridWidth-h.x+f);const p=this.AT;this.dT.Kt(l).qt(c).ti(p.x,u.x+p.x).ii(p.y,u.y+p.y);const y={x:this.dT.x.bt(),y:this.dT.y.bt()+f,width:this.dT.x.Mt()+i-f,height:this.dT.y.Mt()+i-f};this.MT.ym(y),this.xT.ym(y);const m=this.tF,v=[{x:this.dT.x.getInnerStart(),y:this.dT.y.getInnerStart()},{x:this.dT.x.getInnerEnd(),y:this.dT.y.getInnerStart()},{x:this.dT.x.getInnerEnd(),y:this.dT.y.getInnerEnd()},{x:this.dT.x.getInnerStart(),y:this.dT.y.getInnerEnd()}];m.cellsContentSizes.forEach(t=>{var e;const i={x:d.x+m.columnWidthsCumulative[t.cell.column],y:d.y-m.rowHeightsCumulative[t.cell.row+t.cell.rowSpan]},s={x:i.x+m.columnWidths[t.cell.column],y:i.y+m.rowHeights[t.cell.row]},r=co([i,{x:s.x,y:i.y},s,{x:i.x,y:s.y}],v);null===(e=t.text)||void 0===e||e.setVisible(r)}),n&&this.iF(d,this.tF,i);const x=h.y-f<this.tF.dataGridHeight;this.zT.background.setVisible(x).ih({x:g.x,y:f}).X({x:f,y:g.y}),this.zT.scrollbar.setVisible(x).ih({x:g.x,y:f+g.y-f+-(g.y-2*f)*(-this.AT.y/this.tF.dataGridHeight)}).X({x:f,y:-(g.y-2*f)*(g.y/this.tF.dataGridHeight)}),this.zT.button1.setVisible(x).ih({x:g.x,y:f}).X({x:f,y:f}),this.zT.buttonIcon1.setVisible(x).Nd(.5*f).Rd(0).Fd((new Mc).appendSample({x:g.x+f/2,y:1.5*f}),{x:"x",y:"y"}),this.zT.button2.setVisible(x).ih({x:g.x,y:g.y}).X({x:f,y:f}),this.zT.buttonIcon2.setVisible(x).Nd(.5*f).Rd(180).Fd((new Mc).appendSample({x:g.x+f/2,y:g.y+f/2}),{x:"x",y:"y"});const b=h.x-f<this.tF.dataGridWidth,S=Math.max(h.y-this.tF.dataGridHeight-f,0);this.VT.background.setVisible(b).ih({x:0,y:S}).X({x:g.x,y:f}),this.VT.scrollbar.setVisible(b).ih({x:f+(g.x-2*f)*(this.AT.x/this.tF.dataGridWidth),y:S}).X({x:(g.x-2*f)*(g.x/this.tF.dataGridWidth),y:f}),this.VT.button1.setVisible(b).ih({x:0,y:S}).X({x:f,y:f}),this.VT.buttonIcon1.setVisible(b).Nd(.5*f).Rd(90).Fd((new Mc).appendSample({x:f/2,y:S+f/2}),{x:"x",y:"y"}),this.VT.button2.setVisible(b).ih({x:g.x-f,y:S}).X({x:f,y:f}),this.VT.buttonIcon2.setVisible(b).Nd(.5*f).Rd(270).Fd((new Mc).appendSample({x:g.x-f/2,y:S+f/2}),{x:"x",y:"y"}),this.kT.rc([d,{x:d.x+g.x+(x?f:0),y:d.y},{x:d.x+g.x+(x?f:0),y:d.y-g.y},{x:d.x+g.x,y:d.y-g.y},{x:d.x+g.x,y:d.y-g.y-(b?f:0)},{x:d.x,y:d.y-g.y-(b?f:0)}])}this.GC=!1,this.$C=!1,this.UC=!1,this.YC=!1,this.jC=!1,this.HC=!1,this.WC=!1,this.XC=!1,this.ZC=!1,this.JC=!1,this.QC=!1,this.KC=!1,this.qC=!1,this.tT=!1,this.iT=!1,this.sT=!1}QT(t,e){const i=[],s={left:Math.ceil(t),right:Math.ceil(t),top:Math.ceil(t),bottom:Math.ceil(t)};for(const r of this.OC){const{content:t}=r,n=l(l({},this.ST),r.padding);let o,a,h,c={x:0,y:0};if("string"==typeof t||"number"==typeof t){const i=String(t);o=e.add(),c=o.Jr(i).Mr(r.textFont||this.gT).Er().vu()}if(ny(t)&&(a=t,c={x:200,y:50}),hh(t)){const e=this.gi.sF(t);e.eF()?(h=t,c=h._t()):e.hF(()=>{this.sT=!0,this.gi.Bs()})}if(o||a||h){n.top=Math.round(n.top),n.left=Math.round(n.left),n.right=Math.round(n.right),n.bottom=Math.round(n.bottom);const t={x:Math.round(c.x+n.left+n.right+s.left+s.right),y:Math.round(c.y+n.top+n.bottom+s.top+s.bottom)};i.push({cell:r,contentSize:t,text:o,sparkChart:a,icon:h,cellPadding:n,cellMargin:s})}}return i}iF(t,e,i){const{cellsContentSizes:s,columnWidths:r,columnWidthsCumulative:n,rowHeights:o,rowHeightsCumulative:a}=e;this.CT.dh(this.pT),this.NC.clear();const h={cellBackground:this.TT.LA(),cellIconRect:this.IT.LA(),lineSet:this.LT.LA(),line:this.BT.LA(),pointSet:this.DT.LA(),rect:this.RT.LA(),junction:this.ET.LA(),arc:this.OT.LA()},l=[];for(const c of s){const{cell:e,text:s,sparkChart:u,icon:d,cellPadding:f,cellMargin:g}=c,p={column:e.column,row:e.row},y={x:t.x+n[e.column],y:t.y-a[e.row+e.rowSpan]},m={x:y.x+g.left,y:y.y+g.bottom},v={x:m.x+f.left,y:m.y+f.bottom},x={x:new Array(e.columnSpan).fill(0).reduce((t,i,s)=>t+r[e.column+s],0),y:new Array(e.rowSpan).fill(0).reduce((t,i,s)=>t+o[e.row+s],0)},b={x:x.x-g.left-g.right,y:x.y-g.top-g.bottom},S={x:b.x-f.left-f.right,y:b.y-f.top-f.bottom};if(s){const t=_y(v,S,e.contentAlignment||this.mT);s.ih(t[0]).Yl({x:t[1],y:t[2]}).Ke(this.rF(e.textFillStyle||this.vT,e.content,this.vT)).Fi(e.highlight).Zr(this.bi.dataGridTextShadow)}const A=this.rF(e.backgroundFillStyle||this.yT,e.content);if(A!==sa){const t=h.cellBackground.add();t.ih(y).X(x).Ke(A).Qe(Lr).Fi(e.highlight),this.NC.set(t,p)}const E=e.borders||this.cT;if(E&&Ry(y,x,E,i,l),u){const t=v,i=S;oy(u,h,this.dT,t,i,this.bi,this._g,e.highlight)}if(d){const t=d._t(),i=_y(v,S,e.contentAlignment||this.mT);h.cellIconRect.add().ih({x:i[0].x+t.x*(-.5-i[1]/2),y:i[0].y+t.y*(-.5-i[2]/2)}).X(t).Ke(new Fr({source:d.Js,fitMode:Cr.Stretch})).Qe(Lr).Fi(e.highlight)}}this.CT.zi();for(const c of l)this.CT.Go().yA(c[0],c[1]);h.cellBackground.finishPlot(),h.cellIconRect.finishPlot(),h.lineSet.finishPlot(),h.line.finishPlot(),h.pointSet.finishPlot(),h.rect.finishPlot(),h.junction.finishPlot(),h.arc.finishPlot()}KT(t,e){const i=new Array(t).fill(0);for(const s of this.hT.values()){const t=e.filter(t=>s>=t.cell.column&&s+1<=t.cell.column+t.cell.columnSpan).reduce((t,e)=>{const i=e.contentSize.x/e.cell.columnSpan;return Math.max(t,i)},0),r=this.zC.find(t=>t.column===s),n=r?Qr(t,void 0!==r.min?r.min:no,void 0!==r.max?r.max:ro):t;i[s]=n}return i}qT(t,e){const i=new Array(t).fill(0);for(const s of this.eT.values()){const t=e.filter(t=>s>=t.cell.row&&s+1<=t.cell.row+t.cell.rowSpan).reduce((t,e)=>{const i=e.contentSize.y/e.cell.rowSpan;return Math.max(t,i)},0),r=this.VC.find(t=>t.row===s),n=r?Qr(t,void 0!==r.min?r.min:no,void 0!==r.max?r.max:ro):t;i[s]=n}return i}rF(t,e,i){if(fa(t)){try{const i=Number(e);return new aa({color:t.getPalette().getColors(i,void 0)})}catch(t){}return i||sa}return t}WT(t,e){t.textFillStyle="function"==typeof e?e(t.textFillStyle||this.vT):e,this.JC=!0,this.gi.Bs()}XT(t,e){t.textFont="function"==typeof e?e(t.textFont||this.gT):e,this.QC=!0,this.gi.Bs()}JT(t,e){t.backgroundFillStyle="function"==typeof e?e(t.backgroundFillStyle||this.yT):e,this.ZC=!0,this.gi.Bs()}ZT(t,e){t.contentAlignment=e,this.XC=!0,this.gi.Bs()}YT(t,e){t.padding=l(l({},t.padding),e),this.WC=!0,this.gi.Bs()}$T(t,e,i){let s=this.lT(t,e);s?s.content=i:(s={column:t,row:e,columnSpan:1,rowSpan:1,content:i,highlight:0},this.OC.push(s),this.YC=!0),"string"==typeof s.content||"number"==typeof s.content?this.$C=!0:this.UC=!0,this.gi.Bs()}HT(t){this.OC.forEach(e=>t(e))}lT(t,e,i){const s=this.OC.find(i=>t>=i.column&&t+1<=i.column+i.columnSpan&&e>=i.row&&e+1<=i.row+i.rowSpan);return s&&i&&i(s),s}UT(t,e){const i=this.OC.filter(e=>t>=e.column&&t+1<=e.column+e.columnSpan);for(const s of i)s&&e(s)}jT(t,e){const i=this.OC.filter(e=>t>=e.row&&t+1<=e.row+e.rowSpan);for(const s of i)s&&e(s)}FT(t){var e,i,s,r,n,o;if(this.tF){if(0!==t.y){const r=null!==(i=null===(e=this.tF.rowHeightsCumulative.map((t,e)=>({value:t,index:e})).reverse().find(e=>-this.AT.y+(t.y>0?1:0)>=e.value))||void 0===e?void 0:e.index)&&void 0!==i?i:0,n=null!==(s=this.tF.rowHeightsCumulative[r+t.y])&&void 0!==s?s:0;this.AT.y=-n,this.iT=!0,this.gi.Bs()}if(0!==t.x){const e=null!==(n=null===(r=this.tF.columnWidthsCumulative.map((t,e)=>({value:t,index:e})).reverse().find(e=>this.AT.x+(t.x>0?1:0)>=e.value))||void 0===r?void 0:r.index)&&void 0!==n?n:0,i=null!==(o=this.tF.columnWidthsCumulative[e+t.x])&&void 0!==o?o:0;this.AT.x=i,this.iT=!0,this.gi.Bs()}}}NT(t){this.tF&&(this.uT.x+=t.x,this.uT.y+=t.y,this.iT=!0,this.gi.Bs())}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}var Iy;!function(t){t.Center="center",t.RightCenter="right-center",t.LeftCenter="left-center",t.RightTop="right-top",t.LeftTop="left-top",t.RightBottom="right-bottom",t.LeftBottom="left-bottom",t.CenterTop="center-top",t.CenterBottom="center-bottom"}(Iy||(Iy={}));const Ry=(t,e,i,s,r)=>{const n={x:t.x,y:t.y},o={x:t.x,y:t.y+e.y},a={x:t.x+e.x,y:t.y},h={x:t.x+e.x,y:t.y+e.y};i.top&&r.push([o,h]),i.bottom&&r.push([n,a]),i.left&&r.push([n,o]),i.right&&r.push([a,h])},_y=(t,e,i)=>{const s=t.x,r=t.x+e.x,n=t.x+e.x/2,o=t.y+e.y,a=t.y,h=t.y+e.y/2;switch(i){case"left-center":return[As(s,h),-1,0];case"right-center":return[As(r,h),1,0];case"center":return[As(n,h),0,0];case"left-bottom":return[As(s,a),-1,-1];case"right-bottom":return[As(r,a),1,-1];case"center-bottom":return[As(n,a),0,-1];case"left-top":return[As(s,o),-1,1];case"right-top":return[As(r,o),1,1];case"center-top":return[As(n,o),0,1]}return Gn(0,"Unidentified DataGrid cell content alignment option: ".concat(i))},Vy={top:!1,bottom:!1,left:!1,right:!1};class Ny extends El{constructor(t,e,i,s,r,n){super(t,{ln(){},an(){},un(){}},s,e,i,{numeric:e.xAxisNumericTicks.setFallBackToExtremeTicksAutomatically(!1),datetime:e.xAxisDateTimeTicks,time:e.xAxisTimeTicks},{type:"linear"}),this.L=new Ar,this.chart=t,this.ys=n,this.Ws=r,this.Jh=r.bn(t.nF).Mr(this.bi.barChartCategoryAxisTitleFont||this.bi.xAxisTitleFont).Ke(this.bi.barChartCategoryAxisTitleFillStyle||this.bi.xAxisTitleFillStyle),this.setTitleRotation(this.chart.Xs.getWidth({x:0,y:-90})),this.kr=this.ys.iA([this.Jh]).Ls(e.effectsText),this.oF=r.fh(t.nF).dh(e.barChartCategoryAxisStrokeStyle||e.xAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.nA=t,this.oA=t):"object"==typeof t&&(this.nA=t.min,this.oA=t.max),this.chart.gi.Bs(),this}getThickness(){return{min:this.nA,max:this.oA}}setStrokeStyle(t){return this.oF.dh(t),this.chart.gi.Bs(),this}getStrokeStyle(){return this.oF.ao()}th(t){const e=this.getInterval(),i=this.chart.valueAxis.getInterval();this.oF.gh(this.chart.Xs.toPoint(e.start,i.start)).Ah(this.chart.Xs.toPoint(e.end,i.start)).setVisible(this.ui),this.Jh.ih(this.chart.Xs.toPoint(.5*(e.start+e.end),this.chart.valueAxis.oi.Jt(i.start,-t.lA))).Yl(this.chart.Xs.toPoint(0,1)).setVisible(this.ui),t.ticksInfo.forEach((t,e)=>{e.Dr.ih(t.labelPosition).Yl(t.labelAlignment).wr(t.labelRotation).Ol(t.labelOffset.x,t.labelOffset.y)})}Nr(t){return{}}Yr(t,e,i,s){return{keyValue:t,tickLevel:e,labelText:i,labelAlignment:{x:0,y:0},labelPosition:{x:0,y:0},labelOffset:{x:0,y:0},labelRotation:0}}Qr(t,e){return new kl(e,t,this.Ws,this.chart.nF)}Wr(t,e,i){const s=t.lA,r=this.chart.Xs.getHeight(this.Jh.Er().vu());return{cA:r,uf:Qr(this.oF.ao().Yi()/2+s+r,void 0!==this.nA?this.nA:0,void 0!==this.oA?this.oA:ro),ticksInfo:e,updatedTicks:i}}Kh(){return this.chart.uiScale}fn(t,e){return e}vn(t,e,i){return{start:t,end:e}}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}setPointerEvents(t){return this.L.setPointerEvents(t),this}getPointerEvents(){return this.L.getPointerEvents()}}class Oy extends El{constructor(t,e,i,s,r,n,o){super(t,{ln:()=>{var e;if(t.aF){if("positive"===t.lF||"bipolar"===t.lF){if("after-bar"===(null===(e=t.cF)||void 0===e?void 0:e.position)){const e=this.oi.Mt();return this.oi.Jt(t.aF.max,Math.min(this.chart.Xs.getHeight(this.chart.uF())+t.cF.labelMargin,.3*e))}return t.aF.max}return t.dF?Qr(-1,-1e-6,t.aF.max):0}},an:()=>{var e;if(t.aF){if("negative"===t.lF||"bipolar"===t.lF){if("after-bar"===(null===(e=t.cF)||void 0===e?void 0:e.position)){const e=this.oi.Mt();return this.oi.Jt(t.aF.min,-Math.min(this.chart.Xs.getHeight(this.chart.uF())+t.cF.labelMargin,.3*e))}return t.aF.min}return t.dF?Qr(1,1e-6,t.aF.min):0}},un:()=>{}},s,e,i,{numeric:e.barChartValueAxisTicks||e.yAxisNumericTicks,datetime:e.yAxisDateTimeTicks,time:e.yAxisTimeTicks},o),this.L=new Ar,this.chart=t,this.ys=n,this.Ws=r,this.Jh=r.bn(t.nF).Mr(this.bi.barChartValueAxisTitleFont||this.bi.yAxisTitleFont).Ke(this.bi.barChartValueAxisTitleFillStyle||this.bi.yAxisTitleFillStyle),this.setTitleRotation(this.chart.Xs.getHeight({x:0,y:-90})),this.kr=this.ys.iA([this.Jh]).Ls(e.effectsText),this.oF=r.fh(t.nF).dh(e.barChartValueAxisStrokeStyle||this.bi.yAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.nA=t,this.oA=t):"object"==typeof t&&(this.nA=t.min,this.oA=t.max),this.chart.gi.Bs(),this}getThickness(){return{min:this.nA,max:this.oA}}setStrokeStyle(t){return this.oF.dh(t),this.chart.gi.Bs(),this}getStrokeStyle(){return this.oF.ao()}setTickStrategy(t,e){return super.cr(t,e)}th(t){const e=this.getInterval();this.oF.gh(this.chart.Xs.toPoint(-.5,this.ur)).Ah(this.chart.Xs.toPoint(-.5,this.dr)).setVisible(this.ui);const i="logarithmic"===this.ar.type?Math.sqrt(e.start+e.end):.5*(e.start+e.end),s=this.chart.Xs.toPoint(this.chart.categoryAxis.oi.Jt(-.5,t.lA*this.chart.Xs.fF),i),r=this.chart.Xs.toPoint(this.chart.Xs.AF,0);this.Jh.ih(s).Yl(r).setVisible(this.ui),t.ticksInfo.forEach((e,i)=>{i.Dr.ih(e.labelPosition).Yl(e.labelAlignment).wr(e.labelRotation).Ol(e.labelOffset.x,e.labelOffset.y);const s=i.xn.Fh;s.tickStyle!==Lr&&0!==s.tickLength&&t.plotLines.add({positions:[e.positionTicklineStart,e.positionTicklineEnd]},{lineStyle:s.tickStyle}),s.gridStrokeStyle!==Lr&&s.gridStrokeLength>0&&t.plotLines.add({positions:[e.positionTicklineStart,e.positionGridlineEnd]},{lineStyle:s.gridStrokeStyle})})}Nr(t){return{}}Yr(t,e,i,s,r){const n=e.Fh,o=this.chart.Xs.toPoint(-.5,t),a=this.chart.nF.Jt(o,this.chart.Xs.toPoint(n.getTickLength()*this.chart.Xs.fF,0)),h=this.chart.nF.Jt(o,this.chart.Xs.toPoint(n.gridStrokeLength*s.oppositeAxisSize*-this.chart.Xs.fF,0));return{keyValue:t,tickLevel:e,labelText:i,labelPosition:this.chart.nF.Jt(a,this.chart.Xs.toPoint(n.getTickPadding()*this.chart.Xs.fF,0)),labelAlignment:this.chart.Xs.toPoint(this.chart.Xs.AF,n.getLabelAlignment()),labelOffset:{x:0,y:0},labelRotation:e.Fh.labelRotation,positionTicklineStart:o,positionTicklineEnd:a,positionGridlineEnd:h}}Qr(t,e){return new kl(e,t,this.Ws,this.chart.nF)}Wr(t,e,i){let s=0;for(const o of this.Lh.values())for(const t of o.values()){const e=t.xn.Fh,i=this.chart.Xs.getWidth(t.Dr.Er().vu()),r=e.getTickLength()+e.getTickPadding()+i;s=Math.max(s,r)}const r=s+this.oF.ao().Yi()/2,n=this.chart.Xs.getWidth(this.Jh.Er().vu());return{lA:r,cA:n,uf:Qr(r+n,void 0!==this.nA?this.nA:0,void 0!==this.oA?this.oA:ro),ticksInfo:e,updatedTicks:i}}Kh(){return this.chart.nF}fn(t,e){return"linear"===this.ar.type?wa(t,e,this.oi):Ma(t,e,this.oi)}vn(t,e,i){return{start:t,end:e}}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}setPointerEvents(t){return this.L.setPointerEvents(t),this}getPointerEvents(){return this.L.getPointerEvents()}}class Yy extends Kf{constructor(t,e,i,s,r,n,o){super(t,e,i,s),this.mi=Jn(),this.S=0,this.gF=!1,this.L=new Ar,this.fs=t,this.fs=t,this.category=r,this.subCategory=n,this.Es=r,this.Xe=In(i.barChartBarFillStyle||i.rectangleSeriesFillStyle,o),this.Ze=In(i.barChartBarStrokeStyle||i.rectangleSeriesStrokeStyle,o),this.addEventListener("visiblechange",()=>this.fs.vF()),this.addEventListener("dispose",()=>{this.fs.vF(),this.fs.yF.delete(this.category),this.fs.pF.delete(this)})}Ji(t,e,i){const s=this.fs.gi.Ja(e);return{cursorPosition:{pointMarker:{x:s.engineX,y:s.engineY},pointMarkerScale:this.fs.gi.oi,resultTable:{x:s.engineX,y:s.engineY},resultTableScale:this.fs.gi.oi},category:this.category,subCategory:this.subCategory,bar:this,value:this.getValue()}}setValue(t){return this.gF=!0,this.S=t,this.fs.vF(),this.fs.gi.Bs(),this.fs.yF.delete(this.category),this.fs.pF.delete(this),this}getValue(){return this.S}get value(){return this.S}setFillStyle(t){return this.Xe="function"==typeof t?t(this.Xe):t,this.fs.vF(),this}getFillStyle(){return this.Xe}setStrokeStyle(t){return this.Ze="function"==typeof t?t(this.Ze):t,this.fs.vF(),this}getStrokeStyle(){return this.Ze}Av(){return this.Qg}setEffect(t){return this.fs.setBarsEffect(t),this}sh(){return{fill:this.Xe,lutValue:this.value}}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class Gy extends Hd{constructor(t,e,i,s,r,n,o){var a,h;let l;super(t,e,i,e.Vg("barChart bg",0),s,e.gi.bi.barChartBackgroundFillStyle||e.gi.bi.chartXYBackgroundFillStyle,e.gi.bi.barChartBackgroundStrokeStyle||e.gi.bi.chartXYBackgroundStrokeStyle,e.gi.bi.barChartTitleFont||e.gi.bi.chartXYTitleFont,e.gi.bi.barChartTitleFillStyle||e.gi.bi.chartXYTitleFillStyle,e.gi.bi.barChartTitleShadow||e.gi.bi.chartXYTitleShadow,n,null===(a=null==o?void 0:o.legend)||void 0===a?void 0:a.customLegend),this.coordsBars="barChart",this.mF=Xy.Descending,this.SF=this.bi.barChartCategoryLabels,this.cF=this.bi.barChartValueLabelsAfterBars,this.bF=!0,this.Ub=Wn(),this.yF=new Map,this.pF=new Map,this.lF="positive",this.xF="columns",this.MF=!0,this.wF=new Map,this._F={speed:1},this.tk={speed:1},this.kF=.08,this.CF=[],this.TF=!1,this.FF={left:2,right:2,top:2,bottom:2},this.IF=[],this.ga=t=>{this.nF.X(t.engineWidth,t.engineHeight),this.TF=!0},this.L=new Ar,this.gi.ka(_l.mo),this.PF=this.bi.barChartCornerRadius,this.Xs="horizontal"===(null==o?void 0:o.type)?Hy:Uy,this.Yh.Jr("Bar Chart"),this.LF=e.Cm("barChart plotting 1",0),this.BF=e.Cm("barChart plotting 2",1),this.dF="logarithmic"===(null===(h=null==o?void 0:o.valueAxis)||void 0===h?void 0:h.type),this.dF?"horizontal"===this.Xs.DF?(l=i.d1({scale1DConstructor:er,dimension:"y"}),this.nF=(new nr).Qt(i.d1({scale1DConstructor:Xo,dimension:"x"}),l)):(l=i.d1({scale1DConstructor:er,dimension:"x"}),this.nF=(new nr).Qt(l,i.d1({scale1DConstructor:Xo,dimension:"y"}))):(this.nF=i.d2({scaleXYConstructor:rr}),l=this.Xs.getWidth(this.nF)),this.RF=this.ys.iA(),this.Yb=new Dd(()=>this.Ub.Zi(this.LF.fd(this.nF).il(0)),(t,e,i)=>(t.Ke(i.fillStyle).Qe(i.strokeStyle),e.map(e=>{const i=e.existingMember||t.Go();return i.yd(e.x1,e.y1,e.x2,e.y2).vd(e.rounding),this.Ub.Qi(i,e.bar),e.bar.Ts([i]),i})),()=>{this.Ub.zi()},t=>{this.RF.ks(t)}),this.gy=this.Mg.qe(this.nF).Ke(this.bi.barChartSeriesBackgroundFillStyle||sa).Qe(Lr),this.vy=this.Mg.qe(this.nF).Ke(sa).Qe(this.bi.barChartSeriesBackgroundStrokeStyle||Lr).setPointerEvents(!1),super.Ay(this.gy,this.vy),this.categoryAxis=new Ny(this,this.bi,!1!==(null==o?void 0:o.animationsEnabled),l,this.BF,this.ys),this.categoryAxis.setInterval(this.Xs.getWidth({x:{start:-.5,end:.5},y:{start:.5,end:-.5}}));const c=ka(null==o?void 0:o.valueAxis);this.valueAxis=new Oy(this,this.bi,!1!==(null==o?void 0:o.animationsEnabled),this.Xs.getHeight(this.nF),this.BF,this.ys,c.type),this.EF=new ud(()=>this.BF.bn(this.nF).Sn(Zn).mn(Zn).il(1)),this.OF=new Dd(()=>this.Mg.gA(this.nF).setPointerEvents(!1),(t,e,i)=>(t.dh(i.lineStyle),e.map(e=>{let{positions:i,existingMember:s}=e;return(s||t.Go()).yA(i[0],i[1])})));const u=e.Dm(),d=$r(o?o.cursorBuilder:void 0,Ef);this.Rm=ym(this,u,d.sm(u,this.uiScale,this.uiScale,Jr,this.bi),this,"show-pointed",jy,()=>0),this.addEventListener("resize",this.ga),this.zg(r,this.nF),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled)),void 0!==(null==o?void 0:o.legend)&&this.legend.setOptions(o.legend)}getSeries(){return this.ny}setCornerRadius(t){return this.PF=t,this.bF=!0,this.gi.Bs(),this}getCornerRadius(){return this.PF}setCursor(t){return this.Rm.setCursor(t),this}getCursor(){return this.Rm.getCursor()}setCursorMode(t){return this.Rm.setCursorMode(t),this}getCursorMode(){return this.Rm.getCursorMode()}setCustomCursor(t){return this.Rm.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.Rm.Ym(t),this}setCursorFormatting(t){return this.Rm.setCursorFormatting(t),this}getCursorFormatting(){return this.Rm.getCursorFormatting()}addCursor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ef;const e=this.Tg(),i=t.sm(e,this.uiScale,this.uiScale,this.wg(e),this.bi);return this.Eg(i),i}setBarsMargin(t){return this.kF=Qr(t,0,.49),this.bF=!0,this.gi.Bs(),this}getBarsMargin(){return this.kF}setBarsEffect(t){return this.RF.Ls(t),this.gi.Bs(),this}getBarsEffect(){return this.RF.Ds()}setData(t){let e;if(Array.isArray(t))e=[],t.forEach((t,i)=>{"string"==typeof t?e.push({category:t}):"number"==typeof t?e.push({category:"Category ".concat(i+1),value:t}):"object"==typeof t&&e.push(t)});else{e=[];const i=Object.keys(t);for(const s of i){const i=t[s];e.push({category:s,value:"number"==typeof i?i:void 0})}}return this.zF("columns",e),this}setDataStacked(t,e){const i=[];return e.forEach(e=>{const{subCategory:s,values:r}=e;r.forEach((e,r)=>{const n=t[r];i.push({category:n,subCategory:s,value:e})})}),this.zF("stacks",i),this}setDataGrouped(t,e){const i=[];return e.forEach(e=>{const{subCategory:s,values:r}=e;r.forEach((e,r)=>{const n=t[r];i.push({category:n,subCategory:s,value:e})})}),this.zF("groups",i),this}zF(t,e){this.ny.length>0&&this.gi.ka(_l.Lo),this.xF=t,this.IF=e.map(t=>({category:t.category,subCategory:t.subCategory})),this.VF(e);const i=Nn(e.map(t=>t.category)),s=i.length,r=Nn(e.map(t=>t.subCategory)).filter(t=>void 0!==t);if(e.forEach(e=>{let s=this.ny.find(t=>t.category===e.category&&t.subCategory===e.subCategory);if(!s){const n=i.indexOf(e.category),o=void 0!==e.subCategory&&r.includes(e.subCategory)?r.indexOf(e.subCategory):void 0;s=new Yy(this,this.ly,this.bi,this.gi.ys,e.category,e.subCategory,$r(o,n)),this.yy(s,"groups"===t||"stacks"===t?{legend:null}:void 0),this.wF.set(s,{category:n,valueStart:this.dF?1e-6:0,valueEnd:void 0!==e.value?e.value:0})}void 0!==e.value&&s.setValue(e.value)}),this.ny.slice().forEach(t=>{void 0===e.find(e=>e.category===t.category&&e.subCategory===t.subCategory)&&(t.dispose(),this.wF.delete(t))}),this.categoryAxis.setInterval(this.Xs.getWidth({x:{start:-.5,end:Math.max(s,1)-.5},y:{start:Math.max(s,1)-.5,end:-.5}})),this.aF=0===this.ny.length?void 0:"stacks"!==t?this.ny.reduce((t,e)=>({min:Math.min(t.min,e.getValue()),max:Math.max(t.max,e.getValue())}),{min:ro,max:no}):{min:0,max:i.reduce((t,i)=>Math.max(t,e.reduce((t,e)=>e.category!==i?t:void 0!==e.value?t+e.value:t,0)),0)},this.aF&&(this.lF=this.aF.min>=0?"positive":this.aF.max<=0?"negative":"bipolar",("bipolar"===this.lF||"negative"===this.lF)&&this.dF))throw new Error("LightningChart JS BarChart bipolar/negative data + logarithmic value axis combination not supported.");if(this.NF&&this.NF(),"groups"===t||"stacks"===t){const t=r.map(t=>(t=>{let e=!1;const i=new Array;return t.forEach(s=>{const r=i=>{e||(e=!0,t.forEach(t=>s!==t?t.setHighlight(i.highlight):void 0),e=!1)};s.addEventListener("highlightchange",r),i.push(()=>s.removeEventListener("highlightchange",r))}),t.forEach(e=>{const s=()=>{const i=t.indexOf(e);i>=0&&t.splice(i,1)};e.addEventListener("dispose",s),i.push(()=>e.removeEventListener("dispose",s))}),()=>{i.forEach(t=>t())}})(this.ny.filter(e=>e.subCategory===t)));this.NF=()=>t.forEach(t=>t())}this.Os.forEach(t=>{t.dg()&&t.add(this)}),this.VF(this.ny),this.yF.clear(),this.pF.clear(),this.bF=!0,this.gi.Bs()}setCategoryLabels(t){const e="function"==typeof t?this.SF?t(this.SF):this.SF:t;return this.SF=e?l(l({},this.bi.barChartCategoryLabels),e):void 0,this.yF.clear(),this.gi.Bs(),this.TF=!0,this}getCategoryLabels(){return this.SF}setValueLabels(t){var e;const i="function"==typeof t?this.cF?t(this.cF):this.cF:t,s=(null==i?void 0:i.position)||(null===(e=this.cF)||void 0===e?void 0:e.position);return i&&s?"after-bar"===s?this.cF=l(l({},this.bi.barChartValueLabelsAfterBars),i):"inside-bar"!==s&&"inside-bar-start"!==s&&"inside-bar-centered"!==s&&"inside-bar-end"!==s||(this.cF=l(l({},this.bi.barChartValueLabelsInsideBars),i)):this.cF=void 0,this.pF.clear(),this.gi.Bs(),this.TF=!0,this}getValueLabels(){return this.cF}setLabelFittingEnabled(t){return this.MF=t,this.gi.Bs(),this}getLabelFittingEnabled(){return this.MF}setLabelFittingMargins(t){return this.FF="object"==typeof t?t:"number"==typeof t?{left:t,right:t,top:t,bottom:t}:Zn,this.TF=!0,this.gi.Bs(),this}getLabelFittingMargins(){return this.FF}getBar(t,e){if(("groups"===this.xF||"stacks"===this.xF)&&void 0===e)throw new Error("LightningChart JS BarChart.getBar() | `subCategory` parameter is required for grouped and stacked bar charts!");const i=this.ny.find(i=>i.category===t&&(void 0===e||e===i.subCategory));if(!i)throw new Error('BarChart.getBar() no such bar: "'.concat(t,'" ').concat(e?'"'.concat(e,'"'):""));return i}getBars(){return this.ny}setSorting(t){this.mF=t;const e=this.ny.slice();return this.ny.length=0,this.ny.push(...On(this.IF.map(t=>e.find(e=>e.category===t.category&&(void 0===t.subCategory||t.subCategory===e.subCategory))))),this.VF(this.ny),this.gi.Bs(),this.bF=!0,this}getSorting(){return this.mF}setAnimationCategoryPosition(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._F=t?{speed:e}:void 0,this.gi.Bs(),this}setAnimationValues(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.tk=t?{speed:e}:void 0,this.gi.Bs(),this}translateCoordinate(t,e,i){if(i&&va(t)&&ma(e))return super.translateCoordinate(t,e,i);const s=e;let r;if(ya(t))r=this.gi.Ja(t);else if(va(t)){const e=hr(t,this.Jf,this.gi.oi);r={engineX:e.x,engineY:e.y}}else{if(!(t=>!!(t&&"object"==typeof t&&"iCategory"in t&&"number"==typeof t.iCategory&&"value"in t&&"number"==typeof t.value))(t))throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Input coordinate system not recognized.");{const e=hr(this.Xs.toPoint(t.iCategory,t.value),this.nF,this.gi.oi);r={engineX:e.x,engineY:e.y}}}if(pa(s))return this.gi.Qa(r);if("barChart"===s){const t=hr({x:r.engineX,y:r.engineY},this.gi.oi,this.nF);return{iCategory:this.Xs.getWidth(t),value:this.Xs.getHeight(t)}}if(ma(s))return hr({x:r.engineX,y:r.engineY},this.gi.oi,this.Jf);throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Target coordinate system not recognized.")}gg(){if("columns"===this.xF)return this.ny;const t=Nn(On(this.ny.map(t=>t.subCategory)));return On(t.map(t=>{const e=this.ny.filter(e=>e.subCategory===t),i=e[0];if(i)return{Ys:()=>{},getVisible:()=>i.getVisible(),setVisible:t=>{e.forEach(e=>e.setVisible(t))},getName:()=>t,sh:()=>i.sh()}}))}th(t){var e,i,s;super.th(t);const r=this.EF.LA(),n=this.OF.LA(),o=this.ny.filter(t=>t.getVisible()&&t.gF),a=Nn(o.map(t=>t.category)),h=Nn(On(o.map(t=>t.subCategory))),l=5e-4*t*((null===(e=this._F)||void 0===e?void 0:e.speed)||0),c=.003*t*((null===(i=this._F)||void 0===i?void 0:i.speed)||0),u=this.valueAxis.oi,d=u instanceof er?(t,e)=>{var i;return wa(t,e,u,(null===(i=this.tk)||void 0===i?void 0:i.speed)||0)}:(t,e)=>{var i;return Ma(t,e,u,(null===(i=this.tk)||void 0===i?void 0:i.speed)||0)};let f;const g=null!==(s="positive"===this.lF&&this.aF?Math.min(this.aF.min,this.valueAxis.getInterval().start,this.valueAxis.getInterval().end)-(this.aF.max-this.aF.min):"negative"===this.lF&&this.aF?Math.max(this.aF.max,this.valueAxis.getInterval().start,this.valueAxis.getInterval().end)+(this.aF.max-this.aF.min):void 0)&&void 0!==s?s:0;"columns"===this.xF?f=o.map(t=>({bar:t,position:{category:a.indexOf(t.category),valueStart:this.dF?1e-6:g,valueEnd:t.value}})):"groups"===this.xF?f=o.map(t=>{const e=a.indexOf(t.category),i=h.indexOf(t.subCategory),s=1/(h.length+2*(h.length+1)*this.kF),r=this.kF*s;return{bar:t,position:{category:e+(i-(h.length-1)/2)*(s+r),valueStart:this.dF?1e-6:g,valueEnd:t.value}}}):(f=[],a.forEach(t=>{const e=o.filter(e=>e.category===t);let i=this.dF?1e-6:0;e.forEach(e=>{f.push({bar:e,position:{category:a.indexOf(t),valueStart:i,valueEnd:i+e.value}}),i+=e.value})})),f.forEach(t=>{const{bar:e,position:i}=t;let s,r,n=this.wF.get(e);void 0===n&&(n=i);const o=i.valueStart;if(this._F&&n.category!==i.category){const t=Math.sign(i.category-n.category);s=n.category+l*t+c*(i.category-n.category),t!==Math.sign(i.category-s)&&(s=i.category)}else s=i.category;if(this.tk&&n.valueEnd!==i.valueEnd){const t=Math.sign(i.valueEnd-n.valueEnd);r=d(n.valueEnd,i.valueEnd),t!==Math.sign(i.valueEnd-r)&&(r=i.valueEnd)}else r=i.valueEnd;this.wF.set(e,{category:s,valueStart:o,valueEnd:r}),s===i.category&&r===i.valueEnd||this.gi.Bs(!0),s===n.category&&r===n.valueEnd||(this.bF=!0)});const p=[...this.ny];(this.CF.length!==p.length||this.CF.some((t,e)=>t!==p[e]))&&(this.Os.forEach(t=>t.Ag(this.ny)),this.CF=p);const y=Md.Wg(this.Yh,this.Ng),m=this.Os.reduce((t,e)=>{const i=e.Er(y,this.On);return{top:Math.max(t.top,i.top),bottom:Math.max(t.bottom,i.bottom),left:Math.max(t.left,i.left),right:Math.max(t.right,i.right)}},{top:0,bottom:0,left:0,right:0});Md.Xg(this.Yh,this.Ng,this.uiScale.ri(),this.On,m);const v=o.length>0;this.categoryAxis.dn(),this.valueAxis.dn();const{labelMarginBeforeCategoryAxisPixels:x,labels:b}=v?this.GF(a,h,o,r,n):{labelMarginBeforeCategoryAxisPixels:0,labels:[]},S=this.categoryAxis.Er({physicalAxisSize:this.categoryAxis.oi.Mt(),lA:x}),A=this.valueAxis.Er({plotLines:n,physicalAxisSize:this.valueAxis.oi.Mt(),oppositeAxisSize:this.Xs.getWidth(this.nF).Mt()});this.nF.qt([this.nt.bottom+this.On.bottom+m.bottom+("vertical"===this.Xs.DF?S.uf:0),this.nt.top+this.On.top+y+m.top+("horizontal"===this.Xs.DF?A.uf:0)]),this.nF.Kt([this.nt.left+this.On.left+m.left+this.Xs.getHeight({x:S.uf,y:A.uf}),this.nt.right+this.On.right+m.right]),this.LF.ym({x:this.nF.x.bt(),y:this.nF.y.bt(),width:this.nF.x.Mt(),height:this.nF.y.Mt()}),this.mg&&this.mg();const E={x:Math.min(this.nF.x.getInnerStart(),this.nF.x.getInnerEnd()),y:Math.min(this.nF.y.getInnerStart(),this.nF.y.getInnerEnd())},k=Math.max(this.nF.x.getInnerStart(),this.nF.x.getInnerEnd()),w=Math.max(this.nF.y.getInnerStart(),this.nF.y.getInnerEnd()),M={x:k-E.x,y:w-E.y};if(this.gy.ih(E),this.gy.X(M),this.vy.ih(E),this.vy.X(M),this.categoryAxis.th(S),this.valueAxis.th(A),super.Og(),this.Rm.th(!1,this.ny,void 0),(this.bF||this.TF)&&this.MF){const t=b.map(t=>{const e=t.setVisible(!0).Er().fu();if(0!==this.FF.bottom||0!==this.FF.left||0!==this.FF.right||0!==this.FF.top){const i=Math.sign(this.nF.x.$-this.nF.x.G),s=Math.sign(this.nF.y.$-this.nF.y.G),r=s>0?e.min.y:e.max.y,n=s>0?e.max.y:e.min.y,o=i>0?e.min.x:e.max.x,a=i>0?e.max.x:e.min.x,h=t.oi.Jt({x:o,y:r},{x:-this.FF.left,y:-this.FF.bottom}),l=t.oi.Jt({x:a,y:n},{x:this.FF.right,y:this.FF.top});return{min:{x:Math.min(h.x,l.x),y:Math.min(h.y,l.y)},max:{x:Math.max(h.x,l.x),y:Math.max(h.y,l.y)}}}return e});for(let e=0;e<b.length;e+=1){if(!b[e].getVisible())continue;const i=t[e];let s;do{s=b.findIndex((s,r)=>r!==e&&b[r].getVisible()&&lo(i,t[r])),s>=0&&b[s].setVisible(!1)}while(s>=0)}}if(this.bF){const t=this.Yb.LA(),e="groups"===this.xF?1/(h.length+2*(h.length+1)*this.kF):1-2*this.kF;o.forEach(i=>{const s=this.wF.get(i);if(void 0===s)return;const r=s.category-.5*e,n=s.category+.5*e,o=this.Xs.toPoint(r,s.valueStart),a=this.Xs.toPoint(n,s.valueEnd);let l;this.PF&&(l={extent:this.PF,c_x1_y2:"vertical"===this.Xs.DF,c_x2_y2:"vertical"===this.Xs.DF||"horizontal"===this.Xs.DF,c_x1_y1:!1,c_x2_y1:"horizontal"===this.Xs.DF},"stacks"===this.xF&&i.subCategory&&h.indexOf(i.subCategory)!==h.length-1&&(l=void 0)),t.add({mi:i.mi,bar:i,x1:o.x,y1:o.y,x2:a.x,y2:a.y,rounding:l},{fillStyle:i.Xe,strokeStyle:i.Ze})}),t.finishPlot()}r.finishPlot(),n.finishPlot(),this.bF=!1,this.TF=!1,this.Os.forEach(t=>t.th(y,this.On))}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationCategoryPosition(t),this.setAnimationValues(t),this.valueAxis.setAnimationsEnabled(t),this.categoryAxis.setAnimationsEnabled(t),this}dispose(){return this.BF.N(),this.LF.N(),this.Rm.N(),super.dispose()}VF(t){const e=this.mF;e&&t.sort((i,s)=>e({category:i.category,value:t.reduce((t,e)=>t+(e.category===i.category&&e.value||0),0)},{category:s.category,value:t.reduce((t,e)=>t+(e.category===s.category&&e.value||0),0)}))}GF(t,e,i,s,r){let n=0;const o=this.SF,a=this.cF,h=this.valueAxis.getInterval(),l=[];if(o&&o.labelFillStyle!==sa){const e=o.tickLength+o.labelMargin,a=this.Xs.toPoint(0,1),c={qd:t.map((t,s)=>{const r=i.reduce((e,i)=>i.category!==t?e:e+i.value,0),n=o.formatter(t,r);if(!n)return;const l=s;return void 0!==l?{text:n,position:this.Xs.toPoint(l,this.valueAxis.oi.Jt(h.start,-e)),alignment:a,rotation:o.labelRotation,sizePixels:this.$F(t,r)}:void 0}),Zn:o.labelFont,oi:this.nF};c.qd.forEach(t=>{t&&l.push(s.add().Jr(t.text).ih(t.position).Yl(t.alignment).wr(t.rotation).Ke(o.labelFillStyle).Mr(o.labelFont).Zr(o.labelShadow))}),o.tickStyle!==Lr&&0!==o.tickLength&&c.qd.forEach(t=>{if(!t)return;const e=this.Xs.getWidth(t.position);r.add({positions:[this.Xs.toPoint(e,this.valueAxis.oi.getInnerStart()),this.Xs.toPoint(e,this.valueAxis.oi.Jt(h.start,-o.tickLength))]},{lineStyle:o.tickStyle})}),n=c.qd.reduce((t,e)=>e?Math.max(t,this.Xs.getHeight(e.sizePixels)):t,0)+o.tickLength+o.labelMargin}if(a&&a.labelFillStyle!==sa){const r={qd:[],Zn:a.labelFont,oi:this.nF};"stacks"===this.xF&&a.displayStackedSum&&r.qd.push(...t.map((t,s)=>{const r=i.reduce((e,i)=>e+(i.category===t?i.value:0),0),n=a.formatter({chart:this,bar:void 0,category:t,value:r,subCategory:void 0});if(!n)return;const o=i.filter(e=>e.category===t).sort((t,i)=>{var s,r;return e.indexOf(null!==(s=t.subCategory)&&void 0!==s?s:"")-e.indexOf(null!==(r=i.subCategory)&&void 0!==r?r:"")}),h=o[o.length-1],l=this.wF.get(h);return void 0!==l?{text:n,position:this.Xs.toPoint(l.category,this.valueAxis.oi.Jt(l.valueEnd,a.labelMargin*Math.sign(l.valueEnd))),alignment:this.Xs.toPoint(0,-1*Math.sign(l.valueEnd)),rotation:a.labelRotation,sizePixels:this.gi.tr.Th(n,a.labelFont,a.labelRotation)}:void 0})),"after-bar"!==a.position||"stacks"===this.xF&&!a.displayStackedIndividuals?"inside-bar"!==a.position&&"inside-bar-start"!==a.position&&"inside-bar-centered"!==a.position&&"inside-bar-end"!==a.position||r.qd.push(...i.map((t,e)=>{const i=a.formatter({chart:this,bar:t,category:t.category,value:t.value,subCategory:t.subCategory});if(!i)return;const s=this.wF.get(t);if(void 0===s)return;const r="bipolar"===this.lF?Math.sign(s.valueEnd):"negative"===this.lF?-1:1,n=this.Xs.toPoint(0,"inside-bar"===a.position||"inside-bar-end"===a.position?1*r:"inside-bar-centered"===a.position?0:-1*r);return{text:i,position:this.Xs.toPoint(s.category,"inside-bar"===a.position||"inside-bar-end"===a.position?this.valueAxis.oi.Jt(s.valueEnd,-a.labelMargin*r):"inside-bar-centered"===a.position?(s.valueStart+s.valueEnd)/2:this.valueAxis.oi.Jt(s.valueStart,a.labelMargin*r)),alignment:n,rotation:a.labelRotation,sizePixels:this.UF(t)}})):r.qd.push(...i.map((t,e)=>{const i=a.formatter({chart:this,bar:t,category:t.category,value:t.value,subCategory:t.subCategory});if(!i)return;const s=this.wF.get(t);return void 0!==s?{text:i,position:this.Xs.toPoint(s.category,this.valueAxis.oi.Jt(s.valueEnd,a.labelMargin*Math.sign(s.valueEnd))),alignment:this.Xs.toPoint(0,-1*Math.sign(s.valueEnd)),rotation:a.labelRotation,sizePixels:this.UF(t)}:void 0})),r&&r.qd.forEach(t=>{t&&l.push(s.add().Jr(t.text).ih(t.position).Yl(t.alignment).wr(t.rotation).Ke(a.labelFillStyle).Mr(a.labelFont).Zr(a.labelShadow).setPointerEvents(!1))})}return{labelMarginBeforeCategoryAxisPixels:n,labels:l}}$F(t,e){if(!this.SF||this.SF.labelFillStyle===sa)return{x:0,y:0};const i=this.yF.get(t);if(i)return i;const s=this.SF.formatter(t,e),r=this.gi.tr.Th(s,this.SF.labelFont,this.SF.labelRotation);return r.isEstimate?this.gi.Bs(!0):this.yF.set(t,r),r}UF(t){if(!this.cF||this.cF.labelFillStyle===sa)return{x:0,y:0};const e=this.pF.get(t);if(e)return e;const i=this.gi.tr.Th(this.cF.formatter({chart:this,bar:t,category:t.category,value:t.value,subCategory:t.subCategory}),this.cF.labelFont,this.cF.labelRotation);return i.isEstimate?this.gi.Bs(!0):this.pF.set(t,i),i}uF(){return this.ny.reduce((t,e)=>{const i=this.UF(e);return{x:Math.max(t.x,i.x),y:Math.max(t.y,i.y)}},{x:0,y:0})}vF(){this.bF=!0,this.gi.Bs()}Y(){return super.Y(),this.nF.Y(),this}j(){return super.j(),this.nF.j(),this}getMinimumSize(){return{x:200,y:200}}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}const Xy={Disabled:void 0,None:void 0,Ascending:(t,e)=>t.value-e.value,Descending:(t,e)=>e.value-t.value,Alphabetical:(t,e)=>t.category.localeCompare(e.category)},Uy=l(l({},Su),{},{DF:"vertical",fF:-1,AF:1}),Hy=l(l({},Au),{},{DF:"horizontal",fF:1,AF:-1}),jy=(t,e,i)=>{const s=[[{component:e.bar,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}]],r=t.valueAxis.getTitle();return r&&s.push([r]),e.subCategory?s.push([e.subCategory,"",{text:Ea(t.valueAxis.formatValue(e.bar.getValue()),t.valueAxis),font:{weight:"bold"}}]):s.push({text:Ea(t.valueAxis.formatValue(e.bar.getValue()),t.valueAxis),font:{weight:"bold"}}),s},Wy=(t,e)=>Math.abs(t)+Math.abs(e);function Zy(t,e){const i=t.reduce(Wy,0),s=(r=t,Math.max(...r.map(t=>t)));var r;const n=(t=>Math.min(...t.map(t=>t)))(t);return Math.max(e**2*s/i**2,i**2/(e**2*n))}const Jy=t=>{let{height:e,width:i}=t;return e>i?{value:i,vertical:!1}:{value:e,vertical:!0}},qy=t=>{let{data:e,dimensions:i}=t;const{x:s,y:r,width:n,height:o}=i,a=e.map(t=>t.value).reduce(Wy,0),h=e.map(t=>t.animatedValue).reduce(Wy,0),c=e.map(t=>t.animatedValue*o*n/h),u=c.reduce((t,e)=>t+e,0),d=c.map(t=>t/u*100),f=c.filter((t,e)=>d[e]),g={children:[],id:0,parentID:-1,name:"Main Rectangle",value:a,animatedValue:h,x:s,y:r,width:n,height:o,nodeIndex:-1,userNode:{name:"Main Rectangle",value:a}};if(1===e.length){const t=l(l({},e[0]),{},{x:i.x,y:i.y,width:i.width,height:i.height,userNode:l(l({},e[0].userNode),{},{value:e[0].value})});g.children.push(t)}else Ky(f,Jy(g).value,e,g);return g.children},Qy=(t,e,i,s,r)=>{const n=t.reduce(Wy,0)/e;t.forEach((t,e)=>{const o=Math.abs(t)/n,{x:a,y:h,children:c}=r,u=s[c.length],d=l(l({},u),{},{x:a,y:h,width:i?n:o,height:i?o:n,userNode:l(l({},u.userNode),{},{value:u.value})});i?r.y-=o:r.x+=o,c.push(d)}),i?(r.x+=n,r.y+=e,r.width-=n):(r.x-=e,r.y-=n,r.height-=n)},Ky=(t,e,i,s)=>{const r=[{children:t,width:e,row:[]}];for(;r.length>0;){const t=r.pop();if(!t)continue;const{children:e,width:n,row:o}=t;let a=0;const h=[...o];for(;a<e.length;){const t=[...h,e[a]],o=Zy(h,n),l=Zy(t,n);if(!(0===h.length||o>l)){Qy(h,n,Jy(s).vertical,i,s),r.push({children:e.slice(a),width:Jy(s).value,row:[]});break}h.push(e[a]),a+=1}a===e.length&&Qy(h,n,Jy(s).vertical,i,s)}};class $y extends wd{constructor(t,e,i,s,r,n,o){var a;if(super(t,e,i,e.Vg("treeMapChart bg",0),s,e.gi.bi.treeMapChartBackgroundFillStyle||e.gi.bi.chartXYSeriesBackgroundFillStyle,e.gi.bi.treeMapChartBackgroundStrokeStyle||e.gi.bi.chartXYBackgroundStrokeStyle,e.gi.bi.treeMapChartTitleFont||e.gi.bi.chartXYTitleFont,e.gi.bi.treeMapChartTitleFillStyle||e.gi.bi.chartXYTitleFillStyle,e.gi.bi.treeMapChartTitleShadow||e.gi.bi.chartXYTitleShadow,o,null===(a=null==n?void 0:n.legend)||void 0===a?void 0:a.customLegend),this.YF=new Map,this.jF=[],this.HF={},this.WF=Fs([]),this.tk={speed:1},this.XF=ro,this.ZF="Go Back",this.JF=[],this.QF=this.bi.treeMapChartPathLabelFillStyle||this.bi.uiTextFillStyle,this.KF=this.bi.treeMapChartPathLabelFont||this.bi.uiTextFont,this.qF=this.bi.treeMapChartLabelHeaderFillStyle||this.bi.uiTextFillStyle,this.tI=this.bi.treeMapChartLabelHeaderFont||this.bi.uiTextFont,this.iI=this.bi.treeMapChartLabelFillStyle||this.bi.uiTextFillStyle,this.sI=this.bi.treeMapChartLabelFont||this.bi.uiTextFont,this.qm=!0,this.WA=!1,this.eI=this.bi.treeMapChartParentColor||Os,this.hI=this.bi.treeMapChartNodeStrokeStyle||this.bi.uiBackgroundStrokeStyle,this.rI=Zn,this.$b=this.bi.treeMapChartCornerRadius,this.iS=()=>{this.gi.Bs(),this.WA=!0},this.nI=(t,e)=>{var i;const{collectionMember:s}=e,r=this.oI(s);r&&(this.yS=this.aI(r,t),this.qm&&this.gi.Ms.Vs(s,!0),(null===(i=this.getUserInteractions().drillDown)||void 0===i?void 0:i.click)&&this.engine.setMouseStyle(Xh.Point),this.gi.Bs())},this.lI=(t,e)=>{const{collectionMember:i}=e;this.oI(i)&&(this.yS=void 0,this.qm&&this.gi.Ms.Vs(i,!1),this.engine.setMouseStyle(Xh.Default),this.gi.Bs())},this.cI=(t,e)=>{var i;const{collectionMember:s}=e,r=this.oI(s);r&&(this.yS=this.aI(r,t),this.qm&&this.gi.Ms.Vs(s,!0),(null===(i=this.getUserInteractions().drillDown)||void 0===i?void 0:i.click)&&this.engine.setMouseStyle(Xh.Point),this.gi.Bs())},this.uI=(t,e)=>{var i;if(t.defaultPrevented)return;const{collectionMember:s}=e,r=this.oI(s);if(r){if(null===(i=this.getUserInteractions().drillDown)||void 0===i?void 0:i.click){const e=(null==r?void 0:r.children.length)?r:r.parentID?this.HF[r.parentID]:void 0;e&&(this.WF._([e]),this.yS=void 0,this.L.D("viewchange",{nodes:this.WF.C().map(t=>t.userNode)}),this.WA=!0),t&&mn(t)}this.gi.Bs()}},this.dI=t=>{const e=this.HF[this.JF[t].id]?[this.HF[this.JF[t].id]]:this.jF;this.WF._(e),this.L.D("viewchange",{nodes:e.map(t=>t.userNode)}),this.WA=!0,this.gi.Bs()},this.nodes=new Ar,this.L=new Ar,this.bi.treeMapChartNodeColors)this.fI=this.bi.treeMapChartNodeColors;else{const t=this.bi.pointSeriesFillStyle,e=t=>ha(t)?t.getColor():Os;this.fI="function"==typeof t?new Array(5).fill(0).map((i,s)=>e(t(s))):[e(t)]}this.gi.ka(_l.Ro),this.gk=e.km("TreeMapChart plotting",0),this.vk=e.km("TreeMap UI plotting",1),this.addEventListener("resize",this.iS),this.Yh.Jr("TreeMap Chart");const h=e.Dm(),l=$r(n?n.cursorBuilder:void 0,wf);this.Rm=ym(this,h,l.sm(h,this.uiScale,this.uiScale,Jr,this.bi),void 0,"show-pointed",tm,()=>0),this.AI=this.ys.iA(),this.zg(r,this.uiScale),this.rf=this.gk.fd(this.Jf).Ke(new la).Qe(this.hI),this.gI=this.gi.Ms.No(this,{animationEnabled:!1!==(null==n?void 0:n.animationsEnabled)}),this.vI=new ud(()=>this.vk.bn(this.Jf).setPointerEvents(!1)),this.yI=new ud(()=>this.vk.bn(this.uiScale)),this.rf.setPointerEvents(!0),this.nodes.Vi(this.rf,t=>{const e=this.oI(t);if(e)return e.userNode}),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled)),this.rf.addEventListener("pointerenter",this.nI),this.rf.addEventListener("pointerleave",this.lI),this.rf.addEventListener("click",this.uI),this.rf.addEventListener("pointermove",this.cI),void 0!==(null==n?void 0:n.legend)&&this.legend.setOptions(n.legend)}setCornerRadius(t){return this.$b=t,this.WA=!0,this.gi.Bs(),this}getCornerRadius(){return this.$b}setData(t){t=Array.isArray(t)?t.slice():[t];const{pI:e}=(()=>{let t=0;return{pI:e=>{var i;const s=e.map((t,e)=>({node:t,parent:null})),r=[];for(;s.length>0;){const e=s.pop();if(!e)continue;const{node:n,parent:o}=e;t+=1;const a={id:t,parentID:null==o?void 0:o.id,name:n.name,value:Number(n.value)||0,animatedValue:Number(n.value)||0,children:[],nodeIndex:o?o.nodeIndex:-1,userNode:n};o?o.children.push(a):r.push(a),null===(i=n.children)||void 0===i||i.forEach(t=>{s.push({node:t,parent:a})})}const n=t=>{t.children.forEach(n),t.children.length>0&&(t.value+=t.children.reduce((t,e)=>t+e.value,0),t.animatedValue+=t.children.reduce((t,e)=>t+e.animatedValue,0),t.children.sort((t,e)=>e.animatedValue-t.animatedValue))};r.forEach(n);const o=1===e.length?r[0].children:r;return o.sort((t,e)=>e.animatedValue-t.animatedValue),o.forEach((t,e)=>{t.nodeIndex=e;const i=e=>{e.children.forEach(e=>{e.nodeIndex=t.nodeIndex,i(e)})};i(t)}),r}}})(),i=e(t);return i.forEach(t=>{const e=this.HF[t.id];e&&this.mI(t,e)}),this.yS=void 0,this.WF._(i),this.jF=i,this.HF=this.SI(i),this.WA=!0,this.gi.Bs(),this}setAnimationValues(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.tk=t?{speed:e}:void 0,this.gi.Bs(),this}setInitPathButtonText(t){return this.ZF=t,this.WA=!0,this.gi.Bs(),this}setDisplayedLevelsCount(t){return this.XF=t,this.WA=!0,this.gi.Bs(),this}setDrillDownNode(t){var e,i;if(this.yS=void 0,void 0===t)this.WF._(this.jF);else{const s=[...this.jF];for(;s.length>0;){const r=s.pop();if(r){if(void 0!==r.value&&r.userNode===t||r.parentID&&Array.isArray(t)&&(null===(i=null===(e=this.HF[r.parentID])||void 0===e?void 0:e.userNode)||void 0===i?void 0:i.children)===t){const t=r.children.length?r:r.parentID?this.HF[r.parentID]:this.jF[0];this.WF._([t]);break}if(r.children)for(let t=r.children.length-1;t>=0;t-=1)s.push(r.children[t])}}}return this.L.D("viewchange",{nodes:this.WF.C().map(t=>t.userNode)}),this.WA=!0,this.gi.Bs(),this}setNodeColoring(t){return t instanceof Array?(this.rf.Ke(new la),this.fI=t):(this.rf.Ke(t),this.Os.forEach(t=>{t.dg()&&t.add(this)})),this.Os.forEach(t=>t.zs()),this.WA=!0,this.gi.Bs(),this}setParentNodeColor(t){return this.eI=t,this.WA=!0,this.gi.Bs(),this}setPathLabelFillStyle(t){return this.QF="function"==typeof t?t(this.QF):t,this.WA=!0,this.gi.Bs(),this}getPathLabelFillStyle(){return this.QF}setPathLabelFont(t){return Ua(t)?this.KF=t:this.KF=t(this.KF),this.WA=!0,this.gi.Bs(),this}getPathLabelFont(){return this.KF}setHeaderFont(t){return Ua(t)?this.tI=t:this.tI=t(this.tI),this.WA=!0,this.gi.Bs(),this}getHeaderFont(){return this.tI}setHeaderFillStyle(t){return this.qF="function"==typeof t?t(this.qF):t,this.WA=!0,this.gi.Bs(),this}getHeaderFillStyle(){return this.qF}setLabelFont(t){return Ua(t)?this.sI=t:this.sI=t(this.sI),this.WA=!0,this.gi.Bs(),this}getLabelFont(){return this.sI}setLabelFillStyle(t){return this.iI="function"==typeof t?t(this.iI):t,this.WA=!0,this.gi.Bs(),this}getLabelFillStyle(){return this.iI}setNodeBorderStyle(t){return this.rf.Qe(t),this.WA=!0,this.gi.Bs(),this}getNodeBorderStyle(){return this.rf.ja()}setNodeEffect(t){return this.AI.Ls(t),this.gi.Bs(),this}getNodeEffect(){return this.AI.Ds()}setCursor(t){return this.Rm.setCursor(t),this}getCursor(){return this.Rm.getCursor()}setCursorMode(t){return this.Rm.setCursorMode(t),this}getCursorMode(){return this.Rm.getCursorMode()}setCustomCursor(t){return this.Rm.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.Rm.Ym(t),this}setCursorFormatting(t){return this.Rm.setCursorFormatting(t),this}getCursorFormatting(){return this.Rm.getCursorFormatting()}addCursor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wf;const e=this.Tg(),i=t.sm(e,this.uiScale,this.uiScale,this.wg(e),this.bi);return this.Eg(i),i}setAnimationHighlight(t){return this.gI.Uo(t),this}getAnimationHighlight(){return this.gI.Yo()}setHighlightOnHover(t){return this.qm=t,this}getHighlightOnHover(){return this.qm}aI(t,e){const i=this.gi.Ja(e);return{cursorPosition:{pointMarker:{x:i.engineX,y:i.engineY},pointMarkerScale:this.gi.oi,resultTable:{x:i.engineX,y:i.engineY},resultTableScale:this.gi.oi},name:t.name,value:t.value,node:t.userNode}}getMinimumSize(){}gg(){return[this]}th(t){super.th(t),super.Og();const e=Md.Wg(this.Yh,this.Ng),i=this.Os.reduce((t,i)=>{const s=i.Er(e,this.On);return{top:Math.max(t.top,s.top),bottom:Math.max(t.bottom,s.bottom),left:Math.max(t.left,s.left),right:Math.max(t.right,s.right)}},{top:0,bottom:0,left:0,right:0});if(i.bottom===this.rI.bottom&&i.right===this.rI.right&&i.top===this.rI.top&&i.left===this.rI.left||(this.WA=!0,this.rI=i),Md.Xg(this.Yh,this.Ng,this.uiScale.ri(),this.On,i),this.WA&&this.WF.C().length){this.rf.zi(),this.YF.clear(),this.gI.$o(),this.Rh&&this.bI(t);const s=qy({data:this.WF.C(),dimensions:{x:0+this.On.left+i.left,y:this.Jf.y.getInnerEnd()-e-this.On.top-i.top,width:this.Jf.x.getInnerEnd()-this.On.right-this.On.left-i.right-i.left,height:this.Jf.y.getInnerEnd()-e-this.On.top-this.On.bottom-i.top-i.bottom}}),r=this.vI.LA();this.xI(s,r),r.finishPlot(),this.MI(),this.jF!==this.WF.C()&&this.jF.length>1&&this.JF.unshift({name:this.ZF,id:0});let n=0;const o=this.yI.LA(),a=this.KF;this.JF.forEach((t,e)=>{const i=o.add(),s=this.gi.tr.Th(t.name,a,0);let r;i.Jr("\u2190 ".concat(t.name)).Mr(a).ih({x:0,y:100}).Yl({x:-1,y:1}).mn({left:this.On.left+n,top:this.On.top,right:0,bottom:0}).Ke(this.QF),i.addEventListener("click",()=>this.dI(e)),i.addEventListener("pointerenter",()=>{r=this.engine.setMouseStyle(Xh.Point,r)}),i.addEventListener("pointerleave",()=>{this.engine.restoreMouseStyle(r)}),n+=s.x+25}),o.finishPlot(),this.WF.C().every(t=>t.value===t.animatedValue)?this.WA=!1:this.gi.Bs(!0)}return this.Rm.th(!1,[],void 0,{explicitTarget:this.yS}),this.Os.forEach(t=>t.th(e,this.On)),this}dispose(){return this.vk.N(),this.gk.N(),this.Rm.N(),this.rf.dispose(),this.YF.clear(),this.vI.EA(),this.yI.EA(),super.dispose()}Y(){return super.Y(),this}j(){return super.j(),this}Ys(){return Ln(this.rf.pr(),this.rf.wi())}xI(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=t.map((t,e)=>({node:t,isChild:i,visibleDepth:s})),n=this.$b?{extent:this.$b,c_x1_y1:!0,c_x1_y2:!0,c_x2_y1:!0,c_x2_y2:!0}:void 0;for(;r.length>0;){const t=r.pop();if(!t)continue;const{node:i,visibleDepth:s,opacity:o}=t,{x:a,y:h,height:l,width:c,children:u,animatedValue:d,name:f,nodeIndex:g}=i,p=this.fI,y=0===s&&1===this.WF.C().length?this.eI:p[g%p.length],m=this.rf.Go().yd(a,h,a+c,h-l).wI(y.setA(y.getA()*((null!=o?o:255)/255))).vS(d).vd(n);this.YF.set(m,i),this.gI.Go(m,t=>m.Fi(t));const v=a+5,x=h+25+5,b=Math.max(l-25-5,0),S=Math.max(c-5-5,0);if(u&&u.length&&s<this.XF&&S>15&&b>15){const t=qy({data:u,dimensions:{x:S>0?v:a,y:b>0?h-25:x,width:S,height:b}});for(let e=0;e<t.length;e+=1){const n=(255-(u.length>7?50:150))/(u.length-1),a=1===i.id&&1===this.jF.length||this.jF===this.WF.C()?255:o?o/(s+1):255-e*n;r.push({node:t[e],isChild:!0,visibleDepth:s+1,opacity:a})}}const A=0===s&&1===this.WF.C().length?this.qF:this.iI,E=0===s?this.tI:this.sI,k=this._I(f,c-25,E),w=this.gi.tr.Th(k,E,0),M=e.add();c-25>w.x&&l>25?M.Jr(k).ih({x:a+5,y:h-2.5}).Yl({x:-1,y:1}).Ke(A).Mr(E):M.Jr("")}}SI(t){const e={},i=[...t];for(;i.length>0;){const t=i.pop();t&&(e[t.id]=t,t.children&&i.push(...t.children))}return e}oI(t){if(!this.WA&&t)return this.YF.get(t)}MI(){this.JF=[];const t=this.WF.C()[0].id;let e=this.HF[t].parentID;for(;e;)this.JF.push({name:this.HF[e].name,id:e}),e=this.HF[e].parentID;return this.JF.reverse()}_I(t,e,i){let s=this.gi.tr.Th(t,i,0).x;if(s<=e)return t;const r=t.split(" ");let n=t;for(;r.length>1&&s>e;)r.pop(),n="".concat(r.join(" "),"..."),s=this.gi.tr.Th(n,i,0).x;if(s>e)for(n="".concat(r[0],"..."),s=this.gi.tr.Th(n,i,0).x;n.length>3&&s>e;)n="".concat(n.substring(0,n.length-4),"..."),s=this.gi.tr.Th(n,i,0).x;return n.length<=3&&s>e?"":n}bI(t){var e;const i=[...this.jF];for(;i.length>0;){const s=i.pop();if(!s)continue;const r=s.value-s.animatedValue;if(Math.abs(r)<.0015*s.value||void 0===this.tk)s.animatedValue=s.value;else{const i=r/255*((null===(e=this.tk)||void 0===e?void 0:e.speed)||1)*t;s.animatedValue+=i,(r>0&&s.animatedValue>s.value||r<0&&s.animatedValue<s.value)&&(s.animatedValue=s.value)}s.children&&s.children.length>0&&i.push(...s.children)}}mI(t,e){const i=[{current:t,previous:e}];for(;i.length>0;){const t=i.pop();if(!t)continue;const{current:e,previous:s}=t;e.animatedValue=this.Rh?s.animatedValue:e.value,s.nodeIndex<0?e.nodeIndex=0:e.nodeIndex=s.nodeIndex;const r=new Map(s.children.map(t=>[t.id,t]));e.children.forEach((t,e)=>{const n=r.get(t.id);i.push({current:t,previous:n||s})})}}setUserInteractions(t){return this.oh=void 0===t?{drillDown:{click:!1}}:t,this}getUserInteractions(){return Gr({drillDown:{click:!0}},this.oh)}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}const tm=(t,e,i)=>[[{text:e.name,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:e.value.toString(),font:{weight:"bold"}}]];class em extends wd{constructor(t,e,i,s,r,n,o){var a;super(t,e,i,e.Vg("gaugeChart bg",0),s,e.gi.bi.gaugeChartBackgroundFillStyle,e.gi.bi.gaugeChartBackgroundStrokeStyle,e.gi.bi.gaugeChartTitleFont,e.gi.bi.gaugeChartTitleFillStyle,e.gi.bi.gaugeChartTitleShadow,n,null===(a=null==o?void 0:o.legend)||void 0===a?void 0:a.customLegend),this.Vc=this.bi.gaugeChartStartAngle,this.Nc=this.bi.gaugeChartEndAngle,this.kI={start:0,end:100},this.S=0,this.CI=[],this.TI=this.bi.gaugeChartBarThickness,this.FI=this.bi.gaugeChartValueIndicatorThickness,this.II=this.bi.gaugeChartNeedleLength,this.LI=this.bi.gaugeChartNeedleThickness,this.BI=this.bi.gaugeChartNeedleFillStyle,this.DI=this.bi.gaugeChartNeedleStrokeStyle,this.gd=this.bi.gaugeChartRoundedEdges,this.RI=!0,this.EI=!0,this.OI=!0,this.zI=[],this.VI=[],this.NI=!0,this.GI=!0,this.Q_=this.S,this.$I=t=>Number.isInteger(t)?t.toString():t.toFixed(2),this.UI=this.bi.gaugeChartBarGradient,this.YI=t=>Number.isInteger(t)?t.toString():t.toFixed(2),this.jI=this.bi.gaugeChartTickFont,this.HI=this.bi.gaugeChartValueLabelFont,this.WI=this.bi.gaugeChartValueLabelFillStyle,this.XI=this.bi.gaugeChartUnitLabelFont,this.ZI=this.bi.gaugeChartUnitLabelFillStyle,this.JI=this.bi.gaugeChartTickFillStyle,this.QI=this.bi.gaugeChartBarColor,this.KI=this.bi.gaugeChartGlowColor,this.qI=this.bi.gaugeChartGlowColor.getA(),this.tP=1,this.iP=1,this.sP=this.bi.gaugeChartNeedleAlignment,this.eP=!1,this.hP=this.bi.gaugeChartGapBetweenBarAndValueIndicators,this.rP=this.bi.gaugeChartBarStrokeStyle,this.rI=Zn,this.nP=!1,this.L=new Ar,this.gi.ka(_l.bo),this.Yh.Jr("Gauge Chart"),this.zg(r,this.Jf),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled)),this.oP=this.QI,this.aP=this.KI,this.lP=Rs(0,0,0,0),this.cP=this.ys.iA(),this.uP=this.ys.iA().Ls(this.bi.effectsText),this.dP=this.Mg.xu(this.Jf).Qe(this.rP).setPointerEvents(!1),this.fP=this.Mg.md(this.Jf).Zc(0).Ah(360).qc(0).Qe(Lr).setPointerEvents(!1),this.AP=this.$g.fh(this.Jf).dh(this.bi.gaugeChartNeedleStrokeStyle).setPointerEvents(!1),this.gP=this.$g.fh(this.Jf).dh(new th({thickness:this.LI,fillStyle:this.BI})).setPointerEvents(!1),this.vP=this.$g.bn(this.Jf).Mr(this.HI).Ke(this.WI).setPointerEvents(!1),this.nf=this.$g.bn(this.Jf).Mr(this.XI).Ke(this.ZI).Jr("").setPointerEvents(!1),this.yP=this.Mg.bn(this.Jf).Mr(this.jI).Ke(this.JI).setPointerEvents(!1),this.pP=this.Mg.bn(this.Jf).Mr(this.jI).Ke(this.JI).setPointerEvents(!1),this.cP.ks([this.dP]),this.uP.ks([this.vP,this.nf,this.yP,this.pP]),this.mP(),this.addEventListener("resize",()=>{this.eP=!0});const h=l({backgroundVisible:!0},null==o?void 0:o.legend);this.legend.setOptions(h)}mP(){this.gP.dh(t=>t.setThickness(this.LI)),this.AP.dh(t=>t.setThickness(2*this.DI.getThickness()+this.LI))}setAnimationsEnabled(t){return this.Rh=t,this.GI=t,this.NI=t,this}setInterval(t,e){return this.kI={start:t,end:e},this.eP=!0,this.gi.Bs(),this}getInterval(){return this.kI}setTickFillStyle(t){return this.JI="function"==typeof t?t(this.JI):t,this.VI.forEach(e=>{e.start.Ke(t),e.end.Ke(t)}),this.yP.Ke(t),this.pP.Ke(t),this.eP=!0,this.gi.Bs(),this}getTickFillStyle(){return this.JI}setTickFont(t){return this.jI="function"==typeof t?t(this.jI):t,this.VI.forEach(e=>{e.start.Mr(t),e.end.Mr(t)}),this.yP.Mr(t),this.pP.Mr(t),this.eP=!0,this.gi.Bs(),this}getTickFont(){return this.jI}setTickFormatter(t){return this.$I=t,this.eP=!0,this.gi.Bs(),this}getTickFormatter(){return this.$I}setValueLabelFillStyle(t){return this.WI="function"==typeof t?t(this.WI):t,this.vP.Ke(t),this.eP=!0,this.gi.Bs(),this}getValueLabelFillStyle(){return this.vP.pr()}setValueLabelFont(t){return this.HI="function"==typeof t?t(this.HI):t,this.vP.Mr(t),this.eP=!0,this.gi.Bs(),this}getValueLabelFont(){return this.vP.br()}setValueFormatter(t){return this.YI="string"==typeof t?e=>t:t,this.eP=!0,this.gi.Bs(),this}getValueLabel(){return this.vP.qr()||this.YI}setUnitLabelFillStyle(t){return this.ZI="function"==typeof t?t(this.ZI):t,this.nf.Ke(t),this.eP=!0,this.gi.Bs(),this}getUnitLabelFillStyle(){return this.nf.pr()}setUnitLabelFont(t){return this.XI="function"==typeof t?t(this.XI):t,this.nf.Mr(t),this.eP=!0,this.gi.Bs(),this}getUnitLabelFont(){return this.nf.br()}setUnitLabel(t){return this.nf.Jr(t),this.eP=!0,this.gi.Bs(),this}getUnitLabel(){return this.nf.qr()}setNeedleFillStyle(t){return this.BI="function"==typeof t?t(this.BI):t,this.gP.dh(e=>e.setFillStyle(t)),this.eP=!0,this.gi.Bs(),this}getNeedleFillStyle(){return this.gP.ao().getFillStyle()}setNeedleThickness(t){return this.LI=t,this.mP(),this.eP=!0,this.gi.Bs(),this}getNeedleThickness(){return this.LI}setNeedleStrokeStyle(t){return this.DI="function"==typeof t?t(this.DI):t,this.AP.dh(t),this.mP(),this.eP=!0,this.gi.Bs(),this}getNeedleStrokeStyle(){return this.AP.ao()}setNeedleLength(t){return this.II=t,this.eP=!0,this.gi.Bs(),this}getNeedleLength(){return this.II}setBarColor(t){return this.QI=t,this.eP=!0,this.gi.Bs(),this}getBarColor(){return this.oP}setBarGradient(t){return this.UI=t,this.eP=!0,this.gi.Bs(),this}getBarGradient(){return this.UI}setBarStrokeStyle(t){return this.rP="function"==typeof t?t(this.rP):t,this.dP.Qe(t),this.eP=!0,this.gi.Bs(),this}getBarStrokeStyle(){return this.dP.ja()}setBarThickness(t){return this.TI=t,this.eP=!0,this.gi.Bs(),this}getBarThickness(){return this.TI}setAngleInterval(t,e){return Math.abs(t-e)>360&&(e=t<e?t+360:t-360),this.Vc=t,this.Nc=e,this.eP=!0,this.gi.Bs(),this}getAngleInterval(){return{start:this.Vc,end:this.Nc}}setValue(t){return this.nP&&this.gi.ka(_l.Lo),this.nP=!0,this.S=t,this.NI||(this.Q_=this.S),this.eP=!0,this.gi.Bs(),this}getValue(){return this.S}setValueAnimation(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.NI=t,this.tP=Math.max(0,e),this.eP=!0,this.gi.Bs(),this}setColorAnimation(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.GI=t,this.iP=Math.max(0,e),this.eP=!0,this.gi.Bs(),this}setRoundedEdges(t){return this.gd=t,this.eP=!0,this.gi.Bs(),this}getRoundedEdges(){return this.gd}setValueIndicators(t){return this.CI=t,this.zI.forEach(t=>{t.dispose()}),this.zI.length=0,this.VI.forEach(t=>{t.start.dispose(),t.end.dispose()}),this.VI.length=0,this.CI.forEach(t=>{const e=new aa({color:t.color}),i=this.Mg.xu(this.Jf).Qe(Lr).Ke(e).setPointerEvents(!1);this.zI.push(i);const s=this.Mg.bn(this.Jf).Mr(this.jI).Ke(this.JI).setPointerEvents(!1),r=this.Mg.bn(this.Jf).Mr(this.jI).Ke(this.JI).setPointerEvents(!1);this.VI.push({start:s,end:r})}),this.cP.ks([this.dP,...this.zI]),this.uP.ks([this.vP,this.nf,this.yP,this.pP,...this.VI.map(t=>[t.start,t.end]).flat()]),this.eP=!0,this.gi.Bs(),this}getValueIndicators(){return this.CI}setValueIndicatorThickness(t){return this.FI=t,this.eP=!0,this.gi.Bs(),this}getValueIndicatorThickness(){return this.FI}setAutomaticBarColoring(t){return this.OI=!!t,this.eP=!0,this.gi.Bs(),this}getAutomaticBarColoring(){return this.OI}setGlowColor(t){return void 0===t?(this.RI=!1,this.aP=void 0):"object"==typeof t&&"auto"in t?(this.EI=t.auto,t.auto&&(this.aP=void 0),void 0!==t.alpha&&(this.qI=t.alpha),this.RI=!0):(this.aP=t,this.qI=t.getA(),this.EI=!1,this.RI=!0),this.eP=!0,this.gi.Bs(),this}getAutomaticGlowColoring(){return this.EI}setNeedleAlignment(t){return this.sP=t,this.eP=!0,this.gi.Bs(),this}getNeedleAlignment(){return this.sP}setGapBetweenBarAndValueIndicators(t){return this.hP=t,this.eP=!0,this.gi.Bs(),this}getGapBetweenBarAndValueIndicators(){return this.hP}setBarEffect(t){return this.cP.Ls(t),this.gi.Bs(),this}getBarEffect(){return this.cP.Ds()}setLabelEffect(t){return this.uP.Ls(t),this.gi.Bs(),this}getLabelEffect(){return this.uP.Ds()}th(t){var e;if(super.th(t),super.Og(),this.Q_!==this.S){if(this.NI){const e=5e-4*t,i=.003*t,s=Math.sign(this.S-this.Q_);this.Q_=this.Q_+e*s+i*this.tP*(this.S-this.Q_),s!==Math.sign(this.S-this.Q_)?this.Q_=this.S:this.gi.Bs(!0)}else this.Q_=this.S;this.eP=!0}let i=this.CI.find(t=>this.Q_>=t.start&&this.Q_<=t.end);if(i||(this.Q_<this.kI.start?i=this.CI.find(t=>t.start===this.kI.start):this.Q_>this.kI.end&&(i=this.CI.find(t=>t.end===this.kI.end))),this.oP=this.OI&&i?i.color:this.QI,this.GI){if(this.lP!==this.oP){const e=this.lP.getR(),i=this.lP.getG(),s=this.lP.getB(),r=this.oP.getR(),n=this.oP.getG(),o=this.oP.getB(),a=Math.sign(r-e),h=Math.sign(n-i),l=Math.sign(o-s),c=.005*t,u=.003*t;this.lP=Rs(e+c*a+u*this.iP*(r-e),i+c*h+u*this.iP*(n-i),s+c*l+u*this.iP*(o-s));const d=Math.abs(r-this.lP.getR()),f=Math.abs(n-this.lP.getG()),g=Math.abs(o-this.lP.getB());d<1&&f<1&&g<1?this.lP=this.oP:this.gi.Bs(!0),this.eP=!0}}else this.lP=this.oP;const s=Md.Wg(this.Yh,this.Ng),r=this.Os.reduce((t,e)=>{const i=e.Er(s,this.On);return{top:Math.max(t.top,i.top),bottom:Math.max(t.bottom,i.bottom),left:Math.max(t.left,i.left),right:Math.max(t.right,i.right)}},{top:0,bottom:0,left:0,right:0});if(r.right===this.rI.right&&r.bottom===this.rI.bottom&&r.top===this.rI.top&&r.left===this.rI.left||(this.eP=!0,this.rI=r),this.eP){let t=ro,n=no,o=ro,a=no;if(new Array(100).fill(0).forEach((e,i,s)=>{const r=this.Vc+i/s.length*(this.Nc-this.Vc),h=Math.sin(r*Math.PI/180),l=Math.cos(r*Math.PI/180);h<t&&(t=h),h>n&&(n=h),l<o&&(o=l),l>a&&(a=l)}),this.UI?this.dP.Ke(new js({stops:[{offset:0,color:_s("#000000")},{offset:1,color:this.lP}],position:{x:.5,y:.5}})):this.dP.Ke(new aa({color:this.lP})),this.RI){const t=this.EI&&i?this.lP:null!==(e=this.aP)&&void 0!==e?e:this.KI;this.fP.Ke(new js({stops:[{offset:0,color:t.setA(this.qI)},{offset:1,color:t.setA(0)}],position:{x:.5,y:.5},extent:Xs.farthestSide}))}else this.fP.Ke(sa);const h=this.$I(this.kI.start),l=this.$I(this.kI.end);let c=0,u=0;const d=this.gi.tr.Th(h,this.yP.br(),this.yP._r()),f=this.gi.tr.Th(l,this.pP.br(),this.pP._r());d.x>c&&(c=d.x),d.y>u&&(u=d.y),f.x>c&&(c=f.x),f.y>u&&(u=f.y),this.VI.forEach((t,e)=>{if(e>=this.CI.length)return;const i=this.CI[e],s=this.$I(i.start),r=this.$I(i.end),n=this.gi.tr.Th(s,t.start.br(),t.start._r()),o=this.gi.tr.Th(r,t.end.br(),t.end._r());n.x>c&&(c=n.x),n.y>u&&(u=n.y),o.x>c&&(c=o.x),o.y>u&&(u=o.y)});const g=this.CI.length>0?this.FI:0,p=this.Jf.getInnerIntervalPixels();Md.Xg(this.Yh,this.Ng,this.uiScale.ri(),this.On,r);const y={x:p.x-(this.On.left+this.On.right),y:p.y-(this.On.bottom+this.On.top)-s},m={x:y.x-r.left-r.right,y:y.y-r.top-r.bottom},v={x:this.On.left+(y.x+r.left-r.right)/2,y:this.On.bottom+(y.y+r.bottom-r.top)/2},x=g+2*this.hP+this.TI/2,b=c+x,S=u+x,A=S+s,E=m.y-(A+S),k=m.x-(b+b),w=Math.max(0,E<k?E:k),M=.5*w,C=.5*M,T=(t+n)*C,F=(o+a)*C,P={x:v.x-F,y:v.y-T},B=w>0;if(this.dP.setVisible(B),this.zI.forEach(t=>t.setVisible(B)),this.gP.setVisible(B),this.AP.setVisible(B),this.fP.setVisible(B),this.nf.setVisible(B),this.vP.setVisible(B),this.yP.setVisible(B),this.pP.setVisible(B),this.VI.forEach(t=>{t.start.setVisible(B),t.end.setVisible(B)}),!B)return;const L={x:v.x-.5*F,y:v.y-.5*T};this.fP.ih(v).Jc(.5*Math.min(m.x,p.y)),this.vP.ih(L).Jr(this.YI(this.Q_));let D=this.vP.vu(),z=this.nf.vu();0===D.y&&(D=this.gi.tr.Th(this.vP.qr(),this.vP.br(),this.vP._r())),0===z.y&&(z=this.gi.tr.Th(this.nf.qr(),this.nf.br(),this.nf._r())),this.nf.ih({x:L.x,y:L.y-D.y-z.y/4});const I=rm(this.kI,this.Vc,this.Nc,this.Q_,P,M+this.sP*(this.II/2+this.TI/2)),R=I.angle*(Math.PI/180),_=.5*this.II,V=Math.cos(R),N=Math.sin(R);this.gP.gh({x:I.x+_*V,y:I.y+_*N}).Ah({x:I.x-_*V,y:I.y-_*N}),this.AP.gh({x:I.x+_*V,y:I.y+_*N}).Ah({x:I.x-_*V,y:I.y-_*N});const O=im(P,M,this.Vc,this.Nc,this.TI,this.gd,!1,!1);this.dP.rc(O).Ci({min:{x:P.x-M,y:P.y-M},max:{x:P.x+M,y:P.y+M}});const Y=P.y+M,G=P.y-M,X=P.x+M,U=P.x-M,[H,j]=this.kI.start<this.kI.end?[this.kI.start,this.kI.end]:[this.kI.end,this.kI.start],W=M+.5*this.TI+g/2+this.hP,Z=W+g/2;this.CI.forEach((t,e)=>{var i,s;const r=t.start>=H&&t.end<=j;this.zI[e].setVisible(r),this.VI[e].start.setVisible(r),this.VI[e].end.setVisible(r);const n=rm(this.kI,this.Vc,this.Nc,t.start,P,Z),o=rm(this.kI,this.Vc,this.Nc,t.end,P,Z),a=im(P,W,n.angle,o.angle,this.FI,this.gd,!(0===e),!(e===this.CI.length-1));this.zI[e].rc(a);const h=this.kI.start===t.start||this.kI.end===t.start,l=this.kI.start===t.end||this.kI.end===t.end||this.CI.some(e=>e.start===t.end&&e!==t);this.VI[e].start.ih({x:n.x,y:n.y}).Yl({x:Math.min(1,Math.max(-1,2*(n.x-X)/(U-X)-1)),y:Math.min(1,Math.max(-1,2*(n.y-Y)/(G-Y)-1))}).Jr(null!==(i=t.startLabel)&&void 0!==i?i:h?"":this.$I(t.start)),this.VI[e].end.ih({x:o.x,y:o.y}).Yl({x:Math.min(1,Math.max(-1,2*(o.x-X)/(U-X)-1)),y:Math.min(1,Math.max(-1,2*(o.y-Y)/(G-Y)-1))}).Jr(null!==(s=t.endLabel)&&void 0!==s?s:l?"":this.$I(t.end))});const J=this.CI.some(t=>t.start<t.end?this.kI.start>=t.start&&this.kI.start<=t.end:this.kI.start<=t.start&&this.kI.start>=t.end),q=rm(this.kI,this.Vc,this.Nc,this.kI.start,P,J?Z:W-this.hP);this.yP.ih({x:q.x,y:q.y}).Yl({x:Math.min(1,Math.max(-1,2*(q.x-X)/(U-X)-1)),y:Math.min(1,Math.max(-1,2*(q.y-Y)/(G-Y)-1))}).Jr(h);const Q=this.CI.some(t=>t.start<t.end?this.kI.end>=t.start&&this.kI.end<=t.end:this.kI.end<=t.start&&this.kI.end>=t.end),K=rm(this.kI,this.Vc,this.Nc,this.kI.end,P,Q?Z:W-this.hP);this.pP.ih({x:K.x,y:K.y}).Yl({x:Math.min(1,Math.max(-1,2*(K.x-X)/(U-X)-1)),y:Math.min(1,Math.max(-1,2*(K.y-Y)/(G-Y)-1))}).Jr(l),this.eP=!1}this.Os.forEach(t=>t.th(s,this.On))}getMinimumSize(){return{x:150,y:150}}gg(){return[]}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}const im=function(t,e,i,s,r){let n=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],a=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];const h=[],l=.5*r,c=i>s,u=Math.sign(i-s),d=-1*u;if(n){const t=l/(2*Math.PI*e)*360+.1;o&&(i+=t*d),a&&(s+=t*u)}else i+=.1*d,s+=.1*u;const f=sm(t,e+l,i,s,c);if(h.push(...f),n){const r={x:t.x+e*Math.cos(s*(Math.PI/180)),y:t.y+e*Math.sin(s*(Math.PI/180))};let n;n=i>s?sm(r,l,s+180,s+360,c):sm(r,l,s-180,s-360,c),h.push(...n)}const g=sm(t,e-l,s,i,!c);if(h.push(...g),n){const r={x:t.x+e*Math.cos(i*(Math.PI/180)),y:t.y+e*Math.sin(i*(Math.PI/180))};let n;n=i>s?sm(r,l,i-180,i-360,c):sm(r,l,i+180,i+360,c),h.push(...n)}return h},sm=(t,e,i,s,r)=>{i<s&&([i,s]=[s,i]);const n=[],o=r?-2:2,a=r?t=>t>s:t=>t<i;for(let u=r?i:s;a(u);u+=o){const i=u*(Math.PI/180),s=t.x+e*Math.cos(i),r=t.y+e*Math.sin(i);n.push({x:s,y:r})}const h=(r?s:i)*(Math.PI/180),l=t.x+e*Math.cos(h),c=t.y+e*Math.sin(h);return n.push({x:l,y:c}),n},rm=(t,e,i,s,r,n)=>{const[o,a]=t.start<t.end?[t.start,t.end]:[t.end,t.start],h=Math.max(o,Math.min(a,s)),l=t.start<t.end?i-e:e-i,c=t.start<t.end?e+(h-t.start)/(t.end-t.start)*l:e-(h-t.start)/(t.end-t.start)*l,u=c*(Math.PI/180);return{x:r.x+n*Math.cos(u),y:r.y+n*Math.sin(u),angle:Math.round(c)}};class nm extends Bd{constructor(t,e,i,s,r,n,o,a,h,l,c){super(t,e,i,s,r,n,o,a,h,l),this.SP=c}setLabelAlignment(t){return this.SP=t,this.Bs(),this}getLabelAlignment(){return this.SP}}class om extends El{constructor(t,e,i,s,r,n,o){let a;super(t,{ln:()=>t.bP?t.bP[this.key].max:void 0,an:()=>t.bP?t.bP[this.key].min:void 0,un:()=>{}},n,e,i,{numeric:e.parallelCoordinateAxisNumericTicks||e.yAxisNumericTicks,datetime:e.parallelCoordinateAxisDateTimeTicks||e.yAxisDateTimeTicks,time:e.parallelCoordinateAxisTimeTicks||e.yAxisTimeTicks},{type:"linear"}),this.xP=[],this.kf=[],this.MP=8,this.ci=!1,this.L=new Ar,this.chart=t,this.key=s,this.userID=r,this.ys=this.chart.gi.ys.ps(this,{}),this.Ws=o,this.wP=o.qe(t._P).Ke(this.bi.parallelCoordinateAxisBackgroundFillStyle||sa).Qe(Lr).setPointerEvents(!1),this.Jh=o.bn(t._P).Mr(this.bi.parallelCoordinateAxisTitleFont||this.bi.yAxisTitleFont).Ke(this.bi.parallelCoordinateAxisTitleFillStyle||this.bi.yAxisTitleFillStyle).setPointerEvents(!1).mn(Zn).Sn(Zn),this.kr=this.ys.iA([this.Jh]).Ls(e.effectsText),this.oF=o.fh(t._P).dh(e.parallelCoordinateAxisStrokeStyle||e.yAxisStrokeStyle),this.setAnimationsEnabled(!1),this.addEventListener("intervalchange",e=>{t.kP(this,e.start,e.end)}),this.oF.addEventListener("pointerenter",()=>{var t,e;(null===(e=null===(t=this.chart.getUserInteractions().rangeSelectors)||void 0===t?void 0:t.create)||void 0===e?void 0:e.doubleClickAxis)&&(a=this.chart.engine.setMouseStyle(Xh.Point))}),this.oF.addEventListener("pointerleave",()=>{a=this.chart.engine.restoreMouseStyle(a)}),this.oF.addEventListener("dblclick",t=>{var e,i;t.defaultPrevented||(null===(i=null===(e=this.chart.getUserInteractions().rangeSelectors)||void 0===e?void 0:e.create)||void 0===i?void 0:i.doubleClickAxis)&&(this.addRangeSelector(),mn(t))}),this.setTitle(s)}setBackgroundFillStyle(t){return this.wP.Ke(t),this.Ws.Bs(),this}getBackgroundFillStyle(){return this.wP.pr()}setStrokeStyle(t){const e="function"==typeof t?t(this.oF.ao()):t,i=e.getFillStyle();return fa(i)?(this.CP=i.lut,this.chart.TP=!0):this.CP=void 0,this.oF.dh(e),this.chart.gi.Bs(),this}getStrokeStyle(){return this.oF.ao()}setTickStrategy(t,e){return super.cr(t,e)}getTickStrategy(){return this.Ph}addRangeSelector(){const t=this.Or(),e=this.Ws.qe(this.chart._P).Ke(this.bi.parallelCoordinateAxisRangeSelectorFillStyle||this.bi.dataGridScrollBarFillStyle).Qe(this.bi.parallelCoordinateAxisRangeSelectorStrokeStyle||this.bi.dataGridScrollBarStrokeStyle);let i;const s=t=>{var e,s;(null===(s=null===(e=this.chart.getUserInteractions().rangeSelectors)||void 0===e?void 0:e.move)||void 0===s?void 0:s.drag)&&(i=this.chart.engine.setMouseStyle(Xh.Vertical,i))},r=t=>{i=this.chart.engine.restoreMouseStyle(i)};e.addEventListener("pointermove",s),e.addEventListener("pointerleave",r),e.addEventListener("pointerdown",t=>{var o,a;if(!(null===(a=null===(o=this.chart.getUserInteractions().rangeSelectors)||void 0===o?void 0:o.move)||void 0===a?void 0:a.drag))return;const h=this.chart.getCursorMode();let l;this.chart.setCursorMode(void 0);const c=this.chart.gi.Ja(t),u=hr({x:c.engineX,y:c.engineY},this.chart.gi.oi,this.chart._P),d=this.chart._P.y.Jt(e.Wi(),10),f=this.chart._P.y.Jt(e.Xi(),-10);l=u.y<=d?"scaleMin":u.y>=f?"scaleMax":"move",mn(t);let g=t;const p=t=>{if(void 0===this.FP)return;const e=.05*Math.abs(this.dr-this.ur),i=(t.clientX,g.clientX,t.clientY-g.clientY);if(g=t,"move"===l){const t=n.max-n.min,e=this.chart.IP(n.max,this.FP,this).y,s=this.chart._P.y.Jt(e,-i),r=this.chart.PP(s,this.FP,this);n.max=Qr(r,Math.max(this.ur,this.dr),Math.min(this.ur,this.dr)+t),n.min=n.max-t}else if("scaleMax"===l){const t=this.chart.IP(n.max,this.FP,this).y,s=this.chart._P.y.Jt(t,-i),r=this.chart.PP(s,this.FP,this);n.max=Qr(r,n.min+e,Math.max(this.ur,this.dr))}else if("scaleMin"===l){const t=this.chart.IP(n.min,this.FP,this).y,s=this.chart._P.y.Jt(t,-i),r=this.chart.PP(s,this.FP,this);n.min=Qr(r,n.max-e,Math.min(this.ur,this.dr))}this.chart.LP(),mn(t)},y=n=>{n.pointerId===t.pointerId&&(this.chart.setCursorMode(h),e.addEventListener("pointermove",s),e.addEventListener("pointerleave",r),Ur.removeEventListener("pointermove",p),Ur.removeEventListener("pointerup",y),i=this.chart.engine.restoreMouseStyle(i))};e.removeEventListener("pointermove",s),e.removeEventListener("pointerleave",r),Ur.addEventListener("pointermove",p),Ur.addEventListener("pointerup",y)}),e.addEventListener("dblclick",t=>{var e,i;if(!(null===(i=null===(e=this.chart.getUserInteractions().rangeSelectors)||void 0===e?void 0:e.dispose)||void 0===i?void 0:i.doubleClick))return;const s=this.xP.indexOf(n);s>=0&&this.xP.splice(s,1),n.shape.dispose(),this.chart.LP(),mn(t)});const n={min:t.min+.25*(t.max-t.min),max:t.max-.25*(t.max-t.min),shape:e};this.xP.push(n),this.chart.LP();const o={setInterval:(t,e)=>(n.min=Math.min(t,e),n.max=Math.max(t,e),this.chart.LP(),o),setPointerEvents:t=>(e.setPointerEvents(t),o),dispose:()=>{const t=this.xP.indexOf(n);return t>=0&&(this.xP.splice(t,1),this.chart.LP()),o}};return o}addCustomTick(){const t=new nm(()=>this.chart.gi.Bs(),()=>{const e=this.kf.indexOf(t);e>=0&&this.kf.splice(e,1)},(this.bi.parallelCoordinateAxisNumericTicks||this.bi.yAxisNumericTicks).majorTickStyle.tickStyle,(this.bi.parallelCoordinateAxisNumericTicks||this.bi.yAxisNumericTicks).majorTickStyle.tickLength,(this.bi.parallelCoordinateAxisNumericTicks||this.bi.yAxisNumericTicks).majorTickStyle.gridStrokeStyle,(this.bi.parallelCoordinateAxisNumericTicks||this.bi.yAxisNumericTicks).majorTickStyle.tickPadding,(this.bi.parallelCoordinateAxisNumericTicks||this.bi.yAxisNumericTicks).majorTickStyle.labelRotation,(this.bi.parallelCoordinateAxisNumericTicks||this.bi.yAxisNumericTicks).majorTickStyle.labelFillStyle,(this.bi.parallelCoordinateAxisNumericTicks||this.bi.yAxisNumericTicks).majorTickStyle.labelFont,t=>this.formatValue(t),(this.bi.parallelCoordinateAxisNumericTicks||this.bi.yAxisNumericTicks).majorTickStyle.labelAlignment);return this.kf.push(t),this.chart.gi.Bs(),t}th(t){this.FP=t.parallelAxisIndex;const e=Math.min(this.ur,this.dr),i=Math.max(this.ur,this.dr);for(const[n,o]of this.Lh)for(const[,e]of o){const i=t.ticksInfo.get(e);i&&(t.plotAxisLines.add({positions:[i.positionTicklineStart,i.positionTicklineEnd]},{lineStyle:n.Fh.tickStyle}),e.Dr.ih(i.labelPosition).Yl(i.labelAlignment).wr(i.labelRotation).Ol(i.labelOffset.x,i.labelOffset.y))}this.kf.forEach(s=>{if(!s.ui||s.S<e||s.S>i)return;const r=this.BP(t.parallelAxisIndex,t.halfAxisThickness,s.S,s.yv,s.mv,s.SP);t.plotAxisLines.add({positions:[r.positionTicklineStart,r.positionTicklineEnd]},{lineStyle:s.vv}),t.plotAxisText.add().ih(r.labelPosition).Yl(r.labelAlignment).Ke(s.Sv).Mr(s.bv).Jr(s.oo(s.S)).wr(s.sf).setPointerEvents(s.li)}),this.oF.gh({x:t.parallelAxisIndex,y:0}).Ah({x:t.parallelAxisIndex,y:1}),this.Jh.ih({x:t.parallelAxisIndex,y:this.chart._P.y.Jt(0,-(t.halfAxisThickness+this.MP))}).wr(this.getTitleRotation()).Yl({x:0,y:1});const s=0===t.parallelAxisIndex?t.parallelAxisIndex:this.chart._P.x.Jt(t.parallelAxisIndex,-1.2*t.lA);this.wP.ih({x:s,y:0}).X({x:t.parallelAxisIndex-s,y:1});const r=this.chart._P.ri();this.xP.forEach(e=>{const i=this.chart.IP(e.min,t.parallelAxisIndex,this),s=this.chart.IP(e.max,t.parallelAxisIndex,this),n={x:t.parallelAxisIndex-10*r.x*.5,y:i.y},o=t.parallelAxisIndex+10*r.x*.5,a=s.y;e.shape.ih(n).X({x:o-n.x,y:a-n.y})})}N(){this.wP.dispose(),this.Jh.dispose(),this.oF.dispose(),this.xP.forEach(t=>t.shape.dispose()),this.xP.length=0,this.Cr(),this.Hr(),this.ci=!0,this.L.D("dispose",{})}isDisposed(){return this.ci}BP(t,e,i,s,r,n){const o=this.chart._P.Jt({x:t,y:(i-this.ur)/(this.dr-this.ur)},{x:0-e,y:0}),a=this.chart._P.Jt(o,{x:-s,y:0});return{positionTicklineStart:o,positionTicklineEnd:a,labelPosition:this.chart._P.Jt(a,{x:-r,y:0}),labelAlignment:{x:1,y:n}}}Nr(t){const e=this.oF.ao();return{halfAxisThickness:eh(e)?e.getThickness()/2:0}}Yr(t,e,i,s,r){const n=e.Fh,o=this.getInterval();return l(l({},this.BP(s.parallelAxisIndex,r.halfAxisThickness,t,n.getTickLength(),n.getTickPadding(),2*(t-o.start)/(o.end-o.start)-1)),{},{keyValue:t,tickLevel:e,labelText:i,labelRotation:n.labelRotation,labelOffset:{x:0,y:0}})}Qr(t,e){return new kl(e,t,this.Ws,this.chart._P)}Wr(t,e,i){const s=this.Jh&&this.Jh.qr().length>0&&this.getTitleFillStyle()!==sa?this.Jh.Er().vu():{x:0,y:0};let r=0;this.Lh.forEach((t,e)=>{const i=e.Fh.tickLength+e.Fh.tickPadding;t.forEach(t=>{if(!t.Dr.getVisible())return void(r=Math.max(r,i));const e=i+t.Dr.Er().vu().x;r=Math.max(r,e)})});const n=this.kf.reduce((t,e)=>Math.max(t,e.ui?this.chart.gi.tr.Th(e.oo(e.S),e.bv,e.sf).x+e.yv+e.mv:0),0);r=Math.max(r,n);const o=s.y+this.MP;r=Math.max(r,s.x/2);const a=r;return{lA:r,DP:o,RP:s.x,uf:a,ticksInfo:e,updatedTicks:i}}Kh(){return this.chart._P}fn(t,e){return wa(t,e,this.oi)}vn(t,e,i){return{start:t,end:e}}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}setPointerEvents(t){return this.L.setPointerEvents(t),this}getPointerEvents(){return this.L.getPointerEvents()}}class am extends Kf{constructor(t,e,i,s,r){super(t,e,i,s),this.Es="Parallel Coordinate Series",this.EP=!1,this.L=new Ar,this.fs=t;const n=void 0!==(null==r?void 0:r.automaticColorIndex)?r.automaticColorIndex:this.fs.getSeries().length;this.OP=In(this.bi.parallelCoordinateChartSeriesColor,n)||(()=>{const t=In(this.bi.lineSeriesStrokeStyle,n).getFillStyle();return(ha(t)?t.getColor():void 0)||Rs(255,255,0)})(),this.addEventListener("visiblechange",t=>{this.fs.zP()}),this.addEventListener("dispose",t=>{this.fs.zP()}),this.setHighlightOnHover(!1)}setData(t){const e=void 0!==this.VP;return this.VP=this.fs.NP(t),e&&this.fs.GP(),this}getData(){return this.VP}setColor(t){const e="function"==typeof t?t(this.OP):t;return e===this.OP||(this.OP=e,this.fs.gi.Bs(),this.fs.$P(this)),this}getColor(){return this.OP}Av(){return this.getAutoScrollingEnabled()}rv(){}th(){}nv(){}sh(){return{fill:new aa({color:this.OP})}}sv(){return super.sv()&&!this.EP}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}class hm extends Hd{constructor(t,e,i,s,r,n,o){var a,h,l;super(t,e,i,e.Vg("parallelAxisChart bg",0),s,e.gi.bi.parallelCoordinateChartBackgroundFillStyle||e.gi.bi.chartXYBackgroundFillStyle,e.gi.bi.parallelCoordinateChartBackgroundStrokeStyle||e.gi.bi.chartXYBackgroundStrokeStyle,e.gi.bi.parallelCoordinateChartTitleFont||e.gi.bi.chartXYTitleFont,e.gi.bi.parallelCoordinateChartTitleFillStyle||e.gi.bi.chartXYTitleFillStyle,e.gi.bi.parallelCoordinateChartTitleShadow||e.gi.bi.chartXYTitleShadow,n,null===(a=null==o?void 0:o.legend)||void 0===a?void 0:a.customLegend),this.axes=[],this.UP=!0,this.YP=Wn(),this.jP=new Map,this.HP=this.bi.parallelCoordinateChartSeriesColorUnselected||Rs(255,255,255,30),this.WP=Fs({resolution:32}),this.TP=!1,this.XP=!1,this.ZP=!0,this.JP=!1,this.QP=!1,this.KP=!1,this.qP=!1,this.ga=t=>{this._P.X(t.engineWidth,t.engineHeight)},this.L=new Ar,this.G_=e.Cm("parallelAxisChart series",0),this.tL=e.Cm("parallelAxisChart labels",1),this.Yh.Jr("Parallel Coordinate Chart"),this.gi.ka(_l.Eo),this._P=this.kg.d2({scaleXYConstructor:rr}).ii(0,1),this.zg(r,this._P),this.gy=this.Mg.qe(this._P).ih({x:0,y:0}).X({x:0,y:1}).Ke(this.bi.parallelCoordinateChartSeriesBackgroundFillStyle||this.bi.chartXYSeriesBackgroundFillStyle).Qe(Lr).setPointerEvents(!0),this.vy=this.Mg.qe(this._P).ih({x:0,y:0}).X({x:0,y:1}).Ke(sa).Qe(this.bi.parallelCoordinateChartSeriesBackgroundStrokeStyle||this.bi.chartXYBackgroundStrokeStyle).setPointerEvents(!1),super.Ay(this.gy,this.vy),this.setSeriesBackgroundEffect(!1),this.iL=new th({thickness:null!==(h=this.bi.parallelCoordinateChartSeriesLineThickness)&&void 0!==h?h:2,fillStyle:new la}),this.sL=new th({thickness:null!==(l=this.bi.parallelCoordinateChartSeriesLineThickness)&&void 0!==l?l:2,fillStyle:new aa({color:this.bi.parallelCoordinateChartSeriesColorUnselected})}),this.eL=this.YP.Zi(this.G_.gA(this._P)).dh(this.iL),this.eL.ou=5e4,this.hL=this.G_.gA(this._P).dh(this.bi.parallelCoordinateChartPointedSeriesLineStyle||In(this.bi.lineSeriesStrokeStyle,0)).setPointerEvents(!1),this.rL=new ud(()=>this.tL.bn(this._P)),this.nL=new Dd(()=>this.tL.gA(this._P).setPointerEvents(!1),(t,e,i)=>(t.zi().dh(i.lineStyle),e.map(e=>{let{positions:i}=e;return t.Go().yA(i[0],i[1])})));const c=e.Dm(),u=$r(o?o.cursorBuilder:void 0,Tf);this.Rm=ym(this,c,u.sm(c,this.uiScale,this.uiScale,Jr,this.bi),this,"show-nearest",lm,()=>0),this.addEventListener("resize",this.ga),void 0!==(null==o?void 0:o.legend)&&this.legend.setOptions(o.legend)}setCursor(t){return this.Rm.setCursor(t),this}getCursor(){return this.Rm.getCursor()}setCursorMode(t){return this.Rm.setCursorMode(t),this}getCursorMode(){return this.Rm.getCursorMode()}setCustomCursor(t){return this.Rm.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.Rm.Ym(t),this}setCursorFormatting(t){return this.Rm.setCursorFormatting(t),this}getCursorFormatting(){return this.Rm.getCursorFormatting()}addCursor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tf;const e=this.Tg(),i=t.sm(e,this.uiScale,this.uiScale,this.wg(e),this.bi);return this.Eg(i),i}setUnselectedSeriesColor(t){return this.HP="function"==typeof t?t(this.HP):t,this.sL=new th({thickness:this.getSeriesStrokeThickness(),fillStyle:new aa({color:this.HP})}),this.gi.Bs(),this}getUnselectedSeriesColor(){return this.HP}setPointedSeriesStrokeStyle(t){return this.hL.dh(t),this.gi.Bs(),this}getPointedSeriesStrokeStyle(){return this.hL.ao()}setSpline(t,e){return t?this.WP._({resolution:void 0!==(null==e?void 0:e.resolution)?e.resolution:32}):this.WP._(void 0),this.gi.Bs(),this}setAxes(t){const e=Array.isArray(t)?t.map((t,e)=>({key:t,id:e})):"object"==typeof t?Object.entries(t).map((t,e)=>({key:t[0],id:t[1]})):void 0;if(!e)return this;const i=e.filter(t=>void 0===this.axes.find(e=>e.key===t.key)),s=this.axes.filter(t=>void 0===e.find(e=>t.key===e.key));return i.forEach(t=>{const e=this.oL(),i=new om(this,this.bi,!this.Rh,t.key,t.id,e,this.tL),s=()=>{this.ZP=!0};i.addEventListener("visiblechange",s),i.addEventListener("dispose",()=>i.removeEventListener("visiblechange",s)),this.axes.push(i)}),s.forEach(t=>{t.N();const e=this.axes.indexOf(t);e>=0&&this.axes.splice(e,1)}),this.axes=e.map(t=>this.axes.find(e=>e.key===t.key)),this.ZP=!0,this.bP=void 0,this.gi.Bs(),this}getAxis(t){const e=this.aL(t);if(!e)throw new Error('ParallelAxisChart.getAxis | no such axis: "'.concat(t,'". Found: ').concat(this.axes.map(t=>void 0!==t.userID?"".concat(t.key,", ").concat(t.userID):t.key).join(", ")));return e}hasAxis(t){return void 0!==this.aL(t)}addSeries(t){var e,i;const s=new am(this,this.ly,this.bi,this.gi.ys,t);return super.yy(s,l(l({},t),{},{legend:l(l({},null==t?void 0:t.legend),{},{show:null!==(i=null===(e=null==t?void 0:t.legend)||void 0===e?void 0:e.show)&&void 0!==i&&i})})),this.QP=!0,this.bP=void 0,this.gi.Bs(),s}setSeriesStrokeThickness(t){return this.iL=this.iL.setThickness(t),this.sL=this.sL.setThickness(t),this.eL.dh(this.iL),this.gi.Bs(),this}getSeriesStrokeThickness(){return this.iL.getThickness()}setLUT(t){return this.Af=t,this.Af&&0===this.Af.lut.units.length&&(this.Af.lut=this.Af.lut.setUnits(this.Af.axis.getTitle())),this.Os.forEach(t=>{t.dg()&&t.add(this)}),this.qP=!0,this.Os.forEach(t=>t.zs()),this.gi.Bs(),this}th(t){super.th(t);const e=this.axes.filter(t=>t.getVisible());this._P.ti(0,e.length-1),this.gy.X({x:e.length-1,y:1}),this.vy.X({x:e.length-1,y:1});const i=void 0===this.bP;if(!this.bP){const t={};e.forEach(e=>{t[e.key]={min:ro,max:no}}),this.ny.forEach(e=>{e.VP&&Object.entries(e.VP).forEach(e=>{let[i,s]=e;const r=t[i];r&&!Number.isNaN(s)&&(r.min=Math.min(r.min,s),r.max=Math.max(r.max,s))})}),this.bP=t}if(this.KP||this.JP||this.QP){const t=e.map((t,e)=>t.xP);this.ny.forEach(i=>{const s=i.VP;if(!s)return;let r=!1;for(let n=0;n<e.length;n+=1){const i=e[n],o=t[n],a=void 0!==o.find(t=>yo(s[i.key],t.min,t.max));if(o.length>0&&!a){r=!0;break}}i.EP=r});const i=this.ny.filter(t=>!t.EP);this.L.D("seriesselect",{selectedSeries:i})}for(const h of this.ny)h.rv();for(const h of this.ny)h.th();super.Og();const s=this.gi.Us(this.gy)||void 0!==this.ny.find(t=>t.getPointed())?this.lL():void 0;this.Rm.th(!1,this.ny,void 0,{explicitTarget:s,afterCursorPointedAt:t=>{const e=this.gi._a();if(t.length>1&&e){const t=this.gi.Ja(e);this.Rm.t_.Hp({x:t.engineX,y:t.engineY},this.gi.oi)}}});const r=Md.Wg(this.Yh,this.Ng),n=this.Os.reduce((t,e)=>{const i=e.Er(r,this.On);return{top:Math.max(t.top,i.top),bottom:Math.max(t.bottom,i.bottom),left:Math.max(t.left,i.left),right:Math.max(t.right,i.right)}},{top:0,bottom:0,left:0,right:0});if(Md.Xg(this.Yh,this.Ng,this.uiScale.ri(),this.On,n),e.length>=2){const t=this.rL.LA(),s=this.nL.LA(),o=e.map((e,i)=>(e.dn(),e.Er({plotAxisLines:s,plotAxisText:t,physicalAxisSize:this._P.y.Mt(),parallelAxisIndex:i})));this._P.Kt([this.nt.left+this.On.left+o[0].uf+n.left,this.nt.right+this.On.right+o[o.length-1].RP/2+n.right]),this._P.qt([this.nt.bottom+this.On.bottom+o.reduce((t,e)=>Math.max(t,e.DP),0)+n.bottom,this.nt.top+this.On.top+r+n.top]),o.forEach((t,i)=>e[i].th(t)),t.finishPlot(),s.finishPlot(),(i||this.TP)&&e.forEach((t,e)=>{if(!t.CP)return;const i=t.CP.steps.map(i=>l(l({},i),{},{value:this.IP(i.value,e,t).y})),s=t.CP.setSteps(i);t.oF.dh(t=>t.setFillStyle(new da({lookUpProperty:"y",lut:s})))});const a=this.ZP||this.JP||this.UP||this.WP.o;a&&(this.eL.zi(),this.YP.zi(),this.jP.clear(),this.ny.forEach(t=>{const i=t.VP;if(!t.getVisible()||!i)return;const s=this.cL(t,i,e,this.eL,this.YP);this.jP.set(t,s),t.Ts(s)})),(a||this.KP||this.qP||this.JP)&&this.uL(this.ny),!a&&this.QP&&this.ny.forEach(t=>{if(t.ds.length>0)return;const i=t.VP;if(!t.getVisible()||!i)return;const s=this.cL(t,i,e,this.eL,this.YP);this.jP.set(t,s),t.Ts(s),this.uL([t])}),this.ny.find(t=>t.VP&&Object.keys(t.VP).length>0)&&(this.XP=!0)}const o=1===(null==s?void 0:s.length)?s[0]:void 0;(o!==this.dL||this.JP)&&(this.hL.zi(),o&&o.series.VP?(this.cL(o.series,o.series.VP,e,this.hL,void 0),this.eL.dh(this.sL)):this.eL.dh(this.iL));const a=Ts(this._P.x.bt(),this._P.y.bt(),this._P.x.Mt(),this._P.y.Mt());this.G_.ym(a),this.Os.forEach(t=>t.th(r,this.On));for(const h of this.ny)h.nv();this.UP=!1,this.KP=!1,this.ZP=!1,this.JP=!1,this.QP=!1,this.qP=!1,this.WP.o=!1,this.TP=!1,this.dL=o}uL(t){const e=this.Af&&{lut:this.Af.lut,key:this.Af.axis.key};t.forEach(t=>{const i=t.VP,s=this.jP.get(t);if(!i||!s)return;let r;if(t.EP)r=this.HP;else if(e){const t=i[e.key],s=this.bP&&this.bP[e.key];r=e.lut.getColors(t,s)}else r=t.OP;s.forEach(t=>t.wI(r))})}zP(){this.JP=!0,this.gi.Bs()}GP(){this.XP&&this.gi.ka(_l.Lo),this.JP=!0,this.gi.Bs()}aL(t){return this.axes.find(e=>e.key===t)||this.axes.find(e=>e.userID===t)}oL(){return or.d1({scale1DConstructor:er,dimension:"x"}).H(0,1)}NP(t){if(this.bP=void 0,this.gi.Bs(),Array.isArray(t)){const e={};return t.forEach((t,i)=>{var s;if("number"==typeof t){const r=null===(s=this.axes[i])||void 0===s?void 0:s.key;if(!r)throw new Error("ParallelCoordinateSeries Axis count doesnt match supplied data");e[r]=t}else"object"==typeof t&&(e[t.key]=t.value)}),e}if("object"==typeof t)return t;throw new Error("ParallelCoordinateSeries unidentified data format")}kP(t,e,i){this.UP=!0,this.gi.Bs()}IP(t,e,i){return{x:e,y:(t-i.oi.G)/(i.oi.$-i.oi.G)}}PP(t,e,i){const s=i.getInterval();return s.start+t*(s.end-s.start)}$P(t){this.qP=!0,this.gi.Bs()}LP(){this.KP=!0,this.gi.Bs()}getSeries(){return this.ny}gg(){return[this]}Ys(){return this.Af?{lut:this.Af.lut}:void 0}getMinimumSize(){return{x:200,y:200}}forEachAxis(t){return this.axes.slice().forEach(e=>t(e)),this}dispose(){return super.dispose(),this.axes.forEach(t=>t.N()),this.Rm.N(),this.G_.N(),this.tL.N(),this}cL(t,e,i,s,r){const n=[];let o;for(let a=0;a<i.length;a+=1){const h=i[a],l=e[h.key],c=this.IP(l,a,h),u=this.WP.C();if(u){if(void 0!==o){const e=u.resolution;let i;for(let a=0;a<=e;a+=1){const h=(a-1)/e,l=a/e,u=l<.5?4*l*l*l:1-(-2*l+2)**3/2;if(void 0!==i){const e={x:o.x+h*(c.x-o.x),y:o.y+i*(c.y-o.y)},a={x:o.x+l*(c.x-o.x),y:o.y+u*(c.y-o.y)},d=s.Go();r&&r.Qi(d,t),n.push(d),d.yA(e,a)}i=u}}}else if(void 0!==o){const e=s.Go();r&&r.Qi(e,t),n.push(e),e.yA(o,c)}o=c}return n}lL(){const t=this.getCursorMode(),e=this.gi._a();if(t&&e){const i=this.gi.Ja(e),s=hr({x:i.engineX,y:i.engineY},this.gi.oi,this._P),r=Math.round(s.x),n=this.axes.filter(t=>t.getVisible())[r];if(!n)return;const o=n.key,a=On(this.ny.map(t=>{if(!t.VP||!t.sv())return;const e=t.VP[o],i=this.IP(e,r,n);return{cursorPosition:{pointMarker:i,pointMarkerScale:this._P,resultTable:i,resultTableScale:this._P},value:e,series:t,axis:n}}));return"show-nearest"===t?[a.filter(t=>!Number.isNaN(t.cursorPosition.pointMarker.y)).sort((t,e)=>Math.abs(t.cursorPosition.pointMarker.y-s.y)-Math.abs(e.cursorPosition.pointMarker.y-s.y))[0]]:("show-nearest-interpolated"!==t&&"show-all-interpolated"!==t||Ur.console.warn('LightningChart JS ParallelCoordinateChart does not support "interpolated" cursor modes.'),a)}}setUserInteractions(t){return this.oh=void 0===t?{rangeSelectors:{create:{doubleClickAxis:!1},move:{drag:!1},dispose:{doubleClick:!1}}}:t,this}getUserInteractions(){return Gr({rangeSelectors:{create:{doubleClickAxis:!0},move:{drag:!0},dispose:{doubleClick:!0}}},this.oh)}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}const lm=(t,e,i)=>{if(i.length>1)return[[{text:i[0].axis.getTitle(),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],...On(i.map(t=>{const e=t.series.getData(),i=e?e[t.axis.key]:void 0;if(void 0!==i)return dm(t,[[t.series,"",Ea(t.axis.formatValue(i),t.axis)]])}).flat())];const s=i[0],r=[[{component:s.series,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}]];return t.axes.forEach(e=>{const i=s.series.getData();if(!i)return;const n=i[e.key];if(void 0===n)return;const o=t.axes.filter(t=>t.getVisible())[s.cursorPosition.pointMarker.x]===e?{weight:"bold"}:{};r.push([{text:e.getTitle(),font:o},"",{text:e.formatValue(n),font:o}])}),r};class cm extends kd{constructor(t,e,i,s,r,n,o){var a;super(t,e,i,s,r,n),this.legend=new Sd(dd,this,this.Ig,this.Jf),this.legend.setOptions(l({position:vd.LeftTop,autoHideThreshold:1},o)),null===(a=this.Os)||void 0===a||a.push(this.legend)}add(t){return t instanceof Bm?(t.getCells().forEach(t=>{t.panel instanceof wd&&this.add(t.panel)}),this.gi.Bs(),this):(this.legend.add(t),this.gi.Bs(),this)}getMinimumSize(){return super.getMinimumSize()}}const um=t=>"show-all-interpolated"===t||"show-nearest-interpolated"===t||"show-pointed-interpolated"===t,dm=(t,e)=>{const i="series"in t?t.series:void 0;if(!i||!("getCursorFormattingOverride"in i))return e;const s=i.getCursorFormattingOverride();return s?s(t,e):e},fm=t=>{var e,i;const s="series"in t?t.series:"slice"in t?t.slice:"bar"in t?t.bar:void 0,r=s&&md(s)&&s.Ys(),n="x"in t&&t.x,o="y"in t&&t.y,a="z"in t&&t.z,h="color"in t&&t.color,l=null!==(i=null!==(e="lookupValue"in t?t.lookupValue:void 0)&&void 0!==e?e:"intensity"in t?t.intensity:void 0)&&void 0!==i?i:"value"in t?t.value:void 0;if(void 0!==l&&r&&"value"===r.lookUpProperty)return r.lut.getColors(l,r.valueRange);if(void 0!==n&&!1!==n&&r&&"x"===r.lookUpProperty)return r.lut.getColors(n,gm(s)?{min:s.getXMin(),max:s.getXMax()}:void 0);if(void 0!==o&&!1!==o&&r&&"y"===r.lookUpProperty)return r.lut.getColors(o,gm(s)?{min:s.getYMin(),max:s.getYMax()}:void 0);if(void 0!==a&&!1!==a&&r&&"z"===r.lookUpProperty)return r.lut.getColors(a,pm(s)?{min:s.getZMin(),max:s.getZMax()}:void 0);if(h)return"number"==typeof h?(t=>Rs(255&t,255&(t>>=8),255&(t>>=8),255&(t>>=8)))(h):h;if(s){const t=s.sh(),e=Bn(s.fs.getTheme(),!0,t);if(ha(e))return e.getColor()}},gm=t=>!(!t||"object"!=typeof t||!("getXMin"in t)),pm=t=>!(!t||"object"!=typeof t||!("getZMin"in t)),ym=(t,e,i,s,r,n,o)=>{let a,h,l,c=r,u=t.getTheme().cursorDynamicBehavior,d=n,f=null,g=!0;s&&(g=!1,s.seriesBackground.addEventListener("pointerenter",()=>{var e;g=!0,t.getCursorMode()&&(h&&y&&!("explicitTarget"in(null!==(e=y[3])&&void 0!==e?e:{}))?p():t.gi.Bs())}),s.seriesBackground.addEventListener("pointerleave",()=>{var e;g=!1,t.getCursorMode()&&(h&&y&&!("explicitTarget"in(null!==(e=y[3])&&void 0!==e?e:{}))?p():t.gi.Bs())}),s.seriesBackground.addEventListener("pointermove",()=>{var e;g=!0,t.getCursorMode()&&(h&&y&&!("explicitTarget"in(null!==(e=y[3])&&void 0!==e?e:{}))?p():t.gi.Bs())}),s.addEventListener("seriesadd",e=>{const i=e.series;i.addEventListener("pointerenter",(e,s)=>{var r;i.sv()&&(h||t.gi.Bs(),a=s||void 0),t.getCursorMode()&&(h&&y&&!("explicitTarget"in(null!==(r=y[3])&&void 0!==r?r:{}))?p():t.gi.Bs())}),i.addEventListener("pointermove",(e,s)=>{var r;i.sv()&&(h||t.gi.Bs(),a=s||void 0),t.getCursorMode()&&(h&&y&&!("explicitTarget"in(null!==(r=y[3])&&void 0!==r?r:{}))?p():t.gi.Bs())}),i.addEventListener("pointerleave",e=>{var s;i.sv()&&(h||t.gi.Bs(),a=void 0),t.getCursorMode()&&(h&&y&&!("explicitTarget"in(null!==(s=y[3])&&void 0!==s?s:{}))?p():t.gi.Bs())})}));const p=()=>{if(l&&(Ur.cancelAnimationFrame(l),l=void 0),!y)return;const t=y;l=Ur.requestAnimationFrame(()=>m.th(...t))};let y;const m={setCursor:e=>(e(i),t),getCursor:()=>i,setCursorMode:e=>(c=e,t.gi.Bs(),t),getCursorMode:()=>c,setCustomCursor:t=>{h=t},Ym:e=>{u=e,t.gi.Bs()},setCursorFormatting:e=>(d=e,t.gi.Bs(),t),getCursorFormatting:()=>d,N:()=>{i.dispose(),e.N()},th:(e,s,r,n)=>{l&&(Ur.cancelAnimationFrame(l),l=void 0),y=[e,s,r,n];const p=t.gi._a();let m=[];if((null==n?void 0:n.explicitTarget)&&c)m=Array.isArray(n.explicitTarget)?n.explicitTarget:[n.explicitTarget];else if(!e&&c){const t=s.find(t=>t.getPointed()),e=p&&t&&(!t.getCursorEnabled||t.getCursorEnabled())&&t.Is?t.Is(p):void 0;if(a=e||a,a&&"show-all"!==c&&"show-all-interpolated"!==c)m=[a];else if("show-all"===c||"show-all-interpolated"===c||"show-nearest"===c||"show-nearest-interpolated"===c){if((g||void 0!==t)&&p&&r){for(const t of s){if(!t.getVisible()||t.getCursorEnabled&&!t.getCursorEnabled())continue;const e=r(t,p,c);e&&m.push(e)}"show-nearest"!==c&&"show-nearest-interpolated"!==c||(m.sort((t,e)=>o(t,p)-o(e,p)),m.length=1)}}else if(("show-pointed"===c||"show-pointed-interpolated"===c)&&p&&t&&(!t.getCursorEnabled||t.getCursorEnabled())&&r){const e=r(t,p,c);e&&(m=[e])}}m=On(m.map(t=>Kn(t)));const v=(null==n?void 0:n.overrideCursorPositions)||((t,e)=>e),x=m[0],b=m.length>0?m:void 0;if(x!==f&&p&&(h&&h({hit:x,hits:b,mouseLocation:p}),t.L.D("cursortargetchange",{hit:x,hits:b,mouseLocation:p}),f=x),h)i.getVisible()&&(i.setVisible(!1),i.Er().th());else{let e=!1;if(m&&m.length>0){const s=d(t,m[0],m);i.setVisible(!0).setPosition(...v(m,m.map(t=>{const e=t.cursorPosition;if(u){const i=fm(t);void 0!==i&&(e.pointMarkerFillStyle=u.pointMarkerFill&&u.pointMarkerFill(i),e.pointMarkerStrokeStyle=u.pointMarkerStroke&&u.pointMarkerStroke(i));const s=(t=>{if(lr(t))return void 0!==t.size?t.size:t.series instanceof Vg?t.series.getPointSize():void 0})(t);if(void 0!==s&&(e.pointMarkerSize=u.pointMarkerSize&&u.pointMarkerSize(s)),!1!==u.matchPointMarkerShape){const i=(t=>{const e=lr(t)&&t.series instanceof Vg?t.series.getPointShape():void 0;return void 0===e||hh(e)?void 0:e})(t);void 0!==i&&(e.pointMarkerShape=i)}}return e}))).setResultTable(t=>t.setContent(s)),e=!0}else i.getVisible()&&(i.setVisible(!1).setPosition().setResultTable(t=>t.setContent([])),e=!0);(null==n?void 0:n.afterCursorPointedAt)&&n.afterCursorPointedAt(m),e&&(i.Er(),i.th())}},solveNearest:(e,i,s,r)=>{const n=e||t.gi._a();if(!n)return[];let a=[];if("show-all"===i||"show-all-interpolated"===i||"show-nearest"===i||"show-nearest-interpolated"===i){for(const t of s){if(!t.getCursorEnabled()||!t.getVisible())continue;const e=r(t,n,i);e&&a.push(e)}"show-nearest"!==i&&"show-nearest-interpolated"!==i||(a.sort((t,e)=>o(t,n)-o(e,n)),a.length=1)}return a=On(a.map(t=>Kn(t))),a},t_:i};return m},mm=(t,e,i)=>Lo(e,Bo(Yo(.5*(t.Uc()+t.Gt())*Math.PI/180),i)),vm=(t,e,i,s,r,n)=>{const o=t.length;let a=90;for(let h=0;h<o;h+=1){const l=t[h],c=a-360*e[h],u=l.getAnimatedExplosion();if(0===u||1===o)l.zk.ih(i);else{const t=Lo(i,Bo(Yo(.5*(a+c)*Math.PI/180),n*u));l.zk.ih(t)}l.zk.Zc(a).Ah(c).Qc(s).Kc(s).qc(r),a=c}};class xm extends wd{constructor(t,e,i,s,r,n,o){var a;super(t,e,i,e.Vg("pieChart bg",0),s,e.gi.bi.pieChartBackgroundFillStyle,e.gi.bi.pieChartBackgroundStrokeStyle,e.gi.bi.pieChartTitleFont,e.gi.bi.pieChartTitleFillStyle,e.gi.bi.pieChartTitleShadow,n,null===(a=null==o?void 0:o.legend)||void 0===a?void 0:a.customLegend),this.sk=[],this.ek=Sp,this.Ec=0,this.yk=this.bi.pieChartSliceFillStylePalette,this.pk=this.bi.pieChartSliceStrokeStyle,this.hk=!0,this.mk=this.bi.pieChartSliceLabelFont,this.Sk=this.bi.pieChartSliceLabelFillStyle,this.rk=this.bi.pieChartSliceLabelShadow,this.nk=0,this.fL=!1,this.AL=20,this.uk=!0,this.Ak=!0,this.dk=t=>{const e=this.sk.indexOf(t);e>=0&&(this.sk.splice(e,1),this.fk())},this.L=new Ar,this.gi.ka(_l.So),this.gk=e.Cm("pieChart bottom",0),this.vk=e.Cm("pieChart top",1),this.Yh.Jr("Pie Chart"),this.zg(r,this.Jf),this.background.addEventListener("dblclick",t=>{t.defaultPrevented||(()=>{const t=this.getSlices();for(let e=0;e<t.length;e+=1)t[e].setExploded(!1)})()});const h=e.Dm(),c=$r(o?o.cursorBuilder:void 0,kf);this.Rm=ym(this,h,c.sm(h,this.uiScale,this.uiScale,Jr,this.bi),void 0,"show-pointed",bm,()=>0),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled));const u=l({backgroundVisible:!0},null==o?void 0:o.legend);this.legend.setOptions(u)}setCursor(t){return this.Rm.setCursor(t),this}getCursor(){return this.Rm.getCursor()}setCursorMode(t){return this.Rm.setCursorMode(t),this}getCursorMode(){return this.Rm.getCursorMode()}setCustomCursor(t){return this.Rm.setCustomCursor(t),this}setCursorDynamicBehavior(t){return this.Rm.Ym(t),this}setCursorFormatting(t){return this.Rm.setCursorFormatting(t),this}getCursorFormatting(){return this.Rm.getCursorFormatting()}addCursor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kf;const e=this.Tg(),i=t.sm(e,this.uiScale,this.uiScale,this.wg(e),this.bi);return this.Eg(i),i}addSlice(t,e){const i=new zp(this.nk,this.gk,this.vk,this,this.Jf,this.dk,this.bi,this.gi.ys);this.nk+=1,i.setName(t);const s=this.Rh;return this.Rh=!1,i.setValue(e),this.Rh=s,i.setEffect(this.uk),this.xk(i),this.sk.push(i),this.fk(),i.setHighlightOnHover(this.hk),this.Os.forEach(t=>{t.dg()&&t.Sc(i)}),i}addSlices(t){const e=[];for(let i=0;i<t.length;i+=1)e.push(this.addSlice(t[i].name,t[i].value));return e}getSlices(){return this.sk}setMultipleSliceExplosion(t){return this.fL=t,this}getMultipleSliceExplosion(){return this.fL}setInnerRadius(t){return this.Ec=t,this.gi.Bs(),this}getInnerRadius(){return this.Ec}setSliceExplosionOffset(t){return this.AL=t,this.gi.Bs(),this}getSliceExplosionOffset(){return this.AL}setLUT(t){return this.Af=t,this.gi.Bs(),this}setSliceFillStyle(t){this.yk=t;for(let e=0;e<this.sk.length;e+=1)this.xk(this.sk[e]);return this.gi.Bs(),this}getSliceFillStyle(){return this.yk}setSliceStrokeStyle(t){this.pk="function"==typeof t?t(this.pk):t;for(let e=0;e<this.sk.length;e+=1)this.xk(this.sk[e]);return this.gi.Bs(),this}getSliceStrokeStyle(){return this.pk}setSliceEffect(t){return this.uk=t,this.sk.forEach(e=>e.ys.bs.Ls(t)),this.gi.Bs(),this}getSliceEffect(){return this.uk}setSliceSorter(t){return this.ek=t,this.sk=this.sk.sort(this.ek),this.gi.Bs(),this}getSliceSorter(){return this.ek}setLabelFillStyle(t){this.Sk="function"==typeof t?t(this.Sk):t;for(let e=0;e<this.sk.length;e+=1)this.xk(this.sk[e]);return this.gi.Bs(),this}getLabelFillStyle(){return this.Sk}setLabelShadow(t){return this.rk=t,this.gi.Bs(),this}getLabelShadow(){return this.rk}setLabelFont(t){this.mk="function"==typeof t?t(this.mk):t;for(let e=0;e<this.sk.length;e+=1)this.xk(this.sk[e]);return this.gi.Bs(),this}getLabelFont(){return this.mk}setLabelEffect(t){return this.Ak=t,this.sk.forEach(e=>e.ys.Ss.Ls(t)),this.gi.Bs(),this}getLabelEffect(){return this.Ak}setLabelFormatter(t){return this.bk=t,this.gi.Bs(),this}getLabelFormatter(){return this.bk}setSliceHighlightOnHover(t){return this.hk=t,this.sk.forEach(e=>e.setHighlightOnHover(t)),this}th(t){super.th(t),super.Og();const e=Md.Wg(this.Yh,this.Ng),i=this.Os.reduce((t,i)=>{const s=i.Er(e,this.On);return{top:Math.max(t.top,s.top),bottom:Math.max(t.bottom,s.bottom),left:Math.max(t.left,s.left),right:Math.max(t.right,s.right)}},{top:0,bottom:0,left:0,right:0});Md.Xg(this.Yh,this.Ng,this.uiScale.ri(),this.On,i);const s=As(this.Jf.x.getInnerInterval()-(this.On.left+this.On.right),this.Jf.y.getInnerInterval()-(this.On.bottom+this.On.top+e)),r=As(s.x-i.left-i.right,s.y-i.top-i.bottom),n=As(this.On.left+(s.x+i.left-i.right)/2,this.On.bottom+(s.y+i.bottom-i.top)/2);if(this.Af){const t=this.Af;this.sk.forEach(e=>{this.xk(e,new aa({color:t.getColors(e.getAnimatedValue(),void 0)}))})}for(let c=0;c<this.sk.length;c+=1){const t=Math.abs(this.sk[c].getAnimatedValue())>0;this.sk[c].zk.setVisible(t),this.sk[c].Dr.setVisible(t)}this.sk=this.sk.sort(this.ek);const o=this.sk.filter(t=>Math.abs(t.getAnimatedValue())>0);let a=0;for(let c=0;c<o.length;c+=1)a+=Math.abs(o[c].getAnimatedValue());const h=[];for(let c=0;c<o.length;c+=1)h.push((l=Math.abs(o[c].getAnimatedValue()))>0?l/a:0);var l;for(let c=0;c<o.length;c+=1){const t=o[c];t.Dr.Jr(this.bk(t,h[c])).Er()}this.Rm.th(!1,this.sk,(t,e,i)=>{const s=h[o.indexOf(t)]||0,r=this.gi.Ja(e);return{cursorPosition:{pointMarker:{x:r.engineX,y:r.engineY},pointMarkerScale:this.gi.oi,resultTable:{x:r.engineX,y:r.engineY},resultTableScale:this.gi.oi},slice:t,category:t.getName(),value:t.getValue(),relativeValue:s}}),this.Os.forEach(t=>t.th(e,this.On)),this.Mk(o,h,n,r)}xk(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.yk(t.index,t);t.setStyle(e,this.pk,this.Sk,this.mk,this.rk)}fk(){this.sk=this.sk.sort(this.ek),this.gi.Bs()}gg(){return this.sk}dispose(){return super.dispose(),this.sk.slice().forEach(t=>t.dispose()),this.Rm.N(),this.vk.N(),this.gk.N(),this}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}const bm=(t,e,i)=>[[{component:e.slice,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:e.value.toString(),font:{weight:"bold"}}]];class Sm extends xm{constructor(t,e,i,s,r,n,o){super(t,e,i,s,r,n,o),this.bk=Ep,this.Fk=[],this.gL=40,this.vL=5,this.yL=10,this.Ik=this.bi.pieChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.Ik=t;for(let e=0;e<this.Fk.length;e+=1)this.Fk[e].dh(this.Ik);return this.gi.Bs(),this}getLabelConnectorStyle(){return this.Ik}setLabelSliceOffset(t){return this.gL=t,this.gi.Bs(),this}getLabelSliceOffset(){return this.gL}setLabelConnectorGapStart(t){return this.vL=t,this.gi.Bs(),this}getLabelConnectorGapStart(){return this.vL}setLabelConnectorEndLength(t){return this.yL=t,this.gi.Bs(),this}getLabelConnectorEndLength(){return this.yL}Mk(t,e,i,s){const r=this.mk.getSize(),n=this.gL,o=this.yL,a=this.vL,h=Math.min(this.AL,n-a);let l=0;if(1===t.length)l=t[0].Dr.vu().x;else for(let u=0;u<t.length;u+=1)l=Math.max(l,t[u].Dr.vu().x);const c=Math.max(.5*(Math.min(s.x-2*l-2*o,s.y-2*r)-2*n),0);if(c<50){const n=Math.max(.5*Math.min(s.x,s.y-2*r),0);vm(t,e,i,n,this.Ec,h),t.forEach(t=>t.Dr.setVisible(!1)),this.Fk.forEach(t=>t.setVisible(!1))}else{vm(t,e,i,c,this.Ec,h);let s=90;const r=t.map((t,r)=>{const a=360*e[r],h=s-a,l=Yo(No(.5*(s+h))),u=l.x>=0?-1:1,d=Lo(Lo(i,Bo(l,c+n)),{x:u*-o,y:0});s=h;const f={x:u,y:0};t.Dr.ih(d).Yl(f),t.Dr.Er();const g=t.Dr.fu();return{position:d,alignment:f,shape:t.Dr,boundaries:g,sliceAngleVec:l,slice:t}}),l=[];for(let t=0;t<r.length;t+=1){const e=r[t],i=l[l.length-1];i&&!1!==fo([i.boundaries,e.boundaries])?e.shape.setVisible(!1):(l.push(e),e.shape.setVisible(!0))}for(let t=0;t<this.Fk.length;t+=1)this.Fk[t].setVisible(!1);l.forEach((t,e)=>{const s=t.slice.zk,r=mm(s,i,c+a+h*t.slice.getAnimatedExplosion()),n=((t,e,i)=>{const s=(i.y-e.y)/(i.x-e.x),r=e.x+(t-e.y)/s;return As(r,t)})(t.position.y,r,i),o=t.position;this.Pk([r,n,o])})}}getMinimumSize(){return As(500,300)}Pk(t){let e;for(let i=0;i<this.Fk.length;i+=1)if(!this.Fk[i].getVisible()){e=this.Fk[i].setVisible(!0);break}void 0===e&&(e=this.vk.Dv(this.Jf,void 0,[Pd.InternalUI]).dh(this.Ik).setPointerEvents(!1),this.Fk.push(e)),e.zi().Sc(t)}}const Am=510001,Em=(t,e)=>{const i=Math.floor(99999/e),s=Math.floor(99999/e),r=Math.floor(99998/e),n=Math.floor(99998/e),o=Math.floor(99999/(e+1)),a=Math.floor(89999/(e+1)),h=Am+e*a;let l=0;return{mL:()=>{const e=t.SL("dashboard ui",h+l);return l+=1,e},bL:()=>t.SL("dashboard legend",51e4),xL:e=>{const h=1+e*i,l=100001+e*s,c=200002+e*r,u=300002+e*n,d=400001+e*o,f=Am+e*a;let g=0;return{gi:t,Vg:(e,i)=>{const s=h+i;return t.SL(e,s)},km:(e,i)=>{const s=l+i;return t.SL(e,s)},Ww:(e,i)=>{const s=c+i;return t.SL(e,s)},Cm:(e,i)=>{const s=u+i;return t.SL(e,s)},_m:(e,i,s)=>{const r=u+i;return t.ML(e,r,s)},Ug:(e,i)=>{const s=d+i;return t.SL(e,s)},Fg:e=>{const i=f+g,s=t.SL(e,i);return g+=1,s},Pg:()=>t.SL("panel legend",500002+e),Dm:()=>t.SL("panel cursor",600001+e)}}}};class km extends Error{constructor(t,e){super("ChartError: ".concat(t," ").concat(e?"in ".concat(e.constructor.name):"")),Object.setPrototypeOf(this,km.prototype)}}class wm extends Error{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s="EngineError: ".concat(t," ").concat(e?"in ".concat(e.constructor.name):"");super(s),i&&Ur.alert(s),Object.setPrototypeOf(this,wm.prototype)}}class Mm extends wm{constructor(t){super(t),Object.setPrototypeOf(this,Mm.prototype)}}class Cm{constructor(t){this.L=new Ar,this.S=t}_(t){return this.S=t,this.L.D("change",{value:t}),this}C(){return this.S}R(t,e,i){this.L.addEventListener(t,e,i)}V(t,e){this.L.removeEventListener(t,e)}}const Tm=(t,e)=>e?t.x:t.y,Fm=(t,e,i,s)=>1===e&&s===(i?t.columnIndex:t.rowIndex)||-1===e&&s===(i?t.columnIndex+t.columnSpan:t.rowIndex+t.rowSpan),Pm=(t,e,i,s,r,n)=>{const o=e.length,a=Math.sign(s),h=[],l=e.reduce((t,e)=>t+e);for(let g=1;g<=o-1;g+=1)h.push(Tm(r,n)*e.slice(0,g).reduce((t,e)=>t+e,0)/l);const c=h.map(t=>0);let u=h[i-1]+s;for(let g=i;g>0&&g<o;g+=a){const e=t.filter(t=>Fm(t,a,n,g)).reduce((t,e)=>Math.max(t,Tm(e.panel.getMinimumSize()||{x:0,y:0},n)),20),s=h[g-1];if(1===a&&u>Tm(r,n)-e||-1===a&&u<0+e){c.fill(0);break}if(g!==i&&(1===a?s>u:s<u))break;c[g-1]=u-s,u+=e*a}const d=c.map((t,e)=>h[e]+t),f=d.map((t,e)=>(t-(e>0?d[e-1]:0))/Tm(r,n));return f.push(1-f.reduce((t,e)=>t+e,0)),f};class Bm{constructor(t,e,i,s,r,n){this.coordsRelative="relative",this.coordsClient="client",this.ci=!1,this.OC=new Array,this.wL=[],this._L=void 0,this.kL=!0,this.CL=!0,this.TL=!0,this.Sg=!1,this.FL=!0,this.IL=()=>{this.FL=!0,this.gi.Bs()},this.PL=[],this.LL=t=>{for(let e=0;e<this.OC.length;e+=1)if(this.OC[e].panel===t){this.OC.splice(e,1),this.kL=!0,this.gi.Bs();break}},this.BL=t=>{const e=this.wL.indexOf(t);e>=0&&this.wL.splice(e,1)},this.DL=(t,e,i,s,r)=>{if(this.RL(e,i,s,r)){const n={panel:t,columnIndex:e,rowIndex:i,columnSpan:s,rowSpan:r};return this.OC.push(n),this.EL(n),this.kL=!0,t}throw new km("Out of dashboard range.")},this.L=new Ar,this.OL=e.numberOfRows,this.zL=e.numberOfColumns,this._g=t,this.VL=e,this.NL=s;const o=this.zL*this.OL;this.GL={x:new Cm(new Array(this.zL).fill(1)),y:new Cm(new Array(this.OL).fill(1))},this.bi=i.bi,this.$L=this.bi.dashboardSplitterStyle,this.Rh=!1!==(null==e?void 0:e.animationsEnabled),this.UL=Em(i,o),this.YL=i.SL("dashboard splitters",500001),this.jL=()=>this.UL.mL(),this.Ig=this.UL.bL(),this.ys=i.ys.ps(this,{HL:{}}),this.ys.HL.Ls(this.bi.effectsDashboardSplitters);const a=i._t();this.uiScale=or.d2({scaleXYConstructor:rr}).ti(0,100).ii(0,100).X(a),this.Jf=or.d2({scaleXYConstructor:rr}).ti(0,this.uiScale.x.getCellSize()).ii(0,this.uiScale.y.getCellSize()).X(a),this.WL=i.XL.bind(i),this.ZL=i.JL.bind(i),this.QL=i.KL.bind(i),this.qL=i.tB.bind(i),this.Na=i.Na.bind(i),this.$a=i.$a.bind(i),this.engine=i.Cg,this.gi=i.yu,i.R("resize",this.IL),i.Bs();const h=t=>{this.Sg=t.isInView,this.L.D("inviewchange",{isInView:this.Sg})};i.R("inviewchanged",h),this.Rg=()=>{i.V("inviewchanged",h)},this.iB(),this.setAnimationsEnabled(this.Rh),this.createChartXY=t=>{const e=Lm(t,this.VL,this.Rh);return this.DL(new Kg(this._g,this.UL.xL(this.sB(t.columnIndex,t.rowIndex)),this.eB(e,this.GL),this.LL,n,e,this),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createSpiderChart=t=>{const e=Lm(t,this.VL,this.Rh);return this.DL(new iy(this._g,this.UL.xL(this.sB(t.columnIndex,t.rowIndex)),this.eB(e,this.GL),this.LL,n,e,this),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createPolarChart=t=>{const e=Lm(t,this.VL,this.Rh);return this.DL(new gp(this._g,this.UL.xL(this.sB(t.columnIndex,t.rowIndex)),this.eB(e,this.GL),this.LL,n,e,this),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createPieChart=t=>{const e=Lm(t,this.VL,this.Rh),i=e&&e.type?e.type:Sm;return this.DL(new i(this._g,this.UL.xL(this.sB(t.columnIndex,t.rowIndex)),this.eB(e,this.GL),this.LL,n,this,e),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createGaugeChart=t=>{const e=Lm(t,this.VL,this.Rh);return this.DL(new em(this._g,this.UL.xL(this.sB(t.columnIndex,t.rowIndex)),this.eB(e,this.GL),this.LL,n,this,e),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createFunnelChart=t=>{const e=Lm(t,this.VL,this.Rh),i=e&&e.type?e.type:Pp;return this.DL(new i(this._g,this.UL.xL(this.sB(t.columnIndex,t.rowIndex)),this.eB(e,this.GL),this.LL,n,this,e),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createPyramidChart=t=>{const e=Lm(t,this.VL,this.Rh),i=t&&t.type?t.type:Gp;return this.DL(new i(this._g,this.UL.xL(this.sB(t.columnIndex,t.rowIndex)),this.eB(e,this.GL),this.LL,n,this,e),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createUIPanel=t=>{const e=Lm(t,this.VL,this.Rh);return this.DL(new kd(this._g,this.UL.xL(this.sB(t.columnIndex,t.rowIndex)),this.eB(e,this.GL),this.LL,n,this),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createLegendPanel=t=>{const e=Lm(t,this.VL,this.Rh);return this.DL(new cm(this._g,this.UL.xL(this.sB(t.columnIndex,t.rowIndex)),this.eB(e,this.GL),this.LL,n,this,t.legend),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createZoomBandChart=t=>{const e=Lm(t,this.VL,this.Rh);return this.DL(new np(this._g,this.UL.xL(this.sB(t.columnIndex,t.rowIndex)),this.eB(e,this.GL),this.LL,n,e,this),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createMapChart=t=>{const e=Lm(t,this.VL,this.Rh);return this.DL(new Uf(this._g,this.UL.xL(this.sB(t.columnIndex,t.rowIndex)),this.eB(e,this.GL),this.LL,n,e,this),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createChart3D=t=>{const e=Lm(t,this.VL,this.Rh),i=new mf(this._g,this.UL.xL(this.sB(t.columnIndex,t.rowIndex)),this.eB(e,this.GL),this.LL,n,this,e);return this.DL(i,e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createDataGrid=t=>{const e=Lm(t,this.VL,this.Rh),i=new zy(this._g,this.UL.xL(this.sB(t.columnIndex,t.rowIndex)),this.eB(e,this.GL),this.LL,n,this);return this.DL(i,e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createBarChart=t=>{const e=Lm(t,this.VL,this.Rh),i=new Gy(this._g,this.UL.xL(this.sB(t.columnIndex,t.rowIndex)),this.eB(e,this.GL),this.LL,n,this,e);return this.DL(i,e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createParallelCoordinateChart=t=>{const e=Lm(t,this.VL,this.Rh),i=new hm(this._g,this.UL.xL(this.sB(t.columnIndex,t.rowIndex)),this.eB(e,this.GL),this.LL,n,this,e);return this.DL(i,e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)}}sB(t,e){return t+e*this.zL}eB(t,e){return{d1:i=>new i.scale1DConstructor("x"===i.dimension?t.columnIndex:t.rowIndex,"x"===i.dimension?t.columnSpan:t.rowSpan,"x"===i.dimension?this.zL:this.OL,"x"===i.dimension?e.x:e.y),d2:i=>(new i.scaleXYConstructor).hi({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.zL,y:this.OL},e),d3:()=>new Qs({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.zL,y:this.OL},e)}}setWidth(t){return t instanceof Array||(t=[t,t]),this.WL(t[0]),this.ZL(t[1]),this}setHeight(t){return t instanceof Array||(t=[t,t]),this.QL(t[0]),this.qL(t[1]),this}getWidth(){return this.Na()}getHeight(){return this.$a()}setBackgroundFillStyle(t){return this.engine.setBackgroundFillStyle(t),this.YL.Bs(),this}getBackgroundFillStyle(){return this.engine.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.engine.setBackgroundStrokeStyle(t),this.YL.Bs(),this}getBackgroundStrokeStyle(){return this.engine.getBackgroundStrokeStyle()}getTheme(){return this.bi}setSplitterStyle(t){const e=this.$L;return this.$L="function"==typeof t?t(this.$L):t,this.hB(e),this}getSplitterStyle(){return this.$L}setSplitterEffect(t){return this.ys.HL.Ls(t),this.gi.Bs(),this}getSplitterEffect(){return this.ys.HL.Ds()}setAnimationHighlight(t){return this.TL=t,this.PL.forEach(e=>this.gi.Ms.Ns(e.line,t)),this}getAnimationHighlight(){return this.TL}hB(t){for(const e of this.PL)e.line.dh(this.$L);this.iB()}setColumnWidth(t,e){const i=this.GL.x.C();return t>=0&&t<i.length&&(i[t]=e,this.GL.x._(i)),this.IL(),this}getColumnWidth(t){const e=this.GL.x.C();if(t>=e.length)throw new km("Column index is out of dashboard range.");return e[t]}setRowHeight(t,e){const i=this.GL.y.C();return t>=0&&t<i.length&&(i[Math.abs(i.length-1-t)]=e,this.GL.y._(i)),this.IL(),this}getRowHeight(t){const e=this.GL.y.C();if(t>=e.length)throw new km("Row index is out of dashboard range.");return e[Math.abs(e.length-1-t)]}getSizePixels(){return this.Jf.getInnerIntervalPixels()}rB(t,e,i){if(i&&Math.abs(t.x)>0)this.nB(e,t.x);else{if(i||!(Math.abs(t.y)>0))return;this.oB(e,t.y)}for(const s of this.OC)s.panel.j();this.IL()}oB(t,e){const i=Pm(this.OC,this.GL.y.C(),t,e,this.Jf._t(),!1);this.GL.y._(i),this.IL()}nB(t,e){const i=Pm(this.OC,this.GL.x.C(),t,e,this.Jf._t(),!0);this.GL.x._(i),this.IL()}aB(){this.PL.forEach(t=>t.line.dispose()),this.PL.length=0;for(let t=1;t<=this.zL-1;t+=1)for(let e=0;e<=this.OL-1;e+=1)if(void 0!==this.OC.find(i=>yo(e,i.rowIndex,i.rowIndex+i.rowSpan-1)&&(t===i.columnIndex||t===i.columnIndex+i.columnSpan))){const i=this.YL.fh(this.Jf).dh(this.$L);i.addEventListener("pointerenter",e=>{this.PL.forEach(e=>{"vertical"===e.alignment&&e.column===t&&(this.gi.Ms.Vs(e.line,1),this.YL.lB(e.line))}),this._L=this.engine.setMouseStyle(Xh.ResizeColumn,this._L),this.gi.Bs()}),i.addEventListener("pointerleave",e=>{this.PL.forEach(e=>{"vertical"===e.alignment&&e.column===t&&this.gi.Ms.Vs(e.line,0)}),this._L=this.engine.restoreMouseStyle(this._L),this.gi.Bs()}),i.addEventListener("pointerdown",e=>{mn(e);let i=e;const s=e=>{mn(e),this._L=this.engine.setMouseStyle(Xh.ResizeColumn,this._L),this.PL.forEach(e=>{"vertical"===e.alignment&&e.column===t&&(this.gi.Ms.Vs(e.line,1),this.YL.lB(e.line))});const s={x:e.clientX-i.clientX,y:e.clientY-i.clientY};i=e,this.rB(s,t,!0)},r=i=>{i.pointerId===e.pointerId&&(this.PL.forEach(e=>{"vertical"===e.alignment&&e.column===t&&this.gi.Ms.Vs(e.line,0)}),this._L=this.engine.restoreMouseStyle(this._L),Ur.removeEventListener("pointermove",s),Ur.removeEventListener("pointerup",r))};Ur.addEventListener("pointermove",s),Ur.addEventListener("pointerup",r)}),this.gi.Ms.xs(i,t=>i.Fi(t),{animationEnabled:this.TL}),this.PL.push({row:e,column:t,line:i,alignment:"vertical"})}for(let t=1;t<=this.OL-1;t+=1)for(let e=0;e<=this.zL-1;e+=1)if(void 0!==this.OC.find(i=>yo(e,i.columnIndex,i.columnIndex+i.columnSpan-1)&&(t===i.rowIndex||t===i.rowIndex+i.rowSpan))){const i=this.YL.fh(this.Jf).dh(this.$L);i.addEventListener("pointerenter",e=>{this.PL.forEach(e=>{"horizontal"===e.alignment&&e.row===t&&(this.gi.Ms.Vs(e.line,1),this.YL.lB(e.line))}),this._L=this.engine.setMouseStyle(Xh.ResizeRow,this._L),this.gi.Bs()}),i.addEventListener("pointerleave",e=>{this.PL.forEach(e=>{"horizontal"===e.alignment&&e.row===t&&this.gi.Ms.Vs(e.line,0)}),this._L=this.engine.restoreMouseStyle(this._L),this.gi.Bs()}),i.addEventListener("pointerdown",e=>{mn(e);let i=e;const s=e=>{mn(e),this._L=this.engine.setMouseStyle(Xh.ResizeRow,this._L),this.PL.forEach(e=>{"horizontal"===e.alignment&&e.row===t&&(this.gi.Ms.Vs(e.line,1),this.YL.lB(e.line))});const s={x:e.clientX-i.clientX,y:-(e.clientY-i.clientY)};i=e,this.rB(s,t,!1)},r=i=>{i.pointerId===e.pointerId&&(this.PL.forEach(e=>{"horizontal"===e.alignment&&e.row===t&&this.gi.Ms.Vs(e.line,0)}),this._L=this.engine.restoreMouseStyle(this._L),Ur.removeEventListener("pointermove",s),Ur.removeEventListener("pointerup",r))};Ur.addEventListener("pointermove",s),Ur.addEventListener("pointerup",r)}),this.gi.Ms.xs(i,t=>i.Fi(t),{animationEnabled:this.TL}),this.PL.push({row:t,column:e,line:i,alignment:"horizontal"})}this.ys.HL.ks(this.PL.map(t=>t.line))}cB(){const t=this.Jf._t(),e=this.GL.x.C(),i=e.reduce((t,e)=>t+e),s=this.GL.y.C(),r=s.reduce((t,e)=>t+e);this.PL.forEach(n=>{if("vertical"===n.alignment){const o=As(t.x*e.slice(0,n.column).reduce((t,e)=>t+e,0)/i,t.y*s.slice(0,n.row).reduce((t,e)=>t+e,0)/r),a=As(o.x,t.y*s.slice(0,n.row+1).reduce((t,e)=>t+e,0)/r);n.line.gh(o).Ah(a)}else{const o=As(t.x*e.slice(0,n.column).reduce((t,e)=>t+e,0)/i,t.y*s.slice(0,n.row).reduce((t,e)=>t+e,0)/r),a=As(t.x*e.slice(0,n.column+1).reduce((t,e)=>t+e,0)/i,o.y);n.line.gh(o).Ah(a)}})}setAnimationsEnabled(t){return this.Rh=t,this.getCells().filter(t=>t.panel instanceof wd).forEach(e=>e.panel.setAnimationsEnabled(t)),this.setAnimationHighlight(this.Rh),this}getAnimationsEnabled(){return this.Rh}getCells(){return this.OC.slice()}dispose(){return this.ci||(this.Rg&&this.Rg(),this.OC.slice().forEach(t=>t.panel.dispose()),this.wL.slice().forEach(t=>t.dispose()),this.ci=!0,this.NL(),this.L.D("dispose",{})),this}isDisposed(){return this.ci}getIsInView(){return this.Sg}saveToFile(t,e,i){return ad(this.engine,t,e,i),this}pu(t){if(this.FL){const t=this.gi.oi._t(),e=t.x,i=t.y;this.uiScale.X(e,i),this.Jf.X(e,i);const s=this.uiScale.getInnerIntervalPixels();this.Jf.ti(0,s.x).ii(0,s.y),this.L.D("resize",{width:s.x,height:s.y,engineWidth:e,engineHeight:i}),this.CL=!0}this.kL&&(this.aB(),this.kL=!1,this.CL=!0),this.CL&&(this.cB(),this.CL=!1);for(const e of this.OC)e.panel.th(t);return this.wL.forEach(t=>t.Er()),this.wL.forEach(t=>t.th()),this.FL=!1,this}Y(){for(const t of this.OC)t.panel.Y();return this.Jf.x.Y(),this.Jf.y.Y(),this.uiScale.x.Y(),this.uiScale.y.Y(),this}j(){for(const t of this.OC)t.panel.j();return this.Jf.x.j(),this.Jf.y.j(),this.uiScale.x.j(),this.uiScale.y.j(),this}translateCoordinate(t,e,i){return cd(t,e,i,this.Jf,this.gi)}addUIElement(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:su,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.uiScale;e=ld(e,this.Jf);const i=hd(t,this.jL(),this.uiScale,e,this.BL,this.bi);return this.wL.push(i),i}RL(t,e,i,s){return e>=0&&t>=0&&e+s<=this.OL&&t+i<=this.zL}EL(t){const e=this.$L,i=e===Lr?0:e.getThickness()/2,s={left:t.columnIndex>0?i:0,top:t.rowIndex<this.OL-1?i:0,right:t.columnIndex<this.zL-1?i:0,bottom:t.rowIndex>0?i:0};t.panel.mn(s)}iB(){this.uiScale.x.St([0,0]),this.uiScale.y.St([0,0]),this.Jf.x.St([0,0]),this.Jf.y.St([0,0]);for(const t of this.OC)this.EL(t);this.gi.Bs()}addEventListener(t,e,i){this.L.addEventListener(t,e,i)}removeEventListener(t,e){this.L.removeEventListener(t,e)}}const Lm=(t,e,i)=>{const s=l(l({},t),{},{columnSpan:t.columnSpan||1,rowSpan:t.rowSpan||1,animationsEnabled:void 0!==t.animationsEnabled?t.animationsEnabled:i});var r,n;return s.rowIndex=(r=s.rowIndex,n=s.rowSpan,e.numberOfRows-(r+n)),s},Dm=function(t){let e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAgCAYAAADwkoGKAAAsa2NhQlgAACxranVtYgAAAB5qdW1kYzJwYQARABCAAACqADibcQNjMnBhAAAALEVqdW1iAAAAR2p1bWRjMm1hABEAEIAAAKoAOJtxA3Vybjp1dWlkOjlmZDBkZjkzLTVmMDMtNDczYi1hZThhLTFhNDM4NmMzNmJhYQAAAAGzanVtYgAAAClqdW1kYzJhcwARABCAAACqADibcQNjMnBhLmFzc2VydGlvbnMAAAAA12p1bWIAAAAmanVtZGNib3IAEQAQgAAAqgA4m3EDYzJwYS5hY3Rpb25zAAAAAKljYm9yoWdhY3Rpb25zgaNmYWN0aW9ua2MycGEuZWRpdGVkbXNvZnR3YXJlQWdlbnRtQWRvYmUgRmlyZWZseXFkaWdpdGFsU291cmNlVHlwZXhTaHR0cDovL2N2LmlwdGMub3JnL25ld3Njb2Rlcy9kaWdpdGFsc291cmNldHlwZS9jb21wb3NpdGVXaXRoVHJhaW5lZEFsZ29yaXRobWljTWVkaWEAAACranVtYgAAAChqdW1kY2JvcgARABCAAACqADibcQNjMnBhLmhhc2guZGF0YQAAAAB7Y2JvcqVqZXhjbHVzaW9uc4GiZXN0YXJ0GCFmbGVuZ3RoGSx3ZG5hbWVuanVtYmYgbWFuaWZlc3RjYWxnZnNoYTI1NmRoYXNoWCBvErgv+J0u7bVCYViyMUgw5yMb8idAv1erA3/DALx9NWNwYWRIAAAAAAAAAAAAAAIDanVtYgAAACRqdW1kYzJjbAARABCAAACqADibcQNjMnBhLmNsYWltAAAAAddjYm9yqGhkYzp0aXRsZW9HZW5lcmF0ZWQgaW1hZ2VpZGM6Zm9ybWF0aWltYWdlL3BuZ2ppbnN0YW5jZUlEeCh4bXAuaWlkOjI3NEMxQjdDN0E0MDExRUVBQkZFQUNFQjJDOTA0NzVCb2NsYWltX2dlbmVyYXRvcng2QWRvYmVfUGhvdG9zaG9wLzI1LjIuMCBhZG9iZV9jMnBhLzAuNy42IGMycGEtcnMvMC4yNS4ydGNsYWltX2dlbmVyYXRvcl9pbmZvgb9kbmFtZW9BZG9iZSBQaG90b3Nob3BndmVyc2lvbmYyNS4yLjD/aXNpZ25hdHVyZXgZc2VsZiNqdW1iZj1jMnBhLnNpZ25hdHVyZWphc3NlcnRpb25zgqJjdXJseCdzZWxmI2p1bWJmPWMycGEuYXNzZXJ0aW9ucy9jMnBhLmFjdGlvbnNkaGFzaFggSmnBvf+o3kEweL4k7cz4MTrB0WSVNFZxoA1rBrM31K+iY3VybHgpc2VsZiNqdW1iZj1jMnBhLmFzc2VydGlvbnMvYzJwYS5oYXNoLmRhdGFkaGFzaFggL2g6Dghd536quyA5vPlS/9NGA5WvLRkkKJmqn0VxCoFjYWxnZnNoYTI1NgAAKEBqdW1iAAAAKGp1bWRjMmNzABEAEIAAAKoAOJtxA2MycGEuc2lnbmF0dXJlAAAAKBBjYm9y0oREoQE4JKNmc2lnVHN0oWl0c3RUb2tlbnOBoWN2YWxZDjYwgg4yMAMCAQAwgg4pBgkqhkiG9w0BBwKggg4aMIIOFgIBAzEPMA0GCWCGSAFlAwQCAQUAMIGCBgsqhkiG9w0BCRABBKBzBHEwbwIBAQYJYIZIAYb9bAcBMDEwDQYJYIZIAWUDBAIBBQAEIHj4VpJDPzaO0x4hOPnj/w1GTHuwXU0IpBf4VVocIQzoAhB3SsxvHza2JR1fKj3Mjr0yGA8yMDIzMTEwMzExNTcyNloCCQCyOL6wAOGCbaCCC70wggUHMIIC76ADAgECAhAFHp6R1x6RCrvkPVzt0N3ZMA0GCSqGSIb3DQEBCwUAMGMxCzAJBgNVBAYTAlVTMRcwFQYDVQQKEw5EaWdpQ2VydCwgSW5jLjE7MDkGA1UEAxMyRGlnaUNlcnQgVHJ1c3RlZCBHNCBSU0E0MDk2IFNIQTI1NiBUaW1lU3RhbXBpbmcgQ0EwHhcNMjMwOTA4MDAwMDAwWhcNMzQxMjA3MjM1OTU5WjBYMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xMDAuBgNVBAMTJ0RpZ2lDZXJ0IEFkb2JlIEFBVEwgVGltZXN0YW1wIFJlc3BvbmRlcjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABE0srlH5A/+15/MFl1asNh8Q8TubOsEVfu0qlJrF0smjtwL1IeHZ/AB7J59u1Trpho1BDN85lfTY30rNBsfT+myjggGLMIIBhzAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH/BAIwADAWBgNVHSUBAf8EDDAKBggrBgEFBQcDCDAgBgNVHSAEGTAXMAgGBmeBDAEEAjALBglghkgBhv1sBwEwHwYDVR0jBBgwFoAUuhbZbU2FL3MpdpovdYxqII+eyG8wHQYDVR0OBBYEFLA1qlbDIamLztO4vIsWJVed7zThMFoGA1UdHwRTMFEwT6BNoEuGSWh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcmwwgZAGCCsGAQUFBwEBBIGDMIGAMCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2VydC5jb20wWAYIKwYBBQUHMAKGTGh0dHA6Ly9jYWNlcnRzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcnQwDQYJKoZIhvcNAQELBQADggIBAHgrjELHhBCEWJSCyRX7lsL0C9LJgbX1ryVYySNRxHkMR2LqC7PQZRJgDNR+kJop8P5v2Bzp/jMrzw4U4pY6rYv3I8HpFlJa4uBwUTIUgHWpi8Xxd1JEEX94POODi7HySekX60A055BozFb7GGVaxb0LreQTRXnkr6ggPNUPX9Gh+2ScOxlTdQQLgZbkdYvxo3Ap6cy9riZijRxOZqiOyWSxMUhgKxeKzwrFW6Xbe0awNhOUXZzIxc4ixpKzWSItpPJ30ZiBQn49U3ADYTnshbN9ZkTA1pHf/Nov2ZUvvddkZ8UYvwo9vBvLTDvnmABnRMBKaXYAs3ZCvw9CkDPOWTeUJMFRAtmUx52ohaA3nD8bCJ6UfpQ2pFfOdShwpb6GKv0g+BgcdIG2LHPJ0Ufmr+XmpgZgq/HIge0hjcCADpjDgq2z4B0L4xtAA1M8MrUx02hxb7104nFKqMuv5zJTQl3sgwqXUyP+9zHQP9y/Z5Fx/AQWrOXCW56dV7P4cFBJl8zHqinlhkOStZ1m22+9Hlq+eC0hJ2lkF1LuzRdJJb/51LXoPKRnopFDng6XpoD7eG6w4YpAx9+P00JuUoBsYSrdsuFiyWyQQGBAnjI69ggbSLcW+hJytuinaxawVlItJkS2eV5Z4XsxPg7f82uRkdtN0hTHeI93CN3OWeRebnK7MIIGrjCCBJagAwIBAgIQBzY3tyRUfNhHrP0oZipeWzANBgkqhkiG9w0BAQsFADBiMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3d3cuZGlnaWNlcnQuY29tMSEwHwYDVQQDExhEaWdpQ2VydCBUcnVzdGVkIFJvb3QgRzQwHhcNMjIwMzIzMDAwMDAwWhcNMzcwMzIyMjM1OTU5WjBjMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xOzA5BgNVBAMTMkRpZ2lDZXJ0IFRydXN0ZWQgRzQgUlNBNDA5NiBTSEEyNTYgVGltZVN0YW1waW5nIENBMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAxoY1BkmzwT1ySVFVxyUDxPKRN6mXUaHW0oPRnkyibaCwzIP5WvYRoUQVQl+kiPNo+n3znIkLf50fng8zH1ATCyZzlm34V6gCff1DtITaEfFzsbPuK4CEiiIY3+vaPcQXf6sZKz5C3GeO6lE98NZW1OcoLevTsbV15x8GZY2UKdPZ7Gnf2ZCHRgB720RBidx8ald68Dd5n12sy+iEZLRS8nZH92GDGd1ftFQLIWhuNyG7QKxfst5Kfc71ORJn7w6lY2zkpsUdzTYNXNXmG6jBZHRAp8ByxbpOH7G1WE15/tePc5OsLDnipUjW8LAxE6lXKZYnLvWHpo9OdhVVJnCYJn+gGkcgQ+NDY4B7dW4nJZCYOjgRs/b2nuY7W+yB3iIU2YIqx5K/oN7jPqJz+ucfWmyU8lKVEStYdEAoq3NDzt9KoRxrOMUp88qqlnNCaJ+2RrOdOqPVA+C/8KI8ykLcGEh/FDTP0kyr75s9/g64ZCr6dSgkQe1CvwWcZklSUPRR8zZJTYsg0ixXNXkrqPNFYLwjjVj33GHek/45wPmyMKVM1+mYSlg+0wOI/rOP015LdhJRk8mMDDtbiiKowSYI+RQQEgN9XyO7ZONj4KbhPvbCdLI/Hgl27KtdRnXiYKNYCQEoAA6EVO7O6V3IXjASvUaetdN2udIOa5kM0jO0zbECAwEAAaOCAV0wggFZMBIGA1UdEwEB/wQIMAYBAf8CAQAwHQYDVR0OBBYEFLoW2W1NhS9zKXaaL3WMaiCPnshvMB8GA1UdIwQYMBaAFOzX44LScV1kTN8uZz/nupiuHA9PMA4GA1UdDwEB/wQEAwIBhjATBgNVHSUEDDAKBggrBgEFBQcDCDB3BggrBgEFBQcBAQRrMGkwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBBBggrBgEFBQcwAoY1aHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcnQwQwYDVR0fBDwwOjA4oDagNIYyaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcmwwIAYDVR0gBBkwFzAIBgZngQwBBAIwCwYJYIZIAYb9bAcBMA0GCSqGSIb3DQEBCwUAA4ICAQB9WY7Ak7ZvmKlEIgF+ZtbYIULhsBguEE0TzzBTzr8Y+8dQXeJLKftwig2qKWn8acHPHQfpPmDI2AvlXFvXbYf6hCAlNDFnzbYSlm/EUExiHQwIgqgWvalWzxVzjQEiJc6VaT9Hd/tydBTX/6tPiix6q4XNQ1/tYLaqT5Fmniye4Iqs5f2MvGQmh2ySvZ180HAKfO+ovHVPulr3qRCyXen/KFSJ8NWKcXZl2szwcqMj+sAngkSumScbqyQeJsG33irr9p6xeZmBo1aGqwpFyd/EjaDnmPv7pp1yr8THwcFqcdnGE4AJxLafzYeHJLtPo0m5d2aR8XKc6UsCUqc3fpNTrDsdCEkPlM05et3/JWOZJyw9P2un8WbDQc1PtkCbISFA0LcTJM3cHXg65J6t5TRxktcma+Q4c6umAU+9Pzt4rUyt+8SVe+0KXzM5h0F4ejjpnOHdI/0dKNPH+ejxmF/7K9h+8kaddSweJywm228Vex4Ziza4k9Tm8heZWcpw8De/mADfIBZPJ/tgZxahZrrdVcA6KYawmKAr7ZVBtzrVFZgxtGIJDwq9gdkT/r+k0fNX2bwE+oLeMt8EifAAzV3C+dAjfwAL5HYCJtnwZXZCpimHCUcr5n8apIUP/JiW9lVUKx+A+sDyDivl1vupL0QVSucTDh3bNzgaoSv27dZ8/DGCAbgwggG0AgEBMHcwYzELMAkGA1UEBhMCVVMxFzAVBgNVBAoTDkRpZ2lDZXJ0LCBJbmMuMTswOQYDVQQDEzJEaWdpQ2VydCBUcnVzdGVkIEc0IFJTQTQwOTYgU0hBMjU2IFRpbWVTdGFtcGluZyBDQQIQBR6ekdcekQq75D1c7dDd2TANBglghkgBZQMEAgEFAKCB0TAaBgkqhkiG9w0BCQMxDQYLKoZIhvcNAQkQAQQwHAYJKoZIhvcNAQkFMQ8XDTIzMTEwMzExNTcyNlowKwYLKoZIhvcNAQkQAgwxHDAaMBgwFgQU2Rq5M/4XremCHqYT9aQ6cU4+fn0wLwYJKoZIhvcNAQkEMSIEIGmY+GsCefCDmP0PFcYjdxBUfi0EgKYuEZb9pUMyLNuVMDcGCyqGSIb3DQEJEAIvMSgwJjAkMCIEIILa8ZSVezaEAkWP1ScAaf5ixxRW+p4Lhqv4J+hTICfZMAoGCCqGSM49BAMCBEcwRQIgcxxuf7QHV9Fkpj1VhPrFqhNFh8dZzl8qUU/2N3Sr4eoCIQDKu0KGYL++CSsDAXjJciMDbr5ImTy3jw0yQU5GYYeLimd4NWNoYWluglkGMzCCBi8wggQXoAMCAQICEBtbCzvasORd8vMNnlTR2tIwDQYJKoZIhvcNAQELBQAwdTELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEiMCAGA1UEAxMZQWRvYmUgUHJvZHVjdCBTZXJ2aWNlcyBHMzAeFw0yMzAyMDEwMDAwMDBaFw0yNDAyMDEyMzU5NTlaMIGhMREwDwYDVQQDDAhjYWktcHJvZDEcMBoGA1UECwwTQ29udGVudCBDcmVkZW50aWFsczETMBEGA1UECgwKQWRvYmUgSW5jLjERMA8GA1UEBwwIU2FuIEpvc2UxEzARBgNVBAgMCkNhbGlmb3JuaWExCzAJBgNVBAYTAlVTMSQwIgYJKoZIhvcNAQkBFhVncnAtY2FpLW9wc0BhZG9iZS5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDv0wCnfYY9lkHDsykrTG7FYlnYHBcyualuD5u9ULjzv+FsTWOLg8Nhrz9RTxI9EeBbu3Wm7f4vqPsQYfxkEp0wIa6DVmEOZhbAeRfbhybWQ/D4Wvvck4mEZR+QZmTpIn7HX61gbtMFHlJUxkYBctIoAt9TBAFbz9d5Ig2WG0bsH39b6/8USXnIIk4FB6dtBRT1xeEwSDtwOd1YBpXXNBJmRWHXNJZZ85of2tBTesg/kMvTrOJJxYDZ97U416wcvbVomlees+NXUY3/ZB4xH+NsZils7m1bL2v2hSnHiLoqZeUKklbHUmT4ZpjrZCdtuIsWm5j2PPXKr7HKUuCbZSXBAgMBAAWjggGMMIIBiDAMBgNVHRMBAf8EAjAAMA4GA1UdDwEB/wQEAwIHgDAeBgNVHSUEFzAVBgkqhkiG9y8BAQwGCCsGAQUFBwMEMIGOBgNVHSAEgYYwgYMwgYAGCSqGSIb3LwECAzBzMHEGCCsGAQUFBwICMGUMY1lvdSBhcmUgbm90IHBlcm1pdHRlZCB0byB1c2UgdGhpcyBMaWNlbnNlIENlcnRpZmljYXRlIGV4Y2VwdCBhcyBwZXJtaXR0ZWQgYnkgdGhlIGxpY2Vuc2UgYWdyZWVtZW50LjBdBgNVHR8EVjBUMFKgUKBOhkxodHRwOi8vcGtpLWNybC5zeW1hdXRoLmNvbS9jYV83YTVjM2EwYzczMTE3NDA2YWRkMTkzMTJiYzFiYzIzZi9MYXRlc3RDUkwuY3JsMDcGCCsGAQUFBwEBBCswKTAnBggrBgEFBQcwAYYbaHR0cDovL3BraS1vY3NwLnN5bWF1dGguY29tMB8GA1UdIwQYMBaAFFcpejJNzP7kNU7AHyRzznNTq99qMA0GCSqGSIb3DQEBCwUAA4ICAQBXjlGa3yAK/Gijn6n/JNU9FZm72MP6vc5czrWe9y0T+EawuRvhpD5Edi1TnXkrpe8sMkgSjTGdbY+yGhq8zlCWQeXN1/aWo3L9Xr1uNxY/oVpLn0uWWfnfJ7yR9gKl/yoMfhjydT4t1fXHi/MhfhrWSVRHqX2U31UFGz/e298P2kv+vqhzpIUo1bj+jibtoPLMMQcCOTtKiJOTh4o3VSZpwQDERCzo91NkF+LnZjwYl6fE5USIkg/oCoomXxSPpowybDrcRJ9ilbtJcER48/LGgwzv/c7OYdron4PnEXm1FkOaVj+QRf7OwiNTizonhIzLR5Vfp0QHOWv/bPzvCjPQd+Xr0Q4032WlSxQwostNTAPtoVAU4OCwVH3Ech38emJ00/6fkDCdr7MN8/4n2LSNrMUvaBEZdmLqDCBnO02dbFrmpg3pTc0FqRQ4GL/88pjRNSMy5tU9SoQnSCGYqIsjfL8AzgPEGiXXRgABYc1uXecf4/eayb3K2MPs7hnWTbUKpHHJIwxpdN3vTGdZNWpz9Oxfuo3eELQlkTvACHgqkaXi/FAanHe5PChn6fr1/4cNF8goD0buPApgS3zzwqjRhxrH8ISwPfJn8JqzurMaLDMnnc18tHzUiMtX73jf6oXh7voCxX/T4D3nFPlxU3om2cpcLQ1Wd4026x18rlSGR1kGpTCCBqEwggSJoAMCAQICEAyotlR7iebSBol1zYubieIwDQYJKoZIhvcNAQELBQAwbDELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEZMBcGA1UEAxMQQWRvYmUgUm9vdCBDQSBHMjAeFw0xNjExMjkwMDAwMDBaFw00MTExMjgyMzU5NTlaMHUxCzAJBgNVBAYTAlVTMSMwIQYDVQQKExpBZG9iZSBTeXN0ZW1zIEluY29ycG9yYXRlZDEdMBsGA1UECxMUQWRvYmUgVHJ1c3QgU2VydmljZXMxIjAgBgNVBAMTGUFkb2JlIFByb2R1Y3QgU2VydmljZXMgRzMwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQC3Hy69vQmzXEhs/gyDrmwB6lF4JaSAPomnsbKIZNr2iXaB+fkd85X8eJiNmI7P5O4cVT4Nc1p3zrESqBV4ZUyW8gcZ78QdwoHG8QNd2VNcHnMgSR+XT9Iafsnq9Nfww3Jt9KL3l5ANQ5n1+MJqr48EWNLll942bOL/JH4ywDSMoqhZqtJEIUUUGlQVBZ8CAvJc7LE6ddA5C52PE2Ppa7RfQgHXf4gfXVZwpxYRZcziPiOHqEvLb0J3cShUbejFxV6cwX8QyAPa1ePHg1RtM0HX+D34xHo3DkyGnmT+Ddq00TEDGG26AL5PdINKFIQl+zaq6KJFQe1fdGE5wrWzU4mBPmzaz3EbLn+7FWlwAhorYqIMldbfHE3ydc+aTU1JW7+bG19qmvhO9IluGtTtQDeqFBj2fg6faxsfVfVPD7stN6TwoIDlkOCE4RE+Iin8m3z3eqi/VsTmsmRqBxWDRaqOHz02EJoEDxXJG3ei+UbIIp01XZQvdufm90WxOTuqqan2ZqTPX9K5VdjEh/ovr7xFc5q1dZo+Sa5y4sTVM854/tLU3klOgUKzzSXYPYS3GhBcYJHjwr9xNRHnNX99D6F0g7OijScWfvtjxh13aTv/H0ETvymah4yfDpVdh9cK5YSCPqnuOlsujFAyhYwJXOWDvZZU2EkWVLDhoPx9zp7N4QIDAQABo4IBNDCCATAwEgYDVR0TAQH/BAgwBgEB/wIBADA1BgNVHR8ELjAsMCqgKKAmhiRodHRwOi8vY3JsLmFkb2JlLmNvbS9hZG9iZXJvb3RnMi5jcmwwDgYDVR0PAQH/BAQDAgEGMBQGA1UdJQQNMAsGCSqGSIb3LwEBBzBXBgNVHSAEUDBOMEwGCSqGSIb3LwECAzA/MD0GCCsGAQUFBwIBFjFodHRwczovL3d3dy5hZG9iZS5jb20vbWlzYy9wa2kvcHJvZF9zdmNlX2Nwcy5odG1sMCQGA1UdEQQdMBukGTAXMRUwEwYDVQQDEwxTWU1DLTQwOTYtMzMwHQYDVR0OBBYEFFcpejJNzP7kNU7AHyRzznNTq99qMB8GA1UdIwQYMBaAFKYc4W1UJEyoj0hyv26pjNXk7DHUMA0GCSqGSIb3DQEBCwUAA4ICAQBxzuUHjKbcLdzI4DtlXgCSgZXrlSAkr59pOF3JfPG42qVNAGU7JcEYXJ6+WbfcGwY7WYMl+jO7IvJPb7shXFYW9bnJgxX7lLU14KExchmcLNY1ee6IhBJ2Y8PzZMRUKSd5CkURPg0PBLGjz/KR/DofHx+G4rPTCOGORYxeYrd01lci5hVxvKccvIk7MD69ZTewfZPSM+0WnsU3f0Zmd7hgbRpUyWceG0eHFpdUKK/ZFWhHjDVC28odCnN885tHncKXviItK0ZUUo/AIthFKlhEXsnq9VL9fFbgvO83ZvpUQo5y8mY3cuGnEVGXdhjNb53CfC1u4dbpYmWaN99subUzEsUaUb3loLPfVfzDOpg2y9v37kBdy/wuXr20teY7U62xj/fAgs1QSnhUtlMTfCqbefyEycKVmKIrJkJLsvgTSYKVvH4FFIwfd5WjqOC97jX98rcVAzhAI0iSkazsWOMvL6m0L4nLJapx+85GsVX8Y6AHmEP4bmCElwil6KAP+UewJFiw5rmwV2pESHAhYuZJa03B8tl0nd2QJzvJGmbeBqXqpF9ORinFM3HErK8puRokOjFH2+1asLeI2tB31W/ELdNe27Ogduq6Z6qBwCp59YX27qydDhD0WRfN64kCs25K88iGAGNW2CAfTDS+b+WYJBiIL9jXYZ4LF+BiUvfdu2NwYWRZC70AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPZZAQBKX2Q2ihN2fLDLReHISpfOF0xIqNpOZXbBwZ0XanWG98erbIBdawl7r9nVma/uZjYH457wp00TVpKYUTJHMnzJMKskvM2Df4K6t5pUKGtJqEvMXLUy3g9kJq53aYDwikcUE+8wv+CYtu/+vii4XYSXQIxT4NN+JKoTDXmrNH1G46Nmpfq6SKk0g9GQ2brbkW3fzGR0xDxY3BXRy71guSBxN9TAbQGqUjMnkIyBcwV9wUQ2oCW9oIMNKASjW0CRkcFEzzmrQ+y+zHYpNvUaG7QehHcyhvOec3plzlyP6DZeQWp3PHA5bmonI8t5j6Qj15X1KnQiXuJ0rW+xoMA89aIVmpx4VgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAOSaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA5LjEtYzAwMSA3OS4xNDYyODk5Nzc3LCAyMDIzLzA2LzI1LTIzOjU3OjE0ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjYyYTdmYWExLWJmZTMtMjE0Ny04MjAwLWMxM2NlMGU4ZTc1NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNzRDMUI3RDdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNzRDMUI3QzdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjUuMiAoMjAyMzEwMjQubS4yMzc0IDRhYjk0MzkpICAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphYjQzZjNjYy1hNTY4LTRkNGQtOTdiZC1iYjk0YjBlZjhjYmQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjJhN2ZhYTEtYmZlMy0yMTQ3LTgyMDAtYzEzY2UwZThlNzU0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HNvo5wAADZFJREFUeNrsXFtPVUkW3gc4yP0qDigKON517FFbHRGn1TamjaOJvvhsjIkvPplgfEKe1AefNDE+GP+AmWTszPTYcbpn2piJzc1GWwlOekRBEBFQ7jeZ9ZVrnVkUtfc5CGp3h5VU9qUuu3bVV9+67DonND4+7omEQiHPJaWlpYlxcXGLKX8epTCdB5aXNnHU6c2bN5POcaREp+O9dHxSX1/f5s3KL1ImYCkasMrKyvIISJspD+AyZSTpOrodDSaIBpQCkwtgSM8oVd2/f39M2quoqAijmcrKyjG/l7L77vde+v6sfCRgbdu2LY3AtJNSgg0qDa5oTOViKQtM9nXTgQMHaqmpPEoLKXUQqJpcYIqPj/cSEhLMUZgUbYyNjZkjRPpu50n+VEUvKtditMEb7Xom5OrVqzvpkOXIukFps5XXTunO4cOHR7heKp1/ye1gEX9BCcdv6H4330cbCyh9iXrRgJUQ1FmarFWUIqDS4ApiCT9AobxMpj24uI/209LSvMLCwiLKz6fyQModAlW73TeAac6cOV5SUpIBlasv9qKRvgBYIyMj3tDQkDmPdaLRPzwrHA6bhGsNWr9xsMfEZnC7XDSg+tzv4lRCCRPfjJtHjhzpu3LlCkDVx4BKZICsx9gy4PT4rmFQQbIpdfM5ynX7gWrS/Phl7NixI0SDWCCD52Is14vqAXIByoluAkl+fr43f/58Lyvr7cIaHh4OJSYmfkug6rXZApOamprqUb6vned3X4CBujj29/cbkEl/7EUj74o+og4S2gh6xkypk6mUPXnyZN25c+fCDKzm8vLyOuQzqCAtJ06cuH/+/PkwAytMLCR57VjQFy5cmKeAiXJZGOeLFy/iPBVt4Nqeb60dogKLBm9O/FvxXIwVxBAaUBpgixYt8np7e7329vYJZUtKSkwSefHihVdTU9N2586dXrtfmNj09HQz0dMRvAsYD0dhLryrvG8s7/w+ZCrPcJSdx8duAb+6l0WgWqeu/8uMZMoDWCTr+BpMVoZ8jLUq18XXgdohEFg0cXF6kF2s5Uf9NqBwxL0FCxaYSXz58qWZSNzr6+vzioqKIm01NTV5ZLgbT9HuExgGAzBdUOmJEeb6EKD5AJKt1KJ9TwAFNrpz6tSpljNnzgiQuuh8DbNSNx9HlF0mx26/cbTHLy6AsSKGcVCyjWepJwnS2trqbdiwwZyDJaDyUBbslZmZGTG6Hz9+7D18+NDdUSqTkpIyY6B6V5b4mYsBAIGm27rXR/f+DFXGKm5Ega6P7a5lqvw6sbMIcFkKlCUAI6esQI0QBCwBjxirNqCkDACSkZFhQKLVCSassbHR27Jli6kvsnDhQnN8/vy5t3Hjxsj95ubmSQ6CVoEA5a8IBO+LsSKgoskPKxaC1DKo1mmDXF1/AwAyCO+rNoX1FrANVqLA6V6sfuGGgwcPphBovrCBIuwCgRp7+vSpAUd2dra5bmtrM6pvdHTUu3fvnrGdNHhEbt265XV1dXn79+9/y8V0XltbGwkDkKpsqqqqqhG2AmgBrFn5+Qo0Uyw21gRm0kwCLwqAAgC2b99u2AQCVYWyACtUGkRUoC2bNm0yYBIBe/l5ncKaWmg1hrj/47TCRu32ebUam4LyAweEymK1QG+PUdk3PmXCrGZicrej9e99CD0znvs4NsPtRh2fmMMNLmBBYHgDmTC4ly1bNslWAbhu375tyh06dGgCw2kB+yDEAIEh39HR4RsjE+/NkgJKf0DwlNJ3jkndi2Yo/QXOZ5RxWElpOaUqSk99QLWPErzUr2OcD+j7T+GPUKqZocldyu2mWWbMv1mt4T3q2OObSVnNz46MD49xMfelE85ArOGGiA2FSR0cHDRggVe3fv16Lzc317cXCBeUlZUZu8sVBLUF7YrnaDMWygsjWpLJx1eOvCS8LKX+GFeYdPS1T356wLOC7NcOK/g4HSbaSmku2zZtlo0D6l8U5R2mIxmO91/F79iP8aY+lmhAR2Us09PXr439hAles2ZNoK2Tl5dnwgorV66clHfz5k1v165dk8CFuJYfWwm4/Twgn4FMZqO0U00OPg/lsgck0k3Ae6JACq8HamsAJgPl9fOAzef8VLpey1HtVGXUQoZ45b7QawzgojqpauJNZIYnpEXUFpWZw8ZxMqsdEdgUixlUqPMt1RlygE8mv4jO5/M7tFHZXs4HI+uJG4YFQvldnF+sAPRGjd8SSjl8fzGVG6I6Dxk76GcKl8uOlbESh4eHDVOBpWCcQ/1F88qQv2fPnknlnjx5YsIJOBYXF/9/NqhtANcV8ZbYlc8zswJYJJ8H5Eem7A3WxEYmjdVcigycyltBeV/RsVANbDKDrJnL5jom+Dsa+A5e0WDOn7g/Kx3PR/06qpPDjBS28gG6e6pfDT6gimeV5LF6iqh4focxHo84Ne8hzv8ng2sJA6tfjUedROkZbPkqRhbie8JauTEBi7y6ePncAQaaO3fulKLaWgDQgYEBoxrh+WlgiW3l9znFNtp5IBN5kv0YS6vJYgYVVlU120mfUPot58sqbeaBxJh8zqs7TIN+i573R2aMfykGQD2w21dcfx2DMI3yXjOosLqH6Fr6U8VqDHGhzVw2ns8T2BaTWNMefrc09a7PA1R1iNuuYibZwfXmUB8Qq/qrZa9tZjs1i65fcRswHf5O1zuYgZ7yeG1jdq3SbM9gauFF8yimOBYABaN66dKlUwKVS0TVQT2+evVqgjcIYAWxXxQ12O/jcWUq0MlqvwtQsIeo8zOUWoQHOcCTNMbqQsqPcTARE5PCk/+a64woB6HPYf/JMzq57KgqW8AAaKa8Jn4fbfOlKe92wGeoMq13GFQqdwD95aDmZ5Q+Z9AJwwwoYL5Wn3vqHH2JCOU9pkMjg7jWMgH8GYtspVx8cIwW6QYDrV271rccgATGAkhgm8GTfPDggbd161YTWIUqdLGVnPt4lQKsQQebJTCVj7CNlO4YmAwFlCUaBAo0XVR/nK6T+RqTNh5g7GuwLrTyMxlMfY760r/eKI4J+hJSffA1rlm9o989DK5SLtOmnpOm+pCr6zNoojpJVK6HnxFbuKGiomI5u5hRQVVdXW0+0UjowGa97u6Jn5ewewExMIAN3mA0lepjX8nLgsYXMy2P8SAmWJM6zGoJhnkrr7BEBRwbJLYHJJ/zQ5gwZhx7IkMMkEFWfZF8BcxOFU9zAes33L9+yzERMKLP66nMM8V4HjNFpgPI0r9kft4AmwLjzE4wD0Z58S0OMCvk/RMDgB1zHGtZtIoIgopKe/TokRNYnZ2dzroAIsAFo93Vrq0OAxgLdPZ7TZBsLOtBAl2vZbvqE1VWT4JWM/YkDfJk4P4+GtxqR5l07otrYjMdk6Ydj24ebxjwO23CZ6A+YGegiJOn+vY3xcC9jncY5TwA7E92+zGEW/r5+CnbUjdijbXYbJXs8E6ck11aWmp2G+B7oC1Qc2AsP+AAVHqT3RR3Vd5nQ9dO93hw6ik95hX9H7jonF/PIQBjj7ARC9f5rhUTQrlWrt/L9e/y/XbOq1ce0ihfy0A85useZop6K2gJ8P8A0FACo/7De7tV5Qd4sgIa8QDp2IBoDTNOvU7Mlo1sQ44rwNSzwS3t19l14WWq/tb4qLW76rn3Yp2gSd8KCVjwWMqC1JP6nmei8Ddu3DBRdgmI4jshDHbkByVpQ5+rY9P3339fk5OT46m9RVMNLGLQf2cxdCGff62M3I8m1EcY73nqVg4nhBYe/FK+EwJH+E4cpAozgxoQlhEQwGNctWqVUW2rV6+OGOx++96jbcm193bJBrx3lBQV3NRu8o+xgCrWvervsoddWD8pKamQ40Py9QEM00htNrzrnvxY3yeW/kUTIRlbO7kYa4OlxyMsZG87loQ8Yhdv9+7dJkIPYGk28mOrFStWGOMeux+wdx0foq9fvx7Z3QDGgmeK9D63y8j74D2QpI+unZHTAZdsgJzKxE33vfQzowEuluC3q57eyx/EWBn2DQQ3MdDa9bd/xrV8+fLIpx8beH4/HigoKHgbKi4u9s6ePeuVl5cbYOkOIxwB0M30Bj+0DRDhy4LE7KSfszJ9SbAMd0+5vxEjG6EB+SWMRq3eepycnGwMdq0mfX7aNWHbsrAhovvXrl2bpCKRB2DDSZjuKpd2AVa0qX9EMSszK3GOmEWCjopLgBMJE4GEyZajVh8OA9zJXBpUOL98+bJ37Ngxr6WlRbPbuIABrILPS+8KAtRD/3t6ekzsTBbLLKg+HLC0GrxLkzCmAaWTDSptm0QDGf92cMKvdy5duuQdPXpU6+sB7TAAWFCzOI8VTCiLOoinIeaGNqbyO8JZmXlg3a2srPyJANQqQHIBTIPLBlYQc8GTxM5SAdHevXvNr3NgSylGe2Z7owAG2AZHcSbshHJgOJQDoCSeNgumj2hjMbAMqHBBE/IAv0imiU6AjSUGvN9Pv1z2lAtc2AiILTg4r6mpMfGP48ePew0NDdJGU21t7SuXaysAt3e26l85z7LSx5cJ4YbTp0/PJVBN2G6wb9++PJrAzdif5fpBhTaK/f70I1qygPeMrqvq6upi0nmuPyWZlY8XJPWNY7mEVJX5GyNK8yiFg34J7fM3RYEgIyCN09H8jVF1dfXs3xj9CoD1PwEGAKorJqR4atjIAAAAAElFTkSuQmCC",s=arguments.length>2?arguments[2]:void 0,r=0,n=0;const o=[],a=t=>{const e=new Ur.Image;e.src=t,e.onload=()=>{o.forEach(t=>{var i;const s=new Fr({source:e,fitMode:Cr.Stretch});null===(i=t.Ad)||void 0===i||i.Ke(s),r=e.width,n=e.height,c(t)})}};a(i);const h=t=>{a(t.logoDataURI)};let l;if(t.Ca.addEventListener("logochange",h),new Ur.Image instanceof Ur.HTMLImageElement){const t=new Ur.Image;t.src=i,l=new Fr({source:t,fitMode:Cr.Stretch})}else if(Ur.lcjs_setup){const t=new Ur.Image;t.src=i;const e=Ur.lcjs_setup(t.naturalWidth,t.naturalHeight);e.getContext("2d").drawImage(t,0,0),l=new Fr({source:e,fitMode:Cr.Stretch})}else l=new aa({color:_s("#f00")});const c=t=>{if(t.Ad){const e=t.oi.Jt({x:t.oi.x.getInnerEnd(),y:t.oi.y.getInnerStart()},{x:-(3+r),y:3}),i=t.oi.Jt({x:t.oi.x.getInnerEnd(),y:t.oi.y.getInnerStart()},{x:-3,y:3+n}),s={x:i.x-e.x,y:i.y-e.y};t.Ad.ih(e).X(s)}e&&e.Bs()};return e=t.SL("logo",Number.MAX_SAFE_INTEGER),i=>{const r={oi:i};return(i=>{const r=s&&"cGx1Z2lu"in s&&"cHl0aG9u"===s.cGx1Z2lu?Im:zm;if(i.Ad&&i.Ad.dispose(),e){let s;i.Ad=e.qe(i.oi).Ke(l).setPointerEvents(!0).Qe(Lr),i.Ad.addEventListener("pointerenter",()=>{s=t.Ln(Xh.Point)}),i.Ad.addEventListener("pointerleave",()=>{s=t.Bn(s)}),i.Ad.addEventListener("click",r),c(i)}})(r),o.push(r),{Er:()=>c(r),N:()=>(e=>{e.Ad&&(e.Ad.dispose(),e.Ad=void 0);const i=o.indexOf(e);i>=0&&o.splice(i,1),o.length<=0&&t.Ca.removeEventListener("logochange",h)})(r)}}},zm=()=>Ur.open("https://lightningchart.com/lightningchart-js/"),Im=()=>Ur.open("https://lightningchart.com/python-charts/");class Rm{constructor(){this.uB=this.dB.bind(this),Ur.addEventListener("scroll",this.uB,{passive:!0})}N(){this.uB&&Ur.removeEventListener("scroll",this.uB),this.uB=void 0}}class _m{constructor(t,e){this.xl=t,this.U=e,this.fB=!0,this.AB=null,this.gB=null}}class Vm{constructor(t){this.vB=!1,this.yB=1,this.pB=t,this.mB={xl:As(0,0),U:As(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),fB:!0,AB:null,gB:null},this.SB=As(64,64),this.bB=new Uint8ClampedArray(this.SB.x*this.SB.y*this.yB)}xB(t,e){if(!t.fB)return null;if(t.AB&&t.gB){const i=this.xB(t.AB,e);return null!==i?i:this.xB(t.gB,e)}const i=Es(t.U.x,t.U.y);if(t.xl.x+t.U.x>=Number.MAX_SAFE_INTEGER&&(i.x=this.SB.x-t.xl.x-1),t.xl.y+t.U.y>=Number.MAX_SAFE_INTEGER&&(i.y=this.SB.y-t.xl.y-1),t.U.x===e.x&&t.U.y===e.y)return t.fB=!1,t;if(i.x<e.x||i.y<e.y)return null;let s,r;const n=i.x-e.x,o=i.y-e.y;let a=n<o;return 0===n&&0===o&&(a=!(t.U.x>t.U.y)),a?(s=new _m(Lo(t.xl,{x:0,y:1}),As(t.U.x,e.y)),r=new _m(Lo(t.xl,{x:0,y:e.y+1}),As(t.U.x,t.U.y-1-e.y))):(s=new _m(Lo(t.xl,{x:1,y:0}),As(e.x,t.U.y)),r=new _m(Lo(t.xl,{x:e.x+1,y:0}),As(t.U.x-1-e.x,t.U.y))),t.AB=s,t.gB=r,this.xB(t.AB,e)}MB(t,e){const i={wB:!1,xl:null};let s=this.xB(this.mB,e);if(null===s)for(;null===s&&this.SB.x<this.pB&&this.SB.y<this.pB;){if(!this._B(As(2*this.SB.x,2*this.SB.y)))return this.vB=!0,null;i.wB=!0,s=this.xB(this.mB,e)}if(null===s)return this.vB=!0,null;for(let r=0;r<e.y;r+=1)for(let i=0;i<e.x;i+=1){const n=s.xl.y+r,o=s.xl.x+i;this.bB[n*this.yB*this.SB.x+o*this.yB+0]=t[r*this.yB*e.x+i*this.yB+0]}return i.xl=s.xl,i}_B(t){if(t.x>this.pB||t.y>this.pB)return!1;const e=new Uint8ClampedArray(t.x*t.y*this.yB);for(let i=0;i<this.SB.y;i+=1)for(let s=0;s<this.SB.x;s+=1)e[i*t.x*this.yB+s*this.yB+0]=this.bB[i*this.SB.x*this.yB+s*this.yB+0];return this.SB=t,this.bB=e,!0}}class Nm{constructor(t){this.kB=new Map,this.pB=t,this.kB.set(this.kB.size,new Vm(this.pB))}CB(t){return this.kB.get(t)}MB(t,e){let i=-1;const s=Array.from(this.kB.values());for(let o=0;o<s.length;o+=1){const t=s[o];if(!t)break;if(!t.vB){i=o;break}}-1===i&&(i=this.kB.size,this.kB.set(this.kB.size,new Vm(this.pB)));const r=this.kB.get(i);if(!r)return null;let n=r.MB(t,e);if(!n&&r.vB){const s=this.kB.size,r=new Vm(this.pB);this.kB.set(s,r),i=s,n=r.MB(t,e)}return n?l({TB:i},n):null}}var Om;!function(t){t[t.Fail=0]="Fail",t[t.Success=1]="Success",t[t.Resize=2]="Resize"}(Om||(Om={}));const Ym=Dn("font-texture");class Gm{constructor(t){this.FB=new Map,this.IB=new Map,this.mi=Ym(),this.PB=t,this.LB=new Nm(this.PB.BB||4096)}mu(){return this.IB.forEach(t=>{this.PB.DB(t)}),this.IB.clear(),this}RB(t,e){const i=this.FB.get(e);if(i)return i.get(t)}EB(t,e,i){let s=this.FB.get(e);if(s||(s=new Map,this.FB.set(e,s)),s.has(t.glyph))return Om.Success;const r=this.LB.MB(i,t.size);if(!r||!r.xl)return Om.Fail;r.wB&&this.OB();const n=this.LB.CB(r.TB);if(!n)return Om.Fail;let o=this.IB.get(r.TB);if(!o){const t=this.PB.gl.createTexture();if(!t)throw new wm("Failed to create texture for font!");o=t,this.IB.set(r.TB,t)}const a=r.xl,h=n.SB.x,l=n.SB.y,c=-t.offsetX,u=t.baseline-t.size.y,d=-t.offsetX+t.size.x,f=t.baseline,g=a.x/h,p=(a.y+t.size.y)/l,y=(a.x+t.size.x)/h,m=a.y/l,v=[g,p,y,p,g,m,g,m,y,p,y,m],x=[c,u,d,u,c,f,c,f,d,u,d,f],b={origin:a,size:t.size,advanceX:t.advance,baseline:t.baseline,vertices:x,texCoords:v,packerId:r.TB,texture:o};s.set(t.glyph,b);const S=this.PB.gl;return S.pixelStorei(S.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),S.bindTexture(S.TEXTURE_2D,o),S.texImage2D(S.TEXTURE_2D,0,S.LUMINANCE,n.SB.x,n.SB.y,0,S.LUMINANCE,S.UNSIGNED_BYTE,this.PB.zB?n.bB:new Uint8Array(n.bB)),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,S.LINEAR),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,S.LINEAR),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE),S.bindTexture(S.TEXTURE_2D,null),r.wB?Om.Resize:Om.Success}OB(){this.FB.forEach(t=>{t.forEach((e,i)=>{const s=this.LB.CB(e.packerId);if(!s)return;const r=e.origin,n=s.SB.x,o=s.SB.y,a=r.x/n,h=(r.y+e.size.y)/o,l=(r.x+e.size.x)/n,c=r.y/o,u=[a,h,l,h,a,c,a,c,l,h,l,c];e.texCoords=u,t.set(i,e)})})}}const Xm=t=>(e,i)=>i%2?e:e+t;class Um{constructor(t){this.VB=new Map,this.NB=Dn("font"),this.GB=new Map,this.$B=new Set,this.PB=t}mu(){return(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||0===this.$B.size)&&(this.VB.forEach((t,e)=>{t.mu(),this.VB.delete(e)}),this.$B.clear()),this}Hu(t){this.$B.add(t)}UB(t){this.$B.delete(t)}YB(t,e,i,s){const r=Ur.devicePixelRatio,n="".concat(s?"dark":"light"," - ").concat(Wl(e,r).id),o=this.GB.get(n),a=this.VB.get(o);let h=0,l=0,c=0;const u=t.split(""),d=e.size,f=.45*e.size*r,g=Math.round(1*e.size*r);let p=!1;for(let m=0;m<u.length;m+=1){const t=u[m],e=a&&a.RB(t,d);if(e)""!==t.trim()&&(l=Math.max(l,e.baseline),h=Math.min(h,e.baseline-(e.size.y-1))),c+=e.advanceX;else{if(""!==t.trim()){const t=0;l=Math.max(l,t),h=Math.min(h,t-(g-1))}c+=f,p=!0}}const y=fh(c/r,(l-h+1)/r,i);return{x:y.x,y:y.y,isEstimate:p}}jB(t,e,i){const s="".concat(i?"dark":"light"," - ").concat(e.id);let r=this.GB.get(s);r||(r=this.NB(),this.VB.set(r,new Gm(this.PB)),this.GB.set(s,r));const n=this.VB.get(r);if(!n)throw new wm("Failed to get font texture!");let o=0,a=0,h=0;const l=t.split(""),c=new Map;let u=0;const d=e.properties.size;for(let p=0;p<l.length;p+=1){const t=l[p],s=Math.ceil(u);let r=n.RB(t,d);if(!r){const s=this.PB.HB(t,e.properties,e.dpr,i);if(!s)continue;const h=n.EB(s[1],d,s[0]);if(h===Om.Resize){this.$B.forEach(t=>{t.fl.o=!0}),p=-1,u=0,a=0,o=0,c.clear(),this.PB.gi.Bs(!0);continue}if(h===Om.Fail)throw new wm("Failed to create glyph");if(r=n.RB(t,d),!r)throw new wm("Failed to get glyph after creation")}if(""!==t.trim()){let t=c.get(r.texture);t||(t={vertices:[],texCoords:[]},c.set(r.texture,t)),t.vertices.push(...r.vertices.map(Xm(s))),t.texCoords.push(...r.texCoords),a=Math.max(a,r.baseline),o=Math.min(o,r.baseline-(r.size.y-1))}u+=r.advanceX}h=u;const f=Cs(As(0,o),As(h,a)),g=[];return c.forEach((t,e)=>{g.push({texCoords:new Float32Array(t.texCoords),vertices:new Float32Array(t.vertices),texture:e})}),[g,f]}}const Hm={roundUnsigned:{WB:"roundUnsigned",XB:"float roundUnsigned(float number) {\n  return floor(number + 0.5);\n}"},linearStep:{WB:"linearStep",XB:"float linearStep(float step0, float step1, float step) {\n  return clamp((step - step0) / (step1 - step0), 0.0, 1.0);\n}"},dither:{WB:"dither",XB:"\nconst mat4x4 bayerMatrix4x4 = mat4x4(\n    0.0,  8.0,  2.0, 10.0,\n    12.0, 4.0,  14.0, 6.0,\n    3.0,  11.0, 1.0, 9.0,\n    15.0, 7.0,  13.0, 5.0\n) / 16.0;\n\nvec4 dither(vec2 pos, vec4 c0, vec4 c1, float s0, float s1, float mixVal)\n{\n    float step = linearStep(s0, s1, mixVal);\n    int x = int(pos.x) % 4;\n    int y = int(pos.y) % 4;\n    float threshold = bayerMatrix4x4[y][x];\n    vec4 color = mix(c0, c1, step * 0.95 + threshold * 0.05);\n    return color;\n}"},decodeUbyteRGBAEncodedFloat:{WB:"decodeUbyteRGBAEncodedFloat",XB:"\n      // Denormalize 8-bit color channels to integers in the range 0 to 255.\n      ivec4 floatsToBytes(vec4 inputFloats, bool littleEndian) {\n        ivec4 bytes = ivec4(inputFloats * 255.0);\n        return (\n          littleEndian\n          ? bytes.abgr\n          : bytes\n        );\n      }\n      \n      // Break the four bytes down into an array of 32 bits.\n      void bytesToBits(const in ivec4 bytes, out bool bits[32]) {\n        for (int channelIndex = 0; channelIndex < 4; ++channelIndex) {\n          float acc = float(bytes[channelIndex]);\n          for (int indexInByte = 7; indexInByte >= 0; --indexInByte) {\n            float powerOfTwo = exp2(float(indexInByte));\n            bool bit = acc >= powerOfTwo;\n            bits[channelIndex * 8 + (7 - indexInByte)] = bit;\n            acc = mod(acc, powerOfTwo);\n          }\n        }\n      }\n      \n      // Compute the exponent of the 32-bit float.\n      float getExponent(bool bits[32]) {\n        const int startIndex = 1;\n        const int bitStringLength = 8;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        float acc = 0.0;\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Compute the mantissa of the 32-bit float.\n      float getMantissa(bool bits[32], bool subnormal) {\n        const int startIndex = 9;\n        const int bitStringLength = 23;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        // Leading/implicit/hidden bit convention:\n        // If the number is not subnormal (with exponent 0), we add a leading 1 digit.\n        float acc = float(!subnormal) * exp2(float(bitStringLength));\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Parse the float from its 32 bits.\n      float bitsToFloat(bool bits[32]) {\n        float signBit = float(bits[0]) * -2.0 + 1.0;\n        float exponent = getExponent(bits);\n        bool subnormal = abs(exponent - 0.0) < 0.01;\n        float mantissa = getMantissa(bits, subnormal);\n        float exponentBias = 127.0;\n        return signBit * mantissa * exp2(exponent - exponentBias - 23.0);\n      }\n      \n      // Decode a 32-bit float from the RGBA color channels of a texel.\n      float decodeUbyteRGBAEncodedFloat(vec4 rgba, bool littleEndian) {\n        ivec4 rgbaBytes = floatsToBytes(rgba, littleEndian);\n        bool bits[32];\n        bytesToBits(rgbaBytes, bits);\n        return bitsToFloat(bits);\n      }\n      "},texelFetchWithFallback:{webgl2:{WB:"texelFetchWithFallback",XB:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{WB:"texelFetchWithFallback",XB:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},texelFetchUnsignedWithFallback:{webgl2:{WB:"texelFetchUnsignedWithFallback",XB:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{WB:"texelFetchUnsignedWithFallback",XB:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},modulus:{WB:"modulus",XB:"int modulus(int a, int b) {\n  return (a)-((a)/(b))*(b);\n}"},computeScreenSpaceWireframe:{WB:"computeScreenSpaceWireframe",XB:"#extension GL_OES_standard_derivatives : enable\nfloat computeScreenSpaceWireframe (vec3 barycentric, float lineWidth) {\n  vec3 dist = fwidth(barycentric);\n  vec3 smoothed = smoothstep(dist * ((lineWidth * 0.5) - 0.5), dist * ((lineWidth * 0.5) + 0.5), barycentric);\n  return 1.0 - min(min(smoothed.x, smoothed.y), smoothed.z);\n}"}},jm="posAxis",Wm="posWorld",Zm="normal",Jm="colorFragment",qm="antiAliasFactor",Qm="mousePickingIdOffset",Km="uRatioPxClip",$m="uRatioNwuWu",tv="uColorTexture",ev="uSizePixels",iv="uOffsetAlignment",sv="uMaskTexture",rv="aNormal",nv="Rot";class ov{constructor(t){this.modifiers=[],this.modifiers=t}build(t){const e=this.modifiers.filter(t=>av(t));for(const i of e)t=i(t);return"".concat(Nn(this.modifiers.filter(t=>lv(t))).map(t=>t.XB).join("\n"),"\n").concat(t)}}const av=t=>"function"==typeof t,hv={WB:"ratioPxClip",XB:"uniform vec2 ".concat(Km,";")},lv=t=>t&&"object"==typeof t&&"WB"in t,cv=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return t=>{e=e.reverse();for(let i of e)"string"==typeof i&&(i=i.includes("{")||i.endsWith(";")?i:"".concat(i,";"),i=i.trim(),t=t.replace("void main(void)","".concat(i,"\nvoid main(void)")));return t}},uv=t=>e=>(t=t.endsWith(";")?t:"".concat(t,";"),e.replace(t,"")),dv=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return t=>{const i=e.filter(t=>t);for(let e=0;e<i.length;e+=1)i[e]=i[e].endsWith(";")?i[e]:"".concat(i[e],";"),i[e]=i[e].startsWith("\t")?i[e]:"\t".concat(i[e]);const s=i.join("\n");return t.replace("void main(void) {\n","void main(void) {\n".concat(s,"\n"))}},fv=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];return e=>{for(let t=0;t<i.length;t+=1)i[t]=i[t].endsWith(";")?i[t]:"".concat(i[t],";"),i[t]=i[t].startsWith("\t")?i[t]:"\t".concat(i[t]);const s=i.join("\n"),r=new RegExp("(.*".concat(t,".*)")),n=e.replace(r,"".concat(s,"\n$1"));return i.forEach(e=>{if(!n.includes(e))throw new Error("ShaderBefore misusage (not found: \n".concat(e,"\nmatch: \n").concat(t,"\nresult: \n").concat(n,"\n)"))}),n}},gv=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];return e=>{const s=i.filter(t=>"string"==typeof t);for(let t=0;t<s.length;t+=1)s[t]=s[t].endsWith(";")?s[t]:"".concat(s[t],";"),s[t]=s[t].startsWith("\t")?s[t]:"\t".concat(s[t]);const r=s.join("\n"),n=e.lastIndexOf(t),o=e.substring(n),a=o.indexOf("\n"),h=o.substring(a),l="".concat(e.substring(0,n+a),"\n").concat(r).concat(h);return s.forEach(e=>{if(!l.includes(e))throw new Error('ShaderAfter misusage (not found: "'.concat(e,'", match: "').concat(t,'", result: "').concat(l,'")'))}),l}},pv=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return t=>{for(let i of e)if("string"==typeof i){i=i.endsWith(";")?i:"".concat(i,";"),i=i.trim(),i=i.startsWith("\t")?i:"\t".concat(i);const e=t.lastIndexOf("}");t="".concat(t.substring(0,e-1),"\n").concat(i,"\n}")}return t}},yv=(t,e)=>i=>{let s,r;if(t.includes("uniform")||t.includes("attribute")){const e=t.endsWith(";")?t:"".concat(t,";");i=cv(e)(i),s=t.split(" ")[2].replace(";","")}else s=t;if(e.includes(" ")){const t=e.endsWith(";")?e:"".concat(e,";");i=cv(t)(i),r=e.split(" ")[2].replace(";","")}else r=e;return pv("\t".concat(r," = ").concat(s,";"))(i)},mv=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return t=>{e=e.reverse();for(const i of e)t=i+t;return t}},vv=(t,e)=>{const i=e.steps,s=i.length-1,r=[cv("uniform vec4 uFallbackColor")],n=[],o=[];for(let a=0;a<e.steps.length;a+=1)n.push("uniform float uLUTValue".concat(a)),o.push("uniform vec4 uLUTColor".concat(a));return r.push(cv(...n,...o),e.percentageValues&&cv("uniform float uMinValue","uniform float uMaxValue")),e.interpolate?r.push(gv("".concat(Jm," ="),"vec4 colorLookup = uLUTColor0","float value = "+(e.percentageValues?"clamp((".concat(t," - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);"):"".concat(t)),"if (value <= ".concat(Ir,") {\n                    colorLookup = uFallbackColor;\n                }"),"if (value >= uLUTValue".concat(s,") {\n                    colorLookup = uLUTColor").concat(s,";\n                }"),...i.slice(0,-1).map((t,e)=>"if (value >= uLUTValue".concat(e," && value <= uLUTValue").concat(e+1,") {\ncolorLookup = uLUTColor").concat(e," + vec4(uLUTColor").concat(e+1,".r -  uLUTColor").concat(e,".r, uLUTColor").concat(e+1,".g -  uLUTColor").concat(e,".g, uLUTColor").concat(e+1,".b -  uLUTColor").concat(e,".b, uLUTColor").concat(e+1,".a -  uLUTColor").concat(e,".a) * (value - uLUTValue").concat(e,")/(uLUTValue").concat(e+1," - uLUTValue").concat(e,");} ")),"".concat(Jm," = colorLookup"))):r.push(gv("".concat(Jm," ="),"vec4 colorLookup = vec4(uLUTValue0)","float value = "+(e.percentageValues?"clamp((".concat(t," - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);"):"".concat(t)),"if (".concat(t," <= ").concat(Ir,") {\n                    colorLookup = uFallbackColor;\n                } else if (").concat(t," < uLUTValue0) { colorLookup = uLUTColor0;} ").concat(i.slice().reverse().map(t=>{const e=i.indexOf(t);return"else if (value >= uLUTValue".concat(e,") { colorLookup = uLUTColor").concat(e,";} ")}).join("")),"".concat(Jm," = colorLookup"))),r},xv=[cv("uniform sampler2D ".concat(sv)),cv("varying vec2 vMaskTextureCoord"),gv("".concat(qm," ="),"vec4 maskTextureSample = texture2D(".concat(sv,", vMaskTextureCoord)"),"".concat(qm," = maskTextureSample.r"))],bv=[cv("uniform sampler2D ".concat(sv)),cv("varying vec2 vMaskTextureCoord"),gv("".concat(qm," ="),"vec4 maskTextureSample = texture2D(".concat(sv,", vMaskTextureCoord)"),"".concat(qm," = maskTextureSample.a"))],Sv=[cv("varying vec3 vPosWorld;","varying vec3 vNormal;","uniform vec3 uCameraLoc;","uniform vec3 uLightLoc;","uniform vec4 uLightColor;","uniform vec4 uAmbientColor;","uniform float uShininess;","uniform float uAmbientReflection;","uniform float uDiffuseReflection;","uniform float uSpecularReflection;"),gv("".concat(Jm," ="),"float ambientReflection = uAmbientReflection","float diffuseReflection = uDiffuseReflection","float specularReflection = uSpecularReflection","vec3 ambientColor = uAmbientColor.rgb","vec3 diffuseColor = ".concat(Jm,".rgb"),"vec3 specularColor = uLightColor.rgb","vec3 vNormalNormalized = normalize(vNormal)","vNormalNormalized = (float(gl_FrontFacing) * 2.0 - 1.0) * vNormalNormalized","vec3 lightDir = normalize( uLightLoc - vPosWorld )","float lambertian = abs(dot(vNormalNormalized, lightDir))","float specular = 0.0","vec3 R =  reflect(-lightDir, vNormalNormalized)","vec3 V = normalize(uCameraLoc - vPosWorld)","float specAngle = max(dot(R,V),0.0)","specular = pow(specAngle, uShininess)","".concat(Jm," = vec4(ambientReflection * ambientColor + diffuseReflection * lambertian * diffuseColor + specularReflection * specular * specularColor, ").concat(Jm,".a)"))],Av=function(t){var e,i;if("linear-highPrecision"!==t||0===(arguments.length<=1?0:arguments.length-1))return{vertexShaderModifiers:[],fragmentShaderModifiers:[]};const s=arguments.length<=1?void 0:arguments[1];return{vertexShaderModifiers:[cv("varying vec4 d"),pv("d = vec4(".concat(arguments.length<=1?void 0:arguments[1],".x, ").concat(arguments.length<=1?void 0:arguments[1],".y, ").concat(null!==(e=arguments.length<=2?void 0:arguments[2])&&void 0!==e?e:s,".x, ").concat(null!==(i=arguments.length<=2?void 0:arguments[2])&&void 0!==i?i:s,".y)"))],idFragment:"hpfix",fragmentShaderModifiers:[cv("varying vec4 d"),pv("if (d.z == -100.0 + d.z / 10.0) { gl_FragColor = d; }")]}};class Ev extends Error{constructor(t,e,i){super("Dynamic shader generation error\n(id: ".concat(e,")\n ").concat(i?"when applying feature: ".concat(i.idVertex?"vert: ".concat(i.idVertex):""," ").concat(i.idFragment?"frag: ".concat(i.idFragment):""):""," | ").concat(t))}}const kv=function(){let t="";for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];for(const r of i){if("object"!=typeof r){t+="".concat(String(r),",");continue}const e=[{prefix:"",obj:r}];for(;e.length>0;){const{prefix:i,obj:s}=e.shift();t+="".concat(i,":");const r=Object.keys(s).sort();for(const n of r){const i=s[n];"object"==typeof i&&i.__proto__===Object.prototype||Array.isArray(i)?e.push({prefix:n,obj:i}):t+="".concat(n,"=").concat(String(i),",")}}}return t},wv=t=>void 0!==t.find(t=>{var e;return null===(e=t.ZB)||void 0===e?void 0:e.JB}),Mv=t=>void 0!==t.find(t=>{var e;return null===(e=t.ZB)||void 0===e?void 0:e.QB}),Cv=function(t,e){for(var i=arguments.length,s=new Array(i>2?i-2:0),r=2;r<i;r++)s[r-2]=arguments[r];const n=[],o=e?"vec3":"vec2",{axisWorldTranslation:a,scaling:h,translation:l,flipXY:c,flipXZ:u,offsets:d,splitPosAttribute:f,normalSource:g}=t,p=[];"attribute"===g&&n.push(cv("attribute vec3 ".concat(rv)),dv("vec3 ".concat(Zm," = ").concat(rv))),"linear-highPrecision"!==a?s.forEach(t=>{void 0!==t.attributeNameAxisCoord&&void 0!==t.variableNameAxisCoord&&(!0!==f?p.push("".concat(o," ").concat(t.variableNameAxisCoord," = ").concat(t.attributeNameAxisCoord)):p.push("".concat(o," ").concat(t.variableNameAxisCoord," = ").concat(e?"vec3(".concat(t.attributeNameAxisCoord,"X, ").concat(t.attributeNameAxisCoord,"Y, ").concat(t.attributeNameAxisCoord,"Z)"):"vec2(".concat(t.attributeNameAxisCoord,"X, ").concat(t.attributeNameAxisCoord,"Y)"))))}):s.forEach(e=>{!0!==t.splitPosAttribute?p.push("".concat(o," ").concat(e.variableNameAxisCoord,"_highpart = ").concat(e.attributeNameAxisCoord,"_highpart"),"".concat(o," ").concat(e.variableNameAxisCoord,"_lowpart = ").concat(e.attributeNameAxisCoord,"_lowpart")):p.push("".concat(o," ").concat(e.variableNameAxisCoord,"_highpart = vec2(").concat(e.attributeNameAxisCoord,"_highpartX, ").concat(e.attributeNameAxisCoord,"_highpartY)"),"".concat(o," ").concat(e.variableNameAxisCoord,"_lowpart = vec2(").concat(e.attributeNameAxisCoord,"_lowpartX, ").concat(e.attributeNameAxisCoord,"_lowpartY)"))});const y=(t=>{if(t)for(const i of t){const t=(null==(e=i)?void 0:e.rotation)&&e.rotation.dataType;if(void 0!==t&&!1!==t)return t}var e})(d);if("attribute-deg"===y&&n.push(cv("attribute float aRotDeg"),cv("uniform float uBaseRotDeg")),"attribute"===y&&n.push(cv("attribute vec2 aRot")),"uniform"===y&&n.push(cv("uniform vec2 uRot")),null==d||d.forEach(t=>{if(t&&t.rotation){const e=t.rotation.dataType,i="uniform"===e?"u":"a";if("attribute-deg"===e){const e=t.directionVar,i="c".concat(nv);n.push(dv("vec2 ".concat(t.directionVar,"Rot = vec2(").concat(e,".x * ").concat(i,".y + ").concat(e,".y * ").concat(i,".x, ").concat(e,".y * ").concat(i,".y - ").concat(e,".x * ").concat(i,".x)")))}else{const e="".concat(i).concat(nv),s=t.directionVar;n.push(dv("vec2 ".concat(t.directionVar,"Rot = vec2(").concat(s,".x * ").concat(e,".y + ").concat(s,".y * ").concat(e,".x, ").concat(s,".y * ").concat(e,".y - ").concat(s,".x * ").concat(e,".x)")))}}}),null==d?void 0:d.find(t=>(null==t?void 0:t.rotation)&&"attribute-deg"===t.rotation.dataType)){const t="c".concat(nv);n.push(dv("vec2 ".concat(t," = vec2(sin((aRotDeg + uBaseRotDeg) * 0.01745329252), cos((aRotDeg + uBaseRotDeg) * 0.01745329252))")))}if(d&&d.forEach(t=>{t&&!0!==t.skipAddDefinition&&n.push(cv("attribute ".concat(o," ").concat(t.directionVar)))}),!0===c){if("linear-highPrecision"===a)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXY");s.forEach(t=>{p.push("".concat(t.variableNameAxisCoord," = ").concat(e?"vec3(".concat(t.variableNameAxisCoord,".y, ").concat(t.variableNameAxisCoord,".x, ").concat(t.variableNameAxisCoord,".z)"):"vec2(".concat(t.variableNameAxisCoord,".y, ").concat(t.variableNameAxisCoord,".x)")))})}if(!0===u){if("linear-highPrecision"===a)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXZ");s.forEach(t=>{p.push("".concat(t.variableNameAxisCoord," = vec3(").concat(t.variableNameAxisCoord,".z, ").concat(t.variableNameAxisCoord,".y, ").concat(t.variableNameAxisCoord,".x)"))})}if(h){if("linear-highPrecision"===a)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + scaling");const t=("attribute"===h.dataType?"a":"u")+"Scaling",i=e?"vec3":"vec2";n.push(cv("".concat(h.dataType," ").concat(i," ").concat(t))),s.forEach(e=>{p.push("".concat(e.variableNameAxisCoord," = ").concat(e.variableNameAxisCoord," * ").concat(t))})}if(l&&"axis"===l.sizeUnit){if("linear-highPrecision"===a)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + translation (axis)");const t=("attribute"===l.dataType?"a":"u")+"TranslationAxis",i=e?"vec3":"vec2";n.push(cv("".concat(l.dataType," ").concat(i," ").concat(t))),s.forEach(e=>{p.push("".concat(e.variableNameAxisCoord," = ").concat(e.variableNameAxisCoord," + ").concat(t))})}if(null==d||d.forEach(t=>{if(t&&"axis"===t.sizeUnit){if("linear-highPrecision"===a)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + offset (axis)");const i=("attribute"===t.dataType?"a":"u")+"OffsetAxis",r=!0===t.symmetric?"float":o;n.push(cv("".concat(t.dataType," ").concat(r," ").concat(i)));const h=t.halved?" * 0.5":"",l=t.rotation?"".concat(t.directionVar,"Rot"):t.directionVar,c="offsetGeometry";p.push("".concat(o," ").concat(c," = ").concat(i," * ").concat(l).concat(h," * sign(uScale)")),e&&"gpu-calculate"===g&&p.push("".concat(o," ").concat(Zm," = ").concat(l)),s.forEach(t=>{p.push("".concat(t.variableNameAxisCoord," = ").concat(t.variableNameAxisCoord," + ").concat(c))})}}),void 0===a||"linear"===a)n.push(cv("uniform ".concat(o," uDisp"),"uniform ".concat(o," uScale"))),s.forEach(t=>{p.push("".concat(o," ").concat(t.variableNameWorldCoord," = (").concat(t.variableNameAxisCoord," - uDisp) / uScale"))});else if("linear-highPrecision"===a)n.push(cv("uniform ".concat(o," uDisp"),"uniform ".concat(o," uScale"),"uniform ".concat(o," uScaleStart_highpart"),"uniform ".concat(o," uScaleStart_lowpart"))),s.forEach(t=>{p.push("".concat(o," ").concat(t.variableNameAxisCoord,"_hprecision = (").concat(t.variableNameAxisCoord,"_highpart - uScaleStart_highpart) + (").concat(t.variableNameAxisCoord,"_lowpart - uScaleStart_lowpart)"),"".concat(o," ").concat(t.variableNameWorldCoord," = (").concat(t.variableNameAxisCoord,"_hprecision - uDisp) / uScale"),"".concat(o," ").concat(t.variableNameAxisCoord," = ").concat(t.variableNameAxisCoord,"_highpart + ").concat(t.variableNameAxisCoord,"_lowpart"))});else if("matrix"===a)n.push(cv("uniform mat3 uMatrix")),s.forEach(t=>{p.push("vec2 ".concat(t.variableNameWorldCoord," = (uMatrix * vec3(").concat(t.variableNameAxisCoord,", 1.0)).xy"))});else if("matrix4"===a)n.push(cv("uniform mat4 uMatrix")),s.forEach(t=>{p.push("vec4 ".concat(t.variableNameWorldCoord," = uMatrix * ").concat(t.attributeNameAxisCoord))});else if("logarithmic"===a[0]){n.push(cv("uniform ".concat(o," uScaleStart"),"uniform ".concat(o," uScaleStartLog"),"uniform ".concat(o," uScaleInterval"),"uniform ".concat(o," uScaleIntervalLog"),"uniform ".concat(o," uViewportStart"),"uniform ".concat(o," uViewportSize")));const t=e?["x","y","z"]:["x","y"],i=[];t.forEach(t=>{const e=a[1][t];if(void 0!==e){const t=e.base;if("e"===t)return;const s="float cLog".concat(t," = 1.0 / log(").concat(Ho(t).toFixed(1),")");i.includes(s)||i.push(s)}}),n.push(cv(...i)),s.forEach((e,i)=>{const s="".concat(i),r=[];t.forEach(t=>{const i=t.toUpperCase(),n=a[1][t];if(void 0===n)p.push("float posPercent".concat(i).concat(s," = (").concat(e.variableNameAxisCoord,".").concat(t," - uScaleStart.").concat(t,") / uScaleInterval.").concat(t));else{const r=n.base,o="e"===r;p.push("float posLog".concat(i).concat(s," = log(").concat(e.variableNameAxisCoord,".").concat(t,")").concat(o?"":" * cLog".concat(r)),"float posPercent".concat(i).concat(s," = (posLog").concat(i).concat(s," - uScaleStartLog.").concat(t,") / uScaleIntervalLog.").concat(t))}r.push("posPercent".concat(i).concat(s))}),p.push("".concat(o," ").concat(e.variableNameWorldCoord," = uViewportStart + ").concat(o,"(").concat(r.join(", "),") * uViewportSize"))})}return null==d||d.forEach(t=>{if(t&&"px"===t.sizeUnit){n.push(hv);let e="vec2(0.0, 0.0)";if(t.useAlignment&&(n.push(cv("uniform vec2 ".concat(iv))),e=iv),s.find(t=>t.overrideOffsetPixels))s.forEach(t=>{p.push("".concat(t.variableNameWorldCoord," = ").concat(t.variableNameWorldCoord," + ").concat(t.overrideOffsetPixels," * ").concat(Km))});else{const i="".concat(t.directionVar,"Amount"),r=!0===t.symmetric?"float":o;n.push(cv("".concat(t.dataType," ").concat(r," ").concat(i)));const a=t.halved?" * 0.5":"";let h;if(!1!==t.useGeometry){const s=t.rotation?"".concat(t.directionVar,"Rot"):t.directionVar;h="(".concat(s," + ").concat(e,") * ").concat(i).concat(a," * ").concat(Km)}else h="".concat(i).concat(a," * ").concat(Km);s.forEach(t=>{p.push("".concat(t.variableNameWorldCoord," = ").concat(t.variableNameWorldCoord," + ").concat(h))})}}if(t&&"scale"===t.sizeUnit){n.push(hv),n.push(cv("uniform vec2 ".concat(ev)));let e="vec2(0.0, 0.0)";t.useAlignment&&(n.push(cv("uniform vec2 ".concat(iv))),e=iv);const i=("uniform"===t.dataType?"u":"a")+"OffsetScale";n.push(cv("".concat(t.dataType," float ").concat(i)));const r="(".concat(t.rotation?"".concat(t.directionVar,"Rot"):t.directionVar," + ").concat(e,") * ").concat(i," * ").concat(ev," * ").concat(Km);s.forEach(t=>{p.push("".concat(t.variableNameWorldCoord," = ").concat(t.variableNameWorldCoord," + ").concat(r))})}if(t&&"wu"===t.sizeUnit){const i=("attribute"===t.dataType?"a":"u")+"OffsetWU",r=!0===t.symmetric?"float":o;n.push(cv("".concat(t.dataType," ").concat(r," ").concat(i)));const a=t.halved?" * 0.5":"",h=t.rotation?"".concat(t.directionVar,"Rot"):t.directionVar,l="offsetGeometry";p.push("".concat(o," ").concat(l," = ").concat(i," * ").concat(h).concat(a)),e&&"gpu-calculate"===g&&p.push("".concat(o," ").concat(Zm," = normalize(").concat(l,")")),s.forEach(t=>{p.push("".concat(t.variableNameWorldCoord," = ").concat(t.variableNameWorldCoord," + ").concat(l))})}if(t&&"nwu"===t.sizeUnit){n.push(cv("uniform float ".concat($m)));const i=("attribute"===t.dataType?"a":"u")+"OffsetNWU",r=!0===t.symmetric?"float":o;n.push(cv("".concat(t.dataType," ").concat(r," ").concat(i)));const a=t.halved?" * 0.5":"",h=t.rotation?"".concat(t.directionVar,"Rot"):t.directionVar,l="offsetGeometry";p.push("".concat(o," ").concat(l," = ").concat(i," * ").concat(h).concat(a)),e&&"gpu-calculate"===g&&p.push("".concat(o," ").concat(Zm," = normalize(").concat(l,")")),s.forEach(t=>{p.push("".concat(t.variableNameWorldCoord," = ").concat(t.variableNameWorldCoord," + ").concat(l," * ").concat($m))})}}),t.snapToNearestPixel&&(n.push(cv("uniform vec2 uViewportSizePx")),s.forEach(t=>{p.push("".concat(t.variableNameWorldCoord," = 2.0 * floor(((").concat(t.variableNameWorldCoord," + 1.0) * 0.5) * uViewportSizePx + 0.5) / uViewportSizePx - 1.0"))})),n.push(fv("gl_Position =",...p)),n},Tv=(t,e,i,s)=>{const r=[],n=t.axisWorldTranslation,o=e?"vec3":"vec2";if("linear"===n)r.push(gv(i,"".concat(o," ").concat(s," = ").concat(i," * uScale + uDisp")));else if("linear-highPrecision"===n)r.push(gv(i,"".concat(o," ").concat(s," = ").concat(i," * uScale + uDisp + uScaleStart_highpart + uScaleStart_lowpart")));else{if("matrix"===n)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("matrix4"===n)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("logarithmic"!==n[0])throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");{const t=["".concat(o," ").concat(i,"_percent = (").concat(i," - uViewportStart) / uViewportSize")];(e?["x","y","z"]:["x","y"]).forEach(e=>{const s=e.toUpperCase(),r=n[1][e];if(void 0===r)t.push("float pos".concat(s,"Back = ").concat(i,"_percent.").concat(e," * uScaleInterval.").concat(e," + uScaleStart.").concat(e));else{const n=r.base,o="e"===n?"1.0":"cLog".concat(n);t.push("float pos".concat(s,"Back = pow(2.71828, (").concat(i,"_percent.").concat(e," * uScaleIntervalLog.").concat(e," + uScaleStartLog.").concat(e,") / ").concat(o,")"))}}),t.push("".concat(o," ").concat(s," = ").concat(o,"(posXBack, posYBack").concat(e?", posZBack":"",")")),r.push(gv(i,...t))}}return r},Fv=t=>(t=>void 0!==t.find(t=>{var e;return null===(e=t.ZB)||void 0===e?void 0:e.KB}))(t)?[uv("attribute vec4 aColor"),uv("vColor = aColor"),cv("attribute vec4 aColorA"),cv("attribute vec4 aColorB"),pv("vColor = mix(aColorA, aColorB, aSegmentSide)")]:[],Pv=t=>(t=>void 0!==t.find(t=>{var e;return null===(e=t.ZB)||void 0===e?void 0:e.qB}))(t)?[uv("attribute float aLookupValue"),uv("vLookupValue = aLookupValue"),cv("attribute float aLookupValueA"),cv("attribute float aLookupValueB"),pv("vLookupValue = mix(aLookupValueA, aLookupValueB, aSegmentSide)")]:[],Bv={"2D":{idFeature:"2D",apply:t=>({idVertex:"2D",idFragment:"2D",defaultVertexShader:"2D",defaultFragmentShader:"FragmentShader"})},"2DCompose":{idFeature:"2DCompose",apply:t=>({idVertex:"2DCompose",idFragment:"2DCompose",defaultVertexShader:"2DMatrix",defaultFragmentShader:"Empty"})},"3D":{idFeature:"3D",ZB:{JB:!0},apply:t=>({idVertex:"3D",idFragment:"3D",defaultVertexShader:"3D",defaultFragmentShader:"FragmentShader"})},PointSize:t=>({idFeature:"PointSize",apply:e=>{const i="uniform"===t?"u":"a";return{idVertex:"SizePrimitive:".concat(kv(t)),idFragment:void 0,vertexShaderModifiers:[cv("".concat(t," float ").concat(i,"PointSize"),"uniform float uDevicePixelRatio"),pv("gl_PointSize = ".concat(i,"PointSize * uDevicePixelRatio"))]}}}),Color:t=>{const e=t&&t.dataType,i=t&&t.maskTextureText,s=t&&t.maskTexture,r=t&&t.overrideOpacity;return{idFeature:"Color",ZB:{QB:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,qB:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0,KB:"attribute"===t.dataType||void 0},apply:(n,o)=>{let a,h="Color:".concat(kv(t));const l=[];let c="FragmentShader";const u=[];if("uniform"===e)u.push(cv("uniform vec4 uColor"),gv("".concat(Jm," ="),"".concat(Jm," = uColor")),...i?xv:[],...s?bv:[]);else if("attribute"===e)a="colorAttribute",l.push(yv("attribute vec4 aColor","varying vec4 vColor")),u.push(cv("varying vec4 vColor"),gv("".concat(Jm," ="),"".concat(Jm," = vColor")),...i?xv:[],...s?bv:[]);else if("texture"===e)a="colorTexCoord",l.push(yv("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),u.push(cv("varying vec2 vTextureCoord"),cv("uniform sampler2D ".concat(tv)),cv("uniform vec4 uColor"),gv("".concat(Jm," ="),"".concat(Jm," = texture2D(").concat(tv,", vTextureCoord)"),"if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.) {\n                        ".concat(Jm," = uColor;\n                    }")),...i?xv:[],...s?bv:[]);else if("texture-coord-calc-gpu"===e)a="colorTexCoord",c="Empty",l.push(cv("attribute vec2 aTextureCoord"),cv("varying vec2 vTextureCoord"),pv("vTextureCoord = gl_Position.xy * 0.5 + 0.5")),u.push(cv("varying vec2 vTextureCoord"),cv("uniform sampler2D ".concat(tv)),dv("vec4 ".concat(Jm," = texture2D(").concat(tv,", vTextureCoord)"),"gl_FragColor = ".concat(Jm,";")));else if(Array.isArray(e)&&"image"===e[0])a="colorTexCoord",l.push(yv("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),e[1].fitMode===Cr.Tile?u.push(cv("uniform sampler2D ".concat(tv)),cv("varying vec2 vTextureCoord"),gv("".concat(Jm," ="),"".concat(Jm," = texture2D(").concat(tv,", vTextureCoord);"))):u.push(cv("uniform sampler2D ".concat(tv)),cv("varying vec2 vTextureCoord"),cv("uniform vec4 uColor"),gv("".concat(Jm," ="),"".concat(Jm," = texture2D(").concat(tv,", vTextureCoord);"),"if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.){\n                                ".concat(Jm," = uColor;\n                            }")));else if(Array.isArray(e)&&"lookup"===e[0]){const t=e[1];if("value"===t)a="lookup:value",l.push(yv("attribute float aLookupValue","varying float vLookupValue"));else{const e="".concat(jm,".").concat(t);a="lookup:".concat(t),l.push(yv(e,"varying float vLookupValue"))}u.push(cv("varying float vLookupValue"),...vv("vLookupValue",e[2]),...i?xv:[],...s?bv:[])}else if(Array.isArray(e)&&"gradient"===e[0]){const t=e[1],r=t.getColorStops();if(Ws(t)){const e="webgl2"===o&&!!((d=t)&&"object"==typeof d&&"type"in d&&"fillstyle"===d.type&&"fillType"in d&&"radial-gradient"===d.fillType&&!0===d.ditheringEnabled);h="rgradient".concat(r.length,",").concat(s,",").concat(i,",").concat(e),u.push(cv("uniform vec4 uBounds","uniform vec2 uCenter","uniform vec2 uDistance","uniform float uAspect"),cv(...Kr(r.map((t,e)=>["uniform vec4 color_".concat(e),"uniform float stop_".concat(e)]))),Hm.linearStep,e?Hm.dither:void 0,gv("".concat(Jm," ="),"vec2 uv = vec2((((gl_FragCoord.x)-uBounds.x)/(uBounds.z))*uAspect,((gl_FragCoord.y)-uBounds.y)/(uBounds.w))","float mixVal = distance(uv/uDistance, uCenter/uDistance)",e?"vec4 color = dither(gl_FragCoord.xy, color_0, color_1, stop_0, stop_1, mixVal)":"vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, mixVal))",...r.map((t,i)=>i<2?"":e?"color = dither(gl_FragCoord.xy, color, color_".concat(i,", stop_").concat(i-1,", stop_").concat(i,", mixVal);"):"color = mix(color, color_".concat(i,", linearStep(stop_").concat(i-1,", stop_").concat(i,", mixVal));")),"".concat(Jm," = color")),...i?xv:[],...s?bv:[])}else qs(t)&&(h="lgradient".concat(r.length,",").concat(s,",").concat(i),u.push(cv("uniform vec4 uBounds","uniform vec2 uStartPoint","uniform vec2 uEndPoint"),cv(...Kr(r.map((t,e)=>["uniform vec4 color_".concat(e),"uniform float stop_".concat(e)]))),Hm.linearStep,gv("".concat(Jm," ="),"vec2 uv = gl_FragCoord.xy - uBounds.xy","float magnitude = ((uv.x-uStartPoint.x) * (uEndPoint.x-uStartPoint.x) + (uv.y-uStartPoint.y) * (uEndPoint.y-uStartPoint.y)) / (pow(uEndPoint.x - uStartPoint.x, 2.0) + pow(uEndPoint.y-uStartPoint.y,2.0))","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, magnitude))",...r.map((t,e)=>e<2?"":"color = mix(color, color_".concat(e,", linearStep(stop_").concat(e-1,", stop_").concat(e,", magnitude))")),"".concat(Jm," = color")),...i?xv:[],...s?bv:[]))}var d;if(i||s){const t="maskTexture";a=a?"".concat(a," ").concat(t):"Color:".concat(t),l.push(yv("attribute vec2 aMaskTextureCoord","varying vec2 vMaskTextureCoord"))}return r&&u.push(cv("uniform float uOpacity"),gv("".concat(Jm," ="),"".concat(Jm,".a *= uOpacity"))),{vertexShaderModifiers:l,fragmentShader:c,fragmentShaderModifiers:u,idVertex:a,idFragment:h}}}},ColorShaded3D:t=>{const{dataType:e,shadingStyle:i,wireframe:s}=t;let r=i;const n="ColorShaded3D:".concat(kv(t));return{idFeature:"ColorShaded3D",ZB:{QB:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,qB:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0},apply:(t,o)=>{const a=[],h=[];if(a.push("phong"===i&&yv(Zm,"varying vec3 vNormal"),yv(Wm,"varying vec3 vPosWorld")),"uniform"===e)h.push(cv("uniform vec4 uColorDiffuse"),gv("".concat(Jm," ="),"".concat(Jm," = uColorDiffuse")));else if("attribute"===e)r+=",per-vertex-color",a.push(yv("attribute vec4 aColor","varying vec4 vColor")),h.push(cv("varying vec4 vColor"),gv("".concat(Jm," ="),"".concat(Jm," = vColor")));else if(Array.isArray(e)){const t=e[1];if("value"===t)r+=",lookup:value",a.push(yv("attribute float aLookupValue","varying float vLookupValue"));else{const e="".concat(jm,".").concat(t);r+=",lookup:".concat(t),a.push(yv(e,"varying float vLookupValue"))}h.push(cv("varying float vLookupValue"),...vv("vLookupValue",e[2]))}return s&&(r+=",wireframe",a.push(yv("attribute vec3 aTriangleBary","varying vec3 vTriangleBary")),h.push(cv("varying vec3 vTriangleBary"),cv("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),Hm.computeScreenSpaceWireframe,gv("".concat(Jm," ="),"float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)","".concat(Jm," = mix(").concat(Jm,", uWireframeColor, edge)")))),"phong"===i&&h.push(...Sv),{idVertex:r,idFragment:n,vertexShaderModifiers:a,fragmentShader:"FragmentShader",fragmentShaderModifiers:h}}}},VertexLocation:t=>({idFeature:"VertexLocation",apply:e=>{const i=Av(t.axisWorldTranslation,"posAxis_hprecision"),s=[],r=wv(e),n=t.coordType?t.coordType:r?"vec3":"vec2";return t.isInstanceRectangleRendering?s.push(cv("attribute vec2 aRectCorner","attribute vec2 aMemberStart","attribute vec2 aMemberEnd"),dv("vec2 aPos = mix(aMemberStart, aMemberEnd, aRectCorner)")):"linear-highPrecision"!==t.axisWorldTranslation?!0!==t.splitPosAttribute?s.push(cv("attribute ".concat(n," aPos"))):s.push(cv("attribute float aPosX"),cv("attribute float aPosY"),r&&cv("attribute float aPosZ")):!0===t.splitPosAttribute?s.push(cv("attribute float aPos_highpartX"),cv("attribute float aPos_lowpartX"),cv("attribute float aPos_highpartY"),cv("attribute float aPos_lowpartY")):s.push(cv("attribute ".concat(n," aPos_highpart")),cv("attribute ".concat(n," aPos_lowpart"))),s.push(...Cv(t,r,{attributeNameAxisCoord:"aPos",variableNameAxisCoord:"vec4"===t.coordType?void 0:jm,variableNameWorldCoord:Wm})),s.push(...i.vertexShaderModifiers),{idVertex:"VertexLocation:".concat(kv(t)),idFragment:i.idFragment,vertexShaderModifiers:s,fragmentShaderModifiers:i.fragmentShaderModifiers}}}),Model3D:t=>({idFeature:"Model3D",apply:e=>{const i=[];return i.push(cv("attribute vec3 aGeoPos"),cv("uniform mat4 uModelRotation"),cv("uniform mat4 uModelRotationNormals"),cv("uniform vec3 uLocationAxis"),cv("uniform vec3 uModelAlignment"),cv("uniform vec3 uModelScale"),cv("uniform vec3 uModelSize"),...Cv({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,{attributeNameAxisCoord:"uLocationAxis",variableNameAxisCoord:"locationAxis",variableNameWorldCoord:"locationWorld"}),fv("gl_Position =","vec3 posWorld = locationWorld + ((uModelRotation * vec4(aGeoPos, 1.0)).xyz  - (uModelAlignment + 1.0) * uModelSize/2.0) * uModelScale;"),"attribute"===t.normalSource&&gv("vec3 ".concat(Zm," =")," ".concat(Zm," = (uModelRotationNormals * vec4(").concat(Zm,", 1.0)).xyz;")),...Mv(e)?Tv({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,Wm,jm):[]),{vertexShaderModifiers:i,idVertex:"Model3D:".concat(kv(t)),idFragment:void 0}}}),LineInstanced2D:t=>{const e=Av(t.axisWorldTranslation,"locationA_hprecision","locationB_hprecision"),i=t.offsets&&t.offsets[0];return{idFeature:"LineInstanced2D",apply:s=>({idVertex:"LineInstanced2D:".concat(kv(t)),idFragment:e.idFragment,vertexShaderModifiers:[cv("uniform float uThicknessPixels"),hv,..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[cv("attribute vec2 aLocationA"),cv("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[cv("attribute vec2 aLocationA_highpart"),cv("attribute vec2 aLocationB_highpart"),cv("attribute vec2 aLocationA_lowpart"),cv("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[cv("attribute float aLocationAX"),cv("attribute float aLocationAY"),cv("attribute float aLocationBX"),cv("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[cv("attribute float aLocationA_highpartX"),cv("attribute float aLocationA_highpartY"),cv("attribute float aLocationB_highpartX"),cv("attribute float aLocationB_highpartY"),cv("attribute float aLocationA_lowpartX"),cv("attribute float aLocationA_lowpartY"),cv("attribute float aLocationB_lowpartX"),cv("attribute float aLocationB_lowpartY")]:[],cv("attribute vec2 aSegmentPosition"),cv("attribute float aSegmentSide"),i&&cv("attribute vec2 ".concat(i.directionVar,"A"),"attribute vec2 ".concat(i.directionVar,"B")),...Cv(l(l({},t),{},{offsets:i?[l(l({},i),{},{skipAddDefinition:!0})]:[]}),!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA",overrideOffsetPixels:i?"".concat(i.directionVar,"A"):void 0},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB",overrideOffsetPixels:i?"".concat(i.directionVar,"B"):void 0}),t.ensureMinimumSegmentLength&&cv("uniform vec2 uMinSegmentPixelVector"),gv("worldB = ",t.ensureMinimumSegmentLength&&"float segmentLengthPixels = sqrt(pow(worldB.x - worldA.x, 2.0) + pow(worldB.y - worldA.y, 2.0)) / length(uRatioPxClip)",t.ensureMinimumSegmentLength&&"if (segmentLengthPixels == 0.0 || segmentLengthPixels < length(uMinSegmentPixelVector)) {\n                            worldB = worldA + uMinSegmentPixelVector * uRatioPxClip;\n                        }","vec2 directionBasis = worldB - worldA","vec2 directionBasisNorm = normalize(directionBasis)","vec2 perpendBasisNorm = vec2(-directionBasisNorm.y, directionBasisNorm.x)","vec2 offset = mix(worldA, worldB, aSegmentSide)","vec2 thicknessDirection = aSegmentPosition.x * directionBasisNorm + aSegmentPosition.y * perpendBasisNorm","vec2 ".concat(Wm," = offset + thicknessDirection * uThicknessPixels * ").concat(Km)),...Pv(s),...Fv(s),...Mv(s)?Tv(l(l({},t),{},{offsets:i?[l(l({},i),{},{skipAddDefinition:!0})]:[]}),!1,Wm,jm):[],...e.vertexShaderModifiers],fragmentShaderModifiers:e.fragmentShaderModifiers})}},Area2D:t=>({idFeature:"Area2D",apply:e=>{const i=Av(t.axisWorldTranslation,"locationA_hprecision","locationB_hprecision");return{idVertex:"Area2D:".concat(kv(t)),idFragment:i.idFragment,vertexShaderModifiers:[..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[cv("attribute vec2 aLocationA"),cv("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[cv("attribute vec2 aLocationA_highpart"),cv("attribute vec2 aLocationB_highpart"),cv("attribute vec2 aLocationA_lowpart"),cv("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[cv("attribute float aLocationAX"),cv("attribute float aLocationAY"),cv("attribute float aLocationBX"),cv("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[cv("attribute float aLocationA_highpartX"),cv("attribute float aLocationA_highpartY"),cv("attribute float aLocationB_highpartX"),cv("attribute float aLocationB_highpartY"),cv("attribute float aLocationA_lowpartX"),cv("attribute float aLocationA_lowpartY"),cv("attribute float aLocationB_lowpartX"),cv("attribute float aLocationB_lowpartY")]:[],cv("attribute float aCurveOrBaseline"),cv("attribute float aSegmentSide"),...Cv(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),gv("worldB = ","vec2 posCoord = mix(worldA, worldB, aSegmentSide)","bottom"===t.fill?"float baseline = min(posCoord.y, -1.0)":"top"===t.fill?"float baseline = max(posCoord.y, 1.0)":"left"===t.fill?"float baseline = min(posCoord.x, -1.0)":"float baseline = max(posCoord.x, 1.0)","vec2 ".concat(Wm," = ").concat("bottom"===t.fill||"top"===t.fill?"vec2(posCoord.x, mix(posCoord.y, baseline, aCurveOrBaseline))":"vec2(mix(posCoord.x, baseline, aCurveOrBaseline), posCoord.y)")),...Pv(e),...Fv(e),...Mv(e)?Tv(t,!1,Wm,jm):[],...i.vertexShaderModifiers],fragmentShaderModifiers:i.fragmentShaderModifiers}}}),LineInstanced3D:t=>({idFeature:"LineInstanced3D",apply:e=>({idVertex:"LineInstanced3D:".concat(kv(t)),idFragment:void 0,defaultFragmentShader:"FragmentShader",vertexShaderModifiers:[cv("uniform float uOffsetWU"),cv("attribute vec3 aLocationA"),cv("attribute vec3 aLocationB"),cv("attribute float aSegmentPosition"),cv("attribute float aPerpendHorizontal"),cv("attribute float aPerpendVertical"),...Cv({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},wv(e),{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),gv("worldB = ","vec3 directionBasis = worldB - worldA","vec3 directionBasisNorm = normalize(directionBasis)","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(directionBasis.y), 0.9 ) ))","vec3 horizontalBasis = normalize( cross( notParallel, directionBasisNorm ) )","vec3 verticalBasis = normalize( cross( horizontalBasis, directionBasisNorm ) )","vec3 ".concat(Zm," = aPerpendHorizontal * horizontalBasis + aPerpendVertical * verticalBasis"),"vec3 ".concat(Wm," = worldA + aSegmentPosition * directionBasis + ").concat(Zm," * uOffsetWU * 0.5")),...Mv(e)?Tv({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,Wm,jm):[]]})}),RoundedEdges3D:{idFeature:"RoundedEdges3D",apply:t=>({idVertex:"RoundedEdges3D",idFragment:void 0,vertexShaderModifiers:[cv("attribute vec3 aEdge"),cv("uniform float uEdgeRoundness"),gv("".concat(Wm," ="),"vec3 boxSizeWorld = abs( aOffsetAxis / uScale )","float boxMinDimensionWorldXZ = min( boxSizeWorld.x, boxSizeWorld.z )","vec3 edgeRoundAmount = uEdgeRoundness * vec3( boxMinDimensionWorldXZ, min( boxMinDimensionWorldXZ, boxSizeWorld.y ), boxMinDimensionWorldXZ )","".concat(Wm," = ").concat(Wm," + aEdge * edgeRoundAmount"))]})},ColorGrid2D:t=>{const e=t.flipXY,i=t.intensityTextureType,s=t.littleEndian;return{idFeature:"ColorGrid2D",apply:(r,n)=>({idVertex:void 0,idFragment:"ColorGrid2D:".concat(kv(t)),fragmentShader:"FragmentShader",fragmentShaderModifiers:[cv("uniform vec4 uTileBounds","uniform vec2 uTileDimensions","uniform sampler2D uTileIntensityValues"),"ubyte"===i&&Hm.decodeUbyteRGBAEncodedFloat,"bilinear"===t.interpolation?dv("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions - 1.0)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensions - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensions - 1.0)","vec4 sample00 = texture2D(uTileIntensityValues, ".concat(e?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)",")"),"vec4 sample01 = texture2D(uTileIntensityValues, ".concat(e?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)",")"),"vec4 sample10 = texture2D(uTileIntensityValues, ".concat(e?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)",")"),"vec4 sample11 = texture2D(uTileIntensityValues, ".concat(e?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)",")"),"float intensity00 = "+("float"===i?"sample00.x":"decodeUbyteRGBAEncodedFloat(sample00, ".concat(s,")")),"float intensity01 = "+("float"===i?"sample01.x":"decodeUbyteRGBAEncodedFloat(sample01, ".concat(s,")")),"float intensity10 = "+("float"===i?"sample10.x":"decodeUbyteRGBAEncodedFloat(sample10, ".concat(s,")")),"float intensity11 = "+("float"===i?"sample11.x":"decodeUbyteRGBAEncodedFloat(sample11, ".concat(s,")")),"vec2 lerpFactors = cellIndex - cellStart","float intensityR1 = mix(intensity00, intensity10, ".concat(e?"lerpFactors.x":"lerpFactors.y",")"),"float intensityR2 = mix(intensity01, intensity11, ".concat(e?"lerpFactors.x":"lerpFactors.y",")"),"float intensityP = mix(intensityR1, intensityR2,  ".concat(e?"lerpFactors.y":"lerpFactors.x",")")):dv("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellIndexNormalized = cellIndex / uTileDimensions","vec4 sample0 = texture2D(uTileIntensityValues, ".concat(e?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)",")"),"float intensityP = "+("float"===i?"sample0.x":"decodeUbyteRGBAEncodedFloat(sample0, ".concat(s,")"))),...vv("intensityP",t.lut)]})}},DrawToNormalTexture:t=>{const e=t.flipXZ,i=t.vertexIdSource,s=t.normalTextureType,r=t.heightmapTextureType,n=t.littleEndian;return{idFeature:"DrawToNormalTexture",apply:(o,a)=>{const h=[],l=[];return h.push(cv("uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","uint"===s?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB","attribute"===i&&"attribute float aVertexID"),void 0!==i&&Hm.roundUnsigned,Hm.modulus,Hm.texelFetchWithFallback[a],"ubyte"===r&&Hm.decodeUbyteRGBAEncodedFloat,dv(void 0===i?"int iVertex = gl_VertexID":"int iVertex = int(roundUnsigned(aVertexID))","int iSecondary = modulus(iVertex, (uTileDimensions.y - 1))","int iPrimary = iVertex / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(uTileDimensions) - 1.0","vec2 halfTexelWorld = 2.0 / (uTileDimensionsMinus1 * 2.0)","vec2 posWorld = vec2(-1.0 + halfTexelWorld.y + iCell.y * 2.0 * halfTexelWorld.y, -1.0 + halfTexelWorld.x + iCell.x * 2.0 * halfTexelWorld.x)","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)","vec3 posAxis0 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell.".concat(e?"y":"x"," * cellSizeAxis.x,\n                            ").concat("float"===r?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":"decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ".concat(n,")")," ,\n                            uTileStartLocationAxisXZ.y + iCell.").concat(e?"x":"y"," * cellSizeAxis.y\n                        )"),"vec2 iCell1 = iCell + vec2(1.0, 0.0)","vec3 posAxis1 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell1.".concat(e?"y":"x"," * cellSizeAxis.x,\n                            ").concat("float"===r?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":"decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)), ".concat(n,")"),",\n                            uTileStartLocationAxisXZ.y + iCell1.").concat(e?"x":"y"," * cellSizeAxis.y\n                        )"),"vec2 iCell2 = iCell + vec2(0.0, 1.0)","vec3 posAxis2 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell2.".concat(e?"y":"x"," * cellSizeAxis.x,\n                            ").concat("float"===r?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":"decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)), ".concat(n,")"),",\n                            uTileStartLocationAxisXZ.y + iCell2.").concat(e?"x":"y"," * cellSizeAxis.y\n                        )"),"vec2 iCell3 = iCell + vec2(1.0, 1.0)","vec3 posAxis3 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell3.".concat(e?"y":"x"," * cellSizeAxis.x,\n                            ").concat("float"===r?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":"decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)), ".concat(n,")"),",\n                            uTileStartLocationAxisXZ.y + iCell3.").concat(e?"x":"y"," * cellSizeAxis.y\n                        )"),"vec3 normal = normalize(cross(posAxis2 - posAxis0, posAxis1 - posAxis0) + cross(posAxis1 - posAxis3, posAxis2 - posAxis3))","uint"===s?"vNormalRGB = uvec3(((normal / 2.0) + 0.5) * float(-1u))":"vNormalRGB = (normal / 2.0) + 0.5","gl_PointSize = 1.0")),l.push(cv("uint"===s?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB"),dv("uint"===s?"gl_FragColor = uvec4(vNormalRGB, -1u)":"gl_FragColor = vec4(vNormalRGB, 1.0)")),{idVertex:"DrawToNormalTexture:".concat(kv(t)),idFragment:"DrawToNormalTexture:".concat(kv(t)),vertexShaderModifiers:h,fragmentShaderModifiers:l,fragmentShader:"Empty",hints:["uint"===s&&{type:"fragOutput",fragOutput:"uvec4"}]}}}},SurfaceGrid:t=>{const e=t.fillColor,i=t.interpolation,s=t.flipXZ,r=t.shadingStyle,n=t.wireframe,o=t.normalTextureType,a=t.heightmapTextureType,h=t.intensityTextureType,l=t.littleEndian;return{idFeature:"SurfaceGrid",ZB:{tD:!0},apply:(c,u)=>{const d=[],f=[];return d.push(cv("attribute vec2 aGeoCellOffset","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture"),Hm.modulus,Hm.texelFetchWithFallback[u],"ubyte"===a&&Hm.decodeUbyteRGBAEncodedFloat,dv("int iSecondary = modulus(iInstance + uBaseInstance, (uTileDimensions.y - 1))","int iPrimary = (iInstance + uBaseInstance) / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 iCellVertex = iCell + aGeoCellOffset","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","vec2 ySampleCoordinate = vec2(iCellVertex.y, iCellVertex.x) / vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x)","float y = "+("float"===a?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":"decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)), ".concat(l,")")),"vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)","vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * "+(s?"vec2(iCellVertex.y, iCellVertex.x)":"iCellVertex"),"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)")),d.push(...Cv({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:jm,variableNameWorldCoord:Wm})),"phong"===r&&d.push(yv(Wm,"varying vec3 vPosWorld"),..."uint"===o?[Hm.texelFetchUnsignedWithFallback[u],pv("vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)")]:[pv("vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))")],pv("vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vNormal = normalize(normalAxis * uScale)"),cv("varying vec3 vNormal",..."uint"===o?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"])),f.push(cv("varying vec3 vTriangleBary")),"uniform"===e?f.push(cv("uniform vec4 uColorDiffuse"),gv("".concat(Jm," ="),"".concat(Jm," = uColorDiffuse"))):Array.isArray(e)&&"lookup"===e[0]&&("value"===e[1]?(d.push(yv("".concat(jm,".xz"),"varying vec2 vVertexLocationAxisXZ")),f.push(cv("uniform vec4 uTileBoundsAxisXZ","uniform vec2 uTileDimensionsXZ","varying vec2 vVertexLocationAxisXZ","uniform sampler2D uTileIntensityValues","uniform mat4 uViewProjectionMatrix","uniform vec3 uScale","uniform vec3 uDisp"),"ubyte"===h&&Hm.decodeUbyteRGBAEncodedFloat,"bilinear"===i?dv("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = (vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensionsXZ - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensionsXZ - 1.0)","vec4 sample00 = texture2D(uTileIntensityValues, ".concat(s?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)",")"),"vec4 sample01 = texture2D(uTileIntensityValues, ".concat(s?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)",")"),"vec4 sample10 = texture2D(uTileIntensityValues, ".concat(s?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)",")"),"vec4 sample11 = texture2D(uTileIntensityValues, ".concat(s?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)",")"),"float intensity00 = "+("float"===h?"sample00.x":"decodeUbyteRGBAEncodedFloat(sample00, ".concat(l,")")),"float intensity01 = "+("float"===h?"sample01.x":"decodeUbyteRGBAEncodedFloat(sample01, ".concat(l,")")),"float intensity10 = "+("float"===h?"sample10.x":"decodeUbyteRGBAEncodedFloat(sample10, ".concat(l,")")),"float intensity11 = "+("float"===h?"sample11.x":"decodeUbyteRGBAEncodedFloat(sample11, ".concat(l,")")),"vec2 lerpFactors = cellIndex - cellStart","float intensityR1 = mix(intensity00, intensity10, ".concat(s?"lerpFactors.x":"lerpFactors.y",")"),"float intensityR2 = mix(intensity01, intensity11, ".concat(s?"lerpFactors.x":"lerpFactors.y",")"),"float intensityP = mix(intensityR1, intensityR2,  ".concat(s?"lerpFactors.y":"lerpFactors.x",")")):dv("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = floor((vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ)","vec2 cellIndexNormalized = cellIndex / (uTileDimensionsXZ - 1.0)","vec4 sample0 = texture2D(uTileIntensityValues, ".concat(s?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)",")"),"float intensityP = sample0.x"),...vv("intensityP",e[2]))):(d.push(yv("".concat(jm,".").concat(e[1]),"varying float vLookupValue")),f.push(cv("varying float vLookupValue"),...vv("vLookupValue",e[2])))),"phong"===r&&f.push(...Sv),n&&(d.push(cv("attribute vec3 aTriangleBary"),yv("aTriangleBary","varying vec3 vTriangleBary")),f.push(cv("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),Hm.computeScreenSpaceWireframe,gv("".concat(Jm," ="),"float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",e?"if (edge > 0.0) {\n                                    ".concat(Jm," = vec4(mix(").concat(Jm,".rgb, uWireframeColor.rgb, edge * uWireframeColor.a), max(").concat(Jm,".a, uWireframeColor.a));\n                                }"):"if (edge > 0.0) {\n                                    ".concat(Jm," = uWireframeColor;\n                                  } else {\n                                      discard;\n                                  }")))),{idVertex:"SurfaceGrid:".concat(kv(t)),idFragment:"SurfaceGrid:".concat(kv(t)),vertexShaderModifiers:d,fragmentShader:"FragmentShader",fragmentShaderModifiers:f}}}},DebugSurfaceGridNormals:t=>({idFeature:"DebugSurfaceGridNormals",apply:(e,i)=>({idVertex:"DebugSurfaceGridNormals:".concat(kv(t)),idFragment:"DebugSurfaceGridNormals:".concat(kv(t)),vertexShaderModifiers:[cv("attribute float aNormalArrow","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","attribute"===t.instanceIdSource&&"attribute float aInstanceID",..."uint"===t.normalTextureType?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"]),Hm.roundUnsigned,Hm.modulus,Hm.texelFetchWithFallback[i],"ubyte"===t.heightmapTextureType&&Hm.decodeUbyteRGBAEncodedFloat,dv(void 0===t.instanceIdSource?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","float y00 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":"decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ".concat(t.littleEndian,")")),"float y01 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":"decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ".concat(t.littleEndian,")")),"float y10 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":"decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ".concat(t.littleEndian,")")),"float y11 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":"decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ".concat(t.littleEndian,")")),"float y = (y00 + y01 + y10 + y11) / 4.0","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)","vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * (0.5 + ".concat(t.flipXZ?"vec2(iCell.y, iCell.x)":"iCell",")"),"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)",..."uint"===t.normalTextureType?["vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)"]:["vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))"],"vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vec3 normalWorld = normalize(normalAxis * uScale)"),..."uint"===t.normalTextureType?[Hm.texelFetchUnsignedWithFallback[i]]:[],...Cv({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:jm,variableNameWorldCoord:Wm}),gv("posWorld =","vec3 dirArrow = normalWorld","vec3 posArrowStart = posWorld","vec3 posArrowEnd = posWorld + dirArrow * 0.010","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(dirArrow.y), 0.9 ) ))","vec3 dirArrowLeft = normalize(-dirArrow + 0.50 * normalize(cross(dirArrow, notParallel)))","vec3 dirArrowRight = normalize(-dirArrow + 0.50 * normalize(cross(notParallel, dirArrow)))","vec3 posArrowLeft = posArrowEnd + dirArrowLeft * 0.0025","vec3 posArrowRight = posArrowEnd + dirArrowRight * 0.0025","if (aNormalArrow == 0.0) {\n                        posWorld = posArrowStart;\n                    } else if (aNormalArrow == 1.0) {\n                        posWorld = posArrowEnd;\n                    } else if (aNormalArrow == 2.0) {\n                        posWorld = posArrowLeft;\n                    } else if (aNormalArrow == 3.0) {\n                        posWorld = posArrowRight;\n                    }")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[pv("gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0)")]})}),OffsetTowardsCamera:()=>({idFeature:"OffsetTowardsCamera",apply:t=>({idVertex:"OffsetTowardsCamera",idFragment:void 0,vertexShaderModifiers:[cv("uniform vec3 uCameraLoc"),gv("posWorld =","posWorld = posWorld + normalize(uCameraLoc) * 0.0025")]})}),AliasedEdge:{idFeature:"AliasedEdge",apply:t=>({idVertex:"AliasedEdge",idFragment:"AliasedEdge",vertexShaderModifiers:[cv("attribute float aSegmentInside"),cv("varying float vSegmentInside"),cv("varying float vSegmentSide"),gv("gl_Position = ","\n                vSegmentInside = aSegmentInside;\n                vSegmentSide = aSegmentSide;\n                ")],fragmentShaderModifiers:[mv("#extension GL_OES_standard_derivatives : enable"),cv("uniform float uAALimit"),cv("varying float vSegmentInside"),cv("varying float vSegmentSide"),gv("".concat(qm," = "),"\n                float dist = (uAALimit - vSegmentInside);\n                vec2 ddist = vec2(dFdx(dist), dFdy(dist));\n                float pixelDist = dist / length(ddist);\n                // additional blurring\n                pixelDist *= 0.5;\n\n                float aa = clamp(0.5 - pixelDist, 0.0, 1.0);\n                if((vSegmentSide <= 0.0 || vSegmentSide >= 1.0) && aa <=0.99){\n                    aa *= 0.5;\n                }\n                ".concat(qm," = aa;\n                "))]})},Glow1D:t=>({idFeature:"Glow1D",apply:()=>{const e=Math.round(t.spreadPx),i=Math.round(t.blurPx),s=e+i,r=t.firstPass,n=[];for(let t=-s;t<=s;t+=1){const e=Math.abs(t);n.push(r?{x:t.toFixed(1),y:"0.0",distPx:e.toFixed(1)}:{x:"0.0",y:t.toFixed(1),distPx:e.toFixed(1)})}return{idVertex:"Glow1D:".concat(kv(t)),idFragment:"Glow1D:".concat(kv(t)),vertexShaderModifiers:[yv("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[cv("uniform sampler2D uTexture"),cv("varying vec2 vTextureCoord"),cv("uniform vec2 uTextureSize"),r&&cv("uniform vec2 uOffsetPx"),!r&&cv("uniform sampler2D uTextureFirstGlowPass"),!r&&cv("uniform vec4 uGlowColor"),gv("".concat(qm," ="),"vec2 oneTexel = vec2(1.0, 1.0) / uTextureSize","vec2 vTexCoordPixelCenter = vTextureCoord + vec2(0.5, 0.5) / uTextureSize",...r?[]:["float inverseIntensity =\n                                    0.25 * texture2D(uTexture, vTexCoordPixelCenter).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(-oneTexel.x, 0.0)).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(oneTexel.x, 0.0)).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(0.0, -oneTexel.y)).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(0.0, oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(-oneTexel.x, -oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(oneTexel.x, -oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(-oneTexel.x, oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(oneTexel.x, oneTexel.y)).a","".concat(qm," *= 1.0 - (inverseIntensity * inverseIntensity)"),"if (".concat(qm," <= 0.0) { discard; }")],"float distancePx = 255.0","vec2 sample_tx = vec2(0.0)",...r?["vec2 texCoordOffset = vTexCoordPixelCenter - uOffsetPx * oneTexel",...n.map((t,e)=>["sample_tx = texCoordOffset + oneTexel * vec2(".concat(t.x,", ").concat(t.y,")"),"if (distancePx > ".concat(t.distPx," && sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0 && texture2D(uTexture, sample_tx).a > 0.0) { distancePx = ").concat(t.distPx,"; }")]).flat(),"".concat(Jm," = vec4(distancePx / 255.0, 0.0, 0.0, 1.0)")]:["vec4 sample_horizontal = vec4(0.0)","float horizontal_dist = 255.0","float min_horizontal_dist = 255.0",...n.map((t,e)=>["sample_tx = vTexCoordPixelCenter + oneTexel * vec2(".concat(t.x,", ").concat(t.y,")"),"if (sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0) {\n                                                sample_horizontal = texture2D(uTextureFirstGlowPass, sample_tx);\n                                                horizontal_dist = sample_horizontal.r * 255.0;\n                                            }","if (sample_horizontal.a < 0.9) { horizontal_dist = 255.0; }","min_horizontal_dist = min(min_horizontal_dist, horizontal_dist)","distancePx = min(distancePx, pow(horizontal_dist * horizontal_dist + ".concat(t.y," * ").concat(t.y,", 0.5))")]).flat(),"if (distancePx > ".concat(s.toFixed(1),") { discard; }"),"vec4 pixelGlowColor = vec4(0.0, 0.0, 0.0, 0.0)","if (distancePx > ".concat(e.toFixed(1),") {\n                                        float lerpAmount = (distancePx - ").concat(e.toFixed(1),") / ").concat((i+1).toFixed(1),";\n                                        pixelGlowColor = mix(uGlowColor, vec4(uGlowColor.rgb, 0.0), 1.0 - (1.0 - lerpAmount) * (1.0 - lerpAmount));\n                                    } else {\n                                        pixelGlowColor = uGlowColor;\n                                    }"),"".concat(Jm," = pixelGlowColor")])]}}}),MousePicking:t=>{const e=!!(null==t?void 0:t.customMousePickingIdInput),i=!e&&!!(null==t?void 0:t.useVertexId),s=!e&&!!(null==t?void 0:t.useAttribute),r=!e&&!i&&!s;return{idFeature:"MousePicking",ZB:{tD:r,iD:i},apply:(n,o)=>{const a="webgl2"===o?"flat":"",h="webgl2"===o?"int":"float";return{idVertex:"MousePicking:".concat(kv(t)),idFragment:"MousePicking:".concat(kv(t)),vertexShaderModifiers:[...r?[cv("".concat(a," varying ").concat(h," vPickingIdOffset")),pv("vPickingIdOffset = ".concat(h,"(iInstance)"))]:[],...i?[cv("".concat(a," varying ").concat(h," vPickingIdOffset")),pv("vPickingIdOffset = ".concat(h,"(iVertex)"))]:[],...s?[cv("attribute float aPickingIdOffset","".concat(a," varying ").concat(h," vPickingIdOffset")),pv("vPickingIdOffset = ".concat(h,"(aPickingIdOffset)"))]:[]],fragmentShaderModifiers:[cv("uniform int uFirstId"),...e?[]:[cv("".concat(a," varying ").concat(h," vPickingIdOffset")),dv("int ".concat(Qm," = ").concat("int"===h?"vPickingIdOffset":"int(floor(vPickingIdOffset + 0.5))"))],gv("".concat(Jm," ="),"int remainder = ".concat(Qm," + uFirstId"),"int r = remainder / 16777216","remainder -= r * 16777216","int g = remainder / 65536","remainder -= g * 65536","int b = remainder / 256","remainder -= b * 256","int a = remainder","".concat(Jm," = vec4(float(r) / 255.0, float(g) / 255.0, float(b) / 255.0, float(a) / 255.0)")),t=>t.replace("gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * ".concat(qm,")"),"if (".concat(qm," <= 0.0) { discard; }\ngl_FragColor = fragColorEnd")).replace("if (fragColorEnd.a <= 0.0) { discard; }","")]}}}},AttributeHighlight:{idFeature:"AttributeHighlight",apply:t=>({idVertex:"AttributeHighlight",idFragment:"AttributeHighlight",vertexShaderModifiers:[yv("attribute float aIsHighlighted","varying float vIsHighlighted")],fragmentShaderModifiers:[t=>t.replace("uniform float uIsHighlighted","varying float vIsHighlighted").replace("uIsHighlighted","vIsHighlighted")]})},StippleTexture:{idFeature:"StippleTexture",apply:(t,e)=>({idVertex:"StippleTexture",idFragment:"StippleTexture",vertexShaderModifiers:[cv("attribute vec2 aLengthSoFar"),cv("varying float vLengthSoFar"),cv("uniform vec2 uStippleCount"),pv("\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[cv("uniform sampler2D uStippleTexture"),cv("uniform float uStippleScale"),cv("varying float vLengthSoFar"),"webgl1"===e&&cv("uniform float uStippleTextureWidthLimiter"),gv("".concat(qm," = "),"\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ".concat("webgl1"===e?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)","\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    ").concat(qm," *= stippleAA;\n                    if (").concat(qm," <= 0.0) { discard; }"))]})},StippleTextureInstanced:{idFeature:"StippleTextureInstanced",apply:(t,e)=>({idVertex:"StippleTextureInstanced",idFragment:"StippleTextureInstanced",vertexShaderModifiers:[cv("attribute vec2 aLengthSoFarA"),cv("attribute vec2 aLengthSoFarB"),cv("varying float vLengthSoFar"),cv("uniform vec2 uStippleCount"),pv("\n                vec2 aLengthSoFar = mix(aLengthSoFarA, aLengthSoFarB, aSegmentSide);\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[cv("uniform sampler2D uStippleTexture"),cv("uniform float uStippleScale"),cv("varying float vLengthSoFar"),"webgl1"===e&&cv("uniform float uStippleTextureWidthLimiter"),gv("".concat(qm," = "),"\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ".concat("webgl1"===e?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)","\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    ").concat(qm," *= stippleAA;\n                    if (").concat(qm," <= 0.0) { discard; }"))]})},PolarHeatmap:t=>({idFeature:"PolarHeatmap",apply:(e,i)=>{const s="dataType"in t,r="interpolation"in t?t:void 0,n=r?r.flipXY:void 0,o="bilinear"===(null==r?void 0:r.interpolation),a=null==r?void 0:r.intensityTextureType,h=null==r?void 0:r.littleEndian;return{idVertex:void 0,idFragment:"PolarHeatmap:".concat(kv(t)),vertexShaderModifiers:[],fragmentShaderModifiers:[cv("uniform vec2 uViewportSize","uniform vec2 uScale","uniform vec2 uDisp","uniform float uSectors","uniform float uAnnuli","uniform float uAmplitudeStart","uniform float uAmplitudeStep","uniform float uAmplitudeAxisStart","uniform float uAmplitudeAxisEnd","uniform float uAngleOffset","uniform float uAngleDirection",r&&"uniform sampler2D uTileIntensityValues",s&&"uniform vec4 uColor"),Hm.texelFetchWithFallback[i],"ubyte"===a&&Hm.decodeUbyteRGBAEncodedFloat,dv("vec2 posWorld = (2.0 * gl_FragCoord.xy / uViewportSize) - 1.0","vec2 posAxis = posWorld * uScale + uDisp","float amplitudeAxisInterval = uAmplitudeAxisEnd - uAmplitudeAxisStart","float amplitude = uAmplitudeAxisStart + sign(amplitudeAxisInterval) * sqrt(posAxis.x * posAxis.x + posAxis.y * posAxis.y)","float iAnnulus = (amplitude - uAmplitudeStart) / uAmplitudeStep"),r&&gv("iAnnulus","float angRad = atan(posAxis.y, posAxis.x) * uAngleDirection + uAngleOffset","if (angRad < 0.0) { angRad = angRad + 2.0 * 3.1415926538; }","if (angRad > 2.0 * 3.1415926538) { angRad = angRad - 2.0 * 3.1415926538; }","float iSector = uSectors * angRad / (2.0 * 3.1415926538)","vec2 cellIndex = vec2(iSector, iAnnulus)","ivec2 cellStart = ivec2(floor(cellIndex))","ivec2 cellEnd = cellStart + ivec2(1)","if (cellEnd.x >= int(uSectors)) { cellEnd = ivec2(0, cellEnd.y); }",n&&"cellIndex = vec2(cellIndex.y, cellIndex.x)",n&&"cellStart = ivec2(cellStart.y, cellStart.x)",n&&"cellEnd = ivec2(cellEnd.y, cellEnd.x)"),s&&gv("".concat(Jm," ="),"".concat(Jm," = uColor")),r&&gv("cellEnd","vec2 tileDimensions = "+(n?"vec2(uAnnuli, uSectors)":"vec2(uSectors, uAnnuli)"),o&&"vec4 sample00 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",o&&"vec4 sample01 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellStart.x, cellEnd.y), tileDimensions)",o&&"vec4 sample10 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellEnd.x, cellStart.y), tileDimensions)",o&&"vec4 sample11 = texelFetchWithFallback(uTileIntensityValues, cellEnd, tileDimensions)",o&&"float intensity00 = "+("float"===a?"sample00.x":"decodeUbyteRGBAEncodedFloat(sample00, ".concat(h,")")),o&&"float intensity01 = "+("float"===a?"sample01.x":"decodeUbyteRGBAEncodedFloat(sample01, ".concat(h,")")),o&&"float intensity10 = "+("float"===a?"sample10.x":"decodeUbyteRGBAEncodedFloat(sample10, ".concat(h,")")),o&&"float intensity11 = "+("float"===a?"sample11.x":"decodeUbyteRGBAEncodedFloat(sample11, ".concat(h,")")),o&&"vec2 lerpFactors = cellIndex - vec2(cellStart)",o&&"float intensityR1 = mix(intensity00, intensity10, lerpFactors.x)",o&&"float intensityR2 = mix(intensity01, intensity11, lerpFactors.x)",o&&"float intensityP = mix(intensityR1, intensityR2,  lerpFactors.y)",!o&&"vec4 sample0 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",!o&&"float intensityP = "+("float"===a?"sample0.x":"decodeUbyteRGBAEncodedFloat(sample0, ".concat(h,")"))),...r?vv("intensityP",r.lut):[]]}}})},Lv={"2D":"\nvoid main(void) {\n    gl_Position = vec4(posWorld, 0.0, 1.0 );\n}\n","2DMatrix":"\nvoid main(void) {\n    gl_Position = posWorld;\n}\n","3D":"\nuniform mat4 uViewProjectionMatrix;\nvoid main(void) {\n    gl_Position = uViewProjectionMatrix * vec4(posWorld, 1.0);\n}\n"},Dv={FragmentShader:"\nuniform float uIsHighlighted;\nuniform vec4 uHighlightColorOffset;\nuniform float uRenderEffectMask;\nvoid main(void) {\n    vec4 ".concat(Jm," = vec4(0.0, 0.0, 0.0, 0.0);\n    float ").concat(qm," = 1.0;\n    vec4 fragColorEnd = ").concat(Jm,";\n    if (fragColorEnd.a <= 0.0) { discard; }\n    fragColorEnd = clamp(fragColorEnd + uIsHighlighted * uHighlightColorOffset, vec4(0.0), vec4(1.0));\n    fragColorEnd = mix(fragColorEnd, vec4(1.0), uRenderEffectMask * fragColorEnd.a * 1000.0);\n    gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * ").concat(qm,");\n}\n"),Empty:"\nvoid main(void) {\n}\n"};class zv{constructor(t,e,i,s,r){if(this.id=t,this.shader=i,this.gl=s,this.info=r,!e||!i)throw new Mm("Could not find ".concat(this.sD()," ").concat(this.eD()," shader source code."));this.gl.shaderSource(i,e),this.gl.compileShader(i)}get src(){return""}sD(){return this.id.toString()}eD(){return this.gl.getShaderParameter(this.shader,this.gl.SHADER_TYPE)===this.gl.FRAGMENT_SHADER?"fragment":"vertex"}}class Iv extends zv{constructor(t,e,i,s){super(t,e,i.createShader(i.VERTEX_SHADER),i,s)}}class Rv extends zv{constructor(t,e,i,s){super(t,e,i.createShader(i.FRAGMENT_SHADER),i,s)}}class _v{constructor(t,e,i,s){this.hD=new Map,this.rD=new Map,this.nD=i,this.oD=i.createProgram(),this.aD="".concat(t.sD()," vertex"),this.lD="".concat(e.sD()," fragment"),i.attachShader(this.oD,t.shader),i.attachShader(this.oD,e.shader),i.bindAttribLocation(this.oD,0,"aPos"),i.linkProgram(this.oD),i.deleteShader(t.shader),i.deleteShader(e.shader),this.allAttributeNames=t.info.allAttributeNames,this.allUniformNames=Array.from(new Set(t.info.allUniformNames.concat(e.info.allUniformNames)).values()),this.vertexSharedRemovedVariables=t.info.removedVariableNames,this.fragmentSharedRemovedVariables=e.info.removedVariableNames}get vertexShaderSrc(){return""}get fragmentShaderSrc(){return""}cD(t){return Rn(0,()=>_n())}uD(t){const e=this.dD(t);if(void 0===e)throw this.cD("Could not get ".concat(t," uniform from ").concat(this.aD," and ").concat(this.lD," shaders."));return e}dD(t){const e=this.hD.get(t);if(e)return e;const i=this.nD.getUniformLocation(this.oD,t);return i?(this.hD.set(t,i),i):void 0}fD(t){const e=this.AD(t);if(void 0===e)throw this.cD("Could not get ".concat(t," attribute from ").concat(this.aD," and ").concat(this.lD," shaders."));return e}AD(t){const e=this.rD.get(t);if(e||0===e)return e;const i=this.nD.getAttribLocation(this.oD,t);return i>=0?(this.rD.set(t,i),i):void 0}N(){this.nD.deleteProgram(this.oD)}}const Vv=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/,Nv=t=>{let e;try{e=Ur.getComputedStyle(t)}catch(t){return null}return e};function Ov(t){const e=Nv(t);return!!e&&("fixed"===e.position||!!("auto"!==e.zIndex&&"static"!==e.position||function(t){const e=Nv(Uv(t)),i=e?e.display:"auto";return"flex"===i||"inline-flex"===i}(t))||+e.opacity<1||"transform"in e&&"none"!==e.transform||"webkitTransform"in e&&"none"!==e.webkitTransform||"mixBlendMode"in e&&"normal"!==e.mixBlendMode||"filter"in e&&"none"!==e.filter||"webkitFilter"in e&&"none"!==e.webkitFilter||"isolation"in e&&"isolate"===e.isolation||!!Vv.test(e.willChange)||"touch"===e.webkitOverflowScrolling)}function Yv(t){let e=t.length;for(;e--;)if(Ov(t[e]))return t[e];return null}function Gv(t){var e;return t&&Number((null===(e=Nv(t))||void 0===e?void 0:e.zIndex)||0)||0}function Xv(t){const e=[];for(;t;)e.push(t),t=Uv(t);return e}function Uv(t){var e;return(null===(e=t.parentNode)||void 0===e?void 0:e.host)||t.parentNode}const Hv=t=>t&&"resize"in t;class jv extends Rm{constructor(t){if(super(),this.gD=new Map,this.vD=new Map,this.yD=new Map,this.pD=!0,this.mD=null,this.SD=null,this.bD=null,this.xD=null,this.MD=0,this.wD=0,this._D=0,this.kD=!1,this.CD=!0,this.ci=!1,this.TD=Dn("chart-engine-".concat((new Date).getTime()).concat(Math.trunc(1e6*Math.random()).toString())),this.U={x:100,y:100},this.FD=()=>{this.ID&&clearTimeout(this.ID),this.ID=setTimeout(()=>this.Jo(),12)},this.PD=t=>{const e=t.intersectionRatio>0,i=t.target.getAttribute("data-lcjs-engine-id");if(i){const t=this.gD.get(i);if(t){const s=t.LD();t.BD(e),e?this.vD.set(i,t):this.vD.delete(i),s!==e&&t.Bs()}}},this.DD=(t,e,i,s,r)=>{const n=r[0],o=this.gl;if(o.bindFramebuffer(null==o?void 0:o.FRAMEBUFFER,null),o.useProgram(this.SD.oD),o.clear(o.COLOR_BUFFER_BIT),n.Dn.getBoundingClientRect()){const t=n.RD();o.viewport(0,0,t.x,t.y),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,n.ED),o.uniform1i(this.MD,0),o.uniformMatrix4fv(this.wD,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),o.bindBuffer(o.ARRAY_BUFFER,this.bD),o.enableVertexAttribArray(0),o.vertexAttribPointer(this._D,2,o.FLOAT,!1,0,0),o.drawArrays(o.TRIANGLES,0,6),o.bindFramebuffer(o.FRAMEBUFFER,null),n.OD&&(n.OD.clearRect(0,0,n.OD.canvas.width,n.OD.canvas.height),n.OD.drawImage(this.zD,0,this.zD.height-t.y,t.x,t.y,0,0,n.OD.canvas.width,n.OD.canvas.height))}},this.VD=(t,e,i,s,r)=>{const n=this.gl;n.bindFramebuffer(null==n?void 0:n.FRAMEBUFFER,null),n.useProgram(this.SD.oD),n.clear(n.COLOR_BUFFER_BIT),r.forEach(i=>{const r=i.Dn.getBoundingClientRect();if(r){const i=r.right-r.left,o=r.bottom-r.top,a=r.left,h=s-r.bottom;n.viewport(a*this.ND-t*this.ND,h*this.ND+e*this.ND,i*this.ND,o*this.ND)}n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,i.ED),n.uniform1i(this.MD,0),n.uniformMatrix4fv(this.wD,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),n.bindBuffer(n.ARRAY_BUFFER,this.bD),n.enableVertexAttribArray(0),n.vertexAttribPointer(this._D,2,n.FLOAT,!1,0,0),n.drawArrays(n.TRIANGLES,0,6)}),n.bindFramebuffer(n.FRAMEBUFFER,null)},this.GD=(t,e,i,s,r)=>{const n=r[0],o=this.gl2.ctx;o.bindFramebuffer(o.DRAW_FRAMEBUFFER,null),o.clear(o.COLOR_BUFFER_BIT);const a=n.RD();o.bindFramebuffer(o.READ_FRAMEBUFFER,n.$D[1]),o.blitFramebuffer(0,0,a.x,a.y,0,this.zD.height-a.y,a.x,this.zD.height,o.COLOR_BUFFER_BIT,o.LINEAR),n.OD&&(n.OD.clearRect(0,0,n.OD.canvas.width,n.OD.canvas.height),n.OD.drawImage(this.zD,0,0)),o.bindFramebuffer(o.FRAMEBUFFER,null)},this.UD=(t,e,i,s,r)=>{const n=this.gl2.ctx;n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.clear(n.COLOR_BUFFER_BIT),r.forEach(i=>{const r=i.Dn.getBoundingClientRect();if(r){const o=r.right-r.left,a=r.bottom-r.top,h=r.left,l=s-r.bottom,c=i.RD();n.bindFramebuffer(n.READ_FRAMEBUFFER,i.$D[1]),n.blitFramebuffer(0,0,c.x,c.y,h*this.ND-t*this.ND,l*this.ND+e*this.ND,(h-t+o)*this.ND,(l+e+a)*this.ND,n.COLOR_BUFFER_BIT,n.LINEAR)}}),n.bindFramebuffer(n.FRAMEBUFFER,null)},this.ID=void 0,this.Fa=t,!Ur.requestAnimationFrame||!Ur.cancelAnimationFrame)throw new Error("LightningChart JS depends on requestAnimationFrame. Make sure to load a polyfill in older browsers.");let e=1;if(t&&t.YD)e=!0===t.YD?Ur.devicePixelRatio||1:t.YD||1;else{const t=Ur.document.head.querySelector('meta[name="viewport"]');t&&t.content.includes("width=device-width")&&(e=Ur.devicePixelRatio||1)}this.ND=e,t.Ia=!0===t.Ia,this.CD=!1!==t.jD,this.HD=!1!==t.WD,this.XD=t.XD||!1;let i=!1;if(t.zD)if("string"==typeof t.zD){const e=Ur.document.getElementById(t.zD);if(!e)throw new Error('Canvas "'.concat(t.zD,"\" doesn't exist."));this.zD=e,i=!0}else this.zD=t.zD,i=!0;else this.zD=Ur.document.createElement("canvas");const s={preserveDrawingBuffer:!0,alpha:!0,antialias:!1};if(2!==t.ZD&&t.ZD){const e=this.zD.getContext("webgl",l(l({},s),{},{antialias:!!t.jD}))||this.zD.getContext("experimental-webgl",l(l({},s),{},{antialias:!!t.jD}));this.gl=e,this.JD=!1}else{const t=this.zD.getContext("webgl2",s);this.gl2={ctx:t},this.gl=t,this.JD=!0}if(!this.gl)throw new wm("No WebGL context available."+((null==t?void 0:t.ZD)?"\nSelected explicit target: WebGL ".concat(t.ZD):""));const r=[];if(this.QD={WEBGL_lose_context:this.gl.getExtension("WEBGL_lose_context")},Object.keys(this.QD).forEach(t=>{null===this.QD[t]&&r.push(t)}),this.JD)this.KD=!0;else{const t={ANGLE_instanced_arrays:this.gl.getExtension("ANGLE_instanced_arrays"),EXT_blend_minmax:this.gl.getExtension("EXT_blend_minmax"),OES_element_index_uint:this.gl.getExtension("OES_element_index_uint"),OES_standard_derivatives:this.gl.getExtension("OES_standard_derivatives"),OES_vertex_array_object:this.gl.getExtension("OES_vertex_array_object")};t.OES_standard_derivatives||(this.pD=!1),Object.keys(t).forEach(e=>{null===t[e]&&r.push(e)});const e={OES_texture_float:this.gl.getExtension("OES_texture_float")};this.KD=!!e.OES_texture_float,this.gl1={ctx:this.gl,QD:t,optional:e}}const n=r;if(n.length>0&&!1!==t.Ia){const t=Ur.document.createElement("div");t.innerText="LightningChart JS: Some features might not work properly, due to missing WebGL features.",t.style.cssText="position:absolute;top:0;background:red;width:100%;padding:10px;text-align:center;color:white;z-index:1;";const e=Ur.document.createElement("button");e.innerText="X",e.addEventListener("click",()=>{t.parentElement&&t.parentElement.removeChild(t)}),Ur.document.body.appendChild(t),t.appendChild(e),Ur.console.warn("LightningChart JS - Following WebGL extensions could not be loaded:",n.join(", "))}if(this.qD=this.XD?this.tR(this.JD?this.GD.bind(this):this.DD.bind(this)).bind(this):this.iR(this.JD?this.UD.bind(this):this.VD.bind(this)).bind(this),Ur.ResizeObserver){const t=t=>{for(const e of t)e.target===this.zD&&this.sR()};this.Da=new Ur.ResizeObserver(t.bind(this)),this.Da.observe(this.zD)}if(this.eR=((t,e)=>{const i=t,s=new Map,r=new Map,n=new Map,o={totalMs:0,vertexShaders:0,fragmentShaders:0,programs:0},a=function(t,i){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const r=[],n=[],o={allAttributeNames:Array.from(t.matchAll(/attribute\s[^\s]*\s(.*);/g)).map(t=>t[1]),allUniformNames:Array.from(t.matchAll(/uniform\s[^\s]*\s(.*);/g)).map(t=>t[1]),allVaryingNames:Array.from(t.matchAll(/varying\s[^\s]*\s(.*);/g)).map(t=>t[1]),removedVariableNames:[]};if(e){const e=t.match(/#extension.*/g);e&&n.push(...e),t=t.replace(/#extension.*/g,"")}else if(r.push("#version 300 es"),(t=(t=(t=t.replace(/#extension.*/g,"")).replace(/attribute/g,"in")).replace(/texture2D/g,"texture")).includes("usampler2D")&&r.push("precision highp usampler2D;"),"vertex"===i)t=t.replace(/varying/g,"out");else{t=t.replace(/varying/g,"in");const e=s.find(t=>"fragOutput"===t.type);t=(t=e?"out ".concat(e.fragOutput," fragOutput;\n").concat(t):"out vec4 fragOutput;\n".concat(t)).replace(/gl_FragColor/g,"fragOutput")}return n&&r.push(...n),r.push("precision highp float;"),r.push("precision highp int;"),{source:t="".concat(r.join("\n"),"\n").concat(t),info:o}};return function(){const t=e?"webgl1":"webgl2";let h,l,c,u,d,f,g,p,y;try{const e=Ur.performance.now();for(var m=arguments.length,v=new Array(m),x=0;x<m;x++)v[x]=arguments[x];h=v.filter(t=>!1!==t&&void 0!==t),l=((t,e)=>{const i=t.map(i=>i.apply(t,e)),s=i.map(t=>t.idVertex).filter(t=>void 0!==t).sort().join(" "),r=i.map(t=>t.idFragment).filter(t=>void 0!==t).sort().join(" "),n="vert: ".concat(s," frag: ").concat(r);let o,a=!1,h=!1;const l=[];let c;const u=[],d=[];if(i.forEach(t=>{if(t.defaultVertexShader&&(a||(o=t.defaultVertexShader)),t.vertexShader){if(o&&a&&o!==t.vertexShader)throw new Ev("Conflicting vertex shader templates ".concat(o," vs ").concat(t.vertexShader),n,t);o=t.vertexShader,a=!0}if(t.vertexShaderModifiers)for(const e of t.vertexShaderModifiers)void 0!==e&&!1!==e&&l.push(e);if(t.defaultFragmentShader&&(h||(c=t.defaultFragmentShader)),t.fragmentShader){if(c&&h&&c!==t.fragmentShader)throw new Ev("Conflicting fragment shader templates ".concat(c," vs ").concat(t.fragmentShader),n,t);c=t.fragmentShader,h=!0}if(t.fragmentShaderModifiers)for(const e of t.fragmentShaderModifiers)void 0!==e&&!1!==e&&u.push(e);t.hints&&t.hints.forEach(t=>{t&&d.push(t)})}),!!t.find(t=>{var e;return null===(e=t.ZB)||void 0===e?void 0:e.tD})&&("webgl1"===e?l.push(cv("attribute float aInstanceID"),dv("int iInstance = int(aInstanceID)")):l.push(dv("int iInstance = gl_InstanceID"))),!!t.find(t=>{var e;return null===(e=t.ZB)||void 0===e?void 0:e.iD})&&("webgl1"===e?l.push(cv("attribute float aVertexID"),dv("int iVertex = int(aVertexID)")):l.push(dv("int iVertex = gl_VertexID"))),!o)throw new Ev("No vertex shader template defined",n);if(!c)throw new Ev("Fragment shader not defined",n);return{id:n,vertexShader:{id:s,template:o,modifiers:l},fragmentShader:{id:r,template:c,modifiers:u},hints:d}})(h,t);const b=n.get(l.id);if(c="new",b)return c="existing",f=b.vertexShaderSrc,g=b.fragmentShaderSrc,b;const S=l.vertexShader.id;let A=s.get(S);if(A)f=A.src,u="existing";else{u="new";const t=new ov(l.vertexShader.modifiers).build(Lv[l.vertexShader.template]),{source:e,info:r}=a(t,"vertex");f=e,p=r,A=new Iv(S,e,i,r),s.set(S,A),o.vertexShaders+=1}const E=l.fragmentShader;let k;const w=E.id;if(k=r.get(w),k)g=k.src,d="existing";else{d="new";const t=Dv[E.template],e=new ov([...E.modifiers]).build(t),{source:s,info:n}=a(e,"fragment",l.hints);g=s,y=n,k=new Rv(w,s,i,n),r.set(w,k),o.fragmentShaders+=1}const M=new _v(A,k,i,l);return n.set(l.id,M),o.programs+=1,o.totalMs+=Ur.performance.now()-e,M}catch(v){throw Rn(0,()=>{const t="Unexpected LightningChart JS rendering error.\nThis can mean a bug in the library, or that it is simply used in unsupported manner (passing wrong type to method, using disposed component, etc).";return Ur.alert(t),new Error(t)})}}})(this.gl,!this.JD),this.HB=(()=>{const t=Ur.document.createElement("canvas"),e=t.getContext("2d",{willReadFrequently:!0});if(!e)throw new wm("Failed to get Text canvas rendering context");return e.fillStyle="#fff",(i,s,r,n)=>{const o="".concat(s.style," ").concat(s.weight," ").concat(s.size*r,"px ").concat(s.family);e.font=o,e.textBaseline="alphabetic",e.textAlign="left";const a=e.measureText(i);if(0===a.width)return;const h=void 0!==a.actualBoundingBoxLeft&&void 0!==a.actualBoundingBoxRight?Math.ceil(a.actualBoundingBoxLeft+a.actualBoundingBoxRight):Math.ceil(a.width),l=a.width,c=Math.round(s.size*r),u=void 0!==a.actualBoundingBoxLeft?a.actualBoundingBoxLeft:0;t.width=h>0?h:l,t.height=2*c,e.font=o,e.textBaseline="alphabetic",e.textAlign="left",n?(e.clearRect(0,0,t.width,t.height),e.fillStyle="#fff"):(e.fillStyle="rgba(255,255,255,0)",e.fillRect(0,0,t.width,t.height),e.fillStyle="#000"),e.fillText(i,u,c);const d=e.getImageData(0,0,t.width,t.height);let f=0,g=0;const p=d.width;for(let t=0;t<d.height;t+=1){for(let e=0;e<p;e+=1)if(0!==d.data[t*p*4+4*e+3]){f=t;break}if(0!==f)break}for(let t=d.height-1;t>=0;t-=1){for(let e=0;e<p;e+=1)if(0!==d.data[t*p*4+4*e+3]){g=t;break}if(0!==g)break}const y=e.canvas.height/2-f,m=g-f+1,v=p,x=new Uint8ClampedArray(v*m*1);for(let t=0;t<m;t+=1)for(let e=0;e<v;e+=1)x[1*t*v+1*e+0]=d.data[(t+f)*v*4+4*e+3];return[x,{advance:l,offsetX:u,baseline:y,glyph:i,size:As(v,m)}]}})(),t.hR||(this.XD?this.zD.style.display="none":(this.zD.style.position="absolute",this.zD.style.top="0",this.zD.style.left="0",this.zD.style.right="0",this.zD.style.bottom="0",this.zD.style.width="100%",this.zD.style.height="100%",this.zD.style.boxSizing="content-box",this.zD.style.display="block",this.zD.style.pointerEvents="none")),this.zD.classList.add("lcjs-canvas"),t.rR&&this.zD.setAttribute("data-lcjs-id",t.rR),i||Ur.document.body.appendChild(this.zD),Ur.IntersectionObserver&&(this.nR=new Ur.IntersectionObserver(t=>{for(let e=0;e<t.length;e+=1){const i=t[e];this.PD(i)}},{threshold:Array.from(Array(100)).map((t,e)=>e/100)})),Ur.addEventListener("resize",this.FD,{passive:!0}),!this.JD){if(this.SD=this.eR(Bv["2DCompose"],Bv.Color({dataType:"texture-coord-calc-gpu"}),Bv.VertexLocation({axisWorldTranslation:"matrix4",normalSource:void 0,coordType:"vec4"})),!this.SD.oD)throw new wm("Unable to setup composition shader!");const t=this.gl,e=t.getUniformLocation(this.SD.oD,"uColorTexture");if(!e)throw new wm("Unable to setup composition shader! Failed to find uColorTexture");const i=t.getUniformLocation(this.SD.oD,"uMatrix");if(!i)throw new wm("Unable to setup composition shader! Failed to find uMatrix");this.MD=e,this.wD=i,this._D=t.getAttribLocation(this.SD.oD,"aPos"),this.bD=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.bD),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),this.xD=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.xD),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null)}}tR(t){return e=>{this.mD=null;const i=this.gl.canvas,s=Array.from(this.vD.values());this.kD=!1,s.forEach(s=>{const r=s.RD();(this.U.x<r.x||this.U.y<r.y)&&(this.U.x=Math.max(this.U.x,r.x),this.U.y=Math.max(this.U.y,r.y),i instanceof HTMLCanvasElement&&(i.width=this.U.x,i.height=this.U.y)),s.sa&&s.oR(e),t(0,0,0,0,[s])}),this.kD&&this.sR()}}iR(t){return e=>{this.mD=null,"style"in this.gl.canvas&&!this.Fa.aR&&(this.gl.canvas.style.transform="translateX(".concat(window.scrollX,"px) translateY(").concat(window.scrollY,"px)"));const i=this.gl.canvas,s=this.zD.clientHeight,r=this.zD.clientWidth;let n=0,o=0;if(i instanceof HTMLCanvasElement){i.width===r*this.ND&&i.height===s*this.ND||(i.width=r*this.ND,i.height=s*this.ND);const t=i.getBoundingClientRect();n=t.x,o=t.y}const a=Array.from(this.vD.values());this.kD=!1,a.sort((t,e)=>t.lR()-e.lR()).forEach(t=>{t.sa&&t.oR(e)}),t(n,o,r,s,a),this.kD&&this.sR()}}sR(t){return Hv(this.gl)||(!this.kD&&t&&(this.kD=!0),this.mD||this.ci||(this.mD=Ur.requestAnimationFrame(this.qD))),this}cR(t){const e=this.TD();return t.Dn.setAttribute("data-lcjs-engine-id",e),this.gD.set(e,t),t.uR(this.gD.size-1),t.BD(!0),this.vD.set(e,t),this.nR&&this.nR.observe(t.Dn),this.ID&&clearTimeout(this.ID),this.ID=setTimeout(()=>this.Jo(),0),this}dR(t){const e=t.Dn.getAttribute("data-lcjs-engine-id");return e?(this.gD.delete(e),this.vD.delete(e),this.nR&&this.nR.unobserve(t.Dn),t.Dn.removeAttribute("data-lcjs-engine-id"),this):this}Jo(){if(this.nR){const t=this.nR.takeRecords();for(let e=0;e<t.length;e+=1){const i=t[e];this.PD(i)}}return!this.XD&&this.HD&&Array.from(this.gD.values()).sort((t,e)=>function(t,e){if(t===e)return 0;const i={a:Xv(t),b:Xv(e)};let s;for(;i.a[i.a.length-1]===i.b[i.b.length-1];)t=i.a.pop(),e=i.b.pop(),s=t;const r=Gv(Yv(i.a)),n=Gv(Yv(i.b));if(r===n&&s){const t=s.childNodes,e={a:i.a[i.a.length-1],b:i.b[i.b.length-1]};let r=t.length;for(;r--;){const i=t[r];if(i===e.a)return 1;if(i===e.b)return-1}}return Math.sign(r-n)}(t.Dn,e.Dn)).forEach((t,e)=>t.uR(e)),this.sR(!0),this}dB(){return this.sR(),this}fR(){this.ci||this.gD.forEach(t=>t.Cg.layout())}N(){var t;if(this.ci)return;this.ci=!0,super.N(),this.mD&&(Ur.cancelAnimationFrame(this.mD),this.mD=null),this.kD=!1,this.Da&&(this.Da.disconnect(),this.Da=void 0),this.nR&&(this.nR.disconnect(),this.nR=void 0),Ur.removeEventListener("resize",this.FD),this.FD=void 0,this.gD.forEach(t=>{t.N()}),this.gD.clear(),Array.from(this.yD.values()).forEach(t=>{t.mu(!0)}),this.yD.clear();const e=this.gl;e.deleteBuffer(this.bD),e.deleteBuffer(this.xD),this.zD&&!this.Fa.zD?(this.zD.width=1,this.zD.height=1,null===(t=this.zD.parentElement)||void 0===t||t.removeChild(this.zD),this.zD=void 0):this.zD=void 0,this.eR=void 0,this.HB=void 0,this.qD=()=>{},this.QD.WEBGL_lose_context&&this.QD.WEBGL_lose_context.loseContext()}}const Wv=(t,e,i,s)=>r=>{const n=l(l({theme:Dy},i),r),o=t(n),a=e||s?Dm(o,s,null==i?void 0:i.licenseInformation):void 0,h=new Bm(o.Fa,r,o,o.N.bind(o),n,a);return o.Wa(t=>h.pu(t)).Ha(()=>h.Y()).Bs(),h},Zv=(t,e)=>{t.Wa(t=>{e.th(t)}).Ha(()=>e.Y()).Bs()},Jv=(t,e,i,s)=>r=>{const n=l(l(l({},i),r),{},{theme:(null==r?void 0:r.theme)||Dy}),o=t(n),a=e||s?Dm(o,s,null==i?void 0:i.licenseInformation):void 0,h=new kd(o.Fa,Em(o,1).xL(0),or,o.N.bind(o),a,void 0,null==r?void 0:r.legend);return Zv(o,h),h},qv=(t,e,i,s)=>r=>{const n=l(l(l({},i),r),{},{theme:(null==r?void 0:r.theme)||Dy}),o=t(n),a=e||s?Dm(o,s,null==i?void 0:i.licenseInformation):void 0,h=new Kg(o.Fa,Em(o,1).xL(0),or,o.N.bind(o),a,r);return Zv(o,h),h},Qv=(t,e,i,s)=>r=>{const n=l(l(l({},i),r),{},{theme:(null==r?void 0:r.theme)||Dy}),o=t(n),a=e||s?Dm(o,s,null==i?void 0:i.licenseInformation):void 0,h=new iy(o.Fa,Em(o,1).xL(0),or,o.N.bind(o),a,r);return Zv(o,h),h},Kv=(t,e,i,s)=>r=>{const n=l(l(l({},i),r),{},{theme:(null==r?void 0:r.theme)||Dy}),o=t(n),a=e||s?Dm(o,s,null==i?void 0:i.licenseInformation):void 0,h=new gp(o.Fa,Em(o,1).xL(0),or,o.N.bind(o),a,r);return Zv(o,h),h},$v=(t,e,i,s)=>r=>{const n=l(l(l({},i),r),{},{theme:(null==r?void 0:r.theme)||Dy}),o=t(n),a=e||s?Dm(o,s,null==i?void 0:i.licenseInformation):void 0,h=new(r&&r.type?r.type:Sm)(o.Fa,Em(o,1).xL(0),or,o.N.bind(o),a,void 0,r);return Zv(o,h),h},tx=(t,e,i,s)=>r=>{const n=l(l(l({},i),r),{},{theme:(null==r?void 0:r.theme)||Dy}),o=t(n),a=e||s?Dm(o,s,null==i?void 0:i.licenseInformation):void 0,h=new em(o.Fa,Em(o,1).xL(0),or,o.N.bind(o),a,void 0,r);return Zv(o,h),h},ex=(t,e,i,s)=>r=>{const n=l(l(l({},i),r),{},{theme:(null==r?void 0:r.theme)||Dy}),o=t(n),a=e||s?Dm(o,s,null==i?void 0:i.licenseInformation):void 0,h=new(r&&r.type?r.type:Pp)(o.Fa,Em(o,1).xL(0),or,o.N.bind(o),a,void 0,r);return Zv(o,h),h},ix=(t,e,i,s)=>r=>{const n=l(l(l({},i),r),{},{theme:(null==r?void 0:r.theme)||Dy}),o=t(n),a=e||s?Dm(o,s,null==i?void 0:i.licenseInformation):void 0,h=new(r&&r.type?r.type:Gp)(o.Fa,Em(o,1).xL(0),or,o.N.bind(o),a,void 0,r);return Zv(o,h),h},sx=(t,e,i,s)=>r=>{const n=l(l(l({},i),r),{},{theme:(null==r?void 0:r.theme)||Dy}),o=t(n),a=e||s?Dm(o,s,null==i?void 0:i.licenseInformation):void 0,h=new Uf(o.Fa,Em(o,1).xL(0),or,o.N.bind(o),a,r,void 0);return Zv(o,h),h},rx=(t,e,i,s)=>r=>{const n=l(l(l({},i),r),{},{theme:(null==r?void 0:r.theme)||Dy}),o=t(n),a=e||s?Dm(o,s,null==i?void 0:i.licenseInformation):void 0,h=new mf(o.Fa,Em(o,1).xL(0),or,o.N.bind(o),a,void 0,r);return Zv(o,h),h},nx=(t,e,i,s)=>r=>{const n=l(l(l({},i),r),{},{theme:(null==r?void 0:r.theme)||Dy}),o=t(n),a=e||s?Dm(o,s,null==i?void 0:i.licenseInformation):void 0,h=new zy(o.Fa,Em(o,1).xL(0),or,o.N.bind(o),a,void 0);return Zv(o,h),h},ox=(t,e,i,s)=>r=>{const n=l(l(l({},i),r),{},{theme:(null==r?void 0:r.theme)||Dy}),o=t(n),a=e||s?Dm(o,s,null==i?void 0:i.licenseInformation):void 0,h=new Gy(o.Fa,Em(o,1).xL(0),or,o.N.bind(o),a,void 0,r);return Zv(o,h),h},ax=(t,e,i,s)=>r=>{const n=l(l(l({},i),r),{},{theme:(null==r?void 0:r.theme)||Dy}),o=t(n),a=e||s?Dm(o,s,null==i?void 0:i.licenseInformation):void 0,h=new np(o.Fa,Em(o,1).xL(0),or,o.N.bind(o),a,r);return Zv(o,h),h},hx=(t,e,i,s)=>r=>{const n=l(l(l({},i),r),{},{theme:(null==r?void 0:r.theme)||Dy}),o=t(n),a=e||s?Dm(o,s,null==i?void 0:i.licenseInformation):void 0,h=new $y(o.Fa,Em(o,1).xL(0),or,o.N.bind(o),a,r);return Zv(o,h),h},lx=(t,e,i,s)=>r=>{const n=l(l(l({},i),r),{},{theme:(null==r?void 0:r.theme)||Dy}),o=t(n),a=e?Dm(o,s):void 0,h=new hm(o.Fa,Em(o,1).xL(0),or,o.N.bind(o),a,void 0,r);return Zv(o,h),h},cx={translation:(t,e,i)=>[1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1],xRotation(t){const e=Math.cos(t),i=Math.sin(t);return[1,0,0,0,0,e,i,0,0,-i,e,0,0,0,0,1]},yRotation(t){const e=Math.cos(t),i=Math.sin(t);return[e,0,-i,0,0,1,0,0,i,0,e,0,0,0,0,1]},zRotation(t){const e=Math.cos(t),i=Math.sin(t);return[e,i,0,0,-i,e,0,0,0,0,1,0,0,0,0,1]},scaling:(t,e,i)=>[t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1],translate:(t,e,i,s)=>cx.multiply(t,cx.translation(e,i,s)),xRotate:(t,e)=>cx.multiply(t,cx.xRotation(e)),yRotate:(t,e)=>cx.multiply(t,cx.yRotation(e)),zRotate:(t,e)=>cx.multiply(t,cx.zRotation(e)),rotateXYZ(t,e){let i=cx.xRotate(t,e.x);return i=cx.yRotate(i,e.y),i=cx.zRotate(i,e.z),i},scale:(t,e,i,s)=>cx.multiply(t,cx.scaling(e,i,s)),multiply(t,e){const i=e[0],s=e[1],r=e[2],n=e[3],o=e[4],a=e[5],h=e[6],l=e[7],c=e[8],u=e[9],d=e[10],f=e[11],g=e[12],p=e[13],y=e[14],m=e[15],v=t[0],x=t[1],b=t[2],S=t[3],A=t[4],E=t[5],k=t[6],w=t[7],M=t[8],C=t[9],T=t[10],F=t[11],P=t[12],B=t[13],L=t[14],D=t[15],z=[];return z[0]=i*v+s*A+r*M+n*P,z[1]=i*x+s*E+r*C+n*B,z[2]=i*b+s*k+r*T+n*L,z[3]=i*S+s*w+r*F+n*D,z[4]=o*v+a*A+h*M+l*P,z[5]=o*x+a*E+h*C+l*B,z[6]=o*b+a*k+h*T+l*L,z[7]=o*S+a*w+h*F+l*D,z[8]=c*v+u*A+d*M+f*P,z[9]=c*x+u*E+d*C+f*B,z[10]=c*b+u*k+d*T+f*L,z[11]=c*S+u*w+d*F+f*D,z[12]=g*v+p*A+y*M+m*P,z[13]=g*x+p*E+y*C+m*B,z[14]=g*b+p*k+y*T+m*L,z[15]=g*S+p*w+y*F+m*D,z},inverse(t){const e=[],i=t[0],s=t[1],r=t[2],n=t[3],o=t[4],a=t[5],h=t[6],l=t[7],c=t[8],u=t[9],d=t[10],f=t[11],g=t[12],p=t[13],y=t[14],m=t[15],v=d*m,x=y*f,b=h*m,S=y*l,A=h*f,E=d*l,k=r*m,w=y*n,M=r*f,C=d*n,T=r*l,F=h*n,P=c*p,B=g*u,L=o*p,D=g*a,z=o*u,I=c*a,R=i*p,_=g*s,V=i*u,N=c*s,O=i*a,Y=o*s,G=v*a+S*u+A*p-(x*a+b*u+E*p),X=x*s+k*u+C*p-(v*s+w*u+M*p),U=b*s+w*a+T*p-(S*s+k*a+F*p),H=E*s+M*a+F*u-(A*s+C*a+T*u),j=1/(i*G+o*X+c*U+g*H);return e[0]=j*G,e[1]=j*X,e[2]=j*U,e[3]=j*H,e[4]=j*(x*o+b*c+E*g-(v*o+S*c+A*g)),e[5]=j*(v*i+w*c+M*g-(x*i+k*c+C*g)),e[6]=j*(S*i+k*o+F*g-(b*i+w*o+T*g)),e[7]=j*(A*i+C*o+T*c-(E*i+M*o+F*c)),e[8]=j*(P*l+D*f+z*m-(B*l+L*f+I*m)),e[9]=j*(B*n+R*f+N*m-(P*n+_*f+V*m)),e[10]=j*(L*n+_*l+O*m-(D*n+R*l+Y*m)),e[11]=j*(I*n+V*l+Y*f-(z*n+N*l+O*f)),e[12]=j*(L*d+I*y+B*h-(z*y+P*h+D*d)),e[13]=j*(V*y+P*r+_*d-(R*d+N*y+B*r)),e[14]=j*(R*h+Y*y+D*r-(O*y+L*r+_*h)),e[15]=j*(O*d+z*r+N*h-(V*h+Y*d+I*r)),e},projectionPerspective(t,e,i,s){const r=1/Math.tan(t*Math.PI/180/2),n=1/(i-s);return[r/e,0,0,0,0,r,0,0,0,0,(i+s)*n,-1,0,0,i*s*n*2,0]},projectionOrthographic:(t,e,i,s,r,n)=>[2/(e-t),0,0,0,0,2/(s-i),0,0,0,0,2/(r-n),0,(t+e)/(t-e),(i+s)/(i-s),(r+n)/(r-n),1],quaternionToRotationMatrix(t){const e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]+t[3]*t[3]),i=[t[0]/e,t[1]/e,t[2]/e,t[3]/e],s=i[0]+i[0],r=i[1]+i[1],n=i[2]+i[2],o=i[0]*s,a=i[0]*r,h=i[0]*n,l=i[1]*r,c=i[1]*n,u=i[2]*n,d=i[3]*s,f=i[3]*r,g=i[3]*n;return[1-(l+u),a-g,h+f,0,a+g,1-(o+u),c-d,0,h-f,c+d,1-(o+l),0,0,0,0,1]}};function ux(t,e,i,s,r,n){let o=e.x.Bt(t.max.x),a=e.x.Bt(t.min.x),h=e.y.Bt(t.max.y),l=e.y.Bt(t.min.y),c=o-a,u=h-l;if(c<1){const t=(a+o)/2;a=t-.5,o=t+.5,c=1}if(u<1){const t=(l+h)/2;l=t-.5,h=t+.5,u=1}const d=c/u,f=c*i.x,g=u*i.y,p=c-f,y=u-g,m=f>p?[p,f]:[f,p],v=g>y?[y,g]:[g,y];let x,b,S=1,A=1;switch(s){default:case Xs.closestSide:if(x=m[0]/c,b=v[0]/u,r===Gs.circle){const t=Math.min(x*d,b);S=t,A=t}else S=x*d,A=b;break;case Xs.farthestSide:if(x=m[1]/c,b=v[1]/u,r===Gs.circle){const t=Math.max(x*d,b);S=t,A=t}else S=x*d,A=b;break;case Xs.closestCorner:if(b=v[0]/u,r===Gs.circle){x=m[0]/c*d;const t=Math.sqrt(x*x+b*b);S=t,A=t}else{x=m[0]/c;const t=Math.sqrt(x*x+b*b);S=t*d,A=t}break;case Xs.farthestCorner:if(b=v[1]/u,r===Gs.circle){x=m[1]/c*d;const t=Math.sqrt(x*x+b*b);S=t,A=t}else{x=m[1]/c;const t=Math.sqrt(x*x+b*b);S=t*d,A=t}}return{bounds:[a*n,l*n,c*n,u*n],center:[i.x*d,i.y],distance:[Math.max(S,1e-4),Math.max(A,1e-4)],aspectRatio:d}}function dx(t,e,i,s){const r=e.x.Bt(t.max.x),n=e.x.Bt(t.min.x),o=e.y.Bt(t.max.y),a=e.y.Bt(t.min.y),h=r-n,l=o-a,c=Math.abs(h*Math.sin(i))+Math.abs(l*Math.cos(i)),u=As(h/2-Math.sin(i)*(c/2),l/2-Math.cos(i)*(c/2)),d=As(h/2+Math.sin(i)*(c/2),l/2+Math.cos(i)*(c/2));return{bounds:[n*s,a*s,h*s,l*s],startPoint:[u.x*s,u.y*s],endPoint:[d.x*s,d.y*s]}}class fx{constructor(t){this.PB=t}}class gx{constructor(){this.AR=new Array,this.gR=t=>(this.AR.push(t),t),this.vR=this.gR(new Map),this.yR=this.gR(new Map),this.pR=this.gR(new Map),this.mR=this.gR(new Map),this.SR=this.gR(new Map),this.bR=this.gR(new Map),this.xR=this.gR(new Map),this.MR=this.gR(new Map)}wR(){this.AR.forEach(t=>{t.forEach(t=>t.wR()),t.clear()})}}const px=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return()=>{t._R=e,i&&i()}},yx=(t,e,i,s,r)=>{const n=Math.min(i/t,s/e),o=t*n,a=e*n,h=i/o,l=s/a,c=o/i,u=a/s;let d=0,f=1,g=0,p=1;switch(r){case Cr.Fill:l<h?(d=0,f=1,g=.5+-c/2,p=.5+c/2):(g=0,p=1,d=.5+-u/2,f=.5+u/2);break;case Cr.Fit:l<h?(g=0,p=1,d=.5+-h/2,f=.5+h/2):(d=0,f=1,g=.5+-l/2,p=.5+l/2);break;case Cr.Center:{const r=i/t,n=s/e;d=.5+-r/2,f=.5+r/2,g=.5+-n/2,p=.5+n/2}break;case Cr.Tile:d=0,f=i/t,g=0,p=s/e;break;case Cr.Stretch:default:d=0,f=1,g=0,p=1}return new Float32Array([d,p,f,p,f,g,d,g])};class mx{constructor(t,e){if(this.kR=0,this.CR=0,this.TR=!1,this._R=!1,this.FR=!1,this.IR=!1,this.PR=!1,this.LR=new Set,this.BR=new Set,this.Js=e,this.nD=t,this.DR=null,this.TR=e instanceof Ur.HTMLVideoElement,this.Js instanceof Ur.HTMLImageElement)this.Js.addEventListener("load",()=>{this.IR=!0,this.RR()}),this.Js.addEventListener("error",()=>{this.PR=!0}),this.Js.complete&&(this.IR=!0,this.RR());else if(this.Js instanceof Ur.HTMLVideoElement){const t=this;this.Js.addEventListener("canplay",function(){t.CR=this.videoHeight,t.kR=this.videoWidth,t.IR=!0,t.RR()},!0),this.Js.addEventListener("play",px(this,!0,()=>this.RR())),this.Js.addEventListener("playing",px(this,!0,()=>this.RR())),this.Js.addEventListener("pause",px(this,!1)),this.Js.addEventListener("ended",px(this,!1)),this.Js.readyState>=1&&(this.kR=this.Js.videoWidth,this.CR=this.Js.videoHeight,this._R=!this.Js.paused,this.IR=!0,this.RR())}else this.IR=!0,this.RR()}Hu(t){0===this.BR.size&&this.IR&&this.RR(),this.BR.add(t)}UB(t){this.BR.delete(t),0===this.BR.size&&this.unbindResources()}ER(t){this.LR.add(t),this.FR&&(t(),this.OR(t))}OR(t){this.LR.delete(t)}RR(){if(this.PR||this.FR||!this.IR)return;const t=this.nD.gl;if(!this.DR&&this.Js&&t){this.DR=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.DR),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const e=0,i=t.RGBA,s=t.RGBA,r=t.UNSIGNED_BYTE,n=this.Js,o=this.kR>0?this.kR:n.width,a=this.CR>0?this.CR:n.height;t.texImage2D(t.TEXTURE_2D,e,i,s,r,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.kR=o,this.CR=a,t.bindTexture(t.TEXTURE_2D,null)}this.FR=!0,this.LR&&this.LR.forEach(t=>{t(),this.OR(t)})}Er(){const t=this.nD.gl;if(!this.PR&&this.FR&&this.DR){const e=0,i=t.RGBA,s=t.RGBA,r=t.UNSIGNED_BYTE,n=this.Js;n&&(t.bindTexture(t.TEXTURE_2D,this.DR),t.texImage2D(t.TEXTURE_2D,e,i,s,r,n))}}zR(){return this.DR}unbindResources(){return this.FR&&(this.DR&&(this.nD.DB(this.DR),this.DR=null),this.FR=!1),this}}class vx extends xr{constructor(t,e,i){super(t.gi,e,i),this.Kg=!0,this.Zg=Fs(Va),this.Ws=t,this.oi=t.oi}VR(){var t;return this.Zg.o&&this.Zg.C().type!==(null===(t=this.NR)||void 0===t?void 0:t.type)}hv(t){return this.Kg=t,this}}class xx{constructor(t){this.vE=[],this.PB=t}yE(t,e){((t,e,i,s)=>{const r=t.GR(),n=Math.round(Math.min(i.spread,10)*r),o=Math.round(Math.min(i.blur,10)*r),a=Math.round(i.offset.x*r),h=Math.round(i.offset.y*r),l=t.$R(),c=t.UR(),u=t.YR(),d=t.jR(),f=t.HR();t.WR("disabled"),t.hv(!1),t.XR(!1);const g=t.gi.Qo.JD,p=e.ZR(),y=n+o/2,m=((t,e,i,s)=>{const r=t.gl,n=t.GR(),o=t.JR();t.QR(r.FRAMEBUFFER,s.frameBuffer),r.bindRenderbuffer(r.RENDERBUFFER,s.depthBuffer),r.bindTexture(r.TEXTURE_2D,s.texture),r.clearDepth(1),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT);const a=s.sizeDpr;t.KR(0,0,a.x,a.y);const h=[],l=t.gi.Qo.JD;return e.forEach(e=>{let s;if(e instanceof ec){s=e.ls||e.Ws.Hg();let t=!1;if(!s){const i=e.Ws.qR(e);i&&i.max.x-i.min.x>0&&i.max.y-i.min.y>0&&(s={x:i.min.x,y:i.min.y,width:i.max.x-i.min.x,height:i.max.y-i.min.y},t=!0)}s&&(s.width>0&&s.height>0?(t&&(s.x-=i.left/n,s.y-=i.top/n,s.width+=(i.left+i.right)/n,s.height+=(i.top+i.bottom)/n),h.push({x:s.x,y:s.y,width:s.width,height:s.height})):s=void 0)}else e instanceof vx&&(s=e.Ws.vm());if(s){const e=s.x+(l?0:i.left),r=s.y+(l?0:i.bottom),o=Math.max(s.width-(l?0:i.left+i.right),0),a=Math.max(s.height-(l?0:i.bottom+i.top),0);t.tE(e*n,r*n,o*n,a*n)}else t.XR(!1);e.pu(2,0)}),t.QR(r.FRAMEBUFFER,o),r.bindRenderbuffer(r.RENDERBUFFER,null),r.bindTexture(r.TEXTURE_2D,null),t.XR(!1),h})(t,s,{left:y+(a<0?-a:0),top:y+(h>0?h:0),right:y+(a>0?a:0),bottom:y+(h<0?-h:0)},p),v=p,x=n+o+5,b=((t,e,i,s)=>{const r=(t=>{const e=[];for(let i=0;i<t.length;i+=1){let s,r=t[i];do{const t=e.findIndex(t=>lo(r,t));s=t>=0?e[t]:void 0,s&&(e.splice(t,1),r=Eo(r,s))}while(s);e.push(r)}return e})(e.map(t=>{const e=t instanceof ec||t instanceof vx?t.Ws.qR(t):oo;if(Vn(e))return oo;const r={min:{x:Math.max(e.min.x-i.left,0),y:Math.max(e.min.y-i.bottom,0)},max:{x:Math.min(e.max.x+i.right,s.x),y:Math.min(e.max.y+i.top,s.y)}};return r.max.x<=r.min.x||r.max.y<=r.min.y?oo:r}).filter(t=>!Vn(t))),n=6*r.length,o=new Float32Array(4*n);let a=0;return r.forEach(t=>{const e=Io(t.min,s),i=Io(t.max,s),r=e,n=i;o[a+0]=e.x,o[a+1]=e.y,o[a+2]=r.x,o[a+3]=r.y,o[a+4]=i.x,o[a+5]=e.y,o[a+6]=n.x,o[a+7]=r.y,o[a+8]=i.x,o[a+9]=i.y,o[a+10]=n.x,o[a+11]=n.y,o[a+12]=i.x,o[a+13]=i.y,o[a+14]=n.x,o[a+15]=n.y,o[a+16]=e.x,o[a+17]=i.y,o[a+18]=r.x,o[a+19]=n.y,o[a+20]=e.x,o[a+21]=e.y,o[a+22]=r.x,o[a+23]=r.y,a+=24}),{vertexBuffer:t.iE(o),vertexCount:n}})(t,s,{left:x+(a<0?-a:0),top:x+(h>0?h:0),right:x+(a>0?a:0),bottom:x+(h<0?-h:0)},e.sE()),S=e.ZR(v),A=t.eR(Bv["2D"],Bv.Glow1D({spreadPx:n,blurPx:o,firstPass:!0}),Bv.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((t,e,i,s,r,n)=>{const o=t.gl,a=t.JR();t.QR(o.FRAMEBUFFER,i.frameBuffer),o.bindRenderbuffer(o.RENDERBUFFER,i.depthBuffer),o.bindTexture(o.TEXTURE_2D,i.texture),o.clearDepth(1),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),t.KR(0,0,i.sizeDpr.x,i.sizeDpr.y),t.eE(s,(a,h,l,c)=>(t.Hu(s),n&&n(a),t.oE(a("uIsHighlighted"),0).wI(a("uHighlightColorOffset"),Ns).oE(a("uRenderEffectMask"),0).nE(a("uTexture"),e.texture,0).rE(c("uTextureSize"),[e.sizeDpr.x,e.sizeDpr.y]).rE(a("uScale"),i.uniforms.aE()).rE(a("uDisp"),i.uniforms.lE()).rE(a("uScaling"),[i.size.x,i.size.y]).rE(a("uTranslationAxis"),[0,0]).hE(r.vertexBuffer,void 0,{location:h("aPos"),size:2},{location:h("aTextureCoord"),size:2}).Mk(o.TRIANGLES,r.vertexCount,0),!0)),t.QR(o.FRAMEBUFFER,a),o.bindRenderbuffer(o.RENDERBUFFER,null),o.bindTexture(o.TEXTURE_2D,null)})(t,v,S,A,b,(e,i,s,r)=>(t.rE(e("uOffsetPx"),[a+1,h+1]),!0)),t.XR(c),t.cE(f),g&&(((t,e)=>{if(void 0===e||e.length<1)return;const i=t.gl,s=6*e.length*2,r=[s];let n=0;for(let u=0;u<e.length;u+=1){const t=e[u];r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.x+t.width,r[n+3]=t.y,r[n+4]=t.x,r[n+5]=t.y+t.height,r[n+6]=t.x+t.width,r[n+7]=t.y,r[n+8]=t.x+t.width,r[n+9]=t.y+t.height,r[n+10]=t.x,r[n+11]=t.y+t.height,n+=12}const o=t.iE(r,!0),a={x:t.gi._t().x,y:t.gi._t().y},h=or.d2({scaleXYConstructor:rr}).X(a).ti(0,a.x).ii(0,a.y),l=new Ax;l.uE(h);const c=t.eR(Bv["2D"],Bv.VertexLocation({scaling:{dataType:"uniform"},translation:void 0,axisWorldTranslation:"linear",normalSource:void 0}),Bv.Color({dataType:"uniform"}));t.dE(!0),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.stencilFunc(i.ALWAYS,1,255),i.stencilOp(i.KEEP,i.KEEP,i.REPLACE),i.stencilMask(255),i.colorMask(!1,!1,!1,!1),t.Hu(c).AE(c.fD("aPos"),o).rE(c.uD("uDisp"),l.lE()).rE(c.uD("uScaling"),[1,1]).rE(c.uD("uScale"),l.aE()).fE(c.uD("uColor"),[1,1,1,1]).Mk(i.TRIANGLES,s/2),t.gE(o),i.colorMask(!0,!0,!0,!0)})(t,m),t.gl.stencilFunc(t.gl.EQUAL,1,255),t.gl.stencilOp(t.gl.KEEP,t.gl.KEEP,t.gl.KEEP),t.dE(!0));const E=t.eR(Bv["2D"],Bv.Glow1D({spreadPx:n,blurPx:o,firstPass:!1}),Bv.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((t,e,i,s,r)=>{const n=t.gl,o={x:t.gi._t().x,y:t.gi._t().y};t.KR(0,0,o.x*t.GR(),o.y*t.GR());const a=or.d2({scaleXYConstructor:rr}).X(o).ti(0,o.x).ii(0,o.y),h=new Ax;h.uE(a),t.eE(i,(a,l,c,u)=>(t.Hu(i),r&&r(a),t.oE(a("uIsHighlighted"),0).wI(a("uHighlightColorOffset"),Ns).oE(a("uRenderEffectMask"),0).nE(a("uTexture"),e.texture,0).rE(u("uTextureSize"),[e.sizeDpr.x,e.sizeDpr.y]).rE(a("uScale"),h.aE()).rE(a("uDisp"),h.lE()).rE(a("uScaling"),[o.x,o.y]).rE(a("uTranslationAxis"),[0,0]).hE(s.vertexBuffer,void 0,{location:l("aPos"),size:2},{location:l("aTextureCoord"),size:2}).Mk(n.TRIANGLES,s.vertexCount,0),!0))})(t,p,E,b,(e,s,r,n)=>(t.nE(e("uTextureFirstGlowPass"),S.texture,1).wI(e("uGlowColor"),i.color),!0)),t.KR(l.x,l.y,l.width,l.height),t.WR(u),t.hv(d),t.gE(b.vertexBuffer),g&&t.dE(!1)})(this.PB,this,e,t)}sE(){const t=this.PB.gi._t();return{x:Math.ceil(t.x),y:Math.ceil(t.y)}}ZR(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];const s=this.vE,r=this.sE(),n={x:Math.ceil(r.x*this.PB.GR()),y:Math.ceil(r.y*this.PB.GR())},o=this.PB.gl,a=s.find(t=>!e.includes(t));if(a)return a.sizeDpr.x===n.x&&a.sizeDpr.y===n.y||(a.size=r,a.sizeDpr=n,o.bindTexture(o.TEXTURE_2D,a.texture),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,n.x,n.y,0,o.RGBA,o.UNSIGNED_BYTE,null),o.bindRenderbuffer(o.RENDERBUFFER,a.depthBuffer),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,n.x,n.y),o.bindTexture(o.TEXTURE_2D,null),o.bindRenderbuffer(o.RENDERBUFFER,null),a.scale.X(r).ti(0,r.x).ii(0,r.y),a.uniforms.uE(a.scale)),a;const h=o.createTexture(),l=this.PB.pE(),c=this.PB.mE();o.bindTexture(o.TEXTURE_2D,h),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,n.x,n.y,0,o.RGBA,o.UNSIGNED_BYTE,null),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const u=this.PB.JR();this.PB.QR(o.FRAMEBUFFER,l),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,h,0),o.bindRenderbuffer(o.RENDERBUFFER,c),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,n.x,n.y),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,c),o.bindTexture(o.TEXTURE_2D,null),this.PB.QR(o.FRAMEBUFFER,u),o.bindRenderbuffer(o.RENDERBUFFER,null);const d=or.d2({scaleXYConstructor:rr}).X(r).ti(0,r.x).ii(0,r.y),f=new Ax;f.uE(d);const g={size:r,sizeDpr:n,texture:h,frameBuffer:l,depthBuffer:c,scale:d,uniforms:f};return s.push(g),g}N(){[this.vE].forEach(t=>{t.forEach(t=>{this.PB.SE(t.depthBuffer),this.PB.bE(t.frameBuffer),this.PB.DB(t.texture)}),t.length=0})}}class bx{constructor(t,e,i,s){var r=this;let n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.xE=new gx,this.ME=new Map,this.wE=new Map,this._E=[],this.YD=1,this.IS_MACHINE_LITTLE_ENDIAN=(()=>{const t=new Uint32Array([287454020]),e=new Uint8Array(t.buffer);return 68===e[0]||17!==e[0]&&(Ur.console.error("Unidentified machine endianness. Some features might behave unexpectedly."),!0)})(),this.Kg=!1,this.kE=!1,this.rE=(t,e)=>{let[i,s]=e;return void 0===t||this.gl.uniform2f(t,i,s),this},this.CE=(t,e)=>{let[i,s]=e;return void 0===t||this.gl.uniform2i(t,i,s),this},this.fE=(t,e)=>{let[i,s,r,n]=e;return void 0===t||this.gl.uniform4f(t,i,s,r,n),this},this.TE=(t,e)=>{let[i,s,r]=e;return void 0===t||this.gl.uniform3f(t,i,s,r),this},this.FE=(t,e)=>(void 0===t||this.gl.uniformMatrix3fv(t,!1,e),this),this.IE=(t,e)=>(void 0===t||this.gl.uniformMatrix4fv(t,!1,e),this),this.wI=(t,e)=>(void 0===t||this.gl.uniform4f(t,e.r,e.g,e.b,e.a),this),this.oE=(t,e)=>(void 0===t||this.gl.uniform1f(t,e),this),this.PE=(t,e)=>(this.gl.uniform1i(t,e),this),this.nE=(t,e,i)=>{if(void 0===t)return this;if(e){const s=this.gl.TEXTURE0+i;return this.gl.activeTexture(s),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform1i(t,i),this}throw new wm("Could not bind a texture.")},this.LE=t=>(((t,e)=>{e===Cr.Tile?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE))})(this.gl,t),this),this.iE=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Float32Array;const n=t.length,o=r.BE(n,i);if(r.gl.bindBuffer(r.gl.ARRAY_BUFFER,o),r.gl.bufferData(r.gl.ARRAY_BUFFER,t instanceof s?t:new s(t),e?r.gl.DYNAMIC_DRAW:r.gl.STATIC_DRAW),r.gl.bindBuffer(r.gl.ARRAY_BUFFER,null),o)return o;throw new wm("Could not create vertex buffer")},this.DE=function(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Float32Array;const n=i||r.gl.createBuffer();if(r.gl.bindBuffer(r.gl.ARRAY_BUFFER,n),e&&e.length===t?r.gl.bufferData(r.gl.ARRAY_BUFFER,e instanceof s?e:new s(e),r.gl.STATIC_DRAW):(r.gl.bufferData(r.gl.ARRAY_BUFFER,t*s.BYTES_PER_ELEMENT,r.gl.STATIC_DRAW),e&&r.gl.bufferSubData(r.gl.ARRAY_BUFFER,0,e instanceof s?e:new s(e))),r.gl.bindBuffer(r.gl.ARRAY_BUFFER,null),n)return n;throw new wm("Could not create vertex buffer")},this.RE=function(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Float32Array;r.gl.bindBuffer(r.gl.ARRAY_BUFFER,t),r.gl.bufferSubData(r.gl.ARRAY_BUFFER,e*s.BYTES_PER_ELEMENT,i instanceof s?i:new s(i)),r.gl.bindBuffer(r.gl.ARRAY_BUFFER,null)},this.EE=(t,e,i,s,r)=>{if(s&&t&&(t.usedSize=0),!t){const t=e.length+i,s=new r(t);return s.set(e),{buffer:this.DE(t,s,void 0,r),dataCache:s,preallocSize:t,usedSize:e.length}}if(t.usedSize+e.length>t.preallocSize){const s=t.usedSize+e.length+i,n=new r(s);return n.set(t.dataCache),n.set(e,t.usedSize),{buffer:this.DE(s,n,t.buffer,r),dataCache:n,preallocSize:s,usedSize:t.usedSize+e.length}}return t.dataCache.set(e,t.usedSize),this.RE(t.buffer,t.usedSize,e,r),t.usedSize+=e.length,t},this.OE=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r.gl.bindBuffer(r.gl.ARRAY_BUFFER,t),r.gl.bufferData(r.gl.ARRAY_BUFFER,e,i?r.gl.DYNAMIC_DRAW:r.gl.STATIC_DRAW),r.gl.bindBuffer(r.gl.ARRAY_BUFFER,null)},this.zE=(t,e)=>{const i=t.length,s=this.BE(i,e);if(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,s),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,t,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),s)return s;throw new wm("Could not create index buffer")},this.VE=t=>{const e=this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ARRAY_BUFFER,t instanceof Float32Array?t:new Float32Array(t),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),e)return e;throw new wm("Could not create float buffer")},this.AE=(t,e)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!1,0,0)),this),this.NE=(t,e)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.vertexAttribPointer(t,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(t)),this),this.hE=function(t,e){var i;r.gl.bindBuffer(r.gl.ARRAY_BUFFER,t);for(var s=arguments.length,n=new Array(s>2?s-2:0),o=2;o<s;o++)n[o-2]=arguments[o];const a=n.length;let h=0;for(let r=0;r<a;r+=1)h+=n[r].size;for(let c=0;c<a;c+=1){const t=n[c].location;void 0!==t&&t>-1&&r.gl.enableVertexAttribArray(t)}let l=0;for(let c=0;c<a;c+=1){const t=n[c];void 0!==t.location&&t.location>-1&&r.gl.vertexAttribPointer(t.location,t.size,r.gl.FLOAT,!1,h*Float32Array.BYTES_PER_ELEMENT,l*Float32Array.BYTES_PER_ELEMENT+(null!==(i=t.extraOffset)&&void 0!==i?i:0)),l+=t.size}if(void 0!==e)for(let c=0;c<a;c+=1){const t=n[c].location;void 0!==t&&t>-1&&r.GE(t,e)}return r},this.$E=function(){const t=arguments.length;for(let e=0;e<t;e+=1){const t=e<0||arguments.length<=e?void 0:arguments[e];0!==t&&t>-1&&r.gl.disableVertexAttribArray(t)}return r},this.UE=(t,e)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,4,this.gl.FLOAT,!1,0,0)),this),this.YE=function(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return void 0===t||(r.gl.bindBuffer(r.gl.ARRAY_BUFFER,e),r.gl.vertexAttribPointer(t,1,r.gl.FLOAT,!1,0,s),r.gl.enableVertexAttribArray(t),void 0!==i&&r.GE(t,i)),r},this.jE=t=>(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t),this),this.HE=null,this.Mk=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e>0&&r.gl.drawArrays(t,i,e),r},this.WE=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.gl.TRIANGLES,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.gl.UNSIGNED_SHORT;return t>0&&r.gl.drawElements(e,t,s,i),r},this.XE=(t,e,i,s)=>{if(s>0&&(this.gl2&&this.gl2.ctx.drawArraysInstanced(t,e,i,s),this.gl1)){if(!this.gl1.QD.ANGLE_instanced_arrays)return Ur.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.QD.ANGLE_instanced_arrays.drawArraysInstancedANGLE(t,e,i,s)}return this},this.ZE=function(t,e,i,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.gl.UNSIGNED_SHORT;if(s>0&&(r.gl2&&r.gl2.ctx.drawElementsInstanced(t,e,n,i,s),r.gl1)){if(!r.gl1.QD.ANGLE_instanced_arrays)return Ur.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),r;r.gl1.QD.ANGLE_instanced_arrays.drawElementsInstancedANGLE(t,e,n,i,s)}return r},this.GE=(t,e)=>{if(t>-1&&(this.gl2&&this.gl2.ctx.vertexAttribDivisor(t,e),this.gl1)){if(!this.gl1.QD.ANGLE_instanced_arrays)return Ur.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.QD.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(t,e)}return this},this.JE=function(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const n=r.gl.TEXTURE0+s;r.gl.activeTexture(n);const o=r.JR();r.QR(r.gl.FRAMEBUFFER,e),r.gl.bindTexture(r.gl.TEXTURE_2D,i),r.gl.framebufferTexture2D(r.gl.FRAMEBUFFER,r.gl.COLOR_ATTACHMENT0,r.gl.TEXTURE_2D,i,0);const a=r.UR();a&&r.XR(!1),t(),a&&r.XR(!0),r.gl.bindTexture(r.gl.TEXTURE_2D,null),r.QR(r.gl.FRAMEBUFFER,o)},this.zi=()=>(this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this),this.QE=t=>(this.gl.clearColor(t.r,t.g,t.b,t.a),this),this.Hu=t=>(this.gl.useProgram(t.oD),this),this.KE=!1,this.qE=[],this.gi=t,this._g=e,this.gi=t,this.gl=i.ctx,this.tO=i.antialias,this.iO=!!this.gi.Qo.pD&&i.lineAntialias,this.KD=this.gi.Qo.KD,this.sO=new Map,this.gl1=this.gi.Qo.gl1,this.gl2=this.gi.Qo.gl2,n&&(this.cE(!0),this.eO()),this.QD=this.gi.Qo.QD,this.BB=this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),this.zB=this.hO(),this.eR=this.gi.Qo.eR,this.rO=new kx(this),this.HB=this.gi.Qo.HB,this.nO=new xx(this),this.yD=this.gi.Qo.yD,this.oO=this.iE([0,0,1,0,1,1,0,1]),this.aO=this.iE([0,0,1,0,0,1,0,1,1,0,1,1])}WR(t){return t!==this.lO&&(this.lO=t,"disabled"===t?this.gl.disable(this.gl.CULL_FACE):"cull-back"===t?(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.BACK)):"cull-front"===t&&(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.FRONT))),this}YR(){return this.lO||"disabled"}hv(t){return t!==this.Kg&&(this.Kg=t,t?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST)),this}dE(t){return t!==this.kE&&(this.kE=t,t?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST)),this}jR(){return this.Kg}cO(t){return this.YD=t,this}GR(){return this.YD}BE(t,e){let i;if(e){const s=this.sO.get(e);s&&s.size>=t&&s.size-t<1e6?i=e:this.gE(e)}return i||(i=this.gl.createBuffer(),this.sO.set(i,{size:t})),i}uO(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.gl.RGBA,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,n=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this.gl.UNSIGNED_BYTE,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:e;const h=this.gl.createTexture();if(!h)throw new wm("Couldn't reserve Texture.");return this.gl.bindTexture(this.gl.TEXTURE_2D,h),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),t&&null===r?this.gl.texImage2D(this.gl.TEXTURE_2D,0,a,e,o,t):r&&this.gl.texImage2D(this.gl.TEXTURE_2D,0,a,r.x,r.y,0,e,o,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,s?this.gl.NEAREST:this.gl.LINEAR),i?(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.generateMipmap(this.gl.TEXTURE_2D)):this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,s?this.gl.NEAREST:this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),h}DB(t){this.gl.deleteTexture(t)}pE(){const t=this.gl.createFramebuffer();if(!t)throw new wm("Couldn't reserve Framebuffer.");return t}QR(t,e){this.HE=e,this.gl.bindFramebuffer(t,e)}JR(){return this.HE}bE(t){this.gl.deleteFramebuffer(t)}mE(){const t=this.gl.createRenderbuffer();if(!t)throw new wm("Couldn't reserve Render buffer.");return t}SE(t){this.gl.deleteRenderbuffer(t)}dO(){const t=this.gl;switch(t.checkFramebufferStatus(t.FRAMEBUFFER)){default:case t.FRAMEBUFFER_COMPLETE:Ur.console.log("FRAMEBUFFER_COMPLETE");break;case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:Ur.console.log("FRAMEBUFFER_INCOMPLETE_ATTACHMENT");break;case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:Ur.console.log("FRAMEBUFFER_INCOMPLETE_DIMENSIONS");break;case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:Ur.console.log("FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT");break;case t.FRAMEBUFFER_UNSUPPORTED:Ur.console.log("FRAMEBUFFER_UNSUPPORTED")}}KR(t,e,i,s){return this.gl.viewport(t,e,i,s),this.fO&&t===this.fO.x&&e===this.fO.y&&i===this.fO.width&&s===this.fO.height||(this.fO={x:t,y:e,width:i,height:s}),this}$R(){return this.fO||{x:0,y:0,width:0,height:0}}tE(t,e,i,s){return this.XR(!0),this.gl.scissor(Math.max(t,0),Math.max(e,0),Math.max(i,0),Math.max(s,0)),this}XR(t){return t===this.AO||(t?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this.AO=t),this}cE(t){return t!==this.KE&&(this.KE=t,t&&this.gl.enable(this.gl.BLEND),t||this.gl.disable(this.gl.BLEND)),this}HR(){return this.KE}eO(t,e,i,s){return t?(void 0!==t&&void 0!==e&&(void 0!==i&&void 0!==s?this.gl.blendFuncSeparate(t,e,i,s):this.gl.blendFunc(t,e)),this):(this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA),this)}UR(){return void 0!==this.AO&&this.AO}eE(t,e){const i=new wx(this,t),s=e(i.uniform,i.attribute,i,i.uniformOptional);i.finish(s)}gE(t){t&&(this.gl.deleteBuffer(t),this.sO.delete(t))}gO(t,e,i){this.rE(t.uniform("uCenter"),e.center).rE(t.uniform("uDistance"),e.distance).fE(t.uniform("uBounds"),e.bounds).oE(t.uniform("uAspect"),e.aspectRatio);const s=i.getColorStops();if(s.length<2)throw new Error("Minimum two color stops required");for(let r=0;r<s.length;r+=1)this.wI(t.uniform("color_".concat(r)),s[r].color).oE(t.uniform("stop_".concat(r)),s[r].offset);return this}vO(t,e,i){this.rE(t.uniform("uStartPoint"),e.startPoint).rE(t.uniform("uEndPoint"),e.endPoint).fE(t.uniform("uBounds"),e.bounds);const s=i.getColorStops();if(s.length<2)throw new Error("Minimum two color stops required");for(let r=0;r<s.length;r+=1)this.wI(t.uniform("color_".concat(r)),s[r].color).oE(t.uniform("stop_".concat(r)),s[r].offset);return this}br(t){const e=this.yD.get(t);if(!e){const e=new Um(this);return this.yD.set(t,e),e}return e}yO(t){const e=this.ME.get(t);if(!e){const e=new mx(this,t);return this.pO(t,e),e}return e}pO(t,e){this.ME.set(t,e)}hO(){const t=this.gl,e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,1,1,0,t.ALPHA,t.UNSIGNED_BYTE,new Uint8ClampedArray([0]));const i=0===t.getError();return i||!1!==this._g.Ia&&Ur.console.info("LightningChart JS - Uint8ClampedArray is not supported as texture data. The above WebGL error/warning is from the feature detection. There is nothing to worry about."),t.deleteTexture(e),i}mO(t,e,i,s){if(i)this.hE(e,s,{location:t.attribute("aPos_highpart"),size:2},{location:t.attribute("aPos_lowpart"),size:2});else{const i=t.attribute("aPos");this.AE(i,e),void 0!==s&&this.GE(i,s)}return this}SO(){this.QD.WEBGL_lose_context&&this.QD.WEBGL_lose_context.loseContext()}bO(t){if(this.xO&&this.xO.bufferIdsCount>=t)return this.xO.buffer;this.xO&&(this.gE(this.xO.buffer),this.xO=void 0);const e=t,i=new Float32Array(e);for(let r=0;r<e;r+=1)i[r]=r;const s=this.iE(i);return this.xO={buffer:s,bufferIdsCount:e},s}MO(){return this.gl2?void 0:"attribute"}wO(t,e){if("attribute"===this.MO()){const i=this.bO(e);this.hE(i,void 0,{location:t.attribute("aVertexID"),size:1})}return this}_O(){return this.gl2?void 0:"attribute"}kO(t,e){if("attribute"===this._O()){const i=this.bO(e);this.hE(i,1,{location:t.attribute("aInstanceID"),size:1})}return this}CO(t,e,i,s,r,n,o,a,h){const l=t.createBuffer();return this.qE.push(l),t.bindFramebuffer(t.FRAMEBUFFER,e),t.bindBuffer(t.PIXEL_PACK_BUFFER,l),t.bufferData(t.PIXEL_PACK_BUFFER,h.byteLength,t.STREAM_READ),t.readPixels(i,s,r,n,o,a,0),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),Sx(t,()=>this.gi.ci,t.PIXEL_PACK_BUFFER,l,0,h).then(()=>h).catch(t=>{throw t}).finally(()=>{t.deleteBuffer(l),this.qE.splice(this.qE.indexOf(l),1)})}TO(t,e,i,s,r,n,o,a){const h=this.gl,l=this.JR();this.QR(h.FRAMEBUFFER,t),h.readPixels(e,i,s,r,n,o,a),this.QR(this.gl.FRAMEBUFFER,l)}FO(t){const e=this.wE.get(t);if(!e){const e=this.gl.createTexture();if(!e)throw new wm("Couldn't reserve Texture.");this.gl.bindTexture(this.gl.TEXTURE_2D,e);const s=[];let r=255;for(let i=0;i<t.length;i+=1){for(let e=0;e<t[i];e+=1)s.push(r);r=255===r?0:255}const n=s.length;if(!this.gl2&&(i=s.length)&i-1){const t=(t=>{t-=1;for(let e=1;e<32;e<<=1)t|=t>>1;return t+1})(s.length);for(let e=s.length;e<t;e+=1)s[e]=0}this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl.pixelStorei(this.gl.PACK_ALIGNMENT,1),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,s.length,1,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,new Uint8Array(s)),this.gl.bindTexture(this.gl.TEXTURE_2D,null);const o={IO:e,PO:n,LO:s.length};return this.wE.set(t,o),o}var i;return e}BO(t,e,i){const{uniform:s}=t;this.wI(s("uFallbackColor"),e.getFallbackColor());for(let r=0;r<e.steps.length;r+=1)this.oE(s("uLUTValue".concat(r)),e.steps[r].value),this.wI(s("uLUTColor".concat(r)),e.steps[r].color);if(e.percentageValues){if(!i)return Rn(0,()=>{}),this;this.oE(s("uMinValue"),i.min),this.oE(s("uMaxValue"),i.max)}return this}DO(t,e,i,s,r,n){const o=i&&i.getSource()||s&&s.Js,a=i?i.getFitMode():Cr.Stretch,h=t=>{t.texCoordsBuffer=this.iE(n(t.texture.kR,t.texture.CR,a),!1,t.texCoordsBuffer)};if(o){let s=e;if((!e||o!==e.source)&&o){e&&(e.texture.UB(t),this.gE(e.texCoordsBuffer));const r=this.yO(o);r.Hu(t);const n=i?i.getSourceMissingColor():Hh.color;s={texture:r,source:o,texCoordsBuffer:this.iE([]),sourceMissingTexture:this.uO(new Uint8Array([n.getR(),n.getG(),n.getB(),n.getA()]),this.gl.RGBA,!1,!0,{x:1,y:1},!1),textureReadyCallback:()=>{s&&o&&(h(s),this.gi.Bs())}},r.ER(s.textureReadyCallback),h(s)}return s&&s.texture.FR&&s.texture.TR&&s.texture._R&&(s.texture.Er(),this.gi.Bs()),r&&s&&s.texture.FR&&h(s),s}e&&this.RO(t,e)}RO(t,e){e&&(e.texture.UB(t),e.texture.OR(e.textureReadyCallback),this.DB(e.sourceMissingTexture),this.gE(e.texCoordsBuffer))}EO(t,e,i,s){var r,n,o,a;const{uniform:h,uniformOptional:l,attribute:c}=t,u=i.oi,d=this.GR();if(this.wI(h("uHighlightColorOffset"),1===e||2===e?Os:i.Si).oE(h("uRenderEffectMask"),2===e?1:0).rE(l("uRatioPxClip"),[2/this.gi._t().x,2/this.gi._t().y]).oE(l("uDevicePixelRatio"),d),void 0===s.highlightBuffer)this.oE(h("uIsHighlighted"),1===e||2===e?0:i.Ai);else{if(!s.highlightBuffer)throw new Error("Highlight buffer not supplied for attribute highlighting");this.hE(s.highlightBuffer,null!==(r=s.highlightAttribDivisor)&&void 0!==r?r:void 0,{location:c("aIsHighlighted"),size:1})}u instanceof rr||u instanceof uh?this.rE(h("uScale"),s.uniforms.aE()).rE(h("uDisp"),s.uniforms.lE()).rE(l("uScaleStart_highpart"),s.uniforms.OO()).rE(l("uScaleStart_lowpart"),s.uniforms.zO()):u instanceof nr&&this.rE(l("uScaleStart"),s.uniforms.MixedScaleXY.uScaleStart).rE(l("uScaleStartLog"),s.uniforms.MixedScaleXY.uScaleStartLog).rE(l("uScaleInterval"),s.uniforms.MixedScaleXY.uScaleInterval).rE(l("uScaleIntervalLog"),s.uniforms.MixedScaleXY.uScaleIntervalLog).rE(h("uViewportStart"),s.uniforms.MixedScaleXY.uViewportStart).rE(h("uViewportSize"),s.uniforms.MixedScaleXY.uViewportSize);const f=!0===s.coordsHighPrecision;if(s.coordsX)if(f){const t=c("aPos_highpartX"),e=c("aPos_lowpartX");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s.coordsX),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(e,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,1*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(e)}else this.YE(c("aPosX"),s.coordsX);if(s.coordsY)if(f){const t=c("aPos_highpartY"),e=c("aPos_lowpartY");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s.coordsY),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(e,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,1*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(e)}else this.YE(c("aPosY"),s.coordsY);if(1===e){if(this.PE(h("uFirstId"),s.idFirst),void 0!==s.mousePickingOffsetBuffer){if(!s.mousePickingOffsetBuffer)throw new Error("No mouse picking offset buffer for attribute mouse picking");this.YE(c("aPickingIdOffset"),s.mousePickingOffsetBuffer,null!==(n=s.mousePickingOffsetAttribDivisor)&&void 0!==n?n:void 0)}}else{if(s.fillStyleSolid&&this.wI(h("uColor"),s.fillStyleSolid.getColor()),s.fillStylePaletted){if("value"===s.fillStylePaletted.getLookUpProperty()&&null!==s.lookupValueBuffer){if(!s.lookupValueBuffer)return!1;const t=c("aLookupValue");this.YE(t,s.lookupValueBuffer,s.lookupValueAttribDivisor,null!==(o=s.lookupValueBufferByteOffset)&&void 0!==o?o:0)}this.BO(t,s.fillStylePaletted.lut,s.lookupValueRange)}if(s.fillStyleLinearGradient){if(!s.linearGradientInfo)return!1;this.vO(t,s.linearGradientInfo,s.fillStyleLinearGradient)}if(s.fillStyleRadialGradient){if(!s.radialGradientInfo)return!1;this.gO(t,s.radialGradientInfo,s.fillStyleRadialGradient)}if(s.fillStyleIndividual&&null!==s.colorBuffer){if(!s.colorBuffer)return!1;const t=c("aColor");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s.colorBuffer),this.gl.vertexAttribPointer(t,4,this.gl.UNSIGNED_BYTE,!0,0,null!==(a=s.colorBufferByteOffset)&&void 0!==a?a:0),this.gl.enableVertexAttribArray(t),void 0!==s.colorAttribDivisor&&this.GE(t,s.colorAttribDivisor)}if(s.fillStyleImage){if(!s.texturedFillGLInfo)return!1;const t=s.texturedFillGLInfo&&s.texturedFillGLInfo.texture.zR();this.wI(l("uColor"),s.fillStyleImage.getSurroundingColor()).nE(h(tv),t||s.texturedFillGLInfo.sourceMissingTexture,0).hE(s.texturedFillGLInfo.texCoordsBuffer,s.texCoordAttribDivisor,{location:c("aTextureCoord"),size:2}).LE(s.fillStyleImage.fitMode)}if(s.maskTexture){const t=s.maskTexture&&s.maskTexture.texture.zR();this.nE(h(sv),t||s.maskTexture.sourceMissingTexture,0).hE(s.maskTexture.texCoordsBuffer,s.maskTextureCoordsAttribDivisor,{location:c("aMaskTextureCoord"),size:2})}}return void 0!==s.useInstanceID&&this.kO(t,s.useInstanceID),void 0!==s.useVertexID&&this.wO(t,s.useVertexID),!0}VO(t,e,i){if(t)return dx(i||e.Ti(),e.oi,t.getAngle(!0),this.GR())}NO(t,e,i){if(t)return ux(i||e.Ti(),e.oi,t.getPosition(),t.getExtent(),t.getShape(),this.GR())}}const Sx=async(t,e,i,s,r,n,o,a)=>{const h=t.fenceSync(t.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),((t,e,i,s)=>{const r=void 0!==s.flags?s.flags:0,n=void 0!==s.retryTimeout?s.retryTimeout:10;return new Promise((s,o)=>{const a=()=>{if(i())return s(void 0);const h=t.clientWaitSync(e,r,0);return h===t.WAIT_FAILED?o(new Error("WebGL Sync WAIT_FAILED ".concat(t.getError()))):h!==t.TIMEOUT_EXPIRED?s(void 0):void Ur.setTimeout(a,n)};Ur.setTimeout(a,0)})})(t,h,e,{retryTimeout:10}).then(()=>{if(!e())return t.deleteSync(h),t.bindBuffer(i,s),t.getBufferSubData(i,r,n,o,a),t.bindBuffer(i,null),n}).catch(t=>{throw t})};class Ax{uE(t){if(t instanceof rr||t instanceof uh){const e=t.jt();this.GO=e.x.scaling,this.$O=-e.x.displacement,this.UO=e.y.scaling,this.YO=-e.y.displacement;const i=Math.fround(e.x.highPrecisionOffset),s=Math.fround(e.y.highPrecisionOffset);this.jO=i,this.HO=e.x.highPrecisionOffset-i,this.WO=s,this.XO=e.y.highPrecisionOffset-s}else t instanceof nr&&(this.MixedScaleXY=t.jt());return this}lE(){return[this.$O,this.YO]}aE(){return[this.GO,this.UO]}OO(){return[this.jO,this.WO]}zO(){return[this.HO,this.XO]}}class Ex{constructor(){this.GO=0,this.UO=0,this.ZO=0,this.$O=0,this.YO=0,this.JO=0}QO(t){return this.GO=t.q(),this.$O=t.getInnerStart()+.5*this.GO*t.tt(),this}KO(t){return this.UO=t.q(),this.YO=t.getInnerStart()+.5*this.UO*t.tt(),this}qO(t){return this.ZO=t.q(),this.JO=t.getInnerStart()+.5*this.ZO*t.tt(),this}aE(){return[this.GO,this.UO,this.ZO]}lE(){return[this.$O,this.YO,this.JO]}tz(t,e,i,s,r){const n=As(2*(t-i.x)/(i.width-i.x)-1,2*(e-i.y)/(i.height-i.y)-1),o=cx.multiply(s,[n.x,n.y,r,1]);return ws(o[0],o[1],o[2])}}class kx{constructor(t){this.PB=t}pu(t,e,i,s,r){let n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const o=this.PB,a=void 0===s;if(!(s=s||o.pE()))throw new wm("Could not bind a framebuffer.");const h=o.$R(),l=o.HR();o.cE(!1),o.JE(()=>{o.KR(0,0,i.x,i.y),t()},s,e,n),a&&o.bE(s),this.PB.QE(r),this.PB.KR(h.x,h.y,h.width,h.height),o.cE(l)}}class wx{constructor(t,e){this.iz=[],this.sz=[],this.uniform=t=>{const e=this.shader.uD(t);return this.sz.push({name:t,optional:!1}),e},this.uniformOptional=t=>{const e=this.shader.dD(t);return this.sz.push({name:t,optional:!0}),e},this.attribute=t=>{const e=this.shader.fD(t);return this.iz.push({name:t,location:e}),e},this.glUtils=t,this.shader=e}finish(t){for(const e of this.iz)this.glUtils.$E(e.location),this.glUtils.GE(e.location,0)}}class Mx extends ec{constructor(t,e,i,s,r){super(t,e,i,s),this.ez=new Map,this.hz=t,this.rz=e,this.PB=t.nz(),this.oz=r,this.rz=e}mu(){return this}pu(t,e){if(!this.oz||0!==t||0===this.ez.size)return{};let i=Array.from(this.ez.values()).map(t=>t.az.filter(t=>t.lz).map(t=>t.gs).flat().filter(t=>void 0!==t).filter(t=>t.getVisible())).flat();if(this.gi.Au&&(i=i.filter(t=>!(t instanceof lc))),0===i.length)return{};const s=this.oz;return this.PB.nO.yE(i,s),{}}Su(t,e,i,s,r){return{}}Er(){return this}Hi(){return 0}ji(){return 0}Xi(){return 0}Wi(){return 0}oc(){return 0}ac(){return 0}ps(t,e){const i={az:[]},s=(t,e)=>{const s={gs:t||[],lz:void 0===e||e};i.az.push(s);const r={ks:t=>(s.gs=t,r),Ls:t=>(s.lz=t,r),Ds:()=>s.lz};return r},r={};Object.keys(e).forEach(t=>{const i=e[t],n=i.shapes||[],o=void 0===i.themeEffectEnabled||i.themeEffectEnabled,a=s(n,o);r[t]=a});const n=l({iA:s},r);this.ez.set(t,i);const o=()=>{this.ez.delete(t),t.removeEventListener("dispose",o)};return Ur.requestAnimationFrame(()=>{t.addEventListener("dispose",o)}),n}}function Cx(t,e,i,s,r){let n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Math.floor(Math.sqrt(s>r?25*s:25*r));const o=Array(n+2),a=Math.PI;let h=0,l=0;const c=e*a/180,u=(i*a/180-c)/n;for(o[h]=As(t.x,t.y),h+=1;h<=n+1;)o[h]=As(t.x+s*Math.cos(c+l*u),t.y+r*Math.sin(c+l*u)),h+=1,l+=1;return[o,n]}const Tx=(t,e,i)=>((t,e,i)=>{const s=[];let r=0;const n=Bo(e,i/2);let o,a,h,l,c=t[t.length-1],u=0;for(let d=0;d<t.length;d+=1){o=t[d],a=d===t.length-1?t[0]:t[d+1],d>0&&(c=t[d-1]),Hr(o,c)&&(c=Lo(o,To(Bo(Do(a,o),-1)))),Hr(o,a)&&(a=Lo(o,To(Bo(Do(c,o),-1))));const i=Io(c,e),f=Io(o,e),g=Io(a,e),p=To(Do(f,i)),y=To(Do(g,f)),m=Lo(p,y),v=As(-m.y,m.x),x=As(-p.y,p.x),b=1/_o(v,x),S=Po(v),A=To(Do(p,y)),E=Math.sign(_o(v,A))||1,k=zo(v,Bo(n,b)),w=zo(v,Bo(n,-b));if(S<1||b===1/0){let t={x:0,y:0},e={x:0,y:0},i={x:0,y:0},h={x:0,y:0};const l=As(-y.y,y.x),d=Math.sign(_o(p,v))||E,f=zo(x,Bo(n,d)),g=zo(l,Bo(n,d));1===E?(t=f,e=w,i=g,h=w):(t=k,e=f,i=k,h=g);const m=4*mo(c,o),S=4*mo(o,a);(b>m||b>S)&&(1===E?(t=f,e=g,i=g,h=f):(t=g,e=f,i=f,h=g));const A=Lo(o,t),M=Lo(o,e),C=Lo(o,i),T=Lo(o,h);s[r]=A,r+=1,s[r]=M,r+=1,s[r]=C,r+=1,s[r]=T,r+=1,u=4}else{const t=Lo(o,k),e=Lo(o,w);s[r]=t,r+=1,s[r]=e,r+=1,u=2}l=h,h=t[d]}return s[r]=s[0],r+=1,s[r]=s[1],r+=1,[s,u,[l,h]]})(t,e,i)[0];class Fx extends fc{constructor(t,e,i,s,r){super(t,e,i,s,r),this.hD=new Ax,this.cz=oo,this.uz=oo,this.dz=gh({arcStyleSolid:()=>ha(this.Xe)&&this.Xe,arcStyleRadialGradient:()=>Ws(this.Xe)&&this.Xe,arcStyleLinearGradient:()=>qs(this.Xe)&&this.Xe}),this.hz=t,this.rz=e,this.PB=t.nz()}fz(t,e){let i=0,s=Array(0),r=0;if(void 0!==e){const r=t.length,n=Array(r+e.length);let o=0,a=0;for(;o<r;)n[a]=t[o],n[a+1]=e[o],a+=2,o+=1;s=n,i=this.PB.gl.TRIANGLE_STRIP}else s=t,i=this.PB.gl.TRIANGLE_FAN;const n=xn(s,this.oi.Ot());return r=s.length,[s,this.PB.iE(n),r,i]}Az(t,e,i,s){let r=Array(0);if(void 0===e)r=t;else{let i=0,s=0;const n=t.length;for(i=0,s=n,r=Array(n+e.length-2),e.reverse();i<n;)r[i]=t[i],r[s]=e[i],s+=1,i+=1}if(1===i||-1===i)return[xn(r,this.oi.Ot()),r.length];const n=Tx(r,s,i);return[xn(n,this.oi.Ot()),n.length]}Er(){const t=this.nl(),e=this.li.C();if(this.ol()){const i=Math.abs(this.$t.C()-this.Bc.C());this.hD.uE(this.oi);const s=this.oi.si()||t,r=this.oi.ri(),n=this.Dc.C(),o=this.Rc.C(),[a,h]=Cx(this.Cn.C(),this.Bc.C(),this.$t.C(),this.Dc.C(),this.Rc.C(),this.Oc.C()),l=this.Ec.C(),c=l>0?Cx(this.Cn.C(),this.Bc.C(),this.$t.C(),this.Dc.C()*l/100,this.Rc.C()*l/100,h)[0]:[this.Cn.C()],u=a.length-1;if(2===u){const t=(a[u-1].x+a[1].x)/2,e=(a[u-1].y+a[1].y)/2;this.zc=As(t,e)}else{const t=Math.floor(u/2);this.zc=As(a[t].x,a[t].y)}this.Vc=a[1];const d=a.length-1;this.Nc=a[d],this.Ec.C()&&(a.shift(),c.shift());let f=!1;(this.Cn.o||this.Bc.o||this.$t.o||this.Dc.o||this.Rc.o||this.Ec.o||this.Oc.o||s)&&(this.uz=Cs(As(this.Dl().x-n,this.Dl().y-o),As(this.Dl().x+n,this.Dl().y+o)),f=!0,this.Cn.o=!1,this.Bc.o=!1,this.$t.o=!1,this.Dc.o=!1,this.Rc.o=!1,this.Ec.o=!1,this.Oc.o=!1);const g=this.hl();(f||g)&&this.Xe!==sa&&(this.Ec.C()?(this.gz&&this.PB.gE(this.gz),[this.vz,this.gz,this.yz,this.pz]=this.fz(a,c)):(this.gz&&this.PB.gE(this.gz),[this.vz,this.gz,this.yz,this.pz]=this.fz(a,void 0)),Ws(this.Xe)?this.mz=ux(this.uz,this.oi,this.Xe.getPosition(),this.Xe.getExtent(),this.Xe.getShape(),this.PB.GR()):qs(this.Xe)?this.Sz=dx(this.uz,this.oi,this.Xe.getAngle(!0),this.PB.GR()):(this.mz=void 0,this.Sz=void 0));const p=this.dz.arcStyleSolid(g),y=this.dz.arcStyleLinearGradient(g),m=this.dz.arcStyleRadialGradient(g),v=p||y||m;g&&(this.bz=v?this.PB.eR(Bv["2D"],Bv.Color({dataType:Ws(this.Xe)||qs(this.Xe)?["gradient",this.Xe]:"uniform"}),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0})):void 0,this.al(this.Xe));const x=this.Ze;if(eh(x)&&(f||this.ul(x.getThickness())||s)){this.Ec.C()?360===i?(a.pop(),c.pop(),[this.xz,this.Mz]=this.Az(a,void 0,x.getThickness(),r),this.wz&&this.xz?this.PB.OE(this.wz,this.xz,!0):!this.wz&&this.xz?this.wz=this.PB.iE(this.xz,!0):this.wz&&!this.xz&&(this.PB.gE(this.wz),this.wz=void 0),[this._z,this.kz]=this.Az(c,void 0,x.getThickness(),r),this.Cz&&this._z?this.PB.OE(this.Cz,this._z,!0):!this.Cz&&this._z?this.Cz=this.PB.iE(this._z,!0):this.Cz&&!this._z&&(this.PB.gE(this.Cz),this.Cz=void 0)):([this.xz,this.Mz]=this.Az(a,c,x.getThickness(),r),this.wz&&this.xz?this.PB.OE(this.wz,this.xz,!0):!this.wz&&this.xz?this.wz=this.PB.iE(this.xz,!0):this.wz&&!this.xz&&(this.PB.gE(this.wz),this.wz=void 0),this._z&&(this.Cz&&this.PB.gE(this.Cz),this.Cz=void 0,this.kz=0)):(360===i&&(a.shift(),a.pop()),[this.xz,this.Mz]=this.Az(a,void 0,x.getThickness(),r),this.wz&&this.xz?this.PB.OE(this.wz,this.xz,!0):!this.wz&&this.xz?this.wz=this.PB.iE(this.xz,!0):this.wz&&!this.xz&&(this.PB.gE(this.wz),this.wz=void 0));const t=x.getFillStyle();Ws(t)?this.Tz=ux(this.uz,this.oi,t.getPosition(),t.getExtent(),t.getShape(),this.PB.GR()):qs(t)?this.Fz=dx(this.uz,this.oi,t.getAngle(!0),this.PB.GR()):(this.Tz=void 0,this.Fz=void 0),this.Iz=t===sa?void 0:this.PB.eR(Bv["2D"],Bv.Color({dataType:Ws(t)||qs(t)?["gradient",t]:"uniform"}),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0})),this.dl(x)}if(f){let t=1,e=1;eh(x)&&(t=x.getThickness()*r.x,e=x.getThickness()*r.y),this.cz=Cs(As(this.uz.min.x-t,this.uz.min.y-e),As(this.uz.max.x+t,this.uz.max.y+e))}this.Pz=e&&v?this.Pz||this.PB.eR(Bv["2D"],Bv.MousePicking(),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0})):void 0,this.Lz=e&&this.Ze!==Lr?this.Lz||this.PB.eR(Bv["2D"],Bv.MousePicking(),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0})):void 0}return this}pu(t,e){if(this.ol()){const i=1===t?this.Pz:this.bz,s=this.Xe,r=this.gz;i&&r&&this.PB.Hu(i).eE(i,(i,n,o,a)=>{if(this.PB.rE(i("uScale"),this.hD.aE()).rE(i("uDisp"),this.hD.lE()).rE(a("uScaleStart_highpart"),this.hD.OO()).rE(a("uScaleStart_lowpart"),this.hD.zO()).mO(o,r,this.oi.Ot(),void 0).oE(i("uIsHighlighted"),1===t||2===t?0:this.Ai).wI(i("uHighlightColorOffset"),1===t||2===t?Os:this.Si).oE(i("uRenderEffectMask"),2===t?1:0),1===t)this.PB.PE(i("uFirstId"),e).kO(o,1);else if(ha(s))this.PB.wI(i("uColor"),s.getColor());else if(Ws(s)){if(!this.mz)return!1;this.PB.gO(o,this.mz,s)}else if(qs(s)){if(!this.Sz)return!1;this.PB.vO(o,this.Sz,s)}return this.PB.Mk(this.pz,this.yz),!0});const n=this.Ze;eh(n)&&(void 0!==this.wz&&this.Bz(t,this.wz,this.Mz,n,e),void 0!==this.Cz&&this.Bz(t,this.Cz,this.kz,n,e))}return{idCount:1}}Su(t,e,i,s,r){return{}}Bz(t,e,i,s,r){const n=1===t?this.Lz:this.Iz,o=s.getFillStyle();n&&this.PB.Hu(n).eE(n,(n,a,h,l)=>{if(this.PB.rE(n("uScale"),this.hD.aE()).rE(n("uDisp"),this.hD.lE()).mO(h,e,this.oi.Ot(),void 0).oE(n("uIsHighlighted"),1===t||2===t?0:this.Ai).wI(n("uHighlightColorOffset"),1===t||2===t?Os:this.Si).oE(n("uRenderEffectMask"),2===t?1:0),1===t)this.PB.PE(n("uFirstId"),r).kO(h,1);else if(ha(o))this.PB.wI(n("uColor"),o.getColor());else if(Ws(o)){if(!this.Tz)return!1;this.PB.gO(h,this.Tz,o)}else if(qs(o)){if(!this.Fz)return!1;this.PB.vO(h,this.Fz,o)}const c=s.getThickness(),u=-1===c||1===c;return this.PB.Mk(u?this.PB.gl.LINE_LOOP:this.PB.gl.TRIANGLE_STRIP,i),!0})}mu(){return this.Dz&&(this.PB.gE(this.Dz),this.Dz=void 0),this.Rz&&(this.PB.gE(this.Rz),this.Rz=void 0),this.gz&&(this.PB.gE(this.gz),this.gz=void 0),this.wz&&(this.PB.gE(this.wz),this.wz=void 0),this.Cz&&(this.PB.gE(this.Cz),this.Cz=void 0),this.bz=void 0,this.Iz=void 0,this.Pz=void 0,this.Lz=void 0,this}Hi(){return this.uz.max.x}ji(){return this.uz.min.x}Xi(){return this.uz.max.y}Wi(){return this.uz.min.y}oc(){return Un(this.Ze)}ac(){return Un(this.Ze)}}class Px{constructor(){this.first=0,this.second=1,this.third=2,this.fourth=3,this.fifth=4,this.sixth=5}Ez(t){return this.first=t,this.second=t+1,this.third=t+2,this.fourth=t+3,this.fifth=t+4,this.sixth=t+5,t+=6,this}Oz(){return this.first=this.second,this.second=this.third,this.third=this.fourth,this.fourth=this.fifth,this.fifth=this.sixth,this.sixth+=1,this}zz(){return this.first=this.third,this.second=this.fourth,this.third=this.fifth,this.fourth=this.sixth,this.fifth=this.fourth+1,this.sixth=this.fifth+1,this}Vz(t){const e=t.buffer;let{position:i}=t;return e[i]=this.first,e[i+1]=this.second,e[i+2]=this.third,i+=3,t.position=i,t.next&&this.Oz(),this}Nz(t){const e=t.buffer;let{position:i}=t;return e[i]=this.first,e[i+1]=this.third,e[i+2]=this.second,e[i+3]=this.third,e[i+4]=this.fourth,e[i+5]=this.second,i+=6,t.position=i,t.next&&this.zz(),this}Gz(t,e){e.next=!0,6*t>=e.buffer.length&&(e.buffer=Array(6*t));for(let i=0;i<t;i+=1)this.Nz(e);return this}$z(){return[this.first,this.second,this.third,this.fourth,this.fifth,this.sixth]}}const Bx=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(new Px).Ez(t)}(),Lx=(t,e,i,s,r,n,o,a,h,l)=>(void 0===a&&void 0===o||Bx.Oz(),n.push(t,e),r.push(Bx.first,Bx.second,Bx.third),a=void 0,o=void 0,r.push(Bx.third,Bx.fourth,Bx.second),h=Bx.third,Bx.zz(),l&&n.push(i,s),[o,a,h]),Dx=(t,e,i,s,r,n,o,a,h,l,c)=>{void 0===h&&void 0===a||Bx.Oz(),o.push(t,e),r.push(Bx.first,Bx.second,Bx.third);const u=((t,e,i,s)=>{let r,n,o,a;if(e.x-t.x!=0||s.x-i.x!=0)return e.x-t.x==0?(o=e.x,n=(s.y-i.y)/(s.x-i.x),a=n*(o-i.x)+i.y):s.x-i.x==0?(o=s.x,r=(e.y-t.y)/(e.x-t.x),a=r*(o-t.x)+t.y):(r=(e.y-t.y)/(e.x-t.x),n=(s.y-i.y)/(s.x-i.x),o=(i.y-n*i.x+r*t.x-t.y)/(r-n),a=r*(o-t.x)+t.y),As(o,a)})(t,i,e,s);return h=void 0,void 0!==u&&(void 0===h&&(h=u),o.push(h),n.push(Bx.third,Bx.fourth,Bx.fifth),l=Bx.fourth),Bx.zz(),c&&o.push(i,s),[a,h,l]},zx=(t,e,i,s,r,n,o,a,h,l)=>(void 0===o&&void 0===n||Bx.Oz(),r.push(t,e),s.push(Bx.first,Bx.second,Bx.third),n=i,o=void 0,a=Bx.third,l?r.push(i):h=!0,[n,o,a,h]),Ix=(t,e,i,s,r,n,o,a,h,l,c)=>(0!==n.length?(void 0===a&&void 0===o||Bx.Oz(),Bx.Oz()):h>0&&(Bx.Oz(),c>0&&(c-=1)),n.push(t),r.push(Bx.first,Bx.second,Bx.third),h=Bx.second,o=t,a=void 0,l&&n.push(i,s),[o,a,h,c]),Rx=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Bx.Ez(e);const[i,s]=t,r=i.length,n=[],o=[],a=[];let h,l,c=e,u=0,d=i[u],f=s[u],g=i[u],p=s[u],y=!1,m=c>0?g.y!==p.y?2:1:0;if(r>1)for(;u<r-1;){g=d,p=f,u+=1,d=i[u],f=s[u];const t=u===r-1;g.y>p.y?d.y>f.y?[h,l,c]=Lx(g,p,d,f,n,a,h,l,c,t):d.y<f.y?[h,l,c]=Dx(g,p,d,f,n,o,a,h,l,c,t):[h,l,c,y]=zx(g,p,d,n,a,h,l,c,y,t):g.y<p.y?d.y<f.y?[h,l,c]=Lx(g,p,d,f,o,a,h,l,c,t):d.y>f.y?[h,l,c]=Dx(g,p,d,f,o,n,a,h,l,c,t):[h,l,c,y]=zx(g,p,d,o,a,h,l,c,y,t):d.y===f.y?(h=g,y&&(a.push(g),y=!1,Bx.Oz()),0===a.length&&c>0&&m>0&&(m-=1)):d.y>f.y?[h,l,c,m]=Ix(g,0,d,f,n,a,h,l,c,t,m):[h,l,c,m]=Ix(g,0,d,f,o,a,h,l,c,t,m)}return[a,new Uint16Array(n),new Uint16Array(o),c,m]};class _x extends dc{constructor(t,e,i,s,r){super(t,e,i,s,r),this.hD=new Ax,this.Uz=0,this.tc=Array(),this.Yz=0,this.jz=new Uint16Array(0),this.Wz=new Uint16Array(0),this.dz=gh({hightFillSolid:()=>ha(this.Xe)&&this.Xe,hightFillRadialGradient:()=>Ws(this.Xe)&&this.Xe,hightFillLinearGradient:()=>qs(this.Xe)&&this.Xe,hightFillPaletted:()=>fa(this.Xe)&&this.Xe,lowFillSolid:()=>ha(this.gc)&&this.gc,lowFillRadialGradient:()=>Ws(this.gc)&&this.gc,lowFillLinearGradient:()=>qs(this.gc)&&this.gc,lowFillPaletted:()=>fa(this.gc)&&this.gc}),this.hz=t,this.rz=e,this.PB=t.nz()}Er(){const t=this.nl(),e=this.li.C(),i=this.vc;if(this.ol()){this.hD.uE(this.oi);const s=i;if(s&&(this.Uz=0,this.jz=new Uint16Array(0),this.Wz=new Uint16Array(0),this.tc.length=0,this.Yz=0,this.uc>1)){const[t,e,i,s]=Rx([this.lc,this.cc]);this.Uz=s,this.jz=e,this.Wz=i,this.tc=t,this.Yz=t.length}if(this.Ac&&this.fc[0].length>1){const[t,e]=this.fc,i=t.length,[s,r,n,o,a]=Rx([t,e],this.Uz);this.Uz=o;const h=s.length;for(let l=a;l<h;l+=1)this.tc[this.Yz]=s[l],this.Yz+=1;this.jz=Go(this.jz,r),this.Wz=Go(this.Wz,n);for(let l=a>0||this.uc>0?1:a;l<i;l+=1)this.lc[this.uc]=t[l],this.cc[this.uc]=e[l],this.uc+=1;this.dc=!0,this.Ac=!1,this.fc=[]}const r=this.Xe,n=this.rl!==r,o=this.dz.hightFillSolid(n),a=this.dz.hightFillRadialGradient(n),h=this.dz.hightFillLinearGradient(n),l=this.dz.hightFillPaletted(n),c=o||a||h||l&&["x","y"].includes(l.getLookUpProperty())&&l,u=this.gc,d=this.Pc!==u,f=this.dz.lowFillSolid(d),g=this.dz.lowFillRadialGradient(d),p=this.dz.lowFillLinearGradient(d),y=this.dz.lowFillPaletted(d),m=f||g||p||y&&["x","y"].includes(y.getLookUpProperty())&&y;if((n||t)&&(this.Xz=c?this.PB.eR(Bv["2D"],Bv.Color({dataType:h?["gradient",h]:a?["gradient",a]:l?["lookup",l.getLookUpProperty(),l.lut]:"uniform"}),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0})):void 0),a?this.mz=ux(this.fi||this.sc,this.oi,a.getPosition(),a.getExtent(),a.getShape(),this.PB.GR()):h?this.Sz=dx(this.fi||this.sc,this.oi,h.getAngle(!0),this.PB.GR()):(this.mz=void 0,this.Sz=void 0),(d||t)&&(this.Zz=m?this.PB.eR(Bv["2D"],Bv.Color({dataType:p?["gradient",p]:g?["gradient",g]:y?["lookup",y.getLookUpProperty(),y.lut]:"uniform"}),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0})):void 0),g?this.Jz=ux(this.fi||this.sc,this.oi,g.getPosition(),g.getExtent(),g.getShape(),this.PB.GR()):p?this.Qz=dx(this.fi||this.sc,this.oi,p.getAngle(!0),this.PB.GR()):(this.Jz=void 0,this.Qz=void 0),(t||this.dc||s)&&this.dc||s){const t=this.tc,e=xn(t,this.oi.Ot());this.Kz=this.PB.iE(e,!1,this.Kz),c&&(this.qz=this.PB.zE(this.jz,this.qz),this.tV=this.jz.length),m&&(this.iV=this.PB.zE(this.Wz,this.iV),this.sV=this.Wz.length),this.dc=!1}this.Pz=e&&(m||c)?this.Pz||this.PB.eR(Bv["2D"],Bv.MousePicking(),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0})):void 0,this.al(this.Xe),this.Lc(this.gc),this.vc=!1}return this}pu(t,e){const i=this.Xe,s=this.gc,r=1===t?this.Pz:this.Zz;if(r&&this.Kz&&this.iV){const i=this.Kz,n=this.iV;this.PB.Hu(r).eE(r,(r,o,a,h)=>{if(this.PB.mO(a,i,this.oi.Ot(),void 0).jE(n).oE(r("uIsHighlighted"),1===t||2===t?0:this.Ai).wI(r("uHighlightColorOffset"),1===t||2===t?Os:this.Si).oE(r("uRenderEffectMask"),2===t?1:0),this.oi instanceof rr||this.oi instanceof uh?this.PB.rE(r("uScale"),this.hD.aE()).rE(r("uDisp"),this.hD.lE()).rE(h("uScaleStart_highpart"),this.hD.OO()).rE(h("uScaleStart_lowpart"),this.hD.zO()):this.oi instanceof nr&&this.PB.rE(h("uScaleStart"),this.hD.MixedScaleXY.uScaleStart).rE(h("uScaleStartLog"),this.hD.MixedScaleXY.uScaleStartLog).rE(h("uScaleInterval"),this.hD.MixedScaleXY.uScaleInterval).rE(h("uScaleIntervalLog"),this.hD.MixedScaleXY.uScaleIntervalLog).rE(r("uViewportStart"),this.hD.MixedScaleXY.uViewportStart).rE(r("uViewportSize"),this.hD.MixedScaleXY.uViewportSize),1===t)this.PB.PE(r("uFirstId"),e).kO(a,1);else if(ha(s))this.PB.wI(r("uColor"),s.getColor());else if(Ws(s)){if(!this.Jz)return!1;this.PB.gO(a,this.Jz,s)}else if(qs(s)){if(!this.Qz)return!1;this.PB.vO(a,this.Qz,s)}else if(fa(s)){const t=ph(s,this,void 0);if(!t&&s.lut.percentageValues)return!1;this.PB.BO(a,s.lut,t)}return this.PB.WE(this.sV),!0})}const n=1===t?this.Pz:this.Xz;if(n&&this.Kz&&this.qz){const s=this.Kz,r=this.qz;this.PB.Hu(n).eE(n,(n,o,a,h)=>{if(this.PB.mO(a,s,this.oi.Ot(),void 0).jE(r).oE(n("uIsHighlighted"),1===t||2===t?0:this.Ai).wI(n("uHighlightColorOffset"),1===t||2===t?Os:this.Si).oE(n("uRenderEffectMask"),2===t?1:0),this.oi instanceof rr||this.oi instanceof uh?this.PB.rE(n("uScale"),this.hD.aE()).rE(n("uDisp"),this.hD.lE()).rE(h("uScaleStart_highpart"),this.hD.OO()).rE(h("uScaleStart_lowpart"),this.hD.zO()):this.oi instanceof nr&&this.PB.rE(h("uScaleStart"),this.hD.MixedScaleXY.uScaleStart).rE(h("uScaleStartLog"),this.hD.MixedScaleXY.uScaleStartLog).rE(h("uScaleInterval"),this.hD.MixedScaleXY.uScaleInterval).rE(h("uScaleIntervalLog"),this.hD.MixedScaleXY.uScaleIntervalLog).rE(n("uViewportStart"),this.hD.MixedScaleXY.uViewportStart).rE(n("uViewportSize"),this.hD.MixedScaleXY.uViewportSize),1===t)this.PB.PE(n("uFirstId"),e).kO(a,1);else if(ha(i))this.PB.wI(n("uColor"),i.getColor());else if(Ws(i)){if(!this.mz)return!1;this.PB.gO(a,this.mz,i)}else if(qs(i)){if(!this.Sz)return!1;this.PB.vO(a,this.Sz,i)}else if(fa(i)){const t=ph(i,this,void 0);if(!t&&i.lut.percentageValues)return!1;this.PB.BO(a,i.lut,t)}return this.PB.WE(this.tV),!0})}return{idCount:1}}Su(t,e,i,s,r){return{}}Hi(){return this.sc.max.x}ji(){return this.sc.min.x}Xi(){return this.sc.max.y}Wi(){return this.sc.min.y}oc(){return 0}ac(){return 0}KS(t){this.kc()>0&&this.Er();const[e,i]=this.bc(),s=e.length>2&&e[1].x<e[0].x,r=dr(e,t,ur.NearestX,this.yc,this.mc,this.oi,this.gi.oi,this.sc,"x",s);if(void 0===r)return;const n=[e[r],i[r]];return Number.isNaN(n[0].y)||Number.isNaN(n[1].y)?void 0:n}yx(t){this.kc()>0&&this.Er();const[e,i]=this.bc(),s=e.length;if(0===s)return;const r=this.yc?1:0,n=s-(this.mc?2:1),o=e.length>2&&e[1].x<e[0].x,a=mr(e,hr(t,this.gi.oi,this.oi),"x",o,r,n);if(!a)return;const h=[xo(e[a.a],e[a.b],a.lerpAmount),xo(i[a.a],i[a.b],a.lerpAmount)];return Number.isNaN(h[0].y)||Number.isNaN(h[1].y)?void 0:h}dispose(){return super.dispose(),this.iV&&(this.PB.gE(this.iV),this.iV=void 0),this.qz&&(this.PB.gE(this.qz),this.qz=void 0),this.Kz&&(this.PB.gE(this.Kz),this.Kz=void 0),this}mu(){return this.dispose(),this}}class Vx extends fx{constructor(t,e){super(t),this.eV=e;const{vertices:i,indices:s,indicesCount:r,drawMode:n}=this.hV();this.rV=t.iE(i),this.nV=t.zE(s),this.oV=r,this.aV=n}Hu(t,e){return this.PB.hE(this.rV,0,{location:t.attribute("aSegmentPosition"),size:2},{location:t.attribute("aSegmentSide"),size:1},{location:e?t.attribute("aSegmentInside"):void 0,size:1}),this.PB.jE(this.nV),this}Mk(t,e){return this.PB.ZE(void 0!==e?e:this.aV,this.oV,0,t,this.PB.gl.UNSIGNED_BYTE),this}hV(){const t=[];[1,0].forEach(e=>{const i=1===e?.5*Math.PI:1.5*Math.PI;for(let s=0;s<=this.eV;s+=1){const r=i-s*Math.PI/this.eV;t.push(.5*Math.cos(r),.5*Math.sin(r),e,0)}}),t.push(0,0,1,1),t.push(0,0,0,1);const e=t.length/4,i=[];for(let s=0;s<this.eV;s+=1)i.push(s,s+1,e-2),i.push(s+e/2-1,s+e/2,e-1);return i.push(0,e-2,e-1),i.push(e-1,e-2,e/2-1),i.push(0,e-3,e-1),i.push(e/2-2,e-2,e/2-1),{vertices:new Float32Array(t),indices:new Uint8Array(i),indicesCount:i.length,verticesCount:e,drawMode:this.PB.gl.TRIANGLES}}wR(){this.PB.gE(this.rV),this.PB.gE(this.nV)}}const Nx=function(t,e){return((t,e)=>{let i=t.xE.mR.get(e);return i||(i=new Vx(t,e),t.xE.mR.set(e,i),i)})(t,!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?e>=50?8:e>=20?6:e>=7?4:e>=4?3:1===e?1:2:1)},Ox={lV:function(t,e,i,s,r,n){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;const{attribute:a}=s,h=e.gl;if(h.bindBuffer(h.ARRAY_BUFFER,i),t){const t=a("aLocationA_highpart"),i=a("aLocationA_lowpart"),s=a("aLocationB_highpart"),l=a("aLocationB_lowpart");h.vertexAttribPointer(t,2,h.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),e.GE(t,o),h.enableVertexAttribArray(t),h.vertexAttribPointer(i,2,h.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+2)*Float32Array.BYTES_PER_ELEMENT),e.GE(i,o),h.enableVertexAttribArray(i),h.vertexAttribPointer(s,2,h.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+r)*Float32Array.BYTES_PER_ELEMENT),e.GE(s,o),h.enableVertexAttribArray(s),h.vertexAttribPointer(l,2,h.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+r+2)*Float32Array.BYTES_PER_ELEMENT),e.GE(l,o),h.enableVertexAttribArray(l)}else{const t=a("aLocationA"),i=a("aLocationB");h.vertexAttribPointer(t,2,h.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),e.GE(t,o),h.enableVertexAttribArray(t),h.vertexAttribPointer(i,2,h.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+r)*Float32Array.BYTES_PER_ELEMENT),e.GE(i,o),h.enableVertexAttribArray(i)}},cV:(t,e,i,s,r,n,o,a)=>{const h=t.gl;h.bindBuffer(h.ARRAY_BUFFER,i),h.vertexAttribPointer(s,n,h.FLOAT,!1,o*Float32Array.BYTES_PER_ELEMENT,a*Float32Array.BYTES_PER_ELEMENT),t.GE(s,1),h.enableVertexAttribArray(s),h.vertexAttribPointer(r,n,h.FLOAT,!1,o*Float32Array.BYTES_PER_ELEMENT,(a+o)*Float32Array.BYTES_PER_ELEMENT),t.GE(r,1),h.enableVertexAttribArray(r)},uV:(t,e,i,s,r,n)=>{const{attribute:o}=s,a=e.gl;if(a.bindBuffer(a.ARRAY_BUFFER,i),t){const t=o("aLocationA_highpart"),i=o("aLocationA_lowpart"),s=o("aLocationB_highpart"),h=o("aLocationB_lowpart");a.vertexAttribPointer(t,2,a.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),e.GE(t,1),a.enableVertexAttribArray(t),a.vertexAttribPointer(i,2,a.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,(n+2)*Float32Array.BYTES_PER_ELEMENT),e.GE(i,1),a.enableVertexAttribArray(i),a.vertexAttribPointer(s,2,a.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,(n+r)*Float32Array.BYTES_PER_ELEMENT),e.GE(s,1),a.enableVertexAttribArray(s),a.vertexAttribPointer(h,2,a.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,(n+r+2)*Float32Array.BYTES_PER_ELEMENT),e.GE(h,1),a.enableVertexAttribArray(h)}else{const t=o("aLocationA"),i=o("aLocationB");a.vertexAttribPointer(t,2,a.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),e.GE(t,1),a.enableVertexAttribArray(t),a.vertexAttribPointer(i,2,a.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,(n+r)*Float32Array.BYTES_PER_ELEMENT),e.GE(i,1),a.enableVertexAttribArray(i)}},dV:(t,e,i,s,r,n,o,a,h,l)=>{const c=t.gl;c.bindBuffer(c.ARRAY_BUFFER,i),c.vertexAttribPointer(s,n,h,a,2*n*l,o*l),t.GE(s,1),c.enableVertexAttribArray(s),c.vertexAttribPointer(r,n,h,a,2*n*l,(o+n)*l),t.GE(r,1),c.enableVertexAttribArray(r)},pu:(t,e,i,s,r,n,o)=>{const a=t.nz(),{uniform:h,uniformOptional:l}=i,c=1/t.Fa.Pa,u=(r?Math.max(n,c):Math.max(n,0))+1;a.oE(h("uThicknessPixels"),u).oE(l("uAALimit"),1-(u-1)/u).rE(h("uRatioPxClip"),[2/t._t().x,2/t._t().y]),e.Hu(i,s).Mk(o)}},Yx={lV:(t,e,i,s,r,n)=>{const{attribute:o}=s,a=e.gl;if(a.bindBuffer(a.ARRAY_BUFFER,i),t){const t=o("aPos_highpart");a.vertexAttribPointer(t,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),a.enableVertexAttribArray(t);const e=o("aPos_lowpart");a.vertexAttribPointer(e,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+2)*Float32Array.BYTES_PER_ELEMENT),a.enableVertexAttribArray(e)}else{const t=o("aPos");a.vertexAttribPointer(t,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),a.enableVertexAttribArray(t)}},cV:(t,e,i,s,r,n)=>{const o=t.gl;o.bindBuffer(o.ARRAY_BUFFER,i),o.vertexAttribPointer(s,r,o.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(s)},uV:(t,e,i,s,r,n)=>{const{attribute:o}=s,a=e.gl;if(a.bindBuffer(a.ARRAY_BUFFER,i),t){const t=o("aPos_highpart"),e=o("aPos_lowpart");a.vertexAttribPointer(t,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),a.enableVertexAttribArray(t),a.vertexAttribPointer(e,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+2)*Float32Array.BYTES_PER_ELEMENT),a.enableVertexAttribArray(e)}else{const t=o("aPos");a.vertexAttribPointer(t,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),a.enableVertexAttribArray(t)}},fV:(t,e)=>{const i=t.nz();i.Mk(i.gl.LINE_STRIP,e,0)},AV:(t,e)=>{const i=t.nz();i.Mk(i.gl.LINES,2*e,0)}},Gx=function(t,e,i,s,r,n,o,a,h,l){let c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:o,u=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0;const d=t.gl;if(i){const i=e.attribute("".concat(r,"A_highpart").concat(n)),f=e.attribute("".concat(r,"A_lowpart").concat(n)),g=e.attribute("".concat(r,"B_highpart").concat(n)),p=e.attribute("".concat(r,"B_lowpart").concat(n));d.bindBuffer(d.ARRAY_BUFFER,s),d.vertexAttribPointer(i,o,h,a,2*c*l,2*u*l),d.vertexAttribPointer(f,o,h,a,2*c*l,(c+2*u)*l),t.GE(i,1),t.GE(f,1),d.enableVertexAttribArray(i),d.enableVertexAttribArray(f),d.vertexAttribPointer(g,o,h,a,2*c*l,(2*c+2*u)*l),d.vertexAttribPointer(p,o,h,a,2*c*l,(3*c+2*u)*l),t.GE(g,1),t.GE(p,1),d.enableVertexAttribArray(g),d.enableVertexAttribArray(p),d.bindBuffer(d.ARRAY_BUFFER,null)}else{const i=e.attribute("".concat(r,"A").concat(n)),f=e.attribute("".concat(r,"B").concat(n));d.bindBuffer(d.ARRAY_BUFFER,s),d.vertexAttribPointer(i,o,h,a,c*l,(0+u)*l),d.vertexAttribPointer(f,o,h,a,c*l,(c+u)*l),t.GE(i,1),t.GE(f,1),d.enableVertexAttribArray(i),d.enableVertexAttribArray(f),d.bindBuffer(d.ARRAY_BUFFER,null)}};class Xx extends yc{constructor(t,e,i,s,r){super(t,e,i,s,r),this.hD=new Ax,this.sc=oo,this.dz=gh({lineStyleSolid:()=>eh(this.iu)&&this.iu,lineStyleDashed:()=>nh(this.iu)&&this.iu,strokeFillSolid:()=>{const t=this.iu.getFillStyle();return ha(t)&&t},strokeFillLinearGradient:()=>{const t=this.iu.getFillStyle();return qs(t)&&t},strokeFillRadialGradient:()=>{const t=this.iu.getFillStyle();return Ws(t)&&t},strokeFillPaletted:()=>{const t=this.iu.getFillStyle();return fa(t)&&t}}),this.hz=t,this.rz=e,this.PB=t.nz(),this.gV=this.PB.iO}Er(){const t=this.ll(),e=this.iu,i=this.dz.lineStyleSolid(t),s=this.dz.lineStyleDashed(t),r=i||s,n=this.dz.strokeFillSolid(t),o=this.dz.strokeFillLinearGradient(t),a=this.dz.strokeFillRadialGradient(t),h=this.dz.strokeFillPaletted(t),l=n||o||a||h&&["x","y"].includes(h.getLookUpProperty())&&h,c=this.Ut(),u=this.Gt(),d=this.li.C(),f=this.li.o,g=e.Yi();if(s&&this.oi instanceof nr)return Ur.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;if(this.hD.uE(this.oi),this.ru&&(this.vV=this.PB.iE(xn([c,u],this.oi.Ot()),!1,this.vV),this.sc=Cs(As(c.x,c.y),As(u.x,u.y))),t||f){const t=this.ol()&&r&&l&&g>0,e=o?["gradient",o]:a?["gradient",a]:h?["lookup",h.getLookUpProperty(),h.lut]:"uniform";this.yV=t?{type:"triangulated",shader:this.PB.eR(Bv["2D"],Bv.Color({dataType:e}),Bv.LineInstanced2D({axisWorldTranslation:dh(this.oi),normalSource:void 0}),this.gV?Bv.AliasedEdge:void 0,s&&Bv.StippleTextureInstanced),mousePickingShader:d?this.PB.eR(Bv["2D"],Bv.MousePicking(),Bv.LineInstanced2D({axisWorldTranslation:dh(this.oi),normalSource:void 0}),s&&Bv.StippleTextureInstanced):void 0,geometry:Nx(this.PB,g),thickness:g,lineStyleSolid:i,lineStyleDashed:s,fillStyleSolid:n,fillStyleLinearGradient:o,fillStyleRadialGradient:a,fillStylePaletted:h}:void 0}if(a?this.Tz=ux(sc(this.sc,{x:this.oc(),y:this.ac()},this.oi),this.oi,a.getPosition(),a.getExtent(),a.getShape(),this.PB.GR()):o?this.Fz=dx(sc(this.sc,{x:this.oc(),y:this.ac()},this.oi),this.oi,o.getAngle(!0),this.PB.GR()):(this.Tz=void 0,this.Fz=void 0),s){if(t||this.ru){const t=[0,0,Math.abs(u.x-c.x),Math.abs(u.y-c.y)];this.pV=this.PB.iE(t,!1,this.pV)}this.mV=this.PB.FO(s.getPattern())}else this.pV&&(this.PB.gE(this.pV),this.pV=void 0),this.mV=void 0;return this.hu(e),this.ru=!1,this.li.o=!1,this}pu(t,e){var i,s;const r=this.vV;if(!r)return{};const n=this.yV;if(!n)return{};const{fillStyleSolid:o,fillStyleLinearGradient:a,fillStyleRadialGradient:h,fillStylePaletted:l,lineStyleDashed:c,thickness:u}=n,d=1===t?null===(i=this.yV)||void 0===i?void 0:i.mousePickingShader:null===(s=this.yV)||void 0===s?void 0:s.shader;return d?(this.PB.Hu(d).eE(d,(i,s,d,f)=>{if(this.PB.oE(i("uIsHighlighted"),1===t||2===t?0:this.Ai).wI(i("uHighlightColorOffset"),1===t||2===t?Os:this.Si).oE(i("uRenderEffectMask"),2===t?1:0),this.oi instanceof rr||this.oi instanceof uh?this.PB.rE(i("uScale"),this.hD.aE()).rE(i("uDisp"),this.hD.lE()).rE(f("uScaleStart_highpart"),this.hD.OO()).rE(f("uScaleStart_lowpart"),this.hD.zO()):this.oi instanceof nr&&this.PB.rE(f("uScaleStart"),this.hD.MixedScaleXY.uScaleStart).rE(f("uScaleStartLog"),this.hD.MixedScaleXY.uScaleStartLog).rE(f("uScaleInterval"),this.hD.MixedScaleXY.uScaleInterval).rE(f("uScaleIntervalLog"),this.hD.MixedScaleXY.uScaleIntervalLog).rE(i("uViewportStart"),this.hD.MixedScaleXY.uViewportStart).rE(i("uViewportSize"),this.hD.MixedScaleXY.uViewportSize),1===t)this.PB.PE(i("uFirstId"),e).kO(d,1);else if(o)this.PB.wI(i("uColor"),o.getColor());else if(h){if(!this.Tz)return!1;this.PB.gO(d,this.Tz,h)}else if(a){if(!this.Fz)return!1;this.PB.vO(d,this.Fz,a)}else if(l){const t=ph(l,this,void 0);if(!t&&l.lut.percentageValues)return!1;this.PB.BO(d,l.lut,t)}if(c){if(!this.pV||!this.mV)return!1;Ox.cV(this.PB,d,this.pV,s("aLengthSoFarA"),s("aLengthSoFarB"),2,2,0),this.PB.rE(i("uStippleCount"),[this.gi._t().x/this.mV.LO,this.gi._t().y/this.mV.LO]).oE(f("uStippleTextureWidthLimiter"),this.mV.PO/this.mV.LO).oE(i("uStippleScale"),c.getPatternScale()).nE(i("uStippleTexture"),this.mV.IO,1)}return Ox.lV(this.oi.Ot(),this.PB,r,d,this.oi.Ot()?4:2,0),Ox.pu(this.hz,n.geometry,d,this.gV&&1!==t,1===t,u,1),!0}),{idCount:1}):{}}Su(t,e,i,s,r){return{}}dispose(){return super.dispose(),this.yV=void 0,this.vV&&(this.PB.gE(this.vV),this.vV=void 0),this.pV&&(this.PB.gE(this.pV),this.pV=void 0),this.mV=void 0,this}mu(){return this}Hi(){return this.sc.max.x}ji(){return this.sc.min.x}Xi(){return this.sc.max.y}Wi(){return this.sc.min.y}oc(){return Un(this.iu)}ac(){return Un(this.iu)}}class Ux extends mc{constructor(t,e,i,s,r){super(t,e,i,s,r),this.SV=[],this.bV=!1,this.xV=!1,this.MV=!1,this.wV=!1,this._V=!1,this.hD=new Ax,this.sc=oo,this.dz=gh({lineStyleSolid:()=>eh(this.iu)&&this.iu,lineStyleDashed:()=>nh(this.iu)&&this.iu,lineFillSolid:()=>{const t=this.iu.getFillStyle();return ha(t)&&t},lineFillRadialGradient:()=>{const t=this.iu.getFillStyle();return Ws(t)&&t},lineFillLinearGradient:()=>{const t=this.iu.getFillStyle();return qs(t)&&t},lineIndividualPointFill:()=>{const t=this.iu.getFillStyle();return ca(t)&&t}}),this.hz=t,this.rz=e,this.PB=t.nz(),this.gV=this.PB.iO,this.kV=t.Fa.Ba}Go(){const t={Fs:e=>this.CV(t,e),Fi:e=>this.TV(t,e),yA:(e,i)=>this.FV(t,e,i),wI:e=>this.IV(t,e),Yt:{x:0,y:0},$t:{x:0,y:0},Ai:0,OP:void 0,PV:this.SV.length,VA:!0,LV:!0};return this.xV=!0,this.SV.push(t),t}zi(){return this.SV.length=0,this.bV=!0,this.gi.ki(this),this}BV(){return this.SV.length}C(t){const e=this.SV[t];return[e.Yt,e.$t]}Cv(){return this.SV}Ud(t){const e=this.SV.indexOf(t);e>=0&&(this.SV.splice(e,1),t.LV||(this.bV=!0),this.gi.ki(this))}CV(t,e){if(e&&!t.VA)t.PV=this.SV.length,this.SV.push(t);else if(!e){const e=this.SV.indexOf(t);this.SV.splice(e,1)}return t.VA=e,t.LV||(this.wV=!0),t}TV(t,e){return t.Ai=e,t.LV||(this.MV=!0),t}FV(t,e,i){return t.Yt=e,t.$t=i,t.LV||(this.bV=!0),t}IV(t,e){return t.OP=e,t.LV||(this._V=!0),t}Er(){const t=this.li.C(),e=this.li.o,i=this.ll(),s=this.iu,r=this.SV,n=this.MV,o=this.bV,a=this.wV,h=this._V,l=this.xV,c=this.dz.lineStyleSolid(i),u=this.dz.lineStyleDashed(i),d=c||u,f=this.dz.lineFillSolid(i),g=this.dz.lineIndividualPointFill(i),p=this.dz.lineFillRadialGradient(i),y=this.dz.lineFillLinearGradient(i),m=f||g||y||p,v=s.Yi(),x=u?"triangulated":s.getThickness()<0?"primitive":"triangulated";if(u&&this.oi instanceof nr)return Ur.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;this.hD.uE(this.oi);const b=this.ou,S=o||a,A=!S&&l;if(S||A){const t=S?r:r.filter(t=>t.LV),e=[],i=t.length;let s=ro,n=ro,o=no,a=no;for(let r=0;r<i;r+=1){const i=t[r];e.push(i.Yt),e.push(i.$t),s=Math.min(s,i.Yt.x,i.$t.x),n=Math.min(n,i.Yt.y,i.$t.y),o=Math.max(o,i.Yt.x,i.$t.x),a=Math.max(a,i.Yt.y,i.$t.y)}this.vV=this.PB.EE(this.vV,xn(e,this.oi.Ot()),b*(this.oi.Ot()?8:4),S,Float32Array),this.sc=A?Eo(this.sc,{min:{x:s,y:n},max:{x:o,y:a}}):{min:{x:s,y:n},max:{x:o,y:a}}}if(i||e){const e=f?"uniform":g?"attribute":y?["gradient",y]:p?["gradient",p]:void 0,i=d&&m&&v>0&&e;this.yV=i?"triangulated"===x?{type:"triangulated",shader:this.PB.eR(Bv["2D"],Bv.Color({dataType:e}),Bv.LineInstanced2D({axisWorldTranslation:dh(this.oi),normalSource:void 0,snapToNearestPixel:this.kV,ensureMinimumSegmentLength:void 0!==this.nu}),this.gV?Bv.AliasedEdge:void 0,u&&Bv.StippleTextureInstanced,Bv.AttributeHighlight),mousePicking:t?{shader:this.PB.eR(Bv["2D"],Bv.MousePicking({useAttribute:!0}),Bv.LineInstanced2D({axisWorldTranslation:dh(this.oi),normalSource:void 0,snapToNearestPixel:this.kV,ensureMinimumSegmentLength:void 0!==this.nu}),u&&Bv.StippleTextureInstanced,Bv.AttributeHighlight)}:void 0,geometry:Nx(this.PB,v,!1),thickness:v,lineStyleSolid:c,lineStyleDashed:u,fillStyleSolid:f,fillStyleIndividual:g,fillStyleLinearGradient:y,fillStyleRadialGradient:p}:{type:"primitive",shader:this.PB.eR(Bv["2D"],Bv.Color({dataType:e}),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0,snapToNearestPixel:this.kV}),Bv.AttributeHighlight),mousePicking:t?{shader:this.PB.eR(Bv["2D"],Bv.MousePicking({useAttribute:!0}),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0,snapToNearestPixel:this.kV}),Bv.AttributeHighlight)}:void 0,lineStyleSolid:c,lineStyleDashed:u,fillStyleSolid:f,fillStyleIndividual:g,fillStyleLinearGradient:y,fillStyleRadialGradient:p}:void 0}if(u){if(i||S||A){const t=S||i?r:r.filter(t=>t.LV),e=new Float32Array(4*t.length);let s=0;for(let i=0;i<t.length;i+=1){const r=t[i].Yt,n=t[i].$t;e[s]=0,e[s+1]=0,e[s+2]=Math.abs(n.x-r.x),e[s+3]=Math.abs(n.y-r.y),s+=4}this.pV=this.PB.EE(this.pV,e,4*b,S||i,Float32Array)}this.mV=this.PB.FO(u.getPattern())}else this.pV&&(this.PB.gE(this.pV.buffer),this.pV=void 0),this.mV=void 0;if(n||S||A){const t="triangulated"===x?1:2,e=S||n?r:r.filter(t=>t.LV),i=new Float32Array(e.length*t);let s=0;e.forEach(e=>{for(let r=0;r<t;r+=1)i[s+r]=e.Ai;s+=t}),this.DV=this.PB.EE(this.DV,i,b*t,S||n,Float32Array)}if((h||S||A||i)&&g){const t=S||h||i?r:r.filter(t=>t.LV),e=new Uint32Array(2*t.length);let s=0;t.forEach(t=>{const i=(t.OP||g.color).toUint32();for(let r=s;r<s+2;r+=1)e[r]=i;s+=2}),this.RV=this.PB.EE(this.RV,e,2*b,S||h,Uint32Array)}if(t){if(S||A||e){const t="triangulated"===x?1:2,i=S||e?r:r.filter(t=>t.LV),s=new Float32Array(i.length*t);let n=0;i.forEach(e=>{for(let i=0;i<t;i+=1)s[n+i]=e.PV||0;n+=t}),this.EV=this.PB.EE(this.EV,s,b*t,S,Float32Array)}}else this.EV&&(this.PB.gE(this.EV.buffer),this.EV=void 0);p?this.mz=ux(this.fi||this.sc,this.oi,p.getPosition(),p.getExtent(),p.getShape(),this.PB.GR()):y?this.Sz=dx(this.fi||this.sc,this.oi,y.getAngle(!0),this.PB.GR()):(this.mz=void 0,this.Sz=void 0),this.hu(s),this.MV=!1,this.wV=!1,this.bV=!1,this._V=!1,this.li.o=!1,this.xV=!1;for(const E of r)E.LV=!1;return this}pu(t,e){var i;const s=this.vV,r=this.DV,n=this.EV;if(!s||!r)return{};const o=this.yV;if(!o)return{};const{type:a,fillStyleSolid:h,fillStyleIndividual:l,fillStyleLinearGradient:c,fillStyleRadialGradient:u,lineStyleDashed:d}=o,f=1===t?null===(i=o.mousePicking)||void 0===i?void 0:i.shader:o.shader;return f?(this.PB.Hu(f).eE(f,(i,f,g,p)=>{if(this.oi instanceof rr||this.oi instanceof uh?this.PB.rE(i("uScale"),this.hD.aE()).rE(i("uDisp"),this.hD.lE()).rE(p("uScaleStart_highpart"),this.hD.OO()).rE(p("uScaleStart_lowpart"),this.hD.zO()):this.oi instanceof nr&&this.PB.rE(p("uScaleStart"),this.hD.MixedScaleXY.uScaleStart).rE(p("uScaleStartLog"),this.hD.MixedScaleXY.uScaleStartLog).rE(p("uScaleInterval"),this.hD.MixedScaleXY.uScaleInterval).rE(p("uScaleIntervalLog"),this.hD.MixedScaleXY.uScaleIntervalLog).rE(i("uViewportStart"),this.hD.MixedScaleXY.uViewportStart).rE(i("uViewportSize"),this.hD.MixedScaleXY.uViewportSize),this.kV&&this.PB.rE(p("uViewportSizePx"),[this.gi._t().x*this.PB.GR(),this.gi._t().y*this.PB.GR()]),void 0!==this.nu&&this.PB.rE(i("uMinSegmentPixelVector"),[this.nu.x,this.nu.y]),this.PB.wI(i("uHighlightColorOffset"),1===t||2===t?Os:this.Si).oE(i("uRenderEffectMask"),2===t?1:0),1===t){if(this.PB.PE(i("uFirstId"),e),!n)return!1;"triangulated"===a?this.PB.hE(n.buffer,1,{location:f("aPickingIdOffset"),size:1}):this.PB.YE(f("aPickingIdOffset"),n.buffer)}else if(h)this.PB.wI(i("uColor"),h.getColor());else if(l){if(!this.RV)return!1;if("triangulated"===a)Ox.dV(this.PB,g,this.RV.buffer,f("aColorA"),f("aColorB"),4,0,!0,this.PB.gl.UNSIGNED_BYTE,1);else{const t=f("aColor");this.PB.gl.bindBuffer(this.PB.gl.ARRAY_BUFFER,this.RV.buffer),this.PB.gl.vertexAttribPointer(t,4,this.PB.gl.UNSIGNED_BYTE,!0,0,0),this.PB.gl.enableVertexAttribArray(t)}}else if(u){if(!this.mz)return!1;this.PB.gO(g,this.mz,u)}else if(c){if(!this.Sz)return!1;this.PB.vO(g,this.Sz,c)}if(d){if(!this.pV||!this.mV)return!1;Ox.dV(this.PB,g,this.pV.buffer,f("aLengthSoFarA"),f("aLengthSoFarB"),2,0,!1,this.PB.gl.FLOAT,Float32Array.BYTES_PER_ELEMENT),this.PB.rE(i("uStippleCount"),[this.gi._t().x/this.mV.LO,this.gi._t().y/this.mV.LO]).oE(p("uStippleTextureWidthLimiter"),this.mV.PO/this.mV.LO).oE(i("uStippleScale"),d.getPatternScale()).nE(i("uStippleTexture"),this.mV.IO,0)}if("triangulated"===a){const{geometry:e,thickness:i}=o;Ox.uV(this.oi.Ot(),this.PB,s.buffer,g,this.oi.Ot()?4:2,0),this.PB.hE(r.buffer,1,{location:f("aIsHighlighted"),size:1}),Ox.pu(this.hz,e,g,this.gV&&1!==t,1===t,i,this.SV.length)}else Yx.uV(this.oi.Ot(),this.PB,s.buffer,g,this.oi.Ot()?4:2,0),this.PB.YE(f("aIsHighlighted"),r.buffer),Yx.AV(this.hz,this.SV.length);return!0}),{idCount:this.SV.length}):{}}dispose(){return super.dispose(),this.yV=void 0,this.vV&&(this.PB.gE(this.vV.buffer),this.vV=void 0),this.pV&&(this.PB.gE(this.pV.buffer),this.pV=void 0),this.DV&&(this.PB.gE(this.DV.buffer),this.DV=void 0),this.EV&&(this.PB.gE(this.EV.buffer),this.EV=void 0),this.RV&&(this.PB.gE(this.RV.buffer),this.RV=void 0),this.mV=void 0,this}Su(t,e,i,s,r){return{collectionMember:this.SV.find(i=>e+i.PV===t)}}mu(){return this}Fi(t){super.Fi(t);for(const e of this.SV)e.Fi(t);return this}Hi(){return this.sc.max.x}ji(){return this.sc.min.x}Xi(){return this.sc.max.y}Wi(){return this.sc.min.y}oc(){return Un(this.iu)}ac(){return Un(this.iu)}}class Hx{constructor(t,e){this.OV=!1,this.zV=!1,this.oi=t,this.VV=e,this.VV.Mi("DataPattern",t=>{"ProgressiveX"!==t.pattern&&"RegressiveX"!==t.pattern||(this.OV="x"),"ProgressiveY"!==t.pattern&&"RegressiveY"!==t.pattern||(this.OV="y"),"RegressiveX"!==t.pattern&&"RegressiveY"!==t.pattern||(this.zV=!0)})}calculateUserDataPointsProgressiveRange(t){if(0===t.length)throw new Error("calculateUserDataPointsProgressiveRange called with 0 data points");return{start:"x"===this.OV?t[0].x:t[0].y,end:"x"===this.OV?t[t.length-1].x:t[t.length-1].y}}calculateUserDataPointsBoundaries(t){return this.OV?"x"===this.OV?function(t){const e=t.length;if(e>0){const i=Math.max(t[e-1].x,t[0].x),s=Math.min(t[e-1].x,t[0].x);let r=t[0].y,n=t[0].y;for(let o=0;o<e;o+=1){const e=t[o];e.y>r&&(r=e.y),e.y<n&&(n=e.y)}return Cs(As(s,n),As(i,r))}return oo}(t):function(t){const e=t.length;if(e>0){const i=Math.max(t[e-1].y,t[0].y),s=Math.min(t[e-1].y,t[0].y);let r=t[0].x,n=t[0].x;for(let o=0;o<e;o+=1){const e=t[o];e.x>r&&(r=e.x),e.x<n&&(n=e.x)}return Cs(As(n,s),As(r,i))}return oo}(t):So(t)}calculateAvgStepBetweenDataPoints(t,e,i){return Math.abs(t-e)/(i-1)}}const jx=Math.min(1,1.5);class Wx extends Hx{constructor(t,e,i){super(t,e),this.NV=!1,this.GV={enabled:!1,totalDataPointsAtTime:0},this.$V=[],this.Bs=i,this.UV=t instanceof rr?{type:"linear",scale:t}:t instanceof nr?{type:"mixed",scale:t}:{type:"unknown"},this.VV.Mi("DataPattern",t=>{!1===t.allowDataGrouping&&(this.NV=!0)})}YV(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.NV||!this.OV||"linear"!==this.UV.type)return!1;!1===e&&this.jV&&(clearTimeout(this.jV),this.jV=void 0);const i="x"===this.OV?this.UV.scale.x.Uf:this.UV.scale.y.Uf;if(!i)throw new Error("CP helper has no information about Axis state.");const s=t.length;if(s<2)return!1;const r=t[0],n=t[s-1],o=this.calculateAvgStepBetweenDataPoints("x"===this.OV?r.x:r.y,"x"===this.OV?n.x:n.y,s),a=this.UV.scale,h=Math.abs("x"===this.OV?a.ri().x:a.ri().y),c=h/o,u=Math.floor(c*jx),d=u*o,f=Ur.performance.now(),g=!(f-i.$h<500)&&(i.Eh?f-i.Gh<1e3:f-i.Oh<2e3||i.Vh),p=s>2*this.GV.totalDataPointsAtTime;if(g&&!p)return this.jV=setTimeout(()=>this.HV(t),1e3),!1;const y=u>=10,m=this.GV.enabled?this.GV.columnWidthAxis/h<1.5:void 0,v=this.GV.enabled&&u>this.GV.dataPointsPerColumn?u/this.GV.dataPointsPerColumn>=2:void 0;let x;!0===this.GV.enabled?m?v&&(x={enabled:!0,columnWidthAxis:d,dataPointsPerColumn:u,totalDataPointsAtTime:s}):x=y?{enabled:!0,columnWidthAxis:d,dataPointsPerColumn:u,totalDataPointsAtTime:s}:{enabled:!1,totalDataPointsAtTime:s}:y&&(x={enabled:!0,columnWidthAxis:d,dataPointsPerColumn:u,totalDataPointsAtTime:s});const b=!1===e;return x?(b&&(this.GV=x),!0):(b&&(this.GV=l(l({},this.GV),{},{totalDataPointsAtTime:s})),!1)}WV(){this.XV=void 0,this.$V.length=0,this.jV&&(clearTimeout(this.jV),this.jV=void 0)}ZV(t){if(0===t.length)return t;if(this.NV||!this.OV||"linear"!==this.UV.type||!this.GV.enabled)return t;let e;e=this.$V.length>0?Tn(this.$V,t,{canReturnB:!0}):t;const i=e.length,s=[];let r,n,o=void 0===this.XV,a=-1,h=-1,l=0,c=0;if("x"!==this.OV||this.zV)if("x"===this.OV&&this.zV){const t=this.GV.columnWidthAxis;let u=this.XV?this.XV.x:e[0].x,d=u-t;for(let f=0;f<i;f+=1){const i=e[f];i.x>=d?((!r||i.y>r.y)&&(r=i,a=f),(!n||i.y<n.y)&&(n=i,h=f),c=f):(r&&n&&(o&&s.push(e[0]),a<h?s.push(r,n):s.push(n,r)),o=!1,u=i.x,d=u-t,r=i,a=f,n=i,h=f,l=f,c=f)}}else if("y"!==this.OV||this.zV){if("y"===this.OV&&this.zV){const t=this.GV.columnWidthAxis;let u=this.XV?this.XV.y:e[0].y,d=u-t;for(let f=0;f<i;f+=1){const i=e[f];i.y>=d?((!r||i.x>r.x)&&(r=i,a=f),(!n||i.x<n.x)&&(n=i,h=f),c=f):(n&&r&&(o&&s.push(e[0]),a<h?s.push(r,n):s.push(n,r)),o=!1,u=i.y,d=u-t,r=i,a=f,n=i,h=f,l=f,c=f)}}}else{const t=this.GV.columnWidthAxis;let u=this.XV?this.XV.y:e[0].y,d=u+t;for(let f=0;f<i;f+=1){const i=e[f];i.y<=d?((!r||i.x>r.x)&&(r=i,a=f),(!n||i.x<n.x)&&(n=i,h=f),c=f):(n&&r&&(o&&s.push(e[0]),a<h?s.push(r,n):s.push(n,r)),o=!1,u=i.y,d=u+t,r=i,a=f,n=i,h=f,l=f,c=f)}}else{const t=this.GV.columnWidthAxis;let u=this.XV?this.XV.x:e[0].x,d=u+t;for(let f=0;f<i;f+=1){const i=e[f];i.x<=d?((!r||i.y>r.y)&&(r=i,a=f),(!n||i.y<n.y)&&(n=i,h=f),c=f):(r&&n&&(o&&s.push(e[0]),a<h?s.push(r,n):s.push(n,r)),o=!1,u=i.x,d=u+t,r=i,a=f,n=i,h=f,l=f,c=f)}}if(r||n){const t=e.slice(l,c+1);this.$V=t}else this.$V.length=0;const u=s.length;return u>0&&(this.XV=s[u-1]),s}JV(t){var e,i;if(this.OV&&"linear"===this.UV.type){const s="x"===this.OV?this.UV.scale.x.Uf:this.UV.scale.y.Uf;if(!s)throw new Error("CP helper has no information about Axis state.");if((null===(e=s.Lr)||void 0===e?void 0:e.id)===sl||(null===(i=s.Lr)||void 0===i?void 0:i.id)===rl){const e=Math.abs("x"===this.OV?this.UV.scale.x.getInnerInterval():this.UV.scale.y.getInnerInterval());if(this.GV.enabled)return 2*e/this.GV.columnWidthAxis;const i=t.length,s=t[0],r=t[i-1];return e/this.calculateAvgStepBetweenDataPoints("x"===this.OV?s.x:s.y,"x"===this.OV?r.x:r.y,i)}}}QV(t,e,i){if(!this.OV)return e;const s=i.length;let r=yr(i,t.min,this.OV,this.zV,0,s-1);void 0===r&&(r=this.zV?s-1:0);let n=yr(i,t.max,this.OV,this.zV,0,s-1);return void 0===n&&(n=this.zV?0:s-1),1+Math.abs(n-r)}KV(){this.jV&&(clearTimeout(this.jV),this.jV=void 0)}HV(t){this.YV(t,!0)&&this.Bs()}}class Zx extends Hx{renderVisibleOnly(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=this.oi.x.getInnerStart(),r=this.oi.x.getInnerEnd(),n=Math.min(s,r),o=Math.max(s,r),a=this.oi.y.getInnerStart(),h=this.oi.y.getInnerEnd(),l=Math.min(a,h),c=Math.max(a,h);t.forEach((t,s)=>{t.existingCoordinatesCount<=1||!1===i&&(t.boundaries.max.x<n||t.boundaries.min.x>o||t.boundaries.max.y<l||t.boundaries.min.y>c)||e(t)})}}class Jx{constructor(t,e,i){this.qV=e,this.tN=i,this.iN=t,this.sN=[]}eN(t,e,i,s){const r=t.length;if(0===r)return;let n=t,o=r,a=this.iN[this.iN.length-1];do{const t=this.iN.length;let r;a||(a=this.hN(e,o)),a&&0==a.allocatedCoordinatesCount-a.existingCoordinatesCount&&(a=void 0);let h=0;if(this.tN&&t>0&&(void 0===a||0===a.existingCoordinatesCount)){const e=this.iN[t-1].lastDataPoint;e?(n.splice(0,0,e),h=1,o+=1):console.error("SegmentationHelper _connectSegments = true, but segment has no lastDataPoint information!")}if(a)r=Math.min(o,a.allocatedCoordinatesCount-a.existingCoordinatesCount),s(a,n.slice(0,r),r,h);else{const t=Math.ceil(e)+h;r=Math.min(t,o);const s=l(l({},i(t,n.slice(0,r),r,h)),{},{isDropped:!1});this.iN.push(s)}r>0&&(o>r?(n=n.slice(r),o=n.length):(n=[],o=0))}while(o>0);this.rN()}nN(t){const e=t,i=this.iN.indexOf(e);i>=0&&this.iN.splice(i,1),e.droppedTimestamp=Ur.performance.now(),this.sN.push(e)}oN(){this.iN.slice().forEach(t=>this.nN(t))}aN(){this.iN.forEach(t=>this.qV(t)),this.sN.forEach(t=>this.qV(t)),this.iN.length=0,this.sN.length=0}hN(t,e){const i=2*t/3,s=4*t/3,r=this.sN.findIndex(t=>t.allocatedCoordinatesCount>=i&&t.allocatedCoordinatesCount<=s);if(r>=0){const t=this.sN[r];return this.sN.splice(r,1),this.iN.push(t),t}}rN(){if(this.sN.length>5){const t=Ur.performance.now();for(let e=0;e<this.sN.length-5;e+=1){const i=this.sN[e];(void 0===i.droppedTimestamp||t-i.droppedTimestamp>=1e4)&&(this.qV(i),this.sN.splice(e,1),e-=1)}}}}class qx extends Hx{lN(t,e){if(!e||"object"!=typeof e)return 0;const i=this.oi.x.getInnerStart(),s=this.oi.x.getInnerEnd(),r=Math.min(i,s),n=Math.max(i,s),o=this.oi.y.getInnerStart(),a=this.oi.y.getInnerEnd(),h=Math.min(o,a),l=Math.max(o,a);if("maxDataPointCount"in e)return this.cN(t,e.maxDataPointCount,r,n,h,l);if("minDataPointCount"in e)return this.uN(t,e.minDataPointCount,r,n,h,l);if("progressiveDataCleaningThreshold"in e)return this.dN(t,e.progressiveDataCleaningThreshold,r,n,h,l);throw new Error("Unimplemented data cleaning configuration: ".concat(JSON.stringify(e)))}cN(t,e,i,s,r,n){if(void 0===e||e<=0)return 0;const o=t.reduce((t,e)=>t+e.existingDataPointsCount,0);if(o<=e)return 0;let a=0,h=o;for(let l=0;l<t.length;l+=1){const i=t[l];h>e&&(a+=1,h-=i.existingDataPointsCount)}return a}dN(t,e,i,s,r,n){if(void 0===e||!this.OV)return 0;let o=0;for(let a=0;a<t.length;a+=1){const h=t[a],l=this.zV?"x"===this.OV?h.boundaries.min.x>s:h.boundaries.min.y>n:"x"===this.OV?h.boundaries.max.x<i:h.boundaries.max.y<r;if(!((this.zV?"x"===this.OV?h.boundaries.min.x>e:h.boundaries.min.y>e:"x"===this.OV?h.boundaries.max.x<e:h.boundaries.max.y<e)&&l&&h.existingCoordinatesCount>2))break;o+=1}return o}uN(t,e,i,s,r,n){if(void 0===e||0===e)return 0;let o=0,a=0;for(let h=t.length-1;h>=0;h-=1){const l=t[h];if(a>e)if(this.OV){if(this.zV?"x"===this.OV?l.boundaries.min.x>s:l.boundaries.min.y>n:"x"===this.OV?l.boundaries.max.x<i:l.boundaries.max.y<r){o=1+h;break}}else l.boundaries.max.x<i||l.boundaries.min.x>s||l.boundaries.max.y<r||l.boundaries.min.y>n?o+=1:o=0;a+=l.existingDataPointsCount}return o}fN(t,e){const i=t.reduce((t,e)=>Eo(t,e.boundaries),oo);if(e&&"progressiveDataCleaningThreshold"in e&&e.progressiveDataCleaningThreshold){const t=e.progressiveDataCleaningThreshold;"x"!==this.OV||this.zV?"x"===this.OV&&this.zV?i.max.x=Math.min(i.max.x,t):"y"!==this.OV||this.zV?"y"===this.OV&&this.zV&&(i.max.y=Math.min(i.max.y,t)):i.min.y=Math.max(i.min.y,t):i.min.x=Math.max(i.min.x,t)}return i}}class Qx extends vc{constructor(t,e,i,s,r,n){super(t,e,i,s,r),this.hD=new Ax,this.ix=[],this.AN=new Zx(this.oi,this),this.gN=new Wx(this.oi,this,()=>this.gi.Bs()),this.vN=new Jx(this.ix,t=>{t.coordsBuffer&&this.PB.gE(t.coordsBuffer),t.pV&&this.PB.gE(t.pV)},!0),this.yN=new qx(this.oi,this),this.pN=0,this.mN=0,this.SN=!1,this.dz=gh({lineStyleSolid:()=>eh(this.iu)&&this.iu,lineStyleDashed:()=>nh(this.iu)&&this.iu,strokeFillSolid:()=>{const t=this.iu.getFillStyle();return ha(t)&&t},strokeFillLinearGradient:()=>{const t=this.iu.getFillStyle();return qs(t)&&t},strokeFillRadialGradient:()=>{const t=this.iu.getFillStyle();return Ws(t)&&t},strokeFillPaletted:()=>{const t=this.iu.getFillStyle();return fa(t)&&t}}),this.rz=e,this.Fa=n,this.yV={type:"none"},this.PB=t.nz(),this.hz=t,this.gV=this.PB.iO;const o=this.oi.Ot(),a=!0===(null==n?void 0:n.individualLookupValuesEnabled);let h,l,c,u=0;o||(h=u,u+=2),o&&(l=u,u+=4),a&&(c=u,u+=1);const d=((t,e)=>e?(e,i)=>((t,e)=>{if(!e){const e=t.length,i=new Float32Array(3*e);for(let s=0,r=0;s<e;s+=1){const e=t[s];i[r+0]=e.x,i[r+1]=e.y,i[r+2]=void 0!==e.value?e.value:0,r+=3}return i}const i=t.length,s=new Float32Array(5*i);let r=0;for(let n=0;n<i;n+=1){const e=t[n],i=Math.fround(e.x),o=Math.fround(e.y);s[r+0]=i,s[r+1]=o,s[r+2]=e.x-i,s[r+3]=e.y-o,s[r+4]=void 0!==e.value?e.value:0,r+=5}return s})(e,t):(e,i)=>xn(e,t,Float32Array))(o,a);this.bN={individualLookupValuesEnabled:a,attributesPerVertex:u,attributeOffsetCoordinateLowPrecision:h,attributeOffsetCoordinateHighPrecision:l,attributeOffsetLookUpValue:c,prepareRenderData:(t,e)=>d(t,this.iu.getFillStyle())}}xN(t,e,i){const s=new Float32Array(2*e);let r=0,n=i||t[0];for(let o=0;o<e;o+=1){const e=t[o];this.pN+=Math.abs(n.x-e.x),this.mN+=Math.abs(n.y-e.y),s[r]=this.pN,s[r+1]=this.mN,r+=2,n=e}return s}Er(){const t=this.vc,e=this.iu,i=this.ll(),s=this.fc,r=s.length,n=r>0,o=this.li.C(),a=this.li.o,h=this.dz.lineStyleSolid(i),l=this.dz.lineStyleDashed(i),c=h||l,u=c&&c.getThickness(),d=this.dz.strokeFillSolid(i),f=this.dz.strokeFillLinearGradient(i),g=this.dz.strokeFillRadialGradient(i),p=this.dz.strokeFillPaletted(i),y=d||f||g||p,m=this.bN.individualLookupValuesEnabled;if(l&&this.oi instanceof nr)return Ur.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;n&&(this.au=Tn(this.au,s,{canReturnB:!0}),this.lu+=r);let v=this.cu.o;const x=this.yN.lN(this.ix,this.cu.C());if(x>0){let t=0;for(let e=0;e<x;e+=1){const e=this.ix[0];t+=e.existingDataPointsCount,e.existingDataPointsCount=0,e.existingCoordinatesCount=0,e.jointPointsCount=0,e.boundaries=oo,e.lastDataPoint=void 0,this.vN.nN(e)}this.au=this.au.slice(t),this.lu=this.au.length,v=!0}let b=s,S=!1;(this.gN.YV(this.au)||t)&&(S=!0),l&&!this.SN?(S=!0,this.SN=!0,this.vN.aN()):!l&&this.SN&&(this.ix.forEach(t=>{t.pV&&(this.PB.gE(t.pV),t.pV=void 0)}),this.SN=!1),S&&(this.gN.WV(),this.ix.forEach(t=>{t.existingDataPointsCount=0,t.existingCoordinatesCount=0,t.jointPointsCount=0,t.boundaries=oo,t.lastDataPoint=void 0}),this.vN.oN(),b=this.au,this.pN=0,this.mN=0);const A=this.gN.ZV(b),E=A.length;if(E>0){let t=this.gN.JV(this.au)||(this.Mi("ApplicationType",t=>"InternalUI"===t.type)?this.lu:1e5);E/t>10&&(t=E/10),this.vN.eN(A,t,(t,e,i,s)=>{const r=this.AN.calculateUserDataPointsBoundaries(e),n=this.gN.QV(r,i,this.au)-s;return this.MN=e[i-1],{allocatedCoordinatesCount:t,existingDataPointsCount:n,existingCoordinatesCount:i,jointPointsCount:s,boundaries:r,coordsBuffer:this.PB.DE(t*this.bN.attributesPerVertex,this.bN.prepareRenderData(e,i)),lastDataPoint:e[i-1],pV:this.SN?this.PB.DE(2*t,this.xN(e,i,this.MN)):void 0}},(t,e,i,s)=>{const r=Eo(t.boundaries,this.AN.calculateUserDataPointsBoundaries(e)),n=this.gN.QV(r,t.existingCoordinatesCount+i,this.au)-(t.jointPointsCount+s);this.PB.RE(t.coordsBuffer,t.existingCoordinatesCount*this.bN.attributesPerVertex,this.bN.prepareRenderData(e,i)),this.SN&&t.pV&&this.PB.RE(t.pV,2*t.existingCoordinatesCount,this.xN(e,i,this.MN)),this.MN=e[i-1],t.jointPointsCount+=s,t.lastDataPoint=e[i-1],t.existingDataPointsCount=n,t.existingCoordinatesCount+=i,t.boundaries=r})}if(v&&(this.sc=this.yN.fN(this.ix,this.cu.C())),this.hD.uE(this.oi),g?this.Tz=ux(this.fi||this.sc,this.oi,g.getPosition(),g.getExtent(),g.getShape(),this.PB.GR()):f?this.Fz=dx(this.fi||this.sc,this.oi,f.getAngle(!0),this.PB.GR()):(this.Tz=void 0,this.Fz=void 0),i||a){if(p&&"value"===p.getLookUpProperty()&&!m){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw Ur.alert(t),new Error(t)}if(y&&c&&!1!==u){const t=-1===u?"primitive":"triangulated",e=f?["gradient",f]:g?["gradient",g]:p?["lookup",p.getLookUpProperty(),p.lut]:"uniform";this.yV="primitive"===t?{type:t,shader:this.PB.eR(Bv["2D"],Bv.Color({dataType:e}),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0}),l&&Bv.StippleTexture),mousePickingShader:o?this.PB.eR(Bv["2D"],Bv.MousePicking({useVertexId:!0}),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0}),l&&Bv.StippleTexture):void 0,lineStyleSolid:h,lineStyleDashed:l,fillStyleSolid:d,fillStyleLinearGradient:f,fillStyleRadialGradient:g,fillStylePaletted:p}:"triangulated"===t?{type:t,shader:this.PB.eR(Bv["2D"],Bv.Color({dataType:e}),Bv.LineInstanced2D({axisWorldTranslation:dh(this.oi),normalSource:void 0}),this.gV?Bv.AliasedEdge:void 0,l&&Bv.StippleTextureInstanced),mousePickingShader:o?this.PB.eR(Bv["2D"],Bv.MousePicking(),Bv.LineInstanced2D({axisWorldTranslation:dh(this.oi),normalSource:void 0}),l&&Bv.StippleTextureInstanced):void 0,geometry:Nx(this.PB,u),thickness:u,lineStyleSolid:h,lineStyleDashed:l,fillStyleSolid:d,fillStyleLinearGradient:f,fillStyleRadialGradient:g,fillStylePaletted:p}:{type:"none"}}else this.yV={type:"none"}}return this.mV=l?this.PB.FO(l.getPattern()):void 0,this.hu(e),this.vc=!1,this.fc=[],this.li.o=!1,this}pu(t,e){const i=this.PB.gl,s=this.yV;if(!s||"none"===s.type)return{};const r=1===t?s.mousePickingShader:s.shader;if(!r)return{};const{lineStyleDashed:n,fillStyleSolid:o,fillStyleLinearGradient:a,fillStyleRadialGradient:h,fillStylePaletted:l}=s;return this.PB.Hu(r).eE(r,(r,c,u,d)=>{let f=!1;if(this.PB.oE(r("uIsHighlighted"),1===t||2===t?0:this.Ai).wI(r("uHighlightColorOffset"),1===t||2===t?Os:this.Si).oE(r("uRenderEffectMask"),2===t?1:0),this.oi instanceof rr||this.oi instanceof uh?this.PB.rE(r("uScale"),this.hD.aE()).rE(r("uDisp"),this.hD.lE()).rE(d("uScaleStart_highpart"),this.hD.OO()).rE(d("uScaleStart_lowpart"),this.hD.zO()):this.oi instanceof nr&&this.PB.rE(d("uScaleStart"),this.hD.MixedScaleXY.uScaleStart).rE(d("uScaleStartLog"),this.hD.MixedScaleXY.uScaleStartLog).rE(d("uScaleInterval"),this.hD.MixedScaleXY.uScaleInterval).rE(d("uScaleIntervalLog"),this.hD.MixedScaleXY.uScaleIntervalLog).rE(r("uViewportStart"),this.hD.MixedScaleXY.uViewportStart).rE(r("uViewportSize"),this.hD.MixedScaleXY.uViewportSize),1===t);else if(o)this.PB.wI(r("uColor"),o.getColor());else if(h){if(!this.Tz)return!1;this.PB.gO(u,this.Tz,h)}else if(a){if(!this.Fz)return!1;this.PB.vO(u,this.Fz,a)}else if(l){const t=ph(l,this,void 0);if(!t&&l.lut.percentageValues)return!1;this.PB.BO(u,l.lut,t)}const g=$n(e);return this.AN.renderVisibleOnly(this.ix,e=>{const{coordsBuffer:o}=e;if(!o)return;if(1===t){const[t,i]=g.ts(e.existingDataPointsCount);this.PB.PE(r("uFirstId"),t),"triangulated"===s.type?this.PB.kO(u,i):this.PB.wO(u,i)}i.bindBuffer(i.ARRAY_BUFFER,o);const a="triangulated"===s.type?Ox.lV:Yx.lV;if(this.oi.Ot()||void 0===this.bN.attributeOffsetCoordinateLowPrecision?this.oi.Ot()&&void 0!==this.bN.attributeOffsetCoordinateHighPrecision&&a(!0,this.PB,o,u,this.bN.attributesPerVertex,this.bN.attributeOffsetCoordinateHighPrecision):a(!1,this.PB,o,u,this.bN.attributesPerVertex,this.bN.attributeOffsetCoordinateLowPrecision),n){if(!e.pV||!this.mV)return;"triangulated"===s.type?Ox.cV(this.PB,u,e.pV,c("aLengthSoFarA"),c("aLengthSoFarB"),2,2,0):Yx.cV(this.PB,u,e.pV,c("aLengthSoFar"),2,0),this.PB.rE(r("uStippleCount"),[this.gi._t().x/this.mV.LO,this.gi._t().y/this.mV.LO]).oE(d("uStippleTextureWidthLimiter"),this.mV.PO/this.mV.LO).oE(r("uStippleScale"),n.getPatternScale()).nE(r("uStippleTexture"),this.mV.IO,1)}if(l&&"value"===l.lookUpProperty&&void 0!==this.bN.attributeOffsetLookUpValue&&1!==t)if("triangulated"===s.type){const t=c("aLookupValueA");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.bN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.bN.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),this.PB.GE(t,1),i.enableVertexAttribArray(t);const e=c("aLookupValueB");i.vertexAttribPointer(e,1,i.FLOAT,!1,this.bN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,(this.bN.attributeOffsetLookUpValue+this.bN.attributesPerVertex)*Float32Array.BYTES_PER_ELEMENT),this.PB.GE(e,1),i.enableVertexAttribArray(e)}else{const t=c("aLookupValue");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.bN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.bN.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),i.enableVertexAttribArray(t)}if("triangulated"===s.type){const{thickness:i}=s;Ox.pu(this.hz,s.geometry,u,this.gV&&1!==t,1===t,i,e.existingCoordinatesCount-1)}else Yx.fV(this.hz,e.existingCoordinatesCount);f=!0},void 0===this.ls),i.bindBuffer(i.ARRAY_BUFFER,null),f}),{idCount:this.lu}}Su(t,e,i,s,r){return{}}Sc(t,e){return Array.isArray(t)||(t=[t]),this.fc=Tn(this.fc,t,{canReturnB:!0}),this.sc=Eo(this.sc,e||e||this.AN.calculateUserDataPointsBoundaries(t)),this}zi(){return super.zi(),this.pN=0,this.mN=0,this.MN=void 0,this}dispose(){return super.dispose(),this.vN.aN(),this.gN.KV(),this.yV={type:"none"},this.mV=void 0,this}mu(){return this}KS(t){this.kc()>0&&this.Er();const e=this.bc(),i=dr(e,t,this.xi(),this.yc,this.mc,this.oi,this.engine.oi,this.sc,this.AN.OV,this.AN.zV);return void 0!==i?e[i]:void 0}yx(t){this.kc()>0&&this.Er();const e=this.bc(),i=e.length;if(0===i)return;const s=this.yc?1:0,r=i-(this.mc?2:1),n=this.xi();if(n===ur.Nearest){let s,r,n=ro;for(let o=0;o<i;o+=1){const i=hr(e[o],this.oi,this.gi.oi);if(void 0!==r){const e=po(r,i,t),o=(e.x-t.x)**2+(e.y-t.y)**2;o<n&&(n=o,s=e)}r=i}return void 0!==s?hr(s,this.gi.oi,this.oi):void 0}if("x"===this.AN.OV&&n===ur.NearestX||"y"===this.AN.OV&&n===ur.NearestY){const i=mr(e,hr(t,this.gi.oi,this.oi),this.AN.OV,this.AN.zV,s,r);return i?xo(e[i.a],e[i.b],i.lerpAmount):void 0}return this.KS(t)}Hi(){return this.sc.max.x}ji(){return this.sc.min.x}Xi(){return this.sc.max.y}Wi(){return this.sc.min.y}oc(){return Un(this.iu)}ac(){return Un(this.iu)}}class Kx extends hc{constructor(t,e,i,s,r){super(t,e,i,s,r),this.yV={fill:void 0,border:void 0},this.hD=new Ax,this.sc=oo,this.wN=!1,this._N=!1,this.kN=!1,this.CN=!1,this.TN=!1,this.Gd=[],this.dz=gh({polygonStyleSolid:()=>ha(this.Xe)&&this.Xe,polygonStyleImage:()=>Pr(this.Xe)&&this.Xe,polygonStyleRadialGradient:()=>Ws(this.Xe)&&this.Xe,polygonStyleLinearGradient:()=>qs(this.Xe)&&this.Xe,polygonStylePaletted:()=>fa(this.Xe)&&this.Xe,polygonStyleIndividual:()=>ca(this.Xe)&&this.Xe,lineStyleSolid:()=>eh(this.Ze)&&this.Ze,lineStyleDashed:()=>nh(this.Ze)&&this.Ze,lineStyleFilled:()=>{const t=this.Ze&&this.Ze.getFillStyle();return ha(t)&&t}}),this.hz=t,this.rz=e,this.PB=t.nz(),this.gV=this.PB.iO}Go(){const t={Fs:e=>this.CV(t,e),Fi:e=>this.TV(t,e),rc:e=>this.FN(t,e),vS:e=>this.IN(t,e),wI:e=>this.IV(t,e),tc:[],S:void 0,PN:void 0,Ai:0,VA:!0,LN:this.Gd.length};return this.Gd.push(t),t}zi(){return this.Gd.length=0,this.wN=!0,this.gi.ki(this),this}Cv(){return this.Gd}Ud(t){const e=this.Gd.indexOf(t);e>=0&&(this.Gd.splice(e,1),this.TN=!0,this.gi.ki(this,t))}CV(t,e){return t.VA=e,this.TN=!0,t.VA||this.gi.ki(this,t),t}TV(t,e){return t.Ai=e,this.CN=!0,t}FN(t,e){return t.tc=e,this.wN=!0,t}IN(t,e){return t.S=e,this._N=!0,t}IV(t,e){return t.PN=null==e?void 0:e.toUint32(),this.kN=!0,t}Er(){const t=this.li.C(),e=this.li.o,i=this.hl(),s=this.CN,r=this.wN,n=this._N,o=this.kN,a=this.TN,h=this.Ze,l=this.ll(),c=this.Gd.filter(t=>t.VA&&t.tc.length>0);if(this.hD.uE(this.oi),(r||a)&&(this.sc=Eo(...c.map(t=>So(t.tc)))),r||a){const t=c.map(t=>[...t.tc,t.tc[0],{x:Number.NaN,y:Number.NaN}]).flat(),e=xn(t,!1,Float64Array),i=this.oi.Ot()?xn(t,!0):e;this.vV=this.PB.iE(i,!1,this.vV);let s=[];c.reduce((t,i)=>{const r=t,n=2*(i.tc.length+1),o=new Float64Array(e.buffer,r,n),a=xs(o,void 0,2),h=t/(2*Float64Array.BYTES_PER_ELEMENT);for(let e=0;e<a.length;e+=1)a[e]+=h;return s=Tn(s,a,{canReturnB:!0}),r+(n+2)*Float64Array.BYTES_PER_ELEMENT},0);const r=new Uint32Array(s);this.DN=this.PB.zE(r,this.DN),this.RN=r.length,this.EN=e.length/2-1}const u=this.dz.polygonStyleSolid(i),d=this.dz.polygonStylePaletted(i),f=this.dz.polygonStyleIndividual(i),g=this.dz.polygonStyleRadialGradient(i),p=this.dz.polygonStyleLinearGradient(i),y=this.dz.polygonStyleImage(i),m=u||d||p||g||y||f,v=this.dz.lineStyleSolid(l),x=this.dz.lineStyleDashed(i),b=v||x,S=this.dz.lineStyleFilled(l),A=S,E=b&&Math.max(b.getThickness(),0);if((i||l||e)&&(this.yV.fill=m?{shader:this.PB.eR(Bv["2D"],u&&Bv.Color({dataType:"uniform"}),p&&Bv.Color({dataType:["gradient",p]}),g&&Bv.Color({dataType:["gradient",g]}),d&&Bv.Color({dataType:["lookup",d.getLookUpProperty(),d.lut]}),f&&Bv.Color({dataType:"attribute"}),y&&Bv.Color({dataType:["image",y]}),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0}),Bv.AttributeHighlight),mousePicking:t?{shader:this.PB.eR(Bv["2D"],Bv.MousePicking({useAttribute:!0}),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0}),Bv.AttributeHighlight)}:void 0,fillStyleSolid:u,fillStyleLinearGradient:p,fillStyleRadialGradient:g,fillStylePaletted:d,fillStyleImage:y,fillStyleIndividual:f}:void 0,this.yV.border=b&&A&&"number"==typeof E&&0!==E?{shader:this.PB.eR(Bv["2D"],Bv.Color({dataType:"uniform"}),Bv.LineInstanced2D({axisWorldTranslation:dh(this.oi),normalSource:void 0}),this.gV?Bv.AliasedEdge:void 0,x&&Bv.StippleTextureInstanced,Bv.AttributeHighlight),geometry:Nx(this.PB,E),mousePicking:t?{shader:this.PB.eR(Bv["2D"],Bv.MousePicking({useAttribute:!0}),Bv.LineInstanced2D({axisWorldTranslation:dh(this.oi),normalSource:void 0}),x&&Bv.StippleTextureInstanced,Bv.AttributeHighlight)}:void 0,fillStyleSolid:S,lineStyleDashed:x,thickness:E}:void 0),s||r){const t=c.reduce((t,e)=>t+e.tc.length+2,0),e=new Float32Array(t);let i=0;c.forEach(t=>{const s=t.tc.length+2;for(let r=i;r<i+s;r+=1)e[r]=t.Ai;i+=s}),this.ON=this.PB.iE(e,!0,this.ON)}if(t){if(r){const t=c.reduce((t,e)=>t+e.tc.length+2,0),e=new Float32Array(t);let i=0;c.forEach(t=>{const s=t.tc.length+2;for(let r=i;r<i+s;r+=1)e[r]=t.LN;i+=s}),this.zN=this.PB.iE(e,!1,this.zN)}}else this.zN&&(this.PB.gE(this.zN),this.zN=void 0);if(n||r&&d&&"value"===d.getLookUpProperty()){const t=c.reduce((t,e)=>t+e.tc.length+2,0),e=new Float32Array(t);let i=0;const s={min:ro,max:no};c.forEach(t=>{const r=void 0!==t.S?t.S:zr,n=t.tc.length+2;for(let s=i;s<i+n;s+=1)e[s]=r;i+=n,void 0!==t.S&&(s.min=Math.min(s.min,r),s.max=Math.max(s.max,r))}),this.VN=s,this.NN=this.PB.iE(e,!1,this.NN)}if(o||r&&f){const t=c.reduce((t,e)=>t+e.tc.length+2,0),e=new Uint32Array(t);let i=0;const s=f?f.getFallbackColor().toUint32():Ns.toUint32();c.forEach(t=>{const r=void 0!==t.PN?t.PN:s,n=t.tc.length+2;for(let s=i;s<i+n;s+=1)e[s]=r;i+=n}),this.GN=this.PB.iE(e,!1,this.GN,Uint32Array)}if(g?this.mz=ux(this.fi||this.sc,this.oi,g.getPosition(),g.getExtent(),g.getShape(),this.PB.GR()):p?this.Sz=dx(this.fi||this.sc,this.oi,p.getAngle(!0),this.PB.GR()):(this.mz=void 0,this.Sz=void 0),x){if(r){const t=c.reduce((t,e)=>t+e.tc.length,2*c.length),e=new Float32Array(2*t);let i=0;c.forEach(t=>{let s=t.tc[0],r=0,n=0;for(const o of t.tc)r+=Math.abs(o.x-s.x),n+=Math.abs(o.y-s.y),e[i]=r,e[i+1]=n,i+=2,s=o;e[i+0]=r+Math.abs(t.tc[0].x-s.x),e[i+1]=n+Math.abs(t.tc[0].y-s.y),e[i+2]=Number.NaN,e[i+3]=Number.NaN,i+=4}),this.pV=this.PB.iE(e,!1,this.pV)}this.mV=this.PB.FO(x.getPattern())}else this.pV&&(this.PB.gE(this.pV),this.pV=void 0),this.mV=void 0;return this.$N=this.PB.DO(this,this.$N,y,void 0,r||a||this.oi.si(),(t,e,i)=>this.UN(t,e,i,c)),this.CN=!1,this.TN=!1,this.wN=!1,this._N=!1,this.kN=!1,this.li.o=!1,this.al(this.Xe),this.dl(h),this}wi(){return this.VN}pu(t,e){var i,s;const{fill:r,border:n}=this.yV,o=this.vV,a=this.ON,h=this.zN;if(!o||!a)return{};if(r){const{fillStyleSolid:s,fillStyleLinearGradient:n,fillStyleRadialGradient:l,fillStylePaletted:c,fillStyleImage:u,fillStyleIndividual:d}=r,f=this.DN,g=this.RN,p=1===t?null===(i=r.mousePicking)||void 0===i?void 0:i.shader:r.shader;p&&o&&f&&void 0!==g&&this.PB.Hu(p).eE(p,(i,r,p,y)=>{if(this.oi instanceof rr||this.oi instanceof uh?this.PB.rE(i("uScale"),this.hD.aE()).rE(i("uDisp"),this.hD.lE()).rE(y("uScaleStart_highpart"),this.hD.OO()).rE(y("uScaleStart_lowpart"),this.hD.zO()):this.oi instanceof nr&&this.PB.rE(y("uScaleStart"),this.hD.MixedScaleXY.uScaleStart).rE(y("uScaleStartLog"),this.hD.MixedScaleXY.uScaleStartLog).rE(y("uScaleInterval"),this.hD.MixedScaleXY.uScaleInterval).rE(y("uScaleIntervalLog"),this.hD.MixedScaleXY.uScaleIntervalLog).rE(i("uViewportStart"),this.hD.MixedScaleXY.uViewportStart).rE(i("uViewportSize"),this.hD.MixedScaleXY.uViewportSize),this.PB.mO(p,o,this.oi.Ot(),void 0).jE(f).YE(r("aIsHighlighted"),a).wI(i("uHighlightColorOffset"),1===t||2===t?Os:this.Si).oE(i("uRenderEffectMask"),2===t?1:0),1===t){if(this.PB.PE(i("uFirstId"),e),!h)return!1;this.PB.YE(r("aPickingIdOffset"),h)}else if(s)this.PB.wI(i("uColor"),s.getColor());else if(l){if(!this.mz)return!1;this.PB.gO(p,this.mz,l)}else if(n){if(!this.Sz)return!1;this.PB.vO(p,this.Sz,n)}else if(c){const t=ph(c,this,this.VN);if(!t&&c.lut.percentageValues)return!1;if(this.PB.BO(p,c.lut,t),"value"===c.getLookUpProperty()){if(!this.NN)return!1;this.PB.YE(r("aLookupValue"),this.NN)}}else if(u){if(!this.$N)return!1;this.PB.wI(y("uColor"),u.getSurroundingColor()).nE(i(tv),this.$N.texture.zR()||this.$N.sourceMissingTexture,0).hE(this.$N.texCoordsBuffer,void 0,{location:r("aTextureCoord"),size:2}).LE(u.fitMode)}else if(d){if(!this.GN)return!1;const t=r("aColor");this.PB.gl.bindBuffer(this.PB.gl.ARRAY_BUFFER,this.GN),this.PB.gl.vertexAttribPointer(t,4,this.PB.gl.UNSIGNED_BYTE,!0,0,0),this.PB.gl.enableVertexAttribArray(t)}return this.PB.WE(g,void 0,void 0,this.PB.gl.UNSIGNED_INT),!0})}if(n){const{geometry:i,fillStyleSolid:r,thickness:l,lineStyleDashed:c}=n,u=this.EN,d=1===t?null===(s=n.mousePicking)||void 0===s?void 0:s.shader:n.shader;d&&o&&u&&this.PB.Hu(d).eE(d,(s,n,d,f)=>{if(this.oi instanceof rr||this.oi instanceof uh?this.PB.rE(s("uScale"),this.hD.aE()).rE(s("uDisp"),this.hD.lE()).rE(f("uScaleStart_highpart"),this.hD.OO()).rE(f("uScaleStart_lowpart"),this.hD.zO()):this.oi instanceof nr&&this.PB.rE(f("uScaleStart"),this.hD.MixedScaleXY.uScaleStart).rE(f("uScaleStartLog"),this.hD.MixedScaleXY.uScaleStartLog).rE(f("uScaleInterval"),this.hD.MixedScaleXY.uScaleInterval).rE(f("uScaleIntervalLog"),this.hD.MixedScaleXY.uScaleIntervalLog).rE(s("uViewportStart"),this.hD.MixedScaleXY.uViewportStart).rE(s("uViewportSize"),this.hD.MixedScaleXY.uViewportSize),this.PB.hE(a,1,{location:n("aIsHighlighted"),size:1}).wI(s("uHighlightColorOffset"),1===t||2===t?Os:this.Si).oE(s("uRenderEffectMask"),2===t?1:0),1===t){if(this.PB.PE(s("uFirstId"),e),!h)return!1;this.PB.YE(n("aPickingIdOffset"),h,1)}else r&&this.PB.wI(s("uColor"),r.getColor());if(c){if(!this.mV||!this.pV)return!1;Ox.cV(this.PB,d,this.pV,n("aLengthSoFarA"),n("aLengthSoFarB"),2,2,0),this.PB.rE(s("uStippleCount"),[this.gi._t().x/this.mV.LO,this.gi._t().y/this.mV.LO]).oE(f("uStippleTextureWidthLimiter"),this.mV.PO/this.mV.LO).oE(s("uStippleScale"),c.getPatternScale()).nE(s("uStippleTexture"),this.mV.IO,1)}return Ox.lV(this.oi.Ot(),this.PB,o,d,this.oi.Ot()?4:2,0),Ox.pu(this.hz,i,d,this.gV&&1!==t,1===t,l,u),!0})}return{idCount:this.Gd.length}}UN(t,e,i,s){const r=hr({x:this.sc.min.x,y:this.sc.min.y},this.oi,this.gi.oi),n=hr({x:this.sc.max.x,y:this.sc.max.y},this.oi,this.gi.oi),o={x:Math.abs(r.x-n.x),y:Math.abs(r.y-n.y)},a=yx(t,e,o.x,o.y,i),h=a[1],l=a[4],c=a[6],u=a[7],d=s.reduce((t,e)=>t+e.tc.length+2,0),f=new Float32Array(2*d),g=this.sc.max.x-this.sc.min.x,p=this.sc.max.y-this.sc.min.y,y=l-c,m=u-h;let v=0;for(const x of s){for(const i of x.tc){const t=c+y*((i.x-this.sc.min.x)/g),e=h+m*((i.y-this.sc.min.y)/p);f[v]=t,f[v+1]=e,v+=2}const t=c+y*((x.tc[0].x-this.sc.min.x)/g),e=h+m*((x.tc[0].y-this.sc.min.y)/p);f[v]=t,f[v+1]=e,v+=2,f[v]=Number.NaN,f[v+1]=Number.NaN,v+=2}return f}Su(t,e,i,s,r){return{collectionMember:this.Gd.find(i=>e+i.LN===t)}}mu(){return this.DN&&(this.PB.gE(this.DN),this.DN=void 0),this.vV&&(this.PB.gE(this.vV),this.vV=void 0),this.ON&&(this.PB.gE(this.ON),this.ON=void 0),this.zN&&(this.PB.gE(this.zN),this.zN=void 0),this.NN&&(this.PB.gE(this.NN),this.NN=void 0),this.GN&&(this.PB.gE(this.GN),this.GN=void 0),this.pV&&(this.PB.gE(this.pV),this.pV=void 0),this.yV={fill:void 0,border:void 0},this.$N=this.PB.RO(this,this.$N),this}Hi(){return this.sc.max.x}ji(){return this.sc.min.x}Xi(){return this.sc.max.y}Wi(){return this.sc.min.y}oc(){return Un(this.Ze)}ac(){return Un(this.Ze)}}class $x extends cc{constructor(t,e,i,s,r){super(t,e,i,s,r),this.hD=new Ax,this.YN=oo,this.dz=gh({fillStyleSolid:()=>ha(this.Xe)&&this.Xe,fillStyleRadialGradient:()=>Ws(this.Xe)&&this.Xe,fillStyleLinearGradient:()=>qs(this.Xe)&&this.Xe,fillStyleImage:()=>Pr(this.Xe)&&this.Xe,strokeStyleSolid:()=>eh(this.Ze)&&this.Ze,strokeFillSolid:()=>{const t=this.Ze.getFillStyle();return ha(t)&&t},strokeFillLinearGradient:()=>{const t=this.Ze.getFillStyle();return qs(t)&&t},strokeFillRadialGradient:()=>{const t=this.Ze.getFillStyle();return Ws(t)&&t}}),this.UN=(t,e,i)=>{const s=hr(this.Dl(),this.oi,this.gi.oi),r=Do(hr(Lo(this.Dl(),this._t()),this.oi,this.gi.oi),s);return yx(t,e,r.x,r.y,i)},this.hz=t,this.rz=e,this.PB=t.nz(),this.rz=e}Er(){super.Er();const t=this.li.C(),e=this.hl(),i=this.Cn.o||this.U.o||this.Sl.o||this.xl.o,s=this.Ze,r=this.ll(),n=s.getThickness(),o=this.Sl.C();this.hD.uE(this.oi);const a=this.oi.si();if(i){const t=this.U.C();this.tc=function(t,e,i,s,r){const n=((t,e,i)=>[t,As(t.x+e,t.y),As(t.x+e,t.y+i),As(t.x,t.y+i)])(t,e,i);if(0!==s||s%360!=0){const t=s*Math.PI/180;n[0]=Mo(n[0],r,t),n[1]=Mo(n[1],r,t),n[2]=Mo(n[2],r,t),n[3]=Mo(n[3],r,t)}return n}(this.Cn.C(),t.x,t.y,o,this.xl.C());const e=xn(this.tc,this.oi.Ot());this.gz=this.PB.iE(e,!1,this.gz),this.yz=this.tc.length,this.YN=So(this.tc)}const h=this.dz.fillStyleSolid(e),l=this.dz.fillStyleRadialGradient(e),c=this.dz.fillStyleLinearGradient(e),u=this.dz.fillStyleImage(e),d=h||l||c||u;e&&(this.bz=d?this.PB.eR(Bv["2D"],h&&Bv.Color({dataType:"uniform"}),c&&Bv.Color({dataType:["gradient",c]}),l&&Bv.Color({dataType:["gradient",l]}),u&&Bv.Color({dataType:["image",u]}),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0})):void 0),l?this.mz=ux(this.fi||this.YN,this.oi,l.getPosition(),l.getExtent(),l.getShape(),this.PB.GR()):c?this.Sz=dx(this.fi||this.YN,this.oi,c.getAngle(!0),this.PB.GR()):(this.mz=void 0,this.Sz=void 0),this.$N=this.PB.DO(this,this.$N,u,void 0,a||i,this.UN);const f=this.dz.strokeStyleSolid(r),g=this.dz.strokeFillSolid(r),p=this.dz.strokeFillLinearGradient(r),y=this.dz.strokeFillRadialGradient(r),m=f,v=g||p||y;if(m&&(i||r||a&&1!==n)){if(1===n||-1===n)[this.xz,this.jN]=[this.tc,void 0];else{const t=this.oi;[this.xz,this.jN]=t instanceof nr?((t,e,i)=>{const s=t[0],r=t[1],n=t[2],o=t[3],a=e/2;return[[i.ni(s,r,a,-a),i.ni(r,s,-a,-a),i.ni(o,n,-a,-a),i.ni(n,o,a,-a),i.ni(s,r,-a,a),i.ni(r,s,a,a),i.ni(o,n,a,a),i.ni(n,o,-a,a)],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.tc,n,t):((t,e,i)=>{const s=t[0],r=t[1],n=t[2],o=t[3],a=As(e.x*i*.5,e.y*i*.5),h=To(Co(r,s)),l=To(Co(o,s)),c=Ro(h),u=Ro(l);return[[Lo(s,Lo(Bo(c,a.x),Bo(u,a.y))),Lo(r,Lo(Bo(h,a.x),Bo(u,a.y))),Lo(o,Lo(Bo(c,a.x),Bo(l,a.y))),Lo(n,Lo(Bo(h,a.x),Bo(l,a.y))),Lo(s,Lo(Bo(h,a.x),Bo(l,a.y))),Lo(r,Lo(Bo(c,a.x),Bo(l,a.y))),Lo(o,Lo(Bo(h,a.x),Bo(u,a.y))),Lo(n,Lo(Bo(c,a.x),Bo(u,a.y)))],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.tc,t.ri(),n)}this.wz=this.PB.iE(xn(this.xz,this.oi.Ot()),!1,this.wz),this.jN?(this.nV=this.PB.zE(new Uint16Array(this.jN),this.nV),this.Mz=this.jN.length):(this.nV&&this.PB.gE(this.nV),this.nV=void 0,this.Mz=this.xz.length)}return r&&(this.Iz=m&&v?this.PB.eR(Bv["2D"],Bv.Color({dataType:y?["gradient",y]:p?["gradient",p]:"uniform"}),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0})):void 0),y?this.Tz=ux(this.YN,this.oi,y.getPosition(),y.getExtent(),y.getShape(),this.PB.GR()):p?this.Fz=dx(this.YN,this.oi,p.getAngle(!0),this.PB.GR()):(this.Tz=void 0,this.Fz=void 0),this.Pz=t&&d?this.Pz||this.PB.eR(Bv["2D"],Bv.MousePicking(),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0})):void 0,this.Lz=t&&this.Ze!==Lr?this.Lz||this.PB.eR(Bv["2D"],Bv.MousePicking(),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0})):void 0,this.al(this.Xe),this.dl(s),this.Cn.o=!1,this.Sl.o=!1,this.U.o=!1,this.xl.o=!1,this}pu(t,e){const i=1===t?this.Pz:this.bz,s=this.gz,r=this.yz,n=this.dz.fillStyleSolid(!1),o=this.dz.fillStyleRadialGradient(!1),a=this.dz.fillStyleLinearGradient(!1),h=this.dz.fillStyleImage(!1);i&&s&&r&&this.Xe!==sa&&(this.PB.Hu(i),this.PB.eE(i,(i,l,c,u)=>{if(this.oi instanceof rr||this.oi instanceof uh?this.PB.rE(i("uScale"),this.hD.aE()).rE(i("uDisp"),this.hD.lE()).rE(u("uScaleStart_highpart"),this.hD.OO()).rE(u("uScaleStart_lowpart"),this.hD.zO()):this.oi instanceof nr&&this.PB.rE(u("uScaleStart"),this.hD.MixedScaleXY.uScaleStart).rE(u("uScaleStartLog"),this.hD.MixedScaleXY.uScaleStartLog).rE(u("uScaleInterval"),this.hD.MixedScaleXY.uScaleInterval).rE(u("uScaleIntervalLog"),this.hD.MixedScaleXY.uScaleIntervalLog).rE(i("uViewportStart"),this.hD.MixedScaleXY.uViewportStart).rE(i("uViewportSize"),this.hD.MixedScaleXY.uViewportSize),1===t)this.PB.PE(i("uFirstId"),e).kO(c,1);else if(n)this.PB.wI(i("uColor"),n.getColor());else if(o){if(!this.mz)return!1;this.PB.gO(c,this.mz,o)}else if(a){if(!this.Sz)return!1;this.PB.vO(c,this.Sz,a)}else if(h){if(!this.$N)return!1;const t=this.$N&&this.$N.texture.zR();this.PB.wI(u("uColor"),h.getSurroundingColor()).nE(i(tv),t||this.$N.sourceMissingTexture,0).hE(this.$N.texCoordsBuffer,void 0,{location:l("aTextureCoord"),size:2}).LE(h.fitMode)}return this.PB.oE(i("uIsHighlighted"),1===t||2===t?0:this.Ai).wI(i("uHighlightColorOffset"),1===t||2===t?Os:this.Si).oE(i("uRenderEffectMask"),2===t?1:0).mO(c,s,this.oi.Ot(),void 0).Mk(this.PB.gl.TRIANGLE_FAN,r),!0}));const l=1===t?this.Lz:this.Iz,c=this.dz.strokeStyleSolid(!1),u=this.dz.strokeFillSolid(!1),d=this.dz.strokeFillLinearGradient(!1),f=this.dz.strokeFillRadialGradient(!1),g=this.wz;return l&&g&&c&&(this.PB.Hu(l),this.PB.eE(l,(i,s,r,n)=>{if(this.oi instanceof rr||this.oi instanceof uh?this.PB.rE(i("uScale"),this.hD.aE()).rE(i("uDisp"),this.hD.lE()).rE(n("uScaleStart_highpart"),this.hD.OO()).rE(n("uScaleStart_lowpart"),this.hD.zO()):this.oi instanceof nr&&this.PB.rE(n("uScaleStart"),this.hD.MixedScaleXY.uScaleStart).rE(n("uScaleStartLog"),this.hD.MixedScaleXY.uScaleStartLog).rE(n("uScaleInterval"),this.hD.MixedScaleXY.uScaleInterval).rE(n("uScaleIntervalLog"),this.hD.MixedScaleXY.uScaleIntervalLog).rE(i("uViewportStart"),this.hD.MixedScaleXY.uViewportStart).rE(i("uViewportSize"),this.hD.MixedScaleXY.uViewportSize),1===t)this.PB.PE(i("uFirstId"),e).kO(r,1);else if(u)this.PB.wI(i("uColor"),u.getColor());else if(f){if(!this.Tz)return!1;this.PB.gO(r,this.Tz,f)}else if(d){if(!this.Fz)return!1;this.PB.vO(r,this.Fz,d)}return this.PB.oE(i("uIsHighlighted"),1===t||2===t?0:this.Ai).wI(i("uHighlightColorOffset"),1===t||2===t?Os:this.Si).oE(i("uRenderEffectMask"),2===t?1:0).mO(r,g,this.oi.Ot(),void 0),this.nV?this.PB.jE(this.nV).WE(this.Mz):this.PB.Mk(this.PB.gl.LINE_LOOP,this.Mz),!0})),{idCount:1}}Su(t,e,i,s,r){return{}}mu(){return this.nV&&(this.PB.gE(this.nV),this.nV=void 0),this.gz&&(this.PB.gE(this.gz),this.gz=void 0),this.wz&&(this.PB.gE(this.wz),this.wz=void 0),this.$N=this.PB.RO(this,this.$N),this.bz=void 0,this.Iz=void 0,this.Pz=void 0,this.Lz=void 0,this}Hi(){return Math.max(this.Cn.C().x,this.Cn.C().x+this.U.C().x)}ji(){return Math.min(this.Cn.C().x,this.Cn.C().x+this.U.C().x)}Xi(){return Math.max(this.Cn.C().y,this.Cn.C().y+this.U.C().y)}Wi(){return Math.min(this.Cn.C().y,this.Cn.C().y+this.U.C().y)}oc(){return Un(this.Ze)}ac(){return Un(this.Ze)}}class tb extends uc{constructor(t,e,i,s,r){super(t,e,i,s,r),this.hD=new Ax,this.dz=gh({fillStyleSolid:()=>ha(this.Xe)&&this.Xe,fillStylePaletted:()=>fa(this.Xe)&&this.Xe,fillStyleRadialGradient:()=>Ws(this.Xe)&&this.Xe,fillStyleLinearGradient:()=>qs(this.Xe)&&this.Xe,fillStyleImage:()=>Pr(this.Xe)&&this.Xe,strokeLineStyleSolid:()=>eh(this.Ze)&&this.Ze,strokeLineSolidFill:()=>{const t=this.Ze.getFillStyle();return ha(t)&&t},strokeLinearGradientFill:()=>{const t=this.Ze.getFillStyle();return qs(t)&&t},strokeRadialGradientFill:()=>{const t=this.Ze.getFillStyle();return Ws(t)&&t}}),this.UN=(t,e,i)=>{const s=hr({x:this.sc.min.x,y:this.sc.min.y},this.oi,this.gi.oi),r=hr({x:this.sc.max.x,y:this.sc.max.y},this.oi,this.gi.oi),n={x:Math.abs(s.x-r.x),y:Math.abs(s.y-r.y)},o=yx(t,e,n.x,n.y,i),a=o[1],h=o[4],l=o[6],c=o[7],u=new Float32Array(2*this.tc.length),d=this.sc.max.x-this.sc.min.x,f=this.sc.max.y-this.sc.min.y,g=h-l,p=c-a;let y=0;for(const m of this.tc){const t=l+g*((m.x-this.sc.min.x)/d),e=a+p*((m.y-this.sc.min.y)/f);u[y]=t,u[y+1]=e,y+=2}return u},this.hz=t,this.rz=e,this.PB=t.nz(),this.rz=e}dd(t){let e,i=Number.MAX_VALUE;for(const s of this.tc){const r=mo(hr(s,this.oi,this.gi.oi),t);r<i&&(i=r,e=s)}return e}Er(){const t=this.li.C(),e=this.hl(),i=this.hc,s=this.tc.length>=3,r=this.Ze,n=this.ll(),o=r.getThickness(),a=this.ul(o);this.hD.uE(this.oi),this.ne=this.oi.ri();const h=this.oi.si();if(i&&(this.sc=So(this.tc)),i&&s){const t=xn(this.tc,this.oi.Ot());this.gz=this.PB.iE(t,!1,this.gz),this.HN=new Uint16Array(xs(t)),this.WN=this.PB.zE(this.HN,this.WN),this.yz=this.HN.length}const l=this.dz.fillStyleSolid(e),c=this.dz.fillStylePaletted(e),u=this.dz.fillStyleRadialGradient(e),d=this.dz.fillStyleLinearGradient(e),f=this.dz.fillStyleImage(e),g=l||c&&"value"!==c.getLookUpProperty()&&c||d||u||f;if(e&&(this.bz=g?this.PB.eR(Bv["2D"],l&&Bv.Color({dataType:"uniform"}),d&&Bv.Color({dataType:["gradient",d]}),u&&Bv.Color({dataType:["gradient",u]}),c&&Bv.Color({dataType:["lookup",c.getLookUpProperty(),c.lut]}),f&&Bv.Color({dataType:["image",f]}),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0})):void 0),u?this.mz=ux(this.fi||this.sc,this.oi,u.getPosition(),u.getExtent(),u.getShape(),this.PB.GR()):d?this.Sz=dx(this.fi||this.sc,this.oi,d.getAngle(!0),this.PB.GR()):(this.mz=void 0,this.Sz=void 0),this.$N=this.PB.DO(this,this.$N,f,void 0,h||i,this.UN),(i||a||h&&1!==o)&&s){const t=1===o||-1===o?this.tc:Tx(this.tc,this.ne,o);this.xz=xn(t,this.oi.Ot()),this.wz=this.PB.iE(this.xz,!0,this.wz),this.Mz=t.length}const p=this.dz.strokeLineStyleSolid(n),y=this.dz.strokeLineSolidFill(n),m=this.dz.strokeLinearGradientFill(n),v=this.dz.strokeRadialGradientFill(n),x=p,b=y||m||v;return n&&(this.Iz=x&&b?this.PB.eR(Bv["2D"],Bv.Color({dataType:v?["gradient",v]:m?["gradient",m]:"uniform"}),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0})):void 0),v?this.Tz=ux(this.fi||this.sc,this.oi,v.getPosition(),v.getExtent(),v.getShape(),this.PB.GR()):m?this.Fz=dx(this.fi||this.sc,this.oi,m.getAngle(!0),this.PB.GR()):(this.Tz=void 0,this.Fz=void 0),this.Pz=t&&g?this.Pz||this.PB.eR(Bv["2D"],Bv.MousePicking(),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0})):void 0,this.Lz=t&&this.Ze!==Lr?this.Pz||this.PB.eR(Bv["2D"],Bv.MousePicking(),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0})):void 0,this.hc=!1,this.al(this.Xe),this.dl(r),this}pu(t,e){const i=1===t?this.Pz:this.bz,s=this.gz,r=this.yz,n=this.dz.fillStyleSolid(!1),o=this.dz.fillStyleRadialGradient(!1),a=this.dz.fillStyleLinearGradient(!1),h=this.dz.fillStylePaletted(!1),l=this.dz.fillStyleImage(!1);i&&s&&r&&this.PB.Hu(i).eE(i,(i,r,c,u)=>{if(this.PB.rE(i("uScale"),this.hD.aE()).rE(i("uDisp"),this.hD.lE()).rE(u("uScaleStart_highpart"),this.hD.OO()).rE(u("uScaleStart_lowpart"),this.hD.zO()).mO(c,s,this.oi.Ot(),void 0).jE(this.WN).oE(i("uIsHighlighted"),1===t||2===t?0:this.Ai).wI(i("uHighlightColorOffset"),1===t||2===t?Os:this.Si).oE(i("uRenderEffectMask"),2===t?1:0),1===t)this.PB.PE(i("uFirstId"),e).kO(c,1);else if(n)this.PB.wI(i("uColor"),n.getColor());else if(o){if(!this.mz)return!1;this.PB.gO(c,this.mz,o)}else if(a){if(!this.Sz)return!1;this.PB.vO(c,this.Sz,a)}else if(h){const t=ph(h,this,void 0);if(!t&&h.lut.percentageValues)return!1;this.PB.BO(c,h.lut,t)}else if(l){if(!this.$N)return!1;this.PB.wI(u("uColor"),l.getSurroundingColor()).nE(i(tv),this.$N.texture.zR()||this.$N.sourceMissingTexture,0).hE(this.$N.texCoordsBuffer,void 0,{location:r("aTextureCoord"),size:2}).LE(l.fitMode)}return this.PB.WE(this.yz),!0});const c=1===t?this.Lz:this.Iz,u=this.Ze,d=this.wz,f=this.Mz;return c&&d&&f&&this.PB.Hu(c).eE(c,(i,s,r,n)=>{this.PB.oE(i("uIsHighlighted"),1===t||2===t?0:this.Ai).wI(i("uHighlightColorOffset"),1===t||2===t?Os:this.Si).oE(i("uRenderEffectMask"),2===t?1:0).rE(i("uScale"),this.hD.aE()).rE(i("uDisp"),this.hD.lE()).mO(r,d,this.oi.Ot(),void 0);const o=u.getFillStyle();if(1===t)this.PB.PE(i("uFirstId"),e).kO(r,1);else if(ha(o))this.PB.wI(i("uColor"),o.getColor());else if(Ws(o)){if(!this.Tz)return!1;this.PB.gO(r,this.Tz,o)}else if(qs(o)){if(!this.Fz)return!1;this.PB.vO(r,this.Fz,o)}const a=u.getThickness(),h=-1===a||1===a;return this.PB.Mk(h?this.PB.gl.LINE_LOOP:this.PB.gl.TRIANGLE_STRIP,this.Mz),!0}),{idCount:1}}Su(t,e,i,s,r){return{}}mu(){return this.WN&&(this.PB.gE(this.WN),this.WN=void 0),this.gz&&(this.PB.gE(this.gz),this.gz=void 0),this.wz&&(this.PB.gE(this.wz),this.wz=void 0),this.bz=void 0,this.Iz=void 0,this.Pz=void 0,this.Lz=void 0,this.$N=this.PB.RO(this,this.$N),this}}const eb=(t,e)=>{let i=0;const s=[];for(;i<t;){const r=i;let n=e;const o=i>0;n-=o?1:0,n-=i+n<t?1:0;const a=Math.min(n,t-r),h=i-(o?1:0),l={start:h,startUnique:r,sizeData:Math.min(e,t-h),sizeUniqueData:a};s.push(l),i+=a}return s},ib=(t,e)=>{let i=0;const s=[];for(;i<t;){const r=i;let n=e;const o=i>0;n-=o?1:0,n-=0;const a=Math.min(n,t-r),h=i-(o?1:0),l={start:h,startUnique:r,sizeData:Math.min(e,t-h),sizeUniqueData:a};s.push(l),i+=a}return s},sb=(t,e,i,s)=>{if(i){const t=new Map;return e.gridTiles.forEach(e=>{t.set(e,{type:i,dataInvalidationRanges:[{tileInvalidationOffset:{primary:0,secondary:0},tileInvalidationLength:e.sizeHeatmapDataVectors}]})}),t}const r=new Map;for(let n=0;n<t.length;n+=1){const i=t[n],o={x:i.startPrimary,y:i.startSecondary},a={x:o.x+i.lengthPrimary-1,y:o.y+i.lengthSecondary-1},h=[o,{x:a.x,y:o.y},a,{x:o.x,y:a.y}];e.gridTiles.forEach(t=>{const e=t.iFirstVector,n=s(t),o={x:e.primary+n.primary-1,y:e.secondary+n.secondary-1},a=[{x:e.primary,y:e.secondary},{x:o.x,y:e.secondary},o,{x:e.primary,y:o.y}];if(!co(h,a))return;let l=r.get(t);l||(l={type:i.type,dataInvalidationRanges:[]},r.set(t,l));const c=(u=h,d=a,Cs(As(Math.max(Math.min(u[0].x,u[2].x),Math.min(d[0].x,d[2].x)),Math.max(Math.min(u[0].y,u[2].y),Math.min(d[0].y,d[2].y))),As(Math.min(Math.max(u[0].x,u[2].x),Math.max(d[0].x,d[2].x)),Math.min(Math.max(u[0].y,u[2].y),Math.max(d[0].y,d[2].y)))));var u,d;const f={primary:c.min.x-e.primary,secondary:c.min.y-e.secondary},g={primary:1+c.max.x-c.min.x,secondary:1+c.max.y-c.min.y};let p=!1;const y=[{x:f.primary,y:f.secondary},{x:f.primary+g.primary,y:f.secondary},{x:f.primary+g.primary,y:f.secondary+g.secondary},{x:f.primary,y:f.secondary+g.secondary}];for(let i=0;i<l.dataInvalidationRanges.length;i+=1)if(!p){const t=l.dataInvalidationRanges[i],e=[{x:t.tileInvalidationOffset.primary,y:t.tileInvalidationOffset.secondary},{x:t.tileInvalidationOffset.primary+t.tileInvalidationLength.primary,y:t.tileInvalidationOffset.secondary},{x:t.tileInvalidationOffset.primary+t.tileInvalidationLength.primary,y:t.tileInvalidationOffset.secondary+t.tileInvalidationLength.secondary},{x:t.tileInvalidationOffset.primary,y:t.tileInvalidationOffset.secondary+t.tileInvalidationLength.secondary}];if(co(y,e)){const i=uo(y,e);t.tileInvalidationOffset.primary=i.min.x,t.tileInvalidationOffset.secondary=i.min.y,t.tileInvalidationLength.primary=i.max.x-i.min.x,t.tileInvalidationLength.secondary=i.max.y-i.min.y,p=!0}}p||l.dataInvalidationRanges.push({tileInvalidationLength:g,tileInvalidationOffset:f})})}return r},rb=(t,e,i)=>{if(1!==t.length||0!==e.startPrimary||0!==e.startSecondary||e.lengthPrimary!==t[0].sizeHeatmapDataVectors.primary||e.lengthSecondary!==t[0].sizeHeatmapDataVectors.secondary)t.forEach(t=>{const s=i(t),r=Math.max(e.startPrimary,t.iFirstVector.primary),n=Math.min(e.startPrimary+e.lengthPrimary-1,t.iFirstVector.primary+t.sizeHeatmapDataVectors.primary-1),o=Math.max(e.startSecondary,t.iFirstVector.secondary),a=Math.min(e.startSecondary+e.lengthSecondary-1,t.iFirstVector.secondary+t.sizeHeatmapDataVectors.secondary-1);for(let i=r;i<=n;i+=1){const r=i-e.startPrimary,n=e.values[r],h=(i-t.iFirstVector.primary)*t.sizeHeatmapDataVectors.secondary;for(let i=o;i<=a;i+=1){const r=i-e.startSecondary,o=i-t.iFirstVector.secondary,a=n[r];s[h+o]=a}}});else{const s=t[0],r=i(s);for(let t=0;t<e.lengthPrimary;t+=1){const i=t*s.sizeHeatmapDataVectors.secondary;r.set(e.values[t],i)}}},nb=(t,e,i)=>{var s,r;const n=null===(s=t.gl2)||void 0===s?void 0:s.ctx;if(n)return t.uO(null,n.RED,!1,!0,{x:e,y:i},!1,n.FLOAT,n.R32F);const o=t.gl;return(null===(r=t.gl1)||void 0===r?void 0:r.optional.OES_texture_float)?t.uO(null,o.LUMINANCE,!1,!0,{x:e,y:i},!1,o.FLOAT):t.uO(null,o.RGBA,!1,!0,{x:e,y:i},!1,o.UNSIGNED_BYTE)},ob=(t,e,i,s)=>{e.forEach((e,r)=>{var n,o;const a=i(r),h=s(r),l=t.gl;l.bindTexture(l.TEXTURE_2D,h),l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const c=null===(n=t.gl2)||void 0===n?void 0:n.ctx,u=e.dataInvalidationRanges.length,d=e.dataInvalidationRanges.reduce((t,e)=>t+e.tileInvalidationLength.primary,0)/r.sizeHeatmapDataVectors.primary;1===u&&d<1||d<.5&&u<10?e.dataInvalidationRanges.forEach(e=>{var i;const s=e.tileInvalidationOffset.primary*r.sizeHeatmapDataVectors.secondary,n=s+e.tileInvalidationLength.primary*r.sizeHeatmapDataVectors.secondary;if(c)c.texSubImage2D(l.TEXTURE_2D,0,0,e.tileInvalidationOffset.primary,r.sizeHeatmapDataVectors.secondary,e.tileInvalidationLength.primary,c.RED,c.FLOAT,a.subarray(s,n));else if(null===(i=t.gl1)||void 0===i?void 0:i.optional.OES_texture_float)l.texSubImage2D(l.TEXTURE_2D,0,0,e.tileInvalidationOffset.primary,r.sizeHeatmapDataVectors.secondary,e.tileInvalidationLength.primary,l.LUMINANCE,l.FLOAT,a.subarray(s,n));else{const t=new Uint8Array(a.buffer).subarray(4*s,4*n);l.texSubImage2D(l.TEXTURE_2D,0,0,e.tileInvalidationOffset.primary,r.sizeHeatmapDataVectors.secondary,e.tileInvalidationLength.primary,l.RGBA,l.UNSIGNED_BYTE,t)}}):c?c.texImage2D(l.TEXTURE_2D,0,c.R32F,r.sizeHeatmapDataVectors.secondary,r.sizeHeatmapDataVectors.primary,0,c.RED,c.FLOAT,a):(null===(o=t.gl1)||void 0===o?void 0:o.optional.OES_texture_float)?l.texImage2D(l.TEXTURE_2D,0,l.LUMINANCE,r.sizeHeatmapDataVectors.secondary,r.sizeHeatmapDataVectors.primary,0,l.LUMINANCE,l.FLOAT,a):l.texImage2D(l.TEXTURE_2D,0,l.RGBA,r.sizeHeatmapDataVectors.secondary,r.sizeHeatmapDataVectors.primary,0,l.RGBA,l.UNSIGNED_BYTE,new Uint8Array(a.buffer)),l.bindTexture(l.TEXTURE_2D,null)})};class ab extends ac{constructor(t,e,i,s,r,n){super(t,e,i,s,r),this.XN=Fs("bilinear"),this.Yt={x:0,y:0},this.ZN={x:1,y:1},this.Zy=$l.lineStyle,this.engine=t;const o="columns"===n.dataOrder?n.columns:n.rows,a="columns"===n.dataOrder?n.rows:n.columns;this.Fa=l(l({},n),{},{primaryDimensionVectorsCount:o,secondaryDimensionVectorsCount:a})}sp(t){return this.XN._(t),this}ep(){return this.XN.C()}qy(t,e){return this.Yt=t,this.ZN=e,this}tp(){return{start:this.Yt,step:this.ZN,end:{x:this.Yt.x+this.ZN.x*this.Fa.columns,y:this.Yt.y+this.ZN.y*this.Fa.rows}}}Jy(t){return this.Zy="function"==typeof t?t(this.Zy):t,this}ip(){return this.Zy}}class hb extends ab{constructor(t,e,i,s,r,n){super(t,e,i,s,r,n),this.hD=new Ax,this.yV={},this.JN=[],this.QN=!1,this.vc=!1,this.dz=gh({fillStyleSolid:()=>ha(this.Xe)&&this.Xe,fillStylePaletted:()=>fa(this.Xe)&&this.Xe,wireframeStyleLine:()=>eh(this.Zy)&&this.Zy,wireframeStyleFill:()=>{const t=this.Zy&&this.Zy.getFillStyle();return ha(t)&&t}}),this.KN=eb,this.hz=t,this.rz=e,this.PB=t.nz(),this.rz=e;const o=Math.min(this.PB.BB,void 0!==n.qN?n.qN:2048),a={x:Math.min(o,this.Fa.primaryDimensionVectorsCount),y:Math.min(o,this.Fa.secondaryDimensionVectorsCount)},h=((t,e,i)=>{const s=[],r=i(t.primaryDimensionVectorsCount,e.x),n=i(t.secondaryDimensionVectorsCount,e.y);let o;return r.forEach(t=>n.forEach(e=>{const i={iFirstVector:{primary:t.start,secondary:e.start},iFirstUniqueVector:{primary:t.startUnique,secondary:e.startUnique},sizeHeatmapDataVectors:{primary:t.sizeData,secondary:e.sizeData},sizeUniqueHeatmapDataVectors:{primary:t.sizeUniqueData,secondary:e.sizeUniqueData}};s.push(i)})),o=[],s.forEach(t=>{let e=o.find(e=>e.sizeHeatmapData.primary===t.sizeHeatmapDataVectors.primary&&e.sizeHeatmapData.secondary===t.sizeHeatmapDataVectors.secondary);e||(e={sizeHeatmapData:t.sizeHeatmapDataVectors,tiles:[]},o.push(e)),e.tiles.push(t)}),{gridTiles:s,gridTileSizes:o}})(this.Fa,a,this.KN),c=h.gridTiles.map(t=>{const e=new Float32Array(t.sizeHeatmapDataVectors.primary*t.sizeHeatmapDataVectors.secondary);return l(l({},t),{},{intensityData:e,hasIntensityData:!1})}),u=h.gridTileSizes.map(t=>l(l({},t),{},{tiles:c.filter(e=>e.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&e.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary)}));this.tG={gridTiles:c,gridTileSizes:u},this.qy(this.Yt,this.ZN)}wi(){return this.iG}Er(){const t=this.JN,e=this.Xe,i=this.hl(),s=this.Zy,r=s!==this.sG,n=this.dz.wireframeStyleLine(r),o=this.dz.wireframeStyleFill(r),a=n&&o&&!this.oi.Ot(),h=this.dz.fillStylePaletted(i),l=this.dz.fillStyleSolid(i),c=this.XN.o,u=this.XN.C(),d=this.vc,f=this.li.C();this.eG=this.eG||this.hG();const g=this.eG,p=sb(t,g,d?"intensity":void 0,t=>t.sizeHeatmapDataVectors);p.size>0&&(ob(this.PB,p,t=>t.intensityData,t=>t.intensityDataTexture),this.QN=!0),this.hD.uE(this.oi);const y=this.yV;if((i||c)&&(y.tile=h?{renderMode:"paletted",fillStylePaletted:h,shader:this.PB.eR(Bv["2D"],Bv.ColorGrid2D({heatmapType:"intensity",interpolation:"bilinear"===u&&"bilinear",flipXY:"rows"===this.Fa.dataOrder,intensityTextureType:this.PB.KD?"float":"ubyte",littleEndian:this.PB.IS_MACHINE_LITTLE_ENDIAN,lut:h.lut}),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0}))}:l?{renderMode:"solid",fillStyleSolid:l,shader:this.PB.eR(Bv["2D"],Bv.Color({dataType:"uniform"}),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0}))}:void 0),r&&(y.wireframe=a&&n&&o?-1===n.getThickness()?{renderMode:"primitive",shader:this.PB.eR(Bv["2D"],Bv.Color({dataType:"uniform"}),Bv.VertexLocation({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:"rows"===this.Fa.dataOrder,axisWorldTranslation:dh(this.oi),normalSource:void 0})),fillStyleSolid:o}:{renderMode:"triangulated",shader:this.PB.eR(Bv["2D"],Bv.Color({dataType:"uniform"}),Bv.LineInstanced2D({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:"rows"===this.Fa.dataOrder,axisWorldTranslation:dh(this.oi),normalSource:void 0})),geometry:Nx(this.PB,1),solidLine:n,fillStyleSolid:o}:void 0,y.wireframe?this.rG=this.rG||this.nG():this.rG&&(this.PB.gE(this.rG.wireframeCoordinatesBuffer),this.rG=void 0)),y.mousePicking=f?this.yV.mousePicking||{shader:this.PB.eR(Bv["2D"],Bv.MousePicking(),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0}))}:void 0,this.yV=y,void 0===this.iG&&h&&"value"===h.lookUpProperty&&h.lut.percentageValues){let t=ro,e=no;this.eG.gridTiles.forEach(i=>{for(let s=0;s<i.intensityData.length;s+=1){const r=i.intensityData[s];r<t&&(t=r),r>e&&(e=r)}}),this.iG={min:t,max:e}}return this.vc=!1,this.JN.length=0,this.al(e),this.sG=s,this.XN.o=!1,this}hG(){const t=this.tG.gridTiles.map(t=>{const e=nb(this.PB,t.sizeHeatmapDataVectors.secondary,t.sizeHeatmapDataVectors.primary);return l(l({},t),{},{intensityDataTexture:e,tileData:t})}),e=this.tG.gridTileSizes.map(e=>l(l({},e),{},{tiles:t.filter(t=>t.sizeHeatmapDataVectors.primary===e.sizeHeatmapData.primary&&t.sizeHeatmapDataVectors.secondary===e.sizeHeatmapData.secondary)})),i=this.PB.iE(new Float32Array(16)),s=this.PB.gl.TRIANGLE_STRIP;return{gridTiles:t,gridTileSizes:e,rectangleLocationsBuffer:i,rectangleLocationsDrawMode:s,rectangleLocationsDrawLength:4}}nG(){const t=this.Fa.primaryDimensionVectorsCount+1+this.Fa.secondaryDimensionVectorsCount+1,e=new Float32Array(4*t);let i=0;for(let s=0;s<this.Fa.primaryDimensionVectorsCount+1;s+=1)e[i+0]=s,e[i+1]=0,e[i+2]=s,e[i+3]=this.Fa.secondaryDimensionVectorsCount,i+=4;for(let s=0;s<this.Fa.secondaryDimensionVectorsCount+1;s+=1)e[i+0]=0,e[i+1]=s,e[i+2]=this.Fa.primaryDimensionVectorsCount,e[i+3]=s,i+=4;return{wireframeCoordinatesBuffer:this.PB.iE(e),wireframeSegmentsLength:t}}qy(t,e){super.qy(t,e);const i=this.Fa,s=Cs({x:Math.min(this.Yt.x,this.Yt.x+i.columns*this.ZN.x),y:Math.min(this.Yt.y,this.Yt.y+i.rows*this.ZN.y)},{x:Math.max(this.Yt.x,this.Yt.x+i.columns*this.ZN.x),y:Math.max(this.Yt.y,this.Yt.y+i.rows*this.ZN.y)}),r=new Map;return this.tG.gridTiles.forEach(t=>{const e="columns"===this.Fa.dataOrder?{x:this.Yt.x+this.ZN.x*t.iFirstVector.primary,y:this.Yt.y+this.ZN.y*t.iFirstVector.secondary}:{x:this.Yt.x+this.ZN.x*t.iFirstVector.secondary,y:this.Yt.y+this.ZN.y*t.iFirstVector.primary},i="columns"===this.Fa.dataOrder?{x:this.ZN.x*t.sizeHeatmapDataVectors.primary,y:this.ZN.y*t.sizeHeatmapDataVectors.secondary}:{x:this.ZN.x*t.sizeHeatmapDataVectors.secondary,y:this.ZN.y*t.sizeHeatmapDataVectors.primary},s="columns"===this.Fa.dataOrder?{x:this.Yt.x+this.ZN.x*t.iFirstUniqueVector.primary,y:this.Yt.y+this.ZN.y*t.iFirstUniqueVector.secondary}:{x:this.Yt.x+this.ZN.x*t.iFirstUniqueVector.secondary,y:this.Yt.y+this.ZN.y*t.iFirstUniqueVector.primary},n="columns"===this.Fa.dataOrder?{x:this.ZN.x*t.sizeUniqueHeatmapDataVectors.primary,y:this.ZN.y*t.sizeUniqueHeatmapDataVectors.secondary}:{x:this.ZN.x*t.sizeUniqueHeatmapDataVectors.secondary,y:this.ZN.y*t.sizeUniqueHeatmapDataVectors.primary};r.set(t,{startLocationAxis:e,sizeAxis:i,startRenderLocationAxis:s,renderSizeAxis:n})}),this.oG={boundaries:s,tilesInfo:r},this}pu(t,e){var i,s;const r=this.eG,n=this.oG,o=1===t?null===(i=this.yV.mousePicking)||void 0===i?void 0:i.shader:null===(s=this.yV.tile)||void 0===s?void 0:s.shader;if(this.yV.tile&&o&&r&&n){const i=o,s=this.yV.tile,a={x:(n.boundaries.max.x-n.boundaries.min.x)*Math.sign(this.ZN.x),y:(n.boundaries.max.y-n.boundaries.min.y)*Math.sign(this.ZN.y)},h={x:a.x/this.Fa.columns,y:a.y/this.Fa.rows},l=this.oi.ri(),c={x:h.x/l.x,y:h.y/l.y};this.PB.Hu(i).eE(i,(i,o,a)=>{let h=!1;if(!this.PB.EO(a,t,this,{uniforms:this.hD,idFirst:e,fillStyleSolid:"solid"===s.renderMode&&s.fillStyleSolid}))return!1;if("solid"===s.renderMode||1===t){const t=xn([{x:this.Yt.x,y:this.Yt.y},{x:this.Yt.x+this.ZN.x*this.Fa.columns,y:this.Yt.y},{x:this.Yt.x,y:this.Yt.y+this.ZN.y*this.Fa.rows},{x:this.Yt.x+this.ZN.x*this.Fa.columns,y:this.Yt.y+this.ZN.y*this.Fa.rows}],this.oi.Ot());this.PB.RE(r.rectangleLocationsBuffer,0,t),this.PB.mO(a,r.rectangleLocationsBuffer,this.oi.Ot(),void 0).Mk(this.PB.gl.TRIANGLE_STRIP,4),h=!0}else"paletted"===s.renderMode&&(this.PB.BO(a,s.fillStylePaletted.lut,this.iG),l=t=>{this.PB.rE(i("uTileDimensions"),["columns"===this.Fa.dataOrder?t.sizeHeatmapData.primary:t.sizeHeatmapData.secondary,"columns"===this.Fa.dataOrder?t.sizeHeatmapData.secondary:t.sizeHeatmapData.primary])},u=(t,e)=>{const s=n.tilesInfo.get(t.tileData);if(!s)return;let o;const l=this.PB.GR();if("bilinear"===this.XN.C()){const t=(this.oi.x.Bt(s.startLocationAxis.x)+c.x/2)*l,e=(this.oi.y.Bt(s.startLocationAxis.y)+c.y/2)*l;o=[t,e,(this.oi.x.Bt(s.startLocationAxis.x+s.sizeAxis.x)-c.x/2)*l-t,(this.oi.y.Bt(s.startLocationAxis.y+s.sizeAxis.y)-c.y/2)*l-e]}else{const t=this.oi.x.Bt(s.startLocationAxis.x)*l,e=this.oi.y.Bt(s.startLocationAxis.y)*l;o=[t,e,this.oi.x.Bt(s.startLocationAxis.x+s.sizeAxis.x)*l-t,this.oi.y.Bt(s.startLocationAxis.y+s.sizeAxis.y)*l-e]}const u=xn([{x:s.startRenderLocationAxis.x,y:s.startRenderLocationAxis.y},{x:s.startRenderLocationAxis.x+s.renderSizeAxis.x,y:s.startRenderLocationAxis.y},{x:s.startRenderLocationAxis.x,y:s.startRenderLocationAxis.y+s.renderSizeAxis.y},{x:s.startRenderLocationAxis.x+s.renderSizeAxis.x,y:s.startRenderLocationAxis.y+s.renderSizeAxis.y}],this.oi.Ot());this.PB.RE(r.rectangleLocationsBuffer,0,u),this.PB.fE(i("uTileBounds"),o).nE(i("uTileIntensityValues"),t.intensityDataTexture,1).mO(a,r.rectangleLocationsBuffer,this.oi.Ot(),void 0).Mk(this.PB.gl.TRIANGLE_STRIP,4),h=!0},r.gridTileSizes.forEach(t=>{l(t),t.tiles.forEach(t=>{u(t)})}));var l,u;return h})}const a=this.rG,h=this.yV.wireframe,l=1===t||null==h?void 0:h.shader;if(a&&h&&l&&"primitive"===h.renderMode){const{fillStyleSolid:e}=h;this.PB.Hu(l).eE(l,(i,s,r)=>((this.oi instanceof rr||this.oi instanceof uh)&&this.PB.rE(i("uScale"),this.hD.aE()).rE(i("uDisp"),this.hD.lE()),this.PB.oE(i("uIsHighlighted"),1===t||2===t?0:this.Ai).wI(i("uHighlightColorOffset"),1===t||2===t?Os:this.Si).oE(i("uRenderEffectMask"),2===t?1:0).wI(i("uColor"),e.getColor()).hE(a.wireframeCoordinatesBuffer,void 0,{location:s("aPos"),size:2}).rE(i("uScaling"),[this.ZN.x,this.ZN.y]).rE(i("uTranslationAxis"),[this.Yt.x,this.Yt.y]).Mk(this.PB.gl.LINES,2*a.wireframeSegmentsLength),!0))}else if(a&&h&&l&&"triangulated"===h.renderMode){const{geometry:e,solidLine:i,fillStyleSolid:s}=h;this.PB.Hu(l).eE(l,(r,n,o)=>((this.oi instanceof rr||this.oi instanceof uh)&&this.PB.rE(r("uScale"),this.hD.aE()).rE(r("uDisp"),this.hD.lE()),this.PB.oE(r("uIsHighlighted"),1===t||2===t?0:this.Ai).wI(r("uHighlightColorOffset"),1===t||2===t?Os:this.Si).oE(r("uRenderEffectMask"),2===t?1:0).wI(r("uColor"),s.getColor()).oE(r("uThicknessPixels"),i.getThickness()).rE(r("uRatioPxClip"),[2/this.gi._t().x,2/this.gi._t().y]).hE(a.wireframeCoordinatesBuffer,1,{location:n("aLocationA"),size:2},{location:n("aLocationB"),size:2}).rE(r("uScaling"),[this.ZN.x,this.ZN.y]).rE(r("uTranslationAxis"),[this.Yt.x,this.Yt.y]),e.Hu(o,!1).Mk(a.wireframeSegmentsLength),!0))}return{idCount:1}}Su(t,e,i,s,r){return{}}hp(t){return 0===t.lengthPrimary||0===t.lengthSecondary||(this.JN.push(t),rb(this.tG.gridTiles,t,t=>(t.hasIntensityData=!0,t.intensityData)),this.iG=void 0),this}zi(){return this.QN&&(this.tG.gridTiles.forEach(t=>{t.intensityData.fill(0),t.hasIntensityData=!1}),this.vc=!0,this.QN=!1,this.iG=void 0),this}dispose(){super.dispose();const t=this.eG;t&&(t.gridTiles.forEach(t=>{this.PB.DB(t.intensityDataTexture)}),t.gridTiles.length=0,t.gridTileSizes.forEach(t=>{}),t.gridTileSizes.length=0,this.PB.gE(t.rectangleLocationsBuffer)),this.eG=void 0;const e=this.rG;return e&&this.PB.gE(e.wireframeCoordinatesBuffer),this.rG=void 0,this.yV={},this}mu(){return this.dispose(),this}dd(t){const e=t,i="columns"===this.Fa.dataOrder?e.x:e.y,s="columns"===this.Fa.dataOrder?e.y:e.x,r="columns"===this.Fa.dataOrder?this.Yt.x:this.Yt.y,n="columns"===this.Fa.dataOrder?this.Yt.y:this.Yt.x;let o=(i-r)/("columns"===this.Fa.dataOrder?this.ZN.x:this.ZN.y),a=(s-n)/("columns"===this.Fa.dataOrder?this.ZN.y:this.ZN.x);o=Math.floor(Qr(o,0,this.Fa.primaryDimensionVectorsCount-1)),a=Math.floor(Qr(a,0,this.Fa.secondaryDimensionVectorsCount-1));const h=this.aG(o,a),l="columns"===this.Fa.dataOrder?{x:this.Yt.x+(o+.5)*this.ZN.x,y:this.Yt.y+(a+.5)*this.ZN.y}:{x:this.Yt.x+(a+.5)*this.ZN.x,y:this.Yt.y+(o+.5)*this.ZN.y},c="columns"===this.Fa.dataOrder?o:a,u="columns"===this.Fa.dataOrder?a:o;return{x:l.x,y:l.y,column:c,row:u,cellValue:h}}Jb(t){const e=this.oG;if(!e||t.x<e.boundaries.min.x||t.x>e.boundaries.max.x||t.y<e.boundaries.min.y||t.y>e.boundaries.max.y)return;const i=t,s="columns"===this.Fa.dataOrder?i.x:i.y,r="columns"===this.Fa.dataOrder?i.y:i.x,n="columns"===this.Fa.dataOrder?this.Yt.x:this.Yt.y,o="columns"===this.Fa.dataOrder?this.Yt.y:this.Yt.x,a="columns"===this.Fa.dataOrder?this.ZN.x:this.ZN.y,h="columns"===this.Fa.dataOrder?this.ZN.y:this.ZN.x,l=Qr((s-n)/a-.5,0,this.Fa.primaryDimensionVectorsCount-1),c=Qr((r-o)/h-.5,0,this.Fa.secondaryDimensionVectorsCount-1),u=Qr(Math.ceil(l)-1,0,this.Fa.primaryDimensionVectorsCount-1),d=Qr(Math.ceil(c)-1,0,this.Fa.secondaryDimensionVectorsCount-1),f={point:{x:u,y:d},value:this.aG(u,d)},g={point:{x:u,y:d+1},value:this.aG(u,d+1)},p={point:{x:u+1,y:d},value:this.aG(u+1,d)},y={point:{x:u+1,y:d+1},value:this.aG(u+1,d+1)},m=Ra({x:l,y:c},f,g,p,y);if(void 0===m)return;const v=Qr(Math.floor(l+.5),0,this.Fa.primaryDimensionVectorsCount-1),x=Qr(Math.floor(c+.5),0,this.Fa.secondaryDimensionVectorsCount-1),b="columns"===this.Fa.dataOrder?v:x,S="columns"===this.Fa.dataOrder?x:v,A=t;return{x:A.x,y:A.y,column:b,row:S,cellValue:m}}aG(t,e){for(let i=0;i<this.tG.gridTiles.length;i+=1){const s=this.tG.gridTiles[i];if(t>=s.iFirstVector.primary&&t<=s.iFirstVector.primary+s.sizeHeatmapDataVectors.primary-1&&e>=s.iFirstVector.secondary&&e<=s.iFirstVector.secondary+s.sizeHeatmapDataVectors.secondary-1){const i=t-s.iFirstVector.primary,r=e-s.iFirstVector.secondary,n=i*s.sizeHeatmapDataVectors.secondary+r;return s.intensityData[n]}}return 0}Hi(){var t;return(null===(t=this.oG)||void 0===t?void 0:t.boundaries.max.x)||0}ji(){var t;return(null===(t=this.oG)||void 0===t?void 0:t.boundaries.min.x)||0}Xi(){var t;return(null===(t=this.oG)||void 0===t?void 0:t.boundaries.max.y)||0}Wi(){var t;return(null===(t=this.oG)||void 0===t?void 0:t.boundaries.min.y)||0}oc(){return 0}ac(){return 0}Qb(){const t=[];return this.tG.gridTiles.forEach(e=>{if(!e.hasIntensityData)return;const i=new Array(e.sizeUniqueHeatmapDataVectors.primary).fill(0).map(t=>new Array(e.sizeUniqueHeatmapDataVectors.secondary).fill(0));for(let t=0;t<e.sizeUniqueHeatmapDataVectors.primary;t+=1){const s=t*e.sizeHeatmapDataVectors.secondary,r=i[t];for(let t=0;t<e.sizeUniqueHeatmapDataVectors.secondary;t+=1){const i=e.intensityData[s+t];r[t]=i}}t.push({type:"intensity",startPrimary:e.iFirstUniqueVector.primary,startSecondary:e.iFirstUniqueVector.secondary,lengthPrimary:e.sizeUniqueHeatmapDataVectors.primary,lengthSecondary:e.sizeUniqueHeatmapDataVectors.secondary,values:i})}),t}}class lb extends ac{constructor(t,e,i,s,r,n){super(t,e,i,s,r),this.Yt={x:0,y:0},this.ZN={x:1,y:1},this.Zy=$l.lineStyle,this.cu=Fs(void 0),this.XN=Fs("bilinear"),this.engine=t,this.Fa=n}qy(t,e){return this.Yt=t,this.ZN=e,this}tp(){return{start:this.Yt,step:this.ZN}}Jy(t){return this.Zy="function"==typeof t?t(this.Zy):t,this}ip(){return this.Zy}tx(t){return this.cu._(t),this}lG(){return this.cu.C()}sp(t){return this.XN._(t),this}ep(){return this.XN.C()}}class cb extends lb{constructor(t,e,i,s,r,n){super(t,e,i,s,r,n),this.cG=0,this.ix=[],this.hz=t,this.rz=e,this.PB=t.nz(),this.rz=e,this.sc="columns"===n.scrollDimension?Cs({x:this.Yt.x,y:this.Yt.y},{x:this.Yt.x,y:this.Yt.y+n.resolution*this.ZN.y}):Cs({x:this.Yt.x,y:this.Yt.y},{x:this.Yt.x+n.resolution*this.ZN.x,y:this.Yt.y}),this.uG={dataPerSegment:2048}}Er(){this.yN||(this.pi.push({type:"DataPattern",args:{pattern:"columns"===this.Fa.scrollDimension?this.ZN.x>0?"ProgressiveX":"RegressiveX":this.ZN.y>0?"ProgressiveY":"RegressiveY"}}),this.yN=new qx(this.oi,this));const t=this.yN.lN(this.ix,this.cu.C());if(t>0){for(let e=0;e<t;e+=1)this.ix[0].shape.dispose().mu(),this.ix.shift();"columns"===this.Fa.scrollDimension?this.sc.min.x=this.ix.length>0?this.ix[0].boundaries.min.x:ro:this.sc.min.y=this.ix.length>0?this.ix[0].boundaries.min.y:ro}this.ix.forEach(t=>t.shape.Er());const e=this.ix.reduce((t,e)=>{var i,s;return t.min=Math.min(t.min,$r(null===(i=e.shape.iG)||void 0===i?void 0:i.min,ro)),t.max=Math.max(t.max,$r(null===(s=e.shape.iG)||void 0===s?void 0:s.max,no)),t},{min:ro,max:no});return this.ix.forEach(t=>{t.shape.iG=e}),this.cu.o=!1,this}pu(t,e){let i=0;return this.ix.forEach(s=>{const{idCount:r}=s.shape.pu(t,e+i);void 0!==r&&(i+=r)}),{idCount:i}}wi(){var t;return null===(t=this.ix[0])||void 0===t?void 0:t.shape.wi()}Su(t,e,i,s,r){return{}}lp(t){if(0===t.length)return this;let e=0;const i=this.uG.dataPerSegment,s=t.length;do{let r=this.ix[this.ix.length-1],n=r?i-(r.existingDataPointsCount+(r.hasJoint?1:0)):0,o=!1;if(!r||0===n){const t={columns:"columns"===this.Fa.scrollDimension?i:this.Fa.resolution,rows:"rows"===this.Fa.scrollDimension?i:this.Fa.resolution,heatmapDataType:this.Fa.heatmapDataType,dataOrder:this.Fa.scrollDimension};let e="columns"===this.Fa.scrollDimension?{x:this.Yt.x+this.ZN.x*this.cG,y:this.Yt.y}:{x:this.Yt.x,y:this.Yt.y+this.ZN.y*this.cG};this.ix.length>0&&(e="columns"===this.Fa.scrollDimension?{x:e.x-1*this.ZN.x,y:e.y}:{x:e.x,y:e.y-1*this.ZN.y},o=!0);const s=new hb(this.hz,this.rz,this.oi,Jr,[],t).sp(this.XN.C()).Ke(this.Xe).Jy(this.Zy).qy(e,this.ZN);r={shape:s,existingDataPointsCount:0,existingCoordinatesCount:0,allocatedCoordinatesCount:i,dataStartIndex:this.cG,hasJoint:!1,boundaries:{min:{x:s.ji(),y:s.Wi()},max:{x:s.Hi(),y:s.Xi()}}},this.ix.push(r),n=i-(o?1:0)}const a=s-e,h=Math.min(n,a),l=t.slice(e,e+h),c={type:"intensity",values:l,startPrimary:r.existingDataPointsCount+(r.hasJoint?1:0),startSecondary:0,lengthPrimary:h,lengthSecondary:this.Fa.resolution};o&&(c.values.unshift(this.dG),c.lengthPrimary+=1,r.hasJoint=!0),r.shape.hp(c),r.existingDataPointsCount+=h,r.existingCoordinatesCount+=h+(o?1:0),this.dG=l[l.length-1],this.cG+=h,e+=h}while(e<s);return this.sc.max="columns"===this.Fa.scrollDimension?l(l({},this.sc.max),{},{x:this.Yt.x+this.cG*this.ZN.x}):l(l({},this.sc.max),{},{y:this.Yt.y+this.cG*this.ZN.y}),this}hp(t,e){if(e.length<=0)return this;const i=t,s=t+e.length-1,r=e[0].length;if(r<=0)return this;this.ix.forEach(t=>{const n=t.dataStartIndex,o=t.dataStartIndex+t.existingDataPointsCount-1;if(s<n||i>o)return;const a=Math.max(i,n),h=Math.min(s,o),l=h-a+1,c=e.slice(a-i,h-i+1),u=i-n+(t.hasJoint?1:0),d={type:"intensity",startSecondary:0,lengthSecondary:r,startPrimary:u,lengthPrimary:l,values:c};t.shape.hp(d)});const n=this.cG-1;if(s>n){const t=s-n,i=e.slice(-t);if(i.length<t){const e=this.dG||new Array(r).fill(0);for(let s=i.length;s<t;s+=1)i.unshift(e)}this.lp(i)}return this}cp(){return this.cG}zi(){return this.ix.forEach(t=>{t.shape.dispose().mu()}),this.ix.length=0,this.sc="columns"===this.Fa.scrollDimension?Cs({x:this.Yt.x,y:this.Yt.y},{x:this.Yt.x,y:this.Yt.y+this.Fa.resolution*this.ZN.y}):Cs({x:this.Yt.x,y:this.Yt.y},{x:this.Yt.x+this.Fa.resolution*this.ZN.x,y:this.Yt.y}),this.cG=0,this.dG=void 0,this}qy(t,e){return super.qy(t,e),this.ix.forEach((i,s)=>{const r={x:t.x+("columns"===this.Fa.scrollDimension?i.dataStartIndex*e.x:0),y:t.y+("rows"===this.Fa.scrollDimension?i.dataStartIndex*e.y:0)};i.shape.qy(r,e),i.boundaries={min:{x:i.shape.ji(),y:i.shape.Wi()},max:{x:i.shape.Hi(),y:i.shape.Xi()}}}),this.ix.length>0?this.sc=Eo(...this.ix.map(t=>t.boundaries)):this.sc="columns"===this.Fa.scrollDimension?Cs({x:this.Yt.x,y:this.Yt.y},{x:this.Yt.x,y:this.Yt.y+this.Fa.resolution*this.ZN.y}):Cs({x:this.Yt.x,y:this.Yt.y},{x:this.Yt.x+this.Fa.resolution*this.ZN.x,y:this.Yt.y}),this}Ke(t){return super.Ke(t),this.ix.forEach(t=>t.shape.Ke(this.Xe)),this}Jy(t){return super.Jy(t),this.ix.forEach(t=>t.shape.Jy(this.Zy)),this}sp(t){return super.sp(t),this.ix.forEach(e=>e.shape.sp(t)),this}dispose(){return super.dispose(),this.ix.forEach(t=>t.shape.dispose()),this}setVisible(t){return super.setVisible(t),this.ix.forEach(e=>e.shape.setVisible(t)),this}mu(){return this.ix.forEach(t=>t.shape.mu()),this}dd(t){const e=hr(t,this.oi,this.engine.oi),i=this.ix.reduce((i,s)=>{const r=s.shape.dd(t);if(r){const t=vo(hr(r,this.oi,this.engine.oi),e);if(void 0===i||t<i.distance)return{result:r,distance:t,segment:s}}return i},void 0);if(i&&i.result){const t="columns"===this.Fa.scrollDimension?i.result.column+i.segment.dataStartIndex:i.result.column,e="rows"===this.Fa.scrollDimension?i.result.row+i.segment.dataStartIndex:i.result.row;if("columns"===this.Fa.scrollDimension&&t>=this.cG||"rows"===this.Fa.scrollDimension&&e>=this.cG)return;return{x:i.result.x,y:i.result.y,column:t,row:e,cellValue:i.result.cellValue}}}Jb(t){const e=hr(t,this.oi,this.engine.oi),i=this.ix.reduce((i,s)=>{const r=s.shape.Jb(t);if(r){const t=vo(hr(r,this.oi,this.engine.oi),e);if(void 0===i||t<i.distance)return{result:r,distance:t,segment:s}}return i},void 0);if(i&&i.result){const t="columns"===this.Fa.scrollDimension?i.result.column+i.segment.dataStartIndex:i.result.column,e="rows"===this.Fa.scrollDimension?i.result.row+i.segment.dataStartIndex:i.result.row;if("columns"===this.Fa.scrollDimension&&t>=this.cG||"rows"===this.Fa.scrollDimension&&e>=this.cG)return;return{x:i.result.x,y:i.result.y,column:t,row:e,cellValue:i.result.cellValue}}}Hi(){return this.sc.max.x}ji(){return this.sc.min.x}Xi(){return this.sc.max.y}Wi(){return this.sc.min.y}oc(){return 0}ac(){return 0}Fi(t){return super.Fi(t),this.ix.forEach(e=>e.shape.Fi(t)),this}}class ub extends ac{constructor(t,e,i,s,r,n){super(t,e,i,s,r),this.XN=Fs("bilinear"),this.Zy=$l.lineStyle,this.Fa=n}sp(t){return this.XN._(t),this}ep(){return this.XN.C()}Jy(t){return this.Zy="function"==typeof t?t(this.Zy):t,this}ip(){return this.Zy}}class db extends ub{constructor(t,e,i,s,r,n){super(t,e,i,s,r,n),this.hD=new Ax,this.yV={},this.dz=gh({fillStyleSolid:()=>ha(this.Xe)&&this.Xe,fillStylePaletted:()=>fa(this.Xe)&&this.Xe}),this.hz=t,this.rz=e,this.PB=t.nz(),this.rz=e,this.Xb=new hb(this.hz,t.fG,t.oi,Jr,[],{columns:n.sectors,rows:n.annuli,heatmapDataType:"intensity",dataOrder:"annuli"===n.dataOrder?"rows":"columns",qN:this.PB.BB}).Jy(Lr);const o=2*Math.PI/360,a=new Float32Array(724);let h=0;a[h+0]=0,a[h+1]=0,h+=2;for(let l=0;l<=360;l+=1){const t=l*o,e=Math.cos(t),i=Math.sin(t);a[h+0]=e,a[h+1]=i,h+=2}this.AG={vertexBuffer:this.PB.iE(a),drawMode:this.PB.gl.TRIANGLE_FAN,drawLength:362}}Er(){const t=this.hl(),e=this.Xe,i=this.dz.fillStyleSolid(t),s=this.dz.fillStylePaletted(t),r=i||s,n=this.XN.C(),o=this.XN.o,a=this.li.C(),h=this.li.o;return this.hD.uE(this.oi),this.Xb.Er(),this.Xb.eG?((t||o)&&(this.yV.fill=r?{shader:this.PB.eR(Bv["2D"],Bv.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:dh(this.oi),normalSource:void 0}),s&&Bv.PolarHeatmap({interpolation:"bilinear"===n&&"bilinear",intensityTextureType:this.PB.KD?"float":"ubyte",littleEndian:this.PB.IS_MACHINE_LITTLE_ENDIAN,flipXY:"sectors"===this.Fa.dataOrder,lut:s.lut}),i&&Bv.PolarHeatmap({dataType:"uniform"})),fillStylePaletted:s,fillStyleSolid:i}:void 0),h&&(this.yV.mousePicking=a?{shader:this.PB.eR(Bv["2D"],Bv.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:dh(this.oi),normalSource:void 0}),Bv.MousePicking())}:void 0),this.al(e),this.XN.o=!1,this.li.o=!1,this):this}pu(t,e){var i;const{vertexBuffer:s,drawLength:r,drawMode:n}=this.AG,o=this.Xb.eG;if(!this.yV.fill||!o)return{};const{fillStylePaletted:a,fillStyleSolid:h}=this.yV.fill,l=1===t?null===(i=this.yV.mousePicking)||void 0===i?void 0:i.shader:this.yV.fill.shader;if(!l)return{};const c=this.oi.le(),u=Math.min(c.start,c.end),d=Math.max(c.start,c.end),f=Math.min(this.Fa.amplitudeStart,this.Fa.amplitudeStart+(this.Fa.annuli-1)*this.Fa.amplitudeStep),g=Math.max(this.Fa.amplitudeStart,this.Fa.amplitudeStart+(this.Fa.annuli-1)*this.Fa.amplitudeStep);let p;return p=c.end>c.start?Math.min(g,d)-c.start:Math.max(f,u)-c.start,this.PB.Hu(l).eE(l,(i,l,c,u)=>{if(this.PB.rE(i("uScale"),this.hD.aE()).rE(i("uDisp"),this.hD.lE()).oE(i("uIsHighlighted"),1===t||2===t?0:this.Ai).wI(i("uHighlightColorOffset"),1===t||2===t?Os:this.Si).oE(i("uRenderEffectMask"),2===t?1:0).rE(u("uViewportSize"),[this.hz._t().x*this.PB.GR()/(1===t?this.gi.Fa.Pa:1),this.hz._t().y*this.PB.GR()/(1===t?this.gi.Fa.Pa:1)]).rE(i("uScaling"),[p,p]).rE(i("uTranslationAxis"),[0,0]).hE(s,void 0,{location:l("aPos"),size:2}).oE(u("uAngleOffset"),this.oi.Ae()%(2*Math.PI)).oE(u("uAngleDirection"),this.oi.de()?1:-1).oE(u("uSectors"),this.Fa.sectors).oE(u("uAnnuli"),this.Fa.annuli),1===t)this.PB.PE(i("uFirstId"),e).kO(c,1);else{if(a){const t=this.Xb.iG;this.PB.oE(i("uAmplitudeStart"),this.Fa.amplitudeStart).oE(i("uAmplitudeStep"),this.Fa.amplitudeStep).oE(i("uAmplitudeAxisStart"),this.oi.le().start).oE(i("uAmplitudeAxisEnd"),this.oi.le().end).BO(c,a.lut,t).nE(i("uTileIntensityValues"),o.gridTiles[0].intensityDataTexture,0)}h&&this.PB.wI(i("uColor"),h.getColor())}return this.PB.Mk(n,r),!0}),{idCount:1}}wi(){return this.Xb.wi()}Su(t,e,i,s,r){return{}}hp(t){return this.Xb.hp(t),this}zi(){return this.Xb.zi(),this}dispose(){return super.dispose(),this.Xb.dispose(),this.yV={},this.PB.gE(this.AG.vertexBuffer),this}mu(){return this.dispose(),this}Ke(t){return super.Ke(t),this.Xb.Ke(this.Xe),this}dd(t){const e=this.Fa.amplitudeStart,i=this.Fa.amplitudeStart+(this.Fa.annuli-1)*this.Fa.amplitudeStep,s=Math.min(e,i),r=Math.max(e,i);(t.angle<0||t.angle>360||t.amplitude<s||t.amplitude>r)&&(t.angle=Qr(t.angle,0,360),t.amplitude=Qr(t.amplitude,r,r));let n=Math.round((t.angle-0)/360*this.Fa.sectors);n>=this.Fa.sectors&&(n=0);const o=Math.round((t.amplitude-e)/(i-e)*(this.Fa.annuli-1));return{iAnnulus:o,iSector:n,cellValue:this.aG(o,n),angle:n*(360/this.Fa.sectors),amplitude:e+o*(i-e)/(this.Fa.annuli-1)}}Jb(t){const e=this.Fa.amplitudeStart,i=this.Fa.amplitudeStart+(this.Fa.annuli-1)*this.Fa.amplitudeStep,s=Math.min(e,i),r=Math.max(e,i);(t.angle<0||t.angle>360||t.amplitude<s||t.amplitude>r)&&(t.angle=Qr(t.angle,0,360),t.amplitude=Qr(t.amplitude,r,r));const n=(t.angle-0)/360*this.Fa.sectors,o=(t.amplitude-e)/(i-e)*(this.Fa.annuli-1),a=Math.floor(n),h=Math.floor(o),l={point:{x:h,y:a},value:this.aG(h,a)},c={point:{x:h,y:a+1},value:this.aG(h,a+1)},u={point:{x:h+1,y:a},value:this.aG(h+1,a)},d={point:{x:h+1,y:a+1},value:this.aG(h+1,a+1)},f=Ra({x:o,y:n},l,c,u,d);if(void 0!==f)return{iAnnulus:h,iSector:a,cellValue:f,angle:t.angle,amplitude:t.amplitude}}aG(t,e){const i="annuli"===this.Fa.dataOrder?t:e,s="annuli"===this.Fa.dataOrder?e:t;for(let r=0;r<this.Xb.tG.gridTiles.length;r+=1){const t=this.Xb.tG.gridTiles[r];if(i>=t.iFirstVector.primary&&i<=t.iFirstVector.primary+t.sizeHeatmapDataVectors.primary-1&&s>=t.iFirstVector.secondary&&s<=t.iFirstVector.secondary+t.sizeHeatmapDataVectors.secondary-1){const e=i-t.iFirstVector.primary,r=s-t.iFirstVector.secondary,n=e*t.sizeHeatmapDataVectors.secondary+r;return t.intensityData[n]}}return 0}Hi(){return 0}ji(){return 0}Xi(){return 0}Wi(){return 0}oc(){return 0}ac(){return 0}}class fb extends fx{constructor(t){super(t);const{vertices:e,drawMode:i,drawSize:s}=this.hV();this.rV=t.iE(e),this.oV=s,this.aV=i}Hu(t){return this.PB.hE(this.rV,0,{location:t.attribute("aCurveOrBaseline"),size:1},{location:t.attribute("aSegmentSide"),size:1}),this}Mk(t,e,i){return this.PB.XE(void 0!==e?e:this.aV,i||0,this.oV,t),this}hV(){return{vertices:new Float32Array([1,0,0,0,0,1,0,1,1,1,1,0]),drawMode:this.PB.gl.TRIANGLES,drawSize:6}}wR(){this.PB.gE(this.rV)}}const gb=t=>{let e=t.xE.SR.get(void 0);return e||(e=new fb(t),t.xE.SR.set(void 0,e),e)};class pb extends fx{constructor(t,e,i,s,r){super(t),this.aV=i,this.gG=e.length,this.bB=t.iE(xn(e,!1)),this.vG=s,r&&(this.yG=l(l({},r),{},{bB:t.iE(r.iM,!1),gG:r.iM.length/4}))}pG(t){return t>1}Mk(t,e,i,s,r,n){return"object"==typeof r?e?this.PB.YE(t.attribute("aOffsetScale"),e,1,i*Float32Array.BYTES_PER_ELEMENT).rE(t.uniform(ev),[r.width,r.height]):this.PB.oE(t.uniform("uOffsetScale"),r.scale).rE(t.uniform(ev),[r.width,r.height]):n?e?this.PB.YE(t.attribute("".concat(pb.mG,"Amount")),e,1,i*Float32Array.BYTES_PER_ELEMENT):this.PB.oE(t.uniform("".concat(pb.mG,"Amount")),r):this.PB.oE(t.uniform("uPointSize"),r),n?this.PB.hE(this.bB,0,{location:t.attribute(pb.mG),size:2}).XE(this.aV,0,this.gG,s):this.PB.Mk(this.PB.gl.POINTS,s),this}SG(t,e,i,s,r,n){return!(!this.yG||!r||(e?this.PB.YE(t.attribute("".concat(pb.mG,"Amount")),e,1):this.PB.oE(t.uniform("".concat(pb.mG,"Amount")),s),this.PB.oE(t.uniform("".concat(pb.bG,"Amount")),n).hE(this.yG.bB,0,{location:t.attribute(pb.mG),size:2},{location:t.attribute(pb.bG),size:2}).XE(this.yG.aV,0,this.yG.gG,i),0))}wR(){var t;this.PB.gE(this.bB),this.PB.gE(null===(t=this.yG)||void 0===t?void 0:t.bB)}}pb.mG="aFillOffset",pb.bG="aBorderOffset";const yb=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=[As(-.5,-.5),As(.5,-.5),As(.5,.5),As(-.5,.5)];return new pb(t,i,t.gl.TRIANGLE_FAN,e,{iM:[-.5,-.5,0,0,-.5,-.5,-1,-1,.5,-.5,0,0,.5,-.5,1,-1,.5,.5,0,0,.5,.5,1,1,-.5,.5,0,0,-.5,.5,-1,1,-.5,-.5,0,0,-.5,-.5,-1,-1],aV:t.gl.TRIANGLE_STRIP})},mb=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=.05,s=[As(-.5,-.05),As(.5,-.05),As(.5,i),As(.5,i),As(-.5,i),As(-.5,-.05),As(-.05,-.5),As(i,-.5),As(i,-.05),As(i,-.05),As(-.05,-.05),As(-.05,-.5),As(-.05,.5),As(i,.5),As(i,i),As(i,i),As(-.05,i),As(-.05,.5)];return new pb(t,s,t.gl.TRIANGLES,e,{iM:[-.05,.5,0,0,-.05,.5,-1,1,i,.5,0,0,i,.5,1,1,i,i,0,0,i,i,1,1,.5,i,0,0,.5,i,1,1,.5,-.05,0,0,.5,-.05,1,-1,i,-.05,0,0,i,-.05,1,-1,i,-.5,0,0,i,-.5,1,-1,-.05,-.5,0,0,-.05,-.5,-1,-1,-.05,-.05,0,0,-.05,-.05,-1,-1,-.5,-.05,0,0,-.5,-.05,-1,-1,-.5,i,0,0,-.5,i,-1,1,-.05,i,0,0,-.05,i,-1,1,-.05,.5,0,0,-.05,.5,-1,1],aV:t.gl.TRIANGLE_STRIP})},vb=(t,e,i)=>{if(hh(t))return vb(La.Square,e,i);let s=e.xE.vR.get(t);if(t===La.Circle||t===La.HollowCircle){const r=i<=3?4:i<=5?8:i<=10?16:24;return t===La.Circle?(s=e.xE.yR.get(r)||function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=2*Math.PI/e,r=[],n=[];r.push({x:0,y:0});for(let o=0;o<=e;o+=1){const t=o*s,e=Math.cos(t),i=Math.sin(t),a=.5*e,h=.5*i;r.push({x:a,y:h}),n.push(a,h,0,0,a,h,e,i)}return new pb(t,r,t.gl.TRIANGLE_FAN,i,{iM:n,aV:t.gl.TRIANGLE_STRIP})}(e,r),e.xE.yR.set(r,s),s):(s=e.xE.pR.get(r)||function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=[],r=2*Math.PI/e;for(let n=0;n<=e;n+=1){const t=n*r,e=Math.cos(t),i=Math.sin(t);s.push({x:.5*e,y:.5*i}),s.push({x:.3*e,y:.3*i})}return new pb(t,s,t.gl.TRIANGLE_STRIP,i,void 0)}(e,r),e.xE.pR.set(r,s),s)}if(!s){switch(t){case La.Triangle:s=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=[{x:-.5773502691892515,y:.3333333333333333},{x:0,y:-.6666666666666666},{x:.5773502691892515,y:.3333333333333333}];return new pb(t,i,t.gl.TRIANGLES,e,{iM:[i[0].x,i[0].y,0,0,i[0].x,i[0].y,2*i[0].x,2*i[0].y,i[1].x,i[1].y,0,0,i[1].x,i[1].y,2*i[1].x,2*i[1].y,i[2].x,i[2].y,0,0,i[2].x,i[2].y,2*i[2].x,2*i[2].y,i[0].x,i[0].y,0,0,i[0].x,i[0].y,2*i[0].x,2*i[0].y],aV:t.gl.TRIANGLE_STRIP})}(e);break;case La.Square:s=yb(e);break;case La.Plus:s=mb(e);break;case La.Cross:s=mb(e,45);break;case La.Diamond:s=yb(e,45);break;case La.Arrow:s=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=.05,s=[As(-.05,-.5),As(i,-.5),As(i,.45),As(i,.45),As(-.05,.45),As(-.05,-.5),As(-.5,0),As(-.4,0),As(0,.4),As(0,.4),As(0,.5),As(-.5,0),As(.5,0),As(.4,0),As(0,.4),As(0,.4),As(0,.5),As(.5,0)];return new pb(t,s,t.gl.TRIANGLES,e,{iM:[-.5,0,0,0,-.5,0,-2,-1,0,.5,0,0,0,.5,0,1,.5,0,0,0,.5,0,2,-1,.4,0,0,0,.4,0,0,-1,i,.355,0,0,i,.355,1,-2,i,-.5,0,0,i,-.5,1,-1,-.05,-.5,0,0,-.05,-.5,-1,-1,-.05,.355,0,0,-.05,.355,-1,-2,-.4,0,0,0,-.4,0,0,-1,-.5,0,0,0,-.5,0,-2,-1],aV:t.gl.TRIANGLE_STRIP})}(e);break;case La.Star:s=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new pb(t,[{x:0,y:0},{x:0,y:.5},{x:.1,y:.1},{x:.5,y:.1},{x:.2,y:-.1},{x:.3,y:-.5},{x:0,y:-.25},{x:-.3,y:-.5},{x:-.2,y:-.1},{x:-.5,y:.1},{x:-.1,y:.1},{x:0,y:.5}],t.gl.TRIANGLE_FAN,e,{iM:[0,.5,0,0,0,.5,0,1,.1,.1,0,0,.1,.1,1,1,.5,.1,0,0,.5,.1,2,1,.2,-.1,0,0,.2,-.1,1,-1,.3,-.5,0,0,.3,-.5,1,-2,0,-.25,0,0,0,-.25,0,-1,-.3,-.5,0,0,-.3,-.5,-1,-2,-.2,-.1,0,0,-.2,-.1,-1,-1,-.5,.1,0,0,-.5,.1,-2,1,-.1,.1,0,0,-.1,.1,-1,1,0,.5,0,0,0,.5,0,1],aV:t.gl.TRIANGLE_STRIP})}(e);break;case La.Minus:s=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=.05,s=[As(-.5,-.05),As(.5,-.05),As(.5,i),As(.5,i),As(-.5,i),As(-.5,-.05)];return new pb(t,s,t.gl.TRIANGLES,e,{iM:[-.5,-.05,0,0,-.5,-.05,-1,-1,.5,-.05,0,0,.5,-.05,1,-1,.5,i,0,0,.5,i,1,1,-.5,i,0,0,-.5,i,-1,1,-.5,-.05,0,0,-.5,-.05,-1,-1],aV:t.gl.TRIANGLE_STRIP})}(e);break;default:return Gn(0,"LightningChart JS unidentified point shape")}e.xE.vR.set(t,s)}return s};class xb extends pc{constructor(t,e,i,s){super(t,e,i,s,[{type:"DataPattern",args:{pattern:"ProgressiveX"}}]),this.xG=$l.fillStyle,this.MG=Fs("bottom"),this.wG=$l.fillStyle,this._G=Lr,this.kG=Fs(La.Circle),this.CG=Fs(5),this.TG=Fs(0),this.FG=Fs(void 0),this.yw=!0,this.IG={x:0,y:0}}Pw(t){this.MG.C()!==t&&this.MG._(t)}Pd(t){return this.xG=rc(this.xG,t),this}xw(){return this.xG}PG(){return nc(this.LG,this.xG)}BG(){return nc(this.DG,this.wG)}EG(){return this._G!==this.OG}Id(t){return this.wG=rc(this.wG,t),Pr(this.wG)&&(this.Bd(La.Square),this.Nd(1)),this}Od(){return this.wG}zd(t){return this._G="function"==typeof t?t(this._G):t,this}Vd(){return this._G}Bd(t){return this.kG._(t),hh(this.kG.C())&&this.Nd(1),this}Dd(){return this.kG.C()}Nd(t){return this.CG._(t),this}Mw(){return this.CG.C()}Rd(t){return this.TG._(t),this}Ed(){return this.TG.C()}OA(t){return this.IG=t,this}ww(){return this.IG}gw(t){return this.FG._(t),this}_w(){return this.FG.C()}}class bb extends Hx{constructor(t,e){super(t,e),this.NV=!1,this.GV={zG:!1,VG:0},this.UV=t instanceof rr?{type:"linear",scale:t}:{type:"unknown"},this.VV.Mi("DataPattern",t=>{!1===t.allowDataGrouping&&(this.NV=!0)})}NG(t,e,i){const s=null==t?void 0:t.Hu(e),r=null==s?void 0:s.Zu,n=null==s?void 0:s.Ju,o=null==t?void 0:t.ku,a=null==t?void 0:t._u,h=null==t?void 0:t.ju(e);if(!t||this.NV||!h||"linear"!==this.UV.type||!r||!n||void 0===o||void 0===a||!i){const t=this.GV.zG;return this.GV={zG:!1,VG:null!=o?o:0},{cpStateChanged:t,cpActive:!1}}const c=Da(h),u=t.ad(e),d=t.od(e),f=u?u[c]:void 0,g=d?d[c]:void 0;if(o<2||void 0===f||void 0===g||g===f){const t=this.GV.zG;return this.GV={zG:!1,VG:null!=o?o:0},{cpStateChanged:t,cpActive:!1}}const p=this.calculateAvgStepBetweenDataPoints(g,f,o),y=this.UV.scale,m=Math.abs(y.ri()[c]),v=m/p,x=Math.floor(.8*v),b=x*p,S=x>=4,A=this.GV.zG?this.GV.GG/m<1.5:void 0,E=this.GV.zG&&x>this.GV.$G?x/this.GV.$G>=2:void 0;let k;return!0===this.GV.zG?A?E&&(k={zG:!0,GG:b,$G:x,VG:o}):k=S?{zG:!0,GG:b,$G:x,VG:o}:{zG:!1,VG:o}:S&&(k={zG:!0,GG:b,$G:x,VG:o}),this.GV=k||l(l({},this.GV),{},{VG:o}),!!k&&this.WV(),{cpStateChanged:!!k,cpActive:this.GV.zG}}UG(t,e){var i,s,r;const n=null==t?void 0:t.Hu(e),o=n.dataPattern,a=n.Zu,h=n.Ju,l=t.Cu,c=t.ku,u=t._u,d=t.Bu;if(this.NV||!this.GV.zG||!a||!h||void 0===o)return;const f=Da(o),g=za(o),p="x"===f?a:h,y="x"===f?h:a,m=p.length,v="x"===f?this.oi.x:this.oi.y,x=this.GV.GG,b=Math.min(v.getInnerStart(),v.getInnerEnd()),S=Math.max(v.getInnerStart(),v.getInnerEnd()),A=Tc(b,S,p,l,c,u,za(o)?"progressive":"regressive",1);if(!A)return;const E=p[A.iFirstSampleDataArray];if(this.YG){if(this.YG.jG<A.iFirstSample){const t=Math.min(Math.floor((E-this.YG.xl)/x),this.YG.HG);if(t>0)if(this.YG.HG-=t,this.YG.HG>0){this.YG.WG.splice(0,2*t),this.YG.XG.splice(0,2*t),this.YG.ZG&&this.YG.ZG.splice(0,2*t),this.YG.JG&&this.YG.JG.splice(0,2*t),this.YG.xl+=t*x;const e=Fc(this.YG.xl,Math.max(l-1-m+1,0),l-1,g,t=>p[Cc(t,l,m)]),i=Cc(e,l,m);this.YG.jG=p[i]>=this.YG.xl?e:e+1}else this.YG=void 0}if(void 0!==(null===(i=this.YG)||void 0===i?void 0:i.QG)&&this.YG.QG>A.iLastSample){const t=p[A.iLastSampleDataArray],e=Math.min(Math.floor((this.YG.xl+this.YG.HG*x-t)/x),this.YG.HG);if(e>0)if(this.YG.HG-=e,this.YG.HG>0){for(let s=0;s<2*e;s+=1)this.YG.WG.pop(),this.YG.XG.pop(),this.YG.ZG&&this.YG.ZG.pop(),this.YG.JG&&this.YG.JG.pop();const t=Fc(this.YG.xl+this.YG.HG*x,Math.max(l-1-m+1,0),l-1,g,t=>p[Cc(t,l,m)]),i=Cc(t,l,m);this.YG.QG=p[i]<=this.YG.xl+this.YG.HG*x?t:t-1}else this.YG=void 0}}const k=this.YG||{xl:E,HG:0,WG:[],XG:[],ZG:n.Qu?[]:void 0,JG:n.td?[]:void 0,KG:n.qu?[]:void 0,qG:n.Ku?[]:void 0,jG:A.iFirstSample,QG:void 0},w=(t,e,i,s)=>{let r=Math.min(t,t+i*x),n=Math.max(t,t+i*x);const o=[];if(i<0&&r<b||i>0&&n>S)return o;let a=s,h=no,c=no,u=-1,f=ro,g=ro,v=-1,E=0;for(;a<=A.iLastSample&&a>=A.iFirstSample;){const s=a%m,A=p[s],w=y[s];if(d&&Number.isNaN(A))a+=e;else if(r<=A&&A<=n)E+=1,d&&Number.isNaN(w)||(w>c&&(h=A,c=w,u=a),w<g&&(f=A,g=w,v=a)),a+=e;else{if(E>0)h=h===no?Number.NaN:h,c=c===no?Number.NaN:c,f=f===ro?Number.NaN:f,g=g===ro?Number.NaN:g,u<v?(o.push({iFirst:u,iSecond:v}),e>0?(k.WG.push(h),k.XG.push(c),k.WG.push(f),k.XG.push(g)):(k.WG.unshift(f),k.XG.unshift(g),k.WG.unshift(h),k.XG.unshift(c))):(o.push({iFirst:v,iSecond:u}),e>0?(k.WG.push(f),k.XG.push(g),k.WG.push(h),k.XG.push(c)):(k.WG.unshift(h),k.XG.unshift(c),k.WG.unshift(f),k.XG.unshift(g)));else{const t=e>0?k.QG:k.jG;if(void 0===t)o.push({iFirst:0,iSecond:0}),e>0?(k.WG.push(Number.NaN),k.XG.push(Number.NaN),k.WG.push(Number.NaN),k.XG.push(Number.NaN)):(k.WG.unshift(Number.NaN),k.XG.unshift(Number.NaN),k.WG.unshift(Number.NaN),k.XG.unshift(Number.NaN));else{const i=Cc(t,l,m),s=p[i],a=y[i],h=Qr((s+A)/2,r,n),c=Qr((h+A)/2,r,n),u=a+(h-s)/(A-s)*(w-a),d=a+(c-s)/(A-s)*(w-a);o.push({iFirst:t,iSecond:t}),e>0?(k.WG.push(h),k.XG.push(u),k.WG.push(c),k.XG.push(d)):(k.WG.unshift(c),k.XG.unshift(d),k.WG.unshift(h),k.XG.unshift(u))}}if(k.HG+=1,e>0?k.QG=a-1:(k.jG=a+1,k.xl=i>0?n:r),r=Math.min(t+o.length*i*x,t+(o.length+1)*i*x),n=Math.max(t+o.length*i*x,t+(o.length+1)*i*x),E=0,h=no,c=no,u=-1,f=ro,g=ro,v=-1,i<0&&r<b||i>0&&n>S)break}}return o},M=w(k.xl+(za(o)?1:-1)*k.HG*x,1,1*(za(o)?1:-1),void 0!==(null===(s=this.YG)||void 0===s?void 0:s.QG)?this.YG.QG+1:A.iFirstSample),C=w(k.xl,-1,-1*(za(o)?1:-1),void 0!==(null===(r=this.YG)||void 0===r?void 0:r.jG)?this.YG.jG-1:A.iFirstSample);if(0===C.length&&0===M.length)return;const T=n.Qu&&k.ZG?[n.Qu,k.ZG]:void 0,F=n.td&&k.JG?[n.td,k.JG]:void 0,P=n.qu&&k.KG?[n.qu,k.KG]:void 0,B=n.Ku&&k.qG?[n.Ku,k.qG]:void 0;if(T||F||P||B){for(const t of M){const e=Cc(t.iFirst,l,m),i=Cc(t.iSecond,l,m);T&&T[1].push(T[0][e],T[0][i]),F&&F[1].push(F[0][e],F[0][i]),P&&P[1].push(P[0][e],P[0][i]),B&&B[1].push(B[0][e],B[0][i])}for(const t of C){const e=Cc(t.iFirst,l,m),i=Cc(t.iSecond,l,m);T&&T[1].unshift(T[0][i],T[0][e]),F&&F[1].unshift(F[0][i],F[0][e]),P&&P[1].unshift(P[0][i],P[0][e]),B&&B[1].unshift(B[0][i],B[0][e])}}return this.YG=k.HG>0?k:void 0,{t$:"x"===f?k.WG:k.XG,i$:"y"===f?k.WG:k.XG,OP:k.ZG,s$:k.JG,U:k.KG,Sl:k.qG}}WV(){this.YG=void 0}KV(){}}class Sb extends xb{constructor(t,e,i,s){super(t,e,i,s),this.hD=new Ax,this.gN=new bb(this.oi,this),this.dz=gh({lineStyleSolid:()=>eh(this.iu)&&this.iu,lineStyleDashed:()=>nh(this.iu)&&this.iu,strokeFillSolid:()=>{const t=this.iu.getFillStyle();return ha(t)&&t},strokeFillLinearGradient:()=>{const t=this.iu.getFillStyle();return qs(t)&&t},strokeFillRadialGradient:()=>{const t=this.iu.getFillStyle();return Ws(t)&&t},strokeFillIndividual:()=>{const t=this.iu.getFillStyle();return ca(t)&&t},strokeFillPaletted:()=>{const t=this.iu.getFillStyle();return fa(t)&&t},areaFillSolid:()=>ha(this.xG)&&this.xG,areaFillLinearGradient:()=>qs(this.xG)&&this.xG,areaFillRadialGradient:()=>Ws(this.xG)&&this.xG,areaFillIndividual:()=>ca(this.xG)&&this.xG,areaFillPaletted:()=>fa(this.xG)&&this.xG,markerFillSolid:()=>ha(this.wG)&&this.wG,markerFillLinearGradient:()=>qs(this.wG)&&this.wG,markerFillRadialGradient:()=>Ws(this.wG)&&this.wG,markerFillPaletted:()=>fa(this.wG)&&this.wG,markerFillIndividual:()=>ca(this.wG)&&this.wG,markerFillImage:()=>Pr(this.wG)&&this.wG,markerShapeIcon:()=>{const t=this.kG.C();return hh(t)&&t},markerStrokeFillSolid:()=>{const t=this._G.getFillStyle();return ha(t)&&t}}),this.Td=Fs(void 0),this.e$=[],this.vc=!1,this.h$=[],this.r$=void 0,this.UN=(t,e,i)=>{var s;const r=null===(s=this.n$)||void 0===s?void 0:s.shapeIcon;let n=t,o=e;return r&&(n=r._t().x,o=r._t().y),yx(t,e,n*this.CG.C(),o*this.CG.C(),i)},this.o$=Ab(),this.rz=e,this.yV={type:"none"},this.PB=t.nz(),this.hz=t,this.gV=this.PB.iO}Fd(t,e){var i;return this.gN.WV(),this.a$=void 0,this.r$=void 0,t&&e?(this.Td._(qn(t,this.Td.C(),()=>({change:t=>{this.e$.push({min:t.iDataStart,max:t.iDataEnd}),this.a$&&this.h$.length>1e3&&Date.now()-this.a$.l$>5e3&&(this.a$=void 0,this.h$.length=0),this.a$&&this.h$.push({min:t.iDataStart,max:t.iDataEnd})},clear:()=>{this.vc=!0,this.a$=void 0,this.r$=void 0,this.gN.WV()},loop:()=>{this.a$=void 0,this.h$.length=0}}))),this.mw=e,this):(null===(i=this.Td.C())||void 0===i||i.Ki(),this.Td._(void 0),this.mw=void 0,this)}tl(){var t;const e=null===(t=this.Td.C())||void 0===t?void 0:t.qi,i=null==e?void 0:e.ju(this.mw);return i&&{Tw:Da(i),Fw:()=>this.Yv()}}Yv(){var t,e,i,s,r,n,o,a,h,l,c,u,d,f,g,p,y,m,v,x,b,S,A,E,k,w,M,C,T,F,P,B,L;const D=null===(t=this.Td.C())||void 0===t?void 0:t.qi,z=this.Td.o,I=this.mw,R=null==D?void 0:D.Hu(I),_=null==R?void 0:R.Zu,V=null==R?void 0:R.Ju;if(!(D&&_&&V&&I))return;const N=R.dataPattern,O=N&&this.oi[Da(N)],Y=R.td,G=R.Qu,X=R.qu,U=R.Ku,H=D.Cu,j=D.ku,W=D._u,Z=z||this.ll()||this.PG()||this.BG()||this.EG()||this.MG.o,J=this.dz.lineStyleSolid(Z),q=this.dz.lineStyleDashed(Z),Q=J||q,K=Q&&Q.getThickness(),$=this.dz.strokeFillSolid(Z),tt=this.dz.strokeFillLinearGradient(Z),et=this.dz.strokeFillRadialGradient(Z),it=this.dz.strokeFillIndividual(Z),st=this.dz.strokeFillPaletted(Z),rt=$||tt||et||it||st,nt=this.dz.areaFillSolid(Z),ot=this.dz.areaFillLinearGradient(Z),at=this.dz.areaFillRadialGradient(Z),ht=this.dz.areaFillIndividual(Z),lt=this.dz.areaFillPaletted(Z),ct=nt||ot||at||ht||lt,ut=this.dz.markerFillSolid(Z),dt=this.dz.markerFillLinearGradient(Z),ft=this.dz.markerFillRadialGradient(Z),gt=this.dz.markerFillPaletted(Z),pt=this.dz.markerFillIndividual(Z),yt=this.dz.markerFillImage(Z),mt=ut||dt||ft||gt||pt||yt,vt=this.dz.markerStrokeFillSolid(Z),xt=this.kG.C(),bt=this.kG.o,St=this.dz.markerShapeIcon(bt),At=this.CG.C(),Et=this.CG.o,kt=this.FG.o,wt=this.e$.length>0||kt,Mt=this.vc||z,Ct=Mt?[D.rd()]:(t=>{const e=[];for(const i of t){let t=!1;for(const s of e)if(i.min>=s.min&&i.min<=s.max||i.max>=s.min&&i.max<=s.max){s.min=Math.min(s.min,i.min),s.max=Math.min(s.max,i.max),t=!0;break}t||e.push(i)}return e})(this.e$),Tt=!!q,Ft=this.li.C(),Pt=this.li.o;z&&Object.entries(I).forEach(t=>{let[e,i]=t;if(D.Ou&&!D.Ou[i])throw new Error("LightningChart JS data supply error - key ".concat(i," does not exist in data set. Mapped to '").concat(e,"'"))}),(z||Z)&&((st&&"value"===st.lookUpProperty||lt&&"value"===lt.lookUpProperty||gt&&"value"===gt.lookUpProperty)&&void 0===I.lookupValue&&Ur.console.warn('LightningChart JS warning - using PalettedFill with lookUpProperty=value, but there is no data mapping for "lookupValue"'),(it||ht||pt)&&void 0===I.color&&Ur.console.warn('LightningChart JS warning - using IndividualPointFill, but there is no data mapping for "color"'));const Bt=this.yw&&(!!Q||!!ct),{cpStateChanged:Lt,cpActive:Dt}=this.gN.NG(D,I,Bt);if(N&&Dt&&O&&(Lt||Mt||wt||O.et||Z)){const t=this.gN.UG(D,I);if(t){const l=!(Lt||Mt||Z||z);this.c$=Eb(this.PB,[t.t$,t.i$],t.OP,t.s$,t.U,t.Sl,Tt,this.c$,l,N,1e3,this.oi.Ot(),t=>vn(t,this.oi.Ot())),this.u$={min:ro,max:no};const c="x"===Da(N)?t.i$:t.t$,u=c.length;for(let t=0;t<u;t+=1){const e=c[t];D.Bu&&Number.isNaN(e)||(this.u$.min=Math.min(this.u$.min,e),this.u$.max=Math.max(this.u$.max,e))}(null===(e=this.d$)||void 0===e?void 0:e.bufferX)!==this.c$.bufferX&&(this.PB.gE(null===(i=this.d$)||void 0===i?void 0:i.bufferX),this.PB.gE(null===(s=this.d$)||void 0===s?void 0:s.bufferY),this.PB.gE(null===(r=this.d$)||void 0===r?void 0:r.bufferColors),this.PB.gE(null===(n=this.d$)||void 0===n?void 0:n.bufferLengthSoFar),this.PB.gE(null===(o=this.d$)||void 0===o?void 0:o.bufferRotations),this.PB.gE(null===(a=this.d$)||void 0===a?void 0:a.bufferLookupValues),this.PB.gE(null===(h=this.d$)||void 0===h?void 0:h.bufferSizes)),this.d$=void 0}}if(N&&O&&!Dt){if(Lt||Mt||wt||O.et||kt||Z){const t=Math.min(O.getInnerStart(),O.getInnerEnd()),e=Math.max(O.getInnerStart(),O.getInnerEnd()),i="x"===Da(N)?_:V,s="x"===Da(N)?V:_,r=Tc(t,e,i,H,j,W,za(N)?"progressive":"regressive",1);if(!this.f$||(null==r?void 0:r.iFirstSample)!==this.f$.iFirstSample||r.iLastSample!==this.f$.iLastSample||Mt){const t=this.o$(R,this.f$,r,Mt||Lt,i,s,D.Bu);this.u$=t.visibleBoundaries,this.A$=t.avgPointGap}if(this.f$=r,void 0===r)this.PB.gE(null===(l=this.c$)||void 0===l?void 0:l.bufferX),this.PB.gE(null===(c=this.c$)||void 0===c?void 0:c.bufferY),this.PB.gE(null===(u=this.c$)||void 0===u?void 0:u.bufferColors),this.PB.gE(null===(d=this.c$)||void 0===d?void 0:d.bufferLengthSoFar),this.PB.gE(null===(f=this.c$)||void 0===f?void 0:f.bufferRotations),this.PB.gE(null===(g=this.c$)||void 0===g?void 0:g.bufferLookupValues),this.PB.gE(null===(p=this.c$)||void 0===p?void 0:p.bufferSizes),this.c$=void 0,this.PB.gE(null===(y=this.d$)||void 0===y?void 0:y.bufferX),this.PB.gE(null===(m=this.d$)||void 0===m?void 0:m.bufferY),this.PB.gE(null===(v=this.d$)||void 0===v?void 0:v.bufferColors),this.PB.gE(null===(x=this.d$)||void 0===x?void 0:x.bufferLengthSoFar),this.PB.gE(null===(b=this.d$)||void 0===b?void 0:b.bufferRotations),this.PB.gE(null===(S=this.d$)||void 0===S?void 0:S.bufferLookupValues),this.PB.gE(null===(A=this.d$)||void 0===A?void 0:A.bufferSizes),this.d$=void 0,this.g$=r;else if(Lt||Mt||!this.g$||r.iFirstSample<this.g$.iFirstSample||r.iLastSample>this.g$.iLastSample||Z){const t=kc({srcLoopArray:_,dataRanges:r.dataRanges,NewArray:R.Wu}),e=kc({srcLoopArray:V,dataRanges:r.dataRanges,NewArray:R.Xu}),i=G?kc({srcLoopArray:G,dataRanges:r.dataRanges,NewArray:Uint32Array}):void 0,s=Y?kc({srcLoopArray:Y,dataRanges:r.dataRanges,NewArray:Float32Array}):void 0,n=X?kc({srcLoopArray:X,dataRanges:r.dataRanges,NewArray:Float32Array}):void 0,o=U?kc({srcLoopArray:U,dataRanges:r.dataRanges,NewArray:Float32Array}):void 0,a=!(Lt||Mt||Z||z),h=Bt||this.Mi("ApplicationType",t=>"InternalUI"===t.type)?1e3:Math.min(null!==(E=D.getMaxSampleCount())&&void 0!==E?E:1e6,1e6);this.d$=Eb(this.PB,[t,e],i,s,n,o,Tt,this.d$,a,N,h,this.oi.Ot(),t=>vn(t,this.oi.Ot()));let l=t,c=e,u=i,d=s;const f=this.FG.C();if(f){const r="spline"===f.type?((t,e,i)=>{const s=Da(i),r="x"===s?t.xValues:t.yValues,n="x"===s?t.yValues:t.xValues,{lookupValues:o,colors:a}=t;if(r.length<=2)return{xValues:Array.from(t.xValues),yValues:Array.from(t.yValues),lookupValues:o?Array.from(o):void 0,colors:a?Array.from(a):void 0};const h=((t,e)=>{const i=1e-5,s=t.length-1,r=Array(s);if(s>1){let n=As(0,0),o=As(0,0),a=As(0,0),h=To(Do({x:t.elementAt(1),y:e.elementAt(1)},{x:t.elementAt(0),y:e.elementAt(0)}));const l=3;let c=0,u=0;for(let d=0;d<s;d+=1){const f=t.elementAt(d),g=t.elementAt(d+1),p=e.elementAt(d),y=e.elementAt(d+1),m=Array(4);m[0]={x:f,y:p},m[1]={x:f,y:p},m[3]={x:g,y:y},m[2]={x:g,y:y},a=h,n=o,Number.isNaN(n.y)&&(n=As(0,0));const v=d+2<e.length?e.elementAt(d+2):Number.NaN;if(d+1<s&&!Number.isNaN(v)){const e=t.elementAt(d+2);h=e===g&&v===y?As(0,0):To(Do({x:e,y:v},{x:g,y:y})),o=To(Lo(a,h))}else o=As(0,0);if(y===p)c=0,u=0;else{const t=g-f;c=Math.abs(n.x)>i?Math.abs(t/(l*n.x)):1,u=Math.abs(o.x)>i?Math.abs(t/(l*o.x)):1}m[1]=Lo(Bo(n,c),m[1]),m[2]=Do(m[2],Bo(o,u)),r[d]=m}}return r.length>0?r:[]})(r,n),l=h.length,c=[],u=[],d=[],f=[];for(let g=0;g<l;g+=1){const t=h[g];for(let i=0;i<e;i+=1){const s=i/(e-1),r=s*s,n=r*s,o=1-s,a=o*o,h=a*o;c.push(h*t[0].x+3*s*a*t[1].x+3*r*o*t[2].x+n*t[3].x),u.push(h*t[0].y+3*s*a*t[1].y+3*r*o*t[2].y+n*t[3].y)}}if(o)for(let g=0;g<c.length;g+=1){const t=Math.round(g/e),i=o.elementAt(t);f[g]=i}if(a)for(let g=0;g<c.length;g+=1){const t=Math.round(g/e),i=a.elementAt(t);d[g]=i}return{xValues:"x"===s?c:u,yValues:"x"===s?u:c,lookupValues:o?f:void 0,colors:a?d:void 0}})({xValues:t,yValues:e,lookupValues:s,colors:i},f.resolution||20,N):"step"===f.type?((t,e,i)=>{const{lookupValues:s,colors:r}=t,n=Da(i),o="x"===n?t.xValues:t.yValues,a="x"===n?t.yValues:t.xValues,h=[],l=[],c=[],u=[],d=o.length,f="before"===e?0:"after"===e?1:.5;if(d>0){let t=0,e=o.elementAt(0),i=a.elementAt(0);h[t]=e,l[t]=i,t+=1;for(let s=1;s<d;s+=1){const r=o.elementAt(s),n=a.elementAt(s);if(f<=0)h[t]=e,l[t]=n,t+=1;else{const s=e*(1-f)+r*f;h[t]=s,l[t]=i,t+=1,h[t]=s,l[t]=n,t+=1}h[t]=r,l[t]=n,t+=1,e=r,i=n}}if(s)if("before"===e){u[0]=s.elementAt(0);for(let t=1;t<d;t+=1){const e=s.elementAt(t);u[2*t-1]=e,u[2*t]=e}}else if("middle"===e||"after"===e){u[0]=s.elementAt(0),u[1]=s.elementAt(0);for(let t=1;t<d;t+=1){const e=s.elementAt(t);u[3*t-1]=e,u[3*t]=e,u[3*t+1]=e}}if(r)if("before"===e){c[0]=r.elementAt(0);for(let t=1;t<d;t+=1){const e=r.elementAt(t);c[2*t-1]=e,c[2*t]=e}}else if("middle"===e||"after"===e){c[0]=r.elementAt(0),c[1]=r.elementAt(0);for(let t=1;t<d;t+=1){const e=r.elementAt(t);c[3*t-1]=e,c[3*t]=e,c[3*t+1]=e}}return{xValues:"x"===n?h:l,yValues:"x"===n?l:h,lookupValues:s?u:void 0,colors:r?c:void 0}})({xValues:t,yValues:e,lookupValues:s,colors:i},null!==(k=f.step)&&void 0!==k?k:"middle",N):void 0;l=r?r.xValues:l,c=r?r.yValues:c,u=(null==r?void 0:r.colors)?r.colors:u,d=(null==r?void 0:r.lookupValues)?r.lookupValues:d}this.c$=l===t&&c===e?this.d$:Eb(this.PB,[l,c],u,d,void 0,void 0,Tt,(null===(w=this.c$)||void 0===w?void 0:w.bufferX)===this.d$.bufferX?void 0:this.c$,!(!a||kt||f),N,1e3,this.oi.Ot(),t=>vn(t,this.oi.Ot())),this.g$=r}}}else this.f$=void 0;if(!N&&(Mt||wt||Z)){if(!this.c$||this.c$.bufferSize<D.ku||Tt){const t=void 0!==D.Gu?D.Gu:D.ku;let e,i=0,s=0;if(Tt){const r=kb(_,V,_[0],V[0],0,0);e=this.PB.DE(2*t,r[0],null===(M=this.c$)||void 0===M?void 0:M.bufferLengthSoFar,Float32Array),i=r[1],s=r[2]}this.c$={bufferX:this.PB.DE(t*(this.oi.Ot()?2:1),vn(_,this.oi.Ot()),null===(C=this.c$)||void 0===C?void 0:C.bufferX),bufferY:this.PB.DE(t*(this.oi.Ot()?2:1),vn(V,this.oi.Ot()),null===(T=this.c$)||void 0===T?void 0:T.bufferY),bufferColors:G?this.PB.DE(t,G,null===(F=this.c$)||void 0===F?void 0:F.bufferColors,Uint32Array):void 0,bufferLookupValues:Y?this.PB.DE(t,Y,null===(P=this.c$)||void 0===P?void 0:P.bufferLookupValues,Float32Array):void 0,bufferSizes:X?this.PB.DE(t,X,null===(B=this.c$)||void 0===B?void 0:B.bufferSizes,Float32Array):void 0,bufferRotations:U?this.PB.DE(t,U,null===(L=this.c$)||void 0===L?void 0:L.bufferRotations,Float32Array):void 0,bufferLengthSoFar:e,lengthSoFarX:i,lengthSoFarY:s,bufferSize:t,valueCount:D.ku}}else{const t=this.c$.bufferX,e=this.c$.bufferY;Ct.forEach(i=>{var s,r,n,o;const a=_.subarray(i.min,i.max+1),h=V.subarray(i.min,i.max+1);if(this.PB.RE(t,i.min*(this.oi.Ot()?2:1),vn(a,this.oi.Ot())),this.PB.RE(e,i.min*(this.oi.Ot()?2:1),vn(h,this.oi.Ot())),G&&(null===(s=this.c$)||void 0===s?void 0:s.bufferColors)){const t=G.subarray(i.min,i.max+1);this.PB.RE(this.c$.bufferColors,i.min,t,Uint32Array)}if(Y&&(null===(r=this.c$)||void 0===r?void 0:r.bufferLookupValues)){const t=Y.subarray(i.min,i.max+1);this.PB.RE(this.c$.bufferLookupValues,i.min,t,Float32Array)}if(U&&(null===(n=this.c$)||void 0===n?void 0:n.bufferRotations)){const t=U.subarray(i.min,i.max+1);this.PB.RE(this.c$.bufferRotations,i.min,t,Float32Array)}if(X&&(null===(o=this.c$)||void 0===o?void 0:o.bufferSizes)){const t=X.subarray(i.min,i.max+1);this.PB.RE(this.c$.bufferSizes,i.min,t,Float32Array)}}),this.c$.valueCount=D.ku}this.d$=this.c$}if(Z||Et||bt||Pt){if(rt&&Q&&!1!==K){const t=-1===K?"primitive":"triangulated",e=st?["lookup",st.lookUpProperty,st.lut]:it?"attribute":tt?["gradient",tt]:et?["gradient",et]:"uniform";this.yV="primitive"===t?{type:t,shader:this.PB.eR(Bv["2D"],Bv.Color({dataType:e}),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0,splitPosAttribute:!0}),q&&Bv.StippleTexture),lineStyleSolid:J,lineStyleDashed:q,fillStyleSolid:$,fillStyleLinearGradient:tt,fillStyleRadialGradient:et,fillStyleIndividual:it,fillStylePaletted:st,mousePickingShader:Ft&&this.PB.eR(Bv["2D"],Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0,splitPosAttribute:!0}),q&&Bv.StippleTexture,Bv.MousePicking({useVertexId:!0}))}:"triangulated"===t?{type:t,shader:this.PB.eR(Bv["2D"],Bv.Color({dataType:e}),Bv.LineInstanced2D({axisWorldTranslation:dh(this.oi),normalSource:void 0,splitPosAttribute:!0}),this.gV?Bv.AliasedEdge:void 0,q&&Bv.StippleTextureInstanced),geometry:Nx(this.PB,K),thickness:K,lineStyleSolid:J,lineStyleDashed:q,fillStyleSolid:$,fillStyleLinearGradient:tt,fillStyleRadialGradient:et,fillStyleIndividual:it,fillStylePaletted:st,mousePickingShader:Ft&&this.PB.eR(Bv["2D"],Bv.LineInstanced2D({axisWorldTranslation:dh(this.oi),normalSource:void 0,splitPosAttribute:!0}),q&&Bv.StippleTextureInstanced,Bv.MousePicking())}:{type:"none"}}else this.yV={type:"none"};if(this.v$=ct?{shader:this.PB.eR(Bv["2D"],lt&&Bv.Color({dataType:["lookup",lt.lookUpProperty,lt.lut]}),ht&&Bv.Color({dataType:"attribute"}),nt&&Bv.Color({dataType:"uniform"}),ot&&Bv.Color({dataType:["gradient",ot]}),at&&Bv.Color({dataType:["gradient",at]}),Bv.Area2D({axisWorldTranslation:dh(this.oi),normalSource:void 0,splitPosAttribute:!0,fill:this.MG.C()})),geometry:gb(this.PB),fillStyleSolid:nt,fillStyleLinearGradient:ot,fillStyleRadialGradient:at,fillStyleIndividual:ht,fillStylePaletted:lt,mousePickingShader:Ft&&this.PB.eR(Bv["2D"],Bv.Area2D({axisWorldTranslation:dh(this.oi),normalSource:void 0,splitPosAttribute:!0,fill:this.MG.C()}),Bv.MousePicking())}:void 0,mt){const t=!(!yt&&!St),e=At>1||t,i=X?"attribute":"uniform",s=!e&&Bv.PointSize("uniform"),r=Bv.VertexLocation({offsets:[e&&!t?{directionVar:pb.mG,dataType:i,sizeUnit:"px",symmetric:!0,rotation:{dataType:U?"attribute-deg":"uniform"},useAlignment:!0}:e&&t?{directionVar:pb.mG,dataType:i,sizeUnit:"scale",rotation:{dataType:U?"attribute-deg":"uniform"},useAlignment:!0}:void 0],axisWorldTranslation:dh(this.oi),normalSource:void 0,splitPosAttribute:!0});this.n$={shader:this.PB.eR(Bv["2D"],s,r,ut&&Bv.Color({dataType:"uniform",overrideOpacity:!0,maskTexture:!!St}),dt&&Bv.Color({dataType:["gradient",dt],overrideOpacity:!0,maskTexture:!!St}),ft&&Bv.Color({dataType:["gradient",ft],overrideOpacity:!0,maskTexture:!!St}),gt&&Bv.Color({dataType:["lookup",gt.getLookUpProperty(),gt.getPalette()],overrideOpacity:!0,maskTexture:!!St}),pt&&Bv.Color({dataType:"attribute",overrideOpacity:!0,maskTexture:!!St}),yt&&Bv.Color({dataType:["image",yt],overrideOpacity:!0,maskTexture:!!St})),geometry:vb(xt,this.PB,"uniform"===i?At:25),fillStyleSolid:ut,fillStyleLinearGradient:dt,fillStyleRadialGradient:ft,fillStylePaletted:gt,fillStyleIndividual:pt,fillStyleImage:yt,mousePickingShader:Ft&&this.PB.eR(Bv["2D"],s,r,Bv.MousePicking({useVertexId:!e})),shapeIcon:St,pointSizeAsScale:t,instancedRendering:e,borders:vt&&!t&&{shader:this.PB.eR(Bv["2D"],s,Bv.VertexLocation({offsets:[e&&!t?{directionVar:pb.mG,dataType:i,sizeUnit:"px",symmetric:!0,rotation:{dataType:U?"attribute-deg":"uniform"},useAlignment:!0}:e&&t?{directionVar:pb.mG,dataType:i,sizeUnit:"scale",rotation:{dataType:U?"attribute-deg":"uniform"},useAlignment:!0}:void 0,{directionVar:pb.bG,dataType:"uniform",sizeUnit:"px",symmetric:!0,rotation:{dataType:U?"attribute-deg":"uniform"}}],axisWorldTranslation:dh(this.oi),normalSource:void 0,splitPosAttribute:!0}),Bv.Color({dataType:"uniform",overrideOpacity:!0,maskTexture:!!St})),fillStyleSolid:vt}}}else this.n$=void 0}if((void 0===this.r$||wt)&&Y&&(yh(st)||yh(lt)||yh(gt))){const t=this.r$?Ct:[D.rd()];let e=this.r$?this.r$.max:no,i=this.r$?this.r$.min:ro;const s=Y;t.forEach(t=>{for(let r=t.min;r<=t.max;r+=1){const t=s[r];i=t<i?t:i,e=t>e?t:e}}),this.r$={min:i,max:e}}this.$N=this.PB.DO(this,this.$N,yt,St,Et,this.UN),this.mV=q?this.PB.FO(q.getPattern()):void 0,this.hu(this.iu),this.LG=this.xG,this.DG=this.wG,this.OG=this._G,this.kG.o=!1,this.CG.o=!1,this.e$.length=0,this.vc=!1,this.FG.o=!1,this.Td.o=!1,this.li.o=!1,this.MG.o=!1}Er(){this.Yv();const t=this.dz.strokeFillLinearGradient(!1),e=this.dz.strokeFillRadialGradient(!1),i=this.dz.areaFillLinearGradient(!1),s=this.dz.areaFillRadialGradient(!1),r=this.dz.markerFillLinearGradient(!1),n=this.dz.markerFillRadialGradient(!1);if(this.hD.uE(this.oi),i||s){let t;const e=this.MG.C();t=sc("bottom"===e||"top"===e?{min:{x:this.ji(!1),y:Math.min(this.oi.y.getInnerStart(),this.oi.y.getInnerEnd(),this.Wi(!1),this.Xi(!1))},max:{x:this.Hi(!1),y:Math.max(this.oi.y.getInnerStart(),this.oi.y.getInnerEnd(),this.Wi(!1),this.Xi(!1))}}:{min:{x:Math.min(this.oi.x.getInnerStart(),this.oi.x.getInnerEnd(),this.ji(!1),this.Hi(!1)),y:this.Wi(!1)},max:{x:Math.max(this.oi.x.getInnerStart(),this.oi.x.getInnerEnd(),this.ji(!1),this.Hi(!1)),y:this.Xi(!1)}},{x:this.oc()/2,y:this.ac()/2},this.oi),this.y$=this.PB.VO(i,this,t),this.p$=this.PB.NO(s,this,t)}if(t||e||r||n){const i=sc({min:{x:this.ji(!1),y:this.Wi(!1)},max:{x:this.Hi(!1),y:this.Xi(!1)}},{x:this.oc()/2,y:this.ac()/2},this.oi);this.m$=this.PB.VO(t,this,i),this.S$=this.PB.NO(e,this,i),this.b$=this.PB.VO(r,this,i),this.x$=this.PB.NO(n,this,i)}return this}pu(t,e){var i,s,r,n,o,a,h,l,c,u,d,f,g,p,y,m,v,x,b;const S=this.PB.gl,A=null===(i=this.c$)||void 0===i?void 0:i.bufferX,E=null===(s=this.c$)||void 0===s?void 0:s.bufferY,k=null===(r=this.c$)||void 0===r?void 0:r.bufferColors,w=null===(n=this.c$)||void 0===n?void 0:n.bufferLookupValues,M=null===(o=this.c$)||void 0===o?void 0:o.valueCount,C=null===(a=this.d$)||void 0===a?void 0:a.valueCount,T=null===(h=this.Td.C())||void 0===h?void 0:h.qi,F=null==T?void 0:T.ju(this.mw),P=Math.max((null===(l=this.c$)||void 0===l?void 0:l.valueCount)||0,(null===(c=this.d$)||void 0===c?void 0:c.valueCount)||0);if(!A||!E||!T)return{};const B=(e,i,s)=>{if(Gx(this.PB,e,this.oi.Ot(),A,"aLocation","X",1,!1,S.FLOAT,Float32Array.BYTES_PER_ELEMENT,void 0),Gx(this.PB,e,this.oi.Ot(),E,"aLocation","Y",1,!1,S.FLOAT,Float32Array.BYTES_PER_ELEMENT,void 0),i&&1!==t){if(!k)return!1;Gx(this.PB,e,!1,k,"aColor","",4,!0,S.UNSIGNED_BYTE,1,void 0)}if(s&&"value"===s.lookUpProperty&&1!==t){if(!w)return!1;Gx(this.PB,e,!1,w,"aLookupValue","",1,!1,S.FLOAT,Float32Array.BYTES_PER_ELEMENT,void 0)}return!0},L=1===t?null===(u=this.v$)||void 0===u?void 0:u.mousePickingShader:null===(d=this.v$)||void 0===d?void 0:d.shader;if(this.v$&&L&&void 0!==M&&M>0&&F&&2!==t){const i=this.v$;this.PB.Hu(L).eE(L,(s,r,n,o)=>!!this.PB.EO(n,t,this,{uniforms:this.hD,idFirst:e,useInstanceID:1===t?P:void 0,fillStyleSolid:i.fillStyleSolid,fillStyleLinearGradient:i.fillStyleLinearGradient,fillStyleRadialGradient:i.fillStyleRadialGradient,fillStylePaletted:i.fillStylePaletted,linearGradientInfo:this.y$,radialGradientInfo:this.p$,lookupValueRange:i.fillStylePaletted?ph(i.fillStylePaletted,this,this.r$):void 0,lookupValueBuffer:null})&&!!B(n,i.fillStyleIndividual,i.fillStylePaletted)&&(null==i||i.geometry.Hu(n).Mk(M-1),!0))}const D="none"===this.yV.type?void 0:1===t?this.yV.mousePickingShader:this.yV.shader;if("none"!==this.yV.type&&D&&void 0!==M&&M>0){const i=this.yV;this.PB.Hu(D).eE(D,(s,r,n,o)=>{var a,h;if(!this.c$)return!1;if(!this.PB.EO(n,t,this,{uniforms:this.hD,idFirst:e,useInstanceID:1===t&&"triangulated"===i.type?P:void 0,useVertexID:1===t&&"primitive"===i.type?P:void 0,fillStyleSolid:i.fillStyleSolid,fillStylePaletted:i.fillStylePaletted,fillStyleLinearGradient:i.fillStyleLinearGradient,fillStyleRadialGradient:i.fillStyleRadialGradient,fillStyleIndividual:i.fillStyleIndividual,linearGradientInfo:this.m$,radialGradientInfo:this.S$,lookupValueRange:i.fillStylePaletted?ph(i.fillStylePaletted,this,this.r$):void 0,lookupValueBuffer:"primitive"===i.type?w:null,colorBuffer:"primitive"===i.type?k:null,coordsX:"primitive"===i.type?A:void 0,coordsY:"primitive"===i.type?E:void 0,coordsHighPrecision:this.oi.Ot()}))return!1;if(i.lineStyleDashed){if(!this.mV)return!1;this.PB.rE(s("uStippleCount"),[this.gi._t().x/this.mV.LO,this.gi._t().y/this.mV.LO]).oE(o("uStippleTextureWidthLimiter"),this.mV.PO/this.mV.LO).oE(s("uStippleScale"),i.lineStyleDashed.getPatternScale()).nE(s("uStippleTexture"),this.mV.IO,1)}if("primitive"===i.type){if(i.lineStyleDashed){if(!(null===(a=this.c$)||void 0===a?void 0:a.bufferLengthSoFar))return!1;this.PB.AE(r("aLengthSoFar"),this.c$.bufferLengthSoFar)}Yx.fV(this.hz,M)}else{if(!B(n,i.fillStyleIndividual,i.fillStylePaletted))return!1;if(i.lineStyleDashed){if(!(null===(h=this.c$)||void 0===h?void 0:h.bufferLengthSoFar))return!1;Gx(this.PB,n,!1,this.c$.bufferLengthSoFar,"aLengthSoFar","",2,!1,S.FLOAT,Float32Array.BYTES_PER_ELEMENT,void 0)}Ox.pu(this.hz,i.geometry,n,this.gV&&1!==t,1===t,i.thickness,this.c$.valueCount-1)}return!0})}const z=null===(f=this.d$)||void 0===f?void 0:f.bufferX,I=null===(g=this.d$)||void 0===g?void 0:g.bufferY,R=null===(p=this.d$)||void 0===p?void 0:p.bufferColors,_=null===(y=this.d$)||void 0===y?void 0:y.bufferLookupValues,V=null===(m=this.d$)||void 0===m?void 0:m.bufferSizes,N=null===(v=this.d$)||void 0===v?void 0:v.bufferRotations,O=1===t?null===(x=this.n$)||void 0===x?void 0:x.mousePickingShader:null===(b=this.n$)||void 0===b?void 0:b.shader,Y=this.n$;let G=1;if(F&&(L||D)&&void 0!==this.A$&&!Number.isNaN(this.A$)){const t="x"===Da(F)?this.oi.x:this.oi.y,e=this.A$,i=t.getInnerInterval()/e,s=this.CG.C(),r=t.Mt()/s/1,n=2*r;G=i<=r?1:Math.max(1-(i-r)/(n-r),0)}if(O&&Y&&z&&I&&G>0&&void 0!==C&&C>0){const i=Y,s=i.instancedRendering?1:0;if(Y.borders&&0===t){const r=Y.borders;this.PB.Hu(r.shader).eE(r.shader,(n,o,a,h)=>{if(!this.PB.EO(a,t,this,{uniforms:this.hD,idFirst:e,fillStyleSolid:r.fillStyleSolid}))return!1;if(this.oi.Ot()?this.PB.hE(z,s,{location:o("aPos_highpartX"),size:1},{location:o("aPos_lowpartX"),size:1}).hE(I,s,{location:o("aPos_highpartY"),size:1},{location:o("aPos_lowpartY"),size:1}):this.PB.YE(o("aPosX"),z,s).YE(o("aPosY"),I,s),this.PB.oE(n("uOpacity"),G),i.instancedRendering)if(N)this.PB.YE(o("aRotDeg"),N,s).oE(n("uBaseRotDeg"),i.geometry.vG);else{const t=No(this.TG.C()+i.geometry.vG),e=Math.sin(t),s=Math.cos(t);this.PB.rE(n("uRot"),[e,s])}return this.PB.rE(h("uOffsetAlignment"),[-this.IG.x/2,-this.IG.y/2]),i.geometry.SG(a,V,C,this.CG.C(),i.instancedRendering,this._G.getThickness())})}this.PB.Hu(O).eE(O,(r,n,o,a)=>{if(!this.d$)return!1;if(!this.PB.EO(o,t,this,{uniforms:this.hD,idFirst:e,useInstanceID:i.instancedRendering&&1===t?P:void 0,useVertexID:i.instancedRendering||1!==t?void 0:P,fillStyleSolid:i.fillStyleSolid,fillStyleLinearGradient:i.fillStyleLinearGradient,fillStyleRadialGradient:i.fillStyleRadialGradient,linearGradientInfo:this.b$,radialGradientInfo:this.x$,fillStylePaletted:i.fillStylePaletted,fillStyleIndividual:i.fillStyleIndividual,lookupValueRange:i.fillStylePaletted?ph(i.fillStylePaletted,this,this.r$):void 0,lookupValueBuffer:_,lookupValueAttribDivisor:s,colorBuffer:R,colorAttribDivisor:s,fillStyleImage:i.fillStyleImage,texturedFillGLInfo:this.$N,texCoordAttribDivisor:0,maskTexture:i.shapeIcon&&this.$N,maskTextureCoordsAttribDivisor:0}))return!1;if(this.oi.Ot()?this.PB.hE(z,s,{location:n("aPos_highpartX"),size:1},{location:n("aPos_lowpartX"),size:1}).hE(I,s,{location:n("aPos_highpartY"),size:1},{location:n("aPos_lowpartY"),size:1}):this.PB.YE(n("aPosX"),z,s).YE(n("aPosY"),I,s),1!==t&&this.PB.oE(r("uOpacity"),G),i.instancedRendering)if(N)this.PB.YE(n("aRotDeg"),N,s).oE(r("uBaseRotDeg"),i.geometry.vG);else{const t=No(this.TG.C()+i.geometry.vG),e=Math.sin(t),s=Math.cos(t);this.PB.rE(r("uRot"),[e,s])}return this.PB.rE(a("uOffsetAlignment"),[-this.IG.x/2,-this.IG.y/2]),i.geometry.Mk(o,V,0,this.d$.valueCount,i.pointSizeAsScale&&this.$N?{scale:this.CG.C(),width:i.shapeIcon?i.shapeIcon._t().x:this.$N.texture.kR,height:i.shapeIcon?i.shapeIcon._t().y:this.$N.texture.CR}:this.CG.C(),i.instancedRendering),!0})}return{idCount:P}}wi(){return this.r$}Su(t,e,i,s,r){var n;const o=null===(n=this.Td.C())||void 0===n?void 0:n.qi;if(null==o?void 0:o.ju(this.mw))return{};const a=t-e;return{info:{dataPoint:null==o?void 0:o.ud(this.mw,a)}}}dispose(){var t,e,i,s,r,n,o,a,h,l,c,u,d;return super.dispose(),this.PB.gE(null===(t=this.c$)||void 0===t?void 0:t.bufferX),this.PB.gE(null===(e=this.c$)||void 0===e?void 0:e.bufferY),this.PB.gE(null===(i=this.c$)||void 0===i?void 0:i.bufferColors),this.PB.gE(null===(s=this.c$)||void 0===s?void 0:s.bufferLookupValues),this.PB.gE(null===(r=this.c$)||void 0===r?void 0:r.bufferRotations),this.PB.gE(null===(n=this.c$)||void 0===n?void 0:n.bufferSizes),this.PB.gE(null===(o=this.d$)||void 0===o?void 0:o.bufferX),this.PB.gE(null===(a=this.d$)||void 0===a?void 0:a.bufferY),this.PB.gE(null===(h=this.d$)||void 0===h?void 0:h.bufferColors),this.PB.gE(null===(l=this.d$)||void 0===l?void 0:l.bufferLookupValues),this.PB.gE(null===(c=this.d$)||void 0===c?void 0:c.bufferRotations),this.PB.gE(null===(u=this.d$)||void 0===u?void 0:u.bufferSizes),this.yV={type:"none"},this.v$=void 0,this.n$=void 0,this.gN.WV(),null===(d=this.Td.C())||void 0===d||d.Ki(),this.c$=void 0,this.d$=void 0,this.m$=void 0,this.S$=void 0,this.y$=void 0,this.p$=void 0,this.b$=void 0,this.x$=void 0,this.PB.RO(this,this.$N),this}mu(){return this.dispose(),this}M$(t){if(!this.mw)return this.a$||oo;if(!this.a$){const e=t.ed(this.mw);if(0===e.xValues.length)return oo;this.a$={min:{x:ro,y:ro},max:{x:no,y:no},l$:Date.now()};const i=e.xValues.length;for(let t=0;t<i;t+=1){const i=e.xValues[t],s=e.yValues[t];this.a$.min.x=i<this.a$.min.x?i:this.a$.min.x,this.a$.min.y=s<this.a$.min.y?s:this.a$.min.y,this.a$.max.x=i>this.a$.max.x?i:this.a$.max.x,this.a$.max.y=s>this.a$.max.y?s:this.a$.max.y}return this.h$.length=0,this.a$}const e=t.Hu(this.mw),i=e.Zu,s=e.Ju;if(this.h$.length>0&&i&&s){for(const t of this.h$){for(let e=t.min;e<=t.max;e+=1){const t=i[e],r=s[e];this.a$.min.x=t<this.a$.min.x?t:this.a$.min.x,this.a$.min.y=r<this.a$.min.y?r:this.a$.min.y,this.a$.max.x=t>this.a$.max.x?t:this.a$.max.x,this.a$.max.y=r>this.a$.max.y?r:this.a$.max.y}this.h$.length=0}return this.a$}return this.a$}Hi(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var e,i,s,r,n;const o=null===(e=this.Td.C())||void 0===e?void 0:e.qi;if(!o)return 0;const a=o.ju(this.mw);return"ProgressiveX"===a?(null===(i=o.ad(this.mw))||void 0===i?void 0:i.x)||0:"RegressiveX"===a?(null===(s=o.od(this.mw))||void 0===s?void 0:s.x)||0:"ProgressiveY"===a&&t?(null===(r=this.u$)||void 0===r?void 0:r.max)||0:"RegressiveY"===a&&t?(null===(n=this.u$)||void 0===n?void 0:n.max)||0:this.M$(o).max.x}ji(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var e,i,s,r,n;const o=null===(e=this.Td.C())||void 0===e?void 0:e.qi;if(!o)return 0;const a=o.ju(this.mw);return"ProgressiveX"===a?(null===(i=o.od(this.mw))||void 0===i?void 0:i.x)||0:"RegressiveX"===a?(null===(s=o.ad(this.mw))||void 0===s?void 0:s.x)||0:"ProgressiveY"===a&&t?(null===(r=this.u$)||void 0===r?void 0:r.min)||0:"RegressiveY"===a&&t?(null===(n=this.u$)||void 0===n?void 0:n.min)||0:this.M$(o).min.x}Xi(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var e,i,s,r,n;const o=null===(e=this.Td.C())||void 0===e?void 0:e.qi;if(!o)return 0;const a=o.ju(this.mw);return"ProgressiveX"===a&&t?$r(null===(i=this.u$)||void 0===i?void 0:i.max,0):"RegressiveX"===a&&t?$r(null===(s=this.u$)||void 0===s?void 0:s.max,0):"ProgressiveY"===a?$r(null===(r=o.ad(this.mw))||void 0===r?void 0:r.y,0):"RegressiveY"===a?$r(null===(n=o.od(this.mw))||void 0===n?void 0:n.y,0):this.M$(o).max.y}Wi(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var e,i,s,r,n;const o=null===(e=this.Td.C())||void 0===e?void 0:e.qi;if(!o)return 0;const a=o.ju(this.mw);return"ProgressiveX"===a&&t?$r(null===(i=this.u$)||void 0===i?void 0:i.min,0):"RegressiveX"===a&&t?$r(null===(s=this.u$)||void 0===s?void 0:s.min,0):"ProgressiveY"===a?$r(null===(r=o.od(this.mw))||void 0===r?void 0:r.y,0):"RegressiveY"===a?$r(null===(n=o.ad(this.mw))||void 0===n?void 0:n.y,0):this.M$(o).min.y}oc(){var t,e;let i=this.CG.C();this.$N&&(i=Math.max(this.$N.texture.kR,this.$N.texture.CR)*this.CG.C());const s=Boolean(null===(t=this.mw)||void 0===t?void 0:t.size),r=Math.max(Un(this.iu),s?25:i),n=null===(e=this.Td.C())||void 0===e?void 0:e.qi.ju(this.mw);return!n||"ProgressiveX"!==n&&"RegressiveX"!==n?r:0}ac(){var t,e;let i=this.CG.C();this.$N&&(i=Math.max(this.$N.texture.kR,this.$N.texture.CR)*this.CG.C());const s=Boolean(null===(t=this.mw)||void 0===t?void 0:t.size),r=Math.max(Un(this.iu),s?25:i),n=null===(e=this.Td.C())||void 0===e?void 0:e.qi.ju(this.mw);return!n||"ProgressiveY"!==n&&"RegressiveY"!==n?r:0}}const Ab=()=>{const t=1e3,e=(t,e,i,s,r)=>{const n={min:ro,max:no};let o,a=0,h=0;for(let l=s;l<=r;l+=1){const s=l%t.length,r=t[s],c=e[s];i&&Number.isNaN(c)?o=void 0:(n.min=Math.min(n.min,c),n.max=Math.max(n.max,c),void 0!==o&&(a+=1,h+=Math.abs(r-o)),o=r)}return{visibleBoundaries:n,avgPointGap:h/a,sampleMin:s,sampleMax:r,finitePointPairCount:a}};let i;return(s,r,n,o,a,h,l)=>{if(!n)return i=void 0,{visibleBoundaries:void 0,avgPointGap:0};if(n.iLastSample-n.iFirstSample+1<2e3)return e(a,h,l,n.iFirstSample,n.iLastSample);o&&(i=void 0),i||(i={iFirst:n.iFirstSample,chunks:[]});let c=i.iFirst,u=i.iFirst+i.chunks.length*t-1;for(;;){const s=u+1,r=u+t;if(!(n.iLastSample>=r))break;{const t=e(a,h,l,s,r);i.chunks.push(t),u=r}}for(;;){const s=c-1,r=c-t;if(!(n.iFirstSample<=r))break;{const t=e(a,h,l,r,s);i.chunks.unshift(t),i.iFirst=r,c=r}}for(let e=0;e<i.chunks.length&&i.chunks[e].sampleMin<n.iFirstSample;e++)i.chunks.splice(e,1),i.iFirst+=t,e--;for(let t=i.chunks.length-1;t>=0&&i.chunks[t].sampleMax>n.iLastSample;t--)i.chunks.splice(t,1);if(0===i.chunks.length)return i=void 0,{visibleBoundaries:void 0,avgPointGap:0};const d={min:ro,max:no},f=[];for(const t of i.chunks)d.min=Math.min(t.visibleBoundaries.min,d.min),d.max=Math.max(t.visibleBoundaries.max,d.max),f.push(t.avgPointGap);const g=e(a,h,l,n.iFirstSample,i.iFirst-1),p=e(a,h,l,i.chunks[i.chunks.length-1].sampleMax+1,n.iLastSample);return g.finitePointPairCount>0&&(d.min=Math.min(g.visibleBoundaries.min,d.min),d.max=Math.max(g.visibleBoundaries.max,d.max),f.push(g.avgPointGap)),p.finitePointPairCount>0&&(d.min=Math.min(p.visibleBoundaries.min,d.min),d.max=Math.max(p.visibleBoundaries.max,d.max),f.push(p.avgPointGap)),{visibleBoundaries:d,avgPointGap:f.reduce((t,e)=>t+e/f.length,0)}}},Eb=(t,e,i,s,r,n,o,a,h,l,c,u,d)=>{const f=Da(l),g=za(l),p=Array.isArray(e[0])?kc(e[0]):e[0],y=Array.isArray(e[1])?kc(e[1]):e[1],m=i&&Array.isArray(i)?kc(i):i,v=s&&Array.isArray(s)?kc(s):s,x=r&&Array.isArray(r)?kc(r):r,b=n&&Array.isArray(n)?kc(n):n,S=p.length,A=p.elementAt(0),E=p.elementAt(S-1),k=y.elementAt(0),w=y.elementAt(S-1),M=u?2:1;if(a&&h&&void 0!==a.firstX&&void 0!==a.lastX&&void 0!==a.firstY&&void 0!==a.lastY&&("ProgressiveX"===l&&A>=a.firstX||"RegressiveX"===l&&A<=a.firstX||"ProgressiveY"===l&&k>=a.firstY||"RegressiveY"===l&&k<=a.firstY)){const e="x"===f?p:y,i="x"===f?a.lastX:a.lastY,s=Fc(i,0,S-1,g,t=>e.elementAt(t));if(e.elementAt(s)===i){const e=a.bufferSize-a.valueCount,i=s+1,r=S-i;if(0===r)return a;if(e>=r){const e=p.toArray(i,i+r-1),s=y.toArray(i,i+r-1);if(t.RE(a.bufferX,a.valueCount*M,d(e),Float32Array),t.RE(a.bufferY,a.valueCount*M,d(s),Float32Array),m&&a.bufferColors){const e=m.toArray(i,i+r-1);t.RE(a.bufferColors,a.valueCount,e,Uint32Array)}if(v&&a.bufferLookupValues){const e=v.toArray(i,i+r-1);t.RE(a.bufferLookupValues,a.valueCount,e,Float32Array)}if(x&&a.bufferSizes){const e=x.toArray(i,i+r-1);t.RE(a.bufferSizes,a.valueCount,e,Float32Array)}if(b&&a.bufferRotations){const e=b.toArray(i,i+r-1);t.RE(a.bufferRotations,a.valueCount,e,Float32Array)}if(o&&a.bufferLengthSoFar){const[i,r,n]=kb(e,s,a.lastX||0,a.lastY||0,a.lengthSoFarX,a.lengthSoFarY);t.RE(a.bufferLengthSoFar,2*a.valueCount,i,Float32Array),a.lengthSoFarX=r,a.lengthSoFarY=n}return a.valueCount+=r,a.lastX=E,a.lastY=w,a}}}const C=p.toArray(0,S-1),T=y.toArray(0,S-1),F=S+c,P=t.DE(F*M,d(C),null==a?void 0:a.bufferX,Float32Array),B=t.DE(F*M,d(T),null==a?void 0:a.bufferY,Float32Array),L=m?t.DE(F,m.toArray(0,S-1),null==a?void 0:a.bufferColors,Uint32Array):void 0,D=v?t.DE(F,v.toArray(0,S-1),null==a?void 0:a.bufferLookupValues,Float32Array):void 0,z=x?t.DE(F,x.toArray(0,S-1),null==a?void 0:a.bufferSizes,Float32Array):void 0,I=b?t.DE(F,b.toArray(0,S-1),null==a?void 0:a.bufferRotations,Float32Array):void 0;let R,_=0,V=0;if(o){const e=kb(C,T,C[0],T[0],0,0);R=t.DE(2*F,e[0],null==a?void 0:a.bufferLengthSoFar,Float32Array),_=e[1],V=e[2]}return{bufferX:P,bufferY:B,bufferColors:L,bufferLookupValues:D,bufferSizes:z,bufferRotations:I,bufferSize:F,bufferLengthSoFar:R,valueCount:S,firstX:A,lastX:E,firstY:k,lastY:w,lengthSoFarX:_,lengthSoFarY:V}},kb=(t,e,i,s,r,n)=>{const o=t.length,a=new Float32Array(2*o);if(0===o)return[a,0,0];let h=0,l=i,c=s,u=r,d=n;for(let f=0;f<o;f+=1){const i=t[f],s=e[f];u+=Math.abs(l-i),d+=Math.abs(c-s),a[h]=u,a[h+1]=d,h+=2,l=i,c=s}return[a,u,d]},wb={translation:(t,e)=>[1,0,0,0,1,0,t,e,1],rotation(t){const e=Math.cos(t),i=Math.sin(t);return[e,-i,0,i,e,0,0,0,1]},scaling:(t,e)=>[t,0,0,0,e,0,0,0,1],translate:(t,e,i)=>wb.multiply(t,wb.translation(e,i)),rotate:(t,e)=>wb.multiply(t,wb.rotation(e)),scale:(t,e,i)=>wb.multiply(t,wb.scaling(e,i)),multiply(t,e){const i=t[0],s=t[1],r=t[2],n=t[3],o=t[4],a=t[5],h=t[6],l=t[7],c=t[8],u=e[0],d=e[1],f=e[2],g=e[3],p=e[4],y=e[5],m=e[6],v=e[7],x=e[8];return[u*i+d*n+f*h,u*s+d*o+f*l,u*r+d*a+f*c,g*i+p*n+y*h,g*s+p*o+y*l,g*r+p*a+y*c,m*i+v*n+x*h,m*s+v*o+x*l,m*r+v*a+x*c]},projection:(t,e,i)=>[2/t,0,0,0,-2*i/e,0,-1,1*i,1]};class Mb extends lc{constructor(t,e,i,s,r){super(t,e,i,s,r),this.w$=[],this.hD=new Ax,this._$=[As(0,0),As(0,0),As(0,0),As(0,0)],this.k$=Cs(As(0,0),As(0,0)),this.C$=Cs(As(0,0),As(0,0)),this.T$=As(0,0),this.F$=As(0,0),this.I$=As(0,0),this.P$=0,this.L$=0,this.dz=gh({fillStyleSolid:()=>ha(this.Xe)&&this.Xe,fillStyleRadialGradient:()=>Ws(this.Xe)&&this.Xe,fillStyleLinearGradient:()=>qs(this.Xe)&&this.Xe}),this.hz=t,this.rz=e,this.PB=t.nz(),this.rz=e,this.kV=t.Fa.Ba}Er(){const t=this.ol(),e=this.nl(),i=this.li.C();if(t){const t=this.hl(),s=this.dz.fillStyleSolid(t),r=this.dz.fillStyleRadialGradient(t),n=this.dz.fillStyleLinearGradient(t),o=s||r||n,a=this.PB,h=this.PB.GR(),l=h!==this.L$;if(this.L$=h,this.hD.uE(this.oi),this.bl.o||l){this.B$&&this.B$.UB(this),this.font._(Wl(this.bl.C(),h));const t=this.font.C();this.B$=this.PB.br(t.properties.family),this.B$.Hu(this)}const c=this.font.o||this.fl.o;if(c&&this.B$){const t=this.font.C();[this.D$,this.C$]=this.B$.jB(this.fl.C(),t,this.hz.bi.isDark),this.w$.forEach(t=>{t.texCoordBuff&&a.gE(t.texCoordBuff),t.vertexBuff&&a.gE(t.vertexBuff)}),this.w$=this.D$.map(t=>({texCoordBuff:a.iE(t.texCoords,!1),texture:t.texture,info:t})),this.bl.o=!1,this.font.o=!1,this.fl.o=!1}const u=this.oi.si()||e,d=this.Cn.o||this.pl.o||this.yl.o||this.ml.o||this.On.o||this.nt.o||c||u,f=this.On.C(),g=Bo(As(this.pl.C()+1,this.yl.C()+1),.5);if(d&&this.D$&&(this.T$=As(-(f.left*h+this.C$.max.x-this.C$.min.x+f.right*h)*g.x,-(f.bottom*h+this.C$.max.y-this.C$.min.y+f.top*h)*g.y)),(d||u||this.Sl.o||this.hl())&&this.Xe!==sa){if(this.D$){const t=Lo(this.Cn.C(),this.ml.C()),e=hr(t,this.oi,this.gi.oi),i=Bo(e,h);this.I$=i;const s=No(this.Sl.C());this.P$=s,c&&this.w$.forEach(t=>{const e=t.info;e&&(t.vertexBuffLen=e.vertices.length/2,t.vertexBuff=a.iE(e.vertices,!0,t.vertexBuff))});const r=this.nt.C(),n=[Lo(Mo(As((this.C$.min.x+(-r.left-f.left)*h+this.T$.x)/h,(this.C$.max.y+(r.top+f.top)*h+this.T$.y)/h),this.xl,s),e),Lo(Mo(As((this.C$.max.x+(r.right+f.right)*h+this.T$.x)/h,(this.C$.max.y+(r.top+f.top)*h+this.T$.y)/h),this.xl,s),e),Lo(Mo(As((this.C$.max.x+(r.right+f.right)*h+this.T$.x)/h,(this.C$.min.y+(-r.bottom-f.bottom)*h+this.T$.y)/h),this.xl,s),e),Lo(Mo(As((this.C$.min.x+(-r.left-f.left)*h+this.T$.x)/h,(this.C$.min.y+(-r.bottom-f.bottom)*h+this.T$.y)/h),this.xl,s),e)];this._$=[hr(n[0],this.gi.oi,this.oi),hr(n[1],this.gi.oi,this.oi),hr(n[2],this.gi.oi,this.oi),hr(n[3],this.gi.oi,this.oi)];const o=So(n);this.F$=As(-(o.max.x-o.min.x)*h*g.x-o.min.x*h+this.I$.x,-(o.max.y-o.min.y)*h*g.y-o.min.y*h+this.I$.y),this.Th=Do(o.max,o.min),this.F$={x:this.F$.x/h,y:this.F$.y/h};const l=So(this._$),u=this.oi.Jt(l.min,this.F$),d=this.oi.Jt(l.max,this.F$);this.k$=So([u,d]),this.F$={x:this.F$.x*h,y:this.F$.y*h}}r?this.mz=ux(this.k$,this.oi,r.getPosition(),r.getExtent(),r.getShape(),this.PB.GR()):n?this.Sz=dx(this.k$,this.oi,n.getAngle(!0),this.PB.GR()):(this.mz=void 0,this.Sz=void 0)}this.hl()&&(this.oD=o?this.PB.eR(Bv["2D"],Bv.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.kV}),Bv.Color({dataType:r?["gradient",r]:n?["gradient",n]:"uniform",maskTextureText:!0})):void 0),this.R$=!this.Rl||this.Xe===sa||s&&0===s.getColor().getA()?void 0:this.R$||this.PB.eR(Bv["2D"],Bv.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.kV}),Bv.Color({dataType:"uniform",maskTextureText:!0})),this.E$=i&&o?this.E$||this.PB.eR(Bv["2D"],Bv.MousePicking(),Bv.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.kV})):void 0,this.Cn.o=!1,this.pl.o=!1,this.yl.o=!1,this.ml.o=!1,this.Sl.o=!1,this.al(this.Xe)}return this.Ml=t,this}pu(t,e){if(this.Al){const t=Math.min(this._$[0].x,this._$[1].x),e=Math.max(this._$[0].x,this._$[1].x),i=Math.min(this._$[0].y,this._$[2].y),s=Math.max(this._$[0].y,this._$[2].y);this.Ws.Hg();const r=Math.min(this.oi.x.G,this.oi.x.$),n=Math.max(this.oi.x.G,this.oi.x.$),o=Math.min(this.oi.y.G,this.oi.y.$),a=Math.max(this.oi.y.G,this.oi.y.$);if(!(t<=n&&r<=e&&i<=a&&o<=s))return{idCount:1}}if(this.ol()){const i=0===t?this.R$:void 0,s=this.Rl,r=1===t?this.E$:this.oD;if(!r||0===this.w$.length)return{};const n=this.dz.fillStyleSolid(!1),o=this.dz.fillStyleRadialGradient(!1),a=this.dz.fillStyleLinearGradient(!1),h=this.gi.RD(),l=h.x,c=h.y;let u=wb.projection(l,c,-1);const d=wb.translation(this.T$.x,this.T$.y),f=wb.translation(this.F$.x,this.F$.y);u=wb.translate(u,this.I$.x,this.I$.y),u=wb.multiply(u,f),u=wb.rotate(u,this.P$),u=wb.multiply(u,d),1===t&&(u=wb.scale(u,this.C$.max.x,this.C$.max.y)),i&&s&&(u=wb.translate(u,this.vl.x,this.vl.y),this.PB.Hu(i).eE(i,(t,e,i,r)=>(this.PB.FE(t("uMatrix"),u).oE(t("uIsHighlighted"),0).wI(t("uHighlightColorOffset"),Os).oE(t("uRenderEffectMask"),0).wI(t("uColor"),s),this.kV&&this.PB.rE(r("uViewportSizePx"),[h.x*this.PB.GR(),h.y*this.PB.GR()]),this.w$.forEach(i=>{this.PB.AE(e("aPos"),i.vertexBuff).AE(e("aMaskTextureCoord"),i.texCoordBuff).nE(t("uMaskTexture"),i.texture,0).Mk(this.PB.gl.TRIANGLES,i.vertexBuffLen)}),!0)),u=wb.translate(u,-this.vl.x,-this.vl.y)),this.PB.Hu(r).eE(r,(i,s,r,l)=>{if(this.PB.FE(i("uMatrix"),u).oE(i("uIsHighlighted"),1===t||2===t?0:this.Ai).wI(i("uHighlightColorOffset"),1===t||2===t?Os:this.Si).oE(i("uRenderEffectMask"),2===t?1:0),this.kV&&this.PB.rE(l("uViewportSizePx"),[h.x*this.PB.GR(),h.y*this.PB.GR()]),1===t)this.PB.PE(i("uFirstId"),e).kO(r,1);else if(n)this.PB.wI(i("uColor"),n.getColor());else if(o&&this.mz){this.PB.rE(i("uCenter"),this.mz.center).rE(i("uDistance"),this.mz.distance).fE(i("uBounds"),this.mz.bounds).oE(i("uAspect"),this.mz.aspectRatio);const t=o.getColorStops();for(let e=0;e<t.length;e+=1)this.PB.wI(i("color_".concat(e)),t[e].color).oE(i("stop_".concat(e)),t[e].offset)}else if(a&&this.Sz){this.PB.rE(i("uStartPoint"),this.Sz.startPoint).rE(i("uEndPoint"),this.Sz.endPoint).fE(i("uBounds"),this.Sz.bounds);const t=a.getColorStops();for(let e=0;e<t.length;e+=1)this.PB.wI(i("color_".concat(e)),t[e].color).oE(i("stop_".concat(e)),t[e].offset)}return 1===t&&this.PB.AE(s("aPos"),this.PB.aO).Mk(this.PB.gl.TRIANGLES,6),1!==t&&this.w$.forEach(t=>{this.PB.AE(s("aPos"),t.vertexBuff).AE(s("aMaskTextureCoord"),t.texCoordBuff).nE(i("uMaskTexture"),t.texture,0).Mk(this.PB.gl.TRIANGLES,t.vertexBuffLen)}),!0})}return{idCount:1}}Su(t,e,i,s,r){return{}}fu(){return this.ol()?So(this._$):oo}vu(){return this.ol()&&this.Th?this.Th:As(0,0)}_t(){if(this.ol()&&this.k$){const t=this.k$;return As(t.max.x-t.min.x,t.max.y-t.min.y)}return As(0,0)}mu(){return this.w$.forEach(t=>{t.texCoordBuff&&this.PB.gE(t.texCoordBuff),t.vertexBuff&&this.PB.gE(t.vertexBuff)}),this.w$=[],this.B$&&this.B$.UB(this),this.oD=void 0,this.R$=void 0,this.E$=void 0,this}Hi(){return this.k$.max.x}ji(){return this.k$.min.x}Xi(){return this.k$.max.y}Wi(){return this.k$.min.y}oc(){return 0}ac(){return 0}}class Cb{constructor(t,e,i){this.Di=new Set,this.O$=t=>(this.Di.add(t),t),this.z$=t=>(this.Di.delete(t),t.mu(),this),this.gi=t,this.Nn=e,this.V$=i}lB(t){this.Di.delete(t)&&this.Di.add(t)}N(){for(const t of this.Di)t.mu().dispose();this.gi.wa(this.Nn)}Bs(){return this.gi.Bs(),this}Ma(){return this.Nn}}class Tb extends Cb{constructor(){super(...arguments),this.N$=Fs(void 0),this.qa=!1}ym(t){return this.N$._(t),this}Hg(){return this.N$.C()}}class Fb extends hc{constructor(t,e,i,s,r){super(t,e,i,s,r),this.yV={fill:void 0,border:void 0},this.hD=new Ax,this.sc=oo,this.G$=!1,this.$$=!1,this.U$=!1,this.Y$=!1,this.Gd=[],this.j$=0,this.dz=gh({rectangleStyleSolid:()=>ha(this.Xe)&&this.Xe,rectangleStyleImage:()=>Pr(this.Xe)&&this.Xe,rectangleStyleRadialGradient:()=>Ws(this.Xe)&&this.Xe,rectangleStyleLinearGradient:()=>qs(this.Xe)&&this.Xe,rectangleStylePaletted:()=>fa(this.Xe)&&this.Xe,rectangleStyleIndividual:()=>ca(this.Xe)&&this.Xe,lineStyleSolid:()=>eh(this.Ze)&&this.Ze,lineStyleDashed:()=>nh(this.Ze)&&this.Ze,lineStyleFilled:()=>{const t=this.Ze&&this.Ze.getFillStyle();return ha(t)&&t}}),this.hz=t,this.rz=e,this.PB=t.nz(),this.gV=this.PB.iO}Go(){const t={Fs:e=>this.CV(t,e),Fi:e=>this.TV(t,e),yd:(e,i,s,r)=>this.H$(t,e,i,s,r),vd:e=>this.W$(t,e),vS:e=>this.IN(t,e),wI:e=>this.IV(t,e),X$:0,Z$:0,J$:0,Q$:0,S:void 0,PN:void 0,Ai:0,VA:!0,LN:this.Gd.length,K$:void 0};return this.Gd.push(t),t}zi(){return this.Gd.length=0,this.G$=!0,this.gi.ki(this),this}Cv(){return this.Gd}Ud(t){const e=this.Gd.indexOf(t);e>=0&&(this.Gd.splice(e,1),this.G$=!0,this.gi.ki(this,t))}CV(t,e){return t.VA=e,this.G$=!0,t.VA||this.gi.ki(this,t),t}TV(t,e){return t.Ai=e,this.Y$=!0,t}H$(t,e,i,s,r){return t.X$=e,t.Z$=i,t.J$=s,t.Q$=r,this.G$=!0,t}W$(t,e){return t.K$=!0===(null==e?void 0:e.c_x1_y1)||!0===(null==e?void 0:e.c_x1_y2)||(null==e?void 0:e.c_x2_y1)||!0===(null==e?void 0:e.c_x2_y2)?e:void 0,this.G$=!0,t}IN(t,e){return t.S=e,this.$$=!0,t}IV(t,e){return t.PN=null==e?void 0:e.toUint32(),this.U$=!0,t}Er(){const t=this.li.C(),e=this.li.o,i=this.hl(),s=this.Y$;let r=this.G$;const n=this.$$,o=this.U$,a=this.Ze,h=this.ll(),l=this.Gd.filter(t=>t.VA),c=void 0!==this.Gd.find(t=>t.K$),u=this.oi.si();c&&u&&(r=!0);const d=this.dz.rectangleStyleSolid(i),f=this.dz.rectangleStylePaletted(i),g=this.dz.rectangleStyleIndividual(i),p=this.dz.rectangleStyleRadialGradient(i),y=this.dz.rectangleStyleLinearGradient(i),m=this.dz.rectangleStyleImage(i),v=d||f||y||p||m||g,x=this.dz.lineStyleSolid(h),b=this.dz.lineStyleDashed(i),S=x||b,A=this.dz.lineStyleFilled(h),E=A,k=S&&Math.max(S.getThickness(),0);if(this.hD.uE(this.oi),r&&(this.sc=Eo(...l.map(t=>So([{x:t.X$,y:t.Z$},{x:t.J$,y:t.Q$}])))),r||h&&b){const t=[],e=[],i=[];let s=0,r=0;const n=[];let o=0;if(c){const a=this.oi instanceof rr?this.oi.ri():{x:1e-4,y:1e-4},h=5;this.j$=4+4*h;const c=Math.sign(this.oi.x.$-this.oi.x.G),u=Math.sign(this.oi.y.$-this.oi.y.G);l.forEach(l=>{var d,f,g,p,y;const m=Math.sign(l.J$-l.X$),v=Math.sign(l.Q$-l.Z$),x={x:m===c?l.X$:l.J$,y:v===u?l.Z$:l.Q$},b={x:m===c?l.J$:l.X$,y:v===u?l.Q$:l.Z$},S=s,A=r,E=Math.abs((b.x-x.x)/a.x),k=Math.abs((b.y-x.y)/a.y),w=l.K$&&!0!==l.K$.skipTooSmallCheck&&Math.min(E,k)<2*l.K$.extent;t[S+0]=(l.X$+l.J$)/2,e[S+0]=(l.Z$+l.Q$)/2,i[A+0]=0,i[A+1]=0,t[S+1]=Number.NaN,e[S+1]=Number.NaN,i[A+2]=0,i[A+3]=0,s+=2,r+=4;for(let a=0;a<=3;a+=1){const c=0===a||3===a?b.x:x.x,u=0===a||1===a?b.y:x.y,m=c===l.X$&&u===l.Z$?null===(d=l.K$)||void 0===d?void 0:d.c_x1_y1:c===l.J$&&u===l.Z$?null===(f=l.K$)||void 0===f?void 0:f.c_x2_y1:c===l.X$&&u===l.Q$?null===(g=l.K$)||void 0===g?void 0:g.c_x1_y2:null===(p=l.K$)||void 0===p?void 0:p.c_x2_y2,v=null===(y=l.K$)||void 0===y?void 0:y.extent;if(m&&v&&!w){const l=.5*a*Math.PI;for(let d=0;d<h;d+=1){const f=l+d/(h-1)*.5*Math.PI;let g,p;0===a?(g=Math.cos(f)-1,p=-1+Math.sin(f)):1===a?(g=1+Math.cos(f),p=Math.sin(f)-1):2===a?(g=1+Math.cos(f),p=1+Math.sin(f)):(g=-1+Math.cos(f),p=1+Math.sin(f)),t[s+0]=c,e[s+0]=u,i[r+0]=g*v,i[r+1]=p*v,s>1&&(n[o+0]=S,n[o+1]=s-1,n[o+2]=s,o+=3),s+=1,r+=2}}else for(let a=0;a<h;a+=1)t[s+0]=c,e[s+0]=u,i[r+0]=0,i[r+1]=0,n[o+0]=S,n[o+1]=s-1,n[o+2]=s,o+=3,s+=1,r+=2}n[o+0]=S,n[o+1]=S+2,n[o+2]=s-1,o+=3,t[s+0]=t[S+2],e[s+0]=e[S+2],i[r+0]=i[A+4],i[r+1]=i[A+5],t[s+1]=Number.NaN,e[s+1]=Number.NaN,i[r+2]=0,i[r+3]=0,s+=2,r+=4})}else this.j$=6,l.forEach(a=>{t[s+0]=a.X$,e[s+0]=a.Z$,i[r+0]=0,i[r+1]=0,t[s+1]=a.J$,e[s+1]=a.Z$,i[r+2]=0,i[r+3]=0,t[s+2]=a.J$,e[s+2]=a.Q$,i[r+4]=0,i[r+5]=0,t[s+3]=a.X$,e[s+3]=a.Q$,i[r+6]=0,i[r+7]=0,t[s+4]=a.X$,e[s+4]=a.Z$,i[r+8]=0,i[r+9]=0,t[s+5]=Number.NaN,e[s+5]=Number.NaN,i[r+10]=0,i[r+11]=0,n[o+0]=s+0,n[o+1]=s+1,n[o+2]=s+3,n[o+3]=s+1,n[o+4]=s+3,n[o+5]=s+2,s+=6,r+=12,o+=6});if(this.q$=this.PB.iE(vn(t,this.oi.Ot()),void 0,this.q$),this.tU=this.PB.iE(vn(e,this.oi.Ot()),void 0,this.tU),this.iU=this.PB.iE(i,void 0,this.iU),this.sU=this.PB.zE(new Uint32Array(n),this.sU),this.eU=n.length,this.hU=s-1,b){const i=new Float32Array(2*t.length);let s=0,r=0,n=0,o=t[0],a=e[0];for(let h=0;h<t.length;h+=1){const l=t[h],c=e[h];Number.isNaN(l)||(r+=Math.abs(l-o),n+=Math.abs(c-a),o=l,a=c),i[s]=r,i[s+1]=n,s+=2}this.pV=this.PB.iE(i,!1,this.pV)}this.rU=[t,e]}if((i||h||e)&&(this.yV.fill=v?{shader:this.PB.eR(Bv["2D"],d&&Bv.Color({dataType:"uniform"}),y&&Bv.Color({dataType:["gradient",y]}),p&&Bv.Color({dataType:["gradient",p]}),f&&Bv.Color({dataType:["lookup",f.getLookUpProperty(),f.lut]}),g&&Bv.Color({dataType:"attribute"}),m&&Bv.Color({dataType:["image",m]}),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0,offsets:[{directionVar:"aGeo",sizeUnit:"px",dataType:"attribute",useGeometry:!1}],splitPosAttribute:!0}),Bv.AttributeHighlight),mousePicking:t?{shader:this.PB.eR(Bv["2D"],Bv.MousePicking({useAttribute:!0}),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0,offsets:[{directionVar:"aGeo",sizeUnit:"px",dataType:"attribute",useGeometry:!1}],splitPosAttribute:!0}),Bv.AttributeHighlight)}:void 0,fillStyleSolid:d,fillStyleLinearGradient:y,fillStyleRadialGradient:p,fillStylePaletted:f,fillStyleImage:m,fillStyleIndividual:g}:void 0,this.yV.border=S&&E&&"number"==typeof k&&0!==k?{shader:this.PB.eR(Bv["2D"],Bv.Color({dataType:"uniform"}),Bv.LineInstanced2D({axisWorldTranslation:dh(this.oi),normalSource:void 0,offsets:[{directionVar:"aGeo",sizeUnit:"px",dataType:"attribute",useGeometry:!1}],splitPosAttribute:!0}),this.gV?Bv.AliasedEdge:void 0,b&&Bv.StippleTextureInstanced,Bv.AttributeHighlight),geometry:Nx(this.PB,k),mousePicking:t?{shader:this.PB.eR(Bv["2D"],Bv.MousePicking({useAttribute:!0}),Bv.LineInstanced2D({axisWorldTranslation:dh(this.oi),normalSource:void 0,offsets:[{directionVar:"aGeo",sizeUnit:"px",dataType:"attribute",useGeometry:!1}],splitPosAttribute:!0}),b&&Bv.StippleTextureInstanced,Bv.AttributeHighlight)}:void 0,fillStyleSolid:A,lineStyleDashed:b,thickness:k}:void 0),s||r){const t=new Float32Array(l.length*this.j$);l.forEach((e,i)=>{for(let s=0;s<this.j$;s+=1)t[i*this.j$+s]=e.Ai}),this.nU=this.PB.iE(t,!0,this.nU)}if(t){if(r){const t=new Float32Array(l.length*this.j$);l.forEach((e,i)=>{for(let s=0;s<this.j$;s+=1)t[i*this.j$+s]=e.LN}),this.oU=this.PB.iE(t,!1,this.oU)}}else this.oU&&(this.PB.gE(this.oU),this.oU=void 0);if(n||r&&f&&"value"===f.getLookUpProperty()){const t=new Float32Array(l.length*this.j$),e={min:ro,max:no};l.forEach((i,s)=>{const r=void 0!==i.S?i.S:zr;for(let e=0;e<this.j$;e+=1)t[s*this.j$+e]=r;void 0!==i.S&&(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}),this.VN=e,this.aU=this.PB.iE(t,!1,this.aU)}if(o||r&&g){const t=new Uint32Array(l.length*this.j$),e=g?g.getFallbackColor().toUint32():Ns.toUint32();l.forEach((i,s)=>{const r=void 0!==i.PN?i.PN:e;for(let e=0;e<this.j$;e+=1)t[s*this.j$+e]=r}),this.lU=this.PB.iE(t,!1,this.lU,Uint32Array)}return p?this.mz=ux(this.fi||this.sc,this.oi,p.getPosition(),p.getExtent(),p.getShape(),this.PB.GR()):y?this.Sz=dx(this.fi||this.sc,this.oi,y.getAngle(!0),this.PB.GR()):(this.mz=void 0,this.Sz=void 0),b?this.mV=this.PB.FO(b.getPattern()):(this.pV&&(this.PB.gE(this.pV),this.pV=void 0),this.mV=void 0),this.$N=this.PB.DO(this,this.$N,m,void 0,r||this.oi.si(),(t,e,i)=>this.UN(t,e,i,l)),this.Y$=!1,this.G$=!1,this.$$=!1,this.U$=!1,this.li.o=!1,this.al(this.Xe),this.dl(a),this}pu(t,e){var i,s;const{fill:r,border:n}=this.yV,o=this.q$,a=this.tU,h=this.iU,l=this.sU,c=this.eU,u=this.hU,d=this.nU,f=this.oU;if(!(d&&o&&a&&h))return{};if(r&&l&&c){const s=1===t?null===(i=r.mousePicking)||void 0===i?void 0:i.shader:r.shader;s&&this.PB.Hu(s).eE(s,(i,s,n,u)=>!!this.PB.EO(n,t,this,{uniforms:this.hD,idFirst:e,fillStyleSolid:r.fillStyleSolid,fillStyleLinearGradient:r.fillStyleLinearGradient,fillStyleRadialGradient:r.fillStyleRadialGradient,fillStylePaletted:r.fillStylePaletted,fillStyleImage:r.fillStyleImage,fillStyleIndividual:r.fillStyleIndividual,linearGradientInfo:this.Sz,radialGradientInfo:this.mz,texturedFillGLInfo:this.$N,colorBuffer:this.lU,lookupValueBuffer:this.aU,lookupValueRange:this.VN,highlightBuffer:d,coordsX:o,coordsY:a,coordsHighPrecision:this.oi.Ot(),mousePickingOffsetBuffer:f})&&(this.PB.hE(h,void 0,{location:s("aGeoAmount"),size:2}).jE(l),this.PB.WE(c,this.PB.gl.TRIANGLES,void 0,this.PB.gl.UNSIGNED_INT),!0))}if(n&&u){const{geometry:i,thickness:r,lineStyleDashed:l}=n,c=1===t?null===(s=n.mousePicking)||void 0===s?void 0:s.shader:n.shader;c&&this.PB.Hu(c).eE(c,(s,c,g,p)=>{if(!this.PB.EO(g,t,this,{uniforms:this.hD,idFirst:e,fillStyleSolid:n.fillStyleSolid,highlightBuffer:d,highlightAttribDivisor:1,mousePickingOffsetBuffer:f,mousePickingOffsetAttribDivisor:1}))return!1;if(l){if(!this.mV||!this.pV)return!1;Ox.cV(this.PB,g,this.pV,c("aLengthSoFarA"),c("aLengthSoFarB"),2,2,0),this.PB.rE(s("uStippleCount"),[this.gi._t().x/this.mV.LO,this.gi._t().y/this.mV.LO]).oE(p("uStippleTextureWidthLimiter"),this.mV.PO/this.mV.LO).oE(s("uStippleScale"),l.getPatternScale()).nE(s("uStippleTexture"),this.mV.IO,1)}return Gx(this.PB,g,this.oi.Ot(),o,"aLocation","X",1,!1,this.PB.gl.FLOAT,Float32Array.BYTES_PER_ELEMENT),Gx(this.PB,g,this.oi.Ot(),a,"aLocation","Y",1,!1,this.PB.gl.FLOAT,Float32Array.BYTES_PER_ELEMENT),Gx(this.PB,g,!1,h,"aGeo","",2,!1,this.PB.gl.FLOAT,Float32Array.BYTES_PER_ELEMENT),Ox.pu(this.hz,i,g,this.gV&&1!==t,1===t,r,u),!0})}return{idCount:this.Gd.length}}UN(t,e,i,s){if(!this.rU)return new Float32Array;const r=hr({x:this.sc.min.x,y:this.sc.min.y},this.oi,this.gi.oi),n=hr({x:this.sc.max.x,y:this.sc.max.y},this.oi,this.gi.oi),o={x:Math.abs(r.x-n.x),y:Math.abs(r.y-n.y)},a=yx(t,e,o.x,o.y,i),h=a[1],l=a[4],c=a[6],u=a[7],d=this.sc.max.x-this.sc.min.x,f=this.sc.max.y-this.sc.min.y,g=l-c,p=u-h,y=new Float32Array(2*this.rU[0].length);let m=0;for(let v=0;v<this.rU[0].length;v+=1){const t=this.rU[0][v],e=this.rU[1][v],i=c+g*((t-this.sc.min.x)/d),s=h+p*((e-this.sc.min.y)/f);y[m]=i,y[m+1]=s,m+=2}return y}Su(t,e,i,s,r){return{collectionMember:this.Gd.find(i=>e+i.LN===t)}}mu(){return this.q$=this.PB.gE(this.q$),this.tU=this.PB.gE(this.tU),this.iU=this.PB.gE(this.iU),this.nU&&(this.PB.gE(this.nU),this.nU=void 0),this.oU&&(this.PB.gE(this.oU),this.oU=void 0),this.aU&&(this.PB.gE(this.aU),this.aU=void 0),this.lU&&(this.PB.gE(this.lU),this.lU=void 0),this.pV&&(this.PB.gE(this.pV),this.pV=void 0),this.sU&&(this.PB.gE(this.sU),this.sU=void 0),this.yV={fill:void 0,border:void 0},this.$N=this.PB.RO(this,this.$N),this}Hi(){return this.sc.max.x}ji(){return this.sc.min.x}Xi(){return this.sc.max.y}Wi(){return this.sc.min.y}oc(){return Un(this.Ze)}ac(){return Un(this.Ze)}}class Pb extends Tb{constructor(t,e,i){super(t,e,i),this.hz=t,this.gl=t.nz(),this.cU=this.Di}qR(t){const e=t instanceof ic&&t;if(!e)return oo;const i=e.ji(),s=e.Hi(),r=e.Wi(),n=e.Xi();if(i===ro||s===no||r===ro||n===no)return oo;const o=e.oc(),a=e.ac(),h=sc({min:{x:i,y:r},max:{x:s,y:n}},{x:o,y:a},e.oi),l={min:hr(h.min,e.oi,t.gi.oi),max:hr(h.max,e.oi,t.gi.oi)},c=this.N$.C();let u;if(c){if(u={min:{x:Math.min(l.min.x,c.x),y:Math.min(l.min.y,c.y)},max:{x:Math.max(l.max.x,c.x+c.width),y:Math.max(l.max.y,c.y+c.height)}},u.max.x<u.min.x||u.max.y<u.min.y)return oo}else u=l;return u}fh(t){return this.O$(new Xx(this.hz,this,t,this.z$,[]))}gA(t){return this.O$(new Ux(this.hz,this,t,this.z$,[]))}Dv(t,e,i){return this.O$(new Qx(this.hz,this,t,this.z$,i,e))}Ld(t){return this.O$(new Sb(this.hz,this,t,this.z$))}bn(t,e){return this.gi.Au&&!1!==e?this.O$(this.gi.Au.bn(this.hz,this,t,this.z$)):this.O$(new Mb(this.hz,this,t,this.z$,[]))}xu(t){if((arguments.length>1&&void 0!==arguments[1]?arguments[1]:gc.Simple)===gc.Simple)return this.O$(new tb(this.hz,this,t,this.z$,[]));throw new Error("GlEngine.addPolygon | No such polygon type!")}Ov(t){return this.O$(new Kx(this.hz,this,t,this.z$,[]))}fd(t){return this.O$(new Fb(this.hz,this,t,this.z$,[]))}qe(t){return this.O$(new $x(this.hz,this,t,this.z$,[]))}Ex(t){return this.O$(new _x(this.hz,this,t,this.z$,[]))}md(t){return this.O$(new Fx(this.hz,this,t,this.z$,[]))}qb(t,e,i){if("intensity"===i.heatmapDataType)return this.O$(new cb(this.hz,this,t,this.z$,e,i));throw new wm("Unimplemented Heatmap Grid Static type")}Zb(t,e,i){return this.O$(new hb(this.hz,this,t,this.z$,e,i))}k_(t,e,i){return this.O$(new db(this.hz,this,t,this.z$,e,i))}uU(t){return this.O$(new Mx(this.hz,this,this.z$,[],t))}Er(){if(this.qa){this.qa=!1;const t=Array.from(this.Di).sort((t,e)=>t.sl()-e.sl());this.Di.clear();for(const e of t)this.Di.add(e)}for(const t of this.Di)t.Er();return this}pu(t,e,i){var s;const r=this.N$.C();let n;if(r){const t=r.x*this.gl.GR()*e,i=r.y*this.gl.GR()*e,s=Math.ceil(t),o=Math.ceil(i);n=[s,o,Math.floor(t+r.width*this.gl.GR()*e)-s,Math.floor(i+r.height*this.gl.GR()*e)-o],this.gl.tE(n[0],n[1],n[2],n[3])}if(1!==t){for(const o of this.Di)if(o.getVisible()){if(o.ls){const t=o.ls.x*this.gl.GR()*e,i=o.ls.y*this.gl.GR()*e,s=Math.ceil(t),r=Math.ceil(i),n=Math.floor(t+o.ls.width*this.gl.GR()*e)-s,a=Math.floor(i+o.ls.height*this.gl.GR()*e)-r;this.gl.tE(s,r,n,a)}o.pu(t,0),o.ls&&n&&this.gl.tE(n[0],n[1],n[2],n[3])}}else{let r=((null===(s=i[i.length-1])||void 0===s?void 0:s.idLast)||0)+1;const o=Array.from(this.cU.values());for(let s=0;s<o.length;s+=1){const a=o[s];if(a.getPointerEvents()&&a.getVisible()){if(a.ls){const t=a.ls.x*this.gl.GR()*e,i=a.ls.y*this.gl.GR()*e,s=Math.ceil(t),r=Math.ceil(i),n=Math.floor(t+a.ls.width*this.gl.GR()*e)-s,o=Math.floor(i+a.ls.height*this.gl.GR()*e)-r;this.gl.tE(s,r,n,o)}const{idCount:o}=a.pu(t,r);a.ls&&n&&this.gl.tE(n[0],n[1],n[2],n[3]),void 0!==o&&(i.push({entity:a,layer:this,entityIndex:s,idFirst:r,idCount:o,idLast:r+o-1}),r+=o)}}}return this.gl.XR(!1),this}}class Bb extends fx{constructor(t){super(t)}}class Lb extends Bb{constructor(t){super(t),this.dU="attribute";const{vertices:e,drawSize:i,drawMode:s}=Db(t.gl);this.bB=t.iE(e),this.oV=i,this.aV=s}Mk(t,e,i,s){return this.PB.hE(this.bB,0,{location:t.attribute("aInstanceGeo"),size:3},{location:i?t.attribute("aNormal"):void 0,size:3},{location:s?t.attribute("aTriangleBary"):void 0,size:3}).XE(this.aV,0,this.oV,e),this}wR(){this.PB.gE(this.bB)}}const Db=t=>{const e=new Float32Array(324);let i=0;return e[i+0]=-1,e[i+1]=1,e[i+2]=1,e[i+3]=0,e[i+4]=1,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=1,e[i+3]=0,e[i+4]=1,e[i+5]=0,e[i+6]=1,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=1,e[i+2]=-1,e[i+3]=0,e[i+4]=1,e[i+5]=0,e[i+6]=0,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=-1,e[i+1]=1,e[i+2]=-1,e[i+3]=0,e[i+4]=1,e[i+5]=0,e[i+6]=0,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=1,e[i+3]=0,e[i+4]=1,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=-1,e[i+3]=0,e[i+4]=1,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=-1,e[i+3]=-1,e[i+4]=0,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=1,e[i+3]=-1,e[i+4]=0,e[i+5]=0,e[i+6]=1,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=1,e[i+2]=-1,e[i+3]=-1,e[i+4]=0,e[i+5]=0,e[i+6]=0,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=-1,e[i+1]=1,e[i+2]=-1,e[i+3]=-1,e[i+4]=0,e[i+5]=0,e[i+6]=0,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=1,e[i+3]=-1,e[i+4]=0,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=-1,e[i+1]=1,e[i+2]=1,e[i+3]=-1,e[i+4]=0,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=1,e[i+3]=1,e[i+4]=0,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=-1,e[i+3]=1,e[i+4]=0,e[i+5]=0,e[i+6]=1,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=1,e[i+3]=1,e[i+4]=0,e[i+5]=0,e[i+6]=0,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=1,e[i+3]=1,e[i+4]=0,e[i+5]=0,e[i+6]=0,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=-1,e[i+3]=1,e[i+4]=0,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=-1,e[i+3]=1,e[i+4]=0,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=1,e[i+3]=0,e[i+4]=0,e[i+5]=1,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=1,e[i+3]=0,e[i+4]=0,e[i+5]=1,e[i+6]=1,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=1,e[i+2]=1,e[i+3]=0,e[i+4]=0,e[i+5]=1,e[i+6]=0,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=-1,e[i+1]=1,e[i+2]=1,e[i+3]=0,e[i+4]=0,e[i+5]=1,e[i+6]=0,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=1,e[i+3]=0,e[i+4]=0,e[i+5]=1,e[i+6]=1,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=1,e[i+3]=0,e[i+4]=0,e[i+5]=1,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=-1,e[i+3]=0,e[i+4]=0,e[i+5]=-1,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=-1,e[i+3]=0,e[i+4]=0,e[i+5]=-1,e[i+6]=1,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=-1,e[i+3]=0,e[i+4]=0,e[i+5]=-1,e[i+6]=0,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=-1,e[i+3]=0,e[i+4]=0,e[i+5]=-1,e[i+6]=0,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=-1,e[i+3]=0,e[i+4]=0,e[i+5]=-1,e[i+6]=1,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=-1,e[i+1]=1,e[i+2]=-1,e[i+3]=0,e[i+4]=0,e[i+5]=-1,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=-1,e[i+3]=0,e[i+4]=-1,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=-1,e[i+3]=0,e[i+4]=-1,e[i+5]=0,e[i+6]=1,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=1,e[i+3]=0,e[i+4]=-1,e[i+5]=0,e[i+6]=0,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=1,e[i+3]=0,e[i+4]=-1,e[i+5]=0,e[i+6]=0,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=-1,e[i+3]=0,e[i+4]=-1,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=1,e[i+3]=0,e[i+4]=-1,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,{vertices:e,drawSize:i/9,drawMode:t.TRIANGLES}};class zb extends Bb{constructor(t,e){super(t),this.dU="attribute",this.fU=e;const{vertices:i,indices:s}=Ib();this.bB=t.iE(i),this.nV=t.zE(s),this.oV=s.length,this.aV=t.gl.TRIANGLES}Mk(t,e,i,s){return this.PB.hE(this.bB,0,{location:t.attribute("aEdge"),size:3},{location:i?t.attribute("aNormal"):void 0,size:3},{location:t.attribute("aInstanceGeo"),size:3}).jE(this.nV).oE(t.uniform("uEdgeRoundness"),this.fU/2).ZE(this.aV,this.oV,0,e),this}wR(){this.PB.gE(this.bB),this.PB.gE(this.nV)}AU(t){return this.fU=t,this}gU(){return this.fU}}const Ib=()=>{const t=[{normal:{x:0,y:1,z:0},perpendA:{x:0,y:0,z:1},perpendB:{x:-1,y:0,z:0}},{normal:{x:0,y:0,z:-1},perpendA:{x:0,y:1,z:0},perpendB:{x:-1,y:0,z:0}},{normal:{x:-1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:1}},{normal:{x:1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:-1}},{normal:{x:0,y:0,z:1},perpendA:{x:0,y:1,z:0},perpendB:{x:1,y:0,z:0}},{normal:{x:0,y:-1,z:0},perpendA:{x:0,y:0,z:-1},perpendB:{x:-1,y:0,z:0}}],e=[];let i=0;const s=[];let r=0;for(const u of t){const{normal:t,perpendA:n,perpendB:o}=u,a=so.multiply(n,-1),h=so.multiply(o,-1),l=i;e[i]={thicknessDirection:so.addVec(t,n,o),edge:so.addVec(a,h),normal:t},i+=1;const c=i;e[i]={thicknessDirection:so.addVec(t,a,o),edge:so.addVec(n,h),normal:t},i+=1;const d=i;e[i]={thicknessDirection:so.addVec(t,a,h),edge:so.addVec(n,o),normal:t},i+=1;const f=i;e[i]={thicknessDirection:so.addVec(t,n,h),edge:so.addVec(a,o),normal:t},i+=1,s[r+0]=d,s[r+1]=l,s[r+2]=f,s[r+3]=d,s[r+4]=c,s[r+5]=l,r+=6;const g=[{A:n,B:o},{A:a,B:o},{A:a,B:h},{A:n,B:h}];for(const s of g){s.thicknessDirection=so.addVec(t,s.A,s.B),s.stripVerticesA=[],s.stripVerticesB=[];const r=[{direction:s.A,other:s.B,vertices:s.stripVerticesA},{direction:s.B,other:s.A,vertices:s.stripVerticesB}];for(const n of r)for(let r=0;r<8;r+=1){const o=.5*r/7,a=so.normalize(so.lerp(t,n.direction,o)),h=Math.PI/2-so.angle(a,t),l=so.addVec(so.multiply(so.multiply(n.direction,-1),1-Math.cos(h)),so.multiply(so.multiply(t,-1),1-Math.sin(h)),so.multiply(n.other,-1)),c=i;e[i]={thicknessDirection:s.thicknessDirection,normal:a,edge:l};const u=e[i];i+=1,n.vertices.push({index:c,vertex:u})}}for(let e=0;e<g.length;e+=1){const t=g[e],i=g[e<g.length-1?e+1:0],n=e%2==0?t.stripVerticesB:t.stripVerticesA,o=e%2==0?i.stripVerticesB:i.stripVerticesA;for(let e=1;e<n.length;e+=1){const t=n[e-1],i=o[e-1],a=n[e],h=o[e];s[r+0]=t.index,s[r+1]=i.index,s[r+2]=h.index,s[r+3]=a.index,s[r+4]=t.index,s[r+5]=h.index,r+=6}}}const n=[{x:-1,y:1,z:-1,flipVertexOrder:!1},{x:-1,y:1,z:1,flipVertexOrder:!0},{x:1,y:1,z:1,flipVertexOrder:!1},{x:1,y:1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:1,flipVertexOrder:!1},{x:1,y:-1,z:1,flipVertexOrder:!0},{x:1,y:-1,z:-1,flipVertexOrder:!1}],o=Math.PI/15,a=2*Math.PI/15;let h=i;for(const u of n){let t=0;e[i]={thicknessDirection:u,normal:{x:0,y:u.y,z:0},edge:{x:-u.x,y:0,z:-u.z}},i+=1,t+=1;for(let s=1;s<8.5;s+=1){const r=15===s?Math.PI:s*o,n=1*Math.cos(r)*u.y,h=Math.sin(r);for(let s=0;s<Math.ceil(3.75)+1;s+=1){const r=15===s?0:s*a,o=h*Math.cos(r)*1*u.x,l=h*Math.sin(r)*1*u.z,c={x:o,y:n,z:l},d=so.normalize({x:o,y:n,z:l});e[i]={thicknessDirection:u,normal:d,edge:{x:c.x-u.x,y:c.y-u.y,z:c.z-u.z}},i+=1,t+=1}}const r=[];for(let e=1;e<=Math.ceil(3.75);e+=1)r.push(h),15===e?r.push(h+1):r.push(h+e+1),r.push(h+e);const n=h+1,l=Math.ceil(3.75)+1;for(let e=0;e<6.5;e+=1)for(let t=0;t<Math.ceil(3.75);t+=1){let i=0;const s=n+(e+1)*l+t;let o=0;14===t?(i=n+e*l,o=n+(e+1)*l):(i=n+e*l+t+1,o=n+(e+1)*l+t+1),r.push(n+e*l+t),r.push(i),r.push(s),r.push(s),r.push(i),r.push(o)}s.push.apply(s,u.flipVertexOrder?r.reverse():r),h+=t}const l=new Float32Array(9*e.length);let c=0;for(const u of e)l[c+0]=u.edge.x,l[c+1]=u.edge.y,l[c+2]=u.edge.z,l[c+3]=u.normal.x,l[c+4]=u.normal.y,l[c+5]=u.normal.z,l[c+6]=u.thicknessDirection.x,l[c+7]=u.thicknessDirection.y,l[c+8]=u.thicknessDirection.z,c+=9;return{vertices:l,indices:new Uint16Array(s)}},Rb=(t,e)=>{let i=t.xE.MR.get(e);return i||(i=void 0!==e&&e>0?new zb(t,Qr(e,0,1)):new Lb(t),t.xE.MR.set(e,i),i)};class _b extends vx{ev(t){return this.NR=this.Zg.C(),this.Zg._(t),this}np(t){return this.vU=t,this}op(){return this.vU}}class Vb extends _b{constructor(t,e,i){super(t,e,i),this.yU=t,this.hz=t.hz,this.PB=this.hz.nz()}}const Nb=11;class Ob extends Vb{constructor(t,e,i){super(t,e,i),this.vU="cull-back",this.sc=ao,this.pU={},this.mU=[],this.dz=gh({fillStyleSolid:()=>ha(this.Xe)&&this.Xe,fillStyleIndividual:()=>ca(this.Xe)&&this.Xe,fillStylePaletted:()=>fa(this.Xe)&&this.Xe}),this.Xe=$l.fillStyle,this.Zg._(Oa)}Er(t){const e=this.mU,i=this.Xe,s=i!==sa,r=this.SU,n=this.hl()||this.bU!==r,o=this.VR(),a=this.li.C(),h=this.li.o;if(s){for(const i of e)i.id=void 0!==i.id?String(i.id):void 0,i.xSize=void 0!==i.xSize&&i.xSize<0?-i.xSize:i.xSize,i.ySize=void 0!==i.ySize&&i.ySize<0?-i.ySize:i.ySize,i.zSize=void 0!==i.zSize&&i.zSize<0?-i.zSize:i.zSize;const t=this.xU||0;let s=t;for(const i of e){const t=i.id;void 0!==t&&void 0!==this.pU[t]||(s+=1)}let r,l=!1,c=!1;if(l=s!==t,c=l,r=!c&&(e.length<100?"chunks":"all"),l){const e=s*Nb,i=new Float32Array(e);this.MU&&i.set(this.MU),this.MU=i,this.wU=e,this._U=t*Nb}const u=ca(i)?i.getFallbackColor():void 0;for(const i of e){const t=i.id,e=void 0!==t&&this.pU[t],s=[i.xCenter,i.yCenter,i.zCenter,i.xSize,i.ySize,i.zSize,i.color?i.color.r:u?u.r:void 0,i.color?i.color.g:u?u.g:void 0,i.color?i.color.b:u?u.b:void 0,i.color?i.color.a:u?u.a:void 0,i.value];if(e){for(let t=0;t<Nb;t+=1)s[t]=void 0!==s[t]?s[t]:e.buffer[t];e.buffer.set(s)}else{const e=this._U,i=new Float32Array(this.MU.buffer,e*Float32Array.BYTES_PER_ELEMENT,Nb);i.set(s),void 0!==t&&(this.pU[t]={location:e,buffer:i}),this._U+=Nb}}if(c&&(this.rV=this.PB.iE(this.MU,!0)),"all"===r)this.PB.RE(this.rV,0,this.MU);else if("chunks"===r)for(const i of e){const t=i.id;if(void 0!==t){const e=this.pU[t];this.PB.RE(this.rV,e.location,e.buffer)}}if(n||o||h){const t=this.dz.fillStyleSolid(n),e=this.dz.fillStyleIndividual(n),i=this.dz.fillStylePaletted(n);t||e||i?(this.kU=Rb(this.PB,this.CU()),this.oD=this.PB.eR(Bv["3D"],Bv.ColorShaded3D({dataType:e?"attribute":i?["lookup",i.getLookUpProperty(),i.lut]:"uniform",shadingStyle:this.Zg.C().type}),Bv.VertexLocation({offsets:[{directionVar:"aInstanceGeo",sizeUnit:"axis",dataType:"attribute",halved:!0}],axisWorldTranslation:dh(this.oi),normalSource:this.kU.dU}),void 0!==this.SU&&Bv.RoundedEdges3D),this.E$=a?this.PB.eR(Bv["3D"],Bv.VertexLocation({offsets:[{directionVar:"aInstanceGeo",sizeUnit:"axis",dataType:"attribute",halved:!0}],axisWorldTranslation:dh(this.oi),normalSource:void 0}),Bv.MousePicking(),void 0!==this.SU&&Bv.RoundedEdges3D):void 0):(this.kU=void 0,this.oD=void 0,this.E$=void 0)}if(e.length>0){const t=Cs({x:ro,y:ro,z:ro},{x:no,y:no,z:no});for(let e=0;e<this._U;e+=Nb){const i=this.MU[e+0],s=this.MU[e+3]/2,r=i-s,n=i+s,o=this.MU[e+1],a=this.MU[e+4]/2,h=o-a,l=o+a,c=this.MU[e+2],u=this.MU[e+5]/2,d=c-u,f=c+u;t.min.x=t.min.x<r?t.min.x:r,t.min.y=t.min.y<h?t.min.y:h,t.min.z=t.min.z<d?t.min.z:d,t.max.x=t.max.x>n?t.max.x:n,t.max.y=t.max.y>l?t.max.y:l,t.max.z=t.max.z>f?t.max.z:f}this.sc=t}this.xU=s,this.mU.length=0}return this.al(i),this.bU=r,this.Zg.o=!1,this.li.o=!1,this}pu(t,e){const i=1===t?this.E$:this.oD,s=this.kU,r=this.rV,n=this.Xe,o=this.xU,a=this.Zg.C(),h=o||0;return i&&r&&void 0!==o&&this.PB.eE(i,(l,c,u)=>{let d=!1;const f=c("aPos"),g=c("aOffsetAxis");this.PB.Hu(i).TE(l("uScale"),this.yU.hD.aE()).TE(l("uDisp"),this.yU.hD.lE()).IE(l("uViewProjectionMatrix"),this.TU).oE(l("uIsHighlighted"),1===t||2===t?0:this.Ai).wI(l("uHighlightColorOffset"),1===t||2===t?Os:this.Si).oE(l("uRenderEffectMask"),2===t?1:0);const p={location:f,size:3},y={location:g,size:3},m={location:void 0,size:4},v={location:void 0,size:1};if(1!==t&&"phong"===a.type&&this.PB.TE(l("uCameraLoc"),this.FU).TE(l("uLightLoc"),this.IU).oE(l("uAmbientReflection"),a.ambientReflection).oE(l("uSpecularReflection"),a.specularReflection).oE(l("uDiffuseReflection"),a.diffuseReflection).oE(l("uShininess"),a.shininess).wI(l("uLightColor"),a.specularColor).wI(l("uAmbientColor"),a.ambientColor),1===t)this.PB.PE(l("uFirstId"),e).kO(u,h);else if(ha(n))this.PB.wI(l("uColorDiffuse"),n.getColor());else if(ca(n)){const t=c("aColor");m.location=t}else if(fa(n)){const t=ph(n,this,void 0);if(!t&&n.lut.percentageValues)return!1;this.PB.BO(u,n.lut,t),"value"===n.lookUpProperty&&(v.location=c("aLookupValue"))}return r&&(this.PB.hE(r,1,p,y,m,v),s.Mk(u,o,"phong"===a.type&&1!==t,!1),d=!0),d}),{idCount:h}}Su(t,e,i,s,r){const n=(t-e)*Nb;if(!this.MU)return{};const o=this.MU[n+0],a=this.MU[n+1],h=this.MU[n+2],l=this.MU[n+3],c=this.MU[n+4],u=this.MU[n+5],d=$r(this.MU[n+6],void 0),f=$r(this.MU[n+7],void 0),g=$r(this.MU[n+8],void 0),p=$r(this.MU[n+9],void 0),y=$r(this.MU[n+10],void 0);let m;for(const v of Object.keys(this.pU))if(this.pU[v].location===n){m=v;break}return{info:{dataPoint:{x:o,y:a,z:h,xSize:l,ySize:c,zSize:u,r:d,g:f,b:g,a:p,intensity:y,id:m}}}}dispose(){return super.dispose(),this.rV&&(this.PB.gE(this.rV),this.rV=void 0),this.oD=void 0,this}mu(){return this.dispose(),this}fv(t){this.mU=Tn(this.mU,t,{canReturnB:!0})}Ke(t){return this.Xe=rc(this.Xe,t),this}pr(){return this.Xe}cv(t){return this.SU=void 0!==t&&t>0?Qr(t,0,1):void 0,this}CU(){return this.SU}Hi(){return this.sc.max.x}ji(){return this.sc.min.x}Xi(){return this.sc.max.y}Wi(){return this.sc.min.y}pe(){return this.sc.max.z}ye(){return this.sc.min.z}oc(){return 0}ac(){return 0}ov(){return 0}hl(){return nc(this.rl,this.Xe)}al(t){this.rl=t}}class Yb extends fx{constructor(t,e){super(t),this.dU="custom",this.eV=e;const{vertices:i,drawSize:s}=this.hV();this.rV=t.iE(i),this.oV=s}Hu(t){return this.PB.hE(this.rV,0,{location:t.attribute("aSegmentPosition"),size:1},{location:t.attribute("aPerpendHorizontal"),size:1},{location:t.attribute("aPerpendVertical"),size:1}),this}Mk(t){return this.PB.XE(this.PB.gl.TRIANGLE_STRIP,0,this.oV,t),this}hV(){const t=this.eV,e=new Float32Array(2*(t+1)*3);let i=0;for(let s=0;s<=t;s+=1){const r=2*Math.PI*s/t,n=Math.cos(r),o=Math.sin(r);for(const t of[0,1])e[i+0]=t,e[i+1]=n,e[i+2]=o,i+=3}return{vertices:e,drawSize:i/3}}wR(){this.PB.gE(this.rV)}}const Gb=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,i=t.xE.bR.get(e);return i||(i=new Yb(t,e),t.xE.bR.set(e,i),i)};class Xb extends Vb{constructor(t,e,i){super(t,e,i),this.vU="cull-back",this.PU=ao,this.LU=[],this.BU=!1,this.iu=$l.lineStyle,this.Zg._(Va)}Er(t){const e=this.BU,i=this.iu,s=this.su!==i,r=this.VR(),n=e;if(e){const t=bn(this.LU);this.DU=this.PB.iE(t,!1,this.DU)}if(n&&(this.PU=Ao(this.LU)),s||r){const t=8,e=eh(i)&&i.getFillStyle(),s=1===i.getThickness()?"primitive":"instanced";this.yV=void 0,ha(e)&&("primitive"===s?this.yV={type:s,shader:this.PB.eR(Bv["3D"],Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0}),Bv.Color({dataType:"uniform"})),fillStyle:e}:"instanced"===s&&(this.yV={type:s,shader:this.PB.eR(Bv["3D"],Bv.ColorShaded3D({dataType:"uniform",shadingStyle:this.Zg.C().type}),Bv.LineInstanced3D({axisWorldTranslation:dh(this.oi)})),geometry:Gb(this.PB,t),fillStyle:e}))}return this.BU=!1,this.su=i,this.Zg.o=!1,this}pu(t,e){if(1===t)return{};const i=this.PB.gl,s=this.yV,r=this.DU,n=this.iu,o=this.Zg.C();if(s&&r&&eh(n))switch(s.type){case"instanced":{const e=.5*this.Ws.Vv(n.thickness),a=s.fillStyle.getColor(),h=s.shader,l=s.geometry;this.PB.eE(h,(s,n,c)=>{this.PB.Hu(h).TE(s("uScale"),this.yU.hD.aE()).TE(s("uDisp"),this.yU.hD.lE()).IE(s("uViewProjectionMatrix"),this.TU).wI(s("uColorDiffuse"),a).oE(s("uOffsetWU"),e).oE(s("uIsHighlighted"),this.Ai).wI(s("uHighlightColorOffset"),2===t?Os:this.Si).oE(s("uRenderEffectMask"),2===t?1:0),"phong"===o.type&&this.PB.TE(s("uCameraLoc"),this.FU).TE(s("uLightLoc"),this.IU).oE(s("uAmbientReflection"),o.ambientReflection).oE(s("uSpecularReflection"),o.specularReflection).oE(s("uDiffuseReflection"),o.diffuseReflection).oE(s("uShininess"),o.shininess).wI(s("uLightColor"),o.specularColor).wI(s("uAmbientColor"),o.ambientColor),i.bindBuffer(i.ARRAY_BUFFER,r);const u=n("aLocationA"),d=n("aLocationB");return i.vertexAttribPointer(u,3,i.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.PB.GE(u,1),i.enableVertexAttribArray(u),i.vertexAttribPointer(d,3,i.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.PB.GE(d,1),i.enableVertexAttribArray(d),l.Hu(c).Mk(this.LU.length/2),!0});break}case"primitive":{const e=eh(n)?n.getFillStyle():void 0,o=e&&ha(e)?e.getColor():void 0;if(o){const e=s.shader;this.PB.eE(e,(s,n)=>(this.PB.Hu(e).TE(s("uScale"),this.yU.hD.aE()).TE(s("uDisp"),this.yU.hD.lE()).IE(s("uViewProjectionMatrix"),this.TU).wI(s("uColor"),o).oE(s("uIsHighlighted"),this.Ai).wI(s("uHighlightColorOffset"),2===t?Os:this.Si).oE(s("uRenderEffectMask"),2===t?1:0).hE(r,void 0,{location:n("aPos"),size:3}).Mk(i.LINES,this.LU.length),!0))}break}}return{idCount:this.LU.length}}Su(t,e,i,s,r){return{}}Sc(t){for(let e=0;e<t.length-1;e+=1){const i=t[e],s=t[e+1];this.LU.push(i),this.LU.push(s)}return this.BU=!0,{Fi(){return this},Fs(){return this}}}zi(){return this.LU.length=0,this.BU=!0,this}Cv(){return[]}Ud(t){}dh(t){return this.iu="function"==typeof t?t(this.iu):t,this}ao(){return this.iu}mu(){return this.DU&&(this.PB.gE(this.DU),this.DU=void 0),this}Hi(){return this.PU.max.x}ji(){return this.PU.min.x}Xi(){return this.PU.max.y}Wi(){return this.PU.min.y}pe(){return this.PU.max.z}ye(){return this.PU.min.z}oc(){const t=this.iu;return t===Lr?0:t.getThickness()}ac(){const t=this.iu;return t===Lr?0:t.getThickness()}ov(){const t=this.iu;return t===Lr?0:t.getThickness()}}class Ub extends fx{constructor(t,e,i){super(t),this.dU="gpu-calculate",this.RU=e,this.EU=i;const{vertices:s,drawSize:r}=this.hV();this.rV=t.iE(s),this.oV=r}Mk(t,e,i,s){return this.PB.hE(this.rV,0,{location:t.attribute("aInstanceGeo"),size:3},{location:s?t.attribute("aTriangleBary"):void 0,size:3}).XE(this.PB.gl.TRIANGLES,0,this.oV,e),this}hV(){const t=this.EU,e=this.RU,i=new Float32Array(6*(6*e+6*(t-2)*e));let s=0;const r=2*Math.PI/e,n=Math.PI/t,o=(t,e,o,a,h)=>{const l=e*r,c=Math.PI/2-t*n,u=Math.cos(c),d=u*Math.cos(l),f=u*Math.sin(l),g=Math.sin(c);i[s]=d,i[s+1]=g,i[s+2]=f,i[s+3]=o,i[s+4]=a,i[s+5]=h,s+=6};for(let a=0;a<t;a+=1)for(let i=0;i<e;i+=1)a>0&&(o(a,i,1,0,0),o(a,i+1,1,1,0),o(a+1,i,0,0,1)),a<t-1&&(o(a,i+1,1,1,0),o(a+1,i+1,0,1,0),o(a+1,i,0,0,1));return s!==i.length&&Rn(0,()=>{this.PB._g.Ia&&s>i.length&&Ur.console.warn("LightningChart JS unexpected error scenario, sphere geometry buffer size mismatch.\nA point series 3D component might have missing points.\n\nThis warning can be omitted with LightningChartOptions.warnings")}),{vertices:i,drawSize:s/6}}wR(){this.PB.gE(this.rV)}}const Hb=(t,e)=>{const i=Math.round(e);i<3&&Rn(0,Jr);const s=i;let r=t.xE.xR.get(Array.from(t.xE.xR.keys()).find(t=>t.sectors===i&&t.stacks===s));return r||(r=new Ub(t,i,s),t.xE.xR.set({sectors:i,stacks:s},r),r)};class jb extends Vb{constructor(t,e,i){super(t,e,i),this.vU="cull-back",this.ix=[],this.yV={},this.vN=new Jx(this.ix,t=>t.vertexBuffer&&this.PB.gE(t.vertexBuffer),!0),this.au=[],this.lu=0,this.fc=[],this.OU=0,this.sc=ao,this.zU=ao,this.dz=gh({lineStyleSolid:()=>{const t=this.iu;return eh(t)&&t},lineFillSolid:()=>{const t=this.iu.getFillStyle();return ha(t)&&t},lineFillPaletted:()=>{const t=this.iu.getFillStyle();return fa(t)&&t},jointStyleTriangulatedPoints:()=>Ja(this.qv)&&this.qv,jointSizeTriangulated:()=>{const t=this.qv;return Ja(t)&&t.getSize()},jointFillSolid:()=>{const t=this.qv.getFillStyle();return ha(t)&&t},jointFillPaletted:()=>{const t=this.qv.getFillStyle();return fa(t)&&t},wireframeLineStyleSolid:()=>{const t=Ja(this.qv)&&this.qv.getWireframeStyle();return eh(t)&&t},wireframeFillSolid:()=>{const t=Ja(this.qv)&&this.qv.getWireframeStyle(),e=t&&t.getFillStyle();return ha(e)&&e}}),this.vc=!1,this.iu=$l.lineStyle,this.qv=$l.pointStyle3D,this.Zg._(Oa),this.bN={attributesPerVertex:3,prepareRenderData:(t,e)=>bn(t)}}Su(t,e,i,s,r){return{info:{dataPoint:this.au[t-e]}}}Er(t){const e=this.vc,i=this.fc,s=this.OU,r=s>0,n=this.iu,o=n!==this.su,a=this.qv,h=a!==this.VU,l=this.VR(),c=this.li.o,u=this.li.C();this.zU&&(this.sc=ko(this.sc,this.zU),this.zU=void 0),r&&(this.au=Tn(this.au,i,{canReturnB:!0}),this.lu+=s);let d=i,f=s;if(e&&(this.ix.forEach(t=>{t.existingCoordinatesCount=0,t.existingDataPointsCount=0,t.boundaries=ao}),this.vN.oN(),d=this.au,f=this.lu),f>0){const t=1e5,e=Math.floor(this.hz.NU/(this.bN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),i=this.Mi("ApplicationType",t=>"UserSeries"===t.type)?f:1e3,s=Qr(i,t,e);this.vN.eN(d,s,(t,e,i,s)=>({existingDataPointsCount:i-s,existingCoordinatesCount:i,allocatedCoordinatesCount:t,jointPointsCount:s,lastDataPoint:e[i-1],boundaries:ao,vertexBuffer:this.PB.DE(t*this.bN.attributesPerVertex,this.bN.prepareRenderData(e,i))}),(t,e,i,s)=>{this.PB.RE(t.vertexBuffer,t.existingCoordinatesCount*this.bN.attributesPerVertex,this.bN.prepareRenderData(e,i)),t.existingDataPointsCount+=i-s,t.existingCoordinatesCount+=i,t.jointPointsCount+=s,t.lastDataPoint=e[i-1]})}if(o||h||l||c){const t={},e=this.dz.lineStyleSolid(o),i=this.dz.lineFillSolid(o),s=this.dz.lineFillPaletted(o),r=i||s,a=this.dz.jointStyleTriangulatedPoints(h),l=this.dz.jointSizeTriangulated(h),c=this.dz.jointFillSolid(h),d=this.dz.jointFillPaletted(h),f=c||d,g=this.dz.wireframeLineStyleSolid(h),p=this.dz.wireframeFillSolid(h),y=n.getThickness()<0||1===n.getThickness()&&this.Mi("ApplicationType",t=>"InternalUI"===t.type)?"primitive":"instanced",m=s?["lookup",s.getLookUpProperty(),s.lut]:"uniform";if("primitive"===y&&r?t.lines={type:"primitive",fillStyleSolid:i,fillStylePaletted:s,shader:this.PB.eR(Bv["3D"],Bv.Color({dataType:m}),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0})),mousePicking:u?{shader:this.PB.eR(Bv["3D"],Bv.MousePicking({useVertexId:!0}),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0}))}:void 0}:"instanced"===y&&e&&r&&(t.lines={type:"instanced",lineStyleSolid:e,fillStyleSolid:i,fillStylePaletted:s,shader:this.PB.eR(Bv["3D"],Bv.ColorShaded3D({dataType:m,shadingStyle:this.Zg.C().type}),Bv.LineInstanced3D({axisWorldTranslation:dh(this.oi)})),geometry:Wb(this.PB,e.getThickness()),mousePicking:u?{shader:this.PB.eR(Bv["3D"],Bv.MousePicking(),Bv.LineInstanced3D({axisWorldTranslation:dh(this.oi)}))}:void 0}),t.markers=void 0,f&&a){const e=Mn(a.getShape(),{cube:()=>Rb(this.PB),sphere:()=>Zb(this.PB,a)});t.markers={geometry:e,pointStyle:a,pointSizeNWU:"number"==typeof l&&l,pointSizeAxis:"object"==typeof l&&l,fillStyleSolid:c,fillStylePaletted:d,shader:this.PB.eR(Bv["3D"],Bv.ColorShaded3D({dataType:d?["lookup",d.getLookUpProperty(),d.lut]:"uniform",shadingStyle:this.Zg.C().type,wireframe:!1!==p}),Bv.VertexLocation({offsets:[{directionVar:"aInstanceGeo",dataType:"uniform",sizeUnit:"number"==typeof l?"nwu":"axis",symmetric:"number"==typeof l,halved:!0}],axisWorldTranslation:dh(this.oi),normalSource:e.dU})),mousePicking:u?{shader:this.PB.eR(Bv["3D"],Bv.MousePicking(),Bv.VertexLocation({offsets:[{directionVar:"aInstanceGeo",dataType:"uniform",sizeUnit:"number"==typeof l?"nwu":"axis",symmetric:"number"==typeof l,halved:!0}],axisWorldTranslation:dh(this.oi),normalSource:void 0}))}:void 0,wireframe:g&&p&&{thickness:g.getThickness(),fillStyleSolid:p}}}this.yV=t}return this.vc=!1,this.fc=[],this.OU=0,this.su=n,this.VU=a,this.Zg.o=!1,this.li.o=!1,this}pu(t,e){var i,s;const r=this.PB.gl,{lines:n,markers:o}=this.yV,a=this.Zg.C(),h=this.lu,l=1===t?null===(i=null==n?void 0:n.mousePicking)||void 0===i?void 0:i.shader:null==n?void 0:n.shader;if(n&&l&&"instanced"===n.type){const i=l,{geometry:s,lineStyleSolid:o,fillStyleSolid:h,fillStylePaletted:c}=n;this.PB.eE(i,(n,l,u)=>{let d=!1;if(this.PB.Hu(i).TE(n("uScale"),this.yU.hD.aE()).TE(n("uDisp"),this.yU.hD.lE()).IE(n("uViewProjectionMatrix"),this.TU).oE(n("uOffsetWU"),this.Ws.Vv(o.getThickness())).oE(n("uIsHighlighted"),1===t||2===t?0:this.Ai).wI(n("uHighlightColorOffset"),1===t||2===t?Os:this.Si).oE(n("uRenderEffectMask"),2===t?1:0),1!==t&&"phong"===a.type&&this.PB.TE(n("uCameraLoc"),this.FU).TE(n("uLightLoc"),this.IU).oE(n("uAmbientReflection"),a.ambientReflection).oE(n("uSpecularReflection"),a.specularReflection).oE(n("uDiffuseReflection"),a.diffuseReflection).oE(n("uShininess"),a.shininess).wI(n("uLightColor"),a.specularColor).wI(n("uAmbientColor"),a.ambientColor),1===t);else if(h)this.PB.wI(n("uColorDiffuse"),h.getColor());else if(c){const t=ph(c,this,void 0);if(!t&&c.lut.percentageValues)return!1;this.PB.BO(u,c.lut,t)}const f=$n(e);return this.ix.forEach(e=>{if(1===t){const[t,i]=f.ts(e.existingDataPointsCount);this.PB.PE(n("uFirstId"),t).kO(u,i)}r.bindBuffer(r.ARRAY_BUFFER,e.vertexBuffer);const i=l("aLocationA"),o=l("aLocationB");r.vertexAttribPointer(i,3,r.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.PB.GE(i,1),r.enableVertexAttribArray(i),r.vertexAttribPointer(o,3,r.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.PB.GE(o,1),r.enableVertexAttribArray(o),s.Hu(u).Mk(e.existingCoordinatesCount-1),d=!0}),d})}if(n&&l&&"primitive"===n.type){const i=l,{fillStyleSolid:s,fillStylePaletted:o}=n;this.PB.eE(i,(n,a,h)=>{let l=!1;if(this.PB.Hu(i).TE(n("uScale"),this.yU.hD.aE()).TE(n("uDisp"),this.yU.hD.lE()).IE(n("uViewProjectionMatrix"),this.TU).oE(n("uIsHighlighted"),1===t||2===t?0:this.Ai).wI(n("uHighlightColorOffset"),1===t||2===t?Os:this.Si).oE(n("uRenderEffectMask"),2===t?1:0),1===t);else if(s)this.PB.wI(n("uColor"),s.getColor());else if(o){const t=ph(o,this,void 0);if(!t&&o.lut.percentageValues)return!1;this.PB.BO(h,o.lut,t)}const c=$n(e);return this.ix.forEach(e=>{if(1===t){const[t,i]=c.ts(e.existingDataPointsCount);this.PB.PE(n("uFirstId"),t).wO(h,i)}this.PB.hE(e.vertexBuffer,void 0,{location:a("aPos"),size:3}).Mk(r.LINE_STRIP,e.existingCoordinatesCount),l=!0}),l})}const c=1===t?null===(s=null==o?void 0:o.mousePicking)||void 0===s?void 0:s.shader:null==o?void 0:o.shader;if(o&&c){const i=c,{geometry:s,fillStyleSolid:r,fillStylePaletted:n,pointSizeAxis:h,pointSizeNWU:l,wireframe:u}=o;this.PB.eE(i,(o,c,d,f)=>{let g=!1;if(this.PB.Hu(i).TE(o("uScale"),this.yU.hD.aE()).TE(o("uDisp"),this.yU.hD.lE()).IE(o("uViewProjectionMatrix"),this.TU).oE(f("uRatioNwuWu"),this.yU.GU()).oE(o("uIsHighlighted"),1===t||2===t?0:this.Ai).wI(o("uHighlightColorOffset"),1===t||2===t?Os:this.Si).oE(o("uRenderEffectMask"),2===t?1:0),1!==t&&"phong"===a.type&&this.PB.TE(o("uCameraLoc"),this.FU).TE(o("uLightLoc"),this.IU).oE(o("uAmbientReflection"),a.ambientReflection).oE(o("uSpecularReflection"),a.specularReflection).oE(o("uDiffuseReflection"),a.diffuseReflection).oE(o("uShininess"),a.shininess).wI(o("uLightColor"),a.specularColor).wI(o("uAmbientColor"),a.ambientColor),1===t);else if(r)this.PB.wI(o("uColorDiffuse"),r.getColor());else if(n){const t=ph(n,this,void 0);if(!t&&n.lut.percentageValues)return!1;this.PB.BO(d,n.lut,t)}u&&1!==t&&this.PB.oE(o("uWireframeThickness"),u.thickness).wI(o("uWireframeColor"),u.fillStyleSolid.getColor()),!1!==h&&this.PB.TE(o("uOffsetAxis"),[h.x,h.y,h.z]),!1!==l&&this.PB.oE(o("uOffsetNWU"),l);const p=$n(e);return this.ix.forEach(e=>{if(1===t){const[t,i]=p.ts(e.existingDataPointsCount);this.PB.PE(o("uFirstId"),t).kO(d,i)}this.PB.hE(e.vertexBuffer,1,{location:c("aPos"),size:3}),s.Mk(d,e.existingCoordinatesCount,"phong"===a.type&&1!==t,Boolean(u)&&1!==t),g=!0}),g})}return{idCount:h}}Sc(t,e){Array.isArray(t)||(t=[t]),this.fc=Tn(this.fc,t,{canReturnB:!0}),this.OU+=t.length;const i=e||Ao(t);return this.zU=this.zU?ko(this.zU,i):i,this}dh(t){return this.iu="function"==typeof t?t(this.iu):t,this}ao(){return this.iu}Bv(t){return this.qv="function"==typeof t?t(this.qv):t,this}$U(){return this.qv}Hi(){return this.zU?Math.max(this.zU.max.x,this.sc.max.x):this.sc.max.x}ji(){return this.zU?Math.min(this.zU.min.x,this.sc.min.x):this.sc.min.x}Xi(){return this.zU?Math.max(this.zU.max.y,this.sc.max.y):this.sc.max.y}Wi(){return this.zU?Math.min(this.zU.min.y,this.sc.min.y):this.sc.min.y}pe(){return this.zU?Math.max(this.zU.max.z,this.sc.max.z):this.sc.max.z}ye(){return this.zU?Math.min(this.zU.min.z,this.sc.min.z):this.sc.min.z}oc(){return Un(this.iu)}ac(){return Un(this.iu)}ov(){return Un(this.iu)}bc(){return this.au}xc(){return this.fc}_c(){return this.lu}kc(){return this.OU}zi(){return this.vc=!0,this.au.length=0,this.lu=0,this.fc=[],this.OU=0,this.sc=ao,this.zU=void 0,this}dispose(){return super.dispose(),this.vN.aN(),this.yV={},this}mu(){return this.dispose(),this}}const Wb=(t,e)=>Gb(t,e>50?20:e>20?16:e>10?12:e>5?8:6),Zb=(t,e)=>{const i=e.getSize();return Hb(t,"number"==typeof i?i>50?20:i>20?16:i>10?12:i>5?8:6:20)};class Jb extends Vb{constructor(t,e,i){super(t,e,i),this.vU="disabled",this.UU=!1,this.YU=!1,this.jU={x:1,y:1,z:1},this.gp={x:0,y:0,z:0},this.Ap={x:0,y:0,z:0},this.HU={x:0,y:0,z:0},this.yp={x:0,y:0,z:0,w:1},this.pp={x:1,y:1,z:1},this.WU=Rs(255,255,255),this.XU=cx.projectionOrthographic(-1,1,-1,1,1,-1),this.ZU=cx.projectionOrthographic(-1,1,-1,1,1,-1),this.JU=!1,this.isEulerRotation=!0,this.dz=gh({fillStyleSolid:()=>ha(this.Xe)&&this.Xe,fillStyleValuePalette:()=>fa(this.Xe)&&"value"===this.Xe.lookUpProperty&&this.Xe}),this.Xe=$l.fillStyle,this.Zg._(Oa)}Er(t){var e;const i=this.VR(),s=this.li.C(),r=this.li.o,n=this.hl();this.dz.fillStyleSolid(n);const o=this.dz.fillStyleValuePalette(n),a=this.HU,h=this.pp;if(this.UU&&this.QU&&(this.rV=this.PB.iE(this.QU.vertices,void 0,this.rV),this.nV=this.PB.zE(this.QU.indices,this.nV),this.KU=this.QU.indices.length),"phong"===this.Zg.C().type&&(i||this.UU)&&(null===(e=this.QU)||void 0===e?void 0:e.normals)&&(this.qU=this.PB.iE(this.QU.normals,void 0,this.qU)),!this.tY&&o&&"value"===o.lookUpProperty&&this.QU&&(this.tY=new Float32Array(this.QU.vertices.length/3),this.YU=!0),this.tY&&this.YU&&(this.iY=this.PB.iE(this.tY,void 0,this.iY)),i||n||r){if(o&&"value"!==o.lookUpProperty)throw new Error("LightningChart JS MeshModel3D does not support look up by x/y/z. Must be value");this.oD=this.PB.eR(Bv["3D"],Bv.ColorShaded3D({dataType:o?["lookup","value",o.lut]:"uniform",shadingStyle:this.Zg.C().type,wireframe:!1}),Bv.Model3D({normalSource:"phong"===this.Zg.C().type?"attribute":void 0})),this.E$=s?this.PB.eR(Bv["3D"],Bv.MousePicking({useVertexId:!0}),Bv.Model3D({normalSource:void 0})):void 0}if(this.JU){const t=cx.projectionOrthographic(-1,1,-1,1,1,-1);if(this.isEulerRotation)this.ZU=cx.rotateXYZ(t,a),this.XU=cx.translate(t,h.x/2,h.y/2,h.z/2),this.XU=cx.rotateXYZ(this.XU,a),this.XU=cx.translate(this.XU,-h.x/2,-h.y/2,-h.z/2);else{const e=[-this.yp.x,-this.yp.y,-this.yp.z,this.yp.w];this.ZU=cx.quaternionToRotationMatrix(e),this.XU=cx.translate(t,h.x/2,h.y/2,h.z/2),this.XU=cx.multiply(this.XU,this.ZU),this.XU=cx.translate(this.XU,-h.x/2,-h.y/2,-h.z/2)}this.JU=!1}return this.Zg.o=!1,this.al(this.Xe),this.li.o=!1,this.UU=!1,this.YU=!1,this}pu(t,e){var i;const s=1===t?this.E$:this.oD,r=1===t,n=this.nV,o=this.rV,a=this.qU,h=this.iY,l=this.gp,c=this.Ap,u=this.jU,d=this.pp,f=this.XU,g=this.ZU,p=this.dz.fillStyleValuePalette(!1),y=this.dz.fillStyleSolid(!1),m=this.Zg.C(),v={location:void 0,size:1};let x=this.KU;if(!(s&&o&&n&&this.QU))return{};const b=this.QU?null===(i=this.QU)||void 0===i?void 0:i.parts.length:0;if(b<1)return{};const S=this.QU.vertices.length;return this.PB.eE(s,(i,A,E,k)=>{var w;this.PB.Hu(s).TE(i("uScale"),this.yU.hD.aE()).TE(i("uDisp"),this.yU.hD.lE()).IE(i("uViewProjectionMatrix"),this.TU).oE(i("uIsHighlighted"),1===t||2===t?0:this.Ai).wI(i("uHighlightColorOffset"),this.Si).oE(i("uRenderEffectMask"),2===t?1:0).IE(i("uModelRotation"),f).TE(i("uModelScale"),[u.x,u.y,u.z]).TE(i("uLocationAxis"),[l.x,l.y,l.z]).TE(i("uModelAlignment"),[c.x,c.y,c.z]).TE(i("uModelSize"),[d.x,d.y,d.z]).hE(o,0,{location:E.attribute("aGeoPos"),size:3}).jE(n);let M=!1;if(r)this.PB.PE(i("uFirstId"),e).wO(E,S);else{if(this.Xe===sa&&S<1)return!1;if(y)this.PB.wI(i("uColorDiffuse"),y.getColor());else if(p){if(!h)return!1;const t=p.getPalette();v.location=A("aLookupValue"),this.PB.BO(E,t,void 0).hE(h,void 0,v),M=!0}}"phong"!==m.type||r||(this.PB.TE(i("uCameraLoc"),this.FU).TE(i("uLightLoc"),this.IU).oE(i("uAmbientReflection"),m.ambientReflection).oE(i("uSpecularReflection"),m.specularReflection).oE(i("uDiffuseReflection"),m.diffuseReflection).oE(i("uShininess"),m.shininess).wI(i("uLightColor"),m.specularColor).wI(i("uAmbientColor"),m.ambientColor).IE(i("uModelRotationNormals"),g),a&&this.PB.hE(a,void 0,{location:E.attribute("aNormal"),size:3}));let C=!1;for(let t=0;t<b;t+=1){x=0;let e=this.WU,s=0,n=0,o=0,a=!0;this.QU&&this.QU.parts&&this.QU.parts[t].material&&(e=this.QU.parts[t].material.specular,x=this.QU.parts[t].count,n=this.QU.parts[t].count,o=this.QU.parts[t].offset,a=this.QU.parts[t].useIndexBuffer,s=this.QU.parts[t].indexStart,r||y||M||this.PB.wI(i("uColorDiffuse"),this.QU.parts[t].material.diffuse)),(x>0||n>0)&&("phong"!==m.type||r||(this.PB.wI(i("uLightColor"),e),g?this.PB.IE(i("uModelRotationNormals"),g):this.PB.wI(i("uLightColor"),m.specularColor)),a?this.PB.WE(x,this.PB.gl.TRIANGLES,s,(null===(w=this.QU)||void 0===w?void 0:w.indices)instanceof Uint32Array?this.PB.gl.UNSIGNED_INT:this.PB.gl.UNSIGNED_SHORT):this.PB.Mk(this.PB.gl.TRIANGLES,n,o),C=!0)}return C}),{idCount:S}}sY(t){if(this.eY)return this.eY;const e=this.gp,i=this.Ap,s=this.jU,r=this.pp,n=this.HU,o=this.yp,a=this.yU.jm(e),h=[],l=cx.projectionOrthographic(-1,1,-1,1,1,-1);let c;if(this.isEulerRotation)c=cx.translate(l,r.x/2,r.y/2,r.z/2),c=cx.rotateXYZ(c,n),c=cx.translate(c,-r.x/2,-r.y/2,-r.z/2);else{const t=[-o.x,-o.y,-o.z,o.w];c=cx.translate(l,r.x/2,r.y/2,r.z/2),c=cx.multiply(c,cx.quaternionToRotationMatrix(t)),c=cx.translate(c,-r.x/2,-r.y/2,-r.z/2)}const u=(i.x+1)*(r.x/2),d=(i.y+1)*(r.y/2),f=(i.z+1)*(r.z/2);for(let g=0;g<t.vertices.length;g+=3){const e=cx.multiply(c,[t.vertices[g],t.vertices[g+1],t.vertices[g+2],1]),i={x:a.x+(e[0]-u)*s.x,y:a.y+(e[1]-d)*s.y,z:a.z+(e[2]-f)*s.z};h.push(i)}return this.eY=h,this.eY}_p(t){const e=this.QU;if(!e)return;const i=this.sY(e),s=t(i);0!==s.length&&(s.length!==i.length&&!0===this.gi.Fa.Ia&&Ur.console.warn("LightningChart JS warning - MeshModel3D.setVertexValues returned array length is not equal to vertex locations array length.\nThis is most likely an application error."),this.tY=s instanceof Float32Array?s:new Float32Array(s),this.YU=!0)}Su(t,e,i,s,r){return{info:{iVertex:t-e}}}xp(t,e){const i=this.QU;if(!i||void 0===(null==t?void 0:t.iVertex))return;if(i.indices.length>0){const s=[];for(let e=0;e<i.indices.length;e+=3){const r=i.indices[e],n=i.indices[e+1],o=i.indices[e+2];r!==t.iVertex&&n!==t.iVertex&&o!==t.iVertex||s.push([r,n,o])}const r=this.sY(i),n=this.gi.hh(e.clientX,e.clientY),o=s.map(t=>t.map(t=>{const e={x:i.vertices[3*t],y:i.vertices[3*t+1],z:i.vertices[3*t+2]},s=r[t],o=this.yU.Hm(s),a=this.yU.Gv(o);return{index:t,vertex:e,world:s,axis:o,dist:a?vo(a,n):ro}})).flat();o.sort((t,e)=>t.dist-e.dist);const a=o[0];if(!a)return;const h=this.tY?this.tY[a.index]:void 0;return{coordModel:a.vertex,coordAxis:a.axis,index:a.index,value:h}}const s=t.iVertex,r=this.tY?this.tY[s]:void 0,n={x:i.vertices[3*s],y:i.vertices[3*s+1],z:i.vertices[3*s+2]},o=this.sY(i)[s];return{coordModel:n,coordAxis:this.yU.Hm(o),index:s,value:r}}dispose(){return super.dispose(),this.rV&&(this.PB.gE(this.rV),this.rV=void 0),this.nV&&(this.PB.gE(this.nV),this.nV=void 0),this.qU&&(this.PB.gE(this.qU),this.qU=void 0),this.iY&&(this.PB.gE(this.iY),this.iY=void 0),this.oD=void 0,this.E$=void 0,this.QU=void 0,this.tY=void 0,this}mu(){return this.dispose(),this}Mp(t){return this.QU=t,this.UU=!0,this.pp=t.modelSize,this}Ke(t){return this.Xe=rc(this.Xe,t),this}pr(){return this.Xe}kp(t){return this.jU=t,this.eY=void 0,this}aE(){return this.jU}Cp(t){return this.gp=t,this.eY=void 0,this}Tp(t){return this.Ap=t,this.eY=void 0,this}Fp(t){return this.HU=t,this.JU=!0,this.isEulerRotation=!0,this.eY=void 0,this}Ip(t){return this.yp=t,this.JU=!0,this.isEulerRotation=!1,this.eY=void 0,this}Pp(t){return this.vU=t,this}Lp(){return this.vU}Hi(){return no}ji(){return ro}Xi(){return no}Wi(){return ro}pe(){return no}ye(){return ro}oc(){return 0}ac(){return 0}ov(){return 0}hl(){return nc(this.rl,this.Xe)}al(t){this.rl=t}}class qb extends Vb{constructor(t,e,i,s){super(t,e,i),this.vU="cull-back",this.ix=[],this.vN=new Jx(this.ix,t=>t.vertexBuffer&&this.PB.gE(t.vertexBuffer),!1),this.au=[],this.lu=0,this.fc=[],this.OU=0,this.sc=ao,this.zU=ao,this.vc=!1,this.dz=gh({fillStyleSolid:()=>{const t=this.sy.getFillStyle();return ha(t)&&t},fillStyleIndividual:()=>{const t=this.sy.getFillStyle();return ca(t)&&t},fillStylePalette:()=>{const t=this.sy.getFillStyle();return fa(t)&&t},triangulatedPointStyle:()=>{const t=this.sy;return Ja(t)&&t},wireframeLineStyleSolid:()=>{const t=Ja(this.sy)&&this.sy,e=t&&t.getWireframeStyle();return eh(e)&&e},wireframeFillStyleSolid:()=>{const t=Ja(this.sy)&&this.sy,e=t&&t.getWireframeStyle(),i=e&&e.getFillStyle();return ha(i)&&i}}),this.iG=Fs(void 0),this.Fa=s,this.sy=$l.pointStyle3D,this.Zg._(Oa);const r=!0===(null==s?void 0:s.individualPointColorEnabled),n=!0===(null==s?void 0:s.individualPointSizeEnabled),o=!0===(null==s?void 0:s.individualLookupValuesEnabled),a=!0===(null==s?void 0:s.individualPointSizeAxisEnabled);let h,l,c,u,d=0;d+=3,r&&(h=d,d+=4),n&&(l=d,d+=1),o&&(c=d,d+=1),a&&(u=d,d+=3);const f=((t,e,i,s)=>t||e||i||s?!t||e||i||s?t||!e||i||s?t||e||!i||s?t||e||i||!s?(r,n,o)=>{const a=3+(t?4:0)+(e?1:0)+(i?1:0)+(s?3:0),h=r.length,l=new Float32Array(h*a);let c=0,u=c;for(let t=0;t<h;t+=1){const e=r[t];l[u+0]=e.x,l[u+1]=e.y,l[u+2]=e.z,u+=a}if(c+=3,t){const t=o&&ca(o)&&o.getFallbackColor()||Ns;u=c;for(let e=0;e<h;e+=1){const i=r[e].color||t;l[u+0]=i.r,l[u+1]=i.g,l[u+2]=i.b,l[u+3]=i.a,u+=a}c+=4}if(e){const t=n&&n.getSize();let e=1;"number"==typeof t&&(e=t),u=c;for(let i=0;i<h;i+=1){const t=r[i],s=void 0!==t.size?t.size:e;l[u+0]=s,u+=a}c+=1}if(i){u=c;for(let t=0;t<h;t+=1){const e=r[t];l[u+0]=void 0!==e.value?e.value:zr,u+=a}c+=1}if(s){const t=n&&n.getSize();let e={x:1,y:1,z:1};"object"==typeof t&&(e=t),u=c;for(let i=0;i<h;i+=1){const t=r[i],s=void 0!==t.sizeAxisX?t.sizeAxisX:e.x,n=void 0!==t.sizeAxisY?t.sizeAxisY:e.y,o=void 0!==t.sizeAxisZ?t.sizeAxisZ:e.z;l[u+0]=s,l[u+1]=n,l[u+2]=o,u+=a}c+=3}return l}:(t,e,i)=>((t,e)=>{const i=e&&e.getSize();let s={x:1,y:1,z:1};"object"==typeof i&&(s=i);const r=t.length,n=new Float32Array(6*r);let o=0;for(let a=0;a<r;a+=1){const e=t[a];n[o+0]=e.x,n[o+1]=e.y,n[o+2]=e.z;const i=void 0!==e.sizeAxisX?e.sizeAxisX:s.x,r=void 0!==e.sizeAxisY?e.sizeAxisY:s.y,h=void 0!==e.sizeAxisZ?e.sizeAxisZ:s.z;n[o+3]=i,n[o+4]=r,n[o+5]=h,o+=6}return n})(t,e):(t,e,i)=>(t=>{const e=t.length,i=new Float32Array(4*e);for(let s=0,r=0;s<e;s+=1){const e=t[s];i[r+0]=e.x,i[r+1]=e.y,i[r+2]=e.z,i[r+3]=void 0!==e.value?e.value:zr,r+=4}return i})(t):(t,e,i)=>((t,e)=>{const i=e&&e.getSize();let s=1;"number"==typeof i&&(s=i);const r=t.length,n=new Float32Array(4*r);for(let o=0,a=0;o<r;o+=1){const e=t[o];n[a+0]=e.x,n[a+1]=e.y,n[a+2]=e.z;const i=void 0!==e.size?e.size:s;n[a+3]=i,a+=4}return n})(t,e):(t,e,i)=>((t,e)=>{const i=e&&ca(e)&&e.getFallbackColor()||Ns,s=t.length,r=new Float32Array(7*s);for(let n=0,o=0;n<s;n+=1){const e=t[n];r[o+0]=e.x,r[o+1]=e.y,r[o+2]=e.z;const s=e.color||i;r[o+3]=s.r,r[o+4]=s.g,r[o+5]=s.b,r[o+6]=s.a,o+=7}return r})(t,i):(t,e,i)=>bn(t))(r,n,o,a);this.bN={individualPointColorEnabled:r,individualPointSizeEnabled:n,individualLookupValuesEnabled:o,individualPointSizeAxisEnabled:a,attributesPerVertex:d,attributeOffsetCoordinate:0,attributeOffsetColor:h,attributeOffsetSize:l,attributeOffsetLookUpValue:c,attributeOffsetPointSize3D:u,prepareRenderData:(t,e)=>f(t,this.sy,this.sy.fillStyle)}}wi(){return this.iG.C()||this.iG.M}Su(t,e,i,s,r){return{info:{dataPoint:this.au[t-e]}}}Er(t){const e=this.vc,i=this.fc,s=this.OU,r=s>0,n=this.sy,o=this.sy!==this.hY,a=this.li.C(),h=this.li.o,l=this.VR();this.zU&&(this.sc=ko(this.sc,this.zU),this.zU=void 0),r&&(this.au=Tn(this.au,i,{canReturnB:!0}),this.lu+=s);let c=i,u=s;if(e&&(this.ix.forEach(t=>{t.existingDataPointsCount=0,t.existingCoordinatesCount=0,t.boundaries=ao}),this.vN.oN(),c=this.au,u=this.lu),u>0){const t=Math.floor(this.hz.NU/(this.bN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),e=Qr(u,1e5,t);this.vN.eN(c,e,(t,e,i)=>({existingDataPointsCount:i,existingCoordinatesCount:i,allocatedCoordinatesCount:t,boundaries:ao,vertexBuffer:this.PB.DE(t*this.bN.attributesPerVertex,this.bN.prepareRenderData(e,i))}),(t,e,i)=>{this.PB.RE(t.vertexBuffer,t.existingCoordinatesCount*this.bN.attributesPerVertex,this.bN.prepareRenderData(e,i)),t.existingDataPointsCount+=i,t.existingCoordinatesCount=t.existingDataPointsCount})}const d=n.getFillStyle(),f=this.dz.fillStyleSolid(o),g=this.dz.fillStyleIndividual(o),p=this.dz.fillStylePalette(o),y=d===sa&&sa;if(o||l||h){let t;const e=n.getSize(),i=this.bN.individualPointColorEnabled,s=this.bN.individualPointSizeEnabled,r=this.bN.individualPointSizeAxisEnabled,h=this.bN.individualLookupValuesEnabled;if(g&&!i){const t="LCJS misusage error: Series individualPointColorEnabled flag must be set if using IndividualPointFill !";throw Ur.alert(t),new Error(t)}if(p&&"value"===p.getLookUpProperty()&&!h){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw Ur.alert(t),new Error(t)}const l=this.dz.wireframeLineStyleSolid(o),c=this.dz.wireframeFillStyleSolid(o);if(f||g||p||c){const i=g?"attribute":p?["lookup",p.getLookUpProperty(),p.lut]:"uniform",o=s&&"number"==typeof e,h=r&&"object"==typeof e,u=o||h?"attribute":"uniform";if(Ja(n)){const r=Mn(n.getShape(),{cube:()=>Rb(this.PB),sphere:()=>Qb(this.PB,n,s)});t={type:"instanced",shader:this.PB.eR(Bv["3D"],Bv.ColorShaded3D({dataType:i,shadingStyle:this.Zg.C().type,wireframe:!1!==c}),Bv.VertexLocation({offsets:[{directionVar:"aInstanceGeo",dataType:u,sizeUnit:"number"==typeof e?"nwu":"axis",halved:!0,symmetric:"number"==typeof e}],axisWorldTranslation:dh(this.oi),normalSource:r.dU})),pointStyle:n,useIndividualPointSize:o,useIndividualPointSize3D:h,pointSizeNWU:"number"==typeof e&&e,pointSizeAxis:"object"==typeof e&&e,fillStyleSolid:f,fillStyleIndividual:g,fillStylePaletted:p,fillStyleEmpty:y,mousePickingShader:a&&this.PB.eR(Bv["3D"],Bv.MousePicking(),Bv.VertexLocation({offsets:[{directionVar:"aInstanceGeo",dataType:u,sizeUnit:"number"==typeof e?"nwu":"axis",halved:!0,symmetric:"number"==typeof e}],axisWorldTranslation:dh(this.oi),normalSource:void 0})),geometry:r,wireframe:l&&c&&{thickness:l.getThickness()<0?1:l.getThickness(),fillStyleSolid:c}}}else Qa(n)&&"number"==typeof e&&(t={type:"primitive",shader:this.PB.eR(Bv["3D"],Bv.PointSize(u),Bv.Color({dataType:i}),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0})),pointStyle:n,pointSizePixels:e,useIndividualPointSize:o,fillStyleSolid:f,fillStyleIndividual:g,fillStylePaletted:p,mousePickingShader:a&&this.PB.eR(Bv["3D"],Bv.PointSize(u),Bv.MousePicking({useVertexId:!0}),Bv.VertexLocation({axisWorldTranslation:dh(this.oi),normalSource:void 0}))})}this.yV=t}if(void 0===this.iG.C()&&p&&"value"===p.lookUpProperty&&p.lut.percentageValues){let t=no,e=ro;for(let i=0;i<this.au.length;i+=1){const s=this.au[i];void 0!==s.value&&s.value<e&&(e=s.value),void 0!==s.value&&s.value>t&&(t=s.value)}this.iG._({min:e,max:t})}return this.iG.M=void 0,this.vc=!1,this.fc=[],this.OU=0,this.hY=n,this.Zg.o=!1,this}pu(t,e){const i=this.PB.gl,s=this.yV,r=this.lu;if(!s)return{};const n=1===t?s.mousePickingShader:s.shader;if(!n)return{};const o=this.Zg.C(),{fillStyleSolid:a,fillStylePaletted:h,useIndividualPointSize:l}=s,c="instanced"===s.type&&s.useIndividualPointSize3D,u="instanced"===s.type&&s.wireframe;return this.PB.eE(n,(r,d,f,g)=>{let p=!1;if(this.PB.Hu(n).TE(r("uScale"),this.yU.hD.aE()).TE(r("uDisp"),this.yU.hD.lE()).IE(r("uViewProjectionMatrix"),this.TU).oE(r("uIsHighlighted"),1===t||2===t?0:this.Ai).wI(r("uHighlightColorOffset"),1===t||2===t?Os:this.Si).oE(r("uRenderEffectMask"),2===t?1:0),"instanced"===s.type){const{pointSizeAxis:t,pointSizeNWU:e}=s;!1!==t&&!1===c&&this.PB.TE(r("uOffsetAxis"),[t.x,t.y,t.z]),!1!==e&&!1===l&&this.PB.oE(r("uOffsetNWU"),e).oE(g("uRatioNwuWu"),this.yU.GU())}else if("primitive"===s.type){const{pointSizePixels:t}=s;l||this.PB.oE(r("uPointSize"),t).oE(r("uDevicePixelRatio"),this.PB.GR())}if(1===t);else if("instanced"===s.type?("phong"===o.type&&this.PB.TE(r("uCameraLoc"),this.FU).TE(r("uLightLoc"),this.IU).oE(r("uAmbientReflection"),o.ambientReflection).oE(r("uSpecularReflection"),o.specularReflection).oE(r("uDiffuseReflection"),o.diffuseReflection).oE(r("uShininess"),o.shininess).wI(r("uLightColor"),o.specularColor).wI(r("uAmbientColor"),o.ambientColor),u&&this.PB.oE(r("uWireframeThickness"),u.thickness).wI(r("uWireframeColor"),u.fillStyleSolid.getColor()),a&&this.PB.wI(r("uColorDiffuse"),a.getColor()),s.fillStyleEmpty&&this.PB.wI(r("uColorDiffuse"),Os)):"primitive"===s.type&&a&&this.PB.wI(r("uColor"),a.getColor()),h){const t=ph(h,this,this.iG.C());if(!t&&h.lut.percentageValues)return!1;this.PB.BO(f,h.lut,t)}const y=$n(e);return this.ix.forEach(e=>{if(1===t){const[t,i]=y.ts(e.existingDataPointsCount);this.PB.PE(r("uFirstId"),t),"instanced"===s.type?this.PB.kO(f,i):this.PB.wO(f,i)}i.bindBuffer(i.ARRAY_BUFFER,e.vertexBuffer);const n=d("aPos");if(i.vertexAttribPointer(n,3,i.FLOAT,!1,this.bN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.bN.attributeOffsetCoordinate*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.PB.GE(n,1),i.enableVertexAttribArray(n),s.fillStyleIndividual&&void 0!==this.bN.attributeOffsetColor&&1!==t){const t=d("aColor");i.vertexAttribPointer(t,4,i.FLOAT,!1,this.bN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.bN.attributeOffsetColor*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.PB.GE(t,1),i.enableVertexAttribArray(t)}if(l&&void 0!==this.bN.attributeOffsetSize){"instanced"===s.type?this.PB.oE(g("uRatioNwuWu"),this.yU.GU()):"primitive"===s.type&&this.PB.oE(r("uDevicePixelRatio"),this.PB.GR());const t=d("instanced"===s.type?"aOffsetNWU":"aPointSize");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.bN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.bN.attributeOffsetSize*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.PB.GE(t,1),i.enableVertexAttribArray(t)}if(c&&void 0!==this.bN.attributeOffsetPointSize3D&&"instanced"===s.type){const t=d("aOffsetAxis");i.vertexAttribPointer(t,3,i.FLOAT,!1,this.bN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.bN.attributeOffsetPointSize3D*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.PB.GE(t,1),i.enableVertexAttribArray(t)}if(s.fillStylePaletted&&"value"===s.fillStylePaletted.getLookUpProperty()&&void 0!==this.bN.attributeOffsetLookUpValue&&1!==t){const t=d("aLookupValue");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.bN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.bN.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.PB.GE(t,1),i.enableVertexAttribArray(t)}"instanced"===s.type?(s.geometry.Mk(f,e.existingCoordinatesCount,"phong"===o.type&&1!==t,Boolean(u)&&1!==t),p=!0):"primitive"===s.type&&(this.PB.Mk(i.POINTS,e.existingCoordinatesCount),p=!0)}),p}),{idCount:r}}Sc(t,e){Array.isArray(t)||(t=[t]),this.fc=Tn(this.fc,t,{canReturnB:!0}),this.OU+=t.length;const i=e||Ao(t);return this.zU=this.zU?ko(this.zU,i):i,this.iG._(void 0),this}ey(t){return this.sy="function"==typeof t?t(this.sy):t,this}rY(){return this.sy}Hi(){return this.zU?Math.max(this.zU.max.x,this.sc.max.x):this.sc.max.x}ji(){return this.zU?Math.min(this.zU.min.x,this.sc.min.x):this.sc.min.x}Xi(){return this.zU?Math.max(this.zU.max.y,this.sc.max.y):this.sc.max.y}Wi(){return this.zU?Math.min(this.zU.min.y,this.sc.min.y):this.sc.min.y}pe(){return this.zU?Math.max(this.zU.max.z,this.sc.max.z):this.sc.max.z}ye(){return this.zU?Math.min(this.zU.min.z,this.sc.min.z):this.sc.min.z}oc(){const t=this.sy,e=t.getSize();return"number"==typeof e?Ja(t)?e/2:Qa(t)?5:0:0}ac(){return this.oc()}ov(){return this.oc()}bc(){return this.au}xc(){return this.fc}_c(){return this.lu}kc(){return this.OU}zi(){return this.vc=!0,this.au.length=0,this.lu=0,this.fc=[],this.OU=0,this.sc=ao,this.zU=void 0,this.iG._(void 0),this}dispose(){return super.dispose(),this.vN.aN(),this.yV=void 0,this}mu(){return this.dispose(),this}}const Qb=(t,e,i)=>{const s=e.getSize();return Hb(t,"number"==typeof s?i||s>=50?20:s>=10?10:s>=3?5:3:32)};class Kb extends Vb{constructor(t,e,i,s){super(t,e,i),this.vU="disabled",this.Xe=$l.fillStyle,this.Zy=$l.lineStyle,this.XN=Fs("bilinear"),this.nY=[],this.oY=void 0,this.yV={},this.aY=!1,this.dz=gh({fillStyleSolid:()=>ha(this.Xe)&&this.Xe,fillStylePaletted:()=>fa(this.Xe)&&this.Xe,wireframeStyleLine:()=>eh(this.Zy)&&this.Zy,wireframeStyleFill:()=>{const t=this.Zy&&this.Zy.getFillStyle();return ha(t)&&t}}),this.Yt={x:0,z:0},this.ZN={x:1,z:1},this.Zg._(Va);const r="columns"===s.dataOrder?s.columns:s.rows,n="columns"===s.dataOrder?s.rows:s.columns;this.Fa=l(l({},s),{},{primaryDimensionVectorsCount:r,secondaryDimensionVectorsCount:n}),this.lY=new Array(this.Fa.primaryDimensionVectorsCount).fill(void 0),this.Xb=new hb(this.hz,t.hz.fG,t.gi.oi,Jr,[],this.Fa).Jy(Lr),this.Xb.KN=ib;const o=this.Xb.tG.gridTiles.map(t=>{const e=t.sizeHeatmapDataVectors,i=t.sizeUniqueHeatmapDataVectors,s=t.iFirstVector,r=t.iFirstUniqueVector,n=new Float32Array(t.sizeHeatmapDataVectors.primary*t.sizeHeatmapDataVectors.secondary),o={primary:t.sizeHeatmapDataVectors.primary-1,secondary:t.sizeHeatmapDataVectors.secondary-1};return{iFirstVector:t.iFirstVector,iFirstUniqueVector:t.iFirstUniqueVector,sizeHeatmapDataVectors:t.sizeHeatmapDataVectors,sizeUniqueHeatmapDataVectors:t.sizeUniqueHeatmapDataVectors,iFirstGeometryVector:s,iFirstGeometryUniqueVector:r,sizeGeometryDataVectors:e,sizeUniqueGeometryDataVectors:i,heightmapData:n,normalmapSize:o}}),a=this.Xb.tG.gridTileSizes.map(t=>{const e=o.filter(e=>e.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&e.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary),i=e[0].sizeGeometryDataVectors;return l(l({},t),{},{tiles:e,sizeGeometryData:i})}),h=o.reduce((t,e)=>{const i=e.sizeHeatmapDataVectors.primary,s=e.sizeHeatmapDataVectors.secondary,r=i*s;return r>t.cells?{primary:i,secondary:s,cells:r}:t},{primary:0,secondary:0,cells:0});this.cY={gridTiles:o,gridTileSizes:a,largestGridTileSize:h},this.qy(this.Yt,this.ZN)}Su(t,e,i,s,r){const n=t-e,o=n%(this.Fa.secondaryDimensionVectorsCount-1),a=Math.floor(n/(this.Fa.secondaryDimensionVectorsCount-1)),h="columns"===this.Fa.dataOrder?a:o,c="rows"===this.Fa.dataOrder?a:o,u=[{x:this.Yt.x+h*this.ZN.x,z:this.Yt.z+c*this.ZN.z,y:this.uY(a,o),intensity:this.dY(a,o),column:"columns"===this.Fa.dataOrder?a:o,row:"columns"===this.Fa.dataOrder?o:a},{x:this.Yt.x+(h+("columns"===this.Fa.dataOrder?1:0))*this.ZN.x,z:this.Yt.z+(c+("rows"===this.Fa.dataOrder?1:0))*this.ZN.z,y:this.uY(a+1,o),intensity:this.dY(a+1,o),column:"columns"===this.Fa.dataOrder?a+1:o,row:"columns"===this.Fa.dataOrder?o:a+1},{x:this.Yt.x+(h+1)*this.ZN.x,z:this.Yt.z+(c+1)*this.ZN.z,y:this.uY(a+1,o+1),intensity:this.dY(a+1,o+1),column:"columns"===this.Fa.dataOrder?a+1:o+1,row:"columns"===this.Fa.dataOrder?o+1:a+1},{x:this.Yt.x+(h+("columns"===this.Fa.dataOrder?0:1))*this.ZN.x,z:this.Yt.z+(c+("rows"===this.Fa.dataOrder?0:1))*this.ZN.z,y:this.uY(a,o+1),intensity:this.dY(a,o+1),column:"columns"===this.Fa.dataOrder?a:o+1,row:"columns"===this.Fa.dataOrder?o+1:a}],d=u.map(t=>this.yU.Gv(t)).map(t=>void 0===t?ro:vo(t,{x:s,y:r})).map((t,e)=>({i:e,dist:t}));return d.sort((t,e)=>t.dist-e.dist),{info:{dataPoint:l({},u[d[0].i])}}}uY(t,e){for(let i=0;i<this.cY.gridTiles.length;i+=1){const s=this.cY.gridTiles[i];if(t>=s.iFirstVector.primary&&t<=s.iFirstVector.primary+s.sizeHeatmapDataVectors.primary-1&&e>=s.iFirstVector.secondary&&e<=s.iFirstVector.secondary+s.sizeHeatmapDataVectors.secondary-1){const i=t-s.iFirstVector.primary,r=e-s.iFirstVector.secondary,n=i*s.sizeHeatmapDataVectors.secondary+r;return s.heightmapData[n]}}return 0}dY(t,e){if(this.Xb.QN)for(let i=0;i<this.Xb.tG.gridTiles.length;i+=1){const s=this.Xb.tG.gridTiles[i];if(t>=s.iFirstVector.primary&&t<=s.iFirstVector.primary+s.sizeHeatmapDataVectors.primary-1&&e>=s.iFirstVector.secondary&&e<=s.iFirstVector.secondary+s.sizeHeatmapDataVectors.secondary-1){const i=t-s.iFirstVector.primary,r=e-s.iFirstVector.secondary,n=i*s.sizeHeatmapDataVectors.secondary+r;return s.intensityData[n]}}}fY(t){this.AY=t,this.oY=void 0}qy(t,e){this.Yt=t,this.ZN=e;const i=this.Fa,s={min:{x:Math.min(this.Yt.x,this.Yt.x+(i.columns-1)*this.ZN.x),z:Math.min(this.Yt.z,this.Yt.z+(i.rows-1)*this.ZN.z)},max:{x:Math.max(this.Yt.x,this.Yt.x+(i.columns-1)*this.ZN.x),z:Math.max(this.Yt.z,this.Yt.z+(i.rows-1)*this.ZN.z)}},r=new Map;return this.cY.gridTiles.forEach(t=>{const e="columns"===this.Fa.dataOrder?{x:this.ZN.x*(t.sizeHeatmapDataVectors.primary-1),z:this.ZN.z*(t.sizeHeatmapDataVectors.secondary-1)}:{x:this.ZN.x*(t.sizeHeatmapDataVectors.secondary-1),z:this.ZN.z*(t.sizeHeatmapDataVectors.primary-1)},i="columns"===this.Fa.dataOrder?{x:this.Yt.x+this.ZN.x*t.iFirstVector.primary,z:this.Yt.z+this.ZN.z*t.iFirstVector.secondary}:{x:this.Yt.x+this.ZN.x*t.iFirstVector.secondary,z:this.Yt.z+this.ZN.z*t.iFirstVector.primary};r.set(t,{sizeAxis:e,startLocationAxis:i})}),this.oG={gY:s,tilesInfo:r},this}tp(){return{start:this.Yt,step:this.ZN,end:{x:this.Yt.x+this.ZN.x*this.Fa.columns,z:this.Yt.z+this.ZN.z*this.Fa.rows}}}Er(t){const e=this.nY,i=nc(this.rl,this.Xe),s=this.dz.fillStyleSolid(i),r=this.dz.fillStylePaletted(i),n=this.Zy,o=this.Zy!==this.sG,a=this.dz.wireframeStyleLine(o),h=this.dz.wireframeStyleFill(o),l=!1!==h,c=this.XN.o,u=this.XN.C(),d=this.Zg.C(),f=this.VR(),g=this.li.C();this.Xb.Er();const p=this.Xb.eG;if(!p)return this;this.vY=this.vY||this.yY(p);const y=this.vY;this.pY(y);const m=sb(e,y,void 0,t=>t.sizeGeometryDataVectors);if(m.size>0&&(ob(this.PB,m,t=>t.heightmapData,t=>t.heightmapDataTexture),this.aY=!0),"phong"===d.type&&(m.size>0||f)){const t=this.PB.gl,e=this.PB.eR(Bv["2D"],Bv.DrawToNormalTexture({flipXZ:"rows"===this.Fa.dataOrder,vertexIdSource:this.PB.MO(),normalTextureType:this.PB.gl2?"uint":"ubyte",heightmapTextureType:this.PB.KD?"float":"ubyte",littleEndian:this.PB.IS_MACHINE_LITTLE_ENDIAN}));y.gridTileSizes.forEach(i=>{i.tiles.forEach(s=>{var r;const n=s.normalmapTexture,o=null===(r=this.oG)||void 0===r?void 0:r.tilesInfo.get(s.tileData);if(!n||!o)return;const a={x:s.normalmapSize.secondary,y:s.normalmapSize.primary},h=a.x*a.y;this.PB.rO.pu(()=>{this.PB.eE(e,(r,n,a,l)=>(this.PB.Hu(e).wO(a,h).rE(r("uTileDimensionsXZ"),["columns"===this.Fa.dataOrder?i.sizeHeatmapData.primary:i.sizeHeatmapData.secondary,"columns"===this.Fa.dataOrder?i.sizeHeatmapData.secondary:i.sizeHeatmapData.primary]).CE(r("uTileDimensions"),[i.sizeHeatmapData.primary,i.sizeHeatmapData.secondary]).rE(r("uTileStartLocationAxisXZ"),[o.startLocationAxis.x,o.startLocationAxis.z]).rE(r("uTileSizeAxisXZ"),[o.sizeAxis.x,o.sizeAxis.z]).nE(r("uHeightmapTexture"),s.heightmapDataTexture,1).Mk(t.POINTS,h),!0))},n,a,void 0,this.gi.pa(),0)})})}const v=this.yV;if(i||o||c){const t=a&&h?{wireframeSolid:a,wireframeFillSolid:h}:void 0;s?v.surface={shader:this.PB.eR(Bv["3D"],Bv.SurfaceGrid({axisWorldTranslation:dh(this.oi),fillColor:"uniform",interpolation:"bilinear"===u&&"bilinear",flipXZ:"rows"===this.Fa.dataOrder,shadingStyle:d.type,wireframe:l,normalTextureType:this.PB.gl2?"uint":"ubyte",intensityTextureType:this.PB.KD?"float":"ubyte",heightmapTextureType:this.PB.KD?"float":"ubyte",littleEndian:this.PB.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"solid",fillStyleSolid:s},wireframe:t}:r&&"value"===r.getLookUpProperty()?v.surface={shader:this.PB.eR(Bv["3D"],Bv.SurfaceGrid({axisWorldTranslation:dh(this.oi),fillColor:["lookup","value",r.lut],interpolation:"bilinear"===u&&"bilinear",flipXZ:"rows"===this.Fa.dataOrder,shadingStyle:d.type,wireframe:l,normalTextureType:this.PB.gl2?"uint":"ubyte",intensityTextureType:this.PB.KD?"float":"ubyte",heightmapTextureType:this.PB.KD?"float":"ubyte",littleEndian:this.PB.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"intensity",fillStylePaletted:r},wireframe:t}:r?v.surface={shader:this.PB.eR(Bv["3D"],Bv.SurfaceGrid({axisWorldTranslation:dh(this.oi),fillColor:["lookup",r.getLookUpProperty(),r.lut],interpolation:"bilinear"===u&&"bilinear",flipXZ:"rows"===this.Fa.dataOrder,shadingStyle:d.type,wireframe:l,normalTextureType:this.PB.gl2?"uint":"ubyte",intensityTextureType:this.PB.KD?"float":"ubyte",heightmapTextureType:this.PB.KD?"float":"ubyte",littleEndian:this.PB.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"xyz",fillStylePaletted:r},wireframe:t}:l&&(v.surface={shader:this.PB.eR(Bv["3D"],Bv.SurfaceGrid({axisWorldTranslation:dh(this.oi),fillColor:void 0,interpolation:"bilinear"===u&&"bilinear",flipXZ:"rows"===this.Fa.dataOrder,shadingStyle:d.type,wireframe:l,normalTextureType:this.PB.gl2?"uint":"ubyte",intensityTextureType:this.PB.KD?"float":"ubyte",heightmapTextureType:this.PB.KD?"float":"ubyte",littleEndian:this.PB.IS_MACHINE_LITTLE_ENDIAN})),fill:void 0,wireframe:t})}return v.mousePicking=g?this.yV.mousePicking||{shader:this.PB.eR(Bv["3D"],Bv.MousePicking(),Bv.SurfaceGrid({axisWorldTranslation:dh(this.oi),fillColor:void 0,interpolation:"bilinear"===u&&"bilinear",flipXZ:"rows"===this.Fa.dataOrder,shadingStyle:"simple",wireframe:!1,normalTextureType:this.PB.gl2?"uint":"ubyte",intensityTextureType:this.PB.KD?"float":"ubyte",heightmapTextureType:this.PB.KD?"float":"ubyte",littleEndian:this.PB.IS_MACHINE_LITTLE_ENDIAN}))}:void 0,this.yV=v,this.nY.length=0,this.rl=this.Xe,this.sG=n,this.Zg.o=!1,this}yY(t){const e=this.cY.gridTiles.map(e=>{const i=nb(this.PB,e.sizeHeatmapDataVectors.secondary,e.sizeHeatmapDataVectors.primary),s=t.gridTiles.find(t=>t.iFirstUniqueVector.primary===e.iFirstUniqueVector.primary&&t.iFirstUniqueVector.secondary===e.iFirstUniqueVector.secondary);if(!s)throw new Error("Internal LC JS error prepare surface data 2D render data not found");return l(l({},e),{},{intensityDataTexture:s.intensityDataTexture,heightmapDataTexture:i,normalmap:void 0,tileData:e})}),i=this.cY.gridTileSizes.map(t=>{const i=e.filter(e=>e.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&e.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary);return l(l({},t),{},{tiles:i})}),s=this.PB.iE([0,0,1,0,0,1,0,1,1,0,0,1,0,0,1,0,1,0,1,0,1,0,1,0,1,1,1,1,0,0]),r=this.PB.gl.TRIANGLES;return{gridTiles:e,gridTileSizes:i,rectangleLocationsBuffer:s,rectangleLocationsDrawLength:6,rectangleLocationsDrawMode:r}}pY(t){var e;if("phong"===this.Zg.C().type)for(let i=0;i<t.gridTiles.length;i+=1){const s=t.gridTiles[i];if(s.normalmapTexture)return;let r;const n=null===(e=this.PB.gl2)||void 0===e?void 0:e.ctx;if(n)r=this.PB.uO(null,n.RGBA_INTEGER,!1,!0,{x:s.normalmapSize.secondary,y:s.normalmapSize.primary},!1,n.UNSIGNED_INT,n.RGBA32UI);else{const t=this.PB.gl;r=this.PB.uO(null,t.RGBA,!1,!0,{x:s.normalmapSize.secondary,y:s.normalmapSize.primary},!1,t.UNSIGNED_BYTE)}s.normalmapTexture=r}else t.gridTiles.forEach(t=>{t.normalmapTexture&&(this.PB.DB(t.normalmapTexture),t.normalmapTexture=void 0)})}pu(t,e){var i,s,r,n;const o=this.PB.gl,a=this.vY;if(!a)return{};const h=this.Zg.C(),l=this.yV,c=1===t?null===(i=l.mousePicking)||void 0===i?void 0:i.shader:null===(s=l.surface)||void 0===s?void 0:s.shader;if(!c)return{};const u=1!==t?null===(r=l.surface)||void 0===r?void 0:r.wireframe:void 0,d=1!==t?null===(n=l.surface)||void 0===n?void 0:n.fill:void 0;return this.PB.eE(c,(i,s,r,n)=>{let l=!1;if(this.PB.Hu(c).kO(r,this.cY.largestGridTileSize.cells).TE(i("uScale"),this.yU.hD.aE()).TE(i("uDisp"),this.yU.hD.lE()).IE(i("uViewProjectionMatrix"),this.TU).oE(i("uIsHighlighted"),1===t||2===t?0:this.Ai).wI(i("uHighlightColorOffset"),1===t||2===t?Os:this.Si).oE(i("uRenderEffectMask"),2===t?1:0),1!==t&&("phong"===h.type&&this.PB.TE(i("uCameraLoc"),this.FU).TE(i("uLightLoc"),this.IU).oE(i("uAmbientReflection"),h.ambientReflection).oE(i("uSpecularReflection"),h.specularReflection).oE(i("uDiffuseReflection"),h.diffuseReflection).oE(i("uShininess"),h.shininess).wI(i("uLightColor"),h.specularColor).wI(i("uAmbientColor"),h.ambientColor),u)){const{wireframeFillSolid:t,wireframeSolid:e}=u,s=e.getThickness()<0?1:e.getThickness();this.PB.wI(i("uWireframeColor"),t.getColor()).oE(i("uWireframeThickness"),s)}return 1===t||"solid"===(null==d?void 0:d.fillMode)&&this.PB.wI(i("uColorDiffuse"),d.fillStyleSolid.getColor()),a.gridTileSizes.forEach(n=>{this.PB.rE(i("uTileDimensionsXZ"),["columns"===this.Fa.dataOrder?n.sizeHeatmapData.primary:n.sizeHeatmapData.secondary,"columns"===this.Fa.dataOrder?n.sizeHeatmapData.secondary:n.sizeHeatmapData.primary]).CE(i("uTileDimensions"),[n.sizeHeatmapData.primary,n.sizeHeatmapData.secondary]),n.tiles.forEach(h=>{var c;const f=null===(c=this.oG)||void 0===c?void 0:c.tilesInfo.get(h.tileData);if(!f)return;let g=0,p=(h.sizeHeatmapDataVectors.primary-1)*(h.sizeHeatmapDataVectors.secondary-1);if(this.AY){const t=this.AY.fill.iFirstPrimary,e=this.AY.fill.iFirstPrimary+this.AY.fill.amountPrimary-1,i=h.iFirstVector.primary,s=h.iFirstVector.primary+h.sizeHeatmapDataVectors.primary-1;if(i>e||s<t)return;const r=((t,e,i,s)=>Cs(Math.max(t,i),Math.min(e,s)))(t,e,i,s);g=(r.min-h.iFirstVector.primary)*(n.sizeGeometryData.secondary-1),p=(r.max-r.min)*(n.sizeGeometryData.secondary-1)}if(!(g<0||p<=0)){if("intensity"===(null==d?void 0:d.fillMode)){const{fillStylePaletted:t}=d,e=this.Xb.iG;this.PB.BO(r,t.lut,e).nE(i("uTileIntensityValues"),h.intensityDataTexture,2).fE(i("uTileBoundsAxisXZ"),[f.startLocationAxis.x,f.startLocationAxis.z,f.sizeAxis.x,f.sizeAxis.z])}if("xyz"===(null==d?void 0:d.fillMode)){const{fillStylePaletted:t}=d,e="x"===t.getLookUpProperty()?{min:this.ji(),max:this.Hi()}:"y"===t.getLookUpProperty()?{min:this.Wi(),max:this.Xi()}:"z"===t.getLookUpProperty()?{min:this.ye(),max:this.pe()}:void 0;if(!e&&t.lut.percentageValues)return;this.PB.BO(r,t.lut,e)}1!==t&&"phong"===this.Zg.C().type&&h.normalmapTexture&&this.PB.nE(i("uNormalmapTexture"),h.normalmapTexture,3),1===t&&this.PB.PE(i("uFirstId"),e+g),this.PB.hE(a.rectangleLocationsBuffer,0,{location:s("aGeoCellOffset"),size:2},{location:u?s("aTriangleBary"):void 0,size:3}).PE(i("uBaseInstance"),g).rE(i("uTileStartLocationAxisXZ"),[f.startLocationAxis.x,f.startLocationAxis.z]).rE(i("uTileSizeAxisXZ"),[f.sizeAxis.x,f.sizeAxis.z]).nE(i("uHeightmapTexture"),h.heightmapDataTexture,0).XE(a.rectangleLocationsDrawMode,0,a.rectangleLocationsDrawLength,p),l=!0,o.bindBuffer(o.ARRAY_BUFFER,null)}})}),l}),{idCount:this.Fa.columns*this.Fa.rows}}wi(){return this.Xb.wi()}dispose(){return super.dispose(),this.Xb.dispose(),this.vY&&(this.vY.gridTileSizes.forEach(t=>{}),this.vY.gridTiles.forEach(t=>{this.PB.DB(t.heightmapDataTexture),t.normalmapTexture&&this.PB.DB(t.normalmapTexture)}),this.PB.gE(this.vY.rectangleLocationsBuffer),this.vY=void 0),this.yV={},this}mu(){return this.dispose(),this.Xb.mu(),this}hp(t){return this.Xb.hp(t),this}rp(t){this.nY.push(t),rb(this.cY.gridTiles,t,t=>t.heightmapData);for(let e=t.startPrimary;e<t.startPrimary+t.lengthPrimary;e+=1)this.lY[e]=void 0;return this.oY=void 0,this}sp(t){return this.XN._(t),this}ep(){return this.XN.C()}Ke(t){return this.Xe=rc(this.Xe,t),this.Xb.Ke(this.Xe),this}pr(){return this.Xe}Jy(t){return this.Zy="function"==typeof t?t(this.Zy):t,this}ip(){return this.Zy}Hi(){var t;return(null===(t=this.oG)||void 0===t?void 0:t.gY.max.x)||0}ji(){var t;return(null===(t=this.oG)||void 0===t?void 0:t.gY.min.x)||0}Xi(){const t=this.oY||this.mY();return this.oY=t,t.max}Wi(){const t=this.oY||this.mY();return this.oY=t,t.min}pe(){var t;return(null===(t=this.oG)||void 0===t?void 0:t.gY.max.z)||0}ye(){var t;return(null===(t=this.oG)||void 0===t?void 0:t.gY.min.z)||0}oc(){return 0}ac(){return 0}ov(){return 0}mY(){if(this.oY)return this.oY;const t=this.AY?this.AY.fill.iFirstPrimary:0,e=this.AY?t+this.AY.fill.amountPrimary-1:this.Fa.primaryDimensionVectorsCount-1;let i=ro,s=no;return this.cY.gridTiles.forEach(r=>{for(let n=Math.max(t,r.iFirstUniqueVector.primary);n<=Math.min(e,r.iFirstUniqueVector.primary+r.sizeUniqueHeatmapDataVectors.primary-1);n+=1){const t=(n-r.iFirstUniqueVector.primary)*r.sizeHeatmapDataVectors.secondary;let e=this.lY[n];if(e)i=i<e.min?i:e.min,s=s>e.max?s:e.max;else{e={min:ro,max:no},this.lY[n]=e;for(let n=0;n<r.sizeHeatmapDataVectors.secondary;n+=1){const o=r.heightmapData[t+n];i=i<o?i:o,s=s>o?s:o,e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}}}}),this.oY={min:i,max:s},this.oY}}class $b extends Vb{constructor(t,e,i,s){super(t,e,i),this.vU="disabled",this.cG=0,this.dG={},this.SY=new Map,this.Yt={x:0,z:0},this.ZN={x:1,z:1},this.Fa=l(l({},s),{},{scrollDimensionSize:"columns"===s.scrollDimension?s.columns:s.rows,staticDimensionSize:"columns"===s.scrollDimension?s.rows:s.columns}),this.gY={min:{x:this.Yt.x,z:this.Yt.z},max:{x:"rows"===s.scrollDimension?this.Yt.x+(s.columns-1)*this.ZN.x:this.Yt.x,z:"columns"===s.scrollDimension?this.Yt.z+(s.rows-1)*this.ZN.z:this.Yt.z}};const r=()=>({shape:new Kb(this.yU,Jr,this.pi,{columns:s.columns+("columns"===s.scrollDimension?1:0),rows:s.rows+("rows"===s.scrollDimension?1:0),dataOrder:s.scrollDimension,heatmapDataType:"intensity"}).setVisible(!1),hasData:!1});this.ix=[r(),r()]}Er(t){this.ix.forEach(e=>{e.shape.Er(t)});const e=this.ix.reduce((t,e)=>{var i,s;return t.min=Math.min(t.min,$r(null===(i=e.shape.Xb.iG)||void 0===i?void 0:i.min,ro)),t.max=Math.max(t.max,$r(null===(s=e.shape.Xb.iG)||void 0===s?void 0:s.max,no)),t},{min:ro,max:no}),i=this.ix.reduce((t,e)=>{var i,s;return t.min=Math.min(t.min,$r(null===(i=e.shape.oY)||void 0===i?void 0:i.min,ro)),t.max=Math.max(t.max,$r(null===(s=e.shape.oY)||void 0===s?void 0:s.max,no)),t},{min:ro,max:no});return this.ix.forEach(t=>{t.shape.Xb.iG=e,t.shape.oY=i}),this}pu(t,e){let i=0,s=e;return this.ix.forEach(e=>{if(!e.hasData)return;e.shape.TU=this.TU,e.shape.FU=this.FU,e.shape.IU=this.IU;const{idCount:r}=e.shape.pu(t,s);void 0!==r&&(1===t&&this.SY.set(e,{idFirst:s,idCount:r}),i+=r,s+=r)}),{idCount:i}}Su(t,e,i,s,r){const n=Array.from(this.SY).find(e=>yo(t,e[1].idFirst,e[1].idFirst+e[1].idCount-1));return n?n[0].shape.Su(t,n[1].idFirst,n[1].idCount,s,r):{}}qy(t,e){return this.Yt=t,this.ZN=e,this.ix.forEach(t=>{t.shape.qy("columns"===this.Fa.scrollDimension?{x:t.shape.tp().start.x,z:this.Yt.z}:{x:this.Yt.x,z:t.shape.tp().start.z},this.ZN)}),"columns"===this.Fa.scrollDimension?(this.gY.min.z=t.z,this.gY.max.z=this.Yt.z+(this.Fa.rows-1)*this.ZN.z):(this.gY.min.x=t.x,this.gY.max.x=this.Yt.x+(this.Fa.columns-1)*this.ZN.x),this}tp(){return{start:this.Yt,step:this.ZN}}zi(){return this.cG=0,this.dG={},this.gY={min:{x:this.Yt.x,z:this.Yt.z},max:{x:"rows"===this.Fa.scrollDimension?this.Yt.x+(this.Fa.columns-1)*this.ZN.x:this.Yt.x,z:"columns"===this.Fa.scrollDimension?this.Yt.z+(this.Fa.rows-1)*this.ZN.z:this.Yt.z}},this.ix.forEach(t=>{t.shape.setVisible(!1),t.shape.aY=!1,t.hasData=!1}),this}lp(t){var e;const i=this.ix[0],s=this.ix[1],r=t.heightMapValues?t.heightMapValues.length:null===(e=t.intensityValues)||void 0===e?void 0:e.length;let n=0;if(!r)return this;do{const e=Math.floor(this.cG/this.Fa.scrollDimensionSize)%this.ix.length,o=this.ix[e],a=this.cG%this.Fa.scrollDimensionSize,h=this.Fa.scrollDimensionSize-a,l=0===a,c=Math.min(h,r),u=a+c,d=a,f=d+1,g=n,p=n+c,y=this.cG>=this.Fa.scrollDimensionSize&&u<=this.Fa.scrollDimensionSize-1,m=l;l&&(o.shape.qy("columns"===this.Fa.scrollDimension?{x:this.Yt.x+(this.cG-1)*this.ZN.x,z:this.Yt.z}:{x:this.Yt.x,z:this.Yt.z+(this.cG-1)*this.ZN.z},this.ZN),o.shape.setVisible(!0));const v=y?0:1,x=u+(y?1:0);o.shape.fY({fill:{iFirstPrimary:v,amountPrimary:x},wireframe:{iFirstPrimary:v,amountPrimary:x,connectNext:!1}});const b=o===i?s:i,S=u+1,A=1+this.Fa.scrollDimensionSize-S;b.shape.fY({fill:{iFirstPrimary:S,amountPrimary:A},wireframe:{iFirstPrimary:S,amountPrimary:A-1,connectNext:!0}});const E={};if(t.heightMapValues){const e=t.heightMapValues.slice(g,p);let i=!1;m&&this.dG.yValues&&(i=!0,e.splice(0,0,this.dG.yValues));const s={startPrimary:i?d:f,startSecondary:0,lengthPrimary:e.length,lengthSecondary:this.Fa.staticDimensionSize,values:e,type:"y"};o.shape.rp(s),o.hasData=!0,E.yValues=e[c-1]}if(t.intensityValues){const e=t.intensityValues.slice(g,p);let i=!1;m&&this.dG.intensityValues&&(i=!0,e.splice(0,0,this.dG.intensityValues));const s={startPrimary:i?d:f,startSecondary:0,lengthPrimary:e.length,lengthSecondary:this.Fa.staticDimensionSize,values:e,type:"intensity"};o.shape.hp(s),o.hasData=!0,E.intensityValues=e[c-1]}this.cG+=c,n+=c,this.dG=E}while(n<r);return"columns"===this.Fa.scrollDimension?(this.gY.min.x=this.Yt.x+Math.max(this.cG-this.Fa.scrollDimensionSize,0)*this.ZN.x,this.gY.max.x=this.Yt.x+(this.cG-1)*this.ZN.x):(this.gY.min.z=this.Yt.z+Math.max(this.cG-this.Fa.scrollDimensionSize,0)*this.ZN.z,this.gY.max.z=this.Yt.z+(this.cG-1)*this.ZN.z),this}hp(t){var e;const{iSample:i,yValues:s,intensityValues:r}=t,n=s||r;if(!n)return this;const o=i,a=i+n.length-1,h=n[0].length;this.ix.forEach((t,e)=>{const i=Math.floor(this.cG/this.Fa.scrollDimensionSize)%this.ix.length,n=this.cG%this.Fa.scrollDimensionSize;let l,c;if(e===i?0===n?(c=-1,l=-1):(c=this.cG-1,l=c-n+1):(c=this.cG-n-1,l=c-this.Fa.scrollDimensionSize+1),a<l||o>c)return;const u=Math.max(o,l),d=Math.min(a,c),f=d-u+1,g=r&&r.slice(u-o,d-o+1),p=s&&s.slice(u-o,d-o+1),y=g&&{type:"intensity",startSecondary:0,lengthSecondary:h,startPrimary:u+1,lengthPrimary:f,values:g},m=p&&{type:"y",startSecondary:0,lengthSecondary:h,startPrimary:u+1,lengthPrimary:f,values:p};y&&t.shape.hp(y),m&&t.shape.rp(m),d===this.cG-1&&(this.dG={yValues:p?p[p.length-1]:void 0,intensityValues:g?g[g.length-1]:void 0})});const l=this.cG-1;if(a>l){const t=a-l,i=s&&s.slice(-t),n=r&&r.slice(-t),o=i?i.length:null!==(e=null==n?void 0:n.length)&&void 0!==e?e:0;if(o<t){const e=this.dG||new Array(h).fill(0);for(let s=o;s<t;s+=1)i&&e.yValues&&i.unshift(e.yValues),n&&e.intensityValues&&n.unshift(e.intensityValues)}this.lp({heightMapValues:i,intensityValues:n,lengthPrimary:o,lengthSecondary:h})}return this}cp(){return this.cG}sp(t){return this.ix.forEach(e=>e.shape.sp(t)),this}ep(){return this.ix[0].shape.ep()}Ke(t){return this.ix.forEach(e=>e.shape.Ke(t)),this}pr(){return this.ix[0].shape.pr()}Jy(t){return this.ix.forEach(e=>e.shape.Jy(t)),this}ip(){return this.ix[0].shape.ip()}mu(){return this.dispose(),this.ix.forEach(t=>t.shape.mu()),this}dispose(){return super.dispose(),this.ix.forEach(t=>t.shape.dispose()),this}setVisible(t){return super.setVisible(t),this.ix.forEach(e=>e.shape.setVisible(t&&e.hasData)),this}ev(t){return super.ev(t),this.ix.forEach(e=>e.shape.ev(t)),this}Hi(){return this.gY.max.x}ji(){return this.gY.min.x}Xi(){return Math.max(this.ix[0].shape.Xi(),this.ix[1].shape.Xi())}Wi(){return Math.min(this.ix[0].shape.Wi(),this.ix[1].shape.Wi())}pe(){return this.gY.max.z}ye(){return this.gY.min.z}oc(){return 0}ac(){return 0}ov(){return 0}Fi(t){return super.Fi(t),this.ix.forEach(e=>e.shape.Fi(t)),this}}class tS extends Cb{constructor(t,e,i,s){super(t,e,i),this.FU=ws(0,0,1),this.bY=ws(0,0,-1),this.xY=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],this.Zg=new _a,this.oi=s}vm(){const{cellIndex:t,cellSpan:e,cellsAmount:i}=this.oi,s=e.x/i.x,r=e.y/i.y,n=t.x/i.x,o=t.y/i.y,a=this.gi._t();return{x:n*a.x,y:o*a.y,width:s*a.x,height:r*a.y}}setCameraLocation(t){return this.FU=t,this}getCameraLocation(){return this.FU}setCameraDirection(t){return this.bY=so.normalize(t),this}getCameraDirection(){return this.bY}setLightLocation(t){return this.IU=t,this}getLightLocation(){return this.IU}MY(){return ws(this.xY[0],this.xY[1],this.xY[2])}wY(){return ws(this.xY[4],this.xY[5],this.xY[6])}}class eS extends tS{constructor(t,e,i,s){super(t,e,i,s),this.hD=new Ex,this._Y=!0,this.kY=()=>{this._Y=!0},this.CY="perspective",this.hz=t,this.gl=t.nz(),this.cU=this.Di,this.gi.R("resize",this.kY),s.addEventListener("cellresize",this.kY)}qR(t){const e=t.ji(),i=t.Wi(),s=t.ye(),r=t.Hi(),n=t.Xi(),o=t.pe();if(e===ro||r===no||i===ro||n===no||s===ro||o===no)return oo;const a=t.oc(),h=t.ac(),l=t.ov(),c=Math.abs(t.Ws.Vv(a)*t.oi.x.q()),u=Math.abs(t.Ws.Vv(h)*t.oi.y.q()),d=Math.abs(t.Ws.Vv(l)*t.oi.z.q()),f=e-c,g=r+c,p=i-u,y=n+u,m=s-d,v=o+d;let x;return[{x:f,y:p,z:m},{x:g,y:p,z:m},{x:f,y:y,z:m},{x:g,y:y,z:m},{x:f,y:p,z:v},{x:g,y:p,z:v},{x:f,y:y,z:v},{x:g,y:y,z:v}].map(e=>t.Ws.Gv(e)).forEach(t=>{if(!t)return;const e={min:t,max:t};x=x?Eo(x,{min:t,max:t}):e}),x||oo}Gv(t){if(this.TY(),this.FY(),!this.TU)return;const e=this.hD.lE(),i=ws(e[0],e[1],e[2]),s=this.hD.aE(),r=ws(s[0],s[1],s[2]),n=so.divideVec(so.subtractVec(t,i),r),o=this.TU,a=cx.multiply(o,[n.x,n.y,n.z,1]),h=As(a[0]/a[3],a[1]/a[3]),l=this.gi._t();return{x:.5*(1+h.x)*l.x,y:.5*(1+h.y)*l.y}}jm(t){const e=this.hD.lE(),i=this.hD.aE(),s=so.divideVec(so.subtractVec(t,{x:e[0],y:e[1],z:e[2]}),{x:i[0],y:i[1],z:i[2]});return l(l({},t),{},{x:s.x,y:s.y,z:s.z})}Hm(t){const e=this.hD.lE(),i=this.hD.aE(),s=so.addVec(so.multiplyVec(t,{x:i[0],y:i[1],z:i[2]}),{x:e[0],y:e[1],z:e[2]});return l(l({},t),{},{x:s.x,y:s.y,z:s.z})}Vv(t){return t/1e3}GU(){return.001}Er(){const t=this.FU,e=this.IU,i=this.oi.x.o||this.oi.y.o||this.oi.z.o;if(!e)throw Rn(0,()=>_n());const{viewProjectionMatrix:s}=this.TY();this.FY();const r=[t.x,t.y,t.z],n=[e.x,e.y,e.z];return this.Di.forEach(t=>{t.TU=s,t.FU=r,t.IU=n,t.Er(i)}),this}$m(t){this.CY!==t&&(this.CY=t,this._Y=!0)}Um(){return this.CY}TY(){if(!this._Y&&this.TU)return{viewProjectionMatrix:this.TU};const t=this.vm(),e=t.width/t.height;if("perspective"===this.CY)this.IY=cx.projectionPerspective(45,e,.1,100);else{let t,i;const s=.5*so.length(this.FU);e>1?(t=s,i=t/e):(i=s,t=i*e),this.IY=cx.projectionOrthographic(-t,t,-i,i,-400,100)}const i=this.FU;this.xY[12]=i.x,this.xY[13]=i.y,this.xY[14]=i.z;const s=this.bY,r=ws(0,1,0),n=so.multiply(s,-1),o=so.normalize(so.cross(r,n)),a=so.normalize(so.cross(n,o));this.xY[0]=o.x,this.xY[1]=o.y,this.xY[2]=o.z,this.xY[4]=a.x,this.xY[5]=a.y,this.xY[6]=a.z,this.xY[8]=n.x,this.xY[9]=n.y,this.xY[10]=n.z,this.PY=cx.inverse(this.xY);const{cellIndex:h,cellSpan:l,cellsAmount:c}=this.oi,u=l.x/c.x,d=l.y/c.y,f=(h.x+l.x/2)/c.x,g=(h.y+l.y/2)/c.y,p=cx.multiply(cx.translation(Ia(-1,1,f),Ia(-1,1,g),0),cx.scaling(u,d,1));return this.TU=cx.multiply(p,cx.multiply(this.IY,this.PY)),this.LY=cx.inverse(this.TU),this._Y=!1,{viewProjectionMatrix:this.TU}}FY(){this.hD.QO(this.oi.x),this.hD.KO(this.oi.y),this.hD.qO(this.oi.z)}pu(t,e,i){var s;const r=this.gl.GR(),n=this.vm(),o={x:n.x*r*e,y:n.y*r*e,width:n.width*r*e,height:n.height*r*e};this.gl.tE(o.x,o.y,o.width,o.height);let a=((null===(s=i[i.length-1])||void 0===s?void 0:s.idLast)||0)+1;const h=Array.from(this.cU.values());for(let l=0;l<h.length;l+=1){const e=h[l];if(e.getVisible())if(this.gl.WR(e.vU),this.gl.hv(e.Kg),1!==t)e.pu(t,0);else if(1===t&&e.getPointerEvents()){const{idCount:s}=e.pu(t,a);void 0!==s&&(i.push({entity:e,layer:this,entityIndex:l,idFirst:a,idCount:s,idLast:a+s-1}),a+=s)}}return this.gl.WR("disabled"),this.gl.hv(!1),this.gl.XR(!1),this}setCameraLocation(t){return this.FU.x===t.x&&this.FU.y===t.y&&this.FU.z===t.z||(this._Y=!0),super.setCameraLocation(t),this}setCameraDirection(t){return this.bY.x===t.x&&this.bY.y===t.y&&this.bY.z===t.z||(this._Y=!0),super.setCameraDirection(t),this}N(){super.N(),this.gi.V("resize",this.kY),this.oi.removeEventListener("cellresize",this.kY)}hy(t){return this.O$(new qb(this,this.z$,[],t))}Dv(t){return this.O$(new jb(this,this.z$,t))}uv(){return this.O$(new Ob(this,this.z$,[]))}bp(){return this.O$(new Jb(this,this.z$,[]))}gA(){return this.O$(new Xb(this,this.z$,[]))}Qy(t){return this.O$(new Kb(this,this.z$,[],t))}ap(t){return this.O$(new $b(this,this.z$,[],t))}}class iS{constructor(t,e){this.BY=[],this.DY=[],this.RY=(t,e)=>{const i=this.BY.find(e=>e.uu===t);i&&("pointerenter"!==e.type&&"pointermove"!==e.type||this.gi.Ea(i,!0,e.timeStamp),"pointerleave"===e.type&&this.gi.Ea(i,!1,e.timeStamp))},this.gi=t,this.gu="init"in e?e.init({engine:t.Cg,handleEvent:this.RY}):e,this.EY=0,this.OY=String(Math.round(1e6*Math.random()))}bn(t,e,i,s){const r=new xc(t,e,i,s,"".concat(this.OY,"-").concat(this.EY));return this.BY.push(r),r.addEventListener("dispose",()=>{var t;const e=this.BY.indexOf(r);e>=0&&this.BY.splice(e,1),(null===(t=this.gi.Oa)||void 0===t?void 0:t.entity)===r&&this.gi.Ea(void 0,!1,Ur.performance.now())}),this.EY+=1,r}Wo(){const t=this.BY.filter(t=>t.getVisible()&&t.qr().length>0&&ha(t.Xe)).map(t=>t.du()),e=this.DY;this.gu.update({textList:t,engine:this.gi.Cg,obstructingOverlays:e}),this.DY.length=0}N(){const t=this.BY.filter(t=>t.getVisible()&&t.qr().length>0&&ha(t.Xe)).map(t=>t.du());this.gu.dispose&&this.gu.dispose({textList:t,engine:this.gi.Cg})}xA(t){this.DY.push(t)}}class sS extends tc{constructor(t,e,i){var s;let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bx;if(super(t,e,i),s=this,this.U=Es(1,1),this.zY=!1,this.VY=0,this.NY=!0,this.GY=0,this.NU=8388608,this.$D=[null,null],this.$Y=null,this.UY=null,this.YY=0,this.Sg=!1,this.jY=0,this.Bs=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return s.ci||s.aa||Hv(s.PB.gl)||(t&&(s.zY=!0),s.sa=!0,s.HY||s.Qo.sR(t)),s},this.HY=!1,this.oR=t=>{if(this.ci||this.aa)return;const e=t-this.VY;if(e>=this.Ra||-1===this.Ra){this.HY=!0,this.VY=t,this.zY=!1;const i=e>50?1e3/60:e;this.ea&&this.ea(i),this.Ms.Er(e),this.Sa(),this.ba(),this.sa=!1,-1!==this.Ra&&this.zY&&(this.Qo.sR(this.zY),this.sa=!0),this.ha&&this.ha(),this.HY=!1,this.L.D("renderframe",{}),this.sa&&this.Bs(this.zY)}else this.sa=!0,this.Qo.sR()},this.WY=new Map,this.nz=()=>this.PB,this.ZY=()=>{var t,e;const i=this._a(),s=this.NY,r=Ur.performance.now(),n=null===(t=this.JY)||void 0===t?void 0:t.QY.reduce((t,e)=>t?e.KY&&t.KY&&e.KY>t.KY?e:t:e,void 0),o=null==n?void 0:n.KY,a=null===(e=this.da)||void 0===e?void 0:e.timeStamp,h=this.qY;return s?(this.Bs(!0),!1):void 0===n||(void 0===n||!n.tj)&&(void 0!==o&&void 0===i?r-o>=1e3:!(void 0!==o&&void 0!==a&&r-a>=2e3&&(void 0===h||r-h>=2e3))||r-o>=1e3)},this.ij=()=>{var t,e;this.sj=void 0;const i=null===(e=null===(t=this.JY)||void 0===t?void 0:t.ej)||void 0===e?void 0:e.hj;void 0===i||i>=this.GY||this.rj()},this.ba=()=>{if(this.ci||this.aa)return this;const t=this.PB.gl,e=Ur.performance.now();this.PB.QR(t.FRAMEBUFFER,this.Qo.JD?this.$D[0]:null);const i=this.U,s=i.x>0&&i.y>0,r=this.PB.GR();if(this.ya.o&&this.PB.QE(this.ya.C()),this.Qo.XD&&this.OD&&(this.OD.canvas.width=i.x*r,this.OD.canvas.height=i.y*r),t.resize&&s&&t.resize(i.x*r,i.y*r),this.PB.KR(0,0,i.x*r,i.y*r),this.PB.tE(0,0,i.x*r,i.y*r),this.PB.zi(),s)for(const n of this.qo.values())n.pu(0,1,[]);if(this.Au&&this.Au.Wo(),this.Fa.La&&s&&(this.sj&&(Ur.clearTimeout(this.sj),this.sj=void 0),this.ZY()?(this.rj(),this.PB.QR(t.FRAMEBUFFER,this.Qo.JD?this.$D[0]:null)):this.sj=Ur.setTimeout(this.ij,500)),this.Y(),this.Zo(),Array.from(this.ca.values()).forEach(t=>{t.lastEvent.isLcjsArtificialEvent=!0,this.ua("pointermove",t.lastEvent)}),this.Qo.JD){const e=this.PB.gl2.ctx;e.bindFramebuffer(e.READ_FRAMEBUFFER,this.$D[0]),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,this.$D[1]),e.clearBufferfv(e.COLOR,0,[1,1,1,1]),e.blitFramebuffer(0,0,this.U.x*r,this.U.y*r,0,0,this.U.x*r,this.U.y*r,t.COLOR_BUFFER_BIT,t.LINEAR)}else t.bindTexture(t.TEXTURE_2D,this.ED),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,this.U.x*r,this.U.y*r,0),t.bindTexture(t.TEXTURE_2D,null);return this.PB.QR(t.FRAMEBUFFER,null),Hv(this.PB.gl)?this.Qo.DD(0,0,this.U.x*r,this.U.y*r,[this]):this.Qo.sR(),this.NY=!1,this.GY=e,this},this.Sa=()=>{if("use-window"===this.nj.mode){const t=Ur.devicePixelRatio||1;this.PB.cO(t)}const t=this.U;if(0===t.x||0===t.y)return this;this.Ya.X(t);for(const e of this.qo.values())e.Er();return this.Y(),this},this.Qo=t,this.Qo.XD){this.oj=Ur.document.createElement("canvas"),this.oj.style.width="100%",this.oj.style.height="100%",this.oj.style.display="block",this.oj.style.boxSizing="content-box",this.oj.style.position="absolute";const t=this.oj.getContext("2d",{willReadFrequently:!1,alpha:!0,desynchronized:!1});if(!t)throw new wm("No Canvas context available.");this.OD=t,this.Dn.appendChild(this.oj)}this.Qo.cR(this);const n={preserveDrawingBuffer:!0,antialias:e?e.antialias:void 0,alpha:!0,lineAntialias:!e||(!0===e.lineAntiAlias||!1===e.lineAntiAlias?e.lineAntiAlias:!1!==e.antialias)};let o;if(this.Qo.JD&&t.gl2&&(o=new r(this,this.Fa,{type:"webgl2",ctx:t.gl2.ctx,antialias:n.antialias,lineAntialias:n.lineAntialias},this.bi.isDark)),o||this.Qo.JD||(o=new r(this,this.Fa,{type:"webgl1",ctx:t.gl,antialias:n.antialias,lineAntialias:n.lineAntialias},this.bi.isDark)),!o)throw new wm("No WebGL context available");if(this.PB=o,"number"==typeof(null==e?void 0:e.devicePixelRatio))this.nj={mode:"fixed",value:e.devicePixelRatio},this.PB.cO(e.devicePixelRatio);else{const t=Ur.document.head.querySelector('meta[name="viewport"]'),i=!0===e.devicePixelRatio||(null==t?void 0:t.content.includes("width=device-width")),s=Ur.devicePixelRatio||1;this.nj=i?{mode:"use-window"}:{mode:"fixed",value:s},this.PB.cO(s)}const a=e?e.width:void 0,h=e?e.height:void 0;this.Ga=this.aj(a),this.Ua=this.aj(h),this.lj(this.Ga,this.Ua),this.fG=this.SL("engine offscreen",1e6),this.cj=this.SL("engine bg",0);const l="function"==typeof this.bi.lcjsBackgroundFillStyle?Xr({resourcesBaseUrl:this.Fa.me,styleFactory:this.bi.lcjsBackgroundFillStyle,apply:t=>this.setBackgroundFillStyle(t)}):this.bi.lcjsBackgroundFillStyle;this.Ya=this.cj.qe(this.oi).Ke(l).Qe(this.bi.lcjsBackgroundStrokeStyle).setPointerEvents(!1).ih({x:0,y:0});const c=this.SL("engine effects",200001).uU(this.bi.effect);this.ys=c;const u=this.Qo.JD,d=this._t();u&&(this.$D=[o.pE(),o.pE()]);const f=this.PB.gl;u&&(this.$Y=f.createRenderbuffer(),this.UY=f.createRenderbuffer()),this.ED=f.createTexture();const g=d.x*this.PB.GR(),p=d.y*this.PB.GR();if(u){f.bindRenderbuffer(f.RENDERBUFFER,this.$Y);const t=this.PB.gl2.ctx;this.YY=this.Qo.CD&&!1!==e.antialias?t.getParameter(t.MAX_SAMPLES):0,t.renderbufferStorageMultisample(t.RENDERBUFFER,this.YY,t.RGBA8,g,p),f.bindRenderbuffer(f.RENDERBUFFER,this.UY),t.renderbufferStorageMultisample(t.RENDERBUFFER,this.YY,t.DEPTH24_STENCIL8,g,p)}u&&(this.PB.QR(f.FRAMEBUFFER,this.$D[0]),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.RENDERBUFFER,this.$Y),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.RENDERBUFFER,this.UY)),f.bindTexture(f.TEXTURE_2D,this.ED),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,g,p,0,f.RGBA,f.UNSIGNED_BYTE,null),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),u&&(this.PB.QR(f.FRAMEBUFFER,this.$D[1]),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,this.ED,0)),this.PB.QR(f.FRAMEBUFFER,null),this.ga(),this.Zo(),this.Cg=Zl(this),this.yu={bi:this.bi,Ms:this.Ms,oi:this.oi,Bs:t=>this.Bs(t),Qw:()=>this.sa,_a:()=>this._a(),Ps:t=>(this.qY=Ur.performance.now(),this.Ps({x:t.clientX,y:t.clientY})),sF:t=>this.sF(t),Fa:this.Fa,ka:t=>this.ka(t),ys:this.ys,Ja:t=>this.Ja(t),Qa:t=>this.Qa(t),tr:{Th:(t,e,i)=>{const s=this.PB.br(e.family).YB(t,e,i,this.bi.isDark);return this.Au?{x:s.x,y:s.y,isEstimate:!1}:s}},$s:()=>this.ca.size>0,Us:(t,e)=>void 0!==Array.from(this.ca.values()).find(i=>!(void 0!==t&&i.entity!==t||void 0!==e&&e!==i.collectionMember))},e.textRenderer&&(this.Au=new iS(this,e.textRenderer));const y=()=>{this.N()};Ur.addEventListener("unload",y),this.ra.push(()=>{Ur.removeEventListener("unload",y)})}get uj(){return this.qo}Ko(t,e){let i=this.WY.get(t);if(!i){const e=this.PB.yO(t),s=new Set,r=t=>{s.add(t)},n=i=>{s.delete(i)&&0===s.size&&(e.unbindResources(),this.WY.delete(t))},o=[];i={imageTexture:e,instances:s,handleNewInstance:r,handleInstanceDisposed:n,sharedEngineReference:{eF:()=>e.FR,hF:t=>{e.FR?t():o.push(t)}}},this.WY.set(t,i),e.Hu(this),e.ER(()=>{o.forEach(t=>{t()}),o.length=0})}const s=new ah(t,i.handleNewInstance,i.handleInstanceDisposed,e);return i.handleNewInstance(s),s}sF(t){const e=Array.from(this.WY.values()).find(e=>e.instances.has(t));if(!e)throw Rn(0,()=>new Error("LightningChart JS error, attempted to use Icon that is disposed. Please check that you are not disposing an Icon that is still in use, or attempting to use a previously disposed Icon!"));return e.sharedEngineReference}Ps(t){var e;if(this.Oa&&this.Oa.entity.getPointerEvents()){if(this.Oa.pointed||!(Ur.performance.now()-this.Oa.timestamp>=50))return{entity:this.Oa.entity,collectionMember:void 0,info:void 0};this.Oa=void 0}const i=null===(e=this.JY)||void 0===e?void 0:e.ej;if(!i)return;(!this.Aa||Ur.performance.now()-this.Aa>100)&&this.Zo();const s=this.hh(t.x,t.y),r=Math.round(s.x*this.PB.GR()),n=Math.round(s.y*this.PB.GR());return[[-1,-1],[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[0,0]].map(t=>this.dj(i,r+t[0]/i.fj,n+t[1]/i.fj)).reduce((t,e)=>{if(void 0===e)return t||void 0;const i=1e6*e.layerIndex+e.entityIndex;return!t||i>t.zIndexForComparison?{zIndexForComparison:i,entity:e.entity,collectionMember:e.collectionMember,info:e.info}:t},void 0)}dj(t,e,i){const s=Math.round(e*t.fj),r=Math.round(i*t.fj);if(s<0||s>=t.U.x||r<0||r>=t.U.y)return;const n=4*(s+r*t.U.x),o=t.Aj[n+0],a=t.Aj[n+1],h=t.Aj[n+2],l=t.Aj[n+3];if(void 0===o||void 0===a||void 0===h||void 0===l)return;if(0===o&&0===a&&0===h&&0===l)return;const c=16777216*o+65536*a+256*h+l,u=t.gj.find(t=>c>=t.idFirst&&c<=t.idLast);if(!u)return;const{collectionMember:d,info:f}=u.entity.Su(c,u.idFirst,u.idCount,e,i);return{entity:u.entity,collectionMember:d,entityIndex:u.entityIndex,layerIndex:u.layer.Ma(),info:f}}Ho(t,e,i){const s=this.PB.gl;let r,n=!this.Qo.JD;if(this.Au){const t=this.Au;this.Au=void 0;const e=[],i=[];this.qo.forEach(t=>{t.Di.forEach(t=>{t.getVisible()&&t instanceof xc&&i.push(t)})}),i.forEach(t=>{const i=t.Ws.bn(t.oi);e.push(i),i.ih(t.Dl()).Jr(t.qr()).Mr(t.br()).Ke(t.pr()).Yl(t.Gl()).mn(t.jl()).Sn(t.Hl()).wr(t._r()).Zr(t.El()).il(t.sl()).setPointerEvents(!1)}),r={ctr:t,temporaryWebglTextObjects:e},n=!0}n&&(this.Sa(),this.ba()),this.Qo.JD?(this.PB.QR(s.FRAMEBUFFER,this.$D[1]),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,this.ED,0)):this.PB.QR(s.FRAMEBUFFER,null);const o=this.RD(),a=o.x,h=o.y,l=new Uint8Array(a*h*4);s.readPixels(0,0,a,h,s.RGBA,s.UNSIGNED_BYTE,l),r&&(r.temporaryWebglTextObjects.forEach(t=>t.dispose()),this.Au=r.ctr,this.ba());const c=new ImageData(new Uint8ClampedArray(l),a,h),u=document.createElement("canvas"),d=u.getContext("2d");if(!d)throw new Error("Failed to create 2D context for saving image.");u.width=a,u.height=h,d.putImageData(c,0,0),d.translate(0,h),d.scale(1,-1),d.drawImage(u,0,0),this.Qo.JD&&(this.PB.QR(s.FRAMEBUFFER,this.$D[0]),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,this.$Y),this.PB.QR(s.FRAMEBUFFER,this.$D[1]),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,this.ED,0)),this.PB.QR(s.FRAMEBUFFER,null);const f=u.toDataURL(t,e);return i?f:(t=>{const e=t.split(",")[0].split(":")[1].split(";")[0],i=Ur.atob(t.split(",")[1]),s=new Uint8Array(i.length);for(let r=0;r<i.length;r+=1)s[r]=i.charCodeAt(r);return new Ur.Blob([s.buffer],{type:e})})(f)}Wo(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.ga(As(Math.round(t),Math.round(e))),this.ma();const s=this.PB.gl.drawingBufferWidth,r=this.PB.gl.drawingBufferHeight,n=new Uint8Array(s*r*4);if(this.PB.gl.readPixels(0,0,s,r,this.PB.gl.RGBA,this.PB.gl.UNSIGNED_BYTE,n),!i){const t=r/2|0,e=4*s,i=new Uint8Array(4*s);for(let s=0;s<t;s+=1){const t=s*e,o=(r-s-1)*e;i.set(n.subarray(t,t+e)),n.copyWithin(t,o,o+e),n.set(i,o)}}return this.ia={x:0,y:e},n}XL(t){return void 0!==this.Ga?this.Ga[0]=t:this.Ga=[t,void 0],this.Dn.style.minWidth="".concat(this.Ga[0],"px"),this.ga(),this}JL(t){return void 0!==this.Ga?this.Ga[1]=t:this.Ga=[void 0,t],this.Dn.style.maxWidth="".concat(this.Ga[1],"px"),this.ga(),this}KL(t){return void 0!==this.Ua?this.Ua[0]=t:this.Ua=[t,void 0],this.Dn.style.minHeight="".concat(this.Ua[0],"px"),this.ga(),this}tB(t){return void 0!==this.Ua?this.Ua[1]=t:this.Ua=[void 0,t],this.Dn.style.maxHeight="".concat(this.Ua[1],"px"),this.ga(),this}lj(t,e){return this.Ga=t,this.Ua=e,this.Dn.style.minWidth="".concat(this.Ga[0],"px"),this.Dn.style.maxWidth="".concat(this.Ga[1],"px"),this.Dn.style.minHeight="".concat(this.Ua[0],"px"),this.Dn.style.maxHeight="".concat(this.Ua[1],"px"),this.ga(),this}BD(t){return this.Sg!==t&&(this.L.D("inviewchanged",{isInView:t}),this.Sg=t),this}LD(){return this.Sg}uR(t){this.jY=t}lR(){return this.jY}SL(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.Za();const i=this.Xa(e);if(i){if(Rn(0,()=>{}),!(i instanceof Pb))throw new Error("Unexpected Engine Layer error");return i}return this.xa(new Pb(this,e,t))}ML(t,e,i){const s=this.Xa(e);if(s){if(Rn(0,()=>{}),!(s instanceof eS))throw new Error("Unexpected Engine Layer error");return s}return this.xa(new eS(this,e,t,i))}_t(){return this.U}RD(){const t=this.PB.GR();return{x:Math.round(this.U.x*t),y:Math.round(this.U.y*t)}}aj(t){return t instanceof Array||(t=[t,t]),t}vj(){return this.Qo.zD}yj(){return Hv(this.PB.gl)}rj(){var t;const e=this.PB.gl,i=Ur.performance.now(),s=this.Fa.Pa,r={x:Math.ceil(this.U.x*this.PB.GR()*s),y:Math.ceil(this.U.y*this.PB.GR()*s)};this.JY||(this.JY={fj:s,pj:r,QY:[],ej:void 0});let n=this.JY.QY.find(t=>!t.tj),o=!1;n||(o=!0,n={tj:!1,U:r,IO:e.createTexture(),mj:this.PB.pE(),UY:this.PB.mE(),Sj:new Uint8Array,KY:void 0},this.JY.QY.push(n));const a=n;(o||a.U.x!==r.x||a.U.y!==r.y)&&(e.bindTexture(e.TEXTURE_2D,a.IO),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.x,r.y,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.PB.QR(e.FRAMEBUFFER,a.mj),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,a.IO,0),e.bindRenderbuffer(e.RENDERBUFFER,a.UY),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,r.x,r.y),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,a.UY),a.Sj=new Uint8Array(r.x*r.y*4),a.U=r),a.tj=!0,a.KY=i,this.PB.QR(e.FRAMEBUFFER,a.mj),e.clearDepth(1),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.disable(e.BLEND),e.resize&&e.resize(r.x,r.y),this.PB.KR(0,0,r.x,r.y);const h=[];for(const u of this.qo.values())u.pu(1,s,h);this.PB.QR(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.enable(e.BLEND);const l=null===(t=this.PB.gl2)||void 0===t?void 0:t.ctx,c=()=>{if(this.JY){const t=this.JY.ej;if(t&&t.hj>i)return;this.JY.ej={hj:i,fj:s,U:r,Aj:a.Sj,gj:h}}};l?this.PB.CO(l,a.mj,0,0,r.x,r.y,e.RGBA,e.UNSIGNED_BYTE,a.Sj).then(()=>{this.ci||(a.tj=!1,c())}).catch(t=>{this.ci||(a.tj=!1,Ur.console.warn("LightningChart JS mouse picking failed unexpectedly. This could mean that user interactions on charts are compromised.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact"))}):(this.PB.TO(a.mj,0,0,r.x,r.y,e.RGBA,e.UNSIGNED_BYTE,a.Sj),a.tj=!1,c())}ga(t){const e=this.PB.GR();if("use-window"===this.nj.mode){const t=Ur.devicePixelRatio||1;this.PB.cO(t)}const i=this.U.x,s=this.U.y,r=t||{x:this.Dn.offsetWidth,y:this.Dn.offsetHeight},n=this.PB.GR();if(0!==r.x&&0!==r.y&&(r.x!==i||r.y!==s||e!==n)){this.U=r,this.oi.x.H(0,r.x).X(r.x),this.oi.y.H(0,r.y).X(r.y);const t=r.x*n,e=r.y*n,i=this.PB.gl,s=this.Qo.JD;if(this.ED&&(i.bindTexture(i.TEXTURE_2D,this.ED),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t,e,0,i.RGBA,i.UNSIGNED_BYTE,null)),s){const s=this.PB.gl2.ctx;this.$Y&&(i.bindRenderbuffer(i.RENDERBUFFER,this.$Y),s.renderbufferStorageMultisample(s.RENDERBUFFER,this.YY,s.RGBA8,t,e)),this.UY&&(i.bindRenderbuffer(i.RENDERBUFFER,this.UY),s.renderbufferStorageMultisample(s.RENDERBUFFER,this.YY,s.DEPTH24_STENCIL8,t,e))}i.bindRenderbuffer(i.RENDERBUFFER,null),this.L.D("resize",{engineWidth:this.U.x,engineHeight:this.U.y,width:this.U.x,height:this.U.y})}}N(){var t;this.ci||(super.N(),this.Au&&this.Au.N(),this.sj&&(Ur.clearTimeout(this.sj),this.sj=void 0),Array.from(this.PB.yD.entries()).forEach(t=>{let[e,i]=t;i.mu(!1),this.PB.yD.delete(e)}),Array.from(this.PB.ME.values()).forEach(t=>{t.unbindResources()}),this.PB.ME.clear(),this.PB.xE.wR(),this.PB.nO.N(),this.PB.gE(this.PB.oO),this.PB.gE(this.PB.aO),this.PB.sO.forEach((t,e)=>{this.PB.gl.deleteBuffer(e)}),this.PB.sO.clear(),this.PB.xO&&(this.PB.gE(this.PB.xO.buffer),this.PB.xO=void 0),this.PB.bE(this.$D[0]),this.PB.bE(this.$D[1]),this.PB.SE(this.$Y),this.PB.DB(this.ED),this.PB.SE(this.UY),this.JY&&(this.JY.QY.forEach(t=>{this.PB.SE(t.UY),this.PB.bE(t.mj),this.PB.DB(t.IO)}),this.JY=void 0),this.PB.qE.forEach(t=>this.PB.gE(t)),this.WY.clear(),this.Qo.dR(this),this.oj&&(null===(t=this.oj.parentElement)||void 0===t||t.removeChild(this.oj),this.oj=void 0),this.OD&&(this.OD=void 0),this.PB.gl=void 0)}}var rS="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},nS={exports:{}};!function(t,e){function i(t,e){if(!t)throw new Error(e||"Assertion failed")}function s(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function r(t,e,i){if(r.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this.RR(t||0,e||10,i||"be"))}var n;"object"==typeof nS?nS.exports=r:e.BN=r,r.BN=r,r.wordSize=26;try{n=(void 0).Buffer}catch(t){}function o(t,e,s){for(var r=0,n=Math.min(t.length,s),o=0,a=e;a<n;a++){var h,l=t.charCodeAt(a)-48;r<<=4,r|=h=l>=49&&l<=54?l-49+10:l>=17&&l<=22?l-17+10:l,o|=h}return i(!(240&o),"Invalid character in "+t),r}function a(t,e,s,r){for(var n=0,o=0,a=Math.min(t.length,s),h=e;h<a;h++){var l=t.charCodeAt(h)-48;n*=r,o=l>=49?l-49+10:l>=17?l-17+10:l,i(l>=0&&o<r,"Invalid character"),n+=o}return n}function h(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(r.isBN=function(t){return t instanceof r||null!==t&&"object"==typeof t&&t.constructor.wordSize===r.wordSize&&Array.isArray(t.words)},r.max=function(t,e){return t.cmp(e)>0?t:e},r.min=function(t,e){return t.cmp(e)<0?t:e},r.prototype.RR=function(t,e,s){if("number"==typeof t)return this.bj(t,e,s);if("object"==typeof t)return this.xj(t,e,s);"hex"===e&&(e=16),i(e===(0|e)&&e>=2&&e<=36);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&r++,16===e?this.Mj(t,r):this.wj(t,e,r),"-"===t[0]&&(this.negative=1),this._j(),"le"===s&&this.xj(this.toArray(),e,s)},r.prototype.bj=function(t,e,s){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===s&&this.xj(this.toArray(),e,s)},r.prototype.xj=function(t,e,s){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,o,a=0;if("be"===s)for(r=t.length-1,n=0;r>=0;r-=3)o=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[n]|=o<<a&67108863,this.words[n+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,n++);else if("le"===s)for(r=0,n=0;r<t.length;r+=3)o=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[n]|=o<<a&67108863,this.words[n+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,n++);return this._j()},r.prototype.Mj=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,r,n=0;for(i=t.length-6,s=0;i>=e;i-=6)r=o(t,i,i+6),this.words[s]|=r<<n&67108863,this.words[s+1]|=r>>>26-n&4194303,(n+=24)>=26&&(n-=26,s++);i+6!==e&&(r=o(t,e,i+6),this.words[s]|=r<<n&67108863,this.words[s+1]|=r>>>26-n&4194303),this._j()},r.prototype.wj=function(t,e,i){this.words=[0],this.length=1;for(var s=0,r=1;r<=67108863;r*=e)s++;s--,r=r/e|0;for(var n=t.length-i,o=n%s,h=Math.min(n,n-o)+i,l=0,c=i;c<h;c+=s)l=a(t,c,c+s,e),this.imuln(r),this.words[0]+l<67108864?this.words[0]+=l:this.kj(l);if(0!==o){var u=1;for(l=a(t,c,t.length,e),c=0;c<o;c++)u*=e;this.imuln(u),this.words[0]+l<67108864?this.words[0]+=l:this.kj(l)}},r.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},r.prototype.Cj=function(t){h(t,this)},r.prototype.clone=function(){var t=new r(null);return this.copy(t),t},r.prototype.Tj=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},r.prototype._j=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this.Fj()},r.prototype.Fj=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{r.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(t){r.prototype.inspect=l}else r.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,i){i.negative=e.negative^t.negative;var s=t.length+e.length|0;i.length=s,s=s-1|0;var r=0|t.words[0],n=0|e.words[0],o=r*n,a=67108863&o,h=o/67108864|0;i.words[0]=a;for(var l=1;l<s;l++){for(var c=h>>>26,u=67108863&h,d=Math.min(l,e.length-1),f=Math.max(0,l-t.length+1);f<=d;f++){var g=l-f|0;c+=(o=(r=0|t.words[g])*(n=0|e.words[f])+u)/67108864|0,u=67108863&o}i.words[l]=0|u,h=0|c}return 0!==h?i.words[l]=0|h:i.length--,i._j()}r.prototype.toString=function(t,e){var s;if(e=0|e||1,16===(t=t||10)||"hex"===t){s="";for(var r=0,n=0,o=0;o<this.length;o++){var a=this.words[o],h=(16777215&(a<<r|n)).toString(16);s=0!=(n=a>>>24-r&16777215)||o!==this.length-1?c[6-h.length]+h+s:h+s,(r+=2)>=26&&(r-=26,o--)}for(0!==n&&(s=n.toString(16)+s);s.length%e!=0;)s="0"+s;return 0!==this.negative&&(s="-"+s),s}if(t===(0|t)&&t>=2&&t<=36){var l=u[t],f=d[t];s="";var g=this.clone();for(g.negative=0;!g.isZero();){var p=g.modrn(f).toString(t);s=(g=g.idivn(f)).isZero()?p+s:c[l-p.length]+p+s}for(this.isZero()&&(s="0"+s);s.length%e!=0;)s="0"+s;return 0!==this.negative&&(s="-"+s),s}i(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},r.prototype.toJSON=function(){return this.toString(16,2)},n&&(r.prototype.toBuffer=function(t,e){return this.toArrayLike(n,t,e)}),r.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},r.prototype.toArrayLike=function(t,e,s){this._j();var r=this.byteLength(),n=s||Math.max(1,r);i(r<=n,"byte array longer than desired length"),i(n>0,"Requested array length <= 0");var o=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,n);return this["_toArrayLike"+("le"===e?"LE":"BE")](o,r),o},r.prototype.Ij=function(t,e){for(var i=0,s=0,r=0,n=0;r<this.length;r++){var o=this.words[r]<<n|s;t[i++]=255&o,i<t.length&&(t[i++]=o>>8&255),i<t.length&&(t[i++]=o>>16&255),6===n?(i<t.length&&(t[i++]=o>>24&255),s=0,n=0):(s=o>>>24,n+=2)}if(i<t.length)for(t[i++]=s;i<t.length;)t[i++]=0},r.prototype.Pj=function(t,e){for(var i=t.length-1,s=0,r=0,n=0;r<this.length;r++){var o=this.words[r]<<n|s;t[i--]=255&o,i>=0&&(t[i--]=o>>8&255),i>=0&&(t[i--]=o>>16&255),6===n?(i>=0&&(t[i--]=o>>24&255),s=0,n=0):(s=o>>>24,n+=2)}if(i>=0)for(t[i--]=s;i>=0;)t[i--]=0},Math.clz32?r.prototype.Lj=function(t){return 32-Math.clz32(t)}:r.prototype.Lj=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},r.prototype.Bj=function(t){if(0===t)return 26;var e=t,i=0;return 8191&e||(i+=13,e>>>=13),127&e||(i+=7,e>>>=7),15&e||(i+=4,e>>>=4),3&e||(i+=2,e>>>=2),1&e||i++,i},r.prototype.bitLength=function(){var t=this.words[this.length-1],e=this.Lj(t);return 26*(this.length-1)+e},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this.Bj(this.words[e]);if(t+=i,26!==i)break}return t},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},r.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._j()},r.prototype.ior=function(t){return i(!(this.negative|t.negative)),this.iuor(t)},r.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},r.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},r.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this._j()},r.prototype.iand=function(t){return i(!(this.negative|t.negative)),this.iuand(t)},r.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},r.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},r.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var s=0;s<i.length;s++)this.words[s]=e.words[s]^i.words[s];if(this!==e)for(;s<e.length;s++)this.words[s]=e.words[s];return this.length=e.length,this._j()},r.prototype.ixor=function(t){return i(!(this.negative|t.negative)),this.iuxor(t)},r.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},r.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},r.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),s=t%26;this.Tj(e),s>0&&e--;for(var r=0;r<e;r++)this.words[r]=67108863&~this.words[r];return s>0&&(this.words[r]=~this.words[r]&67108863>>26-s),this._j()},r.prototype.notn=function(t){return this.clone().inotn(t)},r.prototype.setn=function(t,e){i("number"==typeof t&&t>=0);var s=t/26|0,r=t%26;return this.Tj(s+1),this.words[s]=e?this.words[s]|1<<r:this.words[s]&~(1<<r),this._j()},r.prototype.iadd=function(t){var e,i,s;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this.Fj();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e.Fj();this.length>t.length?(i=this,s=t):(i=t,s=this);for(var r=0,n=0;n<s.length;n++)e=(0|i.words[n])+(0|s.words[n])+r,this.words[n]=67108863&e,r=e>>>26;for(;0!==r&&n<i.length;n++)e=(0|i.words[n])+r,this.words[n]=67108863&e,r=e>>>26;if(this.length=i.length,0!==r)this.words[this.length]=r,this.length++;else if(i!==this)for(;n<i.length;n++)this.words[n]=i.words[n];return this},r.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},r.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e.Fj()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this.Fj();var i,s,r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(i=this,s=t):(i=t,s=this);for(var n=0,o=0;o<s.length;o++)n=(e=(0|i.words[o])-(0|s.words[o])+n)>>26,this.words[o]=67108863&e;for(;0!==n&&o<i.length;o++)n=(e=(0|i.words[o])+n)>>26,this.words[o]=67108863&e;if(0===n&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this._j()},r.prototype.sub=function(t){return this.clone().isub(t)};var g=function(t,e,i){var s,r,n,o=t.words,a=e.words,h=i.words,l=0,c=0|o[0],u=8191&c,d=c>>>13,f=0|o[1],g=8191&f,p=f>>>13,y=0|o[2],m=8191&y,v=y>>>13,x=0|o[3],b=8191&x,S=x>>>13,A=0|o[4],E=8191&A,k=A>>>13,w=0|o[5],M=8191&w,C=w>>>13,T=0|o[6],F=8191&T,P=T>>>13,B=0|o[7],L=8191&B,D=B>>>13,z=0|o[8],I=8191&z,R=z>>>13,_=0|o[9],V=8191&_,N=_>>>13,O=0|a[0],Y=8191&O,G=O>>>13,X=0|a[1],U=8191&X,H=X>>>13,j=0|a[2],W=8191&j,Z=j>>>13,J=0|a[3],q=8191&J,Q=J>>>13,K=0|a[4],$=8191&K,tt=K>>>13,et=0|a[5],it=8191&et,st=et>>>13,rt=0|a[6],nt=8191&rt,ot=rt>>>13,at=0|a[7],ht=8191&at,lt=at>>>13,ct=0|a[8],ut=8191&ct,dt=ct>>>13,ft=0|a[9],gt=8191&ft,pt=ft>>>13;i.negative=t.negative^e.negative,i.length=19;var yt=(l+(s=Math.imul(u,Y))|0)+((8191&(r=(r=Math.imul(u,G))+Math.imul(d,Y)|0))<<13)|0;l=((n=Math.imul(d,G))+(r>>>13)|0)+(yt>>>26)|0,yt&=67108863,s=Math.imul(g,Y),r=(r=Math.imul(g,G))+Math.imul(p,Y)|0,n=Math.imul(p,G);var mt=(l+(s=s+Math.imul(u,U)|0)|0)+((8191&(r=(r=r+Math.imul(u,H)|0)+Math.imul(d,U)|0))<<13)|0;l=((n=n+Math.imul(d,H)|0)+(r>>>13)|0)+(mt>>>26)|0,mt&=67108863,s=Math.imul(m,Y),r=(r=Math.imul(m,G))+Math.imul(v,Y)|0,n=Math.imul(v,G),s=s+Math.imul(g,U)|0,r=(r=r+Math.imul(g,H)|0)+Math.imul(p,U)|0,n=n+Math.imul(p,H)|0;var vt=(l+(s=s+Math.imul(u,W)|0)|0)+((8191&(r=(r=r+Math.imul(u,Z)|0)+Math.imul(d,W)|0))<<13)|0;l=((n=n+Math.imul(d,Z)|0)+(r>>>13)|0)+(vt>>>26)|0,vt&=67108863,s=Math.imul(b,Y),r=(r=Math.imul(b,G))+Math.imul(S,Y)|0,n=Math.imul(S,G),s=s+Math.imul(m,U)|0,r=(r=r+Math.imul(m,H)|0)+Math.imul(v,U)|0,n=n+Math.imul(v,H)|0,s=s+Math.imul(g,W)|0,r=(r=r+Math.imul(g,Z)|0)+Math.imul(p,W)|0,n=n+Math.imul(p,Z)|0;var xt=(l+(s=s+Math.imul(u,q)|0)|0)+((8191&(r=(r=r+Math.imul(u,Q)|0)+Math.imul(d,q)|0))<<13)|0;l=((n=n+Math.imul(d,Q)|0)+(r>>>13)|0)+(xt>>>26)|0,xt&=67108863,s=Math.imul(E,Y),r=(r=Math.imul(E,G))+Math.imul(k,Y)|0,n=Math.imul(k,G),s=s+Math.imul(b,U)|0,r=(r=r+Math.imul(b,H)|0)+Math.imul(S,U)|0,n=n+Math.imul(S,H)|0,s=s+Math.imul(m,W)|0,r=(r=r+Math.imul(m,Z)|0)+Math.imul(v,W)|0,n=n+Math.imul(v,Z)|0,s=s+Math.imul(g,q)|0,r=(r=r+Math.imul(g,Q)|0)+Math.imul(p,q)|0,n=n+Math.imul(p,Q)|0;var bt=(l+(s=s+Math.imul(u,$)|0)|0)+((8191&(r=(r=r+Math.imul(u,tt)|0)+Math.imul(d,$)|0))<<13)|0;l=((n=n+Math.imul(d,tt)|0)+(r>>>13)|0)+(bt>>>26)|0,bt&=67108863,s=Math.imul(M,Y),r=(r=Math.imul(M,G))+Math.imul(C,Y)|0,n=Math.imul(C,G),s=s+Math.imul(E,U)|0,r=(r=r+Math.imul(E,H)|0)+Math.imul(k,U)|0,n=n+Math.imul(k,H)|0,s=s+Math.imul(b,W)|0,r=(r=r+Math.imul(b,Z)|0)+Math.imul(S,W)|0,n=n+Math.imul(S,Z)|0,s=s+Math.imul(m,q)|0,r=(r=r+Math.imul(m,Q)|0)+Math.imul(v,q)|0,n=n+Math.imul(v,Q)|0,s=s+Math.imul(g,$)|0,r=(r=r+Math.imul(g,tt)|0)+Math.imul(p,$)|0,n=n+Math.imul(p,tt)|0;var St=(l+(s=s+Math.imul(u,it)|0)|0)+((8191&(r=(r=r+Math.imul(u,st)|0)+Math.imul(d,it)|0))<<13)|0;l=((n=n+Math.imul(d,st)|0)+(r>>>13)|0)+(St>>>26)|0,St&=67108863,s=Math.imul(F,Y),r=(r=Math.imul(F,G))+Math.imul(P,Y)|0,n=Math.imul(P,G),s=s+Math.imul(M,U)|0,r=(r=r+Math.imul(M,H)|0)+Math.imul(C,U)|0,n=n+Math.imul(C,H)|0,s=s+Math.imul(E,W)|0,r=(r=r+Math.imul(E,Z)|0)+Math.imul(k,W)|0,n=n+Math.imul(k,Z)|0,s=s+Math.imul(b,q)|0,r=(r=r+Math.imul(b,Q)|0)+Math.imul(S,q)|0,n=n+Math.imul(S,Q)|0,s=s+Math.imul(m,$)|0,r=(r=r+Math.imul(m,tt)|0)+Math.imul(v,$)|0,n=n+Math.imul(v,tt)|0,s=s+Math.imul(g,it)|0,r=(r=r+Math.imul(g,st)|0)+Math.imul(p,it)|0,n=n+Math.imul(p,st)|0;var At=(l+(s=s+Math.imul(u,nt)|0)|0)+((8191&(r=(r=r+Math.imul(u,ot)|0)+Math.imul(d,nt)|0))<<13)|0;l=((n=n+Math.imul(d,ot)|0)+(r>>>13)|0)+(At>>>26)|0,At&=67108863,s=Math.imul(L,Y),r=(r=Math.imul(L,G))+Math.imul(D,Y)|0,n=Math.imul(D,G),s=s+Math.imul(F,U)|0,r=(r=r+Math.imul(F,H)|0)+Math.imul(P,U)|0,n=n+Math.imul(P,H)|0,s=s+Math.imul(M,W)|0,r=(r=r+Math.imul(M,Z)|0)+Math.imul(C,W)|0,n=n+Math.imul(C,Z)|0,s=s+Math.imul(E,q)|0,r=(r=r+Math.imul(E,Q)|0)+Math.imul(k,q)|0,n=n+Math.imul(k,Q)|0,s=s+Math.imul(b,$)|0,r=(r=r+Math.imul(b,tt)|0)+Math.imul(S,$)|0,n=n+Math.imul(S,tt)|0,s=s+Math.imul(m,it)|0,r=(r=r+Math.imul(m,st)|0)+Math.imul(v,it)|0,n=n+Math.imul(v,st)|0,s=s+Math.imul(g,nt)|0,r=(r=r+Math.imul(g,ot)|0)+Math.imul(p,nt)|0,n=n+Math.imul(p,ot)|0;var Et=(l+(s=s+Math.imul(u,ht)|0)|0)+((8191&(r=(r=r+Math.imul(u,lt)|0)+Math.imul(d,ht)|0))<<13)|0;l=((n=n+Math.imul(d,lt)|0)+(r>>>13)|0)+(Et>>>26)|0,Et&=67108863,s=Math.imul(I,Y),r=(r=Math.imul(I,G))+Math.imul(R,Y)|0,n=Math.imul(R,G),s=s+Math.imul(L,U)|0,r=(r=r+Math.imul(L,H)|0)+Math.imul(D,U)|0,n=n+Math.imul(D,H)|0,s=s+Math.imul(F,W)|0,r=(r=r+Math.imul(F,Z)|0)+Math.imul(P,W)|0,n=n+Math.imul(P,Z)|0,s=s+Math.imul(M,q)|0,r=(r=r+Math.imul(M,Q)|0)+Math.imul(C,q)|0,n=n+Math.imul(C,Q)|0,s=s+Math.imul(E,$)|0,r=(r=r+Math.imul(E,tt)|0)+Math.imul(k,$)|0,n=n+Math.imul(k,tt)|0,s=s+Math.imul(b,it)|0,r=(r=r+Math.imul(b,st)|0)+Math.imul(S,it)|0,n=n+Math.imul(S,st)|0,s=s+Math.imul(m,nt)|0,r=(r=r+Math.imul(m,ot)|0)+Math.imul(v,nt)|0,n=n+Math.imul(v,ot)|0,s=s+Math.imul(g,ht)|0,r=(r=r+Math.imul(g,lt)|0)+Math.imul(p,ht)|0,n=n+Math.imul(p,lt)|0;var kt=(l+(s=s+Math.imul(u,ut)|0)|0)+((8191&(r=(r=r+Math.imul(u,dt)|0)+Math.imul(d,ut)|0))<<13)|0;l=((n=n+Math.imul(d,dt)|0)+(r>>>13)|0)+(kt>>>26)|0,kt&=67108863,s=Math.imul(V,Y),r=(r=Math.imul(V,G))+Math.imul(N,Y)|0,n=Math.imul(N,G),s=s+Math.imul(I,U)|0,r=(r=r+Math.imul(I,H)|0)+Math.imul(R,U)|0,n=n+Math.imul(R,H)|0,s=s+Math.imul(L,W)|0,r=(r=r+Math.imul(L,Z)|0)+Math.imul(D,W)|0,n=n+Math.imul(D,Z)|0,s=s+Math.imul(F,q)|0,r=(r=r+Math.imul(F,Q)|0)+Math.imul(P,q)|0,n=n+Math.imul(P,Q)|0,s=s+Math.imul(M,$)|0,r=(r=r+Math.imul(M,tt)|0)+Math.imul(C,$)|0,n=n+Math.imul(C,tt)|0,s=s+Math.imul(E,it)|0,r=(r=r+Math.imul(E,st)|0)+Math.imul(k,it)|0,n=n+Math.imul(k,st)|0,s=s+Math.imul(b,nt)|0,r=(r=r+Math.imul(b,ot)|0)+Math.imul(S,nt)|0,n=n+Math.imul(S,ot)|0,s=s+Math.imul(m,ht)|0,r=(r=r+Math.imul(m,lt)|0)+Math.imul(v,ht)|0,n=n+Math.imul(v,lt)|0,s=s+Math.imul(g,ut)|0,r=(r=r+Math.imul(g,dt)|0)+Math.imul(p,ut)|0,n=n+Math.imul(p,dt)|0;var wt=(l+(s=s+Math.imul(u,gt)|0)|0)+((8191&(r=(r=r+Math.imul(u,pt)|0)+Math.imul(d,gt)|0))<<13)|0;l=((n=n+Math.imul(d,pt)|0)+(r>>>13)|0)+(wt>>>26)|0,wt&=67108863,s=Math.imul(V,U),r=(r=Math.imul(V,H))+Math.imul(N,U)|0,n=Math.imul(N,H),s=s+Math.imul(I,W)|0,r=(r=r+Math.imul(I,Z)|0)+Math.imul(R,W)|0,n=n+Math.imul(R,Z)|0,s=s+Math.imul(L,q)|0,r=(r=r+Math.imul(L,Q)|0)+Math.imul(D,q)|0,n=n+Math.imul(D,Q)|0,s=s+Math.imul(F,$)|0,r=(r=r+Math.imul(F,tt)|0)+Math.imul(P,$)|0,n=n+Math.imul(P,tt)|0,s=s+Math.imul(M,it)|0,r=(r=r+Math.imul(M,st)|0)+Math.imul(C,it)|0,n=n+Math.imul(C,st)|0,s=s+Math.imul(E,nt)|0,r=(r=r+Math.imul(E,ot)|0)+Math.imul(k,nt)|0,n=n+Math.imul(k,ot)|0,s=s+Math.imul(b,ht)|0,r=(r=r+Math.imul(b,lt)|0)+Math.imul(S,ht)|0,n=n+Math.imul(S,lt)|0,s=s+Math.imul(m,ut)|0,r=(r=r+Math.imul(m,dt)|0)+Math.imul(v,ut)|0,n=n+Math.imul(v,dt)|0;var Mt=(l+(s=s+Math.imul(g,gt)|0)|0)+((8191&(r=(r=r+Math.imul(g,pt)|0)+Math.imul(p,gt)|0))<<13)|0;l=((n=n+Math.imul(p,pt)|0)+(r>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,s=Math.imul(V,W),r=(r=Math.imul(V,Z))+Math.imul(N,W)|0,n=Math.imul(N,Z),s=s+Math.imul(I,q)|0,r=(r=r+Math.imul(I,Q)|0)+Math.imul(R,q)|0,n=n+Math.imul(R,Q)|0,s=s+Math.imul(L,$)|0,r=(r=r+Math.imul(L,tt)|0)+Math.imul(D,$)|0,n=n+Math.imul(D,tt)|0,s=s+Math.imul(F,it)|0,r=(r=r+Math.imul(F,st)|0)+Math.imul(P,it)|0,n=n+Math.imul(P,st)|0,s=s+Math.imul(M,nt)|0,r=(r=r+Math.imul(M,ot)|0)+Math.imul(C,nt)|0,n=n+Math.imul(C,ot)|0,s=s+Math.imul(E,ht)|0,r=(r=r+Math.imul(E,lt)|0)+Math.imul(k,ht)|0,n=n+Math.imul(k,lt)|0,s=s+Math.imul(b,ut)|0,r=(r=r+Math.imul(b,dt)|0)+Math.imul(S,ut)|0,n=n+Math.imul(S,dt)|0;var Ct=(l+(s=s+Math.imul(m,gt)|0)|0)+((8191&(r=(r=r+Math.imul(m,pt)|0)+Math.imul(v,gt)|0))<<13)|0;l=((n=n+Math.imul(v,pt)|0)+(r>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,s=Math.imul(V,q),r=(r=Math.imul(V,Q))+Math.imul(N,q)|0,n=Math.imul(N,Q),s=s+Math.imul(I,$)|0,r=(r=r+Math.imul(I,tt)|0)+Math.imul(R,$)|0,n=n+Math.imul(R,tt)|0,s=s+Math.imul(L,it)|0,r=(r=r+Math.imul(L,st)|0)+Math.imul(D,it)|0,n=n+Math.imul(D,st)|0,s=s+Math.imul(F,nt)|0,r=(r=r+Math.imul(F,ot)|0)+Math.imul(P,nt)|0,n=n+Math.imul(P,ot)|0,s=s+Math.imul(M,ht)|0,r=(r=r+Math.imul(M,lt)|0)+Math.imul(C,ht)|0,n=n+Math.imul(C,lt)|0,s=s+Math.imul(E,ut)|0,r=(r=r+Math.imul(E,dt)|0)+Math.imul(k,ut)|0,n=n+Math.imul(k,dt)|0;var Tt=(l+(s=s+Math.imul(b,gt)|0)|0)+((8191&(r=(r=r+Math.imul(b,pt)|0)+Math.imul(S,gt)|0))<<13)|0;l=((n=n+Math.imul(S,pt)|0)+(r>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,s=Math.imul(V,$),r=(r=Math.imul(V,tt))+Math.imul(N,$)|0,n=Math.imul(N,tt),s=s+Math.imul(I,it)|0,r=(r=r+Math.imul(I,st)|0)+Math.imul(R,it)|0,n=n+Math.imul(R,st)|0,s=s+Math.imul(L,nt)|0,r=(r=r+Math.imul(L,ot)|0)+Math.imul(D,nt)|0,n=n+Math.imul(D,ot)|0,s=s+Math.imul(F,ht)|0,r=(r=r+Math.imul(F,lt)|0)+Math.imul(P,ht)|0,n=n+Math.imul(P,lt)|0,s=s+Math.imul(M,ut)|0,r=(r=r+Math.imul(M,dt)|0)+Math.imul(C,ut)|0,n=n+Math.imul(C,dt)|0;var Ft=(l+(s=s+Math.imul(E,gt)|0)|0)+((8191&(r=(r=r+Math.imul(E,pt)|0)+Math.imul(k,gt)|0))<<13)|0;l=((n=n+Math.imul(k,pt)|0)+(r>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,s=Math.imul(V,it),r=(r=Math.imul(V,st))+Math.imul(N,it)|0,n=Math.imul(N,st),s=s+Math.imul(I,nt)|0,r=(r=r+Math.imul(I,ot)|0)+Math.imul(R,nt)|0,n=n+Math.imul(R,ot)|0,s=s+Math.imul(L,ht)|0,r=(r=r+Math.imul(L,lt)|0)+Math.imul(D,ht)|0,n=n+Math.imul(D,lt)|0,s=s+Math.imul(F,ut)|0,r=(r=r+Math.imul(F,dt)|0)+Math.imul(P,ut)|0,n=n+Math.imul(P,dt)|0;var Pt=(l+(s=s+Math.imul(M,gt)|0)|0)+((8191&(r=(r=r+Math.imul(M,pt)|0)+Math.imul(C,gt)|0))<<13)|0;l=((n=n+Math.imul(C,pt)|0)+(r>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,s=Math.imul(V,nt),r=(r=Math.imul(V,ot))+Math.imul(N,nt)|0,n=Math.imul(N,ot),s=s+Math.imul(I,ht)|0,r=(r=r+Math.imul(I,lt)|0)+Math.imul(R,ht)|0,n=n+Math.imul(R,lt)|0,s=s+Math.imul(L,ut)|0,r=(r=r+Math.imul(L,dt)|0)+Math.imul(D,ut)|0,n=n+Math.imul(D,dt)|0;var Bt=(l+(s=s+Math.imul(F,gt)|0)|0)+((8191&(r=(r=r+Math.imul(F,pt)|0)+Math.imul(P,gt)|0))<<13)|0;l=((n=n+Math.imul(P,pt)|0)+(r>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,s=Math.imul(V,ht),r=(r=Math.imul(V,lt))+Math.imul(N,ht)|0,n=Math.imul(N,lt),s=s+Math.imul(I,ut)|0,r=(r=r+Math.imul(I,dt)|0)+Math.imul(R,ut)|0,n=n+Math.imul(R,dt)|0;var Lt=(l+(s=s+Math.imul(L,gt)|0)|0)+((8191&(r=(r=r+Math.imul(L,pt)|0)+Math.imul(D,gt)|0))<<13)|0;l=((n=n+Math.imul(D,pt)|0)+(r>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,s=Math.imul(V,ut),r=(r=Math.imul(V,dt))+Math.imul(N,ut)|0,n=Math.imul(N,dt);var Dt=(l+(s=s+Math.imul(I,gt)|0)|0)+((8191&(r=(r=r+Math.imul(I,pt)|0)+Math.imul(R,gt)|0))<<13)|0;l=((n=n+Math.imul(R,pt)|0)+(r>>>13)|0)+(Dt>>>26)|0,Dt&=67108863;var zt=(l+(s=Math.imul(V,gt))|0)+((8191&(r=(r=Math.imul(V,pt))+Math.imul(N,gt)|0))<<13)|0;return l=((n=Math.imul(N,pt))+(r>>>13)|0)+(zt>>>26)|0,zt&=67108863,h[0]=yt,h[1]=mt,h[2]=vt,h[3]=xt,h[4]=bt,h[5]=St,h[6]=At,h[7]=Et,h[8]=kt,h[9]=wt,h[10]=Mt,h[11]=Ct,h[12]=Tt,h[13]=Ft,h[14]=Pt,h[15]=Bt,h[16]=Lt,h[17]=Dt,h[18]=zt,0!==l&&(h[19]=l,i.length++),i};function p(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var s=0,r=0,n=0;n<i.length-1;n++){var o=r;r=0;for(var a=67108863&s,h=Math.min(n,e.length-1),l=Math.max(0,n-t.length+1);l<=h;l++){var c=n-l,u=(0|t.words[c])*(0|e.words[l]),d=67108863&u;a=67108863&(d=d+a|0),r+=(o=(o=o+(u/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}i.words[n]=a,s=o,o=r}return 0!==s?i.words[n]=s:i.length--,i._j()}function y(t,e,i){return p(t,e,i)}Math.imul||(g=f),r.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?g(this,t,e):i<63?f(this,t,e):i<1024?p(this,t,e):y(this,t,e)},r.prototype.mul=function(t){var e=new r(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},r.prototype.mulf=function(t){var e=new r(null);return e.words=new Array(this.length+t.length),y(this,t,e)},r.prototype.imul=function(t){return this.clone().mulTo(t,this)},r.prototype.imuln=function(t){var e=t<0;e&&(t=-t),i("number"==typeof t),i(t<67108864);for(var s=0,r=0;r<this.length;r++){var n=(0|this.words[r])*t,o=(67108863&n)+(67108863&s);s>>=26,s+=n/67108864|0,s+=o>>>26,this.words[r]=67108863&o}return 0!==s&&(this.words[r]=s,this.length++),e?this.ineg():this},r.prototype.muln=function(t){return this.clone().imuln(t)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var s=i/26|0,r=i%26;e[i]=t.words[s]>>>r&1}return e}(t);if(0===e.length)return new r(1);for(var i=this,s=0;s<e.length&&0===e[s];s++,i=i.sqr());if(++s<e.length)for(var n=i.sqr();s<e.length;s++,n=n.sqr())0!==e[s]&&(i=i.mul(n));return i},r.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var e,s=t%26,r=(t-s)/26,n=67108863>>>26-s<<26-s;if(0!==s){var o=0;for(e=0;e<this.length;e++){var a=this.words[e]&n,h=(0|this.words[e])-a<<s;this.words[e]=h|o,o=a>>>26-s}o&&(this.words[e]=o,this.length++)}if(0!==r){for(e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(e=0;e<r;e++)this.words[e]=0;this.length+=r}return this._j()},r.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},r.prototype.iushrn=function(t,e,s){var r;i("number"==typeof t&&t>=0),r=e?(e-e%26)/26:0;var n=t%26,o=Math.min((t-n)/26,this.length),a=67108863^67108863>>>n<<n,h=s;if(r-=o,r=Math.max(0,r),h){for(var l=0;l<o;l++)h.words[l]=this.words[l];h.length=o}if(0===o);else if(this.length>o)for(this.length-=o,l=0;l<this.length;l++)this.words[l]=this.words[l+o];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=r);l--){var u=0|this.words[l];this.words[l]=c<<26-n|u>>>n,c=u&a}return h&&0!==c&&(h.words[h.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this._j()},r.prototype.ishrn=function(t,e,s){return i(0===this.negative),this.iushrn(t,e,s)},r.prototype.shln=function(t){return this.clone().ishln(t)},r.prototype.ushln=function(t){return this.clone().iushln(t)},r.prototype.shrn=function(t){return this.clone().ishrn(t)},r.prototype.ushrn=function(t){return this.clone().iushrn(t)},r.prototype.testn=function(t){i("number"==typeof t&&t>=0);var e=t%26,s=(t-e)/26,r=1<<e;return!(this.length<=s||!(this.words[s]&r))},r.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var e=t%26,s=(t-e)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=s)return this;if(0!==e&&s++,this.length=Math.min(s,this.length),0!==e){var r=67108863^67108863>>>e<<e;this.words[this.length-1]&=r}return this._j()},r.prototype.maskn=function(t){return this.clone().imaskn(t)},r.prototype.iaddn=function(t){return i("number"==typeof t),i(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this.kj(t)},r.prototype.kj=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},r.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._j()},r.prototype.addn=function(t){return this.clone().iaddn(t)},r.prototype.subn=function(t){return this.clone().isubn(t)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype.Dj=function(t,e,s){var r,n,o=t.length+s;this.Tj(o);var a=0;for(r=0;r<t.length;r++){n=(0|this.words[r+s])+a;var h=(0|t.words[r])*e;a=((n-=67108863&h)>>26)-(h/67108864|0),this.words[r+s]=67108863&n}for(;r<this.length-s;r++)a=(n=(0|this.words[r+s])+a)>>26,this.words[r+s]=67108863&n;if(0===a)return this._j();for(i(-1===a),a=0,r=0;r<this.length;r++)a=(n=-(0|this.words[r])+a)>>26,this.words[r]=67108863&n;return this.negative=1,this._j()},r.prototype.Rj=function(t,e){var i=(this.length,t.length),s=this.clone(),n=t,o=0|n.words[n.length-1];0!=(i=26-this.Lj(o))&&(n=n.ushln(i),s.iushln(i),o=0|n.words[n.length-1]);var a,h=s.length-n.length;if("mod"!==e){(a=new r(null)).length=h+1,a.words=new Array(a.length);for(var l=0;l<a.length;l++)a.words[l]=0}var c=s.clone().Dj(n,1,h);0===c.negative&&(s=c,a&&(a.words[h]=1));for(var u=h-1;u>=0;u--){var d=67108864*(0|s.words[n.length+u])+(0|s.words[n.length+u-1]);for(d=Math.min(d/o|0,67108863),s.Dj(n,d,u);0!==s.negative;)d--,s.negative=0,s.Dj(n,1,u),s.isZero()||(s.negative^=1);a&&(a.words[u]=d)}return a&&a._j(),s._j(),"div"!==e&&0!==i&&s.iushrn(i),{div:a||null,mod:s}},r.prototype.divmod=function(t,e,s){return i(!t.isZero()),this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(n=a.div.neg()),"div"!==e&&(o=a.mod.neg(),s&&0!==o.negative&&o.iadd(t)),{div:n,mod:o}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(n=a.div.neg()),{div:n,mod:a.mod}):this.negative&t.negative?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(o=a.mod.neg(),s&&0!==o.negative&&o.isub(t)),{div:a.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new r(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new r(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new r(this.modrn(t.words[0]))}:this.Rj(t,e);var n,o,a},r.prototype.div=function(t){return this.divmod(t,"div",!1).div},r.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},r.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},r.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,s=t.ushrn(1),r=t.andln(1),n=i.cmp(s);return n<0||1===r&&0===n?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},r.prototype.modrn=function(t){var e=t<0;e&&(t=-t),i(t<=67108863);for(var s=(1<<26)%t,r=0,n=this.length-1;n>=0;n--)r=(s*r+(0|this.words[n]))%t;return e?-r:r},r.prototype.modn=function(t){return this.modrn(t)},r.prototype.idivn=function(t){var e=t<0;e&&(t=-t),i(t<=67108863);for(var s=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*s;this.words[r]=n/t|0,s=n%t}return this._j(),e?this.ineg():this},r.prototype.divn=function(t){return this.clone().idivn(t)},r.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,s=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new r(1),o=new r(0),a=new r(0),h=new r(1),l=0;e.isEven()&&s.isEven();)e.iushrn(1),s.iushrn(1),++l;for(var c=s.clone(),u=e.clone();!e.isZero();){for(var d=0,f=1;!(e.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(n.isOdd()||o.isOdd())&&(n.iadd(c),o.isub(u)),n.iushrn(1),o.iushrn(1);for(var g=0,p=1;!(s.words[0]&p)&&g<26;++g,p<<=1);if(g>0)for(s.iushrn(g);g-- >0;)(a.isOdd()||h.isOdd())&&(a.iadd(c),h.isub(u)),a.iushrn(1),h.iushrn(1);e.cmp(s)>=0?(e.isub(s),n.isub(a),o.isub(h)):(s.isub(e),a.isub(n),h.isub(o))}return{a:a,b:h,gcd:s.iushln(l)}},r.prototype.Ej=function(t){i(0===t.negative),i(!t.isZero());var e=this,s=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,o=new r(1),a=new r(0),h=s.clone();e.cmpn(1)>0&&s.cmpn(1)>0;){for(var l=0,c=1;!(e.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(e.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);for(var u=0,d=1;!(s.words[0]&d)&&u<26;++u,d<<=1);if(u>0)for(s.iushrn(u);u-- >0;)a.isOdd()&&a.iadd(h),a.iushrn(1);e.cmp(s)>=0?(e.isub(s),o.isub(a)):(s.isub(e),a.isub(o))}return(n=0===e.cmpn(1)?o:a).cmpn(0)<0&&n.iadd(t),n},r.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var s=0;e.isEven()&&i.isEven();s++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var r=e.cmp(i);if(r<0){var n=e;e=i,i=n}else if(0===r||0===i.cmpn(1))break;e.isub(i)}return i.iushln(s)},r.prototype.invm=function(t){return this.egcd(t).a.umod(t)},r.prototype.isEven=function(){return!(1&this.words[0])},r.prototype.isOdd=function(){return!(1&~this.words[0])},r.prototype.andln=function(t){return this.words[0]&t},r.prototype.bincn=function(t){i("number"==typeof t);var e=t%26,s=(t-e)/26,r=1<<e;if(this.length<=s)return this.Tj(s+1),this.words[s]|=r,this;for(var n=r,o=s;0!==n&&o<this.length;o++){var a=0|this.words[o];n=(a+=n)>>>26,a&=67108863,this.words[o]=a}return 0!==n&&(this.words[o]=n,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(t){var e,s=t<0;if(0!==this.negative&&!s)return-1;if(0===this.negative&&s)return 1;if(this._j(),this.length>1)e=1;else{s&&(t=-t),i(t<=67108863,"Number is too big");var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},r.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},r.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var s=0|this.words[i],r=0|t.words[i];if(s!==r){s<r?e=-1:s>r&&(e=1);break}}return e},r.prototype.gtn=function(t){return 1===this.cmpn(t)},r.prototype.gt=function(t){return 1===this.cmp(t)},r.prototype.gten=function(t){return this.cmpn(t)>=0},r.prototype.gte=function(t){return this.cmp(t)>=0},r.prototype.ltn=function(t){return-1===this.cmpn(t)},r.prototype.lt=function(t){return-1===this.cmp(t)},r.prototype.lten=function(t){return this.cmpn(t)<=0},r.prototype.lte=function(t){return this.cmp(t)<=0},r.prototype.eqn=function(t){return 0===this.cmpn(t)},r.prototype.eq=function(t){return 0===this.cmp(t)},r.red=function(t){return new E(t)},r.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this).Oj(t)},r.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype.Oj=function(t){return this.red=t,this},r.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this.Oj(t)},r.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},r.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},r.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},r.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},r.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},r.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red.zj(this,t),this.red.mul(this,t)},r.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red.zj(this,t),this.red.imul(this,t)},r.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red.Vj(this),this.red.sqr(this)},r.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red.Vj(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red.Vj(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red.Vj(this),this.red.invm(this)},r.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red.Vj(this),this.red.neg(this)},r.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red.Vj(this),this.red.pow(this,t)};var m={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new r(e,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this.Nj()}function x(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(t){if("string"==typeof t){var e=r.Gj(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function k(t){E.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.Ej(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype.Nj=function(){var t=new r(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var s=e<this.n?-1:i.ucmp(this.p);return 0===s?(i.words[0]=0,i.length=1):s>0?i.isub(this.p):void 0!==i.strip?i.strip():i._j(),i},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},s(x,v),x.prototype.split=function(t,e){for(var i=4194303,s=Math.min(t.length,9),r=0;r<s;r++)e.words[r]=t.words[r];if(e.length=s,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=n&i,r=10;r<t.length;r++){var o=0|t.words[r];t.words[r-10]=(o&i)<<4|n>>>22,n=o}n>>>=22,t.words[r-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},x.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var s=0|t.words[i];e+=977*s,t.words[i]=67108863&e,e=64*s+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},s(b,v),s(S,v),s(A,v),A.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var s=19*(0|t.words[i])+e,r=67108863&s;s>>>=26,t.words[i]=r,e=s}return 0!==e&&(t.words[t.length++]=e),t},r.Gj=function(t){if(m[t])return m[t];var e;if("k256"===t)e=new x;else if("p224"===t)e=new b;else if("p192"===t)e=new S;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new A}return m[t]=e,e},E.prototype.Vj=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},E.prototype.zj=function(t,e){i(!(t.negative|e.negative),"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},E.prototype.imod=function(t){return this.prime?this.prime.ireduce(t).Oj(this):(h(t,t.umod(this.m).Oj(this)),t)},E.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t).Oj(this)},E.prototype.add=function(t,e){this.zj(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i.Oj(this)},E.prototype.iadd=function(t,e){this.zj(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},E.prototype.sub=function(t,e){this.zj(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i.Oj(this)},E.prototype.isub=function(t,e){this.zj(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},E.prototype.shl=function(t,e){return this.Vj(t),this.imod(t.ushln(e))},E.prototype.imul=function(t,e){return this.zj(t,e),this.imod(t.imul(e))},E.prototype.mul=function(t,e){return this.zj(t,e),this.imod(t.mul(e))},E.prototype.isqr=function(t){return this.imul(t,t.clone())},E.prototype.sqr=function(t){return this.mul(t,t)},E.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2==1),3===e){var s=this.m.add(new r(1)).iushrn(2);return this.pow(t,s)}for(var n=this.m.subn(1),o=0;!n.isZero()&&0===n.andln(1);)o++,n.iushrn(1);i(!n.isZero());var a=new r(1).toRed(this),h=a.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new r(2*c*c).toRed(this);0!==this.pow(c,l).cmp(h);)c.redIAdd(h);for(var u=this.pow(c,n),d=this.pow(t,n.addn(1).iushrn(1)),f=this.pow(t,n),g=o;0!==f.cmp(a);){for(var p=f,y=0;0!==p.cmp(a);y++)p=p.redSqr();i(y<g);var m=this.pow(u,new r(1).iushln(g-y-1));d=d.redMul(m),u=m.redSqr(),f=f.redMul(u),g=y}return d},E.prototype.invm=function(t){var e=t.Ej(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},E.prototype.pow=function(t,e){if(e.isZero())return new r(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new r(1).toRed(this),i[1]=t;for(var s=2;s<i.length;s++)i[s]=this.mul(i[s-1],t);var n=i[0],o=0,a=0,h=e.bitLength()%26;for(0===h&&(h=26),s=e.length-1;s>=0;s--){for(var l=e.words[s],c=h-1;c>=0;c--){var u=l>>c&1;n!==i[0]&&(n=this.sqr(n)),0!==u||0!==o?(o<<=1,o|=u,(4==++a||0===s&&0===c)&&(n=this.mul(n,i[o]),a=0,o=0)):a=0}h=26}return n},E.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},E.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},r.mont=function(t){return new k(t)},s(k,E),k.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},k.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},k.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(s).iushrn(this.shift),n=r;return r.cmp(this.m)>=0?n=r.isub(this.m):r.cmpn(0)<0&&(n=r.iadd(this.m)),n.Oj(this)},k.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new r(0).Oj(this);var i=t.mul(e),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(s).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o.Oj(this)},k.prototype.invm=function(t){return this.imod(t.Ej(this.m).mul(this.r2)).Oj(this)}}(0,rS);var oS=nS.exports;function aS(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];const i=[];if("string"!=typeof t){for(let e=0;e<t.length;e++)i[e]=0|t[e];return i}if("hex"===e){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0".concat(t));for(let e=0;e<t.length;e+=2)i.push(parseInt(t[e]+t[e+1],16))}else for(let s=0;s<t.length;s++){const e=t.charCodeAt(s),r=e>>8,n=255&e;r?i.push(r,n):i.push(n)}return i}const hS=function(t,e,i){const s=new Array(Math.max(t.bitLength(),i)+1);s.fill(0);const r=1<<e+1,n=t.clone();for(let o=0;o<s.length;o++){let t;const e=n.andln(r-1);n.isOdd()?(t=e>(r>>1)-1?(r>>1)-e:e,n.isubn(t)):t=0,s[o]=t,n.iushrn(1)}return s},lS=function(t,e){const i=[[],[]];t=t.clone(),e=e.clone();let s=0,r=0;for(;t.cmpn(-s)>0||e.cmpn(-r)>0;){let n,o,a=t.andln(3)+s&3,h=e.andln(3)+r&3;if(3===a&&(a=-1),3===h&&(h=-1),1&a){const e=t.andln(7)+s&7;n=3!==e&&5!==e||2!==h?a:-a}else n=0;if(i[0].push(n),1&h){const t=e.andln(7)+r&7;o=3!==t&&5!==t||2!==a?h:-h}else o=0;i[1].push(o),2*s===n+1&&(s=1-s),2*r===o+1&&(r=1-r),t.iushrn(1),e.iushrn(1)}return i};class cS{constructor(t,e){this.type=t,this.p=new oS(e.p,16),this.red=e.prime?oS.red(e.prime):oS.mont(this.p),this.zero=new oS(0).toRed(this.red),this.one=new oS(1).toRed(this.red),this.two=new oS(2).toRed(this.red),this.n=e.n&&new oS(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this.$j=new Array(4),this.Uj=new Array(4),this.Yj=new Array(4),this.jj=new Array(4),this.Hj=this.n?this.n.bitLength():0;const i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this.Wj=!0,this.redN=this.n.toRed(this.red))}Xj(t,e){const i=t.Zj(),s=hS(e,1,this.Hj);let r=(1<<i.step+1)-(i.step%2==0?2:1);r/=3;const n=[];for(let h=0;h<s.length;h+=i.step){let t=0;for(let e=h+i.step-1;e>=h;e--)t=(t<<1)+s[e];n.push(t)}let o=this.jpoint(null,null,null),a=this.jpoint(null,null,null);for(let h=r;h>0;h--){for(let t=0;t<n.length;t++){const e=n[t];e===h?a=a.mixedAdd(i.points[t]):e===-h&&(a=a.mixedAdd(i.points[t].neg()))}o=o.add(a)}return o.toP()}Jj(t,e){let i=4;const s=t.Qj(i);i=s.wnd;const r=s.points,n=hS(e,i,this.Hj);let o=this.jpoint(null,null,null);for(let a=n.length-1;a>=0;a--){for(let t=0;a>=0&&0===n[a];a--)t++;if(a>=0&&e++,o=o.dblp(e),a<0)break;const i=n[a];o="affine"===t.type?i>0?o.mixedAdd(r[i-1>>1]):o.mixedAdd(r[-i-1>>1].neg()):i>0?o.add(r[i-1>>1]):o.add(r[-i-1>>1].neg())}return"affine"===t.type?o.toP():o}Kj(t,e,i,s,r){const n=this.$j,o=this.Uj,a=this.Yj;let h=0;for(let u=0;u<s;u++){const i=e[u].Qj(t);n[u]=i.wnd,o[u]=i.points}for(let u=s-1;u>=1;u-=2){const t=u-1,s=u;if(1!==n[t]||1!==n[s]){a[t]=hS(i[t],n[t],this.Hj),a[s]=hS(i[s],n[s],this.Hj),h=Math.max(a[t].length,h),h=Math.max(a[s].length,h);continue}const r=[e[t],null,null,e[s]];0===e[t].y.cmp(e[s].y)?(r[1]=e[t].add(e[s]),r[2]=e[t].toJ().mixedAdd(e[s].neg())):0===e[t].y.cmp(e[s].y.redNeg())?(r[1]=e[t].toJ().mixedAdd(e[s]),r[2]=e[t].add(e[s].neg())):(r[1]=e[t].toJ().mixedAdd(e[s]),r[2]=e[t].toJ().mixedAdd(e[s].neg()));const l=[-3,-1,-5,-7,0,7,5,1,3],c=lS(i[t],i[s]);h=Math.max(c[0].length,h),a[t]=new Array(h),a[s]=new Array(h);for(let e=0;e<h;e++){const i=0|c[0][e],n=0|c[1][e];a[t][e]=l[3*(i+1)+(n+1)],a[s][e]=0,o[t]=r}}let l=this.jpoint(null,null,null);const c=this.jj;for(let u=h;u>=0;u--){let t=0;for(;u>=0;){let e=!0;for(let t=0;t<s;t++)c[t]=0|a[t][u],0!==c[t]&&(e=!1);if(!e)break;t++,u--}if(u>=0&&t++,l=l.dblp(t),u<0)break;for(let e=0;e<s;e++){const t=c[e];let i;0!==t&&(t>0?i=o[e][t-1>>1]:t<0&&(i=o[e][-t-1>>1].neg()),l="affine"===i.type?l.mixedAdd(i):l.add(i))}}for(let u=0;u<s;u++)o[u]=null;return r?l:l.toP()}decodePoint(t,e){t=aS(t,e);const i=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*i)return this.point(t.slice(1,1+i),t.slice(1+i,1+2*i));if((2===t[0]||3===t[0])&&t.length-1===i)return this.pointFromX(t.slice(1,1+i),3===t[0]);throw new Error("Unknown point format")}}class uS{constructor(t,e){this.curve=t,this.type=e,this.precomputed=null}eq(t){throw new Error("Not implemented")}validate(){return this.curve.validate(this)}encodeCompressed(t){return this.encode(t,!0)}qj(t){const e=this.curve.p.byteLength(),i=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",e))}encode(t,e){return function(t,e){return"hex"===e?function(t){let e="";for(let s=0;s<t.length;s++)e+=1===(i=t[s].toString(16)).length?"0".concat(i):i;var i;return e}(t):t}(this.qj(e),t)}precompute(t){if(this.precomputed)return this;const e={doubles:null,naf:null,beta:null};return e.naf=this.Qj(8),e.doubles=this.Zj(4,t),e.beta=this.tH(),this.precomputed=e,this}iH(t){if(!this.precomputed)return!1;const e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)}Zj(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;const i=[this];let s=this;for(let r=0;r<e;r+=t){for(let e=0;e<t;e++)s=s.dbl();i.push(s)}return{step:t,points:i}}Qj(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;const e=[this],i=(1<<t)-1,s=1===i?null:this.dbl();for(let r=1;r<i;r++)e[r]=e[r-1].add(s);return{wnd:t,points:e}}tH(){return null}dblp(t){let e=this;for(let i=0;i<t;i++)e=e.dbl();return e}}class dS extends cS{constructor(t){super("short",t),this.a=new oS(t.a,16).toRed(this.red),this.b=new oS(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this.sH(t),this.eH=new Array(4),this.hH=new Array(4)}pointFromJSON(t,e){return fS.fromJSON(this,t,e)}sH(t){if(!this.zeroA||!this.g||!this.n||1!==this.p.modn(3))return;let e,i,s;if(t.beta)e=new oS(t.beta,16).toRed(this.red);else{const t=this.rH(this.p);e=t[0].cmp(t[1])<0?t[0]:t[1],e=e.toRed(this.red)}if(t.lambda)i=new oS(t.lambda,16);else{const t=this.rH(this.n);i=0===this.g.mul(t[0]).x.cmp(this.g.x.redMul(e))?t[0]:t[1]}return s=t.basis?t.basis.map(t=>({a:new oS(t.a,16),b:new oS(t.b,16)})):this.nH(i),{beta:e,lambda:i,basis:s}}rH(t){const e=t===this.p?this.red:oS.mont(t),i=new oS(2).toRed(e).redInvm(),s=i.redNeg(),r=new oS(3).toRed(e).redNeg().redSqrt().redMul(i);return[s.redAdd(r).fromRed(),s.redSub(r).fromRed()]}nH(t){const e=this.n.ushrn(Math.floor(this.n.bitLength()/2));let i,s,r,n,o,a,h,l,c,u=t,d=this.n.clone(),f=new oS(1),g=new oS(0),p=new oS(0),y=new oS(1),m=0;for(;0!==u.cmpn(0);){const t=d.div(u);l=d.sub(t.mul(u)),c=p.sub(t.mul(f));const o=y.sub(t.mul(g));if(!r&&l.cmp(e)<0)i=h.neg(),s=f,r=l.neg(),n=c;else if(r&&2==++m)break;h=l,d=u,u=l,p=f,f=c,y=g,g=o}o=l.neg(),a=c;const v=r.sqr().add(n.sqr());return o.sqr().add(a.sqr()).cmp(v)>=0&&(o=i,a=s),r.negative&&(r=r.neg(),n=n.neg()),o.negative&&(o=o.neg(),a=a.neg()),[{a:r,b:n},{a:o,b:a}]}oH(t){const e=this.endo.basis,i=e[0],s=e[1],r=s.b.mul(t).divRound(this.n),n=i.b.neg().mul(t).divRound(this.n),o=r.mul(i.a),a=n.mul(s.a),h=r.mul(i.b),l=n.mul(s.b);return{k1:t.sub(o).sub(a),k2:h.add(l).neg()}}point(t,e,i){return new fS(this,t,e,i)}pointFromX(t,e){(t=new oS(t,16)).red||(t=t.toRed(this.red));const i=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b);let s=i.redSqrt();if(0!==s.redSqr().redSub(i).cmp(this.zero))throw new Error("invalid point");const r=s.fromRed().isOdd();return(e&&!r||!e&&r)&&(s=s.redNeg()),this.point(t,s)}validate(t){if(t.inf)return!0;const e=t.x,i=t.y,s=this.a.redMul(e),r=e.redSqr().redMul(e).redIAdd(s).redIAdd(this.b);return 0===i.redSqr().redISub(r).cmpn(0)}aH(t,e,i){const s=this.eH,r=this.hH;let n=0;for(n=0;n<t.length;n++){const i=this.oH(e[n]);let o=t[n],a=o.tH();i.k1.negative&&(i.k1.ineg(),o=o.neg(!0)),i.k2.negative&&(i.k2.ineg(),a=a.neg(!0)),s[2*n]=o,s[2*n+1]=a,r[2*n]=i.k1,r[2*n+1]=i.k2}const o=this.Kj(1,s,r,2*n,i);for(let a=0;a<2*n;a++)s[a]=null,r[a]=null;return o}jpoint(t,e,i){return new gS(this,t,e,i)}}class fS extends uS{constructor(t,e,i,s){super(t,"affine"),null===e&&null===i?(this.x=null,this.y=null,this.inf=!0):(this.x=new oS(e,16),this.y=new oS(i,16),s&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}pointFromX(t,e){throw new Error("Method not implemented.")}point(t,e,i){return new fS(this,t,e,i)}tH(){if(!this.curve.endo)return;const t=this.precomputed;if(t&&t.beta)return t.beta;const e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){const i=this.curve,s=function(t){return i.point(t.x.redMul(i.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(s)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(s)}}}return e}toJSON(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]}static fromJSON(t,e,i){"string"==typeof e&&(e=JSON.parse(e));const s=t.point(e[0],e[1],i);if(!e[2])return s;function r(e){return t.point(e[0],e[1],i)}const n=e[2];return s.precomputed={beta:null,doubles:n.doubles&&{step:n.doubles.step,points:[s].concat(n.doubles.points.map(r))},naf:n.naf&&{wnd:n.naf.wnd,points:[s].concat(n.naf.points.map(r))}},s}inspect(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: ".concat(this.x.fromRed().toString(16,2)," y: ").concat(this.y.fromRed().toString(16,2),">")}isInfinity(){return this.inf}add(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);let e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));const i=e.redSqr().redISub(this.x).redISub(t.x),s=e.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)}dbl(){if(this.inf)return this;const t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);const e=this.curve.a,i=this.x.redSqr(),s=t.redInvm(),r=i.redAdd(i).redIAdd(i).redIAdd(e).redMul(s),n=r.redSqr().redISub(this.x.redAdd(this.x)),o=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,o)}getX(){return this.x.fromRed()}getY(){return this.y.fromRed()}mul(t){return t=new oS(t,16),this.isInfinity()?this:this.iH(t)?this.curve.Xj(this,t):this.curve.endo?this.curve.aH([this],[t]):this.curve.Jj(this,t)}mulAdd(t,e,i){const s=[this,e],r=[t,i];return this.curve.endo?this.curve.aH(s,r):this.curve.Kj(1,s,r,2)}jmulAdd(t,e,i){const s=[this,e],r=[t,i];return this.curve.endo?this.curve.aH(s,r,!0):this.curve.Kj(1,s,r,2,!0)}eq(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))}neg(t){if(this.inf)return this;const e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){const t=this.precomputed,i=function(t){return t.neg()};e.precomputed={naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(i)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(i)}}}return e}toJ(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)}}class gS extends uS{constructor(t,e,i,s){super(t,"jacobian"),null===e&&null===i&&null===s?(this.x=this.curve.one,this.y=this.curve.one,this.z=new oS(0)):(this.x=new oS(e,16),this.y=new oS(i,16),this.z=new oS(s,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}getY(){throw new Error("Method not implemented.")}getX(){throw new Error("Method not implemented.")}pointFromX(t,e){throw new Error("Method not implemented.")}point(t,e,i){throw new Error("Method not implemented.")}jpoint(t,e,i){return new gS(this,t,e,i)}toP(){if(this.isInfinity())return this.curve.point(null,null);const t=this.z.redInvm(),e=t.redSqr(),i=this.x.redMul(e),s=this.y.redMul(e).redMul(t);return this.curve.point(i,s)}neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)}add(t){if(this.isInfinity())return t;if(t.isInfinity())return this;const e=t.z.redSqr(),i=this.z.redSqr(),s=this.x.redMul(e),r=t.x.redMul(i),n=this.y.redMul(e.redMul(t.z)),o=t.y.redMul(i.redMul(this.z)),a=s.redSub(r),h=n.redSub(o);if(0===a.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();const l=a.redSqr(),c=l.redMul(a),u=s.redMul(l),d=h.redSqr().redIAdd(c).redISub(u).redISub(u),f=h.redMul(u.redISub(d)).redISub(n.redMul(c)),g=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(d,f,g)}mixedAdd(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;const e=this.z.redSqr(),i=this.x,s=t.x.redMul(e),r=this.y,n=t.y.redMul(e).redMul(this.z),o=i.redSub(s),a=r.redSub(n);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();const h=o.redSqr(),l=h.redMul(o),c=i.redMul(h),u=a.redSqr().redIAdd(l).redISub(c).redISub(c),d=a.redMul(c.redISub(u)).redISub(r.redMul(l)),f=this.z.redMul(o);return this.curve.jpoint(u,d,f)}dblp(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){let e=this;for(let i=0;i<t;i++)e=e.dbl();return e}const e=this.curve.a,i=this.curve.tinv;let s=this.x;const r=this.y;let n=this.z,o=n.redSqr().redSqr(),a=r.redAdd(r);for(let h=0;h<t;h++){const i=s.redSqr(),r=a.redSqr(),l=r.redSqr(),c=i.redAdd(i).redIAdd(i).redIAdd(e.redMul(o)),u=s.redMul(r),d=c.redSqr().redISub(u.redAdd(u)),f=u.redISub(d);let g=c.redMul(f);g=g.redIAdd(g).redISub(l);const p=a.redMul(n);h+1<t&&(o=o.redMul(l)),s=d,n=p,a=g}return this.curve.jpoint(s,a.redMul(i),n)}dbl(){return this.isInfinity()?this:this.curve.zeroA?this.lH():this.curve.threeA?this.cH():this.uH()}lH(){let t,e,i;if(this.zOne){const s=this.x.redSqr(),r=this.y.redSqr(),n=r.redSqr();let o=this.x.redAdd(r).redSqr().redISub(s).redISub(n);o=o.redIAdd(o);const a=s.redAdd(s).redIAdd(s),h=a.redSqr().redISub(o).redISub(o);let l=n.redIAdd(n);l=l.redIAdd(l),l=l.redIAdd(l),t=h,e=a.redMul(o.redISub(h)).redISub(l),i=this.y.redAdd(this.y)}else{const s=this.x.redSqr(),r=this.y.redSqr(),n=r.redSqr();let o=this.x.redAdd(r).redSqr().redISub(s).redISub(n);o=o.redIAdd(o);const a=s.redAdd(s).redIAdd(s),h=a.redSqr();let l=n.redIAdd(n);l=l.redIAdd(l),l=l.redIAdd(l),t=h.redISub(o).redISub(o),e=a.redMul(o.redISub(t)).redISub(l),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(t,e,i)}cH(){let t,e,i;if(this.zOne){const s=this.x.redSqr(),r=this.y.redSqr(),n=r.redSqr();let o=this.x.redAdd(r).redSqr().redISub(s).redISub(n);o=o.redIAdd(o);const a=s.redAdd(s).redIAdd(s).redIAdd(this.curve.a),h=a.redSqr().redISub(o).redISub(o);t=h;let l=n.redIAdd(n);l=l.redIAdd(l),l=l.redIAdd(l),e=a.redMul(o.redISub(h)).redISub(l),i=this.y.redAdd(this.y)}else{const s=this.z.redSqr(),r=this.y.redSqr(),n=this.x.redMul(r);let o=this.x.redSub(s).redMul(this.x.redAdd(s));o=o.redAdd(o).redIAdd(o);let a=n.redIAdd(n);a=a.redIAdd(a);const h=a.redAdd(a);t=o.redSqr().redISub(h),i=this.y.redAdd(this.z).redSqr().redISub(r).redISub(s);let l=r.redSqr();l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l),e=o.redMul(a.redISub(t)).redISub(l)}return this.curve.jpoint(t,e,i)}uH(){const t=this.curve.a,e=this.x,i=this.y,s=this.z,r=s.redSqr().redSqr(),n=e.redSqr(),o=i.redSqr(),a=n.redAdd(n).redIAdd(n).redIAdd(t.redMul(r));let h=e.redAdd(e);h=h.redIAdd(h);const l=h.redMul(o),c=a.redSqr().redISub(l.redAdd(l)),u=l.redISub(c);let d=o.redSqr();d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);const f=a.redMul(u).redISub(d),g=i.redAdd(i).redMul(s);return this.curve.jpoint(c,f,g)}trpl(){if(!this.curve.zeroA)return this.dbl().add(this);const t=this.x.redSqr(),e=this.y.redSqr(),i=this.z.redSqr(),s=e.redSqr(),r=t.redAdd(t).redIAdd(t),n=r.redSqr();let o=this.x.redAdd(e).redSqr().redISub(t).redISub(s);o=o.redIAdd(o),o=o.redAdd(o).redIAdd(o),o=o.redISub(n);const a=o.redSqr();let h=s.redIAdd(s);h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);const l=r.redIAdd(o).redSqr().redISub(n).redISub(a).redISub(h);let c=e.redMul(l);c=c.redIAdd(c),c=c.redIAdd(c);let u=this.x.redMul(a).redISub(c);u=u.redIAdd(u),u=u.redIAdd(u);let d=this.y.redMul(l.redMul(h.redISub(l)).redISub(o.redMul(a)));d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);const f=this.z.redAdd(o).redSqr().redISub(i).redISub(a);return this.curve.jpoint(u,d,f)}mul(t,e){return t=new oS(t,e),this.curve.Jj(this,t)}eq(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;const e=this.z.redSqr(),i=t.z.redSqr();if(0!==this.x.redMul(i).redISub(t.x.redMul(e)).cmpn(0))return!1;const s=e.redMul(this.z),r=i.redMul(t.z);return 0===this.y.redMul(r).redISub(t.y.redMul(s)).cmpn(0)}eqXToP(t){const e=this.z.redSqr(),i=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(i))return!0;const s=t.clone(),r=this.curve.redN.redMul(e);for(;;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(r),0===this.x.cmp(i))return!0}}inspect(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: ".concat(this.x.toString(16,2)," y: ").concat(this.y.toString(16,2)," z: ").concat(this.z.toString(16,2),">")}isInfinity(){return 0===this.z.cmpn(0)}}class pS{constructor(t){this.curve=new dS(t),this.g=this.curve.g,this.n=this.curve.n}}const yS={};var mS,vS;yS.PresetCurve=pS,mS="secp256k1",vS={type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",{doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}]},Object.defineProperty(yS,mS,{configurable:!0,enumerable:!0,get(){const t=new pS(vS);return Object.defineProperty(yS,mS,{configurable:!0,enumerable:!0,value:t}),t}});class xS{constructor(t,e){this.ec=t,this.priv=null,this.pub=null,e.pub&&this.dH(e.pub,e.pubEnc)}static fromPublic(t,e,i){return e instanceof xS?e:new xS(t,{pub:e,pubEnc:i})}validate(){const t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}}getPublic(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub}dH(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type||"short"===this.ec.curve.type||this.ec.curve.type,void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)}verify(t,e){return this.ec.verify(t,e,this)}}function bS(t,e){const i=t[e.place++];if(!(128&i))return i;const s=15&i;if(0===s||s>4)return!1;let r=0,n=e.place;for(let o=0;o<s;o++,n++)r<<=8,r|=t[n],r>>>=0;return!(r<=127)&&(e.place=n,r)}class SS{constructor(){this.place=0}}class AS{constructor(t,e){if(t instanceof AS)return t;this.fH(t,e)||(this.r=new oS(t.r,16),this.s=new oS(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}fH(t,e){t=aS(t,e);const i=new SS;if(48!==t[i.place++])return!1;const s=bS(t,i);if(!1===s)return!1;if(s+i.place!==t.length)return!1;if(2!==t[i.place++])return!1;const r=bS(t,i);if(!1===r)return!1;let n=t.slice(i.place,r+i.place);if(i.place+=r,2!==t[i.place++])return!1;const o=bS(t,i);if(!1===o)return!1;if(t.length!==o+i.place)return!1;let a=t.slice(i.place,o+i.place);if(0===n[0]){if(!(128&n[1]))return!1;n=n.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new oS(n),this.s=new oS(a),this.recoveryParam=null,!0}}class ES{constructor(t){if(!(this instanceof ES))return new ES(t);"string"==typeof t&&(t=yS[t]),t instanceof yS.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1)}keyFromPublic(t,e){return xS.fromPublic(this,t,e)}AH(t,e){const i=8*t.byteLength()-this.n.bitLength();return i>0&&(t=t.ushrn(i)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t}verify(t,e,i,s){t=this.AH(new oS(t,16)),i=this.keyFromPublic(i,s);const r=(e=new AS(e,"hex")).r,n=e.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return!1;if(n.cmpn(1)<0||n.cmp(this.n)>=0)return!1;const o=n.invm(this.n),a=o.mul(t).umod(this.n),h=o.mul(r).umod(this.n);if(!this.curve.Wj){const t=this.g.mulAdd(a,i.getPublic(),h);return!t.isInfinity()&&0===t.getX().umod(this.n).cmp(r)}const l=this.g.jmulAdd(a,i.getPublic(),h);return!l.isInfinity()&&l.eqXToP(r)}}var kS,wS={exports:{}},MS={exports:{}};MS.exports=(kS=kS||function(t,e){var i;if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),"undefined"!=typeof self&&self.crypto&&(i=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(i=globalThis.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&void 0!==rS&&rS.crypto&&(i=rS.crypto),!i)try{i=e}catch(t){}var s=function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},r=Object.create||function(){function t(){}return function(e){var i;return t.prototype=e,i=new t,t.prototype=null,i}}(),n={},o=n.lib={},a=o.Base={extend:function(t){var e=r(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},h=o.WordArray=a.extend({init:function(t,i){t=this.words=t||[],this.sigBytes=i!=e?i:4*t.length},toString:function(t){return(t||c).stringify(this)},concat:function(t){var e=this.words,i=t.words,s=this.sigBytes,r=t.sigBytes;if(this.clamp(),s%4)for(var n=0;n<r;n++){var o=i[n>>>2]>>>24-n%4*8&255;e[s+n>>>2]|=o<<24-(s+n)%4*8}else for(var a=0;a<r;a+=4)e[s+a>>>2]=i[a>>>2];return this.sigBytes+=r,this},clamp:function(){var e=this.words,i=this.sigBytes;e[i>>>2]&=4294967295<<32-i%4*8,e.length=t.ceil(i/4)},clone:function(){var t=a.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],i=0;i<t;i+=4)e.push(s());return new h.init(e,t)}}),l=n.enc={},c=l.Hex={stringify:function(t){for(var e=t.words,i=t.sigBytes,s=[],r=0;r<i;r++){var n=e[r>>>2]>>>24-r%4*8&255;s.push((n>>>4).toString(16)),s.push((15&n).toString(16))}return s.join("")},parse:function(t){for(var e=t.length,i=[],s=0;s<e;s+=2)i[s>>>3]|=parseInt(t.substr(s,2),16)<<24-s%8*4;return new h.init(i,e/2)}},u=l.Latin1={stringify:function(t){for(var e=t.words,i=t.sigBytes,s=[],r=0;r<i;r++){var n=e[r>>>2]>>>24-r%4*8&255;s.push(String.fromCharCode(n))}return s.join("")},parse:function(t){for(var e=t.length,i=[],s=0;s<e;s++)i[s>>>2]|=(255&t.charCodeAt(s))<<24-s%4*8;return new h.init(i,e)}},d=l.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},f=o.BufferedBlockAlgorithm=a.extend({reset:function(){this.iM=new h.init,this.gH=0},vH:function(t){"string"==typeof t&&(t=d.parse(t)),this.iM.concat(t),this.gH+=t.sigBytes},yH:function(e){var i,s=this.iM,r=s.words,n=s.sigBytes,o=this.blockSize,a=n/(4*o),l=(a=e?t.ceil(a):t.max((0|a)-this.pH,0))*o,c=t.min(4*l,n);if(l){for(var u=0;u<l;u+=o)this.mH(r,u);i=r.splice(0,l),s.sigBytes-=c}return new h.init(i,c)},clone:function(){var t=a.clone.call(this);return t.iM=this.iM.clone(),t},pH:0});o.Hasher=f.extend({cfg:a.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this.SH()},update:function(t){return this.vH(t),this.yH(),this},finalize:function(t){return t&&this.vH(t),this.bH()},blockSize:16,xH:function(t){return function(e,i){return new t.init(i).finalize(e)}},MH:function(t){return function(e,i){return new g.HMAC.init(t,i).finalize(e)}}});var g=n.algo={};return n}(Math),kS);var CS={exports:{}};CS.exports=function(t){return function(e){var i=t,s=i.lib,r=s.WordArray,n=s.Hasher,o=i.algo,a=[],h=[];!function(){function t(t){for(var i=e.sqrt(t),s=2;s<=i;s++)if(!(t%s))return!1;return!0}function i(t){return 4294967296*(t-(0|t))|0}for(var s=2,r=0;r<64;)t(s)&&(r<8&&(a[r]=i(e.pow(s,.5))),h[r]=i(e.pow(s,1/3)),r++),s++}();var l=[],c=o.SHA256=n.extend({SH:function(){this.wH=new r.init(a.slice(0))},mH:function(t,e){for(var i=this.wH.words,s=i[0],r=i[1],n=i[2],o=i[3],a=i[4],c=i[5],u=i[6],d=i[7],f=0;f<64;f++){if(f<16)l[f]=0|t[e+f];else{var g=l[f-15],p=(g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3,y=l[f-2],m=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;l[f]=p+l[f-7]+m+l[f-16]}var v=s&r^s&n^r&n,x=(s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22),b=d+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&c^~a&u)+h[f]+l[f];d=u,u=c,c=a,a=o+b|0,o=n,n=r,r=s,s=b+(x+v)|0}i[0]=i[0]+s|0,i[1]=i[1]+r|0,i[2]=i[2]+n|0,i[3]=i[3]+o|0,i[4]=i[4]+a|0,i[5]=i[5]+c|0,i[6]=i[6]+u|0,i[7]=i[7]+d|0},bH:function(){var t=this.iM,i=t.words,s=8*this.gH,r=8*t.sigBytes;return i[r>>>5]|=128<<24-r%32,i[14+(r+64>>>9<<4)]=e.floor(s/4294967296),i[15+(r+64>>>9<<4)]=s,t.sigBytes=4*i.length,this.yH(),this.wH},clone:function(){var t=n.clone.call(this);return t.wH=this.wH.clone(),t}});i.SHA256=n.xH(c),i.HmacSHA256=n.MH(c)}(Math),t.SHA256}(MS.exports);var TS=CS.exports;wS.exports=function(t){return i=(e=t).lib.WordArray,s=e.algo,r=s.SHA256,n=s.SHA224=r.extend({SH:function(){this.wH=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},bH:function(){var t=r.bH.call(this);return t.sigBytes-=4,t}}),e.SHA224=r.xH(n),e.HmacSHA224=r.MH(n),t.SHA224;var e,i,s,r,n}(MS.exports);var FS=wS.exports,PS={exports:{}};PS.exports=MS.exports.enc.Hex;var BS=PS.exports,LS={exports:{}};LS.exports=MS.exports.enc.Utf8;var DS,zS,IS,RS=LS.exports,_S={exports:{}};!function(t){return i=(e=t).lib.WordArray,e.enc.Base64={stringify:function(t){var e=t.words,i=t.sigBytes,s=this._H;t.clamp();for(var r=[],n=0;n<i;n+=3)for(var o=(e[n>>>2]>>>24-n%4*8&255)<<16|(e[n+1>>>2]>>>24-(n+1)%4*8&255)<<8|e[n+2>>>2]>>>24-(n+2)%4*8&255,a=0;a<4&&n+.75*a<i;a++)r.push(s.charAt(o>>>6*(3-a)&63));var h=s.charAt(64);if(h)for(;r.length%4;)r.push(h);return r.join("")},parse:function(t){var e=t.length,s=this._H,r=this.kH;if(!r){r=this.kH=[];for(var n=0;n<s.length;n++)r[s.charCodeAt(n)]=n}var o=s.charAt(64);if(o){var a=t.indexOf(o);-1!==a&&(e=a)}return function(t,e,s){for(var r=[],n=0,o=0;o<e;o++)if(o%4){var a=s[t.charCodeAt(o-1)]<<o%4*2|s[t.charCodeAt(o)]>>>6-o%4*2;r[n>>>2]|=a<<24-n%4*8,n++}return i.create(r,n)}(t,e,r)},_H:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},t.enc.Base64;var e,i}(MS.exports),function(t){(function(e){var i=t,s=i.lib,r=s.WordArray,n=s.Hasher,o=i.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var h=o.MD5=n.extend({SH:function(){this.wH=new r.init([1732584193,4023233417,2562383102,271733878])},mH:function(t,e){for(var i=0;i<16;i++){var s=e+i,r=t[s];t[s]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var n=this.wH.words,o=t[e+0],h=t[e+1],f=t[e+2],g=t[e+3],p=t[e+4],y=t[e+5],m=t[e+6],v=t[e+7],x=t[e+8],b=t[e+9],S=t[e+10],A=t[e+11],E=t[e+12],k=t[e+13],w=t[e+14],M=t[e+15],C=n[0],T=n[1],F=n[2],P=n[3];C=l(C,T,F,P,o,7,a[0]),P=l(P,C,T,F,h,12,a[1]),F=l(F,P,C,T,f,17,a[2]),T=l(T,F,P,C,g,22,a[3]),C=l(C,T,F,P,p,7,a[4]),P=l(P,C,T,F,y,12,a[5]),F=l(F,P,C,T,m,17,a[6]),T=l(T,F,P,C,v,22,a[7]),C=l(C,T,F,P,x,7,a[8]),P=l(P,C,T,F,b,12,a[9]),F=l(F,P,C,T,S,17,a[10]),T=l(T,F,P,C,A,22,a[11]),C=l(C,T,F,P,E,7,a[12]),P=l(P,C,T,F,k,12,a[13]),F=l(F,P,C,T,w,17,a[14]),C=c(C,T=l(T,F,P,C,M,22,a[15]),F,P,h,5,a[16]),P=c(P,C,T,F,m,9,a[17]),F=c(F,P,C,T,A,14,a[18]),T=c(T,F,P,C,o,20,a[19]),C=c(C,T,F,P,y,5,a[20]),P=c(P,C,T,F,S,9,a[21]),F=c(F,P,C,T,M,14,a[22]),T=c(T,F,P,C,p,20,a[23]),C=c(C,T,F,P,b,5,a[24]),P=c(P,C,T,F,w,9,a[25]),F=c(F,P,C,T,g,14,a[26]),T=c(T,F,P,C,x,20,a[27]),C=c(C,T,F,P,k,5,a[28]),P=c(P,C,T,F,f,9,a[29]),F=c(F,P,C,T,v,14,a[30]),C=u(C,T=c(T,F,P,C,E,20,a[31]),F,P,y,4,a[32]),P=u(P,C,T,F,x,11,a[33]),F=u(F,P,C,T,A,16,a[34]),T=u(T,F,P,C,w,23,a[35]),C=u(C,T,F,P,h,4,a[36]),P=u(P,C,T,F,p,11,a[37]),F=u(F,P,C,T,v,16,a[38]),T=u(T,F,P,C,S,23,a[39]),C=u(C,T,F,P,k,4,a[40]),P=u(P,C,T,F,o,11,a[41]),F=u(F,P,C,T,g,16,a[42]),T=u(T,F,P,C,m,23,a[43]),C=u(C,T,F,P,b,4,a[44]),P=u(P,C,T,F,E,11,a[45]),F=u(F,P,C,T,M,16,a[46]),C=d(C,T=u(T,F,P,C,f,23,a[47]),F,P,o,6,a[48]),P=d(P,C,T,F,v,10,a[49]),F=d(F,P,C,T,w,15,a[50]),T=d(T,F,P,C,y,21,a[51]),C=d(C,T,F,P,E,6,a[52]),P=d(P,C,T,F,g,10,a[53]),F=d(F,P,C,T,S,15,a[54]),T=d(T,F,P,C,h,21,a[55]),C=d(C,T,F,P,x,6,a[56]),P=d(P,C,T,F,M,10,a[57]),F=d(F,P,C,T,m,15,a[58]),T=d(T,F,P,C,k,21,a[59]),C=d(C,T,F,P,p,6,a[60]),P=d(P,C,T,F,A,10,a[61]),F=d(F,P,C,T,f,15,a[62]),T=d(T,F,P,C,b,21,a[63]),n[0]=n[0]+C|0,n[1]=n[1]+T|0,n[2]=n[2]+F|0,n[3]=n[3]+P|0},bH:function(){var t=this.iM,i=t.words,s=8*this.gH,r=8*t.sigBytes;i[r>>>5]|=128<<24-r%32;var n=e.floor(s/4294967296),o=s;i[15+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),i[14+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(i.length+1),this.yH();for(var a=this.wH,h=a.words,l=0;l<4;l++){var c=h[l];h[l]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return a},clone:function(){var t=n.clone.call(this);return t.wH=this.wH.clone(),t}});function l(t,e,i,s,r,n,o){var a=t+(e&i|~e&s)+r+o;return(a<<n|a>>>32-n)+e}function c(t,e,i,s,r,n,o){var a=t+(e&s|i&~s)+r+o;return(a<<n|a>>>32-n)+e}function u(t,e,i,s,r,n,o){var a=t+(e^i^s)+r+o;return(a<<n|a>>>32-n)+e}function d(t,e,i,s,r,n,o){var a=t+(i^(e|~s))+r+o;return(a<<n|a>>>32-n)+e}i.MD5=n.xH(h),i.HmacMD5=n.MH(h)})(Math),t.MD5}(MS.exports),function(t){return i=(e=t).lib,s=i.WordArray,r=i.Hasher,n=e.algo,o=[],a=n.SHA1=r.extend({SH:function(){this.wH=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},mH:function(t,e){for(var i=this.wH.words,s=i[0],r=i[1],n=i[2],a=i[3],h=i[4],l=0;l<80;l++){if(l<16)o[l]=0|t[e+l];else{var c=o[l-3]^o[l-8]^o[l-14]^o[l-16];o[l]=c<<1|c>>>31}var u=(s<<5|s>>>27)+h+o[l];u+=l<20?1518500249+(r&n|~r&a):l<40?1859775393+(r^n^a):l<60?(r&n|r&a|n&a)-1894007588:(r^n^a)-899497514,h=a,a=n,n=r<<30|r>>>2,r=s,s=u}i[0]=i[0]+s|0,i[1]=i[1]+r|0,i[2]=i[2]+n|0,i[3]=i[3]+a|0,i[4]=i[4]+h|0},bH:function(){var t=this.iM,e=t.words,i=8*this.gH,s=8*t.sigBytes;return e[s>>>5]|=128<<24-s%32,e[14+(s+64>>>9<<4)]=Math.floor(i/4294967296),e[15+(s+64>>>9<<4)]=i,t.sigBytes=4*e.length,this.yH(),this.wH},clone:function(){var t=r.clone.call(this);return t.wH=this.wH.clone(),t}}),e.SHA1=r.xH(a),e.HmacSHA1=r.MH(a),t.SHA1;var e,i,s,r,n,o,a}(MS.exports),zS=(DS=MS.exports).lib.Base,IS=DS.enc.Utf8,DS.algo.HMAC=zS.extend({init:function(t,e){t=this.CH=new t.init,"string"==typeof e&&(e=IS.parse(e));var i=t.blockSize,s=4*i;e.sigBytes>s&&(e=t.finalize(e)),e.clamp();for(var r=this.TH=e.clone(),n=this.FH=e.clone(),o=r.words,a=n.words,h=0;h<i;h++)o[h]^=1549556828,a[h]^=909522486;r.sigBytes=n.sigBytes=s,this.reset()},reset:function(){var t=this.CH;t.reset(),t.update(this.FH)},update:function(t){return this.CH.update(t),this},finalize:function(t){var e=this.CH,i=e.finalize(t);return e.reset(),e.finalize(this.TH.clone().concat(i))}}),function(t){return s=(i=(e=t).lib).Base,r=i.WordArray,o=(n=e.algo).MD5,a=n.EvpKDF=s.extend({cfg:s.extend({keySize:4,hasher:o,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var i,s=this.cfg,n=s.hasher.create(),o=r.create(),a=o.words,h=s.keySize,l=s.iterations;a.length<h;){i&&n.update(i),i=n.update(t).finalize(e),n.reset();for(var c=1;c<l;c++)i=n.finalize(i),n.reset();o.concat(i)}return o.sigBytes=4*h,o}}),e.EvpKDF=function(t,e,i){return a.create(i).compute(t,e)},t.EvpKDF;var e,i,s,r,n,o,a}(MS.exports),function(t){t.lib.Cipher||function(){var e=t,i=e.lib,s=i.Base,r=i.WordArray,n=i.BufferedBlockAlgorithm,o=e.enc;o.Utf8;var a=o.Base64,h=e.algo.EvpKDF,l=i.Cipher=n.extend({cfg:s.extend(),createEncryptor:function(t,e){return this.create(this.IH,t,e)},createDecryptor:function(t,e){return this.create(this.PH,t,e)},init:function(t,e,i){this.cfg=this.cfg.extend(i),this.LH=t,this.BH=e,this.reset()},reset:function(){n.reset.call(this),this.SH()},process:function(t){return this.vH(t),this.yH()},finalize:function(t){return t&&this.vH(t),this.bH()},keySize:4,ivSize:4,IH:1,PH:2,xH:function(){function t(t){return"string"==typeof t?v:y}return function(e){return{encrypt:function(i,s,r){return t(s).encrypt(e,i,s,r)},decrypt:function(i,s,r){return t(s).decrypt(e,i,s,r)}}}}()});i.StreamCipher=l.extend({bH:function(){return this.yH(!0)},blockSize:1});var c=e.mode={},u=i.BlockCipherMode=s.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this.DH=t,this.RH=e}}),d=c.CBC=function(){var t=u.extend();function e(t,e,i){var s,r=this.RH;r?(s=r,this.RH=void 0):s=this.EH;for(var n=0;n<i;n++)t[e+n]^=s[n]}return t.Encryptor=t.extend({processBlock:function(t,i){var s=this.DH,r=s.blockSize;e.call(this,t,i,r),s.encryptBlock(t,i),this.EH=t.slice(i,i+r)}}),t.Decryptor=t.extend({processBlock:function(t,i){var s=this.DH,r=s.blockSize,n=t.slice(i,i+r);s.decryptBlock(t,i),e.call(this,t,i,r),this.EH=n}}),t}(),f=(e.pad={}).Pkcs7={pad:function(t,e){for(var i=4*e,s=i-t.sigBytes%i,n=s<<24|s<<16|s<<8|s,o=[],a=0;a<s;a+=4)o.push(n);var h=r.create(o,s);t.concat(h)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}};i.BlockCipher=l.extend({cfg:l.cfg.extend({mode:d,padding:f}),reset:function(){var t;l.reset.call(this);var e=this.cfg,i=e.iv,s=e.mode;this.LH==this.IH?t=s.createEncryptor:(t=s.createDecryptor,this.pH=1),this.OH&&this.OH.zH==t?this.OH.init(this,i&&i.words):(this.OH=t.call(s,this,i&&i.words),this.OH.zH=t)},mH:function(t,e){this.OH.processBlock(t,e)},bH:function(){var t,e=this.cfg.padding;return this.LH==this.IH?(e.pad(this.iM,this.blockSize),t=this.yH(!0)):(t=this.yH(!0),e.unpad(t)),t},blockSize:4});var g=i.CipherParams=s.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),p=(e.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,i=t.salt;return(i?r.create([1398893684,1701076831]).concat(i).concat(e):e).toString(a)},parse:function(t){var e,i=a.parse(t),s=i.words;return 1398893684==s[0]&&1701076831==s[1]&&(e=r.create(s.slice(2,4)),s.splice(0,4),i.sigBytes-=16),g.create({ciphertext:i,salt:e})}},y=i.SerializableCipher=s.extend({cfg:s.extend({format:p}),encrypt:function(t,e,i,s){s=this.cfg.extend(s);var r=t.createEncryptor(i,s),n=r.finalize(e),o=r.cfg;return g.create({ciphertext:n,key:i,iv:o.iv,algorithm:t,mode:o.mode,padding:o.padding,blockSize:t.blockSize,formatter:s.format})},decrypt:function(t,e,i,s){return s=this.cfg.extend(s),e=this.VH(e,s.format),t.createDecryptor(i,s).finalize(e.ciphertext)},VH:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),m=(e.kdf={}).OpenSSL={execute:function(t,e,i,s){s||(s=r.random(8));var n=h.create({keySize:e+i}).compute(t,s),o=r.create(n.words.slice(e),4*i);return n.sigBytes=4*e,g.create({key:n,iv:o,salt:s})}},v=i.PasswordBasedCipher=y.extend({cfg:y.cfg.extend({kdf:m}),encrypt:function(t,e,i,s){var r=(s=this.cfg.extend(s)).kdf.execute(i,t.keySize,t.ivSize);s.iv=r.iv;var n=y.encrypt.call(this,t,e,r.key,s);return n.mixIn(r),n},decrypt:function(t,e,i,s){s=this.cfg.extend(s),e=this.VH(e,s.format);var r=s.kdf.execute(i,t.keySize,t.ivSize,e.salt);return s.iv=r.iv,y.decrypt.call(this,t,e,r.key,s)}})}()}(MS.exports),_S.exports=function(t){return function(){var e=t,i=e.lib.BlockCipher,s=e.algo,r=[],n=[],o=[],a=[],h=[],l=[],c=[],u=[],d=[],f=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var i=0,s=0;for(e=0;e<256;e++){var g=s^s<<1^s<<2^s<<3^s<<4;g=g>>>8^255&g^99,r[i]=g,n[g]=i;var p=t[i],y=t[p],m=t[y],v=257*t[g]^16843008*g;o[i]=v<<24|v>>>8,a[i]=v<<16|v>>>16,h[i]=v<<8|v>>>24,l[i]=v,v=16843009*m^65537*y^257*p^16843008*i,c[g]=v<<24|v>>>8,u[g]=v<<16|v>>>16,d[g]=v<<8|v>>>24,f[g]=v,i?(i=p^t[t[t[m^p]]],s^=t[t[s]]):i=s=1}}();var g=[0,1,2,4,8,16,32,64,128,27,54],p=s.AES=i.extend({SH:function(){if(!this.NH||this.GH!==this.BH){for(var t=this.GH=this.BH,e=t.words,i=t.sigBytes/4,s=4*((this.NH=i+6)+1),n=this.$H=[],o=0;o<s;o++)o<i?n[o]=e[o]:(l=n[o-1],o%i?i>6&&o%i==4&&(l=r[l>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l]):(l=r[(l=l<<8|l>>>24)>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l],l^=g[o/i|0]<<24),n[o]=n[o-i]^l);for(var a=this.UH=[],h=0;h<s;h++){if(o=s-h,h%4)var l=n[o];else l=n[o-4];a[h]=h<4||o<=4?l:c[r[l>>>24]]^u[r[l>>>16&255]]^d[r[l>>>8&255]]^f[r[255&l]]}}},encryptBlock:function(t,e){this.YH(t,e,this.$H,o,a,h,l,r)},decryptBlock:function(t,e){var i=t[e+1];t[e+1]=t[e+3],t[e+3]=i,this.YH(t,e,this.UH,c,u,d,f,n),i=t[e+1],t[e+1]=t[e+3],t[e+3]=i},YH:function(t,e,i,s,r,n,o,a){for(var h=this.NH,l=t[e]^i[0],c=t[e+1]^i[1],u=t[e+2]^i[2],d=t[e+3]^i[3],f=4,g=1;g<h;g++){var p=s[l>>>24]^r[c>>>16&255]^n[u>>>8&255]^o[255&d]^i[f++],y=s[c>>>24]^r[u>>>16&255]^n[d>>>8&255]^o[255&l]^i[f++],m=s[u>>>24]^r[d>>>16&255]^n[l>>>8&255]^o[255&c]^i[f++],v=s[d>>>24]^r[l>>>16&255]^n[c>>>8&255]^o[255&u]^i[f++];l=p,c=y,u=m,d=v}p=(a[l>>>24]<<24|a[c>>>16&255]<<16|a[u>>>8&255]<<8|a[255&d])^i[f++],y=(a[c>>>24]<<24|a[u>>>16&255]<<16|a[d>>>8&255]<<8|a[255&l])^i[f++],m=(a[u>>>24]<<24|a[d>>>16&255]<<16|a[l>>>8&255]<<8|a[255&c])^i[f++],v=(a[d>>>24]<<24|a[l>>>16&255]<<16|a[c>>>8&255]<<8|a[255&u])^i[f++],t[e]=p,t[e+1]=y,t[e+2]=m,t[e+3]=v},keySize:8});e.AES=i.xH(p)}(),t.AES}(MS.exports);var VS=_S.exports,NS={exports:{}};NS.exports=function(t){return t.mode.CTR=(i=(e=t.lib.BlockCipherMode.extend()).Encryptor=e.extend({processBlock:function(t,e){var i=this.DH,s=i.blockSize,r=this.RH,n=this.jH;r&&(n=this.jH=r.slice(0),this.RH=void 0);var o=n.slice(0);i.encryptBlock(o,0),n[s-1]=n[s-1]+1|0;for(var a=0;a<s;a++)t[e+a]^=o[a]}}),e.Decryptor=i,e),t.mode.CTR;var e,i}(MS.exports);var OS=NS.exports,YS={exports:{}};YS.exports=function(t){return function(){if("function"==typeof ArrayBuffer){var e=t.lib.WordArray,i=e.init,s=e.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var e=t.byteLength,s=[],r=0;r<e;r++)s[r>>>2]|=t[r]<<24-r%4*8;i.call(this,s,e)}else i.apply(this,arguments)};s.prototype=e}}(),t.lib.WordArray}(MS.exports);var GS=YS.exports,XS={exports:{}};XS.exports=function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding}(MS.exports);var US=XS.exports;const HS="aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvbGljZW5zZXMvYXBwLWRlcGxveW1lbnQv",jS=9e5,WS={"-4":["MDQxMmQ1MWU5MjFhYTMzODUwMWE4ZGYzN2ViZTE4NTU3ZDViYmRlZDg1Yzk0OGI3YTJkMDBmZTNhZGVlMjdjY2VmNzBiMWVlOWI3MDZjMTIwYTAzZDZlZTNkNmYyOTc5Y2E2NGEzN2Y3YjY4N2E1ZjljZWY2ODYxN2I1NWU5ZmJjMA=="],"-3":["MjAyNTA5MDU="],"-2":["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2Vzc2lvbg==","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvdHJvdWJsZXNob290aW5nL3Jlc3RyaWN0ZWQtZmVhdHVyZXMv","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzLw==","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vcHl0aG9uLWNoYXJ0cy8="],"-1":["WE1MSHR0cFJlcXVlc3Q=","ZG9jdW1lbnQ=","ZGVmYXVsdFZpZXc=","YQ==","Yg==","bGljZW5zZV9leHBpcmF0aW9uX2RhdGU=","bG9jYXRpb24=","aG9zdG5hbWU=","dGVzdF9kb21haW4=","ZG9tYWlucw==","Y3J5cHRv","U2lnbmF0dXJl","RUNEU0E=","U0hBMjI0d2l0aEVDRFNB","YWxn","Y3VydmU=","c2VjcDI1Nmsx","YWRkRXZlbnRMaXN0ZW5lcg==","cmVtb3ZlRXZlbnRMaXN0ZW5lcg==","bG9hZGVuZA==","ZXJyb3I=","YWJvcnQ=","dGltZW91dA==","cmVzcG9uc2VUZXh0","Q29udGVudC1UeXBl","YXBwbGljYXRpb24vanNvbg==","TWVzc2FnZURpZ2VzdA==","c2hhMjU2","Y3J5cHRvanM=","dXBkYXRlU3RyaW5n","ZGlnZXN0","Y29tcGFueQ==","YXBwVGl0bGU=","bGNqcy1zZXNzaW9u","bG9jYWxTdG9yYWdl","Z2V0SXRlbQ==","c2V0SXRlbQ==","ZA==","dA==","bGNqcy1zZXNzaW9uLTI=","aG9zdA==","dG9w"],0:["TGljZW5zZQ==","IA==","a2V5","aGFz","ZXhwaXJlZA==","Lg==","dmVyc2lvbg==","aXM=","dG9v","bmV3","b2xk","b3I=","aW52YWxpZA==","MDAwMQ==","SW52YWxpZA==","bnVtYmVy","b2Y=","ZG9tYWlucw==","ZGVwbG95bWVudA==","aW4=","ZG9tYWlu","RGVwbG95bWVudA==","ZG9tYWlu","dmFsaWRhdGlvbg==","ZmFpbGVk","Og==","UE9TVA==","c2VydmVy","cmVzcG9uZGVk","d2l0aA==","dW5leHBlY3RlZA==","dmFsdWU=","cmVxdWVzdA==","VEVTVA==","REVQTE9ZTUVOVA==","S2V5","VGFtcGVyaW5n","YmVlbg==","ZGV0ZWN0ZWQ=","TWlzc2luZw==","TGljZW5zZQ==","aW5mb3JtYXRpb24=","ZG9lcw==","bm90","aW5jbHVkZQ==","cGVybWlzc2lvbg==","dG8=","dXNl","Q2hhcnQ=","M0Q=","WFk=","RGF0YUdyaWQ=","TWFw","UG9sYXI=","RnVubmVs","R2F1Z2U=","UGll","UHlyYW1pZA==","U3BpZGVy","Zm9y","dGhpcw==","VHJhZGluZw==","ZmVhdHVyZXM=","Q2xpY2s=","aGVyZQ==","bW9yZQ==","c3VwcGxpZWQ=","Z2V0","bGljZW5zZQ==","VHJlZQ==","dW5leHBlY3RlZA==","ZXJyb3I="],1:["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2FuZGJveA==","aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vcGx1Z2lu"]},ZS=Ur,JS=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.slice(1).reduce((t,i)=>t+ZS.atob(WS[e[0]][i].toString()),"")};let qS,QS,KS,$S=new Uint8Array([]);const tA=t=>t&&"cGx1Z2lu"in t&&"cHl0aG9u"===t.cGx1Z2lu?JS(-2,3):JS(-2,2);class eA{set e(t){qS=t}get e(){QS={uo:!1,do:!1,fo:!1,Ao:!1,vo:!1,yo:!1,po:!1,mo:!1,So:!1,bo:!1,xo:!1,Mo:!1,wo:!1,_o:!1,ko:!1,Co:!1,To:!1,Fo:!1,Io:!1,Po:!1,Lo:!1,Bo:!1,Do:!1,Ro:!1,Eo:!1,Oo:!1};const t=$S.length,e=t>=1?$S[0]:void 0,i=t>=2?$S[1]:void 0,s=t>=3?$S[2]:void 0,r=t>=4?$S[3]:void 0;return void 0!==e&&(QS.uo=!!(1&e),QS.do=!!(2&e),QS.fo=!!(4&e),QS.Ao=!!(8&e),QS.vo=!!(16&e),QS.yo=!!(32&e),QS.po=!!(64&e),QS.mo=!!(128&e)),void 0!==i&&(QS.So=!!(1&i),QS.bo=!!(2&i),QS.xo=!!(4&i),QS.Mo=!!(8&i),QS.wo=!!(16&i),QS._o=!!(32&i),QS.ko=!!(64&i),QS.Co=!!(128&i)),void 0!==s&&(QS.To=!!(1&s),QS.Fo=!!(2&s),QS.Io=!!(4&s),QS.Po=!!(8&s),QS.Lo=!!(16&s),QS.Bo=!!(32&s),QS.Do=!!(64&s),QS.Ro=!!(128&s)),void 0!==r&&(QS.Eo=!!(1&r)),QS.yo}set l(t){KS=t}get l(){return KS}}let iA=!1;const sA=(t,e)=>{const i=new RegExp(".{".concat(e,"}"),"g");return(t.match(i)||[]).map(t=>parseInt(t,16))},rA=t=>{if(4===t.byteLength)return"".concat(t[0].toString().padStart(2,"0")).concat(t[1].toString().padStart(2,"0")).concat(t[2].toString().padStart(2,"0")).concat(t[3].toString().padStart(2,"0"))},nA=t=>t.getFullYear().toString()+(t.getMonth()+1).toString().padStart(2,"0")+t.getDate().toString().padStart(2,"0"),oA=t=>{const e={},i=t.split("-");if(3!==i.length)return{HH:JS(0,0,1,7,1,12,5)};let s=0;const r=Uint8Array.from(ZS.atob(i[1]),t=>t.charCodeAt(0));s+=1;const n=r.subarray(s,s+=20),o=new DataView(r.buffer).getUint16(s,!0);s+=2;const a=Uint8Array.from(Array(o));for(let g=0;g<o;g+=1)a[g]=r[g+s]^n[g%n.byteLength];const h=new DataView(a.buffer);e.WH=a,s=0;const l=Uint8Array.from(Array(h.getUint16(s,!0)));s+=2,l.set(a.subarray(s,s+=l.byteLength)),$S=new Uint8Array(l);const c=rA(a.subarray(s,s+=4)),u=JS(-3,0);if(!c)return{HH:JS(0,0,1,7,1,12,5)};if(c<u)return{HH:JS(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5)};if(8&l[0]){const t=rA(a.subarray(s,s+=4)),e=nA(new Date);if(!t)return{HH:JS(0,0,1,7,1,12,5)};if(t<e)return{HH:JS(0,0,1,2,1,3,1,4,5),XH:tA()}}e.ZH=s;const d="".concat(i[0],"-").concat(i[1]),f=Array.prototype.reduce.call(ZS.atob(i[2]),(t,e)=>t+"0".concat(e.charCodeAt(0).toString(16)).slice(-2),"");return lA(d,f)?e:{HH:JS(0,0,1,7,1,12,5)}},aA=t=>{const e=t.slice(0,4);let i=t.slice(5);switch(e){case"0001":{i=i.replace(/-/g,"");const t=Uint8Array.from(sA(i,2)),e=t.slice(36,40),s=new Uint8Array(4),r=(t=>{let e;const i=[];for(let r=0;r<256;r+=1){e=r;for(let t=0;t<8;t+=1)e=1&e?3988292384^e>>>1:e>>>1;i[r]=e}let s=-1;for(let r=0;r<t.length;r+=1)s=s>>>8^i[255&(s^t[r])];return~s>>>0})(t.slice(0,36));new DataView(s.buffer).setUint32(0,r,!0);const n=t.slice(28,34);let o=0;for(let i=n.length-1;i>0;i-=1)o+=n[i]*2**(8*i);const a=new Date(o);if(nA(a)<JS(-3,0))return{HH:JS(0,0,1,2,1,3,1,4,5),XH:tA()};if(e.every((t,e)=>s[e]===t))return{};break}case"0002":return oA(t);default:return{HH:JS(0,0,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}return{HH:JS(0,0,1,2,1,7,1,12,5)}},hA=t=>{if(!t)return{HH:JS(0,14,1,15,1,16,1,17,1,19,1,18,1,2,5)};const e=(t[JS(-1,9)]||t[JS(-1,37)]).map(t=>(t||"").trim()),i=ZS[JS(-1,41)];try{if(i&&e.indexOf(i[JS(-1,6)][JS(-1,7)])>-1)return{JH:!0}}catch(t){}if(e.indexOf(ZS[JS(-1,6)][JS(-1,7)])>-1)return{JH:!0};const s=e.filter(t=>t.indexOf("*")>-1);try{if(i&&gA(i[JS(-1,6)][JS(-1,7)],s))return{JH:!0}}catch(t){}if(gA(ZS[JS(-1,6)][JS(-1,7)],s))return{JH:!0};const r=t[JS(-1,8)]||t[JS(-1,38)];if(""!==r&&null!=r){try{if(i&&gA(i[JS(-1,6)][JS(-1,7)],[r]))return{JH:!1}}catch(t){}if(gA(ZS[JS(-1,6)][JS(-1,7)],[r]))return{JH:!1};try{if(i&&r===i[JS(-1,6)][JS(-1,7)])return{JH:!1}}catch(t){}if(r===ZS[JS(-1,6)][JS(-1,7)])return{JH:!1}}return{HH:JS(0,14,1,20,5),XH:"aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvbGljZW5zZXMvd2ViLWRlcGxveW1lbnQv"}},lA=(t,e)=>{const i=new ES("secp256k1").keyFromPublic(JS(-4,0),"hex"),s=FS(t).toString();return i.verify(s,e)},cA=t=>{switch(t.slice(0,4)){case"0001":return(t=>{let e,i="";try{const e=t.split("-"),s=e[1],r=e[2],n=e[3];if(!lA(r,n))return{HH:JS(0,21,1,2,1,7,1,12,5)};const o=BS.parse(r);i=VS.decrypt({ciphertext:BS.parse(s)},o,{mode:OS,padding:US,iv:BS.parse("00000000000000000000000000000001")}).toString(RS)}catch(t){return{HH:JS(0,21,1,2,1,7,1,12,5)}}try{e=JSON.parse(i)}catch(t){return{HH:JS(0,21,1,2,1,7,1,12,5)}}if(void 0===e[JS(-1,5)]||null===e[JS(-1,4)]||!e[JS(-1,9)])return{HH:JS(0,21,1,2,1,7,1,12,5)};const s=parseInt(JS(-3,0),10)||Number(parseInt(JS(-3,0),10));return e[JS(-1,5)]<s?{HH:JS(0,21,1,2,1,3,1,4,5)}:hA(e)})(t);case"0002":return(t=>{const e=oA(t),i=e.WH,s=e.ZH;if(e.HH||void 0===i||void 0===s)return e;let r,n="";try{const t=i.slice(e.ZH,s+16),r=new DataView(t.buffer),o=new Int32Array(4);for(let e=0;e<o.length;e+=1)o[e]=r.getInt32(4*e,!1);const a=GS.create(Array.from(o)),h=s+16,l=i.slice(h,i.length),c=new DataView(l.buffer),u=new Int32Array(Math.floor(l.byteLength/4));for(let e=0;e<u.length;e+=1)u[e]=c.getInt32(4*e,!1);const d=GS.create(Array.from(u)),f=VS.decrypt({ciphertext:d},a,{mode:OS,padding:US,iv:BS.parse("00000000000000000000000000000001")});n=ZS.atob(f.toString(RS))}catch(t){return{HH:JS(0,21,1,2,1,7,1,12,5)}}try{r=JSON.parse(n)}catch(t){return{HH:JS(0,21,1,2,1,7,1,12,5)}}return r[JS(-1,37)]?hA(r):{HH:JS(0,21,1,2,1,7,1,12,5)}})(t);default:return{HH:JS(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}},uA=(t,e)=>{switch(t.slice(0,4)){case"0001":return((t,e)=>{if(!e)return{HH:JS(0,39,1,40,1,41,5),XH:HS};const i=t.split("-"),s=i[1].slice(1),r=i[2],n=i[3];if(!lA("".concat(s,"-").concat(r),n))return{HH:JS(0,21,1,2,1,7,1,12,5)};const o=Uint8Array.from(sA(r,2));let a=0;for(let g=o.length-1;g>0;g-=1)a+=o[g]*2**(8*g);if(a<(parseInt(JS(-3,0),10)||Number(parseInt(JS(-3,0),10))))return{HH:JS(0,21,1,2,1,3,1,4,5)};const h=Int32Array.from(sA(s,8)),l=TS(e[JS(-1,31)]).toString(BS),c=Int32Array.from(sA(l,8)),u=TS(e[JS(-1,32)]).toString(BS),d=Int32Array.from(sA(u,8)),f=new Int32Array(c.length);for(let g=0;g<f.length;g+=1)f[g]=c[g]^d[g];return h.every((t,e)=>f[e]===t)?{}:{HH:JS(0,21,1,2,1,7,1,12,5)}})(t,e);case"0002":return((t,e)=>{if(!e)return{HH:JS(0,39,1,40,1,41,5),XH:HS};const i=oA(t),s=i.WH,r=i.ZH;if(i.HH||void 0===s||void 0===r)return i;const n=s.slice(r,s.length),o=new DataView(n.buffer),a=new Int32Array(8);for(let f=0;f<a.length;f+=1)a[f]=o.getInt32(4*f,!1);const h=TS(e[JS(-1,31)]).toString(BS),l=Int32Array.from(sA(h,8)),c=TS(e[JS(-1,32)]).toString(BS),u=Int32Array.from(sA(c,8)),d=new Int32Array(l.length);for(let f=0;f<d.length;f+=1)d[f]=l[f]^u[f];return a.every((t,e)=>d[e]===t)?{}:{HH:JS(0,21,1,2,1,7,1,12,5)}})(t,e);default:return{HH:JS(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}},dA=function(t,e){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments.length>3?arguments[3]:void 0;iA=!1,e.Va();const r=e.Dn,n=!!r&&(r===Ur.document.body||Ur.document.body.contains(r)),o=r&&n?r:document.body;if(void 0===Array.from(o.children).find(t=>"lcjs-error"===t.id)){const r=Ur.document.createElement("div");r.id="lcjs-error",o.append(r),r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.width="100%",r.style.height="100%",r.style.backgroundColor="black",r.style.boxSizing="border-box",r.style.padding="20px",r.style.font="Arial",r.style.fontSize="20px";let n,a=(t||"LICENSE_ERROR").split("_").join(" ");if(a=(i?JS(0,0,1,2,1,23,1,24,25,1):"")+a.charAt(0).toUpperCase()+a.substr(1),s){const t=Ur.document.createElement("a");t.href=s,n=t}else n=Ur.document.createElement("p1");r.append(n),n.innerHTML=a,n.style.color="red",e.yj()&&ZS.console.error(a)}},fA=(t,e,i)=>{e?(t[JS(-1,17)](JS(-1,19),i),t[JS(-1,17)](JS(-1,20),i),t[JS(-1,17)](JS(-1,21),i),t[JS(-1,17)](JS(-1,22),i)):(t[JS(-1,18)](JS(-1,19),i),t[JS(-1,18)](JS(-1,20),i),t[JS(-1,18)](JS(-1,21),i),t[JS(-1,18)](JS(-1,22),i))},gA=(t,e)=>{const i=t.split(".").reverse();return e.some(t=>{const e=t.split(".").reverse();let s=!1;const r=e.findIndex(t=>"*"===t),n=i.every((t,i)=>{if(!s){if(!(i<e.length))return!1;if(s="*"===e[i]&&i+1>2,!s&&t!==e[i])return!1}return!0});return!(r>i.length-1||!n)})},pA=new Map;var yA=i(507);const mA=(0,s.createContext)(null);function vA(t){const e=(0,s.useRef)(null),[i,r]=(0,s.useState)(void 0);return(0,s.useEffect)(()=>{if(!e.current)try{e.current=((t,e)=>{let i="object"==typeof t?t.license:t;i&&(i=i.trim());const s="object"==typeof t?t.licenseInformation:e,r="object"==typeof t?t:void 0,n=new eA;n.e=i;let o=pA.get(i||"E");return o||(o=((t,e)=>{let i,s,r=!1,n=!1,o=!1,a=!1,h="",l=!1,c=!1,u=!1;try{if(qS){const s=(()=>{if(!qS)return;const t=qS.split("-");if(t.length>0)switch(t[0]){case"0001":return"0001";case"0002":return"0002";case"T001":return"T001";case"P001":return"P001";default:return}})(),h=t&&"cGx1Z2lu"in t;if("0001"===s){$S=new Uint8Array([2]);const e=(()=>{if(!qS)return;const t=qS.split("-");return 4===t.length?t[1].startsWith("m")?2:1:0})();if(1===e){const t=cA(qS);o=!t.JH,i=t,r=!0}else 2===e?(i=uA(qS,t),n=!0):(iA=!0,i=aA(qS),a=!0);h&&(i={HH:JS(0,0,1,7,1,12,5)})}else if("0002"===s){const e=(()=>{if(!qS)return;const t=qS.split("-");return t.length>=2?Uint8Array.from(ZS.atob(t[1]),t=>t.charCodeAt(0))[0]:void 0})();if(104===e)iA=!0,i=aA(qS),a=!0;else if(189===e){const t=cA(qS);o=!t.JH,i=t,r=!0}else 159===e?(i=uA(qS,t),n=!0):i={HH:JS(0,0,1,7,1,12,5)};const s=$S.length>3&&2&$S[3];(s&&!h||!s&&h||s&&h&&"cHl0aG9u"!==t.cGx1Z2lu)&&(i={HH:JS(0,0,1,7,1,12,5)})}else if("T001"===s){const s=((t,e)=>{const i=qS.split("-");if(3!==i.length)return{HH:JS(0,0,1,7,1,12,5)};const s="".concat(i[1]),r=Array.prototype.reduce.call(ZS.atob(i[2]),(t,e)=>t+"0".concat(e.charCodeAt(0).toString(16)).slice(-2),"");if(!lA(s,r))return{HH:JS(0,0,1,7,1,12,5)};let n=0;const o=Uint8Array.from(ZS.atob(i[1]),t=>t.charCodeAt(n)),a=o.subarray(n,n+=20),h=new DataView(o.buffer).getUint16(n,!0);n+=2;const l=Uint8Array.from(Array(h));for(let x=0;x<h;x+=1)l[x]=o[x+n]^a[x%a.byteLength];n=0;const c=new DataView(l.buffer),u=rA(l.subarray(n,n+=4)),d=JS(-3,0);if(!u)return{HH:JS(0,0,1,7,1,12,5)};if(u<d)return{HH:JS(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5)};const f=new Date,g=new Date;f.setDate(f.getDate()+1),g.setDate(g.getDate()-1);const p=nA(g),y=nA(f);if(u<p||u>y)return{HH:JS(0,0,1,2,1,3,1,4,5)};const m=c.getUint16(n,!0),v=l.subarray(n+=2,n+m);if($S=new Uint8Array(v),e&&"dHJhZGVy"in e&&"dGVjaG5pY2FsIGFuYWx5c2lz"===e.dHJhZGVy)return{QH:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="};if(e&&"logoGraphic"in e&&e.logoGraphic){const t=e.logoGraphic.split("-");return 3===t.length&&lA(t[0],t[2])?{QH:t[0]}:{HH:JS(0,0,1,7,1,12,5)}}return{HH:JS(0,0,1,7,1,12,5)}})(0,t);i=s;const n=s.QH;n&&e?("string"==typeof n&&(e.l=n),r=!0):i={HH:JS(0,0,1,7,1,12,5)}}else"P001"===s?(i=((t,e)=>{const i=qS.split("-");if(3!==i.length)return{HH:JS(0,0,1,7,1,12,5)};const s="".concat(i[0],"-").concat(i[1]),r=Array.prototype.reduce.call(ZS.atob(i[2]),(t,e)=>t+"0".concat(e.charCodeAt(0).toString(16)).slice(-2),"");if(!lA(s,r))return{HH:JS(0,0,1,7,1,12,5)};let n=0;const o=Uint8Array.from(ZS.atob(i[1]),t=>t.charCodeAt(0));n+=1;const a=o.subarray(n,n+=20),h=new DataView(o.buffer).getUint16(n,!0);n+=2;const l=Uint8Array.from(Array(h));for(let f=0;f<h;f+=1)l[f]=o[f+n]^a[f%a.byteLength];n=0;const c=new DataView(l.buffer).getUint16(n,!0);n+=2;const u=l.subarray(n,c+n),d=new TextDecoder("utf-8").decode(u);return e&&"cGx1Z2lu"in e&&d===ZS.atob(e.cGx1Z2lu)?($S=new Uint8Array([38]),{}):{HH:JS(0,0,1,7,1,12,5)}})(0,t),!i.HH&&e&&(r=!0,c=!0)):i={HH:JS(0,0,1,7,1,12,5)}}else{const e=/^(10\.|172\.(1[6-9]|2[0-9]|3[0-1])|192\.168)\./;["localhost","127.0.0.1","::1"].includes(ZS[JS(-1,6)][JS(-1,7)])||e.test(ZS[JS(-1,6)][JS(-1,7)])?i={HH:JS(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68),XH:tA(t)}:ZS[JS(-1,6)][JS(-1,40)]===ZS.atob("c3RhY2tzbmlwcGV0cy5uZXQ=")?(u=!0,l=!1,$S=new Uint8Array([38]),i={}):(u=!0,l=!0,$S=new Uint8Array([38]),i={})}}catch(t){i={HH:JS(0,0,1,7,1,12,5,1,70,1,71,5)}}try{a&&(s=ZS[JS(-1,34)][JS(-1,35)](JS(-1,39))||void 0)}catch(t){ZS.console.error(t)}let d=!1;if(s){const t=s.split("-");if(2===t.length&&lA(t[0],t[1])){const[e,i]=t[0].split(":").map(t=>Number(t));Date.now()-i<.95*e*1e3&&(d=!0)}}const f=!(u||l||c||i.HH||r||n||d),g=(()=>{const t=new(ZS[JS(-1,0)]);return t.open(JS(0,26),JS(-2,0)),t.setRequestHeader(JS(-1,24),JS(-1,25)),t.withCredentials=!0,t})(),p=new Ar;if(f){let t;try{t=parseInt(qS?qS.split("-")[1]:Math.floor(1e6*Math.random()).toString(),16)}catch(e){t=Math.floor(1e6*Math.random())}const i=Math.floor(1e6*Math.random());h=(t^i).toString();const s={};let r="",n="",o="";qS=qS||"";const a=JS(-4,0);for(let e=0;e<qS.length;e+=1){const t=qS.charCodeAt(e)^a.charCodeAt(e);r+=String.fromCharCode(t)}const l=JS(-3,0);for(let e=0;e<l.length;e+=1)n+=String.fromCharCode(l.charCodeAt(e)^a.charCodeAt(e));for(let e=0;e<h.length;e+=1)o+=String.fromCharCode(h.charCodeAt(e)^a.charCodeAt(e));s[JS(-1,3)]=ZS.btoa(r),s[JS(-1,4)]=ZS.btoa(n),s.h=ZS.btoa(o),s.v=3,s.s=ZS[JS(-1,34)][JS(-1,35)](JS(-1,33))||void 0,g.send(JSON.stringify(s))}return(r,n)=>{const a=[],u={ka:t=>{a.indexOf(t)>=0||(a.push(t),d())},Ta:p},d=()=>{a.forEach(t=>{const e=m(t);if(!e)return;const{KH:i,qH:s}=e,r=s?JS(-2,1):void 0,n="".concat(JS(0,40,1,42,1,43,1,44,1,45,1,46,1,47,1)).concat(i).concat(r?JS(0,5,1,63,1,64,1,59,1,65,1,41,5):"");dA(n,v,!1,r)})},y=t=>ZS.atob(t),m=t=>{const e=Object.values(_l).includes(t)?t:void 0;if(e){switch(t){case _l.fo:return QS.uo||QS.fo?void 0:{KH:y(e),qH:!0};case _l.po:return QS.uo||QS.po?void 0:{KH:y(e),qH:!0};case _l.mo:return QS.uo||QS.do||QS.mo?void 0:{KH:y(e),qH:!0};case _l.do:return QS.uo||QS.do?void 0:{KH:y(e),qH:!0};case _l.wo:return QS.uo||QS.do||QS.wo?void 0:{KH:y(e),qH:!0};case _l.Co:return QS.uo||QS.do||QS.Co?void 0:{KH:y(e),qH:!0};case _l.Po:return QS.uo||QS.do||QS.Po?void 0:{KH:y(e),qH:!0};case _l.Bo:return QS.uo||QS.do||QS.Bo?void 0:{KH:y(e),qH:!0};case _l.Do:return QS.uo||QS.do||QS.Do?void 0:{KH:y(e),qH:!0};case _l.Lo:return QS.uo||QS.do||QS.Lo?void 0:{KH:y(e),qH:!0};case _l.bo:return QS.uo||QS.do||QS.bo?void 0:{KH:y(e),qH:!0};case _l.ko:return QS.uo||QS.do||QS.ko?void 0:{KH:y(e),qH:!0};case _l.Mo:return QS.uo||QS.do||QS.Mo?void 0:{KH:y(e),qH:!0};case _l.To:return QS.uo||QS.do||QS.To?void 0:{KH:y(e),qH:!0};case _l.Io:return QS.uo||QS.do||QS.Io?void 0:{KH:y(e),qH:!0};case _l.Fo:return QS.uo||QS.do||QS.Fo?void 0:{KH:y(e),qH:!0};case _l.So:return QS.uo||QS.do||QS.So?void 0:{KH:y(e),qH:!0};case _l.xo:return QS.uo||QS.do||QS.xo?void 0:{KH:y(e),qH:!0};case _l._o:return QS.uo||QS.do||QS._o?void 0:{KH:y(e),qH:!0};case _l.Ro:return QS.uo||QS.do||QS.Ro?void 0:{KH:y(e),qH:!0};case _l.Eo:return QS.uo||QS.do||QS.Eo?void 0:{KH:y(e),qH:!0};case _l.uo:case _l.Ao:case _l.yo:case _l.vo:case _l.Oo:return}return Gn(0,"")}},v=new sS(n,r,u);Array.from(v.Dn.children).forEach(t=>{"lcjs-error"===t.id&&v.Dn.removeChild(t)}),(null==i?void 0:i.HH)&&dA(i.HH,v,void 0,i.XH);const x=t=>{if("error"===(null==t?void 0:t.type)&&s){const t=s.split("-");if(2===t.length&&lA(t[0],t[1])){const[,e]=t[0].split(":").map(t=>Number(t)),i=Date.now();if(e+jS>i)return iA=!1,void fA(g,!1,b)}}if(g.readyState===ZS[JS(-1,0)].DONE)if(200===g.status){const t=JSON.parse(g[JS(-1,23)]);if(!lA(h+JS(-3,0),t.h)){const t=JS(0,0,1,27,1,28,1,29,1,30,1,31,5);dA(t,v)}ZS[JS(-1,34)][JS(-1,36)](JS(-1,39),t.t),ZS[JS(-1,34)][JS(-1,36)](JS(-1,33),t.s),iA=!1}else{let e=JS(0,0,1,2,1,7,1,12,5);try{e=t&&"loadend"!==t.type?JS(0,0,1,23,1,32,1,24,5):JSON.parse(g[JS(-1,23)]).message,fA(g,!1,b)}catch(t){console.error(t)}dA(e,v,void 0,"aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvbGljZW5zZXMvZGV2ZWxvcGVyLWxpY2Vuc2Vz")}},b=t=>{x(t)};if(fA(g,!0,b),f?setTimeout(()=>{if(iA){let t=!0;if(s){const e=s.split("-");if(2===e.length&&lA(e[0],e[1])){const[,i]=e[0].split(":").map(t=>Number(t)),s=Date.now();i+jS>s&&(t=!1)}}t&&dA(JS(0,25,1,23,1,32,1,24,5),v)}},1e4):fA(g,!1,b),l){const i=(()=>{const t=new(ZS[JS(-1,0)]);return t.open(JS(0,26),JS(1,0)),t.setRequestHeader("Content-Type","text/plain"),t.withCredentials=!0,t})(),s=Array.from({length:10},()=>String.fromCharCode(Math.floor(256*Math.random()))).join(""),r=r=>{if("error"===(null==r?void 0:r.type)){const e=JS(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);dA(e,v,!1,tA(t)),fA(g,!1,n)}if(i.readyState===ZS.XMLHttpRequest.DONE){const r=i.getResponseHeader("X-LCJS-SANDBOX-V");if(200!==i.status||r&&"1"!==r){const e=JS(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);dA(e,v,!1,tA(t)),fA(g,!1,n)}else{const r=JSON.parse(i.responseText);if(!lA(s,r.s)){const e=JS(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);dA(e,v,!1,tA(t)),fA(g,!1,n)}void 0!==e&&(e.l=r.l),p.D("logochange",{logoDataURI:r.l})}}else{const e=JS(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);dA(e,v,!1,tA(t)),fA(g,!1,n)}},n=t=>{r(t)};fA(i,!0,n),i.send(s),setTimeout(()=>{if(i.readyState<2){const e=JS(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);dA(e,v,!1,tA(t)),fA(g,!1,n)}},1e4)}if(c){const i=(()=>{const t=new(ZS[JS(-1,0)]);return t.open(JS(0,26),JS(1,1)),t.setRequestHeader(JS(-1,24),JS(-1,25)),t.withCredentials=!0,t})();let s;try{s=parseInt(qS?qS.split("-")[1]:Math.floor(1e6*Math.random()).toString(),16)}catch(t){s=Math.floor(1e6*Math.random())}const r=Math.floor(1e6*Math.random());h=(s^r).toString();const n={};let o="",a="";qS=qS||"";const l=JS(-4,0);for(let t=0;t<qS.length;t+=1){const e=qS.charCodeAt(t)^l.charCodeAt(t);o+=String.fromCharCode(e)}for(let t=0;t<h.length;t+=1)a+=String.fromCharCode(h.charCodeAt(t)^l.charCodeAt(t));n[JS(-1,3)]=ZS.btoa(o),n.h=ZS.btoa(a),n.v=1,i.send(JSON.stringify(n));const c=s=>{var r;if("error"===(null==s?void 0:s.type)){const e=JS(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);dA(e,v,!1,tA(t)),fA(g,!1,u)}if(i.readyState===ZS.XMLHttpRequest.DONE)if(200===i.status){const s=JSON.parse(i.responseText);if(!lA(h,s.h)){const e=JS(0,0,1,7,1,12,5);dA(e,v,!1,tA(t)),fA(g,!1,u)}const r=s.l.split("-"),n=r[0],o=r[1];if(lA(n,o))void 0!==e&&(e.l=n,p.D("logochange",{logoDataURI:n}));else{const e=JS(0,0,1,7,1,12,5);dA(e,v,!1,tA(t))}const a=s.f,l=Uint8Array.from(ZS.atob(a),t=>t.charCodeAt(0));let c=0;const f=l.subarray(c,c+=20),y=new DataView(l.buffer).getUint16(c,!0);c+=2;const m=Uint8Array.from(Array(y));for(let t=0;t<y;t+=1)m[t]=l[t+c]^f[t%f.byteLength];const x=new DataView(m.buffer);c=0;const b=Uint8Array.from(Array(x.getUint16(c,!0)));c+=2,b.set(m.subarray(c,c+=b.byteLength)),$S=new Uint8Array(b),e&&e.e&&d()}else{const e=null!==(r=JSON.parse(i.responseText).message)&&void 0!==r?r:JS(0,0,1,7,1,12,5);dA(e,v,!1,tA(t)),fA(g,!1,u)}else{const e=JS(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);dA(e,v,!1,tA(t)),fA(g,!1,u)}},u=t=>{c(t)};fA(i,!0,u),setTimeout(()=>{if(i.readyState<2){const e=JS(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);dA(e,v,!1,tA(t)),fA(g,!1,u)}},1e4)}return o?(t=>{let e;iA=!1;const i=()=>{e&&(t.wa(e.Ma()),e=void 0);const i=t._t();e=t.SL("deployment test"),e.bn(t.oi).Jr(JS(0,34,1,33)).ih({x:i.x/2,y:i.y/2}).kl(50).wr(13).Ke(new aa({color:Rs(128,128,128,100)})).wl("Arial").Tl(500).setPointerEvents(!1),t.Sa().ba()};t.R("resize",()=>{i()}),setTimeout(i,0),setInterval(()=>{e&&e.Ma()<t.Za()-1?i():e||i()},1e3)})(v):g.readyState===ZS[JS(-1,0)].DONE&&x(),v}})(s,n)),((t,e,i,s)=>{var r,n,o,a,h,c,u,d;let f;if(i&&i.license){const t=i.license.split("-");f=t[t.length-1]}const g=null===(r=null==i?void 0:i.webgl)||void 0===r?void 0:r.version,p={zD:null===(n=null==i?void 0:i.sharedContextOptions)||void 0===n?void 0:n.canvas,Ia:null==i?void 0:i.warnings,ZD:"webgl1"===g?1:"webgl2"===g?2:void 0,jD:!1!==(null===(o=null==i?void 0:i.sharedContextOptions)||void 0===o?void 0:o.antialias),YD:(null===(a=null==i?void 0:i.sharedContextOptions)||void 0===a?void 0:a.devicePixelRatio)||void 0,hR:(null===(h=null==i?void 0:i.sharedContextOptions)||void 0===h?void 0:h.noCanvasStyles)||void 0,aR:(null===(c=null==i?void 0:i.sharedContextOptions)||void 0===c?void 0:c.noCanvasTransform)||void 0,WD:!1!==(null===(u=null==i?void 0:i.sharedContextOptions)||void 0===u?void 0:u.useStackingOrder),XD:!1!==(null===(d=null==i?void 0:i.sharedContextOptions)||void 0===d?void 0:d.useIndividualCanvas),rR:f||void 0},y=new jv(p),m=e=>t(l(l({},e),{},{textRenderer:e.textRenderer?e.textRenderer:void 0,textPixelSnappingEnabled:void 0!==(null==e?void 0:e.textPixelSnappingEnabled)?e.textPixelSnappingEnabled:!(null==e?void 0:e.textRenderer)&&void 0}),y);return{Dashboard:Wv(m,e,i,s),ChartXY:qv(m,e,i,s),Spider:Qv(m,e,i,s),Polar:Kv(m,e,i,s),Pie:$v(m,e,i,s),UIPanel:Jv(m,e,i,s),Gauge:tx(m,e,i,s),Funnel:ex(m,e,i,s),Pyramid:ix(m,e,i,s),Chart3D:rx(m,e,i,s),Map:sx(m,e,i,s),DataGrid:nx(m,e,i,s),BarChart:ox(m,e,i,s),ParallelCoordinateChart:lx(m,e,i,s),ZoomBandChart:ax(m,e,i,s),TreeMapChart:hx(m,e,i,s),dispose:y.N.bind(y),layout:y.fR.bind(y)}})(o,n.e,r,n.l)})({license:"0002-n471roZedVvXjESj12yx1BTzC8DaLgCK9ZeGXnVPzY1bt81trgysKw4pTqaAxLRR1EXaopIobam+c49LDji48UiQRmhQ-MEQCIEP6YemSXSLzgeJNquFLAR5ToruBe7WlTM2NHOe7b3IWAiB8hqfuPyATjsRDs8+ZQC6eAHFrNHAhiYVqSMEN8/92Xw==",licenseInformation:{appTitle:"LightningChart JS Trial",company:"LightningChart Ltd."},sharedContextOptions:{useIndividualCanvas:!0}}),r(e.current)}catch(bs){console.error(bs)}return()=>{e.current&&"dispose"in e.current&&(e.current.dispose(),e.current=null,r(void 0))}},[]),(0,yA.jsx)(yA.Fragment,{children:(0,yA.jsx)(mA.Provider,{value:i,children:t.children})})}function xA(t){const{data:e}=t,i=(0,s.useId)(),r=(0,s.useContext)(mA),[n,o]=(0,s.useState)(void 0);return(0,s.useEffect)(()=>{const t=document.getElementById(i);if(!t)return;if(!r)return void console.log("LC context not ready yet");const e=r.ChartXY({theme:Ly.darkGold,container:t}),s=e.addLineSeries();return o({chart:e,lineSeries:s}),()=>{e.dispose()}},[i,r]),(0,s.useEffect)(()=>{n&&e&&!n.chart.isDisposed()&&n.lineSeries.setSamples({y:e})},[n,e]),(0,yA.jsx)("div",{id:i,style:{width:"100%",height:"100%"}})}function bA(t){const{data:e}=t,i=(0,s.useId)(),r=(0,s.useContext)(mA),[n,o]=(0,s.useState)(void 0);return(0,s.useEffect)(()=>{const t=document.getElementById(i);if(!t)return;if(!r)return void console.log("LC context not ready yet");const e=r.ChartXY({theme:Ly.darkGold,container:t}),s=e.addLineSeries();return o({chart:e,lineSeries:s}),()=>{e.dispose()}},[i,r]),(0,s.useEffect)(()=>{n&&e&&!n.chart.isDisposed()&&n.lineSeries.setSamples({y:e})},[n,e]),(0,yA.jsx)("div",{id:i,style:{width:"100%",height:"100%"}})}const SA=()=>{const t=[];let e=0;for(let i=0;i<1e5;i+=1){const i=e+(2*Math.random()-1);t.push(i),e=i}return t},AA=()=>{console.log("Dashboard render");const t=SA();return(0,yA.jsxs)("div",{children:[(0,yA.jsx)("h1",{children:"Wellness Dashboard"}),(0,yA.jsxs)("div",{className:"dashboard-grid",children:[(0,yA.jsxs)("div",{className:"card",id:"multi",children:[(0,yA.jsx)("div",{className:"chart",children:(0,yA.jsx)(xA,{data:t})}),(0,yA.jsx)("div",{className:"chart",children:(0,yA.jsx)(xA,{data:t})}),(0,yA.jsx)("div",{className:"chart",children:(0,yA.jsx)(bA,{data:t})})]}),(0,yA.jsx)("div",{className:"card",id:"stress",children:(0,yA.jsx)("h2",{children:"stress"})}),(0,yA.jsx)("div",{className:"card",id:"steps",children:(0,yA.jsx)("h2",{children:"steps"})}),(0,yA.jsx)("div",{className:"card",id:"status",children:(0,yA.jsx)("h2",{children:"status"})}),(0,yA.jsx)("div",{className:"card",id:"avgstages",children:(0,yA.jsx)("h2",{children:"avgstages"})}),(0,yA.jsx)("div",{className:"card",id:"stages",children:(0,yA.jsx)("h2",{children:"stages"})}),(0,yA.jsx)("div",{className:"card",id:"index",children:(0,yA.jsx)("h2",{children:"index"})}),(0,yA.jsx)("div",{className:"card",id:"activity",children:(0,yA.jsx)("h2",{children:"activity"})})]})]})};const EA=function(){return(0,yA.jsx)(vA,{children:(0,yA.jsx)("div",{className:"App",children:(0,yA.jsx)(AA,{})})})},kA=t=>{t&&t instanceof Function&&i.e(317).then(i.bind(i,317)).then(e=>{let{getCLS:i,getFID:s,getFCP:r,getLCP:n,getTTFB:o}=e;i(t),s(t),r(t),n(t),o(t)})};r.createRoot(document.getElementById("root")).render((0,yA.jsx)(s.StrictMode,{children:(0,yA.jsx)(EA,{})})),kA()})();
//# sourceMappingURL=main.76b50aa6.js.map