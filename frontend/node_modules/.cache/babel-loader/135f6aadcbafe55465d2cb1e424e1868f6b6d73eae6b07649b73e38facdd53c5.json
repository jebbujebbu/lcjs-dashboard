{"ast":null,"code":"var _jsxFileName = \"D:\\\\Repos\\\\lcjs-dashboard\\\\frontend\\\\src\\\\components\\\\charts\\\\PieChart.jsx\",\n  _s = $RefreshSig$();\nimport { PieChartTypes, SliceLabelFormatters, Themes, emptyFill } from \"@lightningchart/lcjs\";\nimport { useEffect, useState, useContext, useId } from \"react\";\nimport { LCContext } from \"../../LC\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PieChart({\n  data,\n  title\n}) {\n  _s();\n  const id = useId();\n  const lc = useContext(LCContext);\n  const [chart, setChart] = useState(undefined);\n  useEffect(() => {\n    const container = document.getElementById(id);\n    if (!container || !lc) return;\n    const pieType = window.innerWidth > 599 ? PieChartTypes.LabelsOnSides : PieChartTypes.LabelsInsideSlices;\n    const pie = lc.Pie({\n      theme: Themes.cyberSpace,\n      type: pieType,\n      container: container\n    });\n    pie.setTitle(title || \"Sleep Stages\").setMultipleSliceExplosion(true).setLabelFormatter(SliceLabelFormatters.NamePlusRelativeValue).setBackgroundFillStyle(emptyFill);\n    setChart(pie);\n    return () => {\n      // Destroy chart when component lifecycle ends.\n      pie.dispose();\n    };\n  }, [id, lc, title]);\n  useEffect(() => {\n    if (!chart || chart.isDisposed() || !Array.isArray(data)) return;\n    console.log(`PieChart ${title} update, data:`, data);\n    const slices = chart.getSlices();\n    data.forEach(item => {\n      const slice = slices.find(s => s.getName() === item.name);\n      if (slice) {\n        slice.setValue(item.value);\n      } else {\n        chart.addSlice(item.name, item.value);\n      }\n    });\n  }, [chart, data, title]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: id,\n    style: {\n      width: \"100%\",\n      height: \"100%\"\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 10\n  }, this);\n}\n_s(PieChart, \"lPoGF9T2AB4o0eYXL6tWsHPot3c=\", false, function () {\n  return [useId];\n});\n_c = PieChart;\nvar _c;\n$RefreshReg$(_c, \"PieChart\");","map":{"version":3,"names":["PieChartTypes","SliceLabelFormatters","Themes","emptyFill","useEffect","useState","useContext","useId","LCContext","jsxDEV","_jsxDEV","PieChart","data","title","_s","id","lc","chart","setChart","undefined","container","document","getElementById","pieType","window","innerWidth","LabelsOnSides","LabelsInsideSlices","pie","Pie","theme","cyberSpace","type","setTitle","setMultipleSliceExplosion","setLabelFormatter","NamePlusRelativeValue","setBackgroundFillStyle","dispose","isDisposed","Array","isArray","console","log","slices","getSlices","forEach","item","slice","find","s","getName","name","setValue","value","addSlice","style","width","height","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/Repos/lcjs-dashboard/frontend/src/components/charts/PieChart.jsx"],"sourcesContent":["import { PieChartTypes, SliceLabelFormatters, Themes, emptyFill } from \"@lightningchart/lcjs\";\r\nimport { useEffect, useState, useContext, useId } from \"react\";\r\nimport { LCContext } from \"../../LC\";\r\n\r\nexport default function PieChart({ data, title }) {\r\n  const id = useId();\r\n  const lc = useContext(LCContext);\r\n  const [chart, setChart] = useState(undefined);\r\n\r\n  useEffect(() => {\r\n    const container = document.getElementById(id);\r\n    if (!container || !lc) return;\r\n\r\n    const pieType =\r\n      window.innerWidth > 599\r\n        ? PieChartTypes.LabelsOnSides\r\n        : PieChartTypes.LabelsInsideSlices;\r\n\r\n    const pie = lc.Pie({\r\n      theme: Themes.cyberSpace,\r\n      type: pieType,\r\n      container: container,\r\n    });\r\n\r\n    pie.setTitle(title || \"Sleep Stages\")\r\n      .setMultipleSliceExplosion(true)\r\n      .setLabelFormatter(SliceLabelFormatters.NamePlusRelativeValue)\r\n      .setBackgroundFillStyle(emptyFill);\r\n\r\n    setChart(pie);\r\n\r\n    return () => {\r\n      // Destroy chart when component lifecycle ends.\r\n      pie.dispose();\r\n    };\r\n  }, [id, lc, title]);\r\n\r\n  useEffect(() => {\r\n    if (!chart || chart.isDisposed() || !Array.isArray(data)) return;\r\n\r\n    console.log(`PieChart ${title} update, data:`, data);\r\n\r\n    const slices = chart.getSlices();\r\n\r\n    data.forEach((item) => {\r\n      const slice = slices.find((s) => s.getName() === item.name);\r\n      if (slice) {\r\n        slice.setValue(item.value);\r\n      } else {\r\n        chart.addSlice(item.name, item.value);\r\n      }\r\n    });\r\n  }, [chart, data, title]);\r\n\r\n  return <div id={id} style={{ width: \"100%\", height: \"100%\" }}></div>;\r\n}\r\n"],"mappings":";;AAAA,SAASA,aAAa,EAAEC,oBAAoB,EAAEC,MAAM,EAAEC,SAAS,QAAQ,sBAAsB;AAC7F,SAASC,SAAS,EAAEC,QAAQ,EAAEC,UAAU,EAAEC,KAAK,QAAQ,OAAO;AAC9D,SAASC,SAAS,QAAQ,UAAU;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAErC,eAAe,SAASC,QAAQA,CAAC;EAAEC,IAAI;EAAEC;AAAM,CAAC,EAAE;EAAAC,EAAA;EAChD,MAAMC,EAAE,GAAGR,KAAK,CAAC,CAAC;EAClB,MAAMS,EAAE,GAAGV,UAAU,CAACE,SAAS,CAAC;EAChC,MAAM,CAACS,KAAK,EAAEC,QAAQ,CAAC,GAAGb,QAAQ,CAACc,SAAS,CAAC;EAE7Cf,SAAS,CAAC,MAAM;IACd,MAAMgB,SAAS,GAAGC,QAAQ,CAACC,cAAc,CAACP,EAAE,CAAC;IAC7C,IAAI,CAACK,SAAS,IAAI,CAACJ,EAAE,EAAE;IAEvB,MAAMO,OAAO,GACXC,MAAM,CAACC,UAAU,GAAG,GAAG,GACnBzB,aAAa,CAAC0B,aAAa,GAC3B1B,aAAa,CAAC2B,kBAAkB;IAEtC,MAAMC,GAAG,GAAGZ,EAAE,CAACa,GAAG,CAAC;MACjBC,KAAK,EAAE5B,MAAM,CAAC6B,UAAU;MACxBC,IAAI,EAAET,OAAO;MACbH,SAAS,EAAEA;IACb,CAAC,CAAC;IAEFQ,GAAG,CAACK,QAAQ,CAACpB,KAAK,IAAI,cAAc,CAAC,CAClCqB,yBAAyB,CAAC,IAAI,CAAC,CAC/BC,iBAAiB,CAAClC,oBAAoB,CAACmC,qBAAqB,CAAC,CAC7DC,sBAAsB,CAAClC,SAAS,CAAC;IAEpCe,QAAQ,CAACU,GAAG,CAAC;IAEb,OAAO,MAAM;MACX;MACAA,GAAG,CAACU,OAAO,CAAC,CAAC;IACf,CAAC;EACH,CAAC,EAAE,CAACvB,EAAE,EAAEC,EAAE,EAAEH,KAAK,CAAC,CAAC;EAEnBT,SAAS,CAAC,MAAM;IACd,IAAI,CAACa,KAAK,IAAIA,KAAK,CAACsB,UAAU,CAAC,CAAC,IAAI,CAACC,KAAK,CAACC,OAAO,CAAC7B,IAAI,CAAC,EAAE;IAE1D8B,OAAO,CAACC,GAAG,CAAC,YAAY9B,KAAK,gBAAgB,EAAED,IAAI,CAAC;IAEpD,MAAMgC,MAAM,GAAG3B,KAAK,CAAC4B,SAAS,CAAC,CAAC;IAEhCjC,IAAI,CAACkC,OAAO,CAAEC,IAAI,IAAK;MACrB,MAAMC,KAAK,GAAGJ,MAAM,CAACK,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACC,OAAO,CAAC,CAAC,KAAKJ,IAAI,CAACK,IAAI,CAAC;MAC3D,IAAIJ,KAAK,EAAE;QACTA,KAAK,CAACK,QAAQ,CAACN,IAAI,CAACO,KAAK,CAAC;MAC5B,CAAC,MAAM;QACLrC,KAAK,CAACsC,QAAQ,CAACR,IAAI,CAACK,IAAI,EAAEL,IAAI,CAACO,KAAK,CAAC;MACvC;IACF,CAAC,CAAC;EACJ,CAAC,EAAE,CAACrC,KAAK,EAAEL,IAAI,EAAEC,KAAK,CAAC,CAAC;EAExB,oBAAOH,OAAA;IAAKK,EAAE,EAAEA,EAAG;IAACyC,KAAK,EAAE;MAAEC,KAAK,EAAE,MAAM;MAAEC,MAAM,EAAE;IAAO;EAAE;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAM,CAAC;AACtE;AAAChD,EAAA,CAnDuBH,QAAQ;EAAA,QACnBJ,KAAK;AAAA;AAAAwD,EAAA,GADMpD,QAAQ;AAAA,IAAAoD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}